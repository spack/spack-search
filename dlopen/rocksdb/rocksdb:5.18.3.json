{
    "matches": {
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/port/jemalloc_helper.h": "//  Copyright (c) 2011-present, Facebook, Inc.  All rights reserved.\n//  This source code is licensed under both the GPLv2 (found in the\n//  COPYING file in the root directory) and Apache 2.0 License\n//  (found in the LICENSE.Apache file in the root directory).\n\n#pragma once\n\n#ifdef ROCKSDB_JEMALLOC\n#ifdef __FreeBSD__\n#include <malloc_np.h>\n#else\n#include <jemalloc/jemalloc.h>\n#endif\n\n// Declare non-standard jemalloc APIs as weak symbols. We can null-check these\n// symbols to detect whether jemalloc is linked with the binary.\nextern \"C\" void* mallocx(size_t, int) __attribute__((__weak__));\nextern \"C\" void* rallocx(void*, size_t, int) __attribute__((__weak__));\nextern \"C\" size_t xallocx(void*, size_t, size_t, int) __attribute__((__weak__));\nextern \"C\" size_t sallocx(const void*, int) __attribute__((__weak__));\nextern \"C\" void dallocx(void*, int) __attribute__((__weak__));\nextern \"C\" void sdallocx(void*, size_t, int) __attribute__((__weak__));\nextern \"C\" size_t nallocx(size_t, int) __attribute__((__weak__));\nextern \"C\" int mallctl(const char*, void*, size_t*, void*, size_t)\n    __attribute__((__weak__));\nextern \"C\" int mallctlnametomib(const char*, size_t*, size_t*)\n    __attribute__((__weak__));\nextern \"C\" int mallctlbymib(const size_t*, size_t, void*, size_t*, void*,\n                            size_t) __attribute__((__weak__));\nextern \"C\" void malloc_stats_print(void (*)(void*, const char*), void*,\n                                   const char*) __attribute__((__weak__));\nextern \"C\" size_t malloc_usable_size(JEMALLOC_USABLE_SIZE_CONST void*)\n    JEMALLOC_CXX_THROW __attribute__((__weak__));\n\n// Check if Jemalloc is linked with the binary. Note the main program might be\n// using a different memory allocator even this method return true.\n// It is loosely based on folly::usingJEMalloc(), minus the check that actually\n// allocate memory and see if it is through jemalloc, to handle the dlopen()\n// case:\n// https://github.com/facebook/folly/blob/76cf8b5841fb33137cfbf8b224f0226437c855bc/folly/memory/Malloc.h#L147\nstatic inline bool HasJemalloc() {\n  return mallocx != nullptr && rallocx != nullptr && xallocx != nullptr &&\n         sallocx != nullptr && dallocx != nullptr && sdallocx != nullptr &&\n         nallocx != nullptr && mallctl != nullptr &&\n         mallctlnametomib != nullptr && mallctlbymib != nullptr &&\n         malloc_stats_print != nullptr && malloc_usable_size != nullptr;\n}\n\n#endif  // ROCKSDB_JEMALLOC\n"
    },
    "skipped": [
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/WINDOWS_PORT.md",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/favicon.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/og_image.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/pcache-filelayout.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/pcache-blockindex.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/pcache-readiopath.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/Resize-of-20140327_200754-300x225.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/pcache-writeiopath.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/pcache-fileindex.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/pcache-tieredstorage.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/tree_example1.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/binaryseek.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/compaction/l0-l1-contend.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/compaction/l1-l2-contend.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/compaction/part-range-old.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/compaction/full-range.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/delrange/delrange_collapsed.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/delrange/delrange_sst_blocks.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/delrange/delrange_write_path.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/delrange/delrange_key_schema.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/delrange/delrange_uncollapsed.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/data-block-hash-index/perf-cache-miss.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/data-block-hash-index/hash-index-data-structure.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/data-block-hash-index/block-format-binary-seek.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/data-block-hash-index/block-format-hash-index.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/data-block-hash-index/perf-throughput.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/rate-limiter/write-KBps-series.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/rate-limiter/write-KBps-cdf.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/images/rate-limiter/auto-tuned-write-KBps-series.png",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Regular.woff",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Black.woff",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-BlackItalic.woff2",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Regular.woff2",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Italic.woff",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Italic.woff2",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Light.woff",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-BlackItalic.woff",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Light.woff2",
        "/tmp/vanessa/spack-stage/spack-stage-rocksdb-5.18.3-neru7sydciy4amgiascuu6bxmyxfphrp/spack-src/docs/static/fonts/LatoLatin-Black.woff2"
    ],
    "total_files": 1358
}