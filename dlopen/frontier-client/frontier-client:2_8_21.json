{
    "matches": {
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/client/pacparser-dlopen.c": "/*\n * pacparser dlopen interface\n * \n * Author: Dave Dykstra\n *\n * $Id$\n *\n * Copyright (c) 2013, FERMI NATIONAL ACCELERATOR LABORATORY\n * All rights reserved. \n *\n * For details of the Fermitools (BSD) license see Fermilab-2009.txt or\n *  http://fermitools.fnal.gov/about/terms.html\n *\n */\n\n#include <dlfcn.h>\n#include \"pacparser.h\"\n#include \"frontier_client/frontier_error.h\"\n\nstatic void *pp_dlhandle;\nstatic int (*pp_init)(void);\nstatic void (*pp_set_error_printer)(pacparser_error_printer);\nstatic void (*pp_setmyip)(const char *);\nstatic int (*pp_parse_pac_string)(const char *);\nstatic char *(*pp_find_proxy)(const char *,const char *);\nstatic void (*pp_cleanup)(void);\n\nstatic void *pp_funcps[] =\n {\n  &pp_init,\n  &pp_set_error_printer,\n  &pp_setmyip,\n  &pp_parse_pac_string,\n  &pp_find_proxy,\n  &pp_cleanup,\n };\nstatic const char *pp_names[]=\n {\n  \"pacparser_init\",\n  \"pacparser_set_error_printer\",\n  \"pacparser_setmyip\",\n  \"pacparser_parse_pac_string\",\n  \"pacparser_find_proxy\",\n  \"pacparser_cleanup\",\n };\n\nint frontier_pacparser_init(void)\n {\n  const char *error;\n  int i;\n\n  /* add .1 on the end because if the API ever changes in an incompatible\n   * way they're supposed to change it to .2  */\n  pp_dlhandle=dlopen(\"libpacparser.so.1\",RTLD_LAZY);\n  if(!pp_dlhandle)\n   {\n    frontier_setErrorMsg(__FILE__,__LINE__,\n       \"config error: cannot dlopen %s\",dlerror());\n    return FRONTIER_ECFG;\n   }\n  \n  dlerror();\t/* Clear any existing error */\n\n  for(i=0;i<(sizeof(pp_names)/sizeof(pp_names[0]));i++)\n   {\n    *(void **)(pp_funcps[i])=dlsym(pp_dlhandle,pp_names[i]);\n    if((error=dlerror())!=0)\n     {\n      frontier_setErrorMsg(__FILE__,__LINE__, \"config error: dlsym %s\",error);\n      dlclose(pp_dlhandle);\n      pp_dlhandle=0;\n      return FRONTIER_ECFG;\n     }\n   }\n\n  return FRONTIER_OK;\n }\n\nint pacparser_init(void)\n {\n  if(!pp_dlhandle)\n    return 0;\n  return (*pp_init)();\n }\n\nvoid pacparser_set_error_printer(pacparser_error_printer func)\n {\n  if(!pp_dlhandle)\n    return;\n  (*pp_set_error_printer)(func);\n  return;\n }\n\nvoid pacparser_setmyip(const char *ip)\n {\n  if(!pp_dlhandle)\n    return;\n  (*pp_setmyip)(ip);\n }\n\nint pacparser_parse_pac_string(const char *string)\n {\n  if(!pp_dlhandle)\n    return 0;\n  return (*pp_parse_pac_string)(string);\n }\n\nchar *pacparser_find_proxy(const char *url,const char *host)\n {\n  if(!pp_dlhandle)\n    return 0;\n  return (*pp_find_proxy)(url,host);\n }\n\nvoid pacparser_cleanup(void)\n {\n  if(!pp_dlhandle)\n    return;\n  (*pp_cleanup)();\n  dlclose(pp_dlhandle);\n  pp_dlhandle=0;\n }\n"
    },
    "skipped": [
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/web/frontier_pic.jpg",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/web/frontier_left.png",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/web/frontier_right.png",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/web/WEB-INF/lib/apmon.jar",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/roadmap/architecture.png",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/roadmap/adding_defs.png",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/roadmap/TheNewFroNtier.pdf",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/roadmap/configurations.vsd",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/roadmap/architecture.vsd",
        "/tmp/vanessa/spack-stage/spack-stage-frontier-client-2_8_21-ukwjwbtsmhemozz5qvt4wtrxw5qhmjhr/spack-src/roadmap/adding_defs.vsd"
    ],
    "total_files": 154
}