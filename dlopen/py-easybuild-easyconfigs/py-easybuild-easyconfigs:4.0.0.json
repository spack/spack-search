{
    "matches": {
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/a/arpack-ng/arpack-ng-3.1.3-configure-mpi.patch": "From 9e319b3c1a6d1cbe074cd52bfbce7b4965149bc4 Mon Sep 17 00:00:00 2001\nFrom: Ward Poelmans <wpoely86@gmail.com>\nDate: Mon, 14 Oct 2013 10:52:10 +0200\nSubject: [PATCH 1/2] Updated autoconf, automake and libtool scripts\n\nUsing autoreconf -i -f and more recent version of the autotools. This\nshould fix a problem with libtool not recognizing Intel MPI.\n---\n CHANGES                            |   3 +\n Makefile.in                        |  12 +-\n PARPACK/EXAMPLES/BLACS/Makefile.in |   2 +-\n PARPACK/EXAMPLES/MPI/Makefile.in   |   2 +-\n PARPACK/Makefile.in                |   2 +-\n PARPACK/SRC/BLACS/Makefile.in      |   2 +-\n PARPACK/SRC/MPI/Makefile.in        |   2 +-\n PARPACK/SRC/Makefile.in            |   2 +-\n PARPACK/UTIL/BLACS/Makefile.in     |   2 +-\n PARPACK/UTIL/MPI/Makefile.in       |   2 +-\n PARPACK/UTIL/Makefile.in           |   2 +-\n SRC/Makefile.in                    |   2 +-\n TESTS/Makefile.in                  |   2 +-\n UTIL/Makefile.in                   |   2 +-\n aclocal.m4                         | 122 +++++++++-\n compile                            |   1 +\n config.guess                       | 207 ++++++++++-------\n config.sub                         | 152 +++++++-----\n configure                          | 405 +++++++++++++++++++++-----------\n configure.ac                       |   4 +-\n install-sh                         |  35 +--\n ltmain.sh                          |  32 ++-\n m4/libtool.m4                      | 297 +++++++++++++++++-------\n m4/ltoptions.m4                    |  19 +-\n missing                            | 461 ++++++++++++-------------------------\n 25 files changed, 1040 insertions(+), 734 deletions(-)\n create mode 120000 compile\n\ndiff --git a/CHANGES b/CHANGES\nindex 39bb865..c298714 100644\n--- a/CHANGES\n+++ b/CHANGES\n@@ -18,6 +18,9 @@ arpack-ng - 3.1.4\n  * Use configure supplied blas and lapack in the pkg-config.\n    Thanks to Ward Poelmans (Closes: #1320)\n \n+ * Switch to automake 1.14 + libtool 2.4.2.\n+   Thanks to Ward Poelmans (Closes: #1321)\n+\n  -- Sylvestre Ledru <sylvestre.ledru@scilab-enterprises.com>  Mon, 07 Oct 2013 14:24:42 +0200\n \n arpack-ng - 3.1.3\ndiff --git a/Makefile.in b/Makefile.in\nindex ad39e7d..0487f2b 100644\n--- a/Makefile.in\n+++ b/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\n@@ -83,8 +83,8 @@ host_triplet = @host@\n subdir = .\n DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/Makefile.am \\\n \t$(top_srcdir)/configure $(am__configure_deps) \\\n-\t$(srcdir)/arpack.pc.in COPYING README TODO config.guess \\\n-\tconfig.sub depcomp install-sh missing ltmain.sh\n+\t$(srcdir)/arpack.pc.in COPYING README TODO compile \\\n+\tconfig.guess config.sub depcomp install-sh missing ltmain.sh\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/m4/ax_blas.m4 \\\n \t$(top_srcdir)/m4/ax_lapack.m4 $(top_srcdir)/m4/ax_mpi.m4 \\\n@@ -713,10 +713,16 @@ dist-xz: distdir\n \t$(am__post_remove_distdir)\n \n dist-tarZ: distdir\n+\t@echo WARNING: \"Support for shar distribution archives is\" \\\n+\t               \"deprecated.\" >&2\n+\t@echo WARNING: \"It will be removed altogether in Automake 2.0\" >&2\n \ttardir=$(distdir) && $(am__tar) | compress -c >$(distdir).tar.Z\n \t$(am__post_remove_distdir)\n \n dist-shar: distdir\n+\t@echo WARNING: \"Support for distribution archives compressed with\" \\\n+\t\t       \"legacy program 'compress' is deprecated.\" >&2\n+\t@echo WARNING: \"It will be removed altogether in Automake 2.0\" >&2\n \tshar $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).shar.gz\n \t$(am__post_remove_distdir)\n \ndiff --git a/PARPACK/EXAMPLES/BLACS/Makefile.in b/PARPACK/EXAMPLES/BLACS/Makefile.in\nindex 6b06ad6..85ea451 100644\n--- a/PARPACK/EXAMPLES/BLACS/Makefile.in\n+++ b/PARPACK/EXAMPLES/BLACS/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/EXAMPLES/MPI/Makefile.in b/PARPACK/EXAMPLES/MPI/Makefile.in\nindex 512a500..709e248 100644\n--- a/PARPACK/EXAMPLES/MPI/Makefile.in\n+++ b/PARPACK/EXAMPLES/MPI/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/Makefile.in b/PARPACK/Makefile.in\nindex 7559afb..792ed16 100644\n--- a/PARPACK/Makefile.in\n+++ b/PARPACK/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/SRC/BLACS/Makefile.in b/PARPACK/SRC/BLACS/Makefile.in\nindex 1b6a0fe..b6d14d9 100644\n--- a/PARPACK/SRC/BLACS/Makefile.in\n+++ b/PARPACK/SRC/BLACS/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/SRC/MPI/Makefile.in b/PARPACK/SRC/MPI/Makefile.in\nindex 273065e..df8bbc3 100644\n--- a/PARPACK/SRC/MPI/Makefile.in\n+++ b/PARPACK/SRC/MPI/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/SRC/Makefile.in b/PARPACK/SRC/Makefile.in\nindex 6e8f437..0fb3ac8 100644\n--- a/PARPACK/SRC/Makefile.in\n+++ b/PARPACK/SRC/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/UTIL/BLACS/Makefile.in b/PARPACK/UTIL/BLACS/Makefile.in\nindex 11a6b0a..18bdf88 100644\n--- a/PARPACK/UTIL/BLACS/Makefile.in\n+++ b/PARPACK/UTIL/BLACS/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/UTIL/MPI/Makefile.in b/PARPACK/UTIL/MPI/Makefile.in\nindex 7551a3c..558e2f1 100644\n--- a/PARPACK/UTIL/MPI/Makefile.in\n+++ b/PARPACK/UTIL/MPI/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/PARPACK/UTIL/Makefile.in b/PARPACK/UTIL/Makefile.in\nindex 0db143f..507574f 100644\n--- a/PARPACK/UTIL/Makefile.in\n+++ b/PARPACK/UTIL/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/SRC/Makefile.in b/SRC/Makefile.in\nindex 9802729..e04799f 100644\n--- a/SRC/Makefile.in\n+++ b/SRC/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/TESTS/Makefile.in b/TESTS/Makefile.in\nindex e5a353e..cd41616 100644\n--- a/TESTS/Makefile.in\n+++ b/TESTS/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/UTIL/Makefile.in b/UTIL/Makefile.in\nindex 824730d..4b7990b 100644\n--- a/UTIL/Makefile.in\n+++ b/UTIL/Makefile.in\n@@ -1,4 +1,4 @@\n-# Makefile.in generated by automake 1.13.3 from Makefile.am.\n+# Makefile.in generated by automake 1.14 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994-2013 Free Software Foundation, Inc.\ndiff --git a/aclocal.m4 b/aclocal.m4\nindex 375d1a7..d9df277 100644\n--- a/aclocal.m4\n+++ b/aclocal.m4\n@@ -1,4 +1,4 @@\n-# generated automatically by aclocal 1.13.3 -*- Autoconf -*-\n+# generated automatically by aclocal 1.14 -*- Autoconf -*-\n \n # Copyright (C) 1996-2013 Free Software Foundation, Inc.\n \n@@ -32,10 +32,10 @@ To do so, use the procedure documented by the package, typically 'autoreconf'.])\n # generated from the m4 files accompanying Automake X.Y.\n # (This private macro should not be called outside this file.)\n AC_DEFUN([AM_AUTOMAKE_VERSION],\n-[am__api_version='1.13'\n+[am__api_version='1.14'\n dnl Some users find AM_AUTOMAKE_VERSION and mistake it for a way to\n dnl require some minimum version.  Point them to the right macro.\n-m4_if([$1], [1.13.3], [],\n+m4_if([$1], [1.14], [],\n       [AC_FATAL([Do not call $0, use AM_INIT_AUTOMAKE([$1]).])])dnl\n ])\n \n@@ -51,7 +51,7 @@ m4_define([_AM_AUTOCONF_VERSION], [])\n # Call AM_AUTOMAKE_VERSION and AM_AUTOMAKE_VERSION so they can be traced.\n # This function is AC_REQUIREd by AM_INIT_AUTOMAKE.\n AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],\n-[AM_AUTOMAKE_VERSION([1.13.3])dnl\n+[AM_AUTOMAKE_VERSION([1.14])dnl\n m4_ifndef([AC_AUTOCONF_VERSION],\n   [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl\n _AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])\n@@ -418,6 +418,12 @@ AC_DEFUN([AM_OUTPUT_DEPENDENCY_COMMANDS],\n # This macro actually does too much.  Some checks are only needed if\n # your package does certain things.  But this isn't really a big deal.\n \n+dnl Redefine AC_PROG_CC to automatically invoke _AM_PROG_CC_C_O.\n+m4_define([AC_PROG_CC],\n+m4_defn([AC_PROG_CC])\n+[_AM_PROG_CC_C_O\n+])\n+\n # AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])\n # AM_INIT_AUTOMAKE([OPTIONS])\n # -----------------------------------------------\n@@ -526,7 +532,48 @@ dnl macro is hooked onto _AC_COMPILER_EXEEXT early, see below.\n AC_CONFIG_COMMANDS_PRE(dnl\n [m4_provide_if([_AM_COMPILER_EXEEXT],\n   [AM_CONDITIONAL([am__EXEEXT], [test -n \"$EXEEXT\"])])])dnl\n-])\n+\n+# POSIX will say in a future version that running \"rm -f\" with no argument\n+# is OK; and we want to be able to make that assumption in our Makefile\n+# recipes.  So use an aggressive probe to check that the usage we want is\n+# actually supported \"in the wild\" to an acceptable degree.\n+# See automake bug#10828.\n+# To make any issue more visible, cause the running configure to be aborted\n+# by default if the 'rm' program in use doesn't match our expectations; the\n+# user can still override this though.\n+if rm -f && rm -fr && rm -rf; then : OK; else\n+  cat >&2 <<'END'\n+Oops!\n+\n+Your 'rm' program seems unable to run without file operands specified\n+on the command line, even when the '-f' option is present.  This is contrary\n+to the behaviour of most rm programs out there, and not conforming with\n+the upcoming POSIX standard: <http://austingroupbugs.net/view.php?id=542>\n+\n+Please tell bug-automake@gnu.org about your system, including the value\n+of your $PATH and any error possibly output before this message.  This\n+can help us improve future automake versions.\n+\n+END\n+  if test x\"$ACCEPT_INFERIOR_RM_PROGRAM\" = x\"yes\"; then\n+    echo 'Configuration will proceed anyway, since you have set the' >&2\n+    echo 'ACCEPT_INFERIOR_RM_PROGRAM variable to \"yes\"' >&2\n+    echo >&2\n+  else\n+    cat >&2 <<'END'\n+Aborting the configuration process, to ensure you take notice of the issue.\n+\n+You can download and install GNU coreutils to get an 'rm' implementation\n+that behaves properly: <http://www.gnu.org/software/coreutils/>.\n+\n+If you want to complete the configuration process using your problematic\n+'rm' anyway, export the environment variable ACCEPT_INFERIOR_RM_PROGRAM\n+to \"yes\", and re-run configure.\n+\n+END\n+    AC_MSG_ERROR([Your 'rm' program is bad, sorry.])\n+  fi\n+fi])\n \n dnl Hook into '_AC_COMPILER_EXEEXT' early to learn its expansion.  Do not\n dnl add the conditional right here, as _AC_COMPILER_EXEEXT may be further\n@@ -534,7 +581,6 @@ dnl mangled by Autoconf and run in a shell conditional statement.\n m4_define([_AC_COMPILER_EXEEXT],\n m4_defn([_AC_COMPILER_EXEEXT])[m4_provide([_AM_COMPILER_EXEEXT])])\n \n-\n # When config.status generates a header, we must update the stamp-h file.\n # This file resides in the same directory as the config header\n # that is generated.  The stamp files are numbered to have different names.\n@@ -752,6 +798,70 @@ AC_DEFUN([_AM_SET_OPTIONS],\n AC_DEFUN([_AM_IF_OPTION],\n [m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])\n \n+# Copyright (C) 1999-2013 Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# _AM_PROG_CC_C_O\n+# ---------------\n+# Like AC_PROG_CC_C_O, but changed for automake.  We rewrite AC_PROG_CC\n+# to automatically call this.\n+AC_DEFUN([_AM_PROG_CC_C_O],\n+[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl\n+AC_REQUIRE_AUX_FILE([compile])dnl\n+AC_LANG_PUSH([C])dnl\n+AC_CACHE_CHECK(\n+  [whether $CC understands -c and -o together],\n+  [am_cv_prog_cc_c_o],\n+  [AC_LANG_CONFTEST([AC_LANG_PROGRAM([])])\n+  # Make sure it works both with $CC and with simple cc.\n+  # Following AC_PROG_CC_C_O, we do the test twice because some\n+  # compilers refuse to overwrite an existing .o file with -o,\n+  # though they will create one.\n+  am_cv_prog_cc_c_o=yes\n+  for am_i in 1 2; do\n+    if AM_RUN_LOG([$CC -c conftest.$ac_ext -o conftest2.$ac_objext]) \\\n+         && test -f conftest2.$ac_objext; then\n+      : OK\n+    else\n+      am_cv_prog_cc_c_o=no\n+      break\n+    fi\n+  done\n+  rm -f core conftest*\n+  unset am_i])\n+if test \"$am_cv_prog_cc_c_o\" != yes; then\n+   # Losing compiler, so override with the script.\n+   # FIXME: It is wrong to rewrite CC.\n+   # But if we don't then we get into trouble of one sort or another.\n+   # A longer-term fix would be to have automake use am__CC in this case,\n+   # and then we could set am__CC=\"\\$(top_srcdir)/compile \\$(CC)\"\n+   CC=\"$am_aux_dir/compile $CC\"\n+fi\n+AC_LANG_POP([C])])\n+\n+# For backward compatibility.\n+AC_DEFUN_ONCE([AM_PROG_CC_C_O], [AC_REQUIRE([AC_PROG_CC])])\n+\n+# Copyright (C) 2001-2013 Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# AM_RUN_LOG(COMMAND)\n+# -------------------\n+# Run COMMAND, save the exit status in ac_status, and log it.\n+# (This has been adapted from Autoconf's _AC_RUN_LOG macro.)\n+AC_DEFUN([AM_RUN_LOG],\n+[{ echo \"$as_me:$LINENO: $1\" >&AS_MESSAGE_LOG_FD\n+   ($1) >&AS_MESSAGE_LOG_FD 2>&AS_MESSAGE_LOG_FD\n+   ac_status=$?\n+   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&AS_MESSAGE_LOG_FD\n+   (exit $ac_status); }])\n+\n # Check to make sure that the build environment is sane.    -*- Autoconf -*-\n \n # Copyright (C) 1996-2013 Free Software Foundation, Inc.\ndiff --git a/config.guess b/config.guess\nindex 40eaed4..b79252d 100755\n--- a/config.guess\n+++ b/config.guess\n@@ -1,14 +1,12 @@\n #! /bin/sh\n # Attempt to guess a canonical system name.\n-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n-#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n-#   2011 Free Software Foundation, Inc.\n+#   Copyright 1992-2013 Free Software Foundation, Inc.\n \n-timestamp='2011-05-11'\n+timestamp='2013-06-10'\n \n # This file is free software; you can redistribute it and/or modify it\n # under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 2 of the License, or\n+# the Free Software Foundation; either version 3 of the License, or\n # (at your option) any later version.\n #\n # This program is distributed in the hope that it will be useful, but\n@@ -17,26 +15,22 @@ timestamp='2011-05-11'\n # General Public License for more details.\n #\n # You should have received a copy of the GNU General Public License\n-# along with this program; if not, write to the Free Software\n-# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA\n-# 02110-1301, USA.\n+# along with this program; if not, see <http://www.gnu.org/licenses/>.\n #\n # As a special exception to the GNU General Public License, if you\n # distribute this file as part of a program that contains a\n # configuration script generated by Autoconf, you may include it under\n-# the same distribution terms that you use for the rest of that program.\n-\n-\n-# Originally written by Per Bothner.  Please send patches (context\n-# diff format) to <config-patches@gnu.org> and include a ChangeLog\n-# entry.\n+# the same distribution terms that you use for the rest of that\n+# program.  This Exception is an additional permission under section 7\n+# of the GNU General Public License, version 3 (\"GPLv3\").\n #\n-# This script attempts to guess a canonical system name similar to\n-# config.sub.  If it succeeds, it prints the system name on stdout, and\n-# exits with 0.  Otherwise, it exits with 1.\n+# Originally written by Per Bothner.\n #\n # You can get the latest version of this script from:\n # http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\n+#\n+# Please send patches with a ChangeLog entry to config-patches@gnu.org.\n+\n \n me=`echo \"$0\" | sed -e 's,.*/,,'`\n \n@@ -56,9 +50,7 @@ version=\"\\\n GNU config.guess ($timestamp)\n \n Originally written by Per Bothner.\n-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n-2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free\n-Software Foundation, Inc.\n+Copyright 1992-2013 Free Software Foundation, Inc.\n \n This is free software; see the source for copying conditions.  There is NO\n warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\"\n@@ -140,12 +132,33 @@ UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown\n UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown\n UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown\n \n+case \"${UNAME_SYSTEM}\" in\n+Linux|GNU|GNU/*)\n+\t# If the system lacks a compiler, then just pick glibc.\n+\t# We could probably try harder.\n+\tLIBC=gnu\n+\n+\teval $set_cc_for_build\n+\tcat <<-EOF > $dummy.c\n+\t#include <features.h>\n+\t#if defined(__UCLIBC__)\n+\tLIBC=uclibc\n+\t#elif defined(__dietlibc__)\n+\tLIBC=dietlibc\n+\t#else\n+\tLIBC=gnu\n+\t#endif\n+\tEOF\n+\teval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`\n+\t;;\n+esac\n+\n # Note: order is significant - the case branches are not exclusive.\n \n case \"${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}\" in\n     *:NetBSD:*:*)\n \t# NetBSD (nbsd) targets should (where applicable) match one or\n-\t# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,\n+\t# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,\n \t# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently\n \t# switched to ELF, *-*-netbsd* would select the old\n \t# object file format.  This provides both forward\n@@ -202,6 +215,10 @@ case \"${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}\" in\n \t# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.\n \techo \"${machine}-${os}${release}\"\n \texit ;;\n+    *:Bitrig:*:*)\n+\tUNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`\n+\techo ${UNAME_MACHINE_ARCH}-unknown-bitrig${UNAME_RELEASE}\n+\texit ;;\n     *:OpenBSD:*:*)\n \tUNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`\n \techo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}\n@@ -304,7 +321,7 @@ case \"${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}\" in\n     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)\n \techo arm-acorn-riscix${UNAME_RELEASE}\n \texit ;;\n-    arm:riscos:*:*|arm:RISCOS:*:*)\n+    arm*:riscos:*:*|arm*:RISCOS:*:*)\n \techo arm-unknown-riscos\n \texit ;;\n     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)\n@@ -792,21 +809,26 @@ EOF\n \techo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}\n \texit ;;\n     *:FreeBSD:*:*)\n-\tcase ${UNAME_MACHINE} in\n-\t    pc98)\n-\t\techo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;\n+\tUNAME_PROCESSOR=`/usr/bin/uname -p`\n+\tcase ${UNAME_PROCESSOR} in\n \t    amd64)\n \t\techo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;\n \t    *)\n-\t\techo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;\n+\t\techo ${UNAME_PROCESSOR}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;\n \tesac\n \texit ;;\n     i*:CYGWIN*:*)\n \techo ${UNAME_MACHINE}-pc-cygwin\n \texit ;;\n+    *:MINGW64*:*)\n+\techo ${UNAME_MACHINE}-pc-mingw64\n+\texit ;;\n     *:MINGW*:*)\n \techo ${UNAME_MACHINE}-pc-mingw32\n \texit ;;\n+    i*:MSYS*:*)\n+\techo ${UNAME_MACHINE}-pc-msys\n+\texit ;;\n     i*:windows32*:*)\n \t# uname -m includes \"-pc\" on this system.\n \techo ${UNAME_MACHINE}-mingw32\n@@ -852,15 +874,22 @@ EOF\n \texit ;;\n     *:GNU:*:*)\n \t# the GNU system\n-\techo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`\n+\techo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-${LIBC}`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`\n \texit ;;\n     *:GNU/*:*:*)\n \t# other systems with GNU libc and userland\n-\techo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu\n+\techo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-${LIBC}\n \texit ;;\n     i*86:Minix:*:*)\n \techo ${UNAME_MACHINE}-pc-minix\n \texit ;;\n+    aarch64:Linux:*:*)\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n+\texit ;;\n+    aarch64_be:Linux:*:*)\n+\tUNAME_MACHINE=aarch64_be\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n+\texit ;;\n     alpha:Linux:*:*)\n \tcase `sed -n '/^cpu model/s/^.*: \\(.*\\)/\\1/p' < /proc/cpuinfo` in\n \t  EV5)   UNAME_MACHINE=alphaev5 ;;\n@@ -872,56 +901,54 @@ EOF\n \t  EV68*) UNAME_MACHINE=alphaev68 ;;\n \tesac\n \tobjdump --private-headers /bin/sh | grep -q ld.so.1\n-\tif test \"$?\" = 0 ; then LIBC=\"libc1\" ; else LIBC=\"\" ; fi\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}\n+\tif test \"$?\" = 0 ; then LIBC=\"gnulibc1\" ; fi\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n+\texit ;;\n+    arc:Linux:*:* | arceb:Linux:*:*)\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     arm*:Linux:*:*)\n \teval $set_cc_for_build\n \tif echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \\\n \t    | grep -q __ARM_EABI__\n \tthen\n-\t    echo ${UNAME_MACHINE}-unknown-linux-gnu\n+\t    echo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \telse\n \t    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \\\n \t\t| grep -q __ARM_PCS_VFP\n \t    then\n-\t\techo ${UNAME_MACHINE}-unknown-linux-gnueabi\n+\t\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabi\n \t    else\n-\t\techo ${UNAME_MACHINE}-unknown-linux-gnueabihf\n+\t\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabihf\n \t    fi\n \tfi\n \texit ;;\n     avr32*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     cris:Linux:*:*)\n-\techo cris-axis-linux-gnu\n+\techo ${UNAME_MACHINE}-axis-linux-${LIBC}\n \texit ;;\n     crisv32:Linux:*:*)\n-\techo crisv32-axis-linux-gnu\n+\techo ${UNAME_MACHINE}-axis-linux-${LIBC}\n \texit ;;\n     frv:Linux:*:*)\n-\techo frv-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n+\texit ;;\n+    hexagon:Linux:*:*)\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     i*86:Linux:*:*)\n-\tLIBC=gnu\n-\teval $set_cc_for_build\n-\tsed 's/^\t//' << EOF >$dummy.c\n-\t#ifdef __dietlibc__\n-\tLIBC=dietlibc\n-\t#endif\n-EOF\n-\teval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`\n-\techo \"${UNAME_MACHINE}-pc-linux-${LIBC}\"\n+\techo ${UNAME_MACHINE}-pc-linux-${LIBC}\n \texit ;;\n     ia64:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     m32r*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     m68*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     mips:Linux:*:* | mips64:Linux:*:*)\n \teval $set_cc_for_build\n@@ -940,54 +967,63 @@ EOF\n \t#endif\n EOF\n \teval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`\n-\ttest x\"${CPU}\" != x && { echo \"${CPU}-unknown-linux-gnu\"; exit; }\n+\ttest x\"${CPU}\" != x && { echo \"${CPU}-unknown-linux-${LIBC}\"; exit; }\n \t;;\n+    or1k:Linux:*:*)\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n+\texit ;;\n     or32:Linux:*:*)\n-\techo or32-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     padre:Linux:*:*)\n-\techo sparc-unknown-linux-gnu\n+\techo sparc-unknown-linux-${LIBC}\n \texit ;;\n     parisc64:Linux:*:* | hppa64:Linux:*:*)\n-\techo hppa64-unknown-linux-gnu\n+\techo hppa64-unknown-linux-${LIBC}\n \texit ;;\n     parisc:Linux:*:* | hppa:Linux:*:*)\n \t# Look for CPU level\n \tcase `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in\n-\t  PA7*) echo hppa1.1-unknown-linux-gnu ;;\n-\t  PA8*) echo hppa2.0-unknown-linux-gnu ;;\n-\t  *)    echo hppa-unknown-linux-gnu ;;\n+\t  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;\n+\t  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;\n+\t  *)    echo hppa-unknown-linux-${LIBC} ;;\n \tesac\n \texit ;;\n     ppc64:Linux:*:*)\n-\techo powerpc64-unknown-linux-gnu\n+\techo powerpc64-unknown-linux-${LIBC}\n \texit ;;\n     ppc:Linux:*:*)\n-\techo powerpc-unknown-linux-gnu\n+\techo powerpc-unknown-linux-${LIBC}\n+\texit ;;\n+    ppc64le:Linux:*:*)\n+\techo powerpc64le-unknown-linux-${LIBC}\n+\texit ;;\n+    ppcle:Linux:*:*)\n+\techo powerpcle-unknown-linux-${LIBC}\n \texit ;;\n     s390:Linux:*:* | s390x:Linux:*:*)\n-\techo ${UNAME_MACHINE}-ibm-linux\n+\techo ${UNAME_MACHINE}-ibm-linux-${LIBC}\n \texit ;;\n     sh64*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     sh*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     sparc:Linux:*:* | sparc64:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     tile*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-tilera-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     vax:Linux:*:*)\n-\techo ${UNAME_MACHINE}-dec-linux-gnu\n+\techo ${UNAME_MACHINE}-dec-linux-${LIBC}\n \texit ;;\n     x86_64:Linux:*:*)\n-\techo x86_64-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     xtensa*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-gnu\n+\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n \texit ;;\n     i*86:DYNIX/ptx:4*:*)\n \t# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.\n@@ -1191,6 +1227,9 @@ EOF\n     BePC:Haiku:*:*)\t# Haiku running on Intel PC compatible.\n \techo i586-pc-haiku\n \texit ;;\n+    x86_64:Haiku:*:*)\n+\techo x86_64-unknown-haiku\n+\texit ;;\n     SX-4:SUPER-UX:*:*)\n \techo sx4-nec-superux${UNAME_RELEASE}\n \texit ;;\n@@ -1217,19 +1256,21 @@ EOF\n \texit ;;\n     *:Darwin:*:*)\n \tUNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown\n-\tcase $UNAME_PROCESSOR in\n-\t    i386)\n-\t\teval $set_cc_for_build\n-\t\tif [ \"$CC_FOR_BUILD\" != 'no_compiler_found' ]; then\n-\t\t  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \\\n-\t\t      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \\\n-\t\t      grep IS_64BIT_ARCH >/dev/null\n-\t\t  then\n-\t\t      UNAME_PROCESSOR=\"x86_64\"\n-\t\t  fi\n-\t\tfi ;;\n-\t    unknown) UNAME_PROCESSOR=powerpc ;;\n-\tesac\n+\teval $set_cc_for_build\n+\tif test \"$UNAME_PROCESSOR\" = unknown ; then\n+\t    UNAME_PROCESSOR=powerpc\n+\tfi\n+\tif [ \"$CC_FOR_BUILD\" != 'no_compiler_found' ]; then\n+\t    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \\\n+\t\t(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \\\n+\t\tgrep IS_64BIT_ARCH >/dev/null\n+\t    then\n+\t\tcase $UNAME_PROCESSOR in\n+\t\t    i386) UNAME_PROCESSOR=x86_64 ;;\n+\t\t    powerpc) UNAME_PROCESSOR=powerpc64 ;;\n+\t\tesac\n+\t    fi\n+\tfi\n \techo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}\n \texit ;;\n     *:procnto*:*:* | *:QNX:[0123456789]*:*)\n@@ -1246,7 +1287,7 @@ EOF\n     NEO-?:NONSTOP_KERNEL:*:*)\n \techo neo-tandem-nsk${UNAME_RELEASE}\n \texit ;;\n-    NSE-?:NONSTOP_KERNEL:*:*)\n+    NSE-*:NONSTOP_KERNEL:*:*)\n \techo nse-tandem-nsk${UNAME_RELEASE}\n \texit ;;\n     NSR-?:NONSTOP_KERNEL:*:*)\n@@ -1315,11 +1356,11 @@ EOF\n     i*86:AROS:*:*)\n \techo ${UNAME_MACHINE}-pc-aros\n \texit ;;\n+    x86_64:VMkernel:*:*)\n+\techo ${UNAME_MACHINE}-unknown-esx\n+\texit ;;\n esac\n \n-#echo '(No uname command or uname output not recognized.)' 1>&2\n-#echo \"${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}\" 1>&2\n-\n eval $set_cc_for_build\n cat >$dummy.c <<EOF\n #ifdef _SEQUENT_\ndiff --git a/config.sub b/config.sub\nindex 30fdca8..c765b34 100755\n--- a/config.sub\n+++ b/config.sub\n@@ -1,38 +1,31 @@\n #! /bin/sh\n # Configuration validation subroutine script.\n-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n-#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n-#   2011 Free Software Foundation, Inc.\n+#   Copyright 1992-2013 Free Software Foundation, Inc.\n \n-timestamp='2011-03-23'\n+timestamp='2013-04-24'\n \n-# This file is (in principle) common to ALL GNU software.\n-# The presence of a machine in this file suggests that SOME GNU software\n-# can handle that machine.  It does not imply ALL GNU software can.\n-#\n-# This file is free software; you can redistribute it and/or modify\n-# it under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 2 of the License, or\n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n # (at your option) any later version.\n #\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY; without even the implied warranty of\n-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-# GNU General Public License for more details.\n+# This program is distributed in the hope that it will be useful, but\n+# WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+# General Public License for more details.\n #\n # You should have received a copy of the GNU General Public License\n-# along with this program; if not, write to the Free Software\n-# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA\n-# 02110-1301, USA.\n+# along with this program; if not, see <http://www.gnu.org/licenses/>.\n #\n # As a special exception to the GNU General Public License, if you\n # distribute this file as part of a program that contains a\n # configuration script generated by Autoconf, you may include it under\n-# the same distribution terms that you use for the rest of that program.\n+# the same distribution terms that you use for the rest of that\n+# program.  This Exception is an additional permission under section 7\n+# of the GNU General Public License, version 3 (\"GPLv3\").\n \n \n-# Please send patches to <config-patches@gnu.org>.  Submit a context\n-# diff and a properly formatted GNU ChangeLog entry.\n+# Please send patches with a ChangeLog entry to config-patches@gnu.org.\n #\n # Configuration subroutine to validate and canonicalize a configuration type.\n # Supply the specified configuration type as an argument.\n@@ -75,9 +68,7 @@ Report bugs and patches to <config-patches@gnu.org>.\"\n version=\"\\\n GNU config.sub ($timestamp)\n \n-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n-2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free\n-Software Foundation, Inc.\n+Copyright 1992-2013 Free Software Foundation, Inc.\n \n This is free software; see the source for copying conditions.  There is NO\n warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\"\n@@ -125,13 +116,17 @@ esac\n maybe_os=`echo $1 | sed 's/^\\(.*\\)-\\([^-]*-[^-]*\\)$/\\2/'`\n case $maybe_os in\n   nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \\\n-  linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \\\n+  linux-musl* | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \\\n   knetbsd*-gnu* | netbsd*-gnu* | \\\n   kopensolaris*-gnu* | \\\n   storm-chaos* | os2-emx* | rtmk-nova*)\n     os=-$maybe_os\n     basic_machine=`echo $1 | sed 's/^\\(.*\\)-\\([^-]*-[^-]*\\)$/\\1/'`\n     ;;\n+  android-linux)\n+    os=-linux-android\n+    basic_machine=`echo $1 | sed 's/^\\(.*\\)-\\([^-]*-[^-]*\\)$/\\1/'`-unknown\n+    ;;\n   *)\n     basic_machine=`echo $1 | sed 's/-[^-]*$//'`\n     if [ $basic_machine != $1 ]\n@@ -154,7 +149,7 @@ case $os in\n \t-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\\\n \t-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \\\n \t-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \\\n-\t-apple | -axis | -knuth | -cray | -microblaze)\n+\t-apple | -axis | -knuth | -cray | -microblaze*)\n \t\tos=\n \t\tbasic_machine=$1\n \t\t;;\n@@ -223,6 +218,12 @@ case $os in\n \t-isc*)\n \t\tbasic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`\n \t\t;;\n+\t-lynx*178)\n+\t\tos=-lynxos178\n+\t\t;;\n+\t-lynx*5)\n+\t\tos=-lynxos5\n+\t\t;;\n \t-lynx*)\n \t\tos=-lynxos\n \t\t;;\n@@ -247,20 +248,27 @@ case $basic_machine in\n \t# Some are omitted here because they have special meanings below.\n \t1750a | 580 \\\n \t| a29k \\\n+\t| aarch64 | aarch64_be \\\n \t| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \\\n \t| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \\\n \t| am33_2.0 \\\n-\t| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr | avr32 \\\n+\t| arc | arceb \\\n+\t| arm | arm[bl]e | arme[lb] | armv[2-8] | armv[3-8][lb] | armv7[arm] \\\n+\t| avr | avr32 \\\n+\t| be32 | be64 \\\n \t| bfin \\\n \t| c4x | clipper \\\n \t| d10v | d30v | dlx | dsp16xx \\\n+\t| epiphany \\\n \t| fido | fr30 | frv \\\n \t| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \\\n+\t| hexagon \\\n \t| i370 | i860 | i960 | ia64 \\\n \t| ip2k | iq2000 \\\n+\t| le32 | le64 \\\n \t| lm32 \\\n \t| m32c | m32r | m32rle | m68000 | m68k | m88k \\\n-\t| maxq | mb | microblaze | mcore | mep | metag \\\n+\t| maxq | mb | microblaze | microblazeel | mcore | mep | metag \\\n \t| mips | mipsbe | mipseb | mipsel | mipsle \\\n \t| mips16 \\\n \t| mips64 | mips64el \\\n@@ -278,20 +286,21 @@ case $basic_machine in\n \t| mipsisa64r2 | mipsisa64r2el \\\n \t| mipsisa64sb1 | mipsisa64sb1el \\\n \t| mipsisa64sr71k | mipsisa64sr71kel \\\n+\t| mipsr5900 | mipsr5900el \\\n \t| mipstx39 | mipstx39el \\\n \t| mn10200 | mn10300 \\\n \t| moxie \\\n \t| mt \\\n \t| msp430 \\\n \t| nds32 | nds32le | nds32be \\\n-\t| nios | nios2 \\\n+\t| nios | nios2 | nios2eb | nios2el \\\n \t| ns16k | ns32k \\\n \t| open8 \\\n-\t| or32 \\\n+\t| or1k | or32 \\\n \t| pdp10 | pdp11 | pj | pjl \\\n \t| powerpc | powerpc64 | powerpc64le | powerpcle \\\n \t| pyramid \\\n-\t| rx \\\n+\t| rl78 | rx \\\n \t| score \\\n \t| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \\\n \t| sh64 | sh64le \\\n@@ -300,7 +309,7 @@ case $basic_machine in\n \t| spu \\\n \t| tahoe | tic4x | tic54x | tic55x | tic6x | tic80 | tron \\\n \t| ubicom32 \\\n-\t| v850 | v850e \\\n+\t| v850 | v850e | v850e1 | v850e2 | v850es | v850e2v3 \\\n \t| we32k \\\n \t| x86 | xc16x | xstormy16 | xtensa \\\n \t| z8k | z80)\n@@ -315,8 +324,7 @@ case $basic_machine in\n \tc6x)\n \t\tbasic_machine=tic6x-unknown\n \t\t;;\n-\tm6811 | m68hc11 | m6812 | m68hc12 | picochip)\n-\t\t# Motorola 68HC11/12.\n+\tm6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | picochip)\n \t\tbasic_machine=$basic_machine-unknown\n \t\tos=-none\n \t\t;;\n@@ -329,7 +337,10 @@ case $basic_machine in\n \tstrongarm | thumb | xscale)\n \t\tbasic_machine=arm-unknown\n \t\t;;\n-\n+\txgate)\n+\t\tbasic_machine=$basic_machine-unknown\n+\t\tos=-none\n+\t\t;;\n \txscaleeb)\n \t\tbasic_machine=armeb-unknown\n \t\t;;\n@@ -352,11 +363,13 @@ case $basic_machine in\n \t# Recognize the basic CPU types with company name.\n \t580-* \\\n \t| a29k-* \\\n+\t| aarch64-* | aarch64_be-* \\\n \t| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \\\n \t| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \\\n-\t| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \\\n+\t| alphapca5[67]-* | alpha64pca5[67]-* | arc-* | arceb-* \\\n \t| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \\\n \t| avr-* | avr32-* \\\n+\t| be32-* | be64-* \\\n \t| bfin-* | bs2000-* \\\n \t| c[123]* | c30-* | [cjt]90-* | c4x-* \\\n \t| clipper-* | craynv-* | cydra-* \\\n@@ -365,12 +378,15 @@ case $basic_machine in\n \t| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \\\n \t| h8300-* | h8500-* \\\n \t| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \\\n+\t| hexagon-* \\\n \t| i*86-* | i860-* | i960-* | ia64-* \\\n \t| ip2k-* | iq2000-* \\\n+\t| le32-* | le64-* \\\n \t| lm32-* \\\n \t| m32c-* | m32r-* | m32rle-* \\\n \t| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \\\n-\t| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \\\n+\t| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \\\n+\t| microblaze-* | microblazeel-* \\\n \t| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \\\n \t| mips16-* \\\n \t| mips64-* | mips64el-* \\\n@@ -388,19 +404,20 @@ case $basic_machine in\n \t| mipsisa64r2-* | mipsisa64r2el-* \\\n \t| mipsisa64sb1-* | mipsisa64sb1el-* \\\n \t| mipsisa64sr71k-* | mipsisa64sr71kel-* \\\n+\t| mipsr5900-* | mipsr5900el-* \\\n \t| mipstx39-* | mipstx39el-* \\\n \t| mmix-* \\\n \t| mt-* \\\n \t| msp430-* \\\n \t| nds32-* | nds32le-* | nds32be-* \\\n-\t| nios-* | nios2-* \\\n+\t| nios-* | nios2-* | nios2eb-* | nios2el-* \\\n \t| none-* | np1-* | ns16k-* | ns32k-* \\\n \t| open8-* \\\n \t| orion-* \\\n \t| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \\\n \t| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \\\n \t| pyramid-* \\\n-\t| romp-* | rs6000-* | rx-* \\\n+\t| rl78-* | romp-* | rs6000-* | rx-* \\\n \t| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \\\n \t| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \\\n \t| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \\\n@@ -408,10 +425,11 @@ case $basic_machine in\n \t| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | sv1-* | sx?-* \\\n \t| tahoe-* \\\n \t| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \\\n-\t| tile-* | tilegx-* \\\n+\t| tile*-* \\\n \t| tron-* \\\n \t| ubicom32-* \\\n-\t| v850-* | v850e-* | vax-* \\\n+\t| v850-* | v850e-* | v850e1-* | v850es-* | v850e2-* | v850e2v3-* \\\n+\t| vax-* \\\n \t| we32k-* \\\n \t| x86-* | x86_64-* | xc16x-* | xps100-* \\\n \t| xstormy16-* | xtensa*-* \\\n@@ -711,7 +729,6 @@ case $basic_machine in\n \ti370-ibm* | ibm*)\n \t\tbasic_machine=i370-ibm\n \t\t;;\n-# I'm not sure what \"Sysv32\" means.  Should this be sysv3.2?\n \ti*86v32)\n \t\tbasic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`\n \t\tos=-sysv32\n@@ -769,9 +786,13 @@ case $basic_machine in\n \t\tbasic_machine=ns32k-utek\n \t\tos=-sysv\n \t\t;;\n-\tmicroblaze)\n+\tmicroblaze*)\n \t\tbasic_machine=microblaze-xilinx\n \t\t;;\n+\tmingw64)\n+\t\tbasic_machine=x86_64-pc\n+\t\tos=-mingw64\n+\t\t;;\n \tmingw32)\n \t\tbasic_machine=i386-pc\n \t\tos=-mingw32\n@@ -808,10 +829,18 @@ case $basic_machine in\n \tms1-*)\n \t\tbasic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`\n \t\t;;\n+\tmsys)\n+\t\tbasic_machine=i386-pc\n+\t\tos=-msys\n+\t\t;;\n \tmvs)\n \t\tbasic_machine=i370-ibm\n \t\tos=-mvs\n \t\t;;\n+\tnacl)\n+\t\tbasic_machine=le32-unknown\n+\t\tos=-nacl\n+\t\t;;\n \tncr3000)\n \t\tbasic_machine=i486-ncr\n \t\tos=-sysv4\n@@ -977,7 +1006,7 @@ case $basic_machine in\n \t\t;;\n \tppc64)\tbasic_machine=powerpc64-unknown\n \t\t;;\n-\tppc64-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`\n+\tppc64-* | ppc64p7-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`\n \t\t;;\n \tppc64le | powerpc64little | ppc64-le | powerpc64-little)\n \t\tbasic_machine=powerpc64le-unknown\n@@ -992,7 +1021,11 @@ case $basic_machine in\n \t\tbasic_machine=i586-unknown\n \t\tos=-pw32\n \t\t;;\n-\trdos)\n+\trdos | rdos64)\n+\t\tbasic_machine=x86_64-pc\n+\t\tos=-rdos\n+\t\t;;\n+\trdos32)\n \t\tbasic_machine=i386-pc\n \t\tos=-rdos\n \t\t;;\n@@ -1120,13 +1153,8 @@ case $basic_machine in\n \t\tbasic_machine=t90-cray\n \t\tos=-unicos\n \t\t;;\n-\t# This must be matched before tile*.\n-\ttilegx*)\n-\t\tbasic_machine=tilegx-unknown\n-\t\tos=-linux-gnu\n-\t\t;;\n \ttile*)\n-\t\tbasic_machine=tile-unknown\n+\t\tbasic_machine=$basic_machine-unknown\n \t\tos=-linux-gnu\n \t\t;;\n \ttx39)\n@@ -1324,21 +1352,21 @@ case $os in\n \t-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \\\n \t      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\\\n \t      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \\\n-\t      | -sym* | -kopensolaris* \\\n+\t      | -sym* | -kopensolaris* | -plan9* \\\n \t      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \\\n \t      | -aos* | -aros* \\\n \t      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \\\n \t      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \\\n \t      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \\\n-\t      | -openbsd* | -solidbsd* \\\n+\t      | -bitrig* | -openbsd* | -solidbsd* \\\n \t      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \\\n \t      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \\\n \t      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \\\n \t      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \\\n \t      | -chorusos* | -chorusrdb* | -cegcc* \\\n-\t      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \\\n-\t      | -mingw32* | -linux-gnu* | -linux-android* \\\n-\t      | -linux-newlib* | -linux-uclibc* \\\n+\t      | -cygwin* | -msys* | -pe* | -psos* | -moss* | -proelf* | -rtems* \\\n+\t      | -mingw32* | -mingw64* | -linux-gnu* | -linux-android* \\\n+\t      | -linux-newlib* | -linux-musl* | -linux-uclibc* \\\n \t      | -uxpv* | -beos* | -mpeix* | -udk* \\\n \t      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \\\n \t      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \\\n@@ -1470,9 +1498,6 @@ case $os in\n \t-aros*)\n \t\tos=-aros\n \t\t;;\n-\t-kaos*)\n-\t\tos=-kaos\n-\t\t;;\n \t-zvmoe)\n \t\tos=-zvmoe\n \t\t;;\n@@ -1521,6 +1546,9 @@ case $basic_machine in\n \tc4x-* | tic4x-*)\n \t\tos=-coff\n \t\t;;\n+\thexagon-*)\n+\t\tos=-elf\n+\t\t;;\n \ttic54x-*)\n \t\tos=-coff\n \t\t;;\n@@ -1548,9 +1576,6 @@ case $basic_machine in\n \t\t;;\n \tm68000-sun)\n \t\tos=-sunos3\n-\t\t# This also exists in the configure program, but was not the\n-\t\t# default.\n-\t\t# os=-sunos4\n \t\t;;\n \tm68*-cisco)\n \t\tos=-aout\n@@ -1564,6 +1589,9 @@ case $basic_machine in\n \tmips*-*)\n \t\tos=-elf\n \t\t;;\n+\tor1k-*)\n+\t\tos=-elf\n+\t\t;;\n \tor32-*)\n \t\tos=-coff\n \t\t;;\ndiff --git a/configure b/configure\nindex 6155677..82d0a5e 100755\n--- a/configure\n+++ b/configure\n@@ -1428,7 +1428,7 @@ Optional Features:\n Optional Packages:\n   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]\n   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)\n-  --with-pic              try to use only PIC/non-PIC objects [default=use\n+  --with-pic[=PKGS]       try to use only PIC/non-PIC objects [default=use\n                           both]\n   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]\n   --with-sysroot=DIR Search for dependent libraries within DIR\n@@ -2225,7 +2225,7 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n-am__api_version='1.13'\n+am__api_version='1.14'\n \n ac_aux_dir=\n for ac_dir in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"; do\n@@ -2791,6 +2791,47 @@ am__tar='$${TAR-tar} chof - \"$$tardir\"' am__untar='$${TAR-tar} xf -'\n \n \n \n+# POSIX will say in a future version that running \"rm -f\" with no argument\n+# is OK; and we want to be able to make that assumption in our Makefile\n+# recipes.  So use an aggressive probe to check that the usage we want is\n+# actually supported \"in the wild\" to an acceptable degree.\n+# See automake bug#10828.\n+# To make any issue more visible, cause the running configure to be aborted\n+# by default if the 'rm' program in use doesn't match our expectations; the\n+# user can still override this though.\n+if rm -f && rm -fr && rm -rf; then : OK; else\n+  cat >&2 <<'END'\n+Oops!\n+\n+Your 'rm' program seems unable to run without file operands specified\n+on the command line, even when the '-f' option is present.  This is contrary\n+to the behaviour of most rm programs out there, and not conforming with\n+the upcoming POSIX standard: <http://austingroupbugs.net/view.php?id=542>\n+\n+Please tell bug-automake@gnu.org about your system, including the value\n+of your $PATH and any error possibly output before this message.  This\n+can help us improve future automake versions.\n+\n+END\n+  if test x\"$ACCEPT_INFERIOR_RM_PROGRAM\" = x\"yes\"; then\n+    echo 'Configuration will proceed anyway, since you have set the' >&2\n+    echo 'ACCEPT_INFERIOR_RM_PROGRAM variable to \"yes\"' >&2\n+    echo >&2\n+  else\n+    cat >&2 <<'END'\n+Aborting the configuration process, to ensure you take notice of the issue.\n+\n+You can download and install GNU coreutils to get an 'rm' implementation\n+that behaves properly: <http://www.gnu.org/software/coreutils/>.\n+\n+If you want to complete the configuration process using your problematic\n+'rm' anyway, export the environment variable ACCEPT_INFERIOR_RM_PROGRAM\n+to \"yes\", and re-run configure.\n+\n+END\n+    as_fn_error $? \"Your 'rm' program is bad, sorry.\" \"$LINENO\" 5\n+  fi\n+fi\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n $as_echo_n \"checking whether to enable maintainer-specific portions of Makefiles... \" >&6; }\n@@ -4031,6 +4072,65 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $CC understands -c and -o together\" >&5\n+$as_echo_n \"checking whether $CC understands -c and -o together... \" >&6; }\n+if ${am_cv_prog_cc_c_o+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+  # Make sure it works both with $CC and with simple cc.\n+  # Following AC_PROG_CC_C_O, we do the test twice because some\n+  # compilers refuse to overwrite an existing .o file with -o,\n+  # though they will create one.\n+  am_cv_prog_cc_c_o=yes\n+  for am_i in 1 2; do\n+    if { echo \"$as_me:$LINENO: $CC -c conftest.$ac_ext -o conftest2.$ac_objext\" >&5\n+   ($CC -c conftest.$ac_ext -o conftest2.$ac_objext) >&5 2>&5\n+   ac_status=$?\n+   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+   (exit $ac_status); } \\\n+         && test -f conftest2.$ac_objext; then\n+      : OK\n+    else\n+      am_cv_prog_cc_c_o=no\n+      break\n+    fi\n+  done\n+  rm -f core conftest*\n+  unset am_i\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $am_cv_prog_cc_c_o\" >&5\n+$as_echo \"$am_cv_prog_cc_c_o\" >&6; }\n+if test \"$am_cv_prog_cc_c_o\" != yes; then\n+   # Losing compiler, so override with the script.\n+   # FIXME: It is wrong to rewrite CC.\n+   # But if we don't then we get into trouble of one sort or another.\n+   # A longer-term fix would be to have automake use am__CC in this case,\n+   # and then we could set am__CC=\"\\$(top_srcdir)/compile \\$(CC)\"\n+   CC=\"$am_aux_dir/compile $CC\"\n+fi\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n+\n depcc=\"$CC\"   am_compiler_list=\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc\" >&5\n@@ -4848,6 +4948,11 @@ else\n     lt_cv_sys_max_cmd_len=196608\n     ;;\n \n+  os2*)\n+    # The test takes a long time on OS/2.\n+    lt_cv_sys_max_cmd_len=8192\n+    ;;\n+\n   osf*)\n     # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure\n     # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not\n@@ -4887,7 +4992,7 @@ else\n       # If test is not a shell built-in, we'll probably end up computing a\n       # maximum length that is only half of the actual maximum length, but\n       # we can't tell.\n-      while { test \"X\"`func_fallback_echo \"$teststring$teststring\" 2>/dev/null` \\\n+      while { test \"X\"`env echo \"$teststring$teststring\" 2>/dev/null` \\\n \t         = \"X$teststring$teststring\"; } >/dev/null 2>&1 &&\n \t      test $i != 17 # 1/2 MB should be enough\n       do\n@@ -5313,12 +5418,12 @@ irix5* | irix6* | nonstopux*)\n   lt_cv_deplibs_check_method=pass_all\n   ;;\n \n-# This must be Linux ELF.\n+# This must be glibc/ELF.\n linux* | k*bsd*-gnu | kopensolaris*-gnu)\n   lt_cv_deplibs_check_method=pass_all\n   ;;\n \n-netbsd* | netbsdelf*-gnu)\n+netbsd*)\n   if echo __ELF__ | $CC -E - | $GREP __ELF__ > /dev/null; then\n     lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\\.so\\.[0-9]+\\.[0-9]+|_pic\\.a)$'\n   else\n@@ -5951,13 +6056,13 @@ old_postuninstall_cmds=\n if test -n \"$RANLIB\"; then\n   case $host_os in\n   openbsd*)\n-    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB -t \\$oldlib\"\n+    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB -t \\$tool_oldlib\"\n     ;;\n   *)\n-    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB \\$oldlib\"\n+    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB \\$tool_oldlib\"\n     ;;\n   esac\n-  old_archive_cmds=\"$old_archive_cmds~\\$RANLIB \\$oldlib\"\n+  old_archive_cmds=\"$old_archive_cmds~\\$RANLIB \\$tool_oldlib\"\n fi\n \n case $host_os in\n@@ -6104,6 +6209,7 @@ for ac_symprfx in \"\" \"_\"; do\n     # which start with @ or ?.\n     lt_cv_sys_global_symbol_pipe=\"$AWK '\"\\\n \"     {last_section=section; section=\\$ 3};\"\\\n+\"     /^COFF SYMBOL TABLE/{for(i in hide) delete hide[i]};\"\\\n \"     /Section length .*#relocs.*(pick any)/{hide[last_section]=1};\"\\\n \"     \\$ 0!~/External *\\|/{next};\"\\\n \"     / 0+ UNDEF /{next}; / UNDEF \\([^|]\\)*()/{next};\"\\\n@@ -6492,7 +6598,7 @@ $as_echo \"$lt_cv_cc_needs_belf\" >&6; }\n     CFLAGS=\"$SAVE_CFLAGS\"\n   fi\n   ;;\n-sparc*-*solaris*)\n+*-*solaris*)\n   # Find out which ABI we are using.\n   echo 'int i;' > conftest.$ac_ext\n   if { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_compile\\\"\"; } >&5\n@@ -6503,7 +6609,20 @@ sparc*-*solaris*)\n     case `/usr/bin/file conftest.o` in\n     *64-bit*)\n       case $lt_cv_prog_gnu_ld in\n-      yes*) LD=\"${LD-ld} -m elf64_sparc\" ;;\n+      yes*)\n+        case $host in\n+        i?86-*-solaris*)\n+          LD=\"${LD-ld} -m elf_x86_64\"\n+          ;;\n+        sparc*-*-solaris*)\n+          LD=\"${LD-ld} -m elf64_sparc\"\n+          ;;\n+        esac\n+        # GNU ld 2.21 introduced _sol2 emulations.  Use them if available.\n+        if ${LD-ld} -V | grep _sol2 >/dev/null 2>&1; then\n+          LD=\"${LD-ld}_sol2\"\n+        fi\n+        ;;\n       *)\n \tif ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then\n \t  LD=\"${LD-ld} -64\"\n@@ -7143,7 +7262,13 @@ else\n \t$LTCC $LTCFLAGS $LDFLAGS -o libconftest.dylib \\\n \t  -dynamiclib -Wl,-single_module conftest.c 2>conftest.err\n         _lt_result=$?\n-\tif test -f libconftest.dylib && test ! -s conftest.err && test $_lt_result = 0; then\n+\t# If there is a non-empty error log, and \"single_module\"\n+\t# appears in it, assume the flag caused a linker warning\n+        if test -s conftest.err && $GREP single_module conftest.err; then\n+\t  cat conftest.err >&5\n+\t# Otherwise, if the output was created with a 0 exit code from\n+\t# the compiler, it worked.\n+\telif test -f libconftest.dylib && test $_lt_result -eq 0; then\n \t  lt_cv_apple_cc_single_mod=yes\n \telse\n \t  cat conftest.err >&5\n@@ -7154,6 +7279,7 @@ else\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $lt_cv_apple_cc_single_mod\" >&5\n $as_echo \"$lt_cv_apple_cc_single_mod\" >&6; }\n+\n     { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for -exported_symbols_list linker flag\" >&5\n $as_echo_n \"checking for -exported_symbols_list linker flag... \" >&6; }\n if ${lt_cv_ld_exported_symbols_list+:} false; then :\n@@ -7186,6 +7312,7 @@ rm -f core conftest.err conftest.$ac_objext \\\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_exported_symbols_list\" >&5\n $as_echo \"$lt_cv_ld_exported_symbols_list\" >&6; }\n+\n     { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for -force_load linker flag\" >&5\n $as_echo_n \"checking for -force_load linker flag... \" >&6; }\n if ${lt_cv_ld_force_load+:} false; then :\n@@ -7207,7 +7334,9 @@ _LT_EOF\n       echo \"$LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a\" >&5\n       $LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a 2>conftest.err\n       _lt_result=$?\n-      if test -f conftest && test ! -s conftest.err && test $_lt_result = 0 && $GREP forced_load conftest 2>&1 >/dev/null; then\n+      if test -s conftest.err && $GREP force_load conftest.err; then\n+\tcat conftest.err >&5\n+      elif test -f conftest && test $_lt_result -eq 0 && $GREP forced_load conftest >/dev/null 2>&1 ; then\n \tlt_cv_ld_force_load=yes\n       else\n \tcat conftest.err >&5\n@@ -7911,7 +8040,22 @@ fi\n \n # Check whether --with-pic was given.\n if test \"${with_pic+set}\" = set; then :\n-  withval=$with_pic; pic_mode=\"$withval\"\n+  withval=$with_pic; lt_p=${PACKAGE-default}\n+    case $withval in\n+    yes|no) pic_mode=$withval ;;\n+    *)\n+      pic_mode=default\n+      # Look at the argument we got.  We use all the common list separators.\n+      lt_save_ifs=\"$IFS\"; IFS=\"${IFS}$PATH_SEPARATOR,\"\n+      for lt_pkg in $withval; do\n+\tIFS=\"$lt_save_ifs\"\n+\tif test \"X$lt_pkg\" = \"X$lt_p\"; then\n+\t  pic_mode=yes\n+\tfi\n+      done\n+      IFS=\"$lt_save_ifs\"\n+      ;;\n+    esac\n else\n   pic_mode=default\n fi\n@@ -7989,6 +8133,10 @@ LIBTOOL='$(SHELL) $(top_builddir)/libtool'\n \n \n \n+\n+\n+\n+\n test -z \"$LN_S\" && LN_S=\"ln -s\"\n \n \n@@ -8448,7 +8596,9 @@ lt_prog_compiler_static=\n     case $cc_basename in\n     nvcc*) # Cuda Compiler Driver 2.2\n       lt_prog_compiler_wl='-Xlinker '\n-      lt_prog_compiler_pic='-Xcompiler -fPIC'\n+      if test -n \"$lt_prog_compiler_pic\"; then\n+        lt_prog_compiler_pic=\"-Xcompiler $lt_prog_compiler_pic\"\n+      fi\n       ;;\n     esac\n   else\n@@ -8539,18 +8689,33 @@ lt_prog_compiler_static=\n \t;;\n       *)\n \tcase `$CC -V 2>&1 | sed 5q` in\n-\t*Sun\\ F* | *Sun*Fortran*)\n+\t*Sun\\ Ceres\\ Fortran* | *Sun*Fortran*\\ [1-7].* | *Sun*Fortran*\\ 8.[0-3]*)\n \t  # Sun Fortran 8.3 passes all unrecognized flags to the linker\n \t  lt_prog_compiler_pic='-KPIC'\n \t  lt_prog_compiler_static='-Bstatic'\n \t  lt_prog_compiler_wl=''\n \t  ;;\n+\t*Sun\\ F* | *Sun*Fortran*)\n+\t  lt_prog_compiler_pic='-KPIC'\n+\t  lt_prog_compiler_static='-Bstatic'\n+\t  lt_prog_compiler_wl='-Qoption ld '\n+\t  ;;\n \t*Sun\\ C*)\n \t  # Sun C 5.9\n \t  lt_prog_compiler_pic='-KPIC'\n \t  lt_prog_compiler_static='-Bstatic'\n \t  lt_prog_compiler_wl='-Wl,'\n \t  ;;\n+        *Intel*\\ [CF]*Compiler*)\n+\t  lt_prog_compiler_wl='-Wl,'\n+\t  lt_prog_compiler_pic='-fPIC'\n+\t  lt_prog_compiler_static='-static'\n+\t  ;;\n+\t*Portland\\ Group*)\n+\t  lt_prog_compiler_wl='-Wl,'\n+\t  lt_prog_compiler_pic='-fpic'\n+\t  lt_prog_compiler_static='-Bstatic'\n+\t  ;;\n \tesac\n \t;;\n       esac\n@@ -8912,7 +9077,6 @@ $as_echo_n \"checking whether the $compiler linker ($LD) supports shared librarie\n   hardcode_direct=no\n   hardcode_direct_absolute=no\n   hardcode_libdir_flag_spec=\n-  hardcode_libdir_flag_spec_ld=\n   hardcode_libdir_separator=\n   hardcode_minus_L=no\n   hardcode_shlibpath_var=unsupported\n@@ -8956,9 +9120,6 @@ $as_echo_n \"checking whether the $compiler linker ($LD) supports shared librarie\n   openbsd*)\n     with_gnu_ld=no\n     ;;\n-  linux* | k*bsd*-gnu | gnu*)\n-    link_all_deplibs=no\n-    ;;\n   esac\n \n   ld_shlibs=yes\n@@ -9165,8 +9326,7 @@ _LT_EOF\n \txlf* | bgf* | bgxlf* | mpixlf*)\n \t  # IBM XL Fortran 10.1 on PPC cannot create shared libs itself\n \t  whole_archive_flag_spec='--whole-archive$convenience --no-whole-archive'\n-\t  hardcode_libdir_flag_spec=\n-\t  hardcode_libdir_flag_spec_ld='-rpath $libdir'\n+\t  hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n \t  archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname -o $lib'\n \t  if test \"x$supports_anon_versioning\" = xyes; then\n \t    archive_expsym_cmds='echo \"{ global:\" > $output_objdir/$libname.ver~\n@@ -9181,7 +9341,7 @@ _LT_EOF\n       fi\n       ;;\n \n-    netbsd* | netbsdelf*-gnu)\n+    netbsd*)\n       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then\n \tarchive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'\n \twlarc=\n@@ -9358,7 +9518,6 @@ _LT_EOF\n \tif test \"$aix_use_runtimelinking\" = yes; then\n \t  shared_flag=\"$shared_flag \"'${wl}-G'\n \tfi\n-\tlink_all_deplibs=no\n       else\n \t# not using gcc\n \tif test \"$host_cpu\" = ia64; then\n@@ -9546,6 +9705,7 @@ fi\n \t# The linker will not automatically build a static lib if we build a DLL.\n \t# _LT_TAGVAR(old_archive_from_new_cmds, )='true'\n \tenable_shared_with_static_runtimes=yes\n+\texclude_expsyms='_NULL_IMPORT_DESCRIPTOR|_IMPORT_DESCRIPTOR_.*'\n \texport_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\\''/^[BCDGRS][ ]/s/.*[ ]\\([^ ]*\\)/\\1,DATA/'\\'' | $SED -e '\\''/^[AITW][ ]/s/.*[ ]//'\\'' | sort | uniq > $export_symbols'\n \t# Don't use ranlib\n \told_postinstall_cmds='chmod 644 $oldlib'\n@@ -9591,6 +9751,7 @@ fi\n   hardcode_shlibpath_var=unsupported\n   if test \"$lt_cv_ld_force_load\" = \"yes\"; then\n     whole_archive_flag_spec='`for conv in $convenience\\\"\\\"; do test  -n \\\"$conv\\\" && new_convenience=\\\"$new_convenience ${wl}-force_load,$conv\\\"; done; func_echo_all \\\"$new_convenience\\\"`'\n+\n   else\n     whole_archive_flag_spec=''\n   fi\n@@ -9619,10 +9780,6 @@ fi\n       hardcode_shlibpath_var=no\n       ;;\n \n-    freebsd1*)\n-      ld_shlibs=no\n-      ;;\n-\n     # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor\n     # support.  Future versions do this automatically, but an explicit c++rt0.o\n     # does not break anything, and helps significantly (at the cost of a little\n@@ -9635,7 +9792,7 @@ fi\n       ;;\n \n     # Unfortunately, older versions of FreeBSD 2 do not have this feature.\n-    freebsd2*)\n+    freebsd2.*)\n       archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n       hardcode_direct=yes\n       hardcode_minus_L=yes\n@@ -9674,7 +9831,6 @@ fi\n       fi\n       if test \"$with_gnu_ld\" = no; then\n \thardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'\n-\thardcode_libdir_flag_spec_ld='+b $libdir'\n \thardcode_libdir_separator=:\n \thardcode_direct=yes\n \thardcode_direct_absolute=yes\n@@ -9815,7 +9971,7 @@ $as_echo \"$lt_cv_irix_exported_symbol\" >&6; }\n       link_all_deplibs=yes\n       ;;\n \n-    netbsd* | netbsdelf*-gnu)\n+    netbsd*)\n       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then\n \tarchive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out\n       else\n@@ -10298,11 +10454,6 @@ esac\n \n \n \n-\n-\n-\n-\n-\n   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics\" >&5\n $as_echo_n \"checking dynamic linker characteristics... \" >&6; }\n \n@@ -10392,7 +10543,7 @@ need_version=unknown\n \n case $host_os in\n aix3*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'\n   shlibpath_var=LIBPATH\n \n@@ -10401,7 +10552,7 @@ aix3*)\n   ;;\n \n aix[4-9]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   hardcode_into_libs=yes\n@@ -10466,7 +10617,7 @@ beos*)\n   ;;\n \n bsdi[45]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n@@ -10605,7 +10756,7 @@ darwin* | rhapsody*)\n   ;;\n \n dgux*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'\n@@ -10613,10 +10764,6 @@ dgux*)\n   shlibpath_var=LD_LIBRARY_PATH\n   ;;\n \n-freebsd1*)\n-  dynamic_linker=no\n-  ;;\n-\n freebsd* | dragonfly*)\n   # DragonFly does not have aout.  When/if they implement a new\n   # versioning mechanism, adjust this.\n@@ -10624,7 +10771,7 @@ freebsd* | dragonfly*)\n     objformat=`/usr/bin/objformat`\n   else\n     case $host_os in\n-    freebsd[123]*) objformat=aout ;;\n+    freebsd[23].*) objformat=aout ;;\n     *) objformat=elf ;;\n     esac\n   fi\n@@ -10642,7 +10789,7 @@ freebsd* | dragonfly*)\n   esac\n   shlibpath_var=LD_LIBRARY_PATH\n   case $host_os in\n-  freebsd2*)\n+  freebsd2.*)\n     shlibpath_overrides_runpath=yes\n     ;;\n   freebsd3.[01]* | freebsdelf3.[01]*)\n@@ -10662,7 +10809,7 @@ freebsd* | dragonfly*)\n   ;;\n \n gnu*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'\n@@ -10673,7 +10820,7 @@ gnu*)\n   ;;\n \n haiku*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   dynamic_linker=\"$host_os runtime_loader\"\n@@ -10734,7 +10881,7 @@ hpux9* | hpux10* | hpux11*)\n   ;;\n \n interix[3-9]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'\n@@ -10750,7 +10897,7 @@ irix5* | irix6* | nonstopux*)\n     nonstopux*) version_type=nonstopux ;;\n     *)\n \tif test \"$lt_cv_prog_gnu_ld\" = yes; then\n-\t\tversion_type=linux\n+\t\tversion_type=linux # correct to gnu/linux during the next big refactor\n \telse\n \t\tversion_type=irix\n \tfi ;;\n@@ -10787,9 +10934,9 @@ linux*oldld* | linux*aout* | linux*coff*)\n   dynamic_linker=no\n   ;;\n \n-# This must be Linux ELF.\n+# This must be glibc/ELF.\n linux* | k*bsd*-gnu | kopensolaris*-gnu)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -10837,10 +10984,14 @@ fi\n   # before this can be enabled.\n   hardcode_into_libs=yes\n \n+  # Add ABI-specific directories to the system library path.\n+  sys_lib_dlsearch_path_spec=\"/lib64 /usr/lib64 /lib /usr/lib\"\n+\n   # Append ld.so.conf contents to the search path\n   if test -f /etc/ld.so.conf; then\n     lt_ld_extra=`awk '/^include / { system(sprintf(\"cd /etc; cat %s 2>/dev/null\", \\$2)); skip = 1; } { if (!skip) print \\$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[\t ]*hwcap[\t ]/d;s/[:,\t]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;s/\"//g;/^$/d' | tr '\\n' ' '`\n-    sys_lib_dlsearch_path_spec=\"/lib /usr/lib $lt_ld_extra\"\n+    sys_lib_dlsearch_path_spec=\"$sys_lib_dlsearch_path_spec $lt_ld_extra\"\n+\n   fi\n \n   # We used to test for /lib/ld.so.1 and disable shared libraries on\n@@ -10852,18 +11003,6 @@ fi\n   dynamic_linker='GNU/Linux ld.so'\n   ;;\n \n-netbsdelf*-gnu)\n-  version_type=linux\n-  need_lib_prefix=no\n-  need_version=no\n-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'\n-  soname_spec='${libname}${release}${shared_ext}$major'\n-  shlibpath_var=LD_LIBRARY_PATH\n-  shlibpath_overrides_runpath=no\n-  hardcode_into_libs=yes\n-  dynamic_linker='NetBSD ld.elf_so'\n-  ;;\n-\n netbsd*)\n   version_type=sunos\n   need_lib_prefix=no\n@@ -10883,7 +11022,7 @@ netbsd*)\n   ;;\n \n newsos6)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   shlibpath_var=LD_LIBRARY_PATH\n   shlibpath_overrides_runpath=yes\n@@ -10952,7 +11091,7 @@ rdos*)\n   ;;\n \n solaris*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -10977,7 +11116,7 @@ sunos4*)\n   ;;\n \n sysv4 | sysv4.3*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n   shlibpath_var=LD_LIBRARY_PATH\n@@ -11001,7 +11140,7 @@ sysv4 | sysv4.3*)\n \n sysv4*MP*)\n   if test -d /usr/nec ;then\n-    version_type=linux\n+    version_type=linux # correct to gnu/linux during the next big refactor\n     library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'\n     soname_spec='$libname${shared_ext}.$major'\n     shlibpath_var=LD_LIBRARY_PATH\n@@ -11032,7 +11171,7 @@ sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)\n \n tpf*)\n   # TPF is a cross-target only.  Preferred cross-host = GNU/Linux.\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -11042,7 +11181,7 @@ tpf*)\n   ;;\n \n uts4*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n   shlibpath_var=LD_LIBRARY_PATH\n@@ -11831,7 +11970,6 @@ export_dynamic_flag_spec_F77=\n hardcode_direct_F77=no\n hardcode_direct_absolute_F77=no\n hardcode_libdir_flag_spec_F77=\n-hardcode_libdir_flag_spec_ld_F77=\n hardcode_libdir_separator_F77=\n hardcode_minus_L_F77=no\n hardcode_automatic_F77=no\n@@ -12067,7 +12205,9 @@ lt_prog_compiler_static_F77=\n     case $cc_basename in\n     nvcc*) # Cuda Compiler Driver 2.2\n       lt_prog_compiler_wl_F77='-Xlinker '\n-      lt_prog_compiler_pic_F77='-Xcompiler -fPIC'\n+      if test -n \"$lt_prog_compiler_pic_F77\"; then\n+        lt_prog_compiler_pic_F77=\"-Xcompiler $lt_prog_compiler_pic_F77\"\n+      fi\n       ;;\n     esac\n   else\n@@ -12158,18 +12298,33 @@ lt_prog_compiler_static_F77=\n \t;;\n       *)\n \tcase `$CC -V 2>&1 | sed 5q` in\n-\t*Sun\\ F* | *Sun*Fortran*)\n+\t*Sun\\ Ceres\\ Fortran* | *Sun*Fortran*\\ [1-7].* | *Sun*Fortran*\\ 8.[0-3]*)\n \t  # Sun Fortran 8.3 passes all unrecognized flags to the linker\n \t  lt_prog_compiler_pic_F77='-KPIC'\n \t  lt_prog_compiler_static_F77='-Bstatic'\n \t  lt_prog_compiler_wl_F77=''\n \t  ;;\n+\t*Sun\\ F* | *Sun*Fortran*)\n+\t  lt_prog_compiler_pic_F77='-KPIC'\n+\t  lt_prog_compiler_static_F77='-Bstatic'\n+\t  lt_prog_compiler_wl_F77='-Qoption ld '\n+\t  ;;\n \t*Sun\\ C*)\n \t  # Sun C 5.9\n \t  lt_prog_compiler_pic_F77='-KPIC'\n \t  lt_prog_compiler_static_F77='-Bstatic'\n \t  lt_prog_compiler_wl_F77='-Wl,'\n \t  ;;\n+        *Intel*\\ [CF]*Compiler*)\n+\t  lt_prog_compiler_wl_F77='-Wl,'\n+\t  lt_prog_compiler_pic_F77='-fPIC'\n+\t  lt_prog_compiler_static_F77='-static'\n+\t  ;;\n+\t*Portland\\ Group*)\n+\t  lt_prog_compiler_wl_F77='-Wl,'\n+\t  lt_prog_compiler_pic_F77='-fpic'\n+\t  lt_prog_compiler_static_F77='-Bstatic'\n+\t  ;;\n \tesac\n \t;;\n       esac\n@@ -12516,7 +12671,6 @@ $as_echo_n \"checking whether the $compiler linker ($LD) supports shared librarie\n   hardcode_direct_F77=no\n   hardcode_direct_absolute_F77=no\n   hardcode_libdir_flag_spec_F77=\n-  hardcode_libdir_flag_spec_ld_F77=\n   hardcode_libdir_separator_F77=\n   hardcode_minus_L_F77=no\n   hardcode_shlibpath_var_F77=unsupported\n@@ -12560,9 +12714,6 @@ $as_echo_n \"checking whether the $compiler linker ($LD) supports shared librarie\n   openbsd*)\n     with_gnu_ld=no\n     ;;\n-  linux* | k*bsd*-gnu | gnu*)\n-    link_all_deplibs_F77=no\n-    ;;\n   esac\n \n   ld_shlibs_F77=yes\n@@ -12769,8 +12920,7 @@ _LT_EOF\n \txlf* | bgf* | bgxlf* | mpixlf*)\n \t  # IBM XL Fortran 10.1 on PPC cannot create shared libs itself\n \t  whole_archive_flag_spec_F77='--whole-archive$convenience --no-whole-archive'\n-\t  hardcode_libdir_flag_spec_F77=\n-\t  hardcode_libdir_flag_spec_ld_F77='-rpath $libdir'\n+\t  hardcode_libdir_flag_spec_F77='${wl}-rpath ${wl}$libdir'\n \t  archive_cmds_F77='$LD -shared $libobjs $deplibs $linker_flags -soname $soname -o $lib'\n \t  if test \"x$supports_anon_versioning\" = xyes; then\n \t    archive_expsym_cmds_F77='echo \"{ global:\" > $output_objdir/$libname.ver~\n@@ -12785,7 +12935,7 @@ _LT_EOF\n       fi\n       ;;\n \n-    netbsd* | netbsdelf*-gnu)\n+    netbsd*)\n       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then\n \tarchive_cmds_F77='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'\n \twlarc=\n@@ -12962,7 +13112,6 @@ _LT_EOF\n \tif test \"$aix_use_runtimelinking\" = yes; then\n \t  shared_flag=\"$shared_flag \"'${wl}-G'\n \tfi\n-\tlink_all_deplibs_F77=no\n       else\n \t# not using gcc\n \tif test \"$host_cpu\" = ia64; then\n@@ -13138,6 +13287,7 @@ fi\n \t# The linker will not automatically build a static lib if we build a DLL.\n \t# _LT_TAGVAR(old_archive_from_new_cmds, F77)='true'\n \tenable_shared_with_static_runtimes_F77=yes\n+\texclude_expsyms_F77='_NULL_IMPORT_DESCRIPTOR|_IMPORT_DESCRIPTOR_.*'\n \texport_symbols_cmds_F77='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\\''/^[BCDGRS][ ]/s/.*[ ]\\([^ ]*\\)/\\1,DATA/'\\'' | $SED -e '\\''/^[AITW][ ]/s/.*[ ]//'\\'' | sort | uniq > $export_symbols'\n \t# Don't use ranlib\n \told_postinstall_cmds_F77='chmod 644 $oldlib'\n@@ -13183,6 +13333,7 @@ fi\n   hardcode_shlibpath_var_F77=unsupported\n   if test \"$lt_cv_ld_force_load\" = \"yes\"; then\n     whole_archive_flag_spec_F77='`for conv in $convenience\\\"\\\"; do test  -n \\\"$conv\\\" && new_convenience=\\\"$new_convenience ${wl}-force_load,$conv\\\"; done; func_echo_all \\\"$new_convenience\\\"`'\n+    compiler_needs_object_F77=yes\n   else\n     whole_archive_flag_spec_F77=''\n   fi\n@@ -13211,10 +13362,6 @@ fi\n       hardcode_shlibpath_var_F77=no\n       ;;\n \n-    freebsd1*)\n-      ld_shlibs_F77=no\n-      ;;\n-\n     # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor\n     # support.  Future versions do this automatically, but an explicit c++rt0.o\n     # does not break anything, and helps significantly (at the cost of a little\n@@ -13227,7 +13374,7 @@ fi\n       ;;\n \n     # Unfortunately, older versions of FreeBSD 2 do not have this feature.\n-    freebsd2*)\n+    freebsd2.*)\n       archive_cmds_F77='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n       hardcode_direct_F77=yes\n       hardcode_minus_L_F77=yes\n@@ -13266,7 +13413,6 @@ fi\n       fi\n       if test \"$with_gnu_ld\" = no; then\n \thardcode_libdir_flag_spec_F77='${wl}+b ${wl}$libdir'\n-\thardcode_libdir_flag_spec_ld_F77='+b $libdir'\n \thardcode_libdir_separator_F77=:\n \thardcode_direct_F77=yes\n \thardcode_direct_absolute_F77=yes\n@@ -13369,7 +13515,7 @@ $as_echo \"$lt_cv_irix_exported_symbol\" >&6; }\n       link_all_deplibs_F77=yes\n       ;;\n \n-    netbsd* | netbsdelf*-gnu)\n+    netbsd*)\n       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then\n \tarchive_cmds_F77='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out\n       else\n@@ -13753,8 +13899,6 @@ esac\n \n \n \n-\n-\n     { $as_echo \"$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics\" >&5\n $as_echo_n \"checking dynamic linker characteristics... \" >&6; }\n \n@@ -13780,7 +13924,7 @@ need_version=unknown\n \n case $host_os in\n aix3*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'\n   shlibpath_var=LIBPATH\n \n@@ -13789,7 +13933,7 @@ aix3*)\n   ;;\n \n aix[4-9]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   hardcode_into_libs=yes\n@@ -13854,7 +13998,7 @@ beos*)\n   ;;\n \n bsdi[45]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n@@ -13991,7 +14135,7 @@ darwin* | rhapsody*)\n   ;;\n \n dgux*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'\n@@ -13999,10 +14143,6 @@ dgux*)\n   shlibpath_var=LD_LIBRARY_PATH\n   ;;\n \n-freebsd1*)\n-  dynamic_linker=no\n-  ;;\n-\n freebsd* | dragonfly*)\n   # DragonFly does not have aout.  When/if they implement a new\n   # versioning mechanism, adjust this.\n@@ -14010,7 +14150,7 @@ freebsd* | dragonfly*)\n     objformat=`/usr/bin/objformat`\n   else\n     case $host_os in\n-    freebsd[123]*) objformat=aout ;;\n+    freebsd[23].*) objformat=aout ;;\n     *) objformat=elf ;;\n     esac\n   fi\n@@ -14028,7 +14168,7 @@ freebsd* | dragonfly*)\n   esac\n   shlibpath_var=LD_LIBRARY_PATH\n   case $host_os in\n-  freebsd2*)\n+  freebsd2.*)\n     shlibpath_overrides_runpath=yes\n     ;;\n   freebsd3.[01]* | freebsdelf3.[01]*)\n@@ -14048,7 +14188,7 @@ freebsd* | dragonfly*)\n   ;;\n \n gnu*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'\n@@ -14059,7 +14199,7 @@ gnu*)\n   ;;\n \n haiku*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   dynamic_linker=\"$host_os runtime_loader\"\n@@ -14120,7 +14260,7 @@ hpux9* | hpux10* | hpux11*)\n   ;;\n \n interix[3-9]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'\n@@ -14136,7 +14276,7 @@ irix5* | irix6* | nonstopux*)\n     nonstopux*) version_type=nonstopux ;;\n     *)\n \tif test \"$lt_cv_prog_gnu_ld\" = yes; then\n-\t\tversion_type=linux\n+\t\tversion_type=linux # correct to gnu/linux during the next big refactor\n \telse\n \t\tversion_type=irix\n \tfi ;;\n@@ -14173,9 +14313,9 @@ linux*oldld* | linux*aout* | linux*coff*)\n   dynamic_linker=no\n   ;;\n \n-# This must be Linux ELF.\n+# This must be glibc/ELF.\n linux* | k*bsd*-gnu | kopensolaris*-gnu)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -14217,10 +14357,14 @@ fi\n   # before this can be enabled.\n   hardcode_into_libs=yes\n \n+  # Add ABI-specific directories to the system library path.\n+  sys_lib_dlsearch_path_spec=\"/lib64 /usr/lib64 /lib /usr/lib\"\n+\n   # Append ld.so.conf contents to the search path\n   if test -f /etc/ld.so.conf; then\n     lt_ld_extra=`awk '/^include / { system(sprintf(\"cd /etc; cat %s 2>/dev/null\", \\$2)); skip = 1; } { if (!skip) print \\$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[\t ]*hwcap[\t ]/d;s/[:,\t]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;s/\"//g;/^$/d' | tr '\\n' ' '`\n-    sys_lib_dlsearch_path_spec=\"/lib /usr/lib $lt_ld_extra\"\n+    sys_lib_dlsearch_path_spec=\"$sys_lib_dlsearch_path_spec $lt_ld_extra\"\n+\n   fi\n \n   # We used to test for /lib/ld.so.1 and disable shared libraries on\n@@ -14232,18 +14376,6 @@ fi\n   dynamic_linker='GNU/Linux ld.so'\n   ;;\n \n-netbsdelf*-gnu)\n-  version_type=linux\n-  need_lib_prefix=no\n-  need_version=no\n-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'\n-  soname_spec='${libname}${release}${shared_ext}$major'\n-  shlibpath_var=LD_LIBRARY_PATH\n-  shlibpath_overrides_runpath=no\n-  hardcode_into_libs=yes\n-  dynamic_linker='NetBSD ld.elf_so'\n-  ;;\n-\n netbsd*)\n   version_type=sunos\n   need_lib_prefix=no\n@@ -14263,7 +14395,7 @@ netbsd*)\n   ;;\n \n newsos6)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   shlibpath_var=LD_LIBRARY_PATH\n   shlibpath_overrides_runpath=yes\n@@ -14332,7 +14464,7 @@ rdos*)\n   ;;\n \n solaris*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -14357,7 +14489,7 @@ sunos4*)\n   ;;\n \n sysv4 | sysv4.3*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n   shlibpath_var=LD_LIBRARY_PATH\n@@ -14381,7 +14513,7 @@ sysv4 | sysv4.3*)\n \n sysv4*MP*)\n   if test -d /usr/nec ;then\n-    version_type=linux\n+    version_type=linux # correct to gnu/linux during the next big refactor\n     library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'\n     soname_spec='$libname${shared_ext}.$major'\n     shlibpath_var=LD_LIBRARY_PATH\n@@ -14412,7 +14544,7 @@ sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)\n \n tpf*)\n   # TPF is a cross-target only.  Preferred cross-host = GNU/Linux.\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -14422,7 +14554,7 @@ tpf*)\n   ;;\n \n uts4*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n   shlibpath_var=LD_LIBRARY_PATH\n@@ -14552,6 +14684,8 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n \n+\n+\n         ac_config_commands=\"$ac_config_commands libtool\"\n \n \n@@ -17457,6 +17591,7 @@ pic_mode='`$ECHO \"$pic_mode\" | $SED \"$delay_single_quote_subst\"`'\n enable_fast_install='`$ECHO \"$enable_fast_install\" | $SED \"$delay_single_quote_subst\"`'\n SHELL='`$ECHO \"$SHELL\" | $SED \"$delay_single_quote_subst\"`'\n ECHO='`$ECHO \"$ECHO\" | $SED \"$delay_single_quote_subst\"`'\n+PATH_SEPARATOR='`$ECHO \"$PATH_SEPARATOR\" | $SED \"$delay_single_quote_subst\"`'\n host_alias='`$ECHO \"$host_alias\" | $SED \"$delay_single_quote_subst\"`'\n host='`$ECHO \"$host\" | $SED \"$delay_single_quote_subst\"`'\n host_os='`$ECHO \"$host_os\" | $SED \"$delay_single_quote_subst\"`'\n@@ -17537,7 +17672,6 @@ with_gnu_ld='`$ECHO \"$with_gnu_ld\" | $SED \"$delay_single_quote_subst\"`'\n allow_undefined_flag='`$ECHO \"$allow_undefined_flag\" | $SED \"$delay_single_quote_subst\"`'\n no_undefined_flag='`$ECHO \"$no_undefined_flag\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_libdir_flag_spec='`$ECHO \"$hardcode_libdir_flag_spec\" | $SED \"$delay_single_quote_subst\"`'\n-hardcode_libdir_flag_spec_ld='`$ECHO \"$hardcode_libdir_flag_spec_ld\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_libdir_separator='`$ECHO \"$hardcode_libdir_separator\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_direct='`$ECHO \"$hardcode_direct\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_direct_absolute='`$ECHO \"$hardcode_direct_absolute\" | $SED \"$delay_single_quote_subst\"`'\n@@ -17603,7 +17737,6 @@ with_gnu_ld_F77='`$ECHO \"$with_gnu_ld_F77\" | $SED \"$delay_single_quote_subst\"`'\n allow_undefined_flag_F77='`$ECHO \"$allow_undefined_flag_F77\" | $SED \"$delay_single_quote_subst\"`'\n no_undefined_flag_F77='`$ECHO \"$no_undefined_flag_F77\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_libdir_flag_spec_F77='`$ECHO \"$hardcode_libdir_flag_spec_F77\" | $SED \"$delay_single_quote_subst\"`'\n-hardcode_libdir_flag_spec_ld_F77='`$ECHO \"$hardcode_libdir_flag_spec_ld_F77\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_libdir_separator_F77='`$ECHO \"$hardcode_libdir_separator_F77\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_direct_F77='`$ECHO \"$hardcode_direct_F77\" | $SED \"$delay_single_quote_subst\"`'\n hardcode_direct_absolute_F77='`$ECHO \"$hardcode_direct_absolute_F77\" | $SED \"$delay_single_quote_subst\"`'\n@@ -17639,6 +17772,7 @@ DLLTOOL \\\n OBJDUMP \\\n SHELL \\\n ECHO \\\n+PATH_SEPARATOR \\\n SED \\\n GREP \\\n EGREP \\\n@@ -17687,7 +17821,6 @@ with_gnu_ld \\\n allow_undefined_flag \\\n no_undefined_flag \\\n hardcode_libdir_flag_spec \\\n-hardcode_libdir_flag_spec_ld \\\n hardcode_libdir_separator \\\n exclude_expsyms \\\n include_expsyms \\\n@@ -17715,7 +17848,6 @@ with_gnu_ld_F77 \\\n allow_undefined_flag_F77 \\\n no_undefined_flag_F77 \\\n hardcode_libdir_flag_spec_F77 \\\n-hardcode_libdir_flag_spec_ld_F77 \\\n hardcode_libdir_separator_F77 \\\n exclude_expsyms_F77 \\\n include_expsyms_F77 \\\n@@ -18360,8 +18492,8 @@ $as_echo X\"$file\" |\n # NOTE: Changes made to this file will be lost: look at ltmain.sh.\n #\n #   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005,\n-#                 2006, 2007, 2008, 2009, 2010 Free Software Foundation,\n-#                 Inc.\n+#                 2006, 2007, 2008, 2009, 2010, 2011 Free Software\n+#                 Foundation, Inc.\n #   Written by Gordon Matzigkeit, 1996\n #\n #   This file is part of GNU Libtool.\n@@ -18424,6 +18556,9 @@ SHELL=$lt_SHELL\n # An echo program that protects backslashes.\n ECHO=$lt_ECHO\n \n+# The PATH separator for the build system.\n+PATH_SEPARATOR=$lt_PATH_SEPARATOR\n+\n # The host system.\n host_alias=$host_alias\n host=$host\n@@ -18719,10 +18854,6 @@ no_undefined_flag=$lt_no_undefined_flag\n # This must work even if \\$libdir does not exist\n hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec\n \n-# If ld is used when linking, flag to hardcode \\$libdir into a binary\n-# during linking.  This must work even if \\$libdir does not exist.\n-hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld\n-\n # Whether we need a single \"-rpath\" flag with a separated argument.\n hardcode_libdir_separator=$lt_hardcode_libdir_separator\n \n@@ -19051,10 +19182,6 @@ no_undefined_flag=$lt_no_undefined_flag_F77\n # This must work even if \\$libdir does not exist\n hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec_F77\n \n-# If ld is used when linking, flag to hardcode \\$libdir into a binary\n-# during linking.  This must work even if \\$libdir does not exist.\n-hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld_F77\n-\n # Whether we need a single \"-rpath\" flag with a separated argument.\n hardcode_libdir_separator=$lt_hardcode_libdir_separator_F77\n \ndiff --git a/configure.ac b/configure.ac\nindex ba14d97..5ce69e7 100644\n--- a/configure.ac\n+++ b/configure.ac\n@@ -9,11 +9,11 @@ dnl Checks for standard programs.\n AC_PROG_F77\n \n ifdef([LT_INIT], [], [\n-  errprint([error: you must have libtool 2.2.2 or a more recent version\n+  errprint([error: you must have libtool 2.4.2 or a more recent version\n ])\n   m4exit([1])])\n \n-LT_PREREQ([2.2.2])\n+LT_PREREQ([2.4.2])\n LT_INIT([win32-dll])\n \n dnl Check for BLAS libraries\ndiff --git a/install-sh b/install-sh\nindex 6781b98..377bb86 100755\n--- a/install-sh\n+++ b/install-sh\n@@ -1,7 +1,7 @@\n #!/bin/sh\n # install - install a program, script, or datafile\n \n-scriptversion=2009-04-28.21; # UTC\n+scriptversion=2011-11-20.07; # UTC\n \n # This originates from X11R5 (mit/util/scripts/install.sh), which was\n # later released in X11R6 (xc/config/util/install.sh) with the\n@@ -35,7 +35,7 @@ scriptversion=2009-04-28.21; # UTC\n # FSF changes to this file are in the public domain.\n #\n # Calling this script install-sh is preferred over install.sh, to prevent\n-# `make' implicit rules from creating a file called install from it\n+# 'make' implicit rules from creating a file called install from it\n # when there is no Makefile.\n #\n # This script is compatible with the BSD install script, but was written\n@@ -156,6 +156,10 @@ while test $# -ne 0; do\n     -s) stripcmd=$stripprog;;\n \n     -t) dst_arg=$2\n+\t# Protect names problematic for 'test' and other utilities.\n+\tcase $dst_arg in\n+\t  -* | [=\\(\\)!]) dst_arg=./$dst_arg;;\n+\tesac\n \tshift;;\n \n     -T) no_target_directory=true;;\n@@ -186,6 +190,10 @@ if test $# -ne 0 && test -z \"$dir_arg$dst_arg\"; then\n     fi\n     shift # arg\n     dst_arg=$arg\n+    # Protect names problematic for 'test' and other utilities.\n+    case $dst_arg in\n+      -* | [=\\(\\)!]) dst_arg=./$dst_arg;;\n+    esac\n   done\n fi\n \n@@ -194,13 +202,17 @@ if test $# -eq 0; then\n     echo \"$0: no input file specified.\" >&2\n     exit 1\n   fi\n-  # It's OK to call `install-sh -d' without argument.\n+  # It's OK to call 'install-sh -d' without argument.\n   # This can happen when creating conditional directories.\n   exit 0\n fi\n \n if test -z \"$dir_arg\"; then\n-  trap '(exit $?); exit' 1 2 13 15\n+  do_exit='(exit $ret); exit $ret'\n+  trap \"ret=129; $do_exit\" 1\n+  trap \"ret=130; $do_exit\" 2\n+  trap \"ret=141; $do_exit\" 13\n+  trap \"ret=143; $do_exit\" 15\n \n   # Set umask so as not to create temps with too-generous modes.\n   # However, 'strip' requires both read and write access to temps.\n@@ -228,9 +240,9 @@ fi\n \n for src\n do\n-  # Protect names starting with `-'.\n+  # Protect names problematic for 'test' and other utilities.\n   case $src in\n-    -*) src=./$src;;\n+    -* | [=\\(\\)!]) src=./$src;;\n   esac\n \n   if test -n \"$dir_arg\"; then\n@@ -252,12 +264,7 @@ do\n       echo \"$0: no destination specified.\" >&2\n       exit 1\n     fi\n-\n     dst=$dst_arg\n-    # Protect names starting with `-'.\n-    case $dst in\n-      -*) dst=./$dst;;\n-    esac\n \n     # If destination is a directory, append the input filename; won't work\n     # if double slashes aren't ignored.\n@@ -347,7 +354,7 @@ do\n \t      if test -z \"$dir_arg\" || {\n \t\t   # Check for POSIX incompatibilities with -m.\n \t\t   # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or\n-\t\t   # other-writeable bit of parent directory when it shouldn't.\n+\t\t   # other-writable bit of parent directory when it shouldn't.\n \t\t   # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.\n \t\t   ls_ld_tmpdir=`ls -ld \"$tmpdir\"`\n \t\t   case $ls_ld_tmpdir in\n@@ -385,7 +392,7 @@ do\n \n       case $dstdir in\n \t/*) prefix='/';;\n-\t-*) prefix='./';;\n+\t[-=\\(\\)!]*) prefix='./';;\n \t*)  prefix='';;\n       esac\n \n@@ -403,7 +410,7 @@ do\n \n       for d\n       do\n-\ttest -z \"$d\" && continue\n+\ttest X\"$d\" = X && continue\n \n \tprefix=$prefix$d\n \tif test -d \"$prefix\"; then\ndiff --git a/ltmain.sh b/ltmain.sh\nindex c7d06c3..63ae69d 100644\n--- a/ltmain.sh\n+++ b/ltmain.sh\n@@ -70,7 +70,7 @@\n #         compiler:\t\t$LTCC\n #         compiler flags:\t\t$LTCFLAGS\n #         linker:\t\t$LD (gnu? $with_gnu_ld)\n-#         $progname:\t(GNU libtool) 2.4.2 Debian-2.4.2-1\n+#         $progname:\t(GNU libtool) 2.4.2\n #         automake:\t$automake_version\n #         autoconf:\t$autoconf_version\n #\n@@ -80,7 +80,7 @@\n \n PROGRAM=libtool\n PACKAGE=libtool\n-VERSION=\"2.4.2 Debian-2.4.2-1\"\n+VERSION=2.4.2\n TIMESTAMP=\"\"\n package_revision=1.3337\n \n@@ -6124,10 +6124,7 @@ func_mode_link ()\n \tcase $pass in\n \tdlopen) libs=\"$dlfiles\" ;;\n \tdlpreopen) libs=\"$dlprefiles\" ;;\n-\tlink)\n-\t  libs=\"$deplibs %DEPLIBS%\"\n-\t  test \"X$link_all_deplibs\" != Xno && libs=\"$libs $dependency_libs\"\n-\t  ;;\n+\tlink) libs=\"$deplibs %DEPLIBS% $dependency_libs\" ;;\n \tesac\n       fi\n       if test \"$linkmode,$pass\" = \"lib,dlpreopen\"; then\n@@ -6447,19 +6444,19 @@ func_mode_link ()\n \t    # It is a libtool convenience library, so add in its objects.\n \t    func_append convenience \" $ladir/$objdir/$old_library\"\n \t    func_append old_convenience \" $ladir/$objdir/$old_library\"\n-\t    tmp_libs=\n-\t    for deplib in $dependency_libs; do\n-\t      deplibs=\"$deplib $deplibs\"\n-\t      if $opt_preserve_dup_deps ; then\n-\t\tcase \"$tmp_libs \" in\n-\t\t*\" $deplib \"*) func_append specialdeplibs \" $deplib\" ;;\n-\t\tesac\n-\t      fi\n-\t      func_append tmp_libs \" $deplib\"\n-\t    done\n \t  elif test \"$linkmode\" != prog && test \"$linkmode\" != lib; then\n \t    func_fatal_error \"\\`$lib' is not a convenience library\"\n \t  fi\n+\t  tmp_libs=\n+\t  for deplib in $dependency_libs; do\n+\t    deplibs=\"$deplib $deplibs\"\n+\t    if $opt_preserve_dup_deps ; then\n+\t      case \"$tmp_libs \" in\n+\t      *\" $deplib \"*) func_append specialdeplibs \" $deplib\" ;;\n+\t      esac\n+\t    fi\n+\t    func_append tmp_libs \" $deplib\"\n+\t  done\n \t  continue\n \tfi # $pass = conv\n \n@@ -7352,9 +7349,6 @@ func_mode_link ()\n \t    revision=\"$number_minor\"\n \t    lt_irix_increment=no\n \t    ;;\n-\t  *)\n-\t    func_fatal_configuration \"$modename: unknown library version type \\`$version_type'\"\n-\t    ;;\n \t  esac\n \t  ;;\n \tno)\ndiff --git a/m4/libtool.m4 b/m4/libtool.m4\nindex 8ff3c76..56666f0 100644\n--- a/m4/libtool.m4\n+++ b/m4/libtool.m4\n@@ -1,8 +1,8 @@\n # libtool.m4 - Configure libtool for the host system. -*-Autoconf-*-\n #\n #   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005,\n-#                 2006, 2007, 2008, 2009, 2010 Free Software Foundation,\n-#                 Inc.\n+#                 2006, 2007, 2008, 2009, 2010, 2011 Free Software\n+#                 Foundation, Inc.\n #   Written by Gordon Matzigkeit, 1996\n #\n # This file is free software; the Free Software Foundation gives\n@@ -11,8 +11,8 @@\n \n m4_define([_LT_COPYING], [dnl\n #   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005,\n-#                 2006, 2007, 2008, 2009, 2010 Free Software Foundation,\n-#                 Inc.\n+#                 2006, 2007, 2008, 2009, 2010, 2011 Free Software\n+#                 Foundation, Inc.\n #   Written by Gordon Matzigkeit, 1996\n #\n #   This file is part of GNU Libtool.\n@@ -146,6 +146,8 @@ AC_REQUIRE([AC_CANONICAL_BUILD])dnl\n AC_REQUIRE([_LT_PREPARE_SED_QUOTE_VARS])dnl\n AC_REQUIRE([_LT_PROG_ECHO_BACKSLASH])dnl\n \n+_LT_DECL([], [PATH_SEPARATOR], [1], [The PATH separator for the build system])dnl\n+dnl\n _LT_DECL([], [host_alias], [0], [The host system])dnl\n _LT_DECL([], [host], [0])dnl\n _LT_DECL([], [host_os], [0])dnl\n@@ -637,7 +639,7 @@ m4_ifset([AC_PACKAGE_NAME], [AC_PACKAGE_NAME ])config.lt[]dnl\n m4_ifset([AC_PACKAGE_VERSION], [ AC_PACKAGE_VERSION])\n configured by $[0], generated by m4_PACKAGE_STRING.\n \n-Copyright (C) 2010 Free Software Foundation, Inc.\n+Copyright (C) 2011 Free Software Foundation, Inc.\n This config.lt script is free software; the Free Software Foundation\n gives unlimited permision to copy, distribute and modify it.\"\n \n@@ -801,6 +803,7 @@ AC_DEFUN([LT_LANG],\n m4_case([$1],\n   [C],\t\t\t[_LT_LANG(C)],\n   [C++],\t\t[_LT_LANG(CXX)],\n+  [Go],\t\t\t[_LT_LANG(GO)],\n   [Java],\t\t[_LT_LANG(GCJ)],\n   [Fortran 77],\t\t[_LT_LANG(F77)],\n   [Fortran],\t\t[_LT_LANG(FC)],\n@@ -822,6 +825,31 @@ m4_defun([_LT_LANG],\n ])# _LT_LANG\n \n \n+m4_ifndef([AC_PROG_GO], [\n+############################################################\n+# NOTE: This macro has been submitted for inclusion into   #\n+#  GNU Autoconf as AC_PROG_GO.  When it is available in    #\n+#  a released version of Autoconf we should remove this    #\n+#  macro and use it instead.                               #\n+############################################################\n+m4_defun([AC_PROG_GO],\n+[AC_LANG_PUSH(Go)dnl\n+AC_ARG_VAR([GOC],     [Go compiler command])dnl\n+AC_ARG_VAR([GOFLAGS], [Go compiler flags])dnl\n+_AC_ARG_VAR_LDFLAGS()dnl\n+AC_CHECK_TOOL(GOC, gccgo)\n+if test -z \"$GOC\"; then\n+  if test -n \"$ac_tool_prefix\"; then\n+    AC_CHECK_PROG(GOC, [${ac_tool_prefix}gccgo], [${ac_tool_prefix}gccgo])\n+  fi\n+fi\n+if test -z \"$GOC\"; then\n+  AC_CHECK_PROG(GOC, gccgo, gccgo, false)\n+fi\n+])#m4_defun\n+])#m4_ifndef\n+\n+\n # _LT_LANG_DEFAULT_CONFIG\n # -----------------------\n m4_defun([_LT_LANG_DEFAULT_CONFIG],\n@@ -852,6 +880,10 @@ AC_PROVIDE_IFELSE([AC_PROG_GCJ],\n        m4_ifdef([LT_PROG_GCJ],\n \t[m4_define([LT_PROG_GCJ], defn([LT_PROG_GCJ])[LT_LANG(GCJ)])])])])])\n \n+AC_PROVIDE_IFELSE([AC_PROG_GO],\n+  [LT_LANG(GO)],\n+  [m4_define([AC_PROG_GO], defn([AC_PROG_GO])[LT_LANG(GO)])])\n+\n AC_PROVIDE_IFELSE([LT_PROG_RC],\n   [LT_LANG(RC)],\n   [m4_define([LT_PROG_RC], defn([LT_PROG_RC])[LT_LANG(RC)])])\n@@ -954,7 +986,13 @@ m4_defun_once([_LT_REQUIRED_DARWIN_CHECKS],[\n \t$LTCC $LTCFLAGS $LDFLAGS -o libconftest.dylib \\\n \t  -dynamiclib -Wl,-single_module conftest.c 2>conftest.err\n         _lt_result=$?\n-\tif test -f libconftest.dylib && test ! -s conftest.err && test $_lt_result = 0; then\n+\t# If there is a non-empty error log, and \"single_module\"\n+\t# appears in it, assume the flag caused a linker warning\n+        if test -s conftest.err && $GREP single_module conftest.err; then\n+\t  cat conftest.err >&AS_MESSAGE_LOG_FD\n+\t# Otherwise, if the output was created with a 0 exit code from\n+\t# the compiler, it worked.\n+\telif test -f libconftest.dylib && test $_lt_result -eq 0; then\n \t  lt_cv_apple_cc_single_mod=yes\n \telse\n \t  cat conftest.err >&AS_MESSAGE_LOG_FD\n@@ -962,6 +1000,7 @@ m4_defun_once([_LT_REQUIRED_DARWIN_CHECKS],[\n \trm -rf libconftest.dylib*\n \trm -f conftest.*\n       fi])\n+\n     AC_CACHE_CHECK([for -exported_symbols_list linker flag],\n       [lt_cv_ld_exported_symbols_list],\n       [lt_cv_ld_exported_symbols_list=no\n@@ -973,6 +1012,7 @@ m4_defun_once([_LT_REQUIRED_DARWIN_CHECKS],[\n \t[lt_cv_ld_exported_symbols_list=no])\n \tLDFLAGS=\"$save_LDFLAGS\"\n     ])\n+\n     AC_CACHE_CHECK([for -force_load linker flag],[lt_cv_ld_force_load],\n       [lt_cv_ld_force_load=no\n       cat > conftest.c << _LT_EOF\n@@ -990,7 +1030,9 @@ _LT_EOF\n       echo \"$LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a\" >&AS_MESSAGE_LOG_FD\n       $LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a 2>conftest.err\n       _lt_result=$?\n-      if test -f conftest && test ! -s conftest.err && test $_lt_result = 0 && $GREP forced_load conftest 2>&1 >/dev/null; then\n+      if test -s conftest.err && $GREP force_load conftest.err; then\n+\tcat conftest.err >&AS_MESSAGE_LOG_FD\n+      elif test -f conftest && test $_lt_result -eq 0 && $GREP forced_load conftest >/dev/null 2>&1 ; then\n \tlt_cv_ld_force_load=yes\n       else\n \tcat conftest.err >&AS_MESSAGE_LOG_FD\n@@ -1035,8 +1077,8 @@ _LT_EOF\n ])\n \n \n-# _LT_DARWIN_LINKER_FEATURES\n-# --------------------------\n+# _LT_DARWIN_LINKER_FEATURES([TAG])\n+# ---------------------------------\n # Checks for linker and compiler features on darwin\n m4_defun([_LT_DARWIN_LINKER_FEATURES],\n [\n@@ -1047,6 +1089,8 @@ m4_defun([_LT_DARWIN_LINKER_FEATURES],\n   _LT_TAGVAR(hardcode_shlibpath_var, $1)=unsupported\n   if test \"$lt_cv_ld_force_load\" = \"yes\"; then\n     _LT_TAGVAR(whole_archive_flag_spec, $1)='`for conv in $convenience\\\"\\\"; do test  -n \\\"$conv\\\" && new_convenience=\\\"$new_convenience ${wl}-force_load,$conv\\\"; done; func_echo_all \\\"$new_convenience\\\"`'\n+    m4_case([$1], [F77], [_LT_TAGVAR(compiler_needs_object, $1)=yes],\n+                  [FC],  [_LT_TAGVAR(compiler_needs_object, $1)=yes])\n   else\n     _LT_TAGVAR(whole_archive_flag_spec, $1)=''\n   fi\n@@ -1330,14 +1374,27 @@ s390*-*linux*|s390*-*tpf*|sparc*-*linux*)\n     CFLAGS=\"$SAVE_CFLAGS\"\n   fi\n   ;;\n-sparc*-*solaris*)\n+*-*solaris*)\n   # Find out which ABI we are using.\n   echo 'int i;' > conftest.$ac_ext\n   if AC_TRY_EVAL(ac_compile); then\n     case `/usr/bin/file conftest.o` in\n     *64-bit*)\n       case $lt_cv_prog_gnu_ld in\n-      yes*) LD=\"${LD-ld} -m elf64_sparc\" ;;\n+      yes*)\n+        case $host in\n+        i?86-*-solaris*)\n+          LD=\"${LD-ld} -m elf_x86_64\"\n+          ;;\n+        sparc*-*-solaris*)\n+          LD=\"${LD-ld} -m elf64_sparc\"\n+          ;;\n+        esac\n+        # GNU ld 2.21 introduced _sol2 emulations.  Use them if available.\n+        if ${LD-ld} -V | grep _sol2 >/dev/null 2>&1; then\n+          LD=\"${LD-ld}_sol2\"\n+        fi\n+        ;;\n       *)\n \tif ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then\n \t  LD=\"${LD-ld} -64\"\n@@ -1414,13 +1471,13 @@ old_postuninstall_cmds=\n if test -n \"$RANLIB\"; then\n   case $host_os in\n   openbsd*)\n-    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB -t \\$oldlib\"\n+    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB -t \\$tool_oldlib\"\n     ;;\n   *)\n-    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB \\$oldlib\"\n+    old_postinstall_cmds=\"$old_postinstall_cmds~\\$RANLIB \\$tool_oldlib\"\n     ;;\n   esac\n-  old_archive_cmds=\"$old_archive_cmds~\\$RANLIB \\$oldlib\"\n+  old_archive_cmds=\"$old_archive_cmds~\\$RANLIB \\$tool_oldlib\"\n fi\n \n case $host_os in\n@@ -1600,6 +1657,11 @@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [dnl\n     lt_cv_sys_max_cmd_len=196608\n     ;;\n \n+  os2*)\n+    # The test takes a long time on OS/2.\n+    lt_cv_sys_max_cmd_len=8192\n+    ;;\n+\n   osf*)\n     # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure\n     # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not\n@@ -1639,7 +1701,7 @@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [dnl\n       # If test is not a shell built-in, we'll probably end up computing a\n       # maximum length that is only half of the actual maximum length, but\n       # we can't tell.\n-      while { test \"X\"`func_fallback_echo \"$teststring$teststring\" 2>/dev/null` \\\n+      while { test \"X\"`env echo \"$teststring$teststring\" 2>/dev/null` \\\n \t         = \"X$teststring$teststring\"; } >/dev/null 2>&1 &&\n \t      test $i != 17 # 1/2 MB should be enough\n       do\n@@ -2185,7 +2247,7 @@ need_version=unknown\n \n case $host_os in\n aix3*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'\n   shlibpath_var=LIBPATH\n \n@@ -2194,7 +2256,7 @@ aix3*)\n   ;;\n \n aix[[4-9]]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   hardcode_into_libs=yes\n@@ -2259,7 +2321,7 @@ beos*)\n   ;;\n \n bsdi[[45]]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n@@ -2398,7 +2460,7 @@ m4_if([$1], [],[\n   ;;\n \n dgux*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'\n@@ -2406,10 +2468,6 @@ dgux*)\n   shlibpath_var=LD_LIBRARY_PATH\n   ;;\n \n-freebsd1*)\n-  dynamic_linker=no\n-  ;;\n-\n freebsd* | dragonfly*)\n   # DragonFly does not have aout.  When/if they implement a new\n   # versioning mechanism, adjust this.\n@@ -2417,7 +2475,7 @@ freebsd* | dragonfly*)\n     objformat=`/usr/bin/objformat`\n   else\n     case $host_os in\n-    freebsd[[123]]*) objformat=aout ;;\n+    freebsd[[23]].*) objformat=aout ;;\n     *) objformat=elf ;;\n     esac\n   fi\n@@ -2435,7 +2493,7 @@ freebsd* | dragonfly*)\n   esac\n   shlibpath_var=LD_LIBRARY_PATH\n   case $host_os in\n-  freebsd2*)\n+  freebsd2.*)\n     shlibpath_overrides_runpath=yes\n     ;;\n   freebsd3.[[01]]* | freebsdelf3.[[01]]*)\n@@ -2455,7 +2513,7 @@ freebsd* | dragonfly*)\n   ;;\n \n gnu*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'\n@@ -2466,7 +2524,7 @@ gnu*)\n   ;;\n \n haiku*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   dynamic_linker=\"$host_os runtime_loader\"\n@@ -2527,7 +2585,7 @@ hpux9* | hpux10* | hpux11*)\n   ;;\n \n interix[[3-9]]*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'\n@@ -2543,7 +2601,7 @@ irix5* | irix6* | nonstopux*)\n     nonstopux*) version_type=nonstopux ;;\n     *)\n \tif test \"$lt_cv_prog_gnu_ld\" = yes; then\n-\t\tversion_type=linux\n+\t\tversion_type=linux # correct to gnu/linux during the next big refactor\n \telse\n \t\tversion_type=irix\n \tfi ;;\n@@ -2580,9 +2638,9 @@ linux*oldld* | linux*aout* | linux*coff*)\n   dynamic_linker=no\n   ;;\n \n-# This must be Linux ELF.\n+# This must be glibc/ELF.\n linux* | k*bsd*-gnu | kopensolaris*-gnu)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -2611,10 +2669,14 @@ linux* | k*bsd*-gnu | kopensolaris*-gnu)\n   # before this can be enabled.\n   hardcode_into_libs=yes\n \n+  # Add ABI-specific directories to the system library path.\n+  sys_lib_dlsearch_path_spec=\"/lib64 /usr/lib64 /lib /usr/lib\"\n+\n   # Append ld.so.conf contents to the search path\n   if test -f /etc/ld.so.conf; then\n     lt_ld_extra=`awk '/^include / { system(sprintf(\"cd /etc; cat %s 2>/dev/null\", \\[$]2)); skip = 1; } { if (!skip) print \\[$]0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[\t ]*hwcap[\t ]/d;s/[:,\t]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;s/\"//g;/^$/d' | tr '\\n' ' '`\n-    sys_lib_dlsearch_path_spec=\"/lib /usr/lib $lt_ld_extra\"\n+    sys_lib_dlsearch_path_spec=\"$sys_lib_dlsearch_path_spec $lt_ld_extra\"\n+\n   fi\n \n   # We used to test for /lib/ld.so.1 and disable shared libraries on\n@@ -2626,18 +2688,6 @@ linux* | k*bsd*-gnu | kopensolaris*-gnu)\n   dynamic_linker='GNU/Linux ld.so'\n   ;;\n \n-netbsdelf*-gnu)\n-  version_type=linux\n-  need_lib_prefix=no\n-  need_version=no\n-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'\n-  soname_spec='${libname}${release}${shared_ext}$major'\n-  shlibpath_var=LD_LIBRARY_PATH\n-  shlibpath_overrides_runpath=no\n-  hardcode_into_libs=yes\n-  dynamic_linker='NetBSD ld.elf_so'\n-  ;;\n-\n netbsd*)\n   version_type=sunos\n   need_lib_prefix=no\n@@ -2657,7 +2707,7 @@ netbsd*)\n   ;;\n \n newsos6)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   shlibpath_var=LD_LIBRARY_PATH\n   shlibpath_overrides_runpath=yes\n@@ -2726,7 +2776,7 @@ rdos*)\n   ;;\n \n solaris*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -2751,7 +2801,7 @@ sunos4*)\n   ;;\n \n sysv4 | sysv4.3*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n   shlibpath_var=LD_LIBRARY_PATH\n@@ -2775,7 +2825,7 @@ sysv4 | sysv4.3*)\n \n sysv4*MP*)\n   if test -d /usr/nec ;then\n-    version_type=linux\n+    version_type=linux # correct to gnu/linux during the next big refactor\n     library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'\n     soname_spec='$libname${shared_ext}.$major'\n     shlibpath_var=LD_LIBRARY_PATH\n@@ -2806,7 +2856,7 @@ sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)\n \n tpf*)\n   # TPF is a cross-target only.  Preferred cross-host = GNU/Linux.\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   need_lib_prefix=no\n   need_version=no\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n@@ -2816,7 +2866,7 @@ tpf*)\n   ;;\n \n uts4*)\n-  version_type=linux\n+  version_type=linux # correct to gnu/linux during the next big refactor\n   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'\n   soname_spec='${libname}${release}${shared_ext}$major'\n   shlibpath_var=LD_LIBRARY_PATH\n@@ -3238,12 +3288,12 @@ irix5* | irix6* | nonstopux*)\n   lt_cv_deplibs_check_method=pass_all\n   ;;\n \n-# This must be Linux ELF.\n+# This must be glibc/ELF.\n linux* | k*bsd*-gnu | kopensolaris*-gnu)\n   lt_cv_deplibs_check_method=pass_all\n   ;;\n \n-netbsd* | netbsdelf*-gnu)\n+netbsd*)\n   if echo __ELF__ | $CC -E - | $GREP __ELF__ > /dev/null; then\n     lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\\.so\\.[[0-9]]+\\.[[0-9]]+|_pic\\.a)$'\n   else\n@@ -3658,6 +3708,7 @@ for ac_symprfx in \"\" \"_\"; do\n     # which start with @ or ?.\n     lt_cv_sys_global_symbol_pipe=\"$AWK ['\"\\\n \"     {last_section=section; section=\\$ 3};\"\\\n+\"     /^COFF SYMBOL TABLE/{for(i in hide) delete hide[i]};\"\\\n \"     /Section length .*#relocs.*(pick any)/{hide[last_section]=1};\"\\\n \"     \\$ 0!~/External *\\|/{next};\"\\\n \"     / 0+ UNDEF /{next}; / UNDEF \\([^|]\\)*()/{next};\"\\\n@@ -4054,7 +4105,7 @@ m4_if([$1], [CXX], [\n \t    ;;\n \tesac\n \t;;\n-      netbsd* | netbsdelf*-gnu)\n+      netbsd*)\n \t;;\n       *qnx* | *nto*)\n         # QNX uses GNU C++, but need to define -shared option too, otherwise\n@@ -4242,7 +4293,9 @@ m4_if([$1], [CXX], [\n     case $cc_basename in\n     nvcc*) # Cuda Compiler Driver 2.2\n       _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Xlinker '\n-      _LT_TAGVAR(lt_prog_compiler_pic, $1)='-Xcompiler -fPIC'\n+      if test -n \"$_LT_TAGVAR(lt_prog_compiler_pic, $1)\"; then\n+        _LT_TAGVAR(lt_prog_compiler_pic, $1)=\"-Xcompiler $_LT_TAGVAR(lt_prog_compiler_pic, $1)\"\n+      fi\n       ;;\n     esac\n   else\n@@ -4334,18 +4387,33 @@ m4_if([$1], [CXX], [\n \t;;\n       *)\n \tcase `$CC -V 2>&1 | sed 5q` in\n-\t*Sun\\ F* | *Sun*Fortran*)\n+\t*Sun\\ Ceres\\ Fortran* | *Sun*Fortran*\\ [[1-7]].* | *Sun*Fortran*\\ 8.[[0-3]]*)\n \t  # Sun Fortran 8.3 passes all unrecognized flags to the linker\n \t  _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'\n \t  _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'\n \t  _LT_TAGVAR(lt_prog_compiler_wl, $1)=''\n \t  ;;\n+\t*Sun\\ F* | *Sun*Fortran*)\n+\t  _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'\n+\t  _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'\n+\t  _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Qoption ld '\n+\t  ;;\n \t*Sun\\ C*)\n \t  # Sun C 5.9\n \t  _LT_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'\n \t  _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'\n \t  _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'\n \t  ;;\n+        *Intel*\\ [[CF]]*Compiler*)\n+\t  _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'\n+\t  _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'\n+\t  _LT_TAGVAR(lt_prog_compiler_static, $1)='-static'\n+\t  ;;\n+\t*Portland\\ Group*)\n+\t  _LT_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'\n+\t  _LT_TAGVAR(lt_prog_compiler_pic, $1)='-fpic'\n+\t  _LT_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'\n+\t  ;;\n \tesac\n \t;;\n       esac\n@@ -4505,16 +4573,15 @@ m4_if([$1], [CXX], [\n     ;;\n   cygwin* | mingw* | cegcc*)\n     case $cc_basename in\n-    cl*) ;;\n+    cl*)\n+      _LT_TAGVAR(exclude_expsyms, $1)='_NULL_IMPORT_DESCRIPTOR|_IMPORT_DESCRIPTOR_.*'\n+      ;;\n     *)\n       _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\\([[^ ]]*\\)/\\1 DATA/;s/^.*[[ ]]__nm__\\([[^ ]]*\\)[[ ]][[^ ]]*/\\1 DATA/;/^I[[ ]]/d;/^[[AITW]][[ ]]/s/.* //'\\'' | sort | uniq > $export_symbols'\n       _LT_TAGVAR(exclude_expsyms, $1)=['[_]+GLOBAL_OFFSET_TABLE_|[_]+GLOBAL__[FID]_.*|[_]+head_[A-Za-z0-9_]+_dll|[A-Za-z0-9_]+_dll_iname']\n       ;;\n     esac\n     ;;\n-  linux* | k*bsd*-gnu | gnu*)\n-    _LT_TAGVAR(link_all_deplibs, $1)=no\n-    ;;\n   *)\n     _LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\\''s/.* //'\\'' | sort | uniq > $export_symbols'\n     ;;\n@@ -4533,7 +4600,6 @@ m4_if([$1], [CXX], [\n   _LT_TAGVAR(hardcode_direct, $1)=no\n   _LT_TAGVAR(hardcode_direct_absolute, $1)=no\n   _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=\n-  _LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=\n   _LT_TAGVAR(hardcode_libdir_separator, $1)=\n   _LT_TAGVAR(hardcode_minus_L, $1)=no\n   _LT_TAGVAR(hardcode_shlibpath_var, $1)=unsupported\n@@ -4578,9 +4644,6 @@ dnl Note also adjust exclude_expsyms for C++ above.\n   openbsd*)\n     with_gnu_ld=no\n     ;;\n-  linux* | k*bsd*-gnu | gnu*)\n-    _LT_TAGVAR(link_all_deplibs, $1)=no\n-    ;;\n   esac\n \n   _LT_TAGVAR(ld_shlibs, $1)=yes\n@@ -4787,8 +4850,7 @@ _LT_EOF\n \txlf* | bgf* | bgxlf* | mpixlf*)\n \t  # IBM XL Fortran 10.1 on PPC cannot create shared libs itself\n \t  _LT_TAGVAR(whole_archive_flag_spec, $1)='--whole-archive$convenience --no-whole-archive'\n-\t  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=\n-\t  _LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='-rpath $libdir'\n+\t  _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'\n \t  _LT_TAGVAR(archive_cmds, $1)='$LD -shared $libobjs $deplibs $linker_flags -soname $soname -o $lib'\n \t  if test \"x$supports_anon_versioning\" = xyes; then\n \t    _LT_TAGVAR(archive_expsym_cmds, $1)='echo \"{ global:\" > $output_objdir/$libname.ver~\n@@ -4803,7 +4865,7 @@ _LT_EOF\n       fi\n       ;;\n \n-    netbsd* | netbsdelf*-gnu)\n+    netbsd*)\n       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then\n \t_LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'\n \twlarc=\n@@ -4980,7 +5042,6 @@ _LT_EOF\n \tif test \"$aix_use_runtimelinking\" = yes; then\n \t  shared_flag=\"$shared_flag \"'${wl}-G'\n \tfi\n-\t_LT_TAGVAR(link_all_deplibs, $1)=no\n       else\n \t# not using gcc\n \tif test \"$host_cpu\" = ia64; then\n@@ -5084,6 +5145,7 @@ _LT_EOF\n \t# The linker will not automatically build a static lib if we build a DLL.\n \t# _LT_TAGVAR(old_archive_from_new_cmds, $1)='true'\n \t_LT_TAGVAR(enable_shared_with_static_runtimes, $1)=yes\n+\t_LT_TAGVAR(exclude_expsyms, $1)='_NULL_IMPORT_DESCRIPTOR|_IMPORT_DESCRIPTOR_.*'\n \t_LT_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\\''/^[[BCDGRS]][[ ]]/s/.*[[ ]]\\([[^ ]]*\\)/\\1,DATA/'\\'' | $SED -e '\\''/^[[AITW]][[ ]]/s/.*[[ ]]//'\\'' | sort | uniq > $export_symbols'\n \t# Don't use ranlib\n \t_LT_TAGVAR(old_postinstall_cmds, $1)='chmod 644 $oldlib'\n@@ -5130,10 +5192,6 @@ _LT_EOF\n       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no\n       ;;\n \n-    freebsd1*)\n-      _LT_TAGVAR(ld_shlibs, $1)=no\n-      ;;\n-\n     # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor\n     # support.  Future versions do this automatically, but an explicit c++rt0.o\n     # does not break anything, and helps significantly (at the cost of a little\n@@ -5146,7 +5204,7 @@ _LT_EOF\n       ;;\n \n     # Unfortunately, older versions of FreeBSD 2 do not have this feature.\n-    freebsd2*)\n+    freebsd2.*)\n       _LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n       _LT_TAGVAR(hardcode_direct, $1)=yes\n       _LT_TAGVAR(hardcode_minus_L, $1)=yes\n@@ -5185,7 +5243,6 @@ _LT_EOF\n       fi\n       if test \"$with_gnu_ld\" = no; then\n \t_LT_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'\n-\t_LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='+b $libdir'\n \t_LT_TAGVAR(hardcode_libdir_separator, $1)=:\n \t_LT_TAGVAR(hardcode_direct, $1)=yes\n \t_LT_TAGVAR(hardcode_direct_absolute, $1)=yes\n@@ -5289,7 +5346,7 @@ _LT_EOF\n       _LT_TAGVAR(link_all_deplibs, $1)=yes\n       ;;\n \n-    netbsd* | netbsdelf*-gnu)\n+    netbsd*)\n       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then\n \t_LT_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out\n       else\n@@ -5627,9 +5684,6 @@ _LT_TAGDECL([], [no_undefined_flag], [1],\n _LT_TAGDECL([], [hardcode_libdir_flag_spec], [1],\n     [Flag to hardcode $libdir into a binary during linking.\n     This must work even if $libdir does not exist])\n-_LT_TAGDECL([], [hardcode_libdir_flag_spec_ld], [1],\n-    [[If ld is used when linking, flag to hardcode $libdir into a binary\n-    during linking.  This must work even if $libdir does not exist]])\n _LT_TAGDECL([], [hardcode_libdir_separator], [1],\n     [Whether we need a single \"-rpath\" flag with a separated argument])\n _LT_TAGDECL([], [hardcode_direct], [0],\n@@ -5787,7 +5841,6 @@ _LT_TAGVAR(export_dynamic_flag_spec, $1)=\n _LT_TAGVAR(hardcode_direct, $1)=no\n _LT_TAGVAR(hardcode_direct_absolute, $1)=no\n _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=\n-_LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=\n _LT_TAGVAR(hardcode_libdir_separator, $1)=\n _LT_TAGVAR(hardcode_minus_L, $1)=no\n _LT_TAGVAR(hardcode_shlibpath_var, $1)=unsupported\n@@ -6157,7 +6210,7 @@ if test \"$_lt_caught_CXX_error\" != yes; then\n         esac\n         ;;\n \n-      freebsd[[12]]*)\n+      freebsd2.*)\n         # C++ shared libraries reported to be fairly broken before\n \t# switch to ELF\n         _LT_TAGVAR(ld_shlibs, $1)=no\n@@ -6918,12 +6971,18 @@ public class foo {\n   }\n };\n _LT_EOF\n+], [$1], [GO], [cat > conftest.$ac_ext <<_LT_EOF\n+package foo\n+func foo() {\n+}\n+_LT_EOF\n ])\n \n _lt_libdeps_save_CFLAGS=$CFLAGS\n case \"$CC $CFLAGS \" in #(\n *\\ -flto*\\ *) CFLAGS=\"$CFLAGS -fno-lto\" ;;\n *\\ -fwhopr*\\ *) CFLAGS=\"$CFLAGS -fno-whopr\" ;;\n+*\\ -fuse-linker-plugin*\\ *) CFLAGS=\"$CFLAGS -fno-use-linker-plugin\" ;;\n esac\n \n dnl Parse the compiler output and extract the necessary\n@@ -7120,7 +7179,6 @@ _LT_TAGVAR(export_dynamic_flag_spec, $1)=\n _LT_TAGVAR(hardcode_direct, $1)=no\n _LT_TAGVAR(hardcode_direct_absolute, $1)=no\n _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=\n-_LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=\n _LT_TAGVAR(hardcode_libdir_separator, $1)=\n _LT_TAGVAR(hardcode_minus_L, $1)=no\n _LT_TAGVAR(hardcode_automatic, $1)=no\n@@ -7253,7 +7311,6 @@ _LT_TAGVAR(export_dynamic_flag_spec, $1)=\n _LT_TAGVAR(hardcode_direct, $1)=no\n _LT_TAGVAR(hardcode_direct_absolute, $1)=no\n _LT_TAGVAR(hardcode_libdir_flag_spec, $1)=\n-_LT_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=\n _LT_TAGVAR(hardcode_libdir_separator, $1)=\n _LT_TAGVAR(hardcode_minus_L, $1)=no\n _LT_TAGVAR(hardcode_automatic, $1)=no\n@@ -7440,6 +7497,77 @@ CFLAGS=$lt_save_CFLAGS\n ])# _LT_LANG_GCJ_CONFIG\n \n \n+# _LT_LANG_GO_CONFIG([TAG])\n+# --------------------------\n+# Ensure that the configuration variables for the GNU Go compiler\n+# are suitably defined.  These variables are subsequently used by _LT_CONFIG\n+# to write the compiler configuration to `libtool'.\n+m4_defun([_LT_LANG_GO_CONFIG],\n+[AC_REQUIRE([LT_PROG_GO])dnl\n+AC_LANG_SAVE\n+\n+# Source file extension for Go test sources.\n+ac_ext=go\n+\n+# Object file extension for compiled Go test sources.\n+objext=o\n+_LT_TAGVAR(objext, $1)=$objext\n+\n+# Code to be used in simple compile tests\n+lt_simple_compile_test_code=\"package main; func main() { }\"\n+\n+# Code to be used in simple link tests\n+lt_simple_link_test_code='package main; func main() { }'\n+\n+# ltmain only uses $CC for tagged configurations so make sure $CC is set.\n+_LT_TAG_COMPILER\n+\n+# save warnings/boilerplate of simple test code\n+_LT_COMPILER_BOILERPLATE\n+_LT_LINKER_BOILERPLATE\n+\n+# Allow CC to be a program name with arguments.\n+lt_save_CC=$CC\n+lt_save_CFLAGS=$CFLAGS\n+lt_save_GCC=$GCC\n+GCC=yes\n+CC=${GOC-\"gccgo\"}\n+CFLAGS=$GOFLAGS\n+compiler=$CC\n+_LT_TAGVAR(compiler, $1)=$CC\n+_LT_TAGVAR(LD, $1)=\"$LD\"\n+_LT_CC_BASENAME([$compiler])\n+\n+# Go did not exist at the time GCC didn't implicitly link libc in.\n+_LT_TAGVAR(archive_cmds_need_lc, $1)=no\n+\n+_LT_TAGVAR(old_archive_cmds, $1)=$old_archive_cmds\n+_LT_TAGVAR(reload_flag, $1)=$reload_flag\n+_LT_TAGVAR(reload_cmds, $1)=$reload_cmds\n+\n+## CAVEAT EMPTOR:\n+## There is no encapsulation within the following macros, do not change\n+## the running order or otherwise move them around unless you know exactly\n+## what you are doing...\n+if test -n \"$compiler\"; then\n+  _LT_COMPILER_NO_RTTI($1)\n+  _LT_COMPILER_PIC($1)\n+  _LT_COMPILER_C_O($1)\n+  _LT_COMPILER_FILE_LOCKS($1)\n+  _LT_LINKER_SHLIBS($1)\n+  _LT_LINKER_HARDCODE_LIBPATH($1)\n+\n+  _LT_CONFIG($1)\n+fi\n+\n+AC_LANG_RESTORE\n+\n+GCC=$lt_save_GCC\n+CC=$lt_save_CC\n+CFLAGS=$lt_save_CFLAGS\n+])# _LT_LANG_GO_CONFIG\n+\n+\n # _LT_LANG_RC_CONFIG([TAG])\n # -------------------------\n # Ensure that the configuration variables for the Windows resource compiler\n@@ -7509,6 +7637,13 @@ dnl aclocal-1.4 backwards compatibility:\n dnl AC_DEFUN([LT_AC_PROG_GCJ], [])\n \n \n+# LT_PROG_GO\n+# ----------\n+AC_DEFUN([LT_PROG_GO],\n+[AC_CHECK_TOOL(GOC, gccgo,)\n+])\n+\n+\n # LT_PROG_RC\n # ----------\n AC_DEFUN([LT_PROG_RC],\ndiff --git a/m4/ltoptions.m4 b/m4/ltoptions.m4\nindex 17cfd51..5d9acd8 100644\n--- a/m4/ltoptions.m4\n+++ b/m4/ltoptions.m4\n@@ -326,9 +326,24 @@ dnl AC_DEFUN([AM_DISABLE_FAST_INSTALL], [])\n # MODE is either `yes' or `no'.  If omitted, it defaults to `both'.\n m4_define([_LT_WITH_PIC],\n [AC_ARG_WITH([pic],\n-    [AS_HELP_STRING([--with-pic],\n+    [AS_HELP_STRING([--with-pic@<:@=PKGS@:>@],\n \t[try to use only PIC/non-PIC objects @<:@default=use both@:>@])],\n-    [pic_mode=\"$withval\"],\n+    [lt_p=${PACKAGE-default}\n+    case $withval in\n+    yes|no) pic_mode=$withval ;;\n+    *)\n+      pic_mode=default\n+      # Look at the argument we got.  We use all the common list separators.\n+      lt_save_ifs=\"$IFS\"; IFS=\"${IFS}$PATH_SEPARATOR,\"\n+      for lt_pkg in $withval; do\n+\tIFS=\"$lt_save_ifs\"\n+\tif test \"X$lt_pkg\" = \"X$lt_p\"; then\n+\t  pic_mode=yes\n+\tfi\n+      done\n+      IFS=\"$lt_save_ifs\"\n+      ;;\n+    esac],\n     [pic_mode=default])\n \n test -z \"$pic_mode\" && pic_mode=m4_default([$1], [default])\ndiff --git a/missing b/missing\nindex 28055d2..cdea514 100755\n--- a/missing\n+++ b/missing\n@@ -1,11 +1,10 @@\n #! /bin/sh\n-# Common stub for a few missing GNU programs while installing.\n+# Common wrapper for a few potentially missing GNU programs.\n \n-scriptversion=2009-04-28.21; # UTC\n+scriptversion=2012-06-26.16; # UTC\n \n-# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003, 2004, 2005, 2006,\n-# 2008, 2009 Free Software Foundation, Inc.\n-# Originally by Fran,cois Pinard <pinard@iro.umontreal.ca>, 1996.\n+# Copyright (C) 1996-2013 Free Software Foundation, Inc.\n+# Originally written by Fran,cois Pinard <pinard@iro.umontreal.ca>, 1996.\n \n # This program is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -26,69 +25,40 @@ scriptversion=2009-04-28.21; # UTC\n # the same distribution terms that you use for the rest of that program.\n \n if test $# -eq 0; then\n-  echo 1>&2 \"Try \\`$0 --help' for more information\"\n+  echo 1>&2 \"Try '$0 --help' for more information\"\n   exit 1\n fi\n \n-run=:\n-sed_output='s/.* --output[ =]\\([^ ]*\\).*/\\1/p'\n-sed_minuso='s/.* -o \\([^ ]*\\).*/\\1/p'\n-\n-# In the cases where this matters, `missing' is being run in the\n-# srcdir already.\n-if test -f configure.ac; then\n-  configure_ac=configure.ac\n-else\n-  configure_ac=configure.in\n-fi\n+case $1 in\n \n-msg=\"missing on your system\"\n+  --is-lightweight)\n+    # Used by our autoconf macros to check whether the available missing\n+    # script is modern enough.\n+    exit 0\n+    ;;\n \n-case $1 in\n---run)\n-  # Try to run requested program, and just exit if it succeeds.\n-  run=\n-  shift\n-  \"$@\" && exit 0\n-  # Exit code 63 means version mismatch.  This often happens\n-  # when the user try to use an ancient version of a tool on\n-  # a file that requires a minimum version.  In this case we\n-  # we should proceed has if the program had been absent, or\n-  # if --run hadn't been passed.\n-  if test $? = 63; then\n-    run=:\n-    msg=\"probably too old\"\n-  fi\n-  ;;\n+  --run)\n+    # Back-compat with the calling convention used by older automake.\n+    shift\n+    ;;\n \n   -h|--h|--he|--hel|--help)\n     echo \"\\\n $0 [OPTION]... PROGRAM [ARGUMENT]...\n \n-Handle \\`PROGRAM [ARGUMENT]...' for when PROGRAM is missing, or return an\n-error status if there is no known handling for PROGRAM.\n+Run 'PROGRAM [ARGUMENT]...', returning a proper advice when this fails due\n+to PROGRAM being missing or too old.\n \n Options:\n   -h, --help      display this help and exit\n   -v, --version   output version information and exit\n-  --run           try to run the given command, and emulate it if it fails\n \n Supported PROGRAM values:\n-  aclocal      touch file \\`aclocal.m4'\n-  autoconf     touch file \\`configure'\n-  autoheader   touch file \\`config.h.in'\n-  autom4te     touch the output file, or create a stub one\n-  automake     touch all \\`Makefile.in' files\n-  bison        create \\`y.tab.[ch]', if possible, from existing .[ch]\n-  flex         create \\`lex.yy.c', if possible, from existing .c\n-  help2man     touch the output file\n-  lex          create \\`lex.yy.c', if possible, from existing .c\n-  makeinfo     touch the output file\n-  tar          try tar, gnutar, gtar, then tar without non-portable flags\n-  yacc         create \\`y.tab.[ch]', if possible, from existing .[ch]\n+  aclocal   autoconf  autoheader   autom4te  automake  makeinfo\n+  bison     yacc      flex         lex       help2man\n \n-Version suffixes to PROGRAM as well as the prefixes \\`gnu-', \\`gnu', and\n-\\`g' are ignored when checking the name.\n+Version suffixes to PROGRAM as well as the prefixes 'gnu-', 'gnu', and\n+'g' are ignored when checking the name.\n \n Send bug reports to <bug-automake@gnu.org>.\"\n     exit $?\n@@ -100,272 +70,141 @@ Send bug reports to <bug-automake@gnu.org>.\"\n     ;;\n \n   -*)\n-    echo 1>&2 \"$0: Unknown \\`$1' option\"\n-    echo 1>&2 \"Try \\`$0 --help' for more information\"\n+    echo 1>&2 \"$0: unknown '$1' option\"\n+    echo 1>&2 \"Try '$0 --help' for more information\"\n     exit 1\n     ;;\n \n esac\n \n-# normalize program name to check for.\n-program=`echo \"$1\" | sed '\n-  s/^gnu-//; t\n-  s/^gnu//; t\n-  s/^g//; t'`\n-\n-# Now exit if we have it, but it failed.  Also exit now if we\n-# don't have it and --version was passed (most likely to detect\n-# the program).  This is about non-GNU programs, so use $1 not\n-# $program.\n-case $1 in\n-  lex*|yacc*)\n-    # Not GNU programs, they don't have --version.\n-    ;;\n-\n-  tar*)\n-    if test -n \"$run\"; then\n-       echo 1>&2 \"ERROR: \\`tar' requires --run\"\n-       exit 1\n-    elif test \"x$2\" = \"x--version\" || test \"x$2\" = \"x--help\"; then\n-       exit 1\n-    fi\n-    ;;\n-\n-  *)\n-    if test -z \"$run\" && ($1 --version) > /dev/null 2>&1; then\n-       # We have it, but it failed.\n-       exit 1\n-    elif test \"x$2\" = \"x--version\" || test \"x$2\" = \"x--help\"; then\n-       # Could not run --version or --help.  This is probably someone\n-       # running `$TOOL --version' or `$TOOL --help' to check whether\n-       # $TOOL exists and not knowing $TOOL uses missing.\n-       exit 1\n-    fi\n-    ;;\n-esac\n-\n-# If it does not exist, or fails to run (possibly an outdated version),\n-# try to emulate it.\n-case $program in\n-  aclocal*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is $msg.  You should only need it if\n-         you modified \\`acinclude.m4' or \\`${configure_ac}'.  You might want\n-         to install the \\`Automake' and \\`Perl' packages.  Grab them from\n-         any GNU archive site.\"\n-    touch aclocal.m4\n-    ;;\n-\n-  autoconf*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is $msg.  You should only need it if\n-         you modified \\`${configure_ac}'.  You might want to install the\n-         \\`Autoconf' and \\`GNU m4' packages.  Grab them from any GNU\n-         archive site.\"\n-    touch configure\n-    ;;\n-\n-  autoheader*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is $msg.  You should only need it if\n-         you modified \\`acconfig.h' or \\`${configure_ac}'.  You might want\n-         to install the \\`Autoconf' and \\`GNU m4' packages.  Grab them\n-         from any GNU archive site.\"\n-    files=`sed -n 's/^[ ]*A[CM]_CONFIG_HEADER(\\([^)]*\\)).*/\\1/p' ${configure_ac}`\n-    test -z \"$files\" && files=\"config.h\"\n-    touch_files=\n-    for f in $files; do\n-      case $f in\n-      *:*) touch_files=\"$touch_files \"`echo \"$f\" |\n-\t\t\t\t       sed -e 's/^[^:]*://' -e 's/:.*//'`;;\n-      *) touch_files=\"$touch_files $f.in\";;\n-      esac\n-    done\n-    touch $touch_files\n-    ;;\n-\n-  automake*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is $msg.  You should only need it if\n-         you modified \\`Makefile.am', \\`acinclude.m4' or \\`${configure_ac}'.\n-         You might want to install the \\`Automake' and \\`Perl' packages.\n-         Grab them from any GNU archive site.\"\n-    find . -type f -name Makefile.am -print |\n-\t   sed 's/\\.am$/.in/' |\n-\t   while read f; do touch \"$f\"; done\n-    ;;\n-\n-  autom4te*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is needed, but is $msg.\n-         You might have modified some files without having the\n-         proper tools for further handling them.\n-         You can get \\`$1' as part of \\`Autoconf' from any GNU\n-         archive site.\"\n-\n-    file=`echo \"$*\" | sed -n \"$sed_output\"`\n-    test -z \"$file\" && file=`echo \"$*\" | sed -n \"$sed_minuso\"`\n-    if test -f \"$file\"; then\n-\ttouch $file\n-    else\n-\ttest -z \"$file\" || exec >$file\n-\techo \"#! /bin/sh\"\n-\techo \"# Created by GNU Automake missing as a replacement of\"\n-\techo \"#  $ $@\"\n-\techo \"exit 0\"\n-\tchmod +x $file\n-\texit 1\n-    fi\n-    ;;\n-\n-  bison*|yacc*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' $msg.  You should only need it if\n-         you modified a \\`.y' file.  You may need the \\`Bison' package\n-         in order for those modifications to take effect.  You can get\n-         \\`Bison' from any GNU archive site.\"\n-    rm -f y.tab.c y.tab.h\n-    if test $# -ne 1; then\n-        eval LASTARG=\"\\${$#}\"\n-\tcase $LASTARG in\n-\t*.y)\n-\t    SRCFILE=`echo \"$LASTARG\" | sed 's/y$/c/'`\n-\t    if test -f \"$SRCFILE\"; then\n-\t         cp \"$SRCFILE\" y.tab.c\n-\t    fi\n-\t    SRCFILE=`echo \"$LASTARG\" | sed 's/y$/h/'`\n-\t    if test -f \"$SRCFILE\"; then\n-\t         cp \"$SRCFILE\" y.tab.h\n-\t    fi\n-\t  ;;\n-\tesac\n-    fi\n-    if test ! -f y.tab.h; then\n-\techo >y.tab.h\n-    fi\n-    if test ! -f y.tab.c; then\n-\techo 'main() { return 0; }' >y.tab.c\n-    fi\n-    ;;\n-\n-  lex*|flex*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is $msg.  You should only need it if\n-         you modified a \\`.l' file.  You may need the \\`Flex' package\n-         in order for those modifications to take effect.  You can get\n-         \\`Flex' from any GNU archive site.\"\n-    rm -f lex.yy.c\n-    if test $# -ne 1; then\n-        eval LASTARG=\"\\${$#}\"\n-\tcase $LASTARG in\n-\t*.l)\n-\t    SRCFILE=`echo \"$LASTARG\" | sed 's/l$/c/'`\n-\t    if test -f \"$SRCFILE\"; then\n-\t         cp \"$SRCFILE\" lex.yy.c\n-\t    fi\n-\t  ;;\n-\tesac\n-    fi\n-    if test ! -f lex.yy.c; then\n-\techo 'main() { return 0; }' >lex.yy.c\n-    fi\n-    ;;\n-\n-  help2man*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is $msg.  You should only need it if\n-\t you modified a dependency of a manual page.  You may need the\n-\t \\`Help2man' package in order for those modifications to take\n-\t effect.  You can get \\`Help2man' from any GNU archive site.\"\n-\n-    file=`echo \"$*\" | sed -n \"$sed_output\"`\n-    test -z \"$file\" && file=`echo \"$*\" | sed -n \"$sed_minuso\"`\n-    if test -f \"$file\"; then\n-\ttouch $file\n-    else\n-\ttest -z \"$file\" || exec >$file\n-\techo \".ab help2man is required to generate this page\"\n-\texit $?\n-    fi\n-    ;;\n-\n-  makeinfo*)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is $msg.  You should only need it if\n-         you modified a \\`.texi' or \\`.texinfo' file, or any other file\n-         indirectly affecting the aspect of the manual.  The spurious\n-         call might also be the consequence of using a buggy \\`make' (AIX,\n-         DU, IRIX).  You might want to install the \\`Texinfo' package or\n-         the \\`GNU make' package.  Grab either from any GNU archive site.\"\n-    # The file to touch is that specified with -o ...\n-    file=`echo \"$*\" | sed -n \"$sed_output\"`\n-    test -z \"$file\" && file=`echo \"$*\" | sed -n \"$sed_minuso\"`\n-    if test -z \"$file\"; then\n-      # ... or it is the one specified with @setfilename ...\n-      infile=`echo \"$*\" | sed 's/.* \\([^ ]*\\) *$/\\1/'`\n-      file=`sed -n '\n-\t/^@setfilename/{\n-\t  s/.* \\([^ ]*\\) *$/\\1/\n-\t  p\n-\t  q\n-\t}' $infile`\n-      # ... or it is derived from the source name (dir/f.texi becomes f.info)\n-      test -z \"$file\" && file=`echo \"$infile\" | sed 's,.*/,,;s,.[^.]*$,,'`.info\n-    fi\n-    # If the file does not exist, the user really needs makeinfo;\n-    # let's fail without touching anything.\n-    test -f $file || exit 1\n-    touch $file\n-    ;;\n-\n-  tar*)\n-    shift\n-\n-    # We have already tried tar in the generic part.\n-    # Look for gnutar/gtar before invocation to avoid ugly error\n-    # messages.\n-    if (gnutar --version > /dev/null 2>&1); then\n-       gnutar \"$@\" && exit 0\n-    fi\n-    if (gtar --version > /dev/null 2>&1); then\n-       gtar \"$@\" && exit 0\n-    fi\n-    firstarg=\"$1\"\n-    if shift; then\n-\tcase $firstarg in\n-\t*o*)\n-\t    firstarg=`echo \"$firstarg\" | sed s/o//`\n-\t    tar \"$firstarg\" \"$@\" && exit 0\n-\t    ;;\n-\tesac\n-\tcase $firstarg in\n-\t*h*)\n-\t    firstarg=`echo \"$firstarg\" | sed s/h//`\n-\t    tar \"$firstarg\" \"$@\" && exit 0\n-\t    ;;\n-\tesac\n-    fi\n-\n-    echo 1>&2 \"\\\n-WARNING: I can't seem to be able to run \\`tar' with the given arguments.\n-         You may want to install GNU tar or Free paxutils, or check the\n-         command line arguments.\"\n-    exit 1\n-    ;;\n-\n-  *)\n-    echo 1>&2 \"\\\n-WARNING: \\`$1' is needed, and is $msg.\n-         You might have modified some files without having the\n-         proper tools for further handling them.  Check the \\`README' file,\n-         it often tells you about the needed prerequisites for installing\n-         this package.  You may also peek at any GNU archive site, in case\n-         some other package would contain this missing \\`$1' program.\"\n-    exit 1\n-    ;;\n-esac\n+# Run the given program, remember its exit status.\n+\"$@\"; st=$?\n+\n+# If it succeeded, we are done.\n+test $st -eq 0 && exit 0\n+\n+# Also exit now if we it failed (or wasn't found), and '--version' was\n+# passed; such an option is passed most likely to detect whether the\n+# program is present and works.\n+case $2 in --version|--help) exit $st;; esac\n+\n+# Exit code 63 means version mismatch.  This often happens when the user\n+# tries to use an ancient version of a tool on a file that requires a\n+# minimum version.\n+if test $st -eq 63; then\n+  msg=\"probably too old\"\n+elif test $st -eq 127; then\n+  # Program was missing.\n+  msg=\"missing on your system\"\n+else\n+  # Program was found and executed, but failed.  Give up.\n+  exit $st\n+fi\n \n-exit 0\n+perl_URL=http://www.perl.org/\n+flex_URL=http://flex.sourceforge.net/\n+gnu_software_URL=http://www.gnu.org/software\n+\n+program_details ()\n+{\n+  case $1 in\n+    aclocal|automake)\n+      echo \"The '$1' program is part of the GNU Automake package:\"\n+      echo \"<$gnu_software_URL/automake>\"\n+      echo \"It also requires GNU Autoconf, GNU m4 and Perl in order to run:\"\n+      echo \"<$gnu_software_URL/autoconf>\"\n+      echo \"<$gnu_software_URL/m4/>\"\n+      echo \"<$perl_URL>\"\n+      ;;\n+    autoconf|autom4te|autoheader)\n+      echo \"The '$1' program is part of the GNU Autoconf package:\"\n+      echo \"<$gnu_software_URL/autoconf/>\"\n+      echo \"It also requires GNU m4 and Perl in order to run:\"\n+      echo \"<$gnu_software_URL/m4/>\"\n+      echo \"<$perl_URL>\"\n+      ;;\n+  esac\n+}\n+\n+give_advice ()\n+{\n+  # Normalize program name to check for.\n+  normalized_program=`echo \"$1\" | sed '\n+    s/^gnu-//; t\n+    s/^gnu//; t\n+    s/^g//; t'`\n+\n+  printf '%s\\n' \"'$1' is $msg.\"\n+\n+  configure_deps=\"'configure.ac' or m4 files included by 'configure.ac'\"\n+  case $normalized_program in\n+    autoconf*)\n+      echo \"You should only need it if you modified 'configure.ac',\"\n+      echo \"or m4 files included by it.\"\n+      program_details 'autoconf'\n+      ;;\n+    autoheader*)\n+      echo \"You should only need it if you modified 'acconfig.h' or\"\n+      echo \"$configure_deps.\"\n+      program_details 'autoheader'\n+      ;;\n+    automake*)\n+      echo \"You should only need it if you modified 'Makefile.am' or\"\n+      echo \"$configure_deps.\"\n+      program_details 'automake'\n+      ;;\n+    aclocal*)\n+      echo \"You should only need it if you modified 'acinclude.m4' or\"\n+      echo \"$configure_deps.\"\n+      program_details 'aclocal'\n+      ;;\n+   autom4te*)\n+      echo \"You might have modified some maintainer files that require\"\n+      echo \"the 'automa4te' program to be rebuilt.\"\n+      program_details 'autom4te'\n+      ;;\n+    bison*|yacc*)\n+      echo \"You should only need it if you modified a '.y' file.\"\n+      echo \"You may want to install the GNU Bison package:\"\n+      echo \"<$gnu_software_URL/bison/>\"\n+      ;;\n+    lex*|flex*)\n+      echo \"You should only need it if you modified a '.l' file.\"\n+      echo \"You may want to install the Fast Lexical Analyzer package:\"\n+      echo \"<$flex_URL>\"\n+      ;;\n+    help2man*)\n+      echo \"You should only need it if you modified a dependency\" \\\n+           \"of a man page.\"\n+      echo \"You may want to install the GNU Help2man package:\"\n+      echo \"<$gnu_software_URL/help2man/>\"\n+    ;;\n+    makeinfo*)\n+      echo \"You should only need it if you modified a '.texi' file, or\"\n+      echo \"any other file indirectly affecting the aspect of the manual.\"\n+      echo \"You might want to install the Texinfo package:\"\n+      echo \"<$gnu_software_URL/texinfo/>\"\n+      echo \"The spurious makeinfo call might also be the consequence of\"\n+      echo \"using a buggy 'make' (AIX, DU, IRIX), in which case you might\"\n+      echo \"want to install GNU make:\"\n+      echo \"<$gnu_software_URL/make/>\"\n+      ;;\n+    *)\n+      echo \"You might have modified some files without having the proper\"\n+      echo \"tools for further handling them.  Check the 'README' file, it\"\n+      echo \"often tells you about the needed prerequisites for installing\"\n+      echo \"this package.  You may also peek at any GNU archive site, in\"\n+      echo \"case some other package contains this missing '$1' program.\"\n+      ;;\n+  esac\n+}\n+\n+give_advice \"$1\" | sed -e '1s/^/WARNING: /' \\\n+                       -e '2,$s/^/         /' >&2\n+\n+# Propagate the correct exit status (expected to be 127 for a program\n+# not found, 63 for a program that failed due to version mismatch).\n+exit $st\n \n # Local variables:\n # eval: (add-hook 'write-file-hooks 'time-stamp)\n-- \n1.8.3.1\n\n\nFrom aa5cc620ecc4eb512332b1399d2bbff52e5c5515 Mon Sep 17 00:00:00 2001\nFrom: Sylvestre Ledru <sylvestre.ledru@scilab-enterprises.com>\nDate: Mon, 14 Oct 2013 11:13:33 +0200\nSubject: [PATCH 2/2] replace the symlink by a copy\n\n---\n compile | 348 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-\n 1 file changed, 347 insertions(+), 1 deletion(-)\n mode change 120000 => 100755 compile\n\ndiff --git a/compile b/compile\nnew file mode 100755\nindex 0000000..531136b\n--- /dev/null\n+++ b/compile\n@@ -0,0 +1,347 @@\n+#! /bin/sh\n+# Wrapper for compilers which do not understand '-c -o'.\n+\n+scriptversion=2012-10-14.11; # UTC\n+\n+# Copyright (C) 1999-2013 Free Software Foundation, Inc.\n+# Written by Tom Tromey <tromey@cygnus.com>.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+# As a special exception to the GNU General Public License, if you\n+# distribute this file as part of a program that contains a\n+# configuration script generated by Autoconf, you may include it under\n+# the same distribution terms that you use for the rest of that program.\n+\n+# This file is maintained in Automake, please report\n+# bugs to <bug-automake@gnu.org> or send patches to\n+# <automake-patches@gnu.org>.\n+\n+nl='\n+'\n+\n+# We need space, tab and new line, in precisely that order.  Quoting is\n+# there to prevent tools from complaining about whitespace usage.\n+IFS=\" \"\"\t$nl\"\n+\n+file_conv=\n+\n+# func_file_conv build_file lazy\n+# Convert a $build file to $host form and store it in $file\n+# Currently only supports Windows hosts. If the determined conversion\n+# type is listed in (the comma separated) LAZY, no conversion will\n+# take place.\n+func_file_conv ()\n+{\n+  file=$1\n+  case $file in\n+    / | /[!/]*) # absolute file, and not a UNC file\n+      if test -z \"$file_conv\"; then\n+\t# lazily determine how to convert abs files\n+\tcase `uname -s` in\n+\t  MINGW*)\n+\t    file_conv=mingw\n+\t    ;;\n+\t  CYGWIN*)\n+\t    file_conv=cygwin\n+\t    ;;\n+\t  *)\n+\t    file_conv=wine\n+\t    ;;\n+\tesac\n+      fi\n+      case $file_conv/,$2, in\n+\t*,$file_conv,*)\n+\t  ;;\n+\tmingw/*)\n+\t  file=`cmd //C echo \"$file \" | sed -e 's/\"\\(.*\\) \" *$/\\1/'`\n+\t  ;;\n+\tcygwin/*)\n+\t  file=`cygpath -m \"$file\" || echo \"$file\"`\n+\t  ;;\n+\twine/*)\n+\t  file=`winepath -w \"$file\" || echo \"$file\"`\n+\t  ;;\n+      esac\n+      ;;\n+  esac\n+}\n+\n+# func_cl_dashL linkdir\n+# Make cl look for libraries in LINKDIR\n+func_cl_dashL ()\n+{\n+  func_file_conv \"$1\"\n+  if test -z \"$lib_path\"; then\n+    lib_path=$file\n+  else\n+    lib_path=\"$lib_path;$file\"\n+  fi\n+  linker_opts=\"$linker_opts -LIBPATH:$file\"\n+}\n+\n+# func_cl_dashl library\n+# Do a library search-path lookup for cl\n+func_cl_dashl ()\n+{\n+  lib=$1\n+  found=no\n+  save_IFS=$IFS\n+  IFS=';'\n+  for dir in $lib_path $LIB\n+  do\n+    IFS=$save_IFS\n+    if $shared && test -f \"$dir/$lib.dll.lib\"; then\n+      found=yes\n+      lib=$dir/$lib.dll.lib\n+      break\n+    fi\n+    if test -f \"$dir/$lib.lib\"; then\n+      found=yes\n+      lib=$dir/$lib.lib\n+      break\n+    fi\n+    if test -f \"$dir/lib$lib.a\"; then\n+      found=yes\n+      lib=$dir/lib$lib.a\n+      break\n+    fi\n+  done\n+  IFS=$save_IFS\n+\n+  if test \"$found\" != yes; then\n+    lib=$lib.lib\n+  fi\n+}\n+\n+# func_cl_wrapper cl arg...\n+# Adjust compile command to suit cl\n+func_cl_wrapper ()\n+{\n+  # Assume a capable shell\n+  lib_path=\n+  shared=:\n+  linker_opts=\n+  for arg\n+  do\n+    if test -n \"$eat\"; then\n+      eat=\n+    else\n+      case $1 in\n+\t-o)\n+\t  # configure might choose to run compile as 'compile cc -o foo foo.c'.\n+\t  eat=1\n+\t  case $2 in\n+\t    *.o | *.[oO][bB][jJ])\n+\t      func_file_conv \"$2\"\n+\t      set x \"$@\" -Fo\"$file\"\n+\t      shift\n+\t      ;;\n+\t    *)\n+\t      func_file_conv \"$2\"\n+\t      set x \"$@\" -Fe\"$file\"\n+\t      shift\n+\t      ;;\n+\t  esac\n+\t  ;;\n+\t-I)\n+\t  eat=1\n+\t  func_file_conv \"$2\" mingw\n+\t  set x \"$@\" -I\"$file\"\n+\t  shift\n+\t  ;;\n+\t-I*)\n+\t  func_file_conv \"${1#-I}\" mingw\n+\t  set x \"$@\" -I\"$file\"\n+\t  shift\n+\t  ;;\n+\t-l)\n+\t  eat=1\n+\t  func_cl_dashl \"$2\"\n+\t  set x \"$@\" \"$lib\"\n+\t  shift\n+\t  ;;\n+\t-l*)\n+\t  func_cl_dashl \"${1#-l}\"\n+\t  set x \"$@\" \"$lib\"\n+\t  shift\n+\t  ;;\n+\t-L)\n+\t  eat=1\n+\t  func_cl_dashL \"$2\"\n+\t  ;;\n+\t-L*)\n+\t  func_cl_dashL \"${1#-L}\"\n+\t  ;;\n+\t-static)\n+\t  shared=false\n+\t  ;;\n+\t-Wl,*)\n+\t  arg=${1#-Wl,}\n+\t  save_ifs=\"$IFS\"; IFS=','\n+\t  for flag in $arg; do\n+\t    IFS=\"$save_ifs\"\n+\t    linker_opts=\"$linker_opts $flag\"\n+\t  done\n+\t  IFS=\"$save_ifs\"\n+\t  ;;\n+\t-Xlinker)\n+\t  eat=1\n+\t  linker_opts=\"$linker_opts $2\"\n+\t  ;;\n+\t-*)\n+\t  set x \"$@\" \"$1\"\n+\t  shift\n+\t  ;;\n+\t*.cc | *.CC | *.cxx | *.CXX | *.[cC]++)\n+\t  func_file_conv \"$1\"\n+\t  set x \"$@\" -Tp\"$file\"\n+\t  shift\n+\t  ;;\n+\t*.c | *.cpp | *.CPP | *.lib | *.LIB | *.Lib | *.OBJ | *.obj | *.[oO])\n+\t  func_file_conv \"$1\" mingw\n+\t  set x \"$@\" \"$file\"\n+\t  shift\n+\t  ;;\n+\t*)\n+\t  set x \"$@\" \"$1\"\n+\t  shift\n+\t  ;;\n+      esac\n+    fi\n+    shift\n+  done\n+  if test -n \"$linker_opts\"; then\n+    linker_opts=\"-link$linker_opts\"\n+  fi\n+  exec \"$@\" $linker_opts\n+  exit 1\n+}\n+\n+eat=\n+\n+case $1 in\n+  '')\n+     echo \"$0: No command.  Try '$0 --help' for more information.\" 1>&2\n+     exit 1;\n+     ;;\n+  -h | --h*)\n+    cat <<\\EOF\n+Usage: compile [--help] [--version] PROGRAM [ARGS]\n+\n+Wrapper for compilers which do not understand '-c -o'.\n+Remove '-o dest.o' from ARGS, run PROGRAM with the remaining\n+arguments, and rename the output as expected.\n+\n+If you are trying to build a whole package this is not the\n+right script to run: please start by reading the file 'INSTALL'.\n+\n+Report bugs to <bug-automake@gnu.org>.\n+EOF\n+    exit $?\n+    ;;\n+  -v | --v*)\n+    echo \"compile $scriptversion\"\n+    exit $?\n+    ;;\n+  cl | *[/\\\\]cl | cl.exe | *[/\\\\]cl.exe )\n+    func_cl_wrapper \"$@\"      # Doesn't return...\n+    ;;\n+esac\n+\n+ofile=\n+cfile=\n+\n+for arg\n+do\n+  if test -n \"$eat\"; then\n+    eat=\n+  else\n+    case $1 in\n+      -o)\n+\t# configure might choose to run compile as 'compile cc -o foo foo.c'.\n+\t# So we strip '-o arg' only if arg is an object.\n+\teat=1\n+\tcase $2 in\n+\t  *.o | *.obj)\n+\t    ofile=$2\n+\t    ;;\n+\t  *)\n+\t    set x \"$@\" -o \"$2\"\n+\t    shift\n+\t    ;;\n+\tesac\n+\t;;\n+      *.c)\n+\tcfile=$1\n+\tset x \"$@\" \"$1\"\n+\tshift\n+\t;;\n+      *)\n+\tset x \"$@\" \"$1\"\n+\tshift\n+\t;;\n+    esac\n+  fi\n+  shift\n+done\n+\n+if test -z \"$ofile\" || test -z \"$cfile\"; then\n+  # If no '-o' option was seen then we might have been invoked from a\n+  # pattern rule where we don't need one.  That is ok -- this is a\n+  # normal compilation that the losing compiler can handle.  If no\n+  # '.c' file was seen then we are probably linking.  That is also\n+  # ok.\n+  exec \"$@\"\n+fi\n+\n+# Name of file we expect compiler to create.\n+cofile=`echo \"$cfile\" | sed 's|^.*[\\\\/]||; s|^[a-zA-Z]:||; s/\\.c$/.o/'`\n+\n+# Create the lock directory.\n+# Note: use '[/\\\\:.-]' here to ensure that we don't use the same name\n+# that we are using for the .o file.  Also, base the name on the expected\n+# object file name, since that is what matters with a parallel build.\n+lockdir=`echo \"$cofile\" | sed -e 's|[/\\\\:.-]|_|g'`.d\n+while true; do\n+  if mkdir \"$lockdir\" >/dev/null 2>&1; then\n+    break\n+  fi\n+  sleep 1\n+done\n+# FIXME: race condition here if user kills between mkdir and trap.\n+trap \"rmdir '$lockdir'; exit 1\" 1 2 15\n+\n+# Run the compile.\n+\"$@\"\n+ret=$?\n+\n+if test -f \"$cofile\"; then\n+  test \"$cofile\" = \"$ofile\" || mv \"$cofile\" \"$ofile\"\n+elif test -f \"${cofile}bj\"; then\n+  test \"${cofile}bj\" = \"$ofile\" || mv \"${cofile}bj\" \"$ofile\"\n+fi\n+\n+rmdir \"$lockdir\"\n+exit $ret\n+\n+# Local Variables:\n+# mode: shell-script\n+# sh-indentation: 2\n+# eval: (add-hook 'write-file-hooks 'time-stamp)\n+# time-stamp-start: \"scriptversion=\"\n+# time-stamp-format: \"%:y-%02m-%02d.%02H\"\n+# time-stamp-time-zone: \"UTC\"\n+# time-stamp-end: \"; # UTC\"\n+# End:\n-- \n1.8.3.1\n\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.6.4-GCC-4.6.4.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.4'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.6.4'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['d8b507309dcbd463b76c1ae504998a8c6221292e6bf10533880ea264be604dc4']\n\ndependencies = [('hwloc', '1.6.2')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-openib\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_f77\", \"mpi_f90\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\",\n        \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.4.5-ictce-5.5.0.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = \"1.4.5\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'ictce', 'version': '5.5.0'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['a1306bb4d44d0cf3a89680c4c6723bb665126c9d5523022f187b944b9d4ea6a5']\n\nbuilddependencies = [\n    ('Automake', '1.14'),\n    ('Autoconf', '2.69'),\n]\n\ndependencies = [('hwloc', '1.7.2')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-openib\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_f77\", \"mpi_f90\", \"mpi\", \"open-pal\", \"open-rte\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-2.1.1-gcccuda-2017.02.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '2.1.1'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'gcccuda', 'version': '2017.02'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = ['OpenMPI-2.1_fix-ib-query.patch']\nchecksums = [\n    'afe4bef3c4378bc76eea96c623d5aa4c1c98b9e057d281c646e68869292a77dc',  # openmpi-2.1.1.tar.gz\n    '662d7ef1d0cd0890d2dc4ecb5243012be29bf6b4003da0f006e7cd2125d40e4c',  # OpenMPI-2.1_fix-ib-query.patch\n]\n\ndependencies = [('hwloc', '1.11.7')]\n\nconfigopts = '--enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--with-cuda=$CUDA_HOME '     # CUDA-aware build; N.B. --disable-dlopen is incompatible\nconfigopts += '--without-ucx '  # hard disable UCX, to dance around bug (https://github.com/open-mpi/ompi/issues/4345)\n\n# to enable SLURM integration (site-specific)\n# configopts += '--with-slurm --with-pmi=/usr/include/slurm --with-pmi-libdir=/usr'\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.8.3-iccifort-2013_sp1.4.211.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.3'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'iccifort', 'version': '2013_sp1.4.211'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['b7487ee77bde880308429a72f56612b840690cc3b927be4bf191677b9a2ef5a8']\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\ndependencies = [('hwloc', '1.9')]\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\", \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nsanity_check_commands = [\n    ('mpicc --version | grep icc', ''),\n    ('mpicxx --version | grep icpc', ''),\n    ('mpifort --version | grep ifort', ''),\n]\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.10.3-gcccuda-2016.08.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = \"1.10.3\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'gcccuda', 'version': '2016.08'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['681c2ed1c96d187a3c84f30811a2b143d26de74884a740e5d02ec265ef70ab00']\n\ndependencies = [('hwloc', '1.11.3')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--with-cuda=$CUDA_HOME '             # CUDA-aware build; N.B. --disable-dlopen is incompatible\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\", \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-2.0.2-gcccuda-2017.01.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '2.0.2'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'gcccuda', 'version': '2017.01'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['32914cc64780d3980066f3be3920b028cd381c94d1262a55415fc1d002bae0a5']\n\ndependencies = [('hwloc', '1.11.5')]\n\nconfigopts = '--enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--with-cuda=$CUDA_HOME '             # CUDA-aware build; N.B. --disable-dlopen is incompatible\nconfigopts += '--without-ucx '  # hard disable UCX, to dance around bug (https://github.com/open-mpi/ompi/issues/4345)\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.6.4-GCC-4.7.2-no-OFED.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.4'\nversionsuffix = '-no-OFED'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"The Open MPI Project is an open source MPI-2 implementation.\"\n\ntoolchain = {'name': 'GCC', 'version': '4.7.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['d8b507309dcbd463b76c1ae504998a8c6221292e6bf10533880ea264be604dc4']\n\ndependencies = [('hwloc', '1.6.2')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --without-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\nlibs = [\"mpi_cxx\", \"mpi_f77\", \"mpi_f90\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\",\n        \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-2.0.1-gcccuda-2016.10.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '2.0.1'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'gcccuda', 'version': '2016.10'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['5c576eafb2ff10c338c67549ba1cf299a704bd052f648f4b7854115e4d07fabd']\n\ndependencies = [('hwloc', '1.11.4')]\n\nconfigopts = '--enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--with-cuda=$CUDA_HOME '             # CUDA-aware build; N.B. --disable-dlopen is incompatible\nconfigopts += '--without-ucx '  # hard disable UCX, to dance around bug (https://github.com/open-mpi/ompi/issues/4345)\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.6.5-GCC-4.7.3-no-OFED.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.5'\nversionsuffix = \"-no-OFED\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.7.3'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = [\n    'OpenMPI-1.6.5-vt_cupti_events.patch',\n]\nchecksums = [\n    'ac308dc38e77c622aedea5f3fd368c800b6636d0500f2124c36a505a65806559',  # openmpi-1.6.5.tar.gz\n    '7de06818f3e83e64ca004458acac679e95ba1c658f051e6a91db2b726c53f9bc',  # OpenMPI-1.6.5-vt_cupti_events.patch\n]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --without-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\nlibs = [\"mpi_cxx\", \"mpi_f77\", \"mpi_f90\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\",\n        \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.6.4-GCC-4.7.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.4'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.7.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['d8b507309dcbd463b76c1ae504998a8c6221292e6bf10533880ea264be604dc4']\n\ndependencies = [('hwloc', '1.6.2')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-openib\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_f77\", \"mpi_f90\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\",\n        \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.8.4-iccifort-2015.2.164-GCC-4.9.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.4'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'iccifort', 'version': '2015.2.164-GCC-4.9.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['3c602955fa16d03806ec704e089e2a14fe092d7fe7d444972f4a99407f645661']\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\ndependencies = [('hwloc', '1.10.0')]\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\", \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nsanity_check_commands = [\n    ('mpicc --version | grep icc', ''),\n    ('mpicxx --version | grep icpc', ''),\n    ('mpifort --version | grep ifort', ''),\n]\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.6.5-GCC-4.7.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.5'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.7.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['ac308dc38e77c622aedea5f3fd368c800b6636d0500f2124c36a505a65806559']\n\ndependencies = [\n    ('hwloc', '1.6.2'),\n    ('libpciaccess', '0.13.1'),\n]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-openib\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_f77\", \"mpi_f90\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\",\n        \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.8.3-iccifort-2013_sp1.4.211-no-OFED.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.3'\nversionsuffix = '-no-OFED'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'iccifort', 'version': '2013_sp1.4.211'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['b7487ee77bde880308429a72f56612b840690cc3b927be4bf191677b9a2ef5a8']\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --without-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\ndependencies = [('hwloc', '1.9')]\n\nlibs = [\"mpi_cxx\", \"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\", \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nsanity_check_commands = [\n    ('mpicc --version | grep icc', ''),\n    ('mpicxx --version | grep icpc', ''),\n    ('mpifort --version | grep ifort', ''),\n]\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.8.4-iccifort-2015.1.133-GCC-4.9.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.4'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'iccifort', 'version': '2015.1.133-GCC-4.9.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['3c602955fa16d03806ec704e089e2a14fe092d7fe7d444972f4a99407f645661']\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\ndependencies = [('hwloc', '1.10.0')]\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\", \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nsanity_check_commands = [\n    ('mpicc --version | grep icc', ''),\n    ('mpicxx --version | grep icpc', ''),\n    ('mpifort --version | grep ifort', ''),\n]\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/__archive__/o/OpenMPI/OpenMPI-1.8.8-iccifort-2015.3.187-GNU-4.9.3-2.25.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.8'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'iccifort', 'version': '2015.3.187-GNU-4.9.3-2.25'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['ac0893811fdcc62f75036cb8ce266e7e5e3d8ce82a7adc2f333870a0da171bff']\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\ndependencies = [('hwloc', '1.11.1')]\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlibs = [\"mpi_cxx\", \"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\", \"vt\", \"vt-hyb\", \"vt-mpi\", \"vt-mpi-unify\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % binfile for binfile in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (libfile, SHLIB_EXT) for libfile in libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nsanity_check_commands = [\n    ('mpicc --version | grep icc', ''),\n    ('mpicxx --version | grep icpc', ''),\n    ('mpifort --version | grep ifort', ''),\n]\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/c/Clang/Clang-3.3-failing-asan-and-tsan-tests.patch": "diff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/allow_user_segv.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/allow_user_segv.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/allow_user_segv.cc\t2013-04-25 12:52:15.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/allow_user_segv.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,42 +0,0 @@\n-// Regression test for\n-// https://code.google.com/p/address-sanitizer/issues/detail?id=180\n-\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && ASAN_OPTIONS=allow_user_segv_handler=true %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && ASAN_OPTIONS=allow_user_segv_handler=true %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && ASAN_OPTIONS=allow_user_segv_handler=true %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && ASAN_OPTIONS=allow_user_segv_handler=true %t 2>&1 | FileCheck %s\n-\n-#include <signal.h>\n-#include <stdio.h>\n-\n-struct sigaction user_sigaction;\n-struct sigaction original_sigaction;\n-\n-void User_OnSIGSEGV(int signum, siginfo_t *siginfo, void *context) {\n-  fprintf(stderr, \"User sigaction called\\n\");\n-  if (original_sigaction.sa_flags | SA_SIGINFO)\n-    original_sigaction.sa_sigaction(signum, siginfo, context);\n-  else\n-    original_sigaction.sa_handler(signum);\n-}\n-\n-int DoSEGV() {\n-  volatile int *x = 0;\n-  return *x;\n-}\n-\n-int main() {\n-  user_sigaction.sa_sigaction = User_OnSIGSEGV;\n-  user_sigaction.sa_flags = SA_SIGINFO;\n-  if (sigaction(SIGSEGV, &user_sigaction, &original_sigaction)) {\n-    perror(\"sigaction\");\n-    return 1;\n-  }\n-  fprintf(stderr, \"User sigaction installed\\n\");\n-  return DoSEGV();\n-}\n-\n-// CHECK: User sigaction installed\n-// CHECK-NEXT: User sigaction called\n-// CHECK-NEXT: ASAN:SIGSEGV\n-// CHECK: AddressSanitizer: SEGV on unknown address\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/blacklist.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/blacklist.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/blacklist.cc\t2012-12-07 23:21:21.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/blacklist.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,44 +0,0 @@\n-// Test the blacklist functionality of ASan\n-\n-// RUN: echo \"fun:*brokenFunction*\" > %tmp\n-// RUN: echo \"global:*badGlobal*\" >> %tmp\n-// RUN: echo \"src:*blacklist-extra.cc\" >> %tmp\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m64 -O0 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m64 -O1 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m64 -O2 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m64 -O3 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m32 -O0 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m32 -O1 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m32 -O2 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-// RUN: %clangxx_asan -fsanitize-blacklist=%tmp -m32 -O3 %s -o %t \\\n-// RUN: %p/Helpers/blacklist-extra.cc && %t 2>&1\n-\n-// badGlobal is accessed improperly, but we blacklisted it.\n-int badGlobal;\n-int readBadGlobal() {\n-  return (&badGlobal)[1];\n-}\n-\n-// A function which is broken, but excluded in the blacklist.\n-int brokenFunction(int argc) {\n-  char x[10] = {0};\n-  return x[argc * 10];  // BOOM\n-}\n-\n-// This function is defined in Helpers/blacklist-extra.cc, a source file which\n-// is blacklisted by name\n-int externalBrokenFunction(int x);\n-\n-int main(int argc, char **argv) {\n-  brokenFunction(argc);\n-  int x = readBadGlobal();\n-  externalBrokenFunction(argc);\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/deep_stack_uaf.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/deep_stack_uaf.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/deep_stack_uaf.cc\t2012-12-21 09:53:59.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/deep_stack_uaf.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,36 +0,0 @@\n-// Check that we can store lots of stack frames if asked to.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t 2>&1\n-// RUN: ASAN_OPTIONS=malloc_context_size=120:redzone=512 %t 2>&1 | \\\n-// RUN: %symbolize | FileCheck %s\n-\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t 2>&1\n-// RUN: ASAN_OPTIONS=malloc_context_size=120:redzone=512 %t 2>&1 | \\\n-// RUN: %symbolize | FileCheck %s\n-#include <stdlib.h>\n-#include <stdio.h>\n-\n-template <int depth>\n-struct DeepFree {\n-  static void free(char *x) {\n-    DeepFree<depth - 1>::free(x);\n-  }\n-};\n-\n-template<>\n-struct DeepFree<0> {\n-  static void free(char *x) {\n-    ::free(x);\n-  }\n-};\n-\n-int main() {\n-  char *x = (char*)malloc(10);\n-  // deep_free(x);\n-  DeepFree<200>::free(x);\n-  return x[5];\n-  // CHECK: {{.*ERROR: AddressSanitizer: heap-use-after-free on address}}\n-  // CHECK: DeepFree<36>\n-  // CHECK: DeepFree<98>\n-  // CHECK: DeepFree<115>\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/deep_tail_call.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/deep_tail_call.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/deep_tail_call.cc\t2012-10-15 15:04:58.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/deep_tail_call.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,24 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-// CHECK: AddressSanitizer: global-buffer-overflow\n-int global[10];\n-// CHECK: {{#0.*call4}}\n-void __attribute__((noinline)) call4(int i) { global[i+10]++; }\n-// CHECK: {{#1.*call3}}\n-void __attribute__((noinline)) call3(int i) { call4(i); }\n-// CHECK: {{#2.*call2}}\n-void __attribute__((noinline)) call2(int i) { call3(i); }\n-// CHECK: {{#3.*call1}}\n-void __attribute__((noinline)) call1(int i) { call2(i); }\n-// CHECK: {{#4.*main}}\n-int main(int argc, char **argv) {\n-  call1(argc);\n-  return global[0];\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/deep_thread_stack.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/deep_thread_stack.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/deep_thread_stack.cc\t2012-10-15 15:04:58.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/deep_thread_stack.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,61 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-#include <pthread.h>\n-\n-int *x;\n-\n-void *AllocThread(void *arg) {\n-  x = new int;\n-  *x = 42;\n-  return NULL;\n-}\n-\n-void *FreeThread(void *arg) {\n-  delete x;\n-  return NULL;\n-}\n-\n-void *AccessThread(void *arg) {\n-  *x = 43;  // BOOM\n-  return NULL;\n-}\n-\n-typedef void* (*callback_type)(void* arg);\n-\n-void *RunnerThread(void *function) {\n-  pthread_t thread;\n-  pthread_create(&thread, NULL, (callback_type)function, NULL);\n-  pthread_join(thread, NULL);\n-  return NULL;\n-}\n-\n-void RunThread(callback_type function) {\n-  pthread_t runner;\n-  pthread_create(&runner, NULL, RunnerThread, (void*)function);\n-  pthread_join(runner, NULL);\n-}\n-\n-int main(int argc, char *argv[]) {\n-  RunThread(AllocThread);\n-  RunThread(FreeThread);\n-  RunThread(AccessThread);\n-  return (x != 0);\n-}\n-\n-// CHECK: AddressSanitizer: heap-use-after-free\n-// CHECK: WRITE of size 4 at 0x{{.*}} thread T[[ACCESS_THREAD:[0-9]+]]\n-// CHECK: freed by thread T[[FREE_THREAD:[0-9]+]] here:\n-// CHECK: previously allocated by thread T[[ALLOC_THREAD:[0-9]+]] here:\n-// CHECK: Thread T[[ACCESS_THREAD]] created by T[[ACCESS_RUNNER:[0-9]+]] here:\n-// CHECK: Thread T[[ACCESS_RUNNER]] created by T0 here:\n-// CHECK: Thread T[[FREE_THREAD]] created by T[[FREE_RUNNER:[0-9]+]] here:\n-// CHECK: Thread T[[FREE_RUNNER]] created by T0 here:\n-// CHECK: Thread T[[ALLOC_THREAD]] created by T[[ALLOC_RUNNER:[0-9]+]] here:\n-// CHECK: Thread T[[ALLOC_RUNNER]] created by T0 here:\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/dlclose-test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/dlclose-test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/dlclose-test.cc\t2012-08-15 13:26:57.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/dlclose-test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,88 +0,0 @@\n-// Regression test for\n-// http://code.google.com/p/address-sanitizer/issues/detail?id=19\n-// Bug description:\n-// 1. application dlopens foo.so\n-// 2. asan registers all globals from foo.so\n-// 3. application dlcloses foo.so\n-// 4. application mmaps some memory to the location where foo.so was before\n-// 5. application starts using this mmaped memory, but asan still thinks there\n-// are globals.\n-// 6. BOOM\n-\n-// RUN: %clangxx_asan -m64 -O0 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %p/SharedLibs/dlclose-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-\n-#include <assert.h>\n-#include <dlfcn.h>\n-#include <stdio.h>\n-#include <string.h>\n-#include <sys/mman.h>\n-\n-#include <string>\n-\n-using std::string;\n-\n-static const int kPageSize = 4096;\n-\n-typedef int *(fun_t)();\n-\n-int main(int argc, char *argv[]) {\n-  string path = string(argv[0]) + \"-so.so\";\n-  printf(\"opening %s ... \\n\", path.c_str());\n-  void *lib = dlopen(path.c_str(), RTLD_NOW);\n-  if (!lib) {\n-    printf(\"error in dlopen(): %s\\n\", dlerror());\n-    return 1;\n-  }\n-  fun_t *get = (fun_t*)dlsym(lib, \"get_address_of_static_var\");\n-  if (!get) {\n-    printf(\"failed dlsym\\n\");\n-    return 1;\n-  }\n-  int *addr = get();\n-  assert(((size_t)addr % 32) == 0);  // should be 32-byte aligned.\n-  printf(\"addr: %p\\n\", addr);\n-  addr[0] = 1;  // make sure we can write there.\n-\n-  // Now dlclose the shared library.\n-  printf(\"attempting to dlclose\\n\");\n-  if (dlclose(lib)) {\n-    printf(\"failed to dlclose\\n\");\n-    return 1;\n-  }\n-  // Now, the page where 'addr' is unmapped. Map it.\n-  size_t page_beg = ((size_t)addr) & ~(kPageSize - 1);\n-  void *res = mmap((void*)(page_beg), kPageSize,\n-                   PROT_READ | PROT_WRITE,\n-                   MAP_PRIVATE | MAP_ANON | MAP_FIXED | MAP_NORESERVE, 0, 0);\n-  if (res == (char*)-1L) {\n-    printf(\"failed to mmap\\n\");\n-    return 1;\n-  }\n-  addr[1] = 2;  // BOOM (if the bug is not fixed).\n-  printf(\"PASS\\n\");\n-  // CHECK: PASS\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/global-overflow.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/global-overflow.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/global-overflow.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/global-overflow.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,25 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-#include <string.h>\n-int main(int argc, char **argv) {\n-  static char XXX[10];\n-  static char YYY[10];\n-  static char ZZZ[10];\n-  memset(XXX, 0, 10);\n-  memset(YYY, 0, 10);\n-  memset(ZZZ, 0, 10);\n-  int res = YYY[argc * 10];  // BOOOM\n-  // CHECK: {{READ of size 1 at 0x.* thread T0}}\n-  // CHECK: {{    #0 0x.* in _?main .*global-overflow.cc:}}[[@LINE-2]]\n-  // CHECK: {{0x.* is located 0 bytes to the right of global variable}}\n-  // CHECK:   {{.*YYY.* of size 10}}\n-  res += XXX[argc] + ZZZ[argc];\n-  return res;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/heap-overflow.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/heap-overflow.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/heap-overflow.cc\t2013-01-22 10:14:54.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/heap-overflow.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,36 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-\n-#include <stdlib.h>\n-#include <string.h>\n-int main(int argc, char **argv) {\n-  char *x = (char*)malloc(10 * sizeof(char));\n-  memset(x, 0, 10);\n-  int res = x[argc * 10];  // BOOOM\n-  // CHECK: {{READ of size 1 at 0x.* thread T0}}\n-  // CHECK: {{    #0 0x.* in _?main .*heap-overflow.cc:}}[[@LINE-2]]\n-  // CHECK: {{0x.* is located 0 bytes to the right of 10-byte region}}\n-  // CHECK: {{allocated by thread T0 here:}}\n-\n-  // CHECK-Linux: {{    #0 0x.* in .*malloc}}\n-  // CHECK-Linux: {{    #1 0x.* in main .*heap-overflow.cc:21}}\n-\n-  // CHECK-Darwin: {{    #0 0x.* in _?wrap_malloc.*}}\n-  // CHECK-Darwin: {{    #1 0x.* in _?main .*heap-overflow.cc:21}}\n-  free(x);\n-  return res;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-blacklist.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-blacklist.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-blacklist.cc\t2013-04-11 15:21:41.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-blacklist.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,47 +0,0 @@\n-// Test for blacklist functionality of initialization-order checker.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s %p/Helpers/initialization-blacklist-extra.cc\\\n-// RUN:   %p/Helpers/initialization-blacklist-extra2.cc \\\n-// RUN:   -fsanitize-blacklist=%p/Helpers/initialization-blacklist.txt \\\n-// RUN:   -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O1 %s %p/Helpers/initialization-blacklist-extra.cc\\\n-// RUN:   %p/Helpers/initialization-blacklist-extra2.cc \\\n-// RUN:   -fsanitize-blacklist=%p/Helpers/initialization-blacklist.txt \\\n-// RUN:   -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O2 %s %p/Helpers/initialization-blacklist-extra.cc\\\n-// RUN:   %p/Helpers/initialization-blacklist-extra2.cc \\\n-// RUN:   -fsanitize-blacklist=%p/Helpers/initialization-blacklist.txt \\\n-// RUN:   -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O0 %s %p/Helpers/initialization-blacklist-extra.cc\\\n-// RUN:   %p/Helpers/initialization-blacklist-extra2.cc \\\n-// RUN:   -fsanitize-blacklist=%p/Helpers/initialization-blacklist.txt \\\n-// RUN:   -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O1 %s %p/Helpers/initialization-blacklist-extra.cc\\\n-// RUN:   %p/Helpers/initialization-blacklist-extra2.cc \\\n-// RUN:   -fsanitize-blacklist=%p/Helpers/initialization-blacklist.txt \\\n-// RUN:   -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O2 %s %p/Helpers/initialization-blacklist-extra.cc\\\n-// RUN:   %p/Helpers/initialization-blacklist-extra2.cc \\\n-// RUN:   -fsanitize-blacklist=%p/Helpers/initialization-blacklist.txt \\\n-// RUN:   -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-\n-// Function is defined in another TU.\n-int readBadGlobal();\n-int x = readBadGlobal();  // init-order bug.\n-\n-// Function is defined in another TU.\n-int accessBadObject();\n-int y = accessBadObject();  // init-order bug.\n-\n-int readBadSrcGlobal();\n-int z = readBadSrcGlobal();  // init-order bug.\n-\n-int main(int argc, char **argv) {\n-  return argc + x + y + z - 1;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-bug.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-bug.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-bug.cc\t2013-03-14 13:43:03.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-bug.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,46 +0,0 @@\n-// Test to make sure basic initialization order errors are caught.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s %p/Helpers/initialization-bug-extra2.cc -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1 \\\n-// RUN:    | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s %p/Helpers/initialization-bug-extra2.cc -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1 \\\n-// RUN:     | %symbolize | FileCheck %s\n-\n-// Do not test with optimization -- the error may be optimized away.\n-\n-#include <cstdio>\n-\n-// The structure of the test is:\n-// \"x\", \"y\", \"z\" are dynamically initialized globals.\n-// Value of \"x\" depends on \"y\", value of \"y\" depends on \"z\".\n-// \"x\" and \"z\" are defined in this TU, \"y\" is defined in another one.\n-// Thus we shoud stably report initialization order fiasco independently of\n-// the translation unit order.\n-\n-int initZ() {\n-  return 5;\n-}\n-int z = initZ();\n-\n-// 'y' is a dynamically initialized global residing in a different TU.  This\n-// dynamic initializer will read the value of 'y' before main starts.  The\n-// result is undefined behavior, which should be caught by initialization order\n-// checking.\n-extern int y;\n-int __attribute__((noinline)) initX() {\n-  return y + 1;\n-  // CHECK: {{AddressSanitizer: initialization-order-fiasco}}\n-  // CHECK: {{READ of size .* at 0x.* thread T0}}\n-  // CHECK: {{0x.* is located 0 bytes inside of global variable .*(y|z).*}}\n-}\n-\n-// This initializer begins our initialization order problems.\n-static int x = initX();\n-\n-int main() {\n-  // ASan should have caused an exit before main runs.\n-  printf(\"PASS\\n\");\n-  // CHECK-NOT: PASS\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-constexpr.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-constexpr.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-constexpr.cc\t2013-04-05 09:51:49.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-constexpr.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,43 +0,0 @@\n-// Constexpr:\n-// We need to check that a global variable initialized with a constexpr\n-// constructor can be accessed during dynamic initialization (as a constexpr\n-// constructor implies that it was initialized during constant initialization,\n-// not dynamic initialization).\n-\n-// RUN: %clangxx_asan -m64 -O0 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O1 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O2 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O3 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O0 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O1 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O2 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O3 %s %p/Helpers/initialization-constexpr-extra.cc\\\n-// RUN:   --std=c++11 -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-\n-class Integer {\n-  private:\n-  int value;\n-\n-  public:\n-  constexpr Integer(int x = 0) : value(x) {}\n-  int getValue() {return value;}\n-};\n-Integer coolestInteger(42);\n-int getCoolestInteger() { return coolestInteger.getValue(); }\n-\n-int main() { return 0; }\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-nobug.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-nobug.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/initialization-nobug.cc\t2013-04-05 09:51:49.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/initialization-nobug.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,56 +0,0 @@\n-// A collection of various initializers which shouldn't trip up initialization\n-// order checking.  If successful, this will just return 0.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O1 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O2 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m64 -O3 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O0 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O1 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O2 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-// RUN: %clangxx_asan -m32 -O3 %s %p/Helpers/initialization-nobug-extra.cc -fsanitize=init-order -o %t\n-// RUN: ASAN_OPTIONS=check_initialization_order=true %t 2>&1\n-\n-// Simple access:\n-// Make sure that accessing a global in the same TU is safe\n-\n-bool condition = true;\n-int initializeSameTU() {\n-  return condition ? 0x2a : 052;\n-}\n-int sameTU = initializeSameTU();\n-\n-// Linker initialized:\n-// Check that access to linker initialized globals originating from a different\n-// TU's initializer is safe.\n-\n-int A = (1 << 1) + (1 << 3) + (1 << 5), B;\n-int getAB() {\n-  return A * B;\n-}\n-\n-// Function local statics:\n-// Check that access to function local statics originating from a different\n-// TU's initializer is safe.\n-\n-int countCalls() {\n-  static int calls;\n-  return ++calls;\n-}\n-\n-// Trivial constructor, non-trivial destructor.\n-struct StructWithDtor {\n-  ~StructWithDtor() { }\n-  int value;\n-};\n-StructWithDtor struct_with_dtor;\n-int getStructWithDtorValue() { return struct_with_dtor.value; }\n-\n-int main() { return 0; }\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/large_func_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/large_func_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/large_func_test.cc\t2013-02-21 17:54:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/large_func_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,63 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-\n-#include <stdlib.h>\n-__attribute__((noinline))\n-static void LargeFunction(int *x, int zero) {\n-  x[0]++;\n-  x[1]++;\n-  x[2]++;\n-  x[3]++;\n-  x[4]++;\n-  x[5]++;\n-  x[6]++;\n-  x[7]++;\n-  x[8]++;\n-  x[9]++;\n-\n-  // CHECK: {{.*ERROR: AddressSanitizer: heap-buffer-overflow on address}}\n-  // CHECK:   {{0x.* at pc 0x.* bp 0x.* sp 0x.*}}\n-  // CHECK: {{READ of size 4 at 0x.* thread T0}}\n-  x[zero + 103]++;  // we should report this exact line\n-  // atos incorrectly extracts the symbol name for the static functions on\n-  // Darwin.\n-  // CHECK-Linux:  {{#0 0x.* in LargeFunction.*large_func_test.cc:}}[[@LINE-3]]\n-  // CHECK-Darwin: {{#0 0x.* in .*LargeFunction.*large_func_test.cc}}:[[@LINE-4]]\n-\n-  x[10]++;\n-  x[11]++;\n-  x[12]++;\n-  x[13]++;\n-  x[14]++;\n-  x[15]++;\n-  x[16]++;\n-  x[17]++;\n-  x[18]++;\n-  x[19]++;\n-}\n-\n-int main(int argc, char **argv) {\n-  int *x = new int[100];\n-  LargeFunction(x, argc - 1);\n-  // CHECK: {{    #1 0x.* in _?main .*large_func_test.cc:}}[[@LINE-1]]\n-  // CHECK: {{0x.* is located 12 bytes to the right of 400-byte region}}\n-  // CHECK: {{allocated by thread T0 here:}}\n-  // CHECK-Linux: {{    #0 0x.* in operator new.*}}\n-  // CHECK-Darwin: {{    #0 0x.* in .*_Zna.*}}\n-  // CHECK: {{    #1 0x.* in _?main .*large_func_test.cc:}}[[@LINE-7]]\n-  delete x;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/clone_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/clone_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/clone_test.cc\t2012-08-29 17:48:14.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/clone_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,48 +0,0 @@\n-// Regression test for:\n-// http://code.google.com/p/address-sanitizer/issues/detail?id=37\n-\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t | FileCheck %s\n-\n-#include <stdio.h>\n-#include <sched.h>\n-#include <sys/syscall.h>\n-#include <sys/types.h>\n-#include <sys/wait.h>\n-#include <unistd.h>\n-\n-int Child(void *arg) {\n-  char x[32] = {0};  // Stack gets poisoned.\n-  printf(\"Child:  %p\\n\", x);\n-  _exit(1);  // NoReturn, stack will remain unpoisoned unless we do something.\n-}\n-\n-int main(int argc, char **argv) {\n-  const int kStackSize = 1 << 20;\n-  char child_stack[kStackSize + 1];\n-  char *sp = child_stack + kStackSize;  // Stack grows down.\n-  printf(\"Parent: %p\\n\", sp);\n-  pid_t clone_pid = clone(Child, sp, CLONE_FILES | CLONE_VM, NULL, 0, 0, 0);\n-  int status;\n-  pid_t wait_result = waitpid(clone_pid, &status, __WCLONE);\n-  if (wait_result < 0) {\n-    perror(\"waitpid\");\n-    return 0;\n-  }\n-  if (wait_result == clone_pid && WIFEXITED(status)) {\n-    // Make sure the child stack was indeed unpoisoned.\n-    for (int i = 0; i < kStackSize; i++)\n-      child_stack[i] = i;\n-    int ret = child_stack[argc - 1];\n-    printf(\"PASSED\\n\");\n-    // CHECK: PASSED\n-    return ret;\n-  }\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/glob.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/glob.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/glob.cc\t2013-04-09 13:35:13.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/glob.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,30 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t %p 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t %p 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t %p 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t %p 2>&1 | FileCheck %s\n-\n-#include <assert.h>\n-#include <glob.h>\n-#include <stdio.h>\n-#include <string.h>\n-#include <errno.h>\n-#include <string>\n-\n-\n-int main(int argc, char *argv[]) {\n-  std::string path = argv[1];\n-  std::string pattern = path + \"/glob_test_root/*a\";\n-  printf(\"pattern: %s\\n\", pattern.c_str());\n-\n-  glob_t globbuf;\n-  int res = glob(pattern.c_str(), 0, 0, &globbuf);\n-\n-  printf(\"%d %s\\n\", errno, strerror(errno));\n-  assert(res == 0);\n-  assert(globbuf.gl_pathc == 2);\n-  printf(\"%zu\\n\", strlen(globbuf.gl_pathv[0]));\n-  printf(\"%zu\\n\", strlen(globbuf.gl_pathv[1]));\n-  printf(\"PASS\\n\");\n-  // CHECK: PASS\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/heavy_uar_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/heavy_uar_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/heavy_uar_test.cc\t2013-04-11 20:27:02.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/heavy_uar_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,55 +0,0 @@\n-// RUN: %clangxx_asan -fsanitize=use-after-return -m64 -O0 %s -o %t && \\\n-// RUN:   %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -fsanitize=use-after-return -m64 -O2 %s -o %t && \\\n-// RUN:   %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -fsanitize=use-after-return -m32 -O2 %s -o %t && \\\n-// RUN:   %t 2>&1 | %symbolize | FileCheck %s\n-\n-#include <stdio.h>\n-#include <string.h>\n-#include <stdlib.h>\n-\n-__attribute__((noinline))\n-char *pretend_to_do_something(char *x) {\n-  __asm__ __volatile__(\"\" : : \"r\" (x) : \"memory\");\n-  return x;\n-}\n-\n-__attribute__((noinline))\n-char *LeakStack() {\n-  char x[1024];\n-  memset(x, 0, sizeof(x));\n-  return pretend_to_do_something(x);\n-}\n-\n-template<size_t kFrameSize>\n-__attribute__((noinline))\n-void RecuriveFunctionWithStackFrame(int depth) {\n-  if (depth <= 0) return;\n-  char x[kFrameSize];\n-  x[0] = depth;\n-  pretend_to_do_something(x);\n-  RecuriveFunctionWithStackFrame<kFrameSize>(depth - 1);\n-}\n-\n-int main(int argc, char **argv) {\n-  int n_iter = argc >= 2 ? atoi(argv[1]) : 1000;\n-  int depth  = argc >= 3 ? atoi(argv[2]) : 500;\n-  for (int i = 0; i < n_iter; i++) {\n-    RecuriveFunctionWithStackFrame<10>(depth);\n-    RecuriveFunctionWithStackFrame<100>(depth);\n-    RecuriveFunctionWithStackFrame<500>(depth);\n-    RecuriveFunctionWithStackFrame<1024>(depth);\n-    RecuriveFunctionWithStackFrame<2000>(depth);\n-    RecuriveFunctionWithStackFrame<5000>(depth);\n-    RecuriveFunctionWithStackFrame<10000>(depth);\n-  }\n-  char *stale_stack = LeakStack();\n-  RecuriveFunctionWithStackFrame<1024>(10);\n-  stale_stack[100]++;\n-  // CHECK: ERROR: AddressSanitizer: stack-use-after-return on address\n-  // CHECK: is located in stack of thread T0 at offset 132 in frame\n-  // CHECK:  in LeakStack(){{.*}}heavy_uar_test.cc:\n-  // CHECK: [32, 1056) 'x'\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_failure_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_failure_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_failure_test.cc\t2012-08-15 13:26:57.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_failure_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,26 +0,0 @@\n-// If user provides his own libc functions, ASan doesn't\n-// intercept these functions.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <stdlib.h>\n-#include <stdio.h>\n-\n-extern \"C\" long strtol(const char *nptr, char **endptr, int base) {\n-  fprintf(stderr, \"my_strtol_interceptor\\n\");\n-  return 0;\n-}\n-\n-int main() {\n-  char *x = (char*)malloc(10 * sizeof(char));\n-  free(x);\n-  return (int)strtol(x, 0, 10);\n-  // CHECK: my_strtol_interceptor\n-  // CHECK-NOT: heap-use-after-free\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_malloc_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_malloc_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_malloc_test.cc\t2012-08-15 13:26:57.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_malloc_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,27 +0,0 @@\n-// ASan interceptor can be accessed with __interceptor_ prefix.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <stdlib.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-extern \"C\" void *__interceptor_malloc(size_t size);\n-extern \"C\" void *malloc(size_t size) {\n-  write(2, \"malloc call\\n\", sizeof(\"malloc call\\n\") - 1);\n-  return __interceptor_malloc(size);\n-}\n-\n-int main() {\n-  char *x = (char*)malloc(10 * sizeof(char));\n-  free(x);\n-  return (int)strtol(x, 0, 10);\n-  // CHECK: malloc call\n-  // CHECK: heap-use-after-free\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_test.cc\t2012-08-15 13:26:57.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/interception_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,26 +0,0 @@\n-// ASan interceptor can be accessed with __interceptor_ prefix.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <stdlib.h>\n-#include <stdio.h>\n-\n-extern \"C\" long __interceptor_strtol(const char *nptr, char **endptr, int base);\n-extern \"C\" long strtol(const char *nptr, char **endptr, int base) {\n-  fprintf(stderr, \"my_strtol_interceptor\\n\");\n-  return __interceptor_strtol(nptr, endptr, base);\n-}\n-\n-int main() {\n-  char *x = (char*)malloc(10 * sizeof(char));\n-  free(x);\n-  return (int)strtol(x, 0, 10);\n-  // CHECK: my_strtol_interceptor\n-  // CHECK: heap-use-after-free\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/swapcontext_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/swapcontext_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/swapcontext_test.cc\t2012-11-23 12:20:54.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/swapcontext_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,66 +0,0 @@\n-// Check that ASan plays well with easy cases of makecontext/swapcontext.\n-\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | FileCheck %s\n-\n-#include <stdio.h>\n-#include <ucontext.h>\n-#include <unistd.h>\n-\n-ucontext_t orig_context;\n-ucontext_t child_context;\n-\n-void Child(int mode) {\n-  char x[32] = {0};  // Stack gets poisoned.\n-  printf(\"Child: %p\\n\", x);\n-  // (a) Do nothing, just return to parent function.\n-  // (b) Jump into the original function. Stack remains poisoned unless we do\n-  //     something.\n-  if (mode == 1) {\n-    if (swapcontext(&child_context, &orig_context) < 0) {\n-      perror(\"swapcontext\");\n-      _exit(0);\n-    }\n-  }\n-}\n-\n-int Run(int arg, int mode) {\n-  const int kStackSize = 1 << 20;\n-  char child_stack[kStackSize + 1];\n-  printf(\"Child stack: %p\\n\", child_stack);\n-  // Setup child context.\n-  getcontext(&child_context);\n-  child_context.uc_stack.ss_sp = child_stack;\n-  child_context.uc_stack.ss_size = kStackSize / 2;\n-  if (mode == 0) {\n-    child_context.uc_link = &orig_context;\n-  }\n-  makecontext(&child_context, (void (*)())Child, 1, mode);\n-  if (swapcontext(&orig_context, &child_context) < 0) {\n-    perror(\"swapcontext\");\n-    return 0;\n-  }\n-  // Touch childs's stack to make sure it's unpoisoned.\n-  for (int i = 0; i < kStackSize; i++) {\n-    child_stack[i] = i;\n-  }\n-  return child_stack[arg];\n-}\n-\n-int main(int argc, char **argv) {\n-  // CHECK: WARNING: ASan doesn't fully support makecontext/swapcontext\n-  int ret = 0;\n-  ret += Run(argc - 1, 0);\n-  printf(\"Test1 passed\\n\");\n-  // CHECK: Test1 passed\n-  ret += Run(argc - 1, 1);\n-  printf(\"Test2 passed\\n\");\n-  // CHECK: Test2 passed\n-  return ret;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/zero-base-shadow.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/zero-base-shadow.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/Linux/zero-base-shadow.cc\t2013-04-09 09:08:05.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/Linux/zero-base-shadow.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,28 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 -fsanitize-address-zero-base-shadow -fPIE -pie %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-64 < %t.out\n-// RUN: %clangxx_asan -m64 -O1 -fsanitize-address-zero-base-shadow -fPIE -pie %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-64 < %t.out\n-// RUN: %clangxx_asan -m64 -O2 -fsanitize-address-zero-base-shadow -fPIE -pie %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-64 < %t.out\n-// RUN: %clangxx_asan -m32 -O0 -fsanitize-address-zero-base-shadow -fPIE -pie %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-32 < %t.out\n-// RUN: %clangxx_asan -m32 -O1 -fsanitize-address-zero-base-shadow -fPIE -pie %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-32 < %t.out\n-// RUN: %clangxx_asan -m32 -O2 -fsanitize-address-zero-base-shadow -fPIE -pie %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-32 < %t.out\n-\n-#include <string.h>\n-int main(int argc, char **argv) {\n-  char x[10];\n-  memset(x, 0, 10);\n-  int res = x[argc * 10];  // BOOOM\n-  // CHECK: {{READ of size 1 at 0x.* thread T0}}\n-  // CHECK: {{    #0 0x.* in _?main .*zero-base-shadow.cc:}}[[@LINE-2]]\n-  // CHECK: {{Address 0x.* is .* frame}}\n-  // CHECK: main\n-\n-  // Check that shadow for stack memory occupies lower part of address space.\n-  // CHECK-64: =>0x0f\n-  // CHECK-32: =>0x1\n-  return res;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/memcmp_test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/memcmp_test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/memcmp_test.cc\t2012-10-15 15:04:58.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/memcmp_test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,19 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-#include <string.h>\n-int main(int argc, char **argv) {\n-  char a1[] = {argc, 2, 3, 4};\n-  char a2[] = {1, 2*argc, 3, 4};\n-  int res = memcmp(a1, a2, 4 + argc);  // BOOM\n-  // CHECK: AddressSanitizer: stack-buffer-overflow\n-  // CHECK: {{#0.*memcmp}}\n-  // CHECK: {{#1.*main}}\n-  return res;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/null_deref.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/null_deref.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/null_deref.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/null_deref.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,31 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-\n-__attribute__((noinline))\n-static void NullDeref(int *ptr) {\n-  // CHECK: ERROR: AddressSanitizer: SEGV on unknown address\n-  // CHECK:   {{0x0*00028 .*pc 0x.*}}\n-  // CHECK: {{AddressSanitizer can not provide additional info.}}\n-  ptr[10]++;  // BOOM\n-  // atos on Mac cannot extract the symbol name correctly.\n-  // CHECK-Linux: {{    #0 0x.* in NullDeref.*null_deref.cc:}}[[@LINE-2]]\n-  // CHECK-Darwin: {{    #0 0x.* in .*NullDeref.*null_deref.cc:}}[[@LINE-3]]\n-}\n-int main() {\n-  NullDeref((int*)0);\n-  // CHECK: {{    #1 0x.* in _?main.*null_deref.cc:}}[[@LINE-1]]\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/partial_right.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/partial_right.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/partial_right.cc\t2013-02-05 15:32:03.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/partial_right.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,17 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-#include <stdlib.h>\n-int main(int argc, char **argv) {\n-  volatile int *x = (int*)malloc(2*sizeof(int) + 2);\n-  int res = x[2];  // BOOOM\n-  // CHECK: {{READ of size 4 at 0x.* thread T0}}\n-  // CHECK: [[ADDR:0x[01-9a-fa-f]+]] is located 0 bytes to the right of {{.*}}-byte region [{{.*}},{{.*}}[[ADDR]])\n-  return res;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/shared-lib-test.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/shared-lib-test.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/shared-lib-test.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/shared-lib-test.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,54 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %p/SharedLibs/shared-lib-test-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-#include <dlfcn.h>\n-#include <stdio.h>\n-#include <string.h>\n-\n-#include <string>\n-\n-using std::string;\n-\n-typedef void (fun_t)(int x);\n-\n-int main(int argc, char *argv[]) {\n-  string path = string(argv[0]) + \"-so.so\";\n-  printf(\"opening %s ... \\n\", path.c_str());\n-  void *lib = dlopen(path.c_str(), RTLD_NOW);\n-  if (!lib) {\n-    printf(\"error in dlopen(): %s\\n\", dlerror());\n-    return 1;\n-  }\n-  fun_t *inc = (fun_t*)dlsym(lib, \"inc\");\n-  if (!inc) return 1;\n-  printf(\"ok\\n\");\n-  inc(1);\n-  inc(-1);  // BOOM\n-  // CHECK: {{.*ERROR: AddressSanitizer: global-buffer-overflow}}\n-  // CHECK: {{READ of size 4 at 0x.* thread T0}}\n-  // CHECK: {{    #0 0x.*}}\n-  // CHECK: {{    #1 0x.* in _?main .*shared-lib-test.cc:}}[[@LINE-4]]\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/stack-overflow.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/stack-overflow.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/stack-overflow.cc\t2013-03-22 11:36:24.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/stack-overflow.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,20 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-#include <string.h>\n-int main(int argc, char **argv) {\n-  char x[10];\n-  memset(x, 0, 10);\n-  int res = x[argc * 10];  // BOOOM\n-  // CHECK: {{READ of size 1 at 0x.* thread T0}}\n-  // CHECK: {{    #0 0x.* in _?main .*stack-overflow.cc:}}[[@LINE-2]]\n-  // CHECK: {{Address 0x.* is located in stack of thread T0 at offset}}\n-  // CHECK: main\n-  return res;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/strncpy-overflow.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/strncpy-overflow.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/strncpy-overflow.cc\t2013-02-05 15:32:03.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/strncpy-overflow.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,38 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-\n-#include <string.h>\n-#include <stdlib.h>\n-int main(int argc, char **argv) {\n-  char *hello = (char*)malloc(6);\n-  strcpy(hello, \"hello\");\n-  char *short_buffer = (char*)malloc(9);\n-  strncpy(short_buffer, hello, 10);  // BOOM\n-  // CHECK: {{WRITE of size 10 at 0x.* thread T0}}\n-  // CHECK-Linux: {{    #0 0x.* in .*strncpy}}\n-  // CHECK-Darwin: {{    #0 0x.* in _?wrap_strncpy}}\n-  // CHECK: {{    #1 0x.* in _?main .*strncpy-overflow.cc:}}[[@LINE-4]]\n-  // CHECK: {{0x.* is located 0 bytes to the right of 9-byte region}}\n-  // CHECK: {{allocated by thread T0 here:}}\n-\n-  // CHECK-Linux: {{    #0 0x.* in .*malloc}}\n-  // CHECK-Linux: {{    #1 0x.* in main .*strncpy-overflow.cc:}}[[@LINE-10]]\n-\n-  // CHECK-Darwin: {{    #0 0x.* in _?wrap_malloc.*}}\n-  // CHECK-Darwin: {{    #1 0x.* in _?main .*strncpy-overflow.cc:}}[[@LINE-13]]\n-  return short_buffer[8];\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/use-after-free.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/use-after-free.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/use-after-free.cc\t2013-01-22 10:14:54.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/use-after-free.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,43 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-\n-#include <stdlib.h>\n-int main() {\n-  char *x = (char*)malloc(10 * sizeof(char));\n-  free(x);\n-  return x[5];\n-  // CHECK: {{.*ERROR: AddressSanitizer: heap-use-after-free on address}}\n-  // CHECK:   {{0x.* at pc 0x.* bp 0x.* sp 0x.*}}\n-  // CHECK: {{READ of size 1 at 0x.* thread T0}}\n-  // CHECK: {{    #0 0x.* in _?main .*use-after-free.cc:22}}\n-  // CHECK: {{0x.* is located 5 bytes inside of 10-byte region .0x.*,0x.*}}\n-  // CHECK: {{freed by thread T0 here:}}\n-\n-  // CHECK-Linux: {{    #0 0x.* in .*free}}\n-  // CHECK-Linux: {{    #1 0x.* in main .*use-after-free.cc:21}}\n-\n-  // CHECK-Darwin: {{    #0 0x.* in _?wrap_free}}\n-  // CHECK-Darwin: {{    #1 0x.* in _?main .*use-after-free.cc:21}}\n-\n-  // CHECK: {{previously allocated by thread T0 here:}}\n-\n-  // CHECK-Linux: {{    #0 0x.* in .*malloc}}\n-  // CHECK-Linux: {{    #1 0x.* in main .*use-after-free.cc:20}}\n-\n-  // CHECK-Darwin: {{    #0 0x.* in _?wrap_malloc.*}}\n-  // CHECK-Darwin: {{    #1 0x.* in _?main .*use-after-free.cc:20}}\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/use-after-free-right.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/use-after-free-right.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/use-after-free-right.cc\t2013-02-11 08:19:24.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/use-after-free-right.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,46 +0,0 @@\n-// RUN: %clangxx_asan -m64 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m64 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O0 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O1 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O2 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-// RUN: %clangxx_asan -m32 -O3 %s -o %t && %t 2>&1 | %symbolize > %t.out\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-%os < %t.out\n-\n-// Test use-after-free report in the case when access is at the right border of\n-//  the allocation.\n-\n-#include <stdlib.h>\n-int main() {\n-  volatile char *x = (char*)malloc(sizeof(char));\n-  free((void*)x);\n-  *x = 42;\n-  // CHECK: {{.*ERROR: AddressSanitizer: heap-use-after-free on address}}\n-  // CHECK:   {{0x.* at pc 0x.* bp 0x.* sp 0x.*}}\n-  // CHECK: {{WRITE of size 1 at 0x.* thread T0}}\n-  // CHECK: {{    #0 0x.* in _?main .*use-after-free-right.cc:25}}\n-  // CHECK: {{0x.* is located 0 bytes inside of 1-byte region .0x.*,0x.*}}\n-  // CHECK: {{freed by thread T0 here:}}\n-\n-  // CHECK-Linux: {{    #0 0x.* in .*free}}\n-  // CHECK-Linux: {{    #1 0x.* in main .*use-after-free-right.cc:24}}\n-\n-  // CHECK-Darwin: {{    #0 0x.* in _?wrap_free}}\n-  // CHECK-Darwin: {{    #1 0x.* in _?main .*use-after-free-right.cc:24}}\n-\n-  // CHECK: {{previously allocated by thread T0 here:}}\n-\n-  // CHECK-Linux: {{    #0 0x.* in .*malloc}}\n-  // CHECK-Linux: {{    #1 0x.* in main .*use-after-free-right.cc:23}}\n-\n-  // CHECK-Darwin: {{    #0 0x.* in _?wrap_malloc.*}}\n-  // CHECK-Darwin: {{    #1 0x.* in _?main .*use-after-free-right.cc:23}}\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/use-after-scope-inlined.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/use-after-scope-inlined.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/use-after-scope-inlined.cc\t2013-03-22 11:36:24.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/use-after-scope-inlined.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,30 +0,0 @@\n-// Test with \"-O2\" only to make sure inlining (leading to use-after-scope)\n-// happens. \"always_inline\" is not enough, as Clang doesn't emit\n-// llvm.lifetime intrinsics at -O0.\n-//\n-// RUN: %clangxx_asan -m64 -O2 -fsanitize=use-after-scope %s -o %t && \\\n-// RUN:     %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -m32 -O2 -fsanitize=use-after-scope %s -o %t && \\\n-// RUN:     %t 2>&1 | %symbolize | FileCheck %s\n-\n-int *arr;\n-\n-__attribute__((always_inline))\n-void inlined(int arg) {\n-  int x[5];\n-  for (int i = 0; i < arg; i++) x[i] = i;\n-  arr = x;\n-}\n-\n-int main(int argc, char *argv[]) {\n-  inlined(argc);\n-  return arr[argc - 1];  // BOOM\n-  // CHECK: ERROR: AddressSanitizer: stack-use-after-scope\n-  // CHECK: READ of size 4 at 0x{{.*}} thread T0\n-  // CHECK:   #0 0x{{.*}} in {{_?}}main\n-  // CHECK:      {{.*}}use-after-scope-inlined.cc:[[@LINE-4]]\n-  // CHECK: Address 0x{{.*}} is located in stack of thread T0 at offset\n-  // CHECK:      [[OFFSET:[^ ]*]] in frame\n-  // CHECK: main\n-  // CHECK:   {{\\[}}[[OFFSET]], {{.*}}) 'x.i'\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/wait.cc llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/wait.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/asan/lit_tests/wait.cc\t2013-04-23 14:36:37.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/asan/lit_tests/wait.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,77 +0,0 @@\n-// RUN: %clangxx_asan -DWAIT -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-// RUN: %clangxx_asan -DWAITPID -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAITPID -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAITPID -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAITPID -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-// RUN: %clangxx_asan -DWAITID -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAITID -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAITID -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAITID -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-// RUN: %clangxx_asan -DWAIT3 -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT3 -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT3 -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT3 -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-// RUN: %clangxx_asan -DWAIT4 -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT4 -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT4 -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT4 -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-// RUN: %clangxx_asan -DWAIT3_RUSAGE -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT3_RUSAGE -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT3_RUSAGE -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT3_RUSAGE -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-// RUN: %clangxx_asan -DWAIT4_RUSAGE -m64 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT4_RUSAGE -m64 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT4_RUSAGE -m32 -O0 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-// RUN: %clangxx_asan -DWAIT4_RUSAGE -m32 -O3 %s -o %t && %t 2>&1 | %symbolize | FileCheck %s\n-\n-\n-#include <assert.h>\n-#include <sys/wait.h>\n-#include <unistd.h>\n-\n-int main(int argc, char **argv) {\n-  pid_t pid = fork();\n-  if (pid) { // parent\n-    int x[3];\n-    int *status = x + argc * 3;\n-    int res;\n-#if defined(WAIT)\n-    res = wait(status);\n-#elif defined(WAITPID)\n-    res = waitpid(pid, status, WNOHANG);\n-#elif defined(WAITID)\n-    siginfo_t *si = (siginfo_t*)(x + argc * 3);\n-    res = waitid(P_ALL, 0, si, WEXITED | WNOHANG);\n-#elif defined(WAIT3)\n-    res = wait3(status, WNOHANG, NULL);\n-#elif defined(WAIT4)\n-    res = wait4(pid, status, WNOHANG, NULL);\n-#elif defined(WAIT3_RUSAGE) || defined(WAIT4_RUSAGE)\n-    struct rusage *ru = (struct rusage*)(x + argc * 3);\n-    int good_status;\n-# if defined(WAIT3_RUSAGE)\n-    res = wait3(&good_status, WNOHANG, ru);\n-# elif defined(WAIT4_RUSAGE)\n-    res = wait4(pid, &good_status, WNOHANG, ru);\n-# endif\n-#endif\n-    // CHECK: stack-buffer-overflow\n-    // CHECK: {{WRITE of size .* at 0x.* thread T0}}\n-    // CHECK: {{in .*wait}}\n-    // CHECK: {{in _?main .*wait.cc:}}\n-    // CHECK: is located in stack of thread T0 at offset\n-    // CHECK: {{in _?main}}\n-    return res != -1;\n-  }\n-  // child\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/heap-origin.cc llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/heap-origin.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/heap-origin.cc\t2013-02-11 12:34:26.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/heap-origin.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,33 +0,0 @@\n-// RUN: %clangxx_msan -m64 -O0 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O1 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O2 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O3 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O0 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O1 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O2 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O3 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-\n-#include <stdlib.h>\n-int main(int argc, char **argv) {\n-  char *volatile x = (char*)malloc(5 * sizeof(char));\n-  if (*x)\n-    exit(0);\n-  // CHECK: WARNING: Use of uninitialized value\n-  // CHECK: {{#0 0x.* in main .*heap-origin.cc:}}[[@LINE-3]]\n-\n-  // CHECK-ORIGINS: Uninitialized value was created by a heap allocation\n-  // CHECK-ORIGINS: {{#0 0x.* in .*malloc}}\n-  // CHECK-ORIGINS: {{#1 0x.* in main .*heap-origin.cc:}}[[@LINE-8]]\n-\n-  // CHECK: SUMMARY: MemorySanitizer: use-of-uninitialized-value {{.*heap-origin.cc:.* main}}\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/Linux/glob.cc llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/Linux/glob.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/Linux/glob.cc\t2013-04-09 13:35:13.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/Linux/glob.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,26 +0,0 @@\n-// RUN: %clangxx_msan -m64 -O0 %s -o %t && %t %p 2>&1 | FileCheck %s\n-// RUN: %clangxx_msan -m64 -O3 %s -o %t && %t %p 2>&1 | FileCheck %s\n-\n-#include <assert.h>\n-#include <glob.h>\n-#include <stdio.h>\n-#include <string.h>\n-#include <errno.h>\n-\n-int main(int argc, char *argv[]) {\n-  assert(argc == 2);\n-  char buf[1024];\n-  snprintf(buf, sizeof(buf), \"%s/%s\", argv[1], \"glob_test_root/*a\");\n-\n-  glob_t globbuf;\n-  int res = glob(buf, 0, 0, &globbuf);\n-\n-  printf(\"%d %s\\n\", errno, strerror(errno));\n-  assert(res == 0);\n-  assert(globbuf.gl_pathc == 2);\n-  printf(\"%zu\\n\", strlen(globbuf.gl_pathv[0]));\n-  printf(\"%zu\\n\", strlen(globbuf.gl_pathv[1]));\n-  printf(\"PASS\\n\");\n-  // CHECK: PASS\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/no_sanitize_memory_prop.cc llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/no_sanitize_memory_prop.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/no_sanitize_memory_prop.cc\t2013-02-28 12:25:54.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/no_sanitize_memory_prop.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,33 +0,0 @@\n-// RUN: %clangxx_msan -m64 -O0 %s -o %t && %t >%t.out 2>&1\n-// RUN: %clangxx_msan -m64 -O1 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O2 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O3 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-\n-// Test that (no_sanitize_memory) functions propagate shadow.\n-\n-// Note that at -O0 there is no report, because 'x' in 'f' is spilled to the\n-// stack, and then loaded back as a fully initialiazed value (due to\n-// no_sanitize_memory attribute).\n-\n-#include <stdlib.h>\n-#include <stdio.h>\n-\n-__attribute__((noinline))\n-__attribute__((no_sanitize_memory))\n-int f(int x) {\n-  return x;\n-}\n-\n-int main(void) {\n-  int x;\n-  int * volatile p = &x;\n-  int y = f(*p);\n-  // CHECK: WARNING: Use of uninitialized value\n-  // CHECK: {{#0 0x.* in main .*no_sanitize_memory_prop.cc:}}[[@LINE+1]]\n-  if (y)\n-    exit(0);\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/stack-origin.cc llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/stack-origin.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/msan/lit_tests/stack-origin.cc\t2013-02-11 12:34:26.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/msan/lit_tests/stack-origin.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,32 +0,0 @@\n-// RUN: %clangxx_msan -m64 -O0 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O1 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O2 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-// RUN: %clangxx_msan -m64 -O3 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out\n-\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O0 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O1 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O2 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-// RUN: %clangxx_msan -fsanitize-memory-track-origins -m64 -O3 %s -o %t && not %t >%t.out 2>&1\n-// RUN: FileCheck %s < %t.out && FileCheck %s --check-prefix=CHECK-ORIGINS < %t.out\n-\n-#include <stdlib.h>\n-int main(int argc, char **argv) {\n-  int x;\n-  int *volatile p = &x;\n-  if (*p)\n-    exit(0);\n-  // CHECK: WARNING: Use of uninitialized value\n-  // CHECK: {{#0 0x.* in main .*stack-origin.cc:}}[[@LINE-3]]\n-\n-  // CHECK-ORIGINS: Uninitialized value was created by an allocation of 'x' in the stack frame of function 'main'\n-\n-  // CHECK: SUMMARY: MemorySanitizer: use-of-uninitialized-value {{.*stack-origin.cc:.* main}}\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/blacklist.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/blacklist.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/blacklist.cc\t2012-12-28 11:06:26.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/blacklist.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,31 +0,0 @@\n-// Test blacklist functionality for TSan.\n-\n-// RUN: %clangxx_tsan -O1 %s \\\n-// RUN:   -fsanitize-blacklist=%p/Helpers/blacklist.txt \\\n-// RUN:   -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-\n-int Global;\n-\n-void *Thread1(void *x) {\n-  Global++;\n-  return NULL;\n-}\n-\n-void *Blacklisted_Thread2(void *x) {\n-  Global--;\n-  return NULL;\n-}\n-\n-int main() {\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Blacklisted_Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  printf(\"PASS\\n\");\n-  return 0;\n-}\n-\n-// CHECK-NOT: ThreadSanitizer: data race\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/load_shared_lib.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/load_shared_lib.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/load_shared_lib.cc\t2013-04-09 09:08:05.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/load_shared_lib.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,44 +0,0 @@\n-// Check that if the list of shared libraries changes between the two race\n-// reports, the second report occurring in a new shared library is still\n-// symbolized correctly.\n-\n-// RUN: %clangxx_tsan -O1 %p/SharedLibs/load_shared_lib-so.cc \\\n-// RUN:     -fPIC -shared -o %t-so.so\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-\n-#include <dlfcn.h>\n-#include <pthread.h>\n-#include <stdio.h>\n-\n-#include <string>\n-\n-int GLOB = 0;\n-\n-void *write_glob(void *unused) {\n-  GLOB++;\n-  return NULL;\n-}\n-\n-void race_two_threads(void *(*access_callback)(void *unused)) {\n-  pthread_t t1, t2;\n-  pthread_create(&t1, NULL, access_callback, NULL);\n-  pthread_create(&t2, NULL, access_callback, NULL);\n-  pthread_join(t1, NULL);\n-  pthread_join(t2, NULL);\n-}\n-\n-int main(int argc, char *argv[]) {\n-  std::string path = std::string(argv[0]) + std::string(\"-so.so\");\n-  race_two_threads(write_glob);\n-  // CHECK: write_glob\n-  void *lib = dlopen(path.c_str(), RTLD_NOW);\n-    if (!lib) {\n-    printf(\"error in dlopen(): %s\\n\", dlerror());\n-    return 1;\n-  }\n-  void *(*write_from_so)(void *unused);\n-  *(void **)&write_from_so = dlsym(lib, \"write_from_so\");\n-  race_two_threads(write_from_so);\n-  // CHECK: write_from_so\n-  return 0;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutex_destroy_locked.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutex_destroy_locked.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutex_destroy_locked.cc\t2013-02-06 15:24:00.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutex_destroy_locked.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,22 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <unistd.h>\n-\n-int main() {\n-  pthread_mutex_t m;\n-  pthread_mutex_init(&m, 0);\n-  pthread_mutex_lock(&m);\n-  pthread_mutex_destroy(&m);\n-  return 0;\n-}\n-\n-// CHECK: WARNING: ThreadSanitizer: destroy of a locked mutex\n-// CHECK:     #0 pthread_mutex_destroy\n-// CHECK:     #1 main\n-// CHECK:   and:\n-// CHECK:     #0 pthread_mutex_lock\n-// CHECK:     #1 main\n-// CHECK:   Mutex {{.*}} created at:\n-// CHECK:     #0 pthread_mutex_init\n-// CHECK:     #1 main\n-// CHECK: SUMMARY: ThreadSanitizer: destroy of a locked mutex{{.*}}main\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset1.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset1.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset1.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset1.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,37 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-pthread_mutex_t mtx;\n-\n-void *Thread1(void *x) {\n-  sleep(1);\n-  pthread_mutex_lock(&mtx);\n-  Global++;\n-  pthread_mutex_unlock(&mtx);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  Global--;\n-  return NULL;\n-}\n-\n-int main() {\n-  // CHECK: WARNING: ThreadSanitizer: data race\n-  // CHECK:   Write of size 4 at {{.*}} by thread T1\n-  // CHECK:                         (mutexes: write [[M1:M[0-9]+]]):\n-  // CHECK:   Previous write of size 4 at {{.*}} by thread T2:\n-  // CHECK:   Mutex [[M1]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset1.cc:[[@LINE+1]]\n-  pthread_mutex_init(&mtx, 0);\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(&mtx);\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset2.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset2.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset2.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset2.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,37 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-pthread_mutex_t mtx;\n-\n-void *Thread1(void *x) {\n-  pthread_mutex_lock(&mtx);\n-  Global++;\n-  pthread_mutex_unlock(&mtx);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  sleep(1);\n-  Global--;\n-  return NULL;\n-}\n-\n-int main() {\n-  // CHECK: WARNING: ThreadSanitizer: data race\n-  // CHECK:   Write of size 4 at {{.*}} by thread T2:\n-  // CHECK:   Previous write of size 4 at {{.*}} by thread T1\n-  // CHECK:                     (mutexes: write [[M1:M[0-9]+]]):\n-  // CHECK:   Mutex [[M1]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset2.cc:[[@LINE+1]]\n-  pthread_mutex_init(&mtx, 0);\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(&mtx);\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset3.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset3.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset3.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset3.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,45 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-pthread_mutex_t mtx1;\n-pthread_mutex_t mtx2;\n-\n-void *Thread1(void *x) {\n-  sleep(1);\n-  pthread_mutex_lock(&mtx1);\n-  pthread_mutex_lock(&mtx2);\n-  Global++;\n-  pthread_mutex_unlock(&mtx2);\n-  pthread_mutex_unlock(&mtx1);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  Global--;\n-  return NULL;\n-}\n-\n-int main() {\n-  // CHECK: WARNING: ThreadSanitizer: data race\n-  // CHECK: Write of size 4 at {{.*}} by thread T1\n-  // CHECK:               (mutexes: write [[M1:M[0-9]+]], write [[M2:M[0-9]+]]):\n-  // CHECK:   Previous write of size 4 at {{.*}} by thread T2:\n-  // CHECK:   Mutex [[M1]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset3.cc:[[@LINE+4]]\n-  // CHECK:   Mutex [[M2]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset3.cc:[[@LINE+2]]\n-  pthread_mutex_init(&mtx1, 0);\n-  pthread_mutex_init(&mtx2, 0);\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(&mtx1);\n-  pthread_mutex_destroy(&mtx2);\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset4.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset4.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset4.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset4.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,45 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-pthread_mutex_t mtx1;\n-pthread_mutex_t mtx2;\n-\n-void *Thread1(void *x) {\n-  pthread_mutex_lock(&mtx1);\n-  pthread_mutex_lock(&mtx2);\n-  Global++;\n-  pthread_mutex_unlock(&mtx2);\n-  pthread_mutex_unlock(&mtx1);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  sleep(1);\n-  Global--;\n-  return NULL;\n-}\n-\n-int main() {\n-  // CHECK: WARNING: ThreadSanitizer: data race\n-  // CHECK:   Write of size 4 at {{.*}} by thread T2:\n-  // CHECK:   Previous write of size 4 at {{.*}} by thread T1\n-  // CHECK:                 (mutexes: write [[M1:M[0-9]+]], write [[M2:M[0-9]+]]):\n-  // CHECK:   Mutex [[M1]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset4.cc:[[@LINE+4]]\n-  // CHECK:   Mutex [[M2]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset4.cc:[[@LINE+2]]\n-  pthread_mutex_init(&mtx1, 0);\n-  pthread_mutex_init(&mtx2, 0);\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(&mtx1);\n-  pthread_mutex_destroy(&mtx2);\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset5.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset5.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset5.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset5.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,46 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-pthread_mutex_t mtx1;\n-pthread_mutex_t mtx2;\n-\n-void *Thread1(void *x) {\n-  sleep(1);\n-  pthread_mutex_lock(&mtx1);\n-  Global++;\n-  pthread_mutex_unlock(&mtx1);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  pthread_mutex_lock(&mtx2);\n-  Global--;\n-  pthread_mutex_unlock(&mtx2);\n-  return NULL;\n-}\n-\n-int main() {\n-  // CHECK: WARNING: ThreadSanitizer: data race\n-  // CHECK:   Write of size 4 at {{.*}} by thread T1\n-  // CHECK:                              (mutexes: write [[M1:M[0-9]+]]):\n-  // CHECK:   Previous write of size 4 at {{.*}} by thread T2\n-  // CHECK:                              (mutexes: write [[M2:M[0-9]+]]):\n-  // CHECK:   Mutex [[M1]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset5.cc:[[@LINE+4]]\n-  // CHECK:   Mutex [[M2]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset5.cc:[[@LINE+5]]\n-  pthread_mutex_init(&mtx1, 0);\n-  pthread_mutex_init(&mtx2, 0);\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(&mtx1);\n-  pthread_mutex_destroy(&mtx2);\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset6.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset6.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset6.cc\t2012-12-28 09:38:09.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset6.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,53 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-pthread_mutex_t mtx1;\n-pthread_spinlock_t mtx2;\n-pthread_rwlock_t mtx3;\n-\n-void *Thread1(void *x) {\n-  sleep(1);\n-  pthread_mutex_lock(&mtx1);\n-  Global++;\n-  pthread_mutex_unlock(&mtx1);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  pthread_mutex_lock(&mtx1);\n-  pthread_mutex_unlock(&mtx1);\n-  pthread_spin_lock(&mtx2);\n-  pthread_rwlock_rdlock(&mtx3);\n-  Global--;\n-  pthread_spin_unlock(&mtx2);\n-  pthread_rwlock_unlock(&mtx3);\n-  return NULL;\n-}\n-\n-int main() {\n-  // CHECK: WARNING: ThreadSanitizer: data race\n-  // CHECK:   Write of size 4 at {{.*}} by thread T1\n-  // CHECK:                          (mutexes: write [[M1:M[0-9]+]]):\n-  // CHECK:   Previous write of size 4 at {{.*}} by thread T2\n-  // CHECK:               (mutexes: write [[M2:M[0-9]+]], read [[M3:M[0-9]+]]):\n-  // CHECK:   Mutex [[M1]] created at:\n-  // CHECK:     #1 main {{.*}}/mutexset6.cc:[[@LINE+5]]\n-  // CHECK:   Mutex [[M2]] created at:\n-  // CHECK:     #1 main {{.*}}/mutexset6.cc:[[@LINE+4]]\n-  // CHECK:   Mutex [[M3]] created at:\n-  // CHECK:     #1 main {{.*}}/mutexset6.cc:[[@LINE+3]]\n-  pthread_mutex_init(&mtx1, 0);\n-  pthread_spin_init(&mtx2, 0);\n-  pthread_rwlock_init(&mtx3, 0);\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(&mtx1);\n-  pthread_spin_destroy(&mtx2);\n-  pthread_rwlock_destroy(&mtx3);\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset8.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset8.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/mutexset8.cc\t2013-04-30 14:00:40.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/mutexset8.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,39 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-pthread_mutex_t *mtx;\n-\n-void *Thread1(void *x) {\n-  sleep(1);\n-  pthread_mutex_lock(mtx);\n-  Global++;\n-  pthread_mutex_unlock(mtx);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  Global--;\n-  return NULL;\n-}\n-\n-int main() {\n-  // CHECK: WARNING: ThreadSanitizer: data race\n-  // CHECK:   Write of size 4 at {{.*}} by thread T1\n-  // CHECK:                         (mutexes: write [[M1:M[0-9]+]]):\n-  // CHECK:   Previous write of size 4 at {{.*}} by thread T2:\n-  // CHECK:   Mutex [[M1]] created at:\n-  // CHECK:     #0 pthread_mutex_init\n-  // CHECK:     #1 main {{.*}}/mutexset8.cc\n-  mtx = new pthread_mutex_t;\n-  pthread_mutex_init(mtx, 0);\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(mtx);\n-  delete mtx;\n-}\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/race_on_mutex.c llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/race_on_mutex.c\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/race_on_mutex.c\t2013-02-01 12:10:53.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/race_on_mutex.c\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,42 +0,0 @@\n-// RUN: %clang_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <stddef.h>\n-#include <unistd.h>\n-\n-pthread_mutex_t Mtx;\n-int Global;\n-\n-void *Thread1(void *x) {\n-  pthread_mutex_init(&Mtx, 0);\n-  pthread_mutex_lock(&Mtx);\n-  Global = 42;\n-  pthread_mutex_unlock(&Mtx);\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  sleep(1);\n-  pthread_mutex_lock(&Mtx);\n-  Global = 43;\n-  pthread_mutex_unlock(&Mtx);\n-  return NULL;\n-}\n-\n-int main() {\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  pthread_mutex_destroy(&Mtx);\n-  return 0;\n-}\n-\n-// CHECK:      WARNING: ThreadSanitizer: data race\n-// CHECK-NEXT:   Atomic read of size 1 at {{.*}} by thread T2:\n-// CHECK-NEXT:     #0 pthread_mutex_lock\n-// CHECK-NEXT:     #1 Thread2{{.*}} {{.*}}race_on_mutex.c:20{{(:3)?}} ({{.*}})\n-// CHECK:        Previous write of size 1 at {{.*}} by thread T1:\n-// CHECK-NEXT:     #0 pthread_mutex_init {{.*}} ({{.*}})\n-// CHECK-NEXT:     #1 Thread1{{.*}} {{.*}}race_on_mutex.c:11{{(:3)?}} ({{.*}})\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/signal_malloc.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/signal_malloc.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/signal_malloc.cc\t2013-02-06 15:24:00.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/signal_malloc.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,26 +0,0 @@\n-// RUN: %clang_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <stdio.h>\n-#include <stdlib.h>\n-#include <signal.h>\n-#include <sys/types.h>\n-#include <unistd.h>\n-\n-static void handler(int, siginfo_t*, void*) {\n-  // CHECK: WARNING: ThreadSanitizer: signal-unsafe call inside of a signal\n-  // CHECK:     #0 malloc\n-  // CHECK:     #{{(1|2)}} handler(int, siginfo{{(_t)?}}*, void*) {{.*}}signal_malloc.cc:[[@LINE+2]]\n-  // CHECK: SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal{{.*}}handler\n-  volatile char *p = (char*)malloc(1);\n-  p[0] = 0;\n-  free((void*)p);\n-}\n-\n-int main() {\n-  struct sigaction act = {};\n-  act.sa_sigaction = &handler;\n-  sigaction(SIGPROF, &act, 0);\n-  kill(getpid(), SIGPROF);\n-  sleep(1);\n-  return 0;\n-}\n-\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/simple_race.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/simple_race.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/simple_race.cc\t2013-02-06 15:24:00.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/simple_race.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,26 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-\n-int Global;\n-\n-void *Thread1(void *x) {\n-  Global++;\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  Global--;\n-  return NULL;\n-}\n-\n-int main() {\n-  pthread_t t[2];\n-  pthread_create(&t[0], NULL, Thread1, NULL);\n-  pthread_create(&t[1], NULL, Thread2, NULL);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-}\n-\n-// CHECK: WARNING: ThreadSanitizer: data race\n-// CHECK: SUMMARY: ThreadSanitizer: data race{{.*}}Thread\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/simple_stack2.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/simple_stack2.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/simple_stack2.cc\t2012-12-07 10:24:57.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/simple_stack2.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,53 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-\n-void __attribute__((noinline)) foo1() {\n-  Global = 42;\n-}\n-\n-void __attribute__((noinline)) bar1() {\n-  volatile int tmp = 42;\n-  int tmp2 = tmp;\n-  (void)tmp2;\n-  foo1();\n-}\n-\n-void __attribute__((noinline)) foo2() {\n-  volatile int tmp = Global;\n-  int tmp2 = tmp;\n-  (void)tmp2;\n-}\n-\n-void __attribute__((noinline)) bar2() {\n-  volatile int tmp = 42;\n-  int tmp2 = tmp;\n-  (void)tmp2;\n-  foo2();\n-}\n-\n-void *Thread1(void *x) {\n-  sleep(1);\n-  bar1();\n-  return NULL;\n-}\n-\n-int main() {\n-  pthread_t t;\n-  pthread_create(&t, NULL, Thread1, NULL);\n-  bar2();\n-  pthread_join(t, NULL);\n-}\n-\n-// CHECK:      WARNING: ThreadSanitizer: data race\n-// CHECK-NEXT:   Write of size 4 at {{.*}} by thread T1:\n-// CHECK-NEXT:     #0 foo1{{.*}} {{.*}}simple_stack2.cc:9{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #1 bar1{{.*}} {{.*}}simple_stack2.cc:16{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #2 Thread1{{.*}} {{.*}}simple_stack2.cc:34{{(:3)?}} ({{.*}})\n-// CHECK:        Previous read of size 4 at {{.*}} by main thread:\n-// CHECK-NEXT:     #0 foo2{{.*}} {{.*}}simple_stack2.cc:20{{(:28)?}} ({{.*}})\n-// CHECK-NEXT:     #1 bar2{{.*}} {{.*}}simple_stack2.cc:29{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #2 main{{.*}} {{.*}}simple_stack2.cc:41{{(:3)?}} ({{.*}})\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/simple_stack.c llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/simple_stack.c\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/simple_stack.c\t2012-12-17 17:28:15.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/simple_stack.c\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,66 +0,0 @@\n-// RUN: %clang_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <stdio.h>\n-#include <unistd.h>\n-\n-int Global;\n-\n-void __attribute__((noinline)) foo1() {\n-  Global = 42;\n-}\n-\n-void __attribute__((noinline)) bar1() {\n-  volatile int tmp = 42; (void)tmp;\n-  foo1();\n-}\n-\n-void __attribute__((noinline)) foo2() {\n-  volatile int v = Global; (void)v;\n-}\n-\n-void __attribute__((noinline)) bar2() {\n-  volatile int tmp = 42; (void)tmp;\n-  foo2();\n-}\n-\n-void *Thread1(void *x) {\n-  sleep(1);\n-  bar1();\n-  return NULL;\n-}\n-\n-void *Thread2(void *x) {\n-  bar2();\n-  return NULL;\n-}\n-\n-void StartThread(pthread_t *t, void *(*f)(void*)) {\n-  pthread_create(t, NULL, f, NULL);\n-}\n-\n-int main() {\n-  pthread_t t[2];\n-  StartThread(&t[0], Thread1);\n-  StartThread(&t[1], Thread2);\n-  pthread_join(t[0], NULL);\n-  pthread_join(t[1], NULL);\n-  return 0;\n-}\n-\n-// CHECK:      WARNING: ThreadSanitizer: data race\n-// CHECK-NEXT:   Write of size 4 at {{.*}} by thread T1:\n-// CHECK-NEXT:     #0 foo1{{.*}} {{.*}}simple_stack.c:9{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #1 bar1{{.*}} {{.*}}simple_stack.c:14{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #2 Thread1{{.*}} {{.*}}simple_stack.c:28{{(:3)?}} ({{.*}})\n-// CHECK:        Previous read of size 4 at {{.*}} by thread T2:\n-// CHECK-NEXT:     #0 foo2{{.*}} {{.*}}simple_stack.c:18{{(:26)?}} ({{.*}})\n-// CHECK-NEXT:     #1 bar2{{.*}} {{.*}}simple_stack.c:23{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #2 Thread2{{.*}} {{.*}}simple_stack.c:33{{(:3)?}} ({{.*}})\n-// CHECK:        Thread T1 (tid={{.*}}, running) created by main thread at:\n-// CHECK-NEXT:     #0 pthread_create {{.*}} ({{.*}})\n-// CHECK-NEXT:     #1 StartThread{{.*}} {{.*}}simple_stack.c:38{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #2 main{{.*}} {{.*}}simple_stack.c:43{{(:3)?}} ({{.*}})\n-// CHECK:        Thread T2 ({{.*}}) created by main thread at:\n-// CHECK-NEXT:     #0 pthread_create {{.*}} ({{.*}})\n-// CHECK-NEXT:     #1 StartThread{{.*}} {{.*}}simple_stack.c:38{{(:3)?}} ({{.*}})\n-// CHECK-NEXT:     #2 main{{.*}} {{.*}}simple_stack.c:44{{(:3)?}} ({{.*}})\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/thread_leak3.c llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/thread_leak3.c\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/thread_leak3.c\t2013-03-21 17:55:17.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/thread_leak3.c\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,17 +0,0 @@\n-// RUN: %clang_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <unistd.h>\n-\n-void *Thread(void *x) {\n-  return 0;\n-}\n-\n-int main() {\n-  pthread_t t;\n-  pthread_create(&t, 0, Thread, 0);\n-  sleep(1);\n-  return 0;\n-}\n-\n-// CHECK: WARNING: ThreadSanitizer: thread leak\n-// CHECK: SUMMARY: ThreadSanitizer: thread leak{{.*}}main\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/tiny_race.c llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/tiny_race.c\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/tiny_race.c\t2012-09-18 09:23:54.000000000 +0200\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/tiny_race.c\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,15 +0,0 @@\n-// RUN: %clang_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-int Global;\n-void *Thread1(void *x) {\n-  Global = 42;\n-  return x;\n-}\n-int main() {\n-  pthread_t t;\n-  pthread_create(&t, NULL, Thread1, NULL);\n-  Global = 43;\n-  pthread_join(t, NULL);\n-  return Global;\n-}\n-// CHECK: WARNING: ThreadSanitizer: data race\ndiff -urN llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/write_in_reader_lock.cc llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/write_in_reader_lock.cc\n--- llvm-3.3.src.org/projects/compiler-rt/lib/tsan/lit_tests/write_in_reader_lock.cc\t2012-12-07 10:24:57.000000000 +0100\n+++ llvm-3.3.src/projects/compiler-rt/lib/tsan/lit_tests/write_in_reader_lock.cc\t1970-01-01 01:00:00.000000000 +0100\n@@ -1,35 +0,0 @@\n-// RUN: %clangxx_tsan -O1 %s -o %t && %t 2>&1 | FileCheck %s\n-#include <pthread.h>\n-#include <unistd.h>\n-\n-pthread_rwlock_t rwlock;\n-int GLOB;\n-\n-void *Thread1(void *p) {\n-  (void)p;\n-  pthread_rwlock_rdlock(&rwlock);\n-  // Write under reader lock.\n-  sleep(1);\n-  GLOB++;\n-  pthread_rwlock_unlock(&rwlock);\n-  return 0;\n-}\n-\n-int main(int argc, char *argv[]) {\n-  pthread_rwlock_init(&rwlock, NULL);\n-  pthread_rwlock_rdlock(&rwlock);\n-  pthread_t t;\n-  pthread_create(&t, 0, Thread1, 0);\n-  volatile int x = GLOB;\n-  (void)x;\n-  pthread_rwlock_unlock(&rwlock);\n-  pthread_join(t, 0);\n-  pthread_rwlock_destroy(&rwlock);\n-  return 0;\n-}\n-\n-// CHECK: WARNING: ThreadSanitizer: data race\n-// CHECK:   Write of size 4 at {{.*}} by thread T1{{.*}}:\n-// CHECK:     #0 Thread1(void*) {{.*}}write_in_reader_lock.cc:13\n-// CHECK:   Previous read of size 4 at {{.*}} by main thread{{.*}}:\n-// CHECK:     #0 main {{.*}}write_in_reader_lock.cc:23\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/g/GCCcore/GCCcore-6.3.0_fix-sanitizer_linux.patch": "The following error was encountered when building GCCcore-6.3.0:\n\n../../../../libsanitizer/sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cc: In function \u2018int __sanitizer::TracerThread(void*)\u2019:\n../../../../libsanitizer/sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cc:270:22: error: aggregate \u2018sigaltstack handler_stack\u2019 has incomplete type and cannot be defined\n   struct sigaltstack handler_stack;\n\nThis happened due to a glibc patch: https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=7553131847151d04d58a02300673f13d73861cbb\n\nThe bug was been fixed upstream and was cherry picked in https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81066 back to 6.3.0.\nPatch taken from: https://github.com/gcc-mirror/gcc/commit/72edc2c02f8b4768ad660f46a1c7e2400c0a8e06.patch\n\nFrom 72edc2c02f8b4768ad660f46a1c7e2400c0a8e06 Mon Sep 17 00:00:00 2001\nFrom: jakub <jakub@138bc75d-0d04-0410-961f-82ee72b054a4>\nDate: Mon, 17 Jul 2017 19:41:08 +0000\nSubject: [PATCH] \tBackported from mainline \t2017-07-14  Jakub\n Jelinek  <jakub@redhat.com>\n\n\tPR sanitizer/81066\n\t* sanitizer_common/sanitizer_linux.h: Cherry-pick upstream r307969.\n\t* sanitizer_common/sanitizer_linux.cc: Likewise.\n\t* sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cc: Likewise.\n\t* tsan/tsan_platform_linux.cc: Likewise.\n\n\ngit-svn-id: svn+ssh://gcc.gnu.org/svn/gcc/branches/gcc-7-branch@250287 138bc75d-0d04-0410-961f-82ee72b054a4\n---\n libsanitizer/ChangeLog                                | 11 +++++++++++\n libsanitizer/sanitizer_common/sanitizer_linux.cc      |  3 +--\n libsanitizer/sanitizer_common/sanitizer_linux.h       |  4 +---\n .../sanitizer_stoptheworld_linux_libcdep.cc           |  2 +-\n libsanitizer/tsan/tsan_platform_linux.cc              |  2 +-\n 5 files changed, 15 insertions(+), 7 deletions(-)\n\ndiff --git a/libsanitizer/sanitizer_common/sanitizer_linux.cc b/libsanitizer/sanitizer_common/sanitizer_linux.cc\nindex 806fcd5e2847..5b6f18602e7d 100644\n--- a/libsanitizer/sanitizer_common/sanitizer_linux.cc\n+++ b/libsanitizer/sanitizer_common/sanitizer_linux.cc\n@@ -605,8 +605,7 @@ uptr internal_prctl(int option, uptr arg2, uptr arg3, uptr arg4, uptr arg5) {\n }\n #endif\n \n-uptr internal_sigaltstack(const struct sigaltstack *ss,\n-                         struct sigaltstack *oss) {\n+uptr internal_sigaltstack(const void *ss, void *oss) {\n   return internal_syscall(SYSCALL(sigaltstack), (uptr)ss, (uptr)oss);\n }\n \ndiff --git a/libsanitizer/sanitizer_common/sanitizer_linux.h b/libsanitizer/sanitizer_common/sanitizer_linux.h\nindex 895bfc18195c..a42df5764052 100644\n--- a/libsanitizer/sanitizer_common/sanitizer_linux.h\n+++ b/libsanitizer/sanitizer_common/sanitizer_linux.h\n@@ -19,7 +19,6 @@\n #include \"sanitizer_platform_limits_posix.h\"\n \n struct link_map;  // Opaque type returned by dlopen().\n-struct sigaltstack;\n \n namespace __sanitizer {\n // Dirent structure for getdents(). Note that this structure is different from\n@@ -28,8 +27,7 @@ struct linux_dirent;\n \n // Syscall wrappers.\n uptr internal_getdents(fd_t fd, struct linux_dirent *dirp, unsigned int count);\n-uptr internal_sigaltstack(const struct sigaltstack* ss,\n-                          struct sigaltstack* oss);\n+uptr internal_sigaltstack(const void* ss, void* oss);\n uptr internal_sigprocmask(int how, __sanitizer_sigset_t *set,\n     __sanitizer_sigset_t *oldset);\n \ndiff --git a/libsanitizer/sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cc b/libsanitizer/sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cc\nindex 891386dc0ba7..234e8c652c67 100644\n--- a/libsanitizer/sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cc\n+++ b/libsanitizer/sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cc\n@@ -273,7 +273,7 @@ static int TracerThread(void* argument) {\n \n   // Alternate stack for signal handling.\n   InternalScopedBuffer<char> handler_stack_memory(kHandlerStackSize);\n-  struct sigaltstack handler_stack;\n+  stack_t handler_stack;\n   internal_memset(&handler_stack, 0, sizeof(handler_stack));\n   handler_stack.ss_sp = handler_stack_memory.data();\n   handler_stack.ss_size = kHandlerStackSize;\ndiff --git a/libsanitizer/tsan/tsan_platform_linux.cc b/libsanitizer/tsan/tsan_platform_linux.cc\nindex 2ed5718a12e3..6f972ab0dd64 100644\n--- a/libsanitizer/tsan/tsan_platform_linux.cc\n+++ b/libsanitizer/tsan/tsan_platform_linux.cc\n@@ -287,7 +287,7 @@ void InitializePlatform() {\n int ExtractResolvFDs(void *state, int *fds, int nfd) {\n #if SANITIZER_LINUX && !SANITIZER_ANDROID\n   int cnt = 0;\n-  __res_state *statp = (__res_state*)state;\n+  struct __res_state *statp = (struct __res_state*)state;\n   for (int i = 0; i < MAXNS && cnt < nfd; i++) {\n     if (statp->_u._ext.nsaddrs[i] && statp->_u._ext.nssocks[i] != -1)\n       fds[cnt++] = statp->_u._ext.nssocks[i];\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/l/likwid/pinomp-pthread-overload.patch": "--- src/pthread-overload/pthread-overload.c.orig\t2012-11-29 18:18:45.000000000 +0100\n+++ src/pthread-overload/pthread-overload.c\t2013-02-14 18:52:23.088378033 +0100\n@@ -1,235 +1,243 @@\n+\n /*\n- * =======================================================================================\n- *\n- *      Filename:  pthread-overload.c\n- *\n- *      Description:  Overloaded library for pthread_create call. \n- *                    Implements pinning of threads together with likwid-pin.\n- *\n- *      Version:   3.0\n- *      Released:  29.11.2012\n- *\n- *      Author:  Jan Treibig (jt), jan.treibig@gmail.com\n- *      Project:  likwid\n- *\n- *      Copyright (C) 2012 Jan Treibig \n- *\n- *      This program is free software: you can redistribute it and/or modify it under\n- *      the terms of the GNU General Public License as published by the Free Software\n- *      Foundation, either version 3 of the License, or (at your option) any later\n- *      version.\n- *\n- *      This program is distributed in the hope that it will be useful, but WITHOUT ANY\n- *      WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n- *      PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n- *\n- *      You should have received a copy of the GNU General Public License along with\n- *      this program.  If not, see <http://www.gnu.org/licenses/>.\n- *\n- * =======================================================================================\n+ * pthread_create overload function\n+ * Copyleft Michael Meier 2008 - released under GPL v2.\n+ * This will pin every thread that is created except the first one (because\n+ * that seems to be the \"master\" in OpenMP binaries created by Intel\n+ * Compilers).\n+ * It will automatically get its current CPUset from the system and use only\n+ * these CPUs in a round-robin way, so you will most likely want to combine\n+ * this with \"taskset\".\n+ *\n+ * Compile with something like:\n+ *   gcc -Wall -O2 -D_GNU_SOURCE -o ptoverride.so -shared -fPIC -ldl -lpthread ./pthread-overload.c\n+ * Use with something like:\n+ *   LD_PRELOAD=./ptoverride.so OMP_NUM_THREADS=2 taskset -c 0,2 ./youropenmpbinary\n+ *\n+ * If libpthread.so cannot be found, you can specify its location at\n+ * compile-time by adding the following parameter to the compile command:\n+ *   -DLIBPTHREADLOCATION=/where/is/libpthread.so\n+ *\n+ * Advanced users can alter the pinning behaviour to adapt it to different\n+ * OpenMP variants or hybrid programs. Three Environment Variables are\n+ * evaluated by the pinner for that purpose:\n+ *  PINOMP_MASK    is a decimal or hex (with leading 0x) number interpreted\n+ *                 as a bitmask. Threads that have their corresponding bit in\n+ *                 the mask set will not be pinned.\n+ *  PINOMP_SKIP    is a decimal number. The thread with that number will not\n+ *                 be pinned.\n+ *  PINOMP_CPUS    the CPUs to use, in the right order, seperated by commas\n+ *  PINOMP_VERBOSE is a decimal that sets the verbosity of debug output. defaults to 2.\n  */\n \n #include <stdio.h>\n #include <stdlib.h>\n-#include <stdint.h>\n #include <dlfcn.h>\n #include <sched.h>\n-#include <bits/pthreadtypes.h>\n #include <sys/types.h>\n-#include <errno.h>\n #include <dirent.h>\n #include <unistd.h>\n #include <string.h>\n \n-#ifdef COLOR\n-#include <textcolor.h>\n-#endif\n+extern int pthread_setaffinity_np(unsigned long th, int cpusetsize, cpu_set_t * cpuset);\n \n-#define STRINGIFY(x) #x\n-#define TOSTRING(x) STRINGIFY(x)\n-#define LLU_CAST  (unsigned long long)\n-\n-extern int pthread_setaffinity_np(pthread_t thread, size_t cpusetsize, const cpu_set_t *cpuset);\n+#define str(x) #x\n \n static char * sosearchpaths[] = {\n-#ifdef LIBPTHREAD\n-    TOSTRING(LIBPTHREAD),\n+#ifdef LIBPTHREADLOCATION\n+\tstr(LIBPTHREADLOCATION),\n #endif\n-    \"/lib64/tls/libpthread.so.0\",/* sles9 x86_64 */  \n-    \"libpthread.so.0\",           /* Ubuntu */\n-    NULL\n+\t\"/lib64/tls/libpthread.so.0\",\t/* sles9 x86_64 */\n+\t\"libpthread.so.0\",\t\t/* Ubuntu and other proper distributions */\n+\tNULL\n };\n+static int verblevel = -1;\n \n-int\n-pthread_create(pthread_t* thread,\n-        const pthread_attr_t* attr,\n-        void* (*start_routine)(void *),\n-        void * arg)\n+int pthread_create(void * thread, void * attr, void * (*start_routine)(void *), void * arg)\n {\n-    void *handle;\n-    char *error;\n-    int (*rptc) (pthread_t *, const pthread_attr_t *, void* (*start_routine)(void *), void *);\n-    int ret;\n-    static int reallpthrindex = 0;\n-    static int npinned = 0;\n-    static int ncalled = 0;\n-    static int silent = 0;\n-    static int pin_ids[MAX_NUM_THREADS];\n-    static uint64_t skipMask = 0;\n-\n-\n-    /* On first entry: Get Evironment Variable and initialize pin_ids */\n-    if (ncalled == 0) \n-    {\n-        char *str = getenv(\"LIKWID_SKIP\");\n-        char *token, *saveptr;\n-        char *delimiter = \",\";\n-        int i = 0;\n-        int ncpus = 0;\n-\n-        str = getenv(\"LIKWID_SKIP\");\n-        if (str != NULL) \n-        {\n-            skipMask = strtoul(str, &str, 10);\n-        }\n-        else \n-        {\n-            printf(\"[pthread wrapper] ERROR: Environment Variabel LIKWID_SKIP not set!\\n\");\n-        }\n-\n-        if ( skipMask == 0 )\n-        {\n-            dlerror();    /* Clear any existing error */\n-            dlsym(RTLD_DEFAULT,\"__kmpc_begin\");\n-\n-            if (( dlerror()) == NULL)  {\n-                skipMask = 0x1;\n-            }\n-        }\n-\n-        if (getenv(\"LIKWID_SILENT\") != NULL)\n-        {\n-            silent = 1;\n-        }\n-        else\n-        {\n-            color_on(BRIGHT, COLOR);\n-        }\n-\n-        if (!silent) \n-        {\n-            printf(\"[pthread wrapper] \");\n-        }\n-\n-        str = getenv(\"LIKWID_PIN\");\n-        if (str != NULL) \n-        {\n-            token = str;\n-            while (token) \n-            {\n-                token = strtok_r(str,delimiter,&saveptr);\n-                str = NULL;\n-                if (token) \n-                {\n-                    ncpus++;\n-                    pin_ids[i++] = strtoul(token, &token, 10);\n-                }\n-            }\n-        }\n-        else \n-        {\n-            printf(\"[pthread wrapper] ERROR: Environment Variabel LIKWID_PIN not set!\\n\");\n-        }\n-\n-        if (!silent) \n-        {\n-            printf(\"[pthread wrapper] PIN_MASK: \");\n-\n-            for (int i=0;i<ncpus;i++) \n-            {\n-                printf(\"%d->%d  \",i,pin_ids[i]); \n-            }\n-            printf(\"\\n\");\n-            printf(\"[pthread wrapper] SKIP MASK: 0x%llX\\n\",LLU_CAST skipMask);\n-        }\n-    } \n-    else\n-    {\n-#ifdef COLOR\n-        if (!silent) \n-        {\n-            color_on(BRIGHT, COLOR);\n-        }\n-#endif\n+  void *handle;\n+  char *error;\n+  int (*rptc) (void *, void *, void * (*start_routine)(void *), void *);\n+  int ret;\n+  static int reallpthrindex = 0;\n+  static int npinned = 0;\n+  static cpu_set_t mask;\n+  static int lastpin = 0;\n+  static pid_t mainpid;\n+  static unsigned long pinningskipmask = 0;\n+  static int useexplicitcpus = 0;\n+  static char * cpustring =  NULL;\n+  static char * curcpustr = NULL;\n+\n+  if (verblevel == -1) {\n+    char * PINOMP_VERBOSE = getenv(\"PINOMP_VERBOSE\");\n+    if (PINOMP_VERBOSE == NULL) {\n+      verblevel = 2;\n+    } else {\n+      verblevel = strtol(PINOMP_VERBOSE, NULL, 10);\n+      if (verblevel < 0) { verblevel = 0; }\n     }\n-\n-    /* Handle dll related stuff */\n-    do \n-    {\n-        handle = dlopen(sosearchpaths[reallpthrindex], RTLD_LAZY);\n-        if (handle) \n-        {\n-            break;\n-        }\n-        if (sosearchpaths[reallpthrindex] != NULL) \n-        {\n-            reallpthrindex++;\n-        }\n+  }\n+  if (npinned == 0) {\n+    char * PINOMP_CPUS = getenv(\"PINOMP_CPUS\");\n+    if (PINOMP_CPUS != NULL) {\n+      cpustring = strdup(PINOMP_CPUS);\n+      curcpustr = cpustring;\n+      useexplicitcpus = 1;\n     }\n-\n-    while (sosearchpaths[reallpthrindex] != NULL);\n-\n-    if (!handle) \n-    {\n-        printf(\"%s\\n\", dlerror());\n-        return -1;\n-    }\n-\n-    dlerror();    /* Clear any existing error */\n-    rptc = dlsym(handle, \"pthread_create\");\n-\n-    if ((error = dlerror()) != NULL)  \n-    {\n-        printf(\"%s\\n\", error);\n-        return -2;\n+    if (pinningskipmask == 0) { /* Could just as well use if (1) ... */\n+      char * PINOMP_MASK = getenv(\"PINOMP_MASK\");\n+      char * PINOMP_SKIP = getenv(\"PINOMP_SKIP\");\n+      if ((PINOMP_MASK == NULL) && (PINOMP_SKIP == NULL)) {\n+        pinningskipmask = 2; /* Default - makes it behave just like before, skipping the first thread */\n+      } else {\n+        if (PINOMP_MASK != NULL) {\n+          unsigned long toskip = strtoul(PINOMP_MASK, NULL, 16); /* accepts both 0x* and decimal on GNU! */\n+          pinningskipmask = toskip;\n+        }\n+        if (PINOMP_SKIP != NULL) {\n+          char * rest = PINOMP_SKIP;\n+          do {\n+            unsigned long toskip = strtoul(rest, &rest, 10);\n+            pinningskipmask |= (1UL << toskip);\n+            if (*rest != '\\0') { rest++; }\n+          } while (*rest != '\\0');\n+        }\n+      }\n+      if (verblevel > 1) {\n+        printf(\"[pthread wrapper] Pinning Skip Mask: 0x%lx\\n\", pinningskipmask);\n+      }\n     }\n-\n-    ret = (*rptc)(thread, attr, start_routine, arg);\n-\n-    /* After thread creation pin the thread */\n-    if (ret == 0) \n-    {\n-        cpu_set_t cpuset;\n-\n-        if ((ncalled<64) && (skipMask&(1ULL<<(ncalled)))) \n-        {\n-            if (!silent) \n-            {\n-                printf(\"\\tthreadid %lu -> SKIP \\n\", *thread);\n+    npinned++;\n+    CPU_ZERO(&mask);\n+    ret = sched_getaffinity(getpid(), sizeof(mask), &mask);\n+    if (ret) {\n+      printf(\"[pthread wrapper] WARNING: sched_get_affinity returned error code %d, cannot pin correctly.\\n\", ret);\n+    } else {\n+      int j;\n+      if (verblevel > 1) {\n+        printf(\"[pthread wrapper] Using CPUs: \");\n+      }\n+      for (j = 0; j < CPU_SETSIZE; j++) {\n+        if (CPU_ISSET(j, &mask)) {\n+          lastpin = j;\n+          if (verblevel > 1) {\n+            printf(\" %d\", j);\n+          }\n+        }\n+      }\n+      if (verblevel > 0) {\n+        printf(\"\\n[pthread wrapper] \");\n+      }\n+      mainpid = getpid();\n+      if ((pinningskipmask & 1UL) != 0) { /* npinned has already been increased so cannot be used! */\n+        if (verblevel > 0) {\n+          printf(\"Main PID: %d -> SKIP!\\n\", mainpid);\n+        }\n+      } else {\n+        cpu_set_t mymask;\n+        int usecpu;\n+        if (useexplicitcpus) {\n+          usecpu = strtoul(curcpustr, &curcpustr, 10);\n+          if ((curcpustr == NULL) || (*curcpustr == '\\0')) {\n+            curcpustr = cpustring;\n+          } else {\n+            curcpustr++;\n+            if ((curcpustr == NULL) || (*curcpustr == '\\0')) {\n+              curcpustr = cpustring;\n             }\n+          }\n+        } else {\n+          usecpu = ((lastpin + 1) % CPU_SETSIZE);\n+          while ((usecpu != lastpin) && (!CPU_ISSET(usecpu, &mask))) {\n+            usecpu = ((usecpu + 1) % CPU_SETSIZE);\n+          }\n+        }\n+        lastpin = usecpu;\n+        CPU_ZERO(&mymask);\n+        CPU_SET(usecpu, &mymask);\n+        if (verblevel > 0) {\n+          printf(\"Main PID: %d -> core %d - \", mainpid, usecpu);\n+        }\n+        if (sched_setaffinity(mainpid, sizeof(mymask), &mymask)) {\n+          perror(\"sched_setaffinity failed\");\n+        } else {\n+          if (verblevel > 0) {\n+            printf(\"OK\\n\");\n+          }\n         }\n-        else \n-        {\n-            CPU_ZERO(&cpuset);\n-            CPU_SET(pin_ids[npinned], &cpuset);\n-\n-            pthread_setaffinity_np(*thread, sizeof(cpu_set_t), &cpuset);\n-\n-            if (!silent)\n-            {\n-                printf(\"\\tthreadid %lu -> core %d - OK\\n\", *thread, pin_ids[npinned]);\n-#ifdef COLOR\n-                color_reset();\n-#endif\n-            }\n-            npinned++;\n+      }\n+    }\n+  }\n+  \n+  if (verblevel > 0) {\n+    printf(\"[pthread wrapper] \");\n+  }\n+  do {\n+    handle = dlopen(sosearchpaths[reallpthrindex], RTLD_LAZY);\n+    if (handle) {\n+      if (verblevel > 1) {\n+        printf(\"[Notice: Using %s] \", sosearchpaths[reallpthrindex]);\n+      }\n+      break;\n+    }\n+    if (sosearchpaths[reallpthrindex] != NULL) {\n+      reallpthrindex++;\n+    }\n+  } while (sosearchpaths[reallpthrindex] != NULL);\n+  if (!handle) {\n+    printf(\"%s\\n\", dlerror());\n+    return -1;\n+  }\n+  dlerror();    /* Clear any existing error */\n+  *(void **) (&rptc) = dlsym(handle, \"pthread_create\");\n+  if ((error = dlerror()) != NULL)  {\n+    printf(\"%s\\n\", error);\n+    return -2;\n+  }\n+  ret = (*rptc)(thread, attr, start_routine, arg);\n+  if (ret == 0) {  /* Successful thread creation. Pin the bastard. */\n+    unsigned long * pid = (unsigned long *)thread;\n+    if ((pinningskipmask & (1UL << npinned)) != 0) {\n+      if (verblevel > 0) {\n+        printf(\"threadid 0x%lx -> SKIP!\\n\", *pid);\n+      }\n+    } else {\n+      cpu_set_t mymask;\n+      int usecpu;\n+      if (useexplicitcpus) {\n+        usecpu = strtoul(curcpustr, &curcpustr, 10);\n+        if ((curcpustr == NULL) || (*curcpustr == '\\0')) {\n+          curcpustr = cpustring;\n+        } else {\n+          curcpustr++;\n+          if ((curcpustr == NULL) || (*curcpustr == '\\0')) {\n+            curcpustr = cpustring;\n+          }\n+        }\n+      } else {\n+        usecpu = ((lastpin + 1) % CPU_SETSIZE);\n+        while ((usecpu != lastpin) && (!CPU_ISSET(usecpu, &mask))) {\n+          usecpu = ((usecpu + 1) % CPU_SETSIZE);\n+        }\n+      }\n+      lastpin = usecpu;\n+      CPU_ZERO(&mymask);\n+      CPU_SET(usecpu, &mymask);\n+      if (verblevel > 0) {\n+        printf(\"threadid 0x%lx -> core %d - \", *pid, usecpu);\n+      }\n+      if (pthread_setaffinity_np(*pid, sizeof(mymask), &mymask)) {\n+        perror(\"pthread_setaffinity_np failed\");\n+      } else {\n+        if (verblevel > 0) {\n+          printf(\"OK\\n\");\n         }\n+      }\n     }\n-\n-    fflush(stdout);\n-    ncalled++;\n-    dlclose(handle);\n-\n-    return ret;\n+  }\n+  npinned++;\n+  dlclose(handle);\n+  return ret;\n }\n \n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.8.4-GCC-4.9.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.4'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.9.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['3c602955fa16d03806ec704e089e2a14fe092d7fe7d444972f4a99407f645661']\n\ndependencies = [('hwloc', '1.10.0')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.8.1-GCC-4.8.3.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = \"1.8.1\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.3'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['1ebeb5af9db47f1f0bb63d14265d34a7be0d99bb34a0b2a41c3e926f3d27fd50']\n\ndependencies = [('hwloc', '1.9')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.6.5-GCC-4.8.1-no-OFED.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.5'\nversionsuffix = \"-no-OFED\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.1'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = [\n    'OpenMPI-1.6.5-vt_cupti_events.patch',\n]\nchecksums = [\n    'ac308dc38e77c622aedea5f3fd368c800b6636d0500f2124c36a505a65806559',  # openmpi-1.6.5.tar.gz\n    '7de06818f3e83e64ca004458acac679e95ba1c658f051e6a91db2b726c53f9bc',  # OpenMPI-1.6.5-vt_cupti_events.patch\n]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --without-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\nlocal_libs = ['mpi_cxx', 'mpi_f77', 'mpi_f90', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.8.6-GNU-4.9.3-2.25.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.6'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GNU', 'version': '4.9.3-2.25'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['167bdc76b44b7961871ea5973ffc545035d44f577152c4a9ab8d2be795ce27d1']\n\ndependencies = [('hwloc', '1.11.0')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.6.5-GCC-4.8.2-no-OFED.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.5'\nversionsuffix = '-no-OFED'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = [\n    'OpenMPI-1.6.5-vt_cupti_events.patch',\n]\nchecksums = [\n    'ac308dc38e77c622aedea5f3fd368c800b6636d0500f2124c36a505a65806559',  # openmpi-1.6.5.tar.gz\n    '7de06818f3e83e64ca004458acac679e95ba1c658f051e6a91db2b726c53f9bc',  # OpenMPI-1.6.5-vt_cupti_events.patch\n]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --without-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\nconfigopts += '--with-hwloc=$EBROOTHWLOC '\n\ndependencies = [('hwloc', '1.8.1')]\n\nlocal_libs = ['mpi_cxx', 'mpi_f77', 'mpi_f90', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.8.3-GCC-4.9.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = \"1.8.3\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.9.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['b7487ee77bde880308429a72f56612b840690cc3b927be4bf191677b9a2ef5a8']\n\ndependencies = [('hwloc', '1.10.0')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.6.5-GCC-4.8.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.5'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = [\n    'OpenMPI-1.6.5-vt_cupti_events.patch',\n]\nchecksums = [\n    'ac308dc38e77c622aedea5f3fd368c800b6636d0500f2124c36a505a65806559',  # openmpi-1.6.5.tar.gz\n    '7de06818f3e83e64ca004458acac679e95ba1c658f051e6a91db2b726c53f9bc',  # OpenMPI-1.6.5-vt_cupti_events.patch\n]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\nconfigopts += '--with-hwloc=$EBROOTHWLOC '\n\ndependencies = [('hwloc', '1.8.1')]\n\n# needed for --with-openib\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_f77', 'mpi_f90', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.6.5-GCC-4.8.3.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.5'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.3'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = [\n    'OpenMPI-1.6.5-vt_cupti_events.patch',\n]\nchecksums = [\n    'ac308dc38e77c622aedea5f3fd368c800b6636d0500f2124c36a505a65806559',  # openmpi-1.6.5.tar.gz\n    '7de06818f3e83e64ca004458acac679e95ba1c658f051e6a91db2b726c53f9bc',  # OpenMPI-1.6.5-vt_cupti_events.patch\n]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\nconfigopts += '--with-hwloc=$EBROOTHWLOC '\n\ndependencies = [('hwloc', '1.8.1')]\n\n# needed for --with-openib\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_f77', 'mpi_f90', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.8.4-GCC-4.8.4.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = \"1.8.4\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.4'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['3c602955fa16d03806ec704e089e2a14fe092d7fe7d444972f4a99407f645661']\n\ndependencies = [('hwloc', '1.10.1')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-2.1.1-gcccuda-2017b.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '2.1.1'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'gcccuda', 'version': '2017b'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = ['OpenMPI-2.1_fix-ib-query.patch']\nchecksums = [\n    'afe4bef3c4378bc76eea96c623d5aa4c1c98b9e057d281c646e68869292a77dc',  # openmpi-2.1.1.tar.gz\n    '662d7ef1d0cd0890d2dc4ecb5243012be29bf6b4003da0f006e7cd2125d40e4c',  # OpenMPI-2.1_fix-ib-query.patch\n]\n\ndependencies = [('hwloc', '1.11.7')]\n\nconfigopts = '--enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--with-cuda=$CUDA_HOME '     # CUDA-aware build; N.B. --disable-dlopen is incompatible\nconfigopts += '--without-ucx '  # hard disable UCX, to dance around bug (https://github.com/open-mpi/ompi/issues/4345)\n\n# to enable SLURM integration (site-specific)\n# configopts += '--with-slurm --with-pmi=/usr/include/slurm --with-pmi-libdir=/usr'\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = [\"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.7.3-GCC-4.8.2.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = \"1.7.3\"\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.2'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = ['OpenMPI-%(version)s-vt_cupti_events.patch']\nchecksums = [\n    'bcddffc1e2bee64790205c95bd7dff62af43ea1276ac37987da44ed5ad815874',  # openmpi-1.7.3.tar.gz\n    'c155b47f44497658aecc56bb40fc93de8a2e3986be638679946e6e41cf047b3f',  # OpenMPI-1.7.3-vt_cupti_events.patch\n]\n\ndependencies = [('hwloc', '1.7.2')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.8.5-GNU-4.9.2-2.25.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.5'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GNU', 'version': '4.9.2-2.25'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['91de8828f7257b6c011a9015321c0fd027782ee04a269c74194f2e3c837e28c8']\n\ndependencies = [('hwloc', '1.10.1')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.8.8-GNU-4.9.3-2.25.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.8.8'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GNU', 'version': '4.9.3-2.25'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\nchecksums = ['ac0893811fdcc62f75036cb8ce266e7e5e3d8ce82a7adc2f333870a0da171bff']\n\ndependencies = [('hwloc', '1.11.0')]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_mpifh', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-2.1.2-gcccuda-2018a.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '2.1.2'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'gcccuda', 'version': '2018a'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = ['OpenMPI-2.1_fix-ib-query.patch']\nchecksums = [\n    'e5bf7b2d7517f5cb7c9e1fed15d2df2da501669072477b21a513e892a22663bc',  # openmpi-2.1.2.tar.gz\n    '662d7ef1d0cd0890d2dc4ecb5243012be29bf6b4003da0f006e7cd2125d40e4c',  # OpenMPI-2.1_fix-ib-query.patch\n]\n\ndependencies = [('hwloc', '1.11.8')]\n\nconfigopts = '--enable-shared --enable-mpi-thread-multiple --with-verbs '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--with-hwloc=$EBROOTHWLOC '  # hwloc support\nconfigopts += '--with-cuda=$CUDA_HOME '     # CUDA-aware build; N.B. --disable-dlopen is incompatible\nconfigopts += '--without-ucx '  # hard disable UCX, to dance around bug (https://github.com/open-mpi/ompi/issues/4345)\n\n# to enable SLURM integration (site-specific)\n# configopts += '--with-slurm --with-pmi=/usr/include/slurm --with-pmi-libdir=/usr'\n\n# needed for --with-verbs\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = [\"mpi_mpifh\", \"mpi\", \"ompitrace\", \"open-pal\", \"open-rte\"]\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-config\", \"mpif\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenMPI/OpenMPI-1.6.5-GCC-4.8.1.eb": "easyblock = 'ConfigureMake'\n\nname = 'OpenMPI'\nversion = '1.6.5'\n\nhomepage = 'https://www.open-mpi.org/'\ndescription = \"\"\"The Open MPI Project is an open source MPI-2 implementation.\"\"\"\n\ntoolchain = {'name': 'GCC', 'version': '4.8.1'}\n\nsource_urls = ['https://www.open-mpi.org/software/ompi/v%(version_major_minor)s/downloads']\nsources = [SOURCELOWER_TAR_GZ]\npatches = [\n    'OpenMPI-1.6.5-vt_cupti_events.patch',\n]\nchecksums = [\n    'ac308dc38e77c622aedea5f3fd368c800b6636d0500f2124c36a505a65806559',  # openmpi-1.6.5.tar.gz\n    '7de06818f3e83e64ca004458acac679e95ba1c658f051e6a91db2b726c53f9bc',  # OpenMPI-1.6.5-vt_cupti_events.patch\n]\n\nconfigopts = '--with-threads=posix --enable-shared --enable-mpi-thread-multiple --with-openib '\nconfigopts += '--enable-mpirun-prefix-by-default '  # suppress failure modes in relation to mpirun path\nconfigopts += '--disable-dlopen '  # statically link component, don't do dynamic loading\n\n# needed for --with-openib\nosdependencies = [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')]\n\nlocal_libs = ['mpi_cxx', 'mpi_f77', 'mpi_f90', 'mpi', 'ompitrace', 'open-pal', 'open-rte',\n              'vt', 'vt-hyb', 'vt-mpi', 'vt-mpi-unify']\nsanity_check_paths = {\n    'files': [\"bin/%s\" % x for x in [\"ompi_info\", \"opal_wrapper\", \"orterun\"]] +\n             [\"lib/lib%s.%s\" % (x, SHLIB_EXT) for x in local_libs] +\n             [\"include/%s.h\" % x for x in [\"mpi-ext\", \"mpif-common\", \"mpif-config\", \"mpif\",\n                                           \"mpif-mpi-io\", \"mpi\", \"mpi_portable_platform\"]],\n    'dirs': [\"include/openmpi/ompi/mpi/cxx\"],\n}\n\nmoduleclass = 'mpi'\n",
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/o/OpenBabel/OpenBabel-2.4.1_fix-Python-3.patch": "fix issues causing test failures with Python 3.6\npartially inspired by https://bugs.archlinux.org/task/52409\nauthor: Kenneth Hoste (HPC-UGent)\n--- openbabel-2.4.1/scripts/python/openbabel.py.orig\t2019-02-13 17:59:40.515899728 +0100\n+++ openbabel-2.4.1/scripts/python/openbabel.py\t2019-02-13 18:00:22.775794400 +0100\n@@ -3,7 +3,11 @@\n   try:\n     import dl\n   except ImportError:\n-    import DLFCN as dl\n+    try:\n+        import DLFCN as dl\n+    except ImportError:\n+        # fallback for Python 3.x\n+        import os as dl\n   sys.setdlopenflags(sys.getdlopenflags() | dl.RTLD_GLOBAL)\n # This file was automatically generated by SWIG (http://www.swig.org).\n # Version 3.0.10\n--- openbabel-2.4.1/test/testpdbformat.py.orig\t2016-03-02 22:09:51.000000000 +0100\n+++ openbabel-2.4.1/test/testpdbformat.py\t2019-02-13 17:50:27.917372676 +0100\n@@ -24,12 +24,12 @@\n \n     def testInsertionCodes(self):\n         \"\"\"\n-\tTesting a PDB entry with insertion codes to distinguish residues\n-\tupon conversion to FASTA.\n+    Testing a PDB entry with insertion codes to distinguish residues\n+    upon conversion to FASTA.\n         \"\"\"\n         self.canFindExecutable(\"babel\")\n \n-\tself.entryPDBwithInsertioncodes=\"\"\"ATOM    406  N   VAL L  29      58.041  17.797  48.254  1.00  0.00           N  \n+        self.entryPDBwithInsertioncodes=\"\"\"ATOM    406  N   VAL L  29      58.041  17.797  48.254  1.00  0.00           N  \n ATOM    407  CA  VAL L  29      57.124  18.088  47.170  1.00  0.00           C  \n ATOM    408  C   VAL L  29      55.739  17.571  47.538  1.00  0.00           C  \n ATOM    409  O   VAL L  29      55.535  16.362  47.550  1.00  0.00           O  \n@@ -100,9 +100,9 @@\n ATOM    474  HE2 TYR L  32      48.145  19.172  44.648  1.00  0.00           H  \n ATOM    475  HH  TYR L  32      46.462  17.658  44.280  1.00  0.00           H  \n \"\"\"\n-\toutput, error = run_exec(self.entryPDBwithInsertioncodes,\n-\t\t\t\t     \"babel -ipdb -ofasta\")\n-\tself.assertEqual(output.rstrip().rsplit(\"\\n\",1)[1], \"VSSSY\")\n+        output, error = run_exec(self.entryPDBwithInsertioncodes,\n+                                 \"babel -ipdb -ofasta\")\n+        self.assertEqual(output.rstrip().rsplit(\"\\n\",1)[1], \"VSSSY\")\n \n if __name__ == \"__main__\":\n     testsuite = []\n"
    },
    "skipped": [
        "/tmp/vanessa/spack-stage/spack-stage-py-easybuild-easyconfigs-4.0.0-r5scrrsmxj2ittkiaseese6mldbiheut/spack-src/easybuild/easyconfigs/g/Grace/Grace-5.1.25-5build1.patch"
    ],
    "total_files": 13069
}