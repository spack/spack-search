{
    "matches": {
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/setup.py": "# Autodetecting setup.py script for building the Python extensions\n\nimport argparse\nimport importlib._bootstrap\nimport importlib.machinery\nimport importlib.util\nimport os\nimport re\nimport sys\nimport sysconfig\nfrom glob import glob, escape\n\nfrom distutils import log\nfrom distutils.command.build_ext import build_ext\nfrom distutils.command.build_scripts import build_scripts\nfrom distutils.command.install import install\nfrom distutils.command.install_lib import install_lib\nfrom distutils.core import Extension, setup\nfrom distutils.errors import CCompilerError, DistutilsError\nfrom distutils.spawn import find_executable\n\n\n# Compile extensions used to test Python?\nTEST_EXTENSIONS = True\n\n# This global variable is used to hold the list of modules to be disabled.\nDISABLED_MODULE_LIST = []\n\n\ndef get_platform():\n    # Cross compiling\n    if \"_PYTHON_HOST_PLATFORM\" in os.environ:\n        return os.environ[\"_PYTHON_HOST_PLATFORM\"]\n\n    # Get value of sys.platform\n    if sys.platform.startswith('osf1'):\n        return 'osf1'\n    return sys.platform\n\n\nCROSS_COMPILING = (\"_PYTHON_HOST_PLATFORM\" in os.environ)\nHOST_PLATFORM = get_platform()\nMS_WINDOWS = (HOST_PLATFORM == 'win32')\nCYGWIN = (HOST_PLATFORM == 'cygwin')\nMACOS = (HOST_PLATFORM == 'darwin')\nAIX = (HOST_PLATFORM.startswith('aix'))\nVXWORKS = ('vxworks' in HOST_PLATFORM)\n\n\nSUMMARY = \"\"\"\nPython is an interpreted, interactive, object-oriented programming\nlanguage. It is often compared to Tcl, Perl, Scheme or Java.\n\nPython combines remarkable power with very clear syntax. It has\nmodules, classes, exceptions, very high level dynamic data types, and\ndynamic typing. There are interfaces to many system calls and\nlibraries, as well as to various windowing systems (X11, Motif, Tk,\nMac, MFC). New built-in modules are easily written in C or C++. Python\nis also usable as an extension language for applications that need a\nprogrammable interface.\n\nThe Python implementation is portable: it runs on many brands of UNIX,\non Windows, DOS, Mac, Amiga... If your favorite system isn't\nlisted here, it may still be supported, if there's a C compiler for\nit. Ask around on comp.lang.python -- or just try compiling Python\nyourself.\n\"\"\"\n\nCLASSIFIERS = \"\"\"\nDevelopment Status :: 6 - Mature\nLicense :: OSI Approved :: Python Software Foundation License\nNatural Language :: English\nProgramming Language :: C\nProgramming Language :: Python\nTopic :: Software Development\n\"\"\"\n\n\n# Set common compiler and linker flags derived from the Makefile,\n# reserved for building the interpreter and the stdlib modules.\n# See bpo-21121 and bpo-35257\ndef set_compiler_flags(compiler_flags, compiler_py_flags_nodist):\n    flags = sysconfig.get_config_var(compiler_flags)\n    py_flags_nodist = sysconfig.get_config_var(compiler_py_flags_nodist)\n    sysconfig.get_config_vars()[compiler_flags] = flags + ' ' + py_flags_nodist\n\n\ndef add_dir_to_list(dirlist, dir):\n    \"\"\"Add the directory 'dir' to the list 'dirlist' (after any relative\n    directories) if:\n\n    1) 'dir' is not already in 'dirlist'\n    2) 'dir' actually exists, and is a directory.\n    \"\"\"\n    if dir is None or not os.path.isdir(dir) or dir in dirlist:\n        return\n    for i, path in enumerate(dirlist):\n        if not os.path.isabs(path):\n            dirlist.insert(i + 1, dir)\n            return\n    dirlist.insert(0, dir)\n\n\ndef sysroot_paths(make_vars, subdirs):\n    \"\"\"Get the paths of sysroot sub-directories.\n\n    * make_vars: a sequence of names of variables of the Makefile where\n      sysroot may be set.\n    * subdirs: a sequence of names of subdirectories used as the location for\n      headers or libraries.\n    \"\"\"\n\n    dirs = []\n    for var_name in make_vars:\n        var = sysconfig.get_config_var(var_name)\n        if var is not None:\n            m = re.search(r'--sysroot=([^\"]\\S*|\"[^\"]+\")', var)\n            if m is not None:\n                sysroot = m.group(1).strip('\"')\n                for subdir in subdirs:\n                    if os.path.isabs(subdir):\n                        subdir = subdir[1:]\n                    path = os.path.join(sysroot, subdir)\n                    if os.path.isdir(path):\n                        dirs.append(path)\n                break\n    return dirs\n\nMACOS_SDK_ROOT = None\n\ndef macosx_sdk_root():\n    \"\"\"Return the directory of the current macOS SDK.\n\n    If no SDK was explicitly configured, call the compiler to find which\n    include files paths are being searched by default.  Use '/' if the\n    compiler is searching /usr/include (meaning system header files are\n    installed) or use the root of an SDK if that is being searched.\n    (The SDK may be supplied via Xcode or via the Command Line Tools).\n    The SDK paths used by Apple-supplied tool chains depend on the\n    setting of various variables; see the xcrun man page for more info.\n    \"\"\"\n    global MACOS_SDK_ROOT\n\n    # If already called, return cached result.\n    if MACOS_SDK_ROOT:\n        return MACOS_SDK_ROOT\n\n    cflags = sysconfig.get_config_var('CFLAGS')\n    m = re.search(r'-isysroot\\s*(\\S+)', cflags)\n    if m is not None:\n        MACOS_SDK_ROOT = m.group(1)\n    else:\n        MACOS_SDK_ROOT = '/'\n        cc = sysconfig.get_config_var('CC')\n        tmpfile = '/tmp/setup_sdk_root.%d' % os.getpid()\n        try:\n            os.unlink(tmpfile)\n        except:\n            pass\n        ret = os.system('%s -E -v - </dev/null 2>%s 1>/dev/null' % (cc, tmpfile))\n        in_incdirs = False\n        try:\n            if ret >> 8 == 0:\n                with open(tmpfile) as fp:\n                    for line in fp.readlines():\n                        if line.startswith(\"#include <...>\"):\n                            in_incdirs = True\n                        elif line.startswith(\"End of search list\"):\n                            in_incdirs = False\n                        elif in_incdirs:\n                            line = line.strip()\n                            if line == '/usr/include':\n                                MACOS_SDK_ROOT = '/'\n                            elif line.endswith(\".sdk/usr/include\"):\n                                MACOS_SDK_ROOT = line[:-12]\n        finally:\n            os.unlink(tmpfile)\n\n    return MACOS_SDK_ROOT\n\n\ndef is_macosx_sdk_path(path):\n    \"\"\"\n    Returns True if 'path' can be located in an OSX SDK\n    \"\"\"\n    return ( (path.startswith('/usr/') and not path.startswith('/usr/local'))\n                or path.startswith('/System/')\n                or path.startswith('/Library/') )\n\n\ndef find_file(filename, std_dirs, paths):\n    \"\"\"Searches for the directory where a given file is located,\n    and returns a possibly-empty list of additional directories, or None\n    if the file couldn't be found at all.\n\n    'filename' is the name of a file, such as readline.h or libcrypto.a.\n    'std_dirs' is the list of standard system directories; if the\n        file is found in one of them, no additional directives are needed.\n    'paths' is a list of additional locations to check; if the file is\n        found in one of them, the resulting list will contain the directory.\n    \"\"\"\n    if MACOS:\n        # Honor the MacOSX SDK setting when one was specified.\n        # An SDK is a directory with the same structure as a real\n        # system, but with only header files and libraries.\n        sysroot = macosx_sdk_root()\n\n    # Check the standard locations\n    for dir in std_dirs:\n        f = os.path.join(dir, filename)\n\n        if MACOS and is_macosx_sdk_path(dir):\n            f = os.path.join(sysroot, dir[1:], filename)\n\n        if os.path.exists(f): return []\n\n    # Check the additional directories\n    for dir in paths:\n        f = os.path.join(dir, filename)\n\n        if MACOS and is_macosx_sdk_path(dir):\n            f = os.path.join(sysroot, dir[1:], filename)\n\n        if os.path.exists(f):\n            return [dir]\n\n    # Not found anywhere\n    return None\n\n\ndef find_library_file(compiler, libname, std_dirs, paths):\n    result = compiler.find_library_file(std_dirs + paths, libname)\n    if result is None:\n        return None\n\n    if MACOS:\n        sysroot = macosx_sdk_root()\n\n    # Check whether the found file is in one of the standard directories\n    dirname = os.path.dirname(result)\n    for p in std_dirs:\n        # Ensure path doesn't end with path separator\n        p = p.rstrip(os.sep)\n\n        if MACOS and is_macosx_sdk_path(p):\n            # Note that, as of Xcode 7, Apple SDKs may contain textual stub\n            # libraries with .tbd extensions rather than the normal .dylib\n            # shared libraries installed in /.  The Apple compiler tool\n            # chain handles this transparently but it can cause problems\n            # for programs that are being built with an SDK and searching\n            # for specific libraries.  Distutils find_library_file() now\n            # knows to also search for and return .tbd files.  But callers\n            # of find_library_file need to keep in mind that the base filename\n            # of the returned SDK library file might have a different extension\n            # from that of the library file installed on the running system,\n            # for example:\n            #   /Applications/Xcode.app/Contents/Developer/Platforms/\n            #       MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/\n            #       usr/lib/libedit.tbd\n            # vs\n            #   /usr/lib/libedit.dylib\n            if os.path.join(sysroot, p[1:]) == dirname:\n                return [ ]\n\n        if p == dirname:\n            return [ ]\n\n    # Otherwise, it must have been in one of the additional directories,\n    # so we have to figure out which one.\n    for p in paths:\n        # Ensure path doesn't end with path separator\n        p = p.rstrip(os.sep)\n\n        if MACOS and is_macosx_sdk_path(p):\n            if os.path.join(sysroot, p[1:]) == dirname:\n                return [ p ]\n\n        if p == dirname:\n            return [p]\n    else:\n        assert False, \"Internal error: Path not found in std_dirs or paths\"\n\n\ndef find_module_file(module, dirlist):\n    \"\"\"Find a module in a set of possible folders. If it is not found\n    return the unadorned filename\"\"\"\n    list = find_file(module, [], dirlist)\n    if not list:\n        return module\n    if len(list) > 1:\n        log.info(\"WARNING: multiple copies of %s found\", module)\n    return os.path.join(list[0], module)\n\n\nclass PyBuildExt(build_ext):\n\n    def __init__(self, dist):\n        build_ext.__init__(self, dist)\n        self.srcdir = None\n        self.lib_dirs = None\n        self.inc_dirs = None\n        self.config_h_vars = None\n        self.failed = []\n        self.failed_on_import = []\n        self.missing = []\n        if '-j' in os.environ.get('MAKEFLAGS', ''):\n            self.parallel = True\n\n    def add(self, ext):\n        self.extensions.append(ext)\n\n    def build_extensions(self):\n        self.srcdir = sysconfig.get_config_var('srcdir')\n        if not self.srcdir:\n            # Maybe running on Windows but not using CYGWIN?\n            raise ValueError(\"No source directory; cannot proceed.\")\n        self.srcdir = os.path.abspath(self.srcdir)\n\n        # Detect which modules should be compiled\n        self.detect_modules()\n\n        # Remove modules that are present on the disabled list\n        extensions = [ext for ext in self.extensions\n                      if ext.name not in DISABLED_MODULE_LIST]\n        # move ctypes to the end, it depends on other modules\n        ext_map = dict((ext.name, i) for i, ext in enumerate(extensions))\n        if \"_ctypes\" in ext_map:\n            ctypes = extensions.pop(ext_map[\"_ctypes\"])\n            extensions.append(ctypes)\n        self.extensions = extensions\n\n        # Fix up the autodetected modules, prefixing all the source files\n        # with Modules/.\n        moddirlist = [os.path.join(self.srcdir, 'Modules')]\n\n        # Fix up the paths for scripts, too\n        self.distribution.scripts = [os.path.join(self.srcdir, filename)\n                                     for filename in self.distribution.scripts]\n\n        # Python header files\n        headers = [sysconfig.get_config_h_filename()]\n        headers += glob(os.path.join(escape(sysconfig.get_path('include')), \"*.h\"))\n\n        # The sysconfig variables built by makesetup that list the already\n        # built modules and the disabled modules as configured by the Setup\n        # files.\n        sysconf_built = sysconfig.get_config_var('MODBUILT_NAMES').split()\n        sysconf_dis = sysconfig.get_config_var('MODDISABLED_NAMES').split()\n\n        mods_built = []\n        mods_disabled = []\n        for ext in self.extensions:\n            ext.sources = [ find_module_file(filename, moddirlist)\n                            for filename in ext.sources ]\n            if ext.depends is not None:\n                ext.depends = [find_module_file(filename, moddirlist)\n                               for filename in ext.depends]\n            else:\n                ext.depends = []\n            # re-compile extensions if a header file has been changed\n            ext.depends.extend(headers)\n\n            # If a module has already been built or has been disabled in the\n            # Setup files, don't build it here.\n            if ext.name in sysconf_built:\n                mods_built.append(ext)\n            if ext.name in sysconf_dis:\n                mods_disabled.append(ext)\n\n        mods_configured = mods_built + mods_disabled\n        if mods_configured:\n            self.extensions = [x for x in self.extensions if x not in\n                               mods_configured]\n            # Remove the shared libraries built by a previous build.\n            for ext in mods_configured:\n                fullpath = self.get_ext_fullpath(ext.name)\n                if os.path.exists(fullpath):\n                    os.unlink(fullpath)\n\n        # When you run \"make CC=altcc\" or something similar, you really want\n        # those environment variables passed into the setup.py phase.  Here's\n        # a small set of useful ones.\n        compiler = os.environ.get('CC')\n        args = {}\n        # unfortunately, distutils doesn't let us provide separate C and C++\n        # compilers\n        if compiler is not None:\n            (ccshared,cflags) = sysconfig.get_config_vars('CCSHARED','CFLAGS')\n            args['compiler_so'] = compiler + ' ' + ccshared + ' ' + cflags\n        self.compiler.set_executables(**args)\n\n        build_ext.build_extensions(self)\n\n        for ext in self.extensions:\n            self.check_extension_import(ext)\n\n        longest = max([len(e.name) for e in self.extensions], default=0)\n        if self.failed or self.failed_on_import:\n            all_failed = self.failed + self.failed_on_import\n            longest = max(longest, max([len(name) for name in all_failed]))\n\n        def print_three_column(lst):\n            lst.sort(key=str.lower)\n            # guarantee zip() doesn't drop anything\n            while len(lst) % 3:\n                lst.append(\"\")\n            for e, f, g in zip(lst[::3], lst[1::3], lst[2::3]):\n                print(\"%-*s   %-*s   %-*s\" % (longest, e, longest, f,\n                                              longest, g))\n\n        if self.missing:\n            print()\n            print(\"Python build finished successfully!\")\n            print(\"The necessary bits to build these optional modules were not \"\n                  \"found:\")\n            print_three_column(self.missing)\n            print(\"To find the necessary bits, look in setup.py in\"\n                  \" detect_modules() for the module's name.\")\n            print()\n\n        if mods_built:\n            print()\n            print(\"The following modules found by detect_modules() in\"\n            \" setup.py, have been\")\n            print(\"built by the Makefile instead, as configured by the\"\n            \" Setup files:\")\n            print_three_column([ext.name for ext in mods_built])\n            print()\n\n        if mods_disabled:\n            print()\n            print(\"The following modules found by detect_modules() in\"\n            \" setup.py have not\")\n            print(\"been built, they are *disabled* in the Setup files:\")\n            print_three_column([ext.name for ext in mods_disabled])\n            print()\n\n        if self.failed:\n            failed = self.failed[:]\n            print()\n            print(\"Failed to build these modules:\")\n            print_three_column(failed)\n            print()\n\n        if self.failed_on_import:\n            failed = self.failed_on_import[:]\n            print()\n            print(\"Following modules built successfully\"\n                  \" but were removed because they could not be imported:\")\n            print_three_column(failed)\n            print()\n\n        if any('_ssl' in l\n               for l in (self.missing, self.failed, self.failed_on_import)):\n            print()\n            print(\"Could not build the ssl module!\")\n            print(\"Python requires an OpenSSL 1.0.2 or 1.1 compatible \"\n                  \"libssl with X509_VERIFY_PARAM_set1_host().\")\n            print(\"LibreSSL 2.6.4 and earlier do not provide the necessary \"\n                  \"APIs, https://github.com/libressl-portable/portable/issues/381\")\n            print()\n\n    def build_extension(self, ext):\n\n        if ext.name == '_ctypes':\n            if not self.configure_ctypes(ext):\n                self.failed.append(ext.name)\n                return\n\n        try:\n            build_ext.build_extension(self, ext)\n        except (CCompilerError, DistutilsError) as why:\n            self.announce('WARNING: building of extension \"%s\" failed: %s' %\n                          (ext.name, why))\n            self.failed.append(ext.name)\n            return\n\n    def check_extension_import(self, ext):\n        # Don't try to import an extension that has failed to compile\n        if ext.name in self.failed:\n            self.announce(\n                'WARNING: skipping import check for failed build \"%s\"' %\n                ext.name, level=1)\n            return\n\n        # Workaround for Mac OS X: The Carbon-based modules cannot be\n        # reliably imported into a command-line Python\n        if 'Carbon' in ext.extra_link_args:\n            self.announce(\n                'WARNING: skipping import check for Carbon-based \"%s\"' %\n                ext.name)\n            return\n\n        if MACOS and (\n                sys.maxsize > 2**32 and '-arch' in ext.extra_link_args):\n            # Don't bother doing an import check when an extension was\n            # build with an explicit '-arch' flag on OSX. That's currently\n            # only used to build 32-bit only extensions in a 4-way\n            # universal build and loading 32-bit code into a 64-bit\n            # process will fail.\n            self.announce(\n                'WARNING: skipping import check for \"%s\"' %\n                ext.name)\n            return\n\n        # Workaround for Cygwin: Cygwin currently has fork issues when many\n        # modules have been imported\n        if CYGWIN:\n            self.announce('WARNING: skipping import check for Cygwin-based \"%s\"'\n                % ext.name)\n            return\n        ext_filename = os.path.join(\n            self.build_lib,\n            self.get_ext_filename(self.get_ext_fullname(ext.name)))\n\n        # If the build directory didn't exist when setup.py was\n        # started, sys.path_importer_cache has a negative result\n        # cached.  Clear that cache before trying to import.\n        sys.path_importer_cache.clear()\n\n        # Don't try to load extensions for cross builds\n        if CROSS_COMPILING:\n            return\n\n        loader = importlib.machinery.ExtensionFileLoader(ext.name, ext_filename)\n        spec = importlib.util.spec_from_file_location(ext.name, ext_filename,\n                                                      loader=loader)\n        try:\n            importlib._bootstrap._load(spec)\n        except ImportError as why:\n            self.failed_on_import.append(ext.name)\n            self.announce('*** WARNING: renaming \"%s\" since importing it'\n                          ' failed: %s' % (ext.name, why), level=3)\n            assert not self.inplace\n            basename, tail = os.path.splitext(ext_filename)\n            newname = basename + \"_failed\" + tail\n            if os.path.exists(newname):\n                os.remove(newname)\n            os.rename(ext_filename, newname)\n\n        except:\n            exc_type, why, tb = sys.exc_info()\n            self.announce('*** WARNING: importing extension \"%s\" '\n                          'failed with %s: %s' % (ext.name, exc_type, why),\n                          level=3)\n            self.failed.append(ext.name)\n\n    def add_multiarch_paths(self):\n        # Debian/Ubuntu multiarch support.\n        # https://wiki.ubuntu.com/MultiarchSpec\n        cc = sysconfig.get_config_var('CC')\n        tmpfile = os.path.join(self.build_temp, 'multiarch')\n        if not os.path.exists(self.build_temp):\n            os.makedirs(self.build_temp)\n        ret = os.system(\n            '%s -print-multiarch > %s 2> /dev/null' % (cc, tmpfile))\n        multiarch_path_component = ''\n        try:\n            if ret >> 8 == 0:\n                with open(tmpfile) as fp:\n                    multiarch_path_component = fp.readline().strip()\n        finally:\n            os.unlink(tmpfile)\n\n        if multiarch_path_component != '':\n            add_dir_to_list(self.compiler.library_dirs,\n                            '/usr/lib/' + multiarch_path_component)\n            add_dir_to_list(self.compiler.include_dirs,\n                            '/usr/include/' + multiarch_path_component)\n            return\n\n        if not find_executable('dpkg-architecture'):\n            return\n        opt = ''\n        if CROSS_COMPILING:\n            opt = '-t' + sysconfig.get_config_var('HOST_GNU_TYPE')\n        tmpfile = os.path.join(self.build_temp, 'multiarch')\n        if not os.path.exists(self.build_temp):\n            os.makedirs(self.build_temp)\n        ret = os.system(\n            'dpkg-architecture %s -qDEB_HOST_MULTIARCH > %s 2> /dev/null' %\n            (opt, tmpfile))\n        try:\n            if ret >> 8 == 0:\n                with open(tmpfile) as fp:\n                    multiarch_path_component = fp.readline().strip()\n                add_dir_to_list(self.compiler.library_dirs,\n                                '/usr/lib/' + multiarch_path_component)\n                add_dir_to_list(self.compiler.include_dirs,\n                                '/usr/include/' + multiarch_path_component)\n        finally:\n            os.unlink(tmpfile)\n\n    def add_cross_compiling_paths(self):\n        cc = sysconfig.get_config_var('CC')\n        tmpfile = os.path.join(self.build_temp, 'ccpaths')\n        if not os.path.exists(self.build_temp):\n            os.makedirs(self.build_temp)\n        ret = os.system('%s -E -v - </dev/null 2>%s 1>/dev/null' % (cc, tmpfile))\n        is_gcc = False\n        is_clang = False\n        in_incdirs = False\n        try:\n            if ret >> 8 == 0:\n                with open(tmpfile) as fp:\n                    for line in fp.readlines():\n                        if line.startswith(\"gcc version\"):\n                            is_gcc = True\n                        elif line.startswith(\"clang version\"):\n                            is_clang = True\n                        elif line.startswith(\"#include <...>\"):\n                            in_incdirs = True\n                        elif line.startswith(\"End of search list\"):\n                            in_incdirs = False\n                        elif (is_gcc or is_clang) and line.startswith(\"LIBRARY_PATH\"):\n                            for d in line.strip().split(\"=\")[1].split(\":\"):\n                                d = os.path.normpath(d)\n                                if '/gcc/' not in d:\n                                    add_dir_to_list(self.compiler.library_dirs,\n                                                    d)\n                        elif (is_gcc or is_clang) and in_incdirs and '/gcc/' not in line and '/clang/' not in line:\n                            add_dir_to_list(self.compiler.include_dirs,\n                                            line.strip())\n        finally:\n            os.unlink(tmpfile)\n\n    def add_ldflags_cppflags(self):\n        # Add paths specified in the environment variables LDFLAGS and\n        # CPPFLAGS for header and library files.\n        # We must get the values from the Makefile and not the environment\n        # directly since an inconsistently reproducible issue comes up where\n        # the environment variable is not set even though the value were passed\n        # into configure and stored in the Makefile (issue found on OS X 10.3).\n        for env_var, arg_name, dir_list in (\n                ('LDFLAGS', '-R', self.compiler.runtime_library_dirs),\n                ('LDFLAGS', '-L', self.compiler.library_dirs),\n                ('CPPFLAGS', '-I', self.compiler.include_dirs)):\n            env_val = sysconfig.get_config_var(env_var)\n            if env_val:\n                parser = argparse.ArgumentParser()\n                parser.add_argument(arg_name, dest=\"dirs\", action=\"append\")\n                options, _ = parser.parse_known_args(env_val.split())\n                if options.dirs:\n                    for directory in reversed(options.dirs):\n                        add_dir_to_list(dir_list, directory)\n\n    def configure_compiler(self):\n        # Ensure that /usr/local is always used, but the local build\n        # directories (i.e. '.' and 'Include') must be first.  See issue\n        # 10520.\n        if not CROSS_COMPILING:\n            add_dir_to_list(self.compiler.library_dirs, '/usr/local/lib')\n            add_dir_to_list(self.compiler.include_dirs, '/usr/local/include')\n        # only change this for cross builds for 3.3, issues on Mageia\n        if CROSS_COMPILING:\n            self.add_cross_compiling_paths()\n        self.add_multiarch_paths()\n        self.add_ldflags_cppflags()\n\n    def init_inc_lib_dirs(self):\n        if (not CROSS_COMPILING and\n                os.path.normpath(sys.base_prefix) != '/usr' and\n                not sysconfig.get_config_var('PYTHONFRAMEWORK')):\n            # OSX note: Don't add LIBDIR and INCLUDEDIR to building a framework\n            # (PYTHONFRAMEWORK is set) to avoid # linking problems when\n            # building a framework with different architectures than\n            # the one that is currently installed (issue #7473)\n            add_dir_to_list(self.compiler.library_dirs,\n                            sysconfig.get_config_var(\"LIBDIR\"))\n            add_dir_to_list(self.compiler.include_dirs,\n                            sysconfig.get_config_var(\"INCLUDEDIR\"))\n\n        system_lib_dirs = ['/lib64', '/usr/lib64', '/lib', '/usr/lib']\n        system_include_dirs = ['/usr/include']\n        # lib_dirs and inc_dirs are used to search for files;\n        # if a file is found in one of those directories, it can\n        # be assumed that no additional -I,-L directives are needed.\n        if not CROSS_COMPILING:\n            self.lib_dirs = self.compiler.library_dirs + system_lib_dirs\n            self.inc_dirs = self.compiler.include_dirs + system_include_dirs\n        else:\n            # Add the sysroot paths. 'sysroot' is a compiler option used to\n            # set the logical path of the standard system headers and\n            # libraries.\n            self.lib_dirs = (self.compiler.library_dirs +\n                             sysroot_paths(('LDFLAGS', 'CC'), system_lib_dirs))\n            self.inc_dirs = (self.compiler.include_dirs +\n                             sysroot_paths(('CPPFLAGS', 'CFLAGS', 'CC'),\n                                           system_include_dirs))\n\n        config_h = sysconfig.get_config_h_filename()\n        with open(config_h) as file:\n            self.config_h_vars = sysconfig.parse_config_h(file)\n\n        # OSF/1 and Unixware have some stuff in /usr/ccs/lib (like -ldb)\n        if HOST_PLATFORM in ['osf1', 'unixware7', 'openunix8']:\n            self.lib_dirs += ['/usr/ccs/lib']\n\n        # HP-UX11iv3 keeps files in lib/hpux folders.\n        if HOST_PLATFORM == 'hp-ux11':\n            self.lib_dirs += ['/usr/lib/hpux64', '/usr/lib/hpux32']\n\n        if MACOS:\n            # This should work on any unixy platform ;-)\n            # If the user has bothered specifying additional -I and -L flags\n            # in OPT and LDFLAGS we might as well use them here.\n            #\n            # NOTE: using shlex.split would technically be more correct, but\n            # also gives a bootstrap problem. Let's hope nobody uses\n            # directories with whitespace in the name to store libraries.\n            cflags, ldflags = sysconfig.get_config_vars(\n                    'CFLAGS', 'LDFLAGS')\n            for item in cflags.split():\n                if item.startswith('-I'):\n                    self.inc_dirs.append(item[2:])\n\n            for item in ldflags.split():\n                if item.startswith('-L'):\n                    self.lib_dirs.append(item[2:])\n\n    def detect_simple_extensions(self):\n        #\n        # The following modules are all pretty straightforward, and compile\n        # on pretty much any POSIXish platform.\n        #\n\n        # array objects\n        self.add(Extension('array', ['arraymodule.c']))\n\n        # Context Variables\n        self.add(Extension('_contextvars', ['_contextvarsmodule.c']))\n\n        shared_math = 'Modules/_math.o'\n\n        # math library functions, e.g. sin()\n        self.add(Extension('math',  ['mathmodule.c'],\n                           extra_objects=[shared_math],\n                           depends=['_math.h', shared_math],\n                           libraries=['m']))\n\n        # complex math library functions\n        self.add(Extension('cmath', ['cmathmodule.c'],\n                           extra_objects=[shared_math],\n                           depends=['_math.h', shared_math],\n                           libraries=['m']))\n\n        # time libraries: librt may be needed for clock_gettime()\n        time_libs = []\n        lib = sysconfig.get_config_var('TIMEMODULE_LIB')\n        if lib:\n            time_libs.append(lib)\n\n        # time operations and variables\n        self.add(Extension('time', ['timemodule.c'],\n                           libraries=time_libs))\n        # libm is needed by delta_new() that uses round() and by accum() that\n        # uses modf().\n        self.add(Extension('_datetime', ['_datetimemodule.c'],\n                           libraries=['m']))\n        # random number generator implemented in C\n        self.add(Extension(\"_random\", [\"_randommodule.c\"]))\n        # bisect\n        self.add(Extension(\"_bisect\", [\"_bisectmodule.c\"]))\n        # heapq\n        self.add(Extension(\"_heapq\", [\"_heapqmodule.c\"]))\n        # C-optimized pickle replacement\n        self.add(Extension(\"_pickle\", [\"_pickle.c\"],\n                           extra_compile_args=['-DPy_BUILD_CORE_MODULE']))\n        # atexit\n        self.add(Extension(\"atexit\", [\"atexitmodule.c\"]))\n        # _json speedups\n        self.add(Extension(\"_json\", [\"_json.c\"],\n                           extra_compile_args=['-DPy_BUILD_CORE_MODULE']))\n\n        # profiler (_lsprof is for cProfile.py)\n        self.add(Extension('_lsprof', ['_lsprof.c', 'rotatingtree.c']))\n        # static Unicode character database\n        self.add(Extension('unicodedata', ['unicodedata.c'],\n                           depends=['unicodedata_db.h', 'unicodename_db.h']))\n        # _opcode module\n        self.add(Extension('_opcode', ['_opcode.c']))\n        # asyncio speedups\n        self.add(Extension(\"_asyncio\", [\"_asynciomodule.c\"]))\n        # _abc speedups\n        self.add(Extension(\"_abc\", [\"_abc.c\"]))\n        # _queue module\n        self.add(Extension(\"_queue\", [\"_queuemodule.c\"]))\n        # _statistics module\n        self.add(Extension(\"_statistics\", [\"_statisticsmodule.c\"]))\n\n        # Modules with some UNIX dependencies -- on by default:\n        # (If you have a really backward UNIX, select and socket may not be\n        # supported...)\n\n        # fcntl(2) and ioctl(2)\n        libs = []\n        if (self.config_h_vars.get('FLOCK_NEEDS_LIBBSD', False)):\n            # May be necessary on AIX for flock function\n            libs = ['bsd']\n        self.add(Extension('fcntl', ['fcntlmodule.c'],\n                           libraries=libs))\n        # pwd(3)\n        self.add(Extension('pwd', ['pwdmodule.c']))\n        # grp(3)\n        if not VXWORKS:\n            self.add(Extension('grp', ['grpmodule.c']))\n        # spwd, shadow passwords\n        if (self.config_h_vars.get('HAVE_GETSPNAM', False) or\n                self.config_h_vars.get('HAVE_GETSPENT', False)):\n            self.add(Extension('spwd', ['spwdmodule.c']))\n        # AIX has shadow passwords, but access is not via getspent(), etc.\n        # module support is not expected so it not 'missing'\n        elif not AIX:\n            self.missing.append('spwd')\n\n        # select(2); not on ancient System V\n        self.add(Extension('select', ['selectmodule.c']))\n\n        # Fred Drake's interface to the Python parser\n        self.add(Extension('parser', ['parsermodule.c']))\n\n        # Memory-mapped files (also works on Win32).\n        self.add(Extension('mmap', ['mmapmodule.c']))\n\n        # Lance Ellinghaus's syslog module\n        # syslog daemon interface\n        self.add(Extension('syslog', ['syslogmodule.c']))\n\n        # Python interface to subinterpreter C-API.\n        self.add(Extension('_xxsubinterpreters', ['_xxsubinterpretersmodule.c']))\n\n        #\n        # Here ends the simple stuff.  From here on, modules need certain\n        # libraries, are platform-specific, or present other surprises.\n        #\n\n        # Multimedia modules\n        # These don't work for 64-bit platforms!!!\n        # These represent audio samples or images as strings:\n        #\n        # Operations on audio samples\n        # According to #993173, this one should actually work fine on\n        # 64-bit platforms.\n        #\n        # audioop needs libm for floor() in multiple functions.\n        self.add(Extension('audioop', ['audioop.c'],\n                           libraries=['m']))\n\n        # CSV files\n        self.add(Extension('_csv', ['_csv.c']))\n\n        # POSIX subprocess module helper.\n        self.add(Extension('_posixsubprocess', ['_posixsubprocess.c']))\n\n    def detect_test_extensions(self):\n        # Python C API test module\n        self.add(Extension('_testcapi', ['_testcapimodule.c'],\n                           depends=['testcapi_long.h']))\n\n        # Python Internal C API test module\n        self.add(Extension('_testinternalcapi', ['_testinternalcapi.c'],\n                           extra_compile_args=['-DPy_BUILD_CORE_MODULE']))\n\n        # Python PEP-3118 (buffer protocol) test module\n        self.add(Extension('_testbuffer', ['_testbuffer.c']))\n\n        # Test loading multiple modules from one compiled file (http://bugs.python.org/issue16421)\n        self.add(Extension('_testimportmultiple', ['_testimportmultiple.c']))\n\n        # Test multi-phase extension module init (PEP 489)\n        self.add(Extension('_testmultiphase', ['_testmultiphase.c']))\n\n        # Fuzz tests.\n        self.add(Extension('_xxtestfuzz',\n                           ['_xxtestfuzz/_xxtestfuzz.c',\n                            '_xxtestfuzz/fuzzer.c']))\n\n    def detect_readline_curses(self):\n        # readline\n        do_readline = self.compiler.find_library_file(self.lib_dirs, 'readline')\n        readline_termcap_library = \"\"\n        curses_library = \"\"\n        # Cannot use os.popen here in py3k.\n        tmpfile = os.path.join(self.build_temp, 'readline_termcap_lib')\n        if not os.path.exists(self.build_temp):\n            os.makedirs(self.build_temp)\n        # Determine if readline is already linked against curses or tinfo.\n        if do_readline:\n            if CROSS_COMPILING:\n                ret = os.system(\"%s -d %s | grep '(NEEDED)' > %s\" \\\n                                % (sysconfig.get_config_var('READELF'),\n                                   do_readline, tmpfile))\n            elif find_executable('ldd'):\n                ret = os.system(\"ldd %s > %s\" % (do_readline, tmpfile))\n            else:\n                ret = 256\n            if ret >> 8 == 0:\n                with open(tmpfile) as fp:\n                    for ln in fp:\n                        if 'curses' in ln:\n                            readline_termcap_library = re.sub(\n                                r'.*lib(n?cursesw?)\\.so.*', r'\\1', ln\n                            ).rstrip()\n                            break\n                        # termcap interface split out from ncurses\n                        if 'tinfo' in ln:\n                            readline_termcap_library = 'tinfo'\n                            break\n            if os.path.exists(tmpfile):\n                os.unlink(tmpfile)\n        # Issue 7384: If readline is already linked against curses,\n        # use the same library for the readline and curses modules.\n        if 'curses' in readline_termcap_library:\n            curses_library = readline_termcap_library\n        elif self.compiler.find_library_file(self.lib_dirs, 'ncursesw'):\n            curses_library = 'ncursesw'\n        # Issue 36210: OSS provided ncurses does not link on AIX\n        # Use IBM supplied 'curses' for successful build of _curses\n        elif AIX and self.compiler.find_library_file(self.lib_dirs, 'curses'):\n            curses_library = 'curses'\n        elif self.compiler.find_library_file(self.lib_dirs, 'ncurses'):\n            curses_library = 'ncurses'\n        elif self.compiler.find_library_file(self.lib_dirs, 'curses'):\n            curses_library = 'curses'\n\n        if MACOS:\n            os_release = int(os.uname()[2].split('.')[0])\n            dep_target = sysconfig.get_config_var('MACOSX_DEPLOYMENT_TARGET')\n            if (dep_target and\n                    (tuple(int(n) for n in dep_target.split('.')[0:2])\n                        < (10, 5) ) ):\n                os_release = 8\n            if os_release < 9:\n                # MacOSX 10.4 has a broken readline. Don't try to build\n                # the readline module unless the user has installed a fixed\n                # readline package\n                if find_file('readline/rlconf.h', self.inc_dirs, []) is None:\n                    do_readline = False\n        if do_readline:\n            if MACOS and os_release < 9:\n                # In every directory on the search path search for a dynamic\n                # library and then a static library, instead of first looking\n                # for dynamic libraries on the entire path.\n                # This way a statically linked custom readline gets picked up\n                # before the (possibly broken) dynamic library in /usr/lib.\n                readline_extra_link_args = ('-Wl,-search_paths_first',)\n            else:\n                readline_extra_link_args = ()\n\n            readline_libs = ['readline']\n            if readline_termcap_library:\n                pass # Issue 7384: Already linked against curses or tinfo.\n            elif curses_library:\n                readline_libs.append(curses_library)\n            elif self.compiler.find_library_file(self.lib_dirs +\n                                                     ['/usr/lib/termcap'],\n                                                     'termcap'):\n                readline_libs.append('termcap')\n            self.add(Extension('readline', ['readline.c'],\n                               library_dirs=['/usr/lib/termcap'],\n                               extra_link_args=readline_extra_link_args,\n                               libraries=readline_libs))\n        else:\n            self.missing.append('readline')\n\n        # Curses support, requiring the System V version of curses, often\n        # provided by the ncurses library.\n        curses_defines = []\n        curses_includes = []\n        panel_library = 'panel'\n        if curses_library == 'ncursesw':\n            curses_defines.append(('HAVE_NCURSESW', '1'))\n            if not CROSS_COMPILING:\n                curses_includes.append('/usr/include/ncursesw')\n            # Bug 1464056: If _curses.so links with ncursesw,\n            # _curses_panel.so must link with panelw.\n            panel_library = 'panelw'\n            if MACOS:\n                # On OS X, there is no separate /usr/lib/libncursesw nor\n                # libpanelw.  If we are here, we found a locally-supplied\n                # version of libncursesw.  There should also be a\n                # libpanelw.  _XOPEN_SOURCE defines are usually excluded\n                # for OS X but we need _XOPEN_SOURCE_EXTENDED here for\n                # ncurses wide char support\n                curses_defines.append(('_XOPEN_SOURCE_EXTENDED', '1'))\n        elif MACOS and curses_library == 'ncurses':\n            # Building with the system-suppied combined libncurses/libpanel\n            curses_defines.append(('HAVE_NCURSESW', '1'))\n            curses_defines.append(('_XOPEN_SOURCE_EXTENDED', '1'))\n\n        curses_enabled = True\n        if curses_library.startswith('ncurses'):\n            curses_libs = [curses_library]\n            self.add(Extension('_curses', ['_cursesmodule.c'],\n                               include_dirs=curses_includes,\n                               define_macros=curses_defines,\n                               libraries=curses_libs))\n        elif curses_library == 'curses' and not MACOS:\n                # OSX has an old Berkeley curses, not good enough for\n                # the _curses module.\n            if (self.compiler.find_library_file(self.lib_dirs, 'terminfo')):\n                curses_libs = ['curses', 'terminfo']\n            elif (self.compiler.find_library_file(self.lib_dirs, 'termcap')):\n                curses_libs = ['curses', 'termcap']\n            else:\n                curses_libs = ['curses']\n\n            self.add(Extension('_curses', ['_cursesmodule.c'],\n                               define_macros=curses_defines,\n                               libraries=curses_libs))\n        else:\n            curses_enabled = False\n            self.missing.append('_curses')\n\n        # If the curses module is enabled, check for the panel module\n        # _curses_panel needs some form of ncurses\n        skip_curses_panel = True if AIX else False\n        if (curses_enabled and not skip_curses_panel and\n                self.compiler.find_library_file(self.lib_dirs, panel_library)):\n            self.add(Extension('_curses_panel', ['_curses_panel.c'],\n                               include_dirs=curses_includes,\n                               define_macros=curses_defines,\n                               libraries=[panel_library, *curses_libs]))\n        elif not skip_curses_panel:\n            self.missing.append('_curses_panel')\n\n    def detect_crypt(self):\n        # crypt module.\n        if VXWORKS:\n            # bpo-31904: crypt() function is not provided by VxWorks.\n            # DES_crypt() OpenSSL provides is too weak to implement\n            # the encryption.\n            return\n\n        if self.compiler.find_library_file(self.lib_dirs, 'crypt'):\n            libs = ['crypt']\n        else:\n            libs = []\n\n        self.add(Extension('_crypt', ['_cryptmodule.c'],\n                               libraries=libs))\n\n    def detect_socket(self):\n        # socket(2)\n        if not VXWORKS:\n            self.add(Extension('_socket', ['socketmodule.c'],\n                               depends=['socketmodule.h']))\n        elif self.compiler.find_library_file(self.lib_dirs, 'net'):\n            libs = ['net']\n            self.add(Extension('_socket', ['socketmodule.c'],\n                               depends=['socketmodule.h'],\n                               libraries=libs))\n\n    def detect_dbm_gdbm(self):\n        # Modules that provide persistent dictionary-like semantics.  You will\n        # probably want to arrange for at least one of them to be available on\n        # your machine, though none are defined by default because of library\n        # dependencies.  The Python module dbm/__init__.py provides an\n        # implementation independent wrapper for these; dbm/dumb.py provides\n        # similar functionality (but slower of course) implemented in Python.\n\n        # Sleepycat^WOracle Berkeley DB interface.\n        #  http://www.oracle.com/database/berkeley-db/db/index.html\n        #\n        # This requires the Sleepycat^WOracle DB code. The supported versions\n        # are set below.  Visit the URL above to download\n        # a release.  Most open source OSes come with one or more\n        # versions of BerkeleyDB already installed.\n\n        max_db_ver = (5, 3)\n        min_db_ver = (3, 3)\n        db_setup_debug = False   # verbose debug prints from this script?\n\n        def allow_db_ver(db_ver):\n            \"\"\"Returns a boolean if the given BerkeleyDB version is acceptable.\n\n            Args:\n              db_ver: A tuple of the version to verify.\n            \"\"\"\n            if not (min_db_ver <= db_ver <= max_db_ver):\n                return False\n            return True\n\n        def gen_db_minor_ver_nums(major):\n            if major == 4:\n                for x in range(max_db_ver[1]+1):\n                    if allow_db_ver((4, x)):\n                        yield x\n            elif major == 3:\n                for x in (3,):\n                    if allow_db_ver((3, x)):\n                        yield x\n            else:\n                raise ValueError(\"unknown major BerkeleyDB version\", major)\n\n        # construct a list of paths to look for the header file in on\n        # top of the normal inc_dirs.\n        db_inc_paths = [\n            '/usr/include/db4',\n            '/usr/local/include/db4',\n            '/opt/sfw/include/db4',\n            '/usr/include/db3',\n            '/usr/local/include/db3',\n            '/opt/sfw/include/db3',\n            # Fink defaults (http://fink.sourceforge.net/)\n            '/sw/include/db4',\n            '/sw/include/db3',\n        ]\n        # 4.x minor number specific paths\n        for x in gen_db_minor_ver_nums(4):\n            db_inc_paths.append('/usr/include/db4%d' % x)\n            db_inc_paths.append('/usr/include/db4.%d' % x)\n            db_inc_paths.append('/usr/local/BerkeleyDB.4.%d/include' % x)\n            db_inc_paths.append('/usr/local/include/db4%d' % x)\n            db_inc_paths.append('/pkg/db-4.%d/include' % x)\n            db_inc_paths.append('/opt/db-4.%d/include' % x)\n            # MacPorts default (http://www.macports.org/)\n            db_inc_paths.append('/opt/local/include/db4%d' % x)\n        # 3.x minor number specific paths\n        for x in gen_db_minor_ver_nums(3):\n            db_inc_paths.append('/usr/include/db3%d' % x)\n            db_inc_paths.append('/usr/local/BerkeleyDB.3.%d/include' % x)\n            db_inc_paths.append('/usr/local/include/db3%d' % x)\n            db_inc_paths.append('/pkg/db-3.%d/include' % x)\n            db_inc_paths.append('/opt/db-3.%d/include' % x)\n\n        if CROSS_COMPILING:\n            db_inc_paths = []\n\n        # Add some common subdirectories for Sleepycat DB to the list,\n        # based on the standard include directories. This way DB3/4 gets\n        # picked up when it is installed in a non-standard prefix and\n        # the user has added that prefix into inc_dirs.\n        std_variants = []\n        for dn in self.inc_dirs:\n            std_variants.append(os.path.join(dn, 'db3'))\n            std_variants.append(os.path.join(dn, 'db4'))\n            for x in gen_db_minor_ver_nums(4):\n                std_variants.append(os.path.join(dn, \"db4%d\"%x))\n                std_variants.append(os.path.join(dn, \"db4.%d\"%x))\n            for x in gen_db_minor_ver_nums(3):\n                std_variants.append(os.path.join(dn, \"db3%d\"%x))\n                std_variants.append(os.path.join(dn, \"db3.%d\"%x))\n\n        db_inc_paths = std_variants + db_inc_paths\n        db_inc_paths = [p for p in db_inc_paths if os.path.exists(p)]\n\n        db_ver_inc_map = {}\n\n        if MACOS:\n            sysroot = macosx_sdk_root()\n\n        class db_found(Exception): pass\n        try:\n            # See whether there is a Sleepycat header in the standard\n            # search path.\n            for d in self.inc_dirs + db_inc_paths:\n                f = os.path.join(d, \"db.h\")\n                if MACOS and is_macosx_sdk_path(d):\n                    f = os.path.join(sysroot, d[1:], \"db.h\")\n\n                if db_setup_debug: print(\"db: looking for db.h in\", f)\n                if os.path.exists(f):\n                    with open(f, 'rb') as file:\n                        f = file.read()\n                    m = re.search(br\"#define\\WDB_VERSION_MAJOR\\W(\\d+)\", f)\n                    if m:\n                        db_major = int(m.group(1))\n                        m = re.search(br\"#define\\WDB_VERSION_MINOR\\W(\\d+)\", f)\n                        db_minor = int(m.group(1))\n                        db_ver = (db_major, db_minor)\n\n                        # Avoid 4.6 prior to 4.6.21 due to a BerkeleyDB bug\n                        if db_ver == (4, 6):\n                            m = re.search(br\"#define\\WDB_VERSION_PATCH\\W(\\d+)\", f)\n                            db_patch = int(m.group(1))\n                            if db_patch < 21:\n                                print(\"db.h:\", db_ver, \"patch\", db_patch,\n                                      \"being ignored (4.6.x must be >= 4.6.21)\")\n                                continue\n\n                        if ( (db_ver not in db_ver_inc_map) and\n                            allow_db_ver(db_ver) ):\n                            # save the include directory with the db.h version\n                            # (first occurrence only)\n                            db_ver_inc_map[db_ver] = d\n                            if db_setup_debug:\n                                print(\"db.h: found\", db_ver, \"in\", d)\n                        else:\n                            # we already found a header for this library version\n                            if db_setup_debug: print(\"db.h: ignoring\", d)\n                    else:\n                        # ignore this header, it didn't contain a version number\n                        if db_setup_debug:\n                            print(\"db.h: no version number version in\", d)\n\n            db_found_vers = list(db_ver_inc_map.keys())\n            db_found_vers.sort()\n\n            while db_found_vers:\n                db_ver = db_found_vers.pop()\n                db_incdir = db_ver_inc_map[db_ver]\n\n                # check lib directories parallel to the location of the header\n                db_dirs_to_check = [\n                    db_incdir.replace(\"include\", 'lib64'),\n                    db_incdir.replace(\"include\", 'lib'),\n                ]\n\n                if not MACOS:\n                    db_dirs_to_check = list(filter(os.path.isdir, db_dirs_to_check))\n\n                else:\n                    # Same as other branch, but takes OSX SDK into account\n                    tmp = []\n                    for dn in db_dirs_to_check:\n                        if is_macosx_sdk_path(dn):\n                            if os.path.isdir(os.path.join(sysroot, dn[1:])):\n                                tmp.append(dn)\n                        else:\n                            if os.path.isdir(dn):\n                                tmp.append(dn)\n                    db_dirs_to_check = tmp\n\n                    db_dirs_to_check = tmp\n\n                # Look for a version specific db-X.Y before an ambiguous dbX\n                # XXX should we -ever- look for a dbX name?  Do any\n                # systems really not name their library by version and\n                # symlink to more general names?\n                for dblib in (('db-%d.%d' % db_ver),\n                              ('db%d%d' % db_ver),\n                              ('db%d' % db_ver[0])):\n                    dblib_file = self.compiler.find_library_file(\n                                    db_dirs_to_check + self.lib_dirs, dblib )\n                    if dblib_file:\n                        dblib_dir = [ os.path.abspath(os.path.dirname(dblib_file)) ]\n                        raise db_found\n                    else:\n                        if db_setup_debug: print(\"db lib: \", dblib, \"not found\")\n\n        except db_found:\n            if db_setup_debug:\n                print(\"bsddb using BerkeleyDB lib:\", db_ver, dblib)\n                print(\"bsddb lib dir:\", dblib_dir, \" inc dir:\", db_incdir)\n            dblibs = [dblib]\n            # Only add the found library and include directories if they aren't\n            # already being searched. This avoids an explicit runtime library\n            # dependency.\n            if db_incdir in self.inc_dirs:\n                db_incs = None\n            else:\n                db_incs = [db_incdir]\n            if dblib_dir[0] in self.lib_dirs:\n                dblib_dir = None\n        else:\n            if db_setup_debug: print(\"db: no appropriate library found\")\n            db_incs = None\n            dblibs = []\n            dblib_dir = None\n\n        dbm_setup_debug = False   # verbose debug prints from this script?\n        dbm_order = ['gdbm']\n        # The standard Unix dbm module:\n        if not CYGWIN:\n            config_args = [arg.strip(\"'\")\n                           for arg in sysconfig.get_config_var(\"CONFIG_ARGS\").split()]\n            dbm_args = [arg for arg in config_args\n                        if arg.startswith('--with-dbmliborder=')]\n            if dbm_args:\n                dbm_order = [arg.split('=')[-1] for arg in dbm_args][-1].split(\":\")\n            else:\n                dbm_order = \"ndbm:gdbm:bdb\".split(\":\")\n            dbmext = None\n            for cand in dbm_order:\n                if cand == \"ndbm\":\n                    if find_file(\"ndbm.h\", self.inc_dirs, []) is not None:\n                        # Some systems have -lndbm, others have -lgdbm_compat,\n                        # others don't have either\n                        if self.compiler.find_library_file(self.lib_dirs,\n                                                               'ndbm'):\n                            ndbm_libs = ['ndbm']\n                        elif self.compiler.find_library_file(self.lib_dirs,\n                                                             'gdbm_compat'):\n                            ndbm_libs = ['gdbm_compat']\n                        else:\n                            ndbm_libs = []\n                        if dbm_setup_debug: print(\"building dbm using ndbm\")\n                        dbmext = Extension('_dbm', ['_dbmmodule.c'],\n                                           define_macros=[\n                                               ('HAVE_NDBM_H',None),\n                                               ],\n                                           libraries=ndbm_libs)\n                        break\n\n                elif cand == \"gdbm\":\n                    if self.compiler.find_library_file(self.lib_dirs, 'gdbm'):\n                        gdbm_libs = ['gdbm']\n                        if self.compiler.find_library_file(self.lib_dirs,\n                                                               'gdbm_compat'):\n                            gdbm_libs.append('gdbm_compat')\n                        if find_file(\"gdbm/ndbm.h\", self.inc_dirs, []) is not None:\n                            if dbm_setup_debug: print(\"building dbm using gdbm\")\n                            dbmext = Extension(\n                                '_dbm', ['_dbmmodule.c'],\n                                define_macros=[\n                                    ('HAVE_GDBM_NDBM_H', None),\n                                    ],\n                                libraries = gdbm_libs)\n                            break\n                        if find_file(\"gdbm-ndbm.h\", self.inc_dirs, []) is not None:\n                            if dbm_setup_debug: print(\"building dbm using gdbm\")\n                            dbmext = Extension(\n                                '_dbm', ['_dbmmodule.c'],\n                                define_macros=[\n                                    ('HAVE_GDBM_DASH_NDBM_H', None),\n                                    ],\n                                libraries = gdbm_libs)\n                            break\n                elif cand == \"bdb\":\n                    if dblibs:\n                        if dbm_setup_debug: print(\"building dbm using bdb\")\n                        dbmext = Extension('_dbm', ['_dbmmodule.c'],\n                                           library_dirs=dblib_dir,\n                                           runtime_library_dirs=dblib_dir,\n                                           include_dirs=db_incs,\n                                           define_macros=[\n                                               ('HAVE_BERKDB_H', None),\n                                               ('DB_DBM_HSEARCH', None),\n                                               ],\n                                           libraries=dblibs)\n                        break\n            if dbmext is not None:\n                self.add(dbmext)\n            else:\n                self.missing.append('_dbm')\n\n        # Anthony Baxter's gdbm module.  GNU dbm(3) will require -lgdbm:\n        if ('gdbm' in dbm_order and\n            self.compiler.find_library_file(self.lib_dirs, 'gdbm')):\n            self.add(Extension('_gdbm', ['_gdbmmodule.c'],\n                               libraries=['gdbm']))\n        else:\n            self.missing.append('_gdbm')\n\n    def detect_sqlite(self):\n        # The sqlite interface\n        sqlite_setup_debug = False   # verbose debug prints from this script?\n\n        # We hunt for #define SQLITE_VERSION \"n.n.n\"\n        # We need to find >= sqlite version 3.3.9, for sqlite3_prepare_v2\n        sqlite_incdir = sqlite_libdir = None\n        sqlite_inc_paths = [ '/usr/include',\n                             '/usr/include/sqlite',\n                             '/usr/include/sqlite3',\n                             '/usr/local/include',\n                             '/usr/local/include/sqlite',\n                             '/usr/local/include/sqlite3',\n                             ]\n        if CROSS_COMPILING:\n            sqlite_inc_paths = []\n        MIN_SQLITE_VERSION_NUMBER = (3, 7, 2)\n        MIN_SQLITE_VERSION = \".\".join([str(x)\n                                    for x in MIN_SQLITE_VERSION_NUMBER])\n\n        # Scan the default include directories before the SQLite specific\n        # ones. This allows one to override the copy of sqlite on OSX,\n        # where /usr/include contains an old version of sqlite.\n        if MACOS:\n            sysroot = macosx_sdk_root()\n\n        for d_ in self.inc_dirs + sqlite_inc_paths:\n            d = d_\n            if MACOS and is_macosx_sdk_path(d):\n                d = os.path.join(sysroot, d[1:])\n\n            f = os.path.join(d, \"sqlite3.h\")\n            if os.path.exists(f):\n                if sqlite_setup_debug: print(\"sqlite: found %s\"%f)\n                with open(f) as file:\n                    incf = file.read()\n                m = re.search(\n                    r'\\s*.*#\\s*.*define\\s.*SQLITE_VERSION\\W*\"([\\d\\.]*)\"', incf)\n                if m:\n                    sqlite_version = m.group(1)\n                    sqlite_version_tuple = tuple([int(x)\n                                        for x in sqlite_version.split(\".\")])\n                    if sqlite_version_tuple >= MIN_SQLITE_VERSION_NUMBER:\n                        # we win!\n                        if sqlite_setup_debug:\n                            print(\"%s/sqlite3.h: version %s\"%(d, sqlite_version))\n                        sqlite_incdir = d\n                        break\n                    else:\n                        if sqlite_setup_debug:\n                            print(\"%s: version %s is too old, need >= %s\"%(d,\n                                        sqlite_version, MIN_SQLITE_VERSION))\n                elif sqlite_setup_debug:\n                    print(\"sqlite: %s had no SQLITE_VERSION\"%(f,))\n\n        if sqlite_incdir:\n            sqlite_dirs_to_check = [\n                os.path.join(sqlite_incdir, '..', 'lib64'),\n                os.path.join(sqlite_incdir, '..', 'lib'),\n                os.path.join(sqlite_incdir, '..', '..', 'lib64'),\n                os.path.join(sqlite_incdir, '..', '..', 'lib'),\n            ]\n            sqlite_libfile = self.compiler.find_library_file(\n                                sqlite_dirs_to_check + self.lib_dirs, 'sqlite3')\n            if sqlite_libfile:\n                sqlite_libdir = [os.path.abspath(os.path.dirname(sqlite_libfile))]\n\n        if sqlite_incdir and sqlite_libdir:\n            sqlite_srcs = ['_sqlite/cache.c',\n                '_sqlite/connection.c',\n                '_sqlite/cursor.c',\n                '_sqlite/microprotocols.c',\n                '_sqlite/module.c',\n                '_sqlite/prepare_protocol.c',\n                '_sqlite/row.c',\n                '_sqlite/statement.c',\n                '_sqlite/util.c', ]\n\n            sqlite_defines = []\n            if not MS_WINDOWS:\n                sqlite_defines.append(('MODULE_NAME', '\"sqlite3\"'))\n            else:\n                sqlite_defines.append(('MODULE_NAME', '\\\\\"sqlite3\\\\\"'))\n\n            # Enable support for loadable extensions in the sqlite3 module\n            # if --enable-loadable-sqlite-extensions configure option is used.\n            if '--enable-loadable-sqlite-extensions' not in sysconfig.get_config_var(\"CONFIG_ARGS\"):\n                sqlite_defines.append((\"SQLITE_OMIT_LOAD_EXTENSION\", \"1\"))\n\n            if MACOS:\n                # In every directory on the search path search for a dynamic\n                # library and then a static library, instead of first looking\n                # for dynamic libraries on the entire path.\n                # This way a statically linked custom sqlite gets picked up\n                # before the dynamic library in /usr/lib.\n                sqlite_extra_link_args = ('-Wl,-search_paths_first',)\n            else:\n                sqlite_extra_link_args = ()\n\n            include_dirs = [\"Modules/_sqlite\"]\n            # Only include the directory where sqlite was found if it does\n            # not already exist in set include directories, otherwise you\n            # can end up with a bad search path order.\n            if sqlite_incdir not in self.compiler.include_dirs:\n                include_dirs.append(sqlite_incdir)\n            # avoid a runtime library path for a system library dir\n            if sqlite_libdir and sqlite_libdir[0] in self.lib_dirs:\n                sqlite_libdir = None\n            self.add(Extension('_sqlite3', sqlite_srcs,\n                               define_macros=sqlite_defines,\n                               include_dirs=include_dirs,\n                               library_dirs=sqlite_libdir,\n                               extra_link_args=sqlite_extra_link_args,\n                               libraries=[\"sqlite3\",]))\n        else:\n            self.missing.append('_sqlite3')\n\n    def detect_platform_specific_exts(self):\n        # Unix-only modules\n        if not MS_WINDOWS:\n            if not VXWORKS:\n                # Steen Lumholt's termios module\n                self.add(Extension('termios', ['termios.c']))\n                # Jeremy Hylton's rlimit interface\n            self.add(Extension('resource', ['resource.c']))\n        else:\n            self.missing.extend(['resource', 'termios'])\n\n        # Platform-specific libraries\n        if HOST_PLATFORM.startswith(('linux', 'freebsd', 'gnukfreebsd')):\n            self.add(Extension('ossaudiodev', ['ossaudiodev.c']))\n        elif not AIX:\n            self.missing.append('ossaudiodev')\n\n        if MACOS:\n            self.add(Extension('_scproxy', ['_scproxy.c'],\n                               extra_link_args=[\n                                   '-framework', 'SystemConfiguration',\n                                   '-framework', 'CoreFoundation']))\n\n    def detect_compress_exts(self):\n        # Andrew Kuchling's zlib module.  Note that some versions of zlib\n        # 1.1.3 have security problems.  See CERT Advisory CA-2002-07:\n        # http://www.cert.org/advisories/CA-2002-07.html\n        #\n        # zlib 1.1.4 is fixed, but at least one vendor (RedHat) has decided to\n        # patch its zlib 1.1.3 package instead of upgrading to 1.1.4.  For\n        # now, we still accept 1.1.3, because we think it's difficult to\n        # exploit this in Python, and we'd rather make it RedHat's problem\n        # than our problem <wink>.\n        #\n        # You can upgrade zlib to version 1.1.4 yourself by going to\n        # http://www.gzip.org/zlib/\n        zlib_inc = find_file('zlib.h', [], self.inc_dirs)\n        have_zlib = False\n        if zlib_inc is not None:\n            zlib_h = zlib_inc[0] + '/zlib.h'\n            version = '\"0.0.0\"'\n            version_req = '\"1.1.3\"'\n            if MACOS and is_macosx_sdk_path(zlib_h):\n                zlib_h = os.path.join(macosx_sdk_root(), zlib_h[1:])\n            with open(zlib_h) as fp:\n                while 1:\n                    line = fp.readline()\n                    if not line:\n                        break\n                    if line.startswith('#define ZLIB_VERSION'):\n                        version = line.split()[2]\n                        break\n            if version >= version_req:\n                if (self.compiler.find_library_file(self.lib_dirs, 'z')):\n                    if MACOS:\n                        zlib_extra_link_args = ('-Wl,-search_paths_first',)\n                    else:\n                        zlib_extra_link_args = ()\n                    self.add(Extension('zlib', ['zlibmodule.c'],\n                                       libraries=['z'],\n                                       extra_link_args=zlib_extra_link_args))\n                    have_zlib = True\n                else:\n                    self.missing.append('zlib')\n            else:\n                self.missing.append('zlib')\n        else:\n            self.missing.append('zlib')\n\n        # Helper module for various ascii-encoders.  Uses zlib for an optimized\n        # crc32 if we have it.  Otherwise binascii uses its own.\n        if have_zlib:\n            extra_compile_args = ['-DUSE_ZLIB_CRC32']\n            libraries = ['z']\n            extra_link_args = zlib_extra_link_args\n        else:\n            extra_compile_args = []\n            libraries = []\n            extra_link_args = []\n        self.add(Extension('binascii', ['binascii.c'],\n                           extra_compile_args=extra_compile_args,\n                           libraries=libraries,\n                           extra_link_args=extra_link_args))\n\n        # Gustavo Niemeyer's bz2 module.\n        if (self.compiler.find_library_file(self.lib_dirs, 'bz2')):\n            if MACOS:\n                bz2_extra_link_args = ('-Wl,-search_paths_first',)\n            else:\n                bz2_extra_link_args = ()\n            self.add(Extension('_bz2', ['_bz2module.c'],\n                               libraries=['bz2'],\n                               extra_link_args=bz2_extra_link_args))\n        else:\n            self.missing.append('_bz2')\n\n        # LZMA compression support.\n        if self.compiler.find_library_file(self.lib_dirs, 'lzma'):\n            self.add(Extension('_lzma', ['_lzmamodule.c'],\n                               libraries=['lzma']))\n        else:\n            self.missing.append('_lzma')\n\n    def detect_expat_elementtree(self):\n        # Interface to the Expat XML parser\n        #\n        # Expat was written by James Clark and is now maintained by a group of\n        # developers on SourceForge; see www.libexpat.org for more information.\n        # The pyexpat module was written by Paul Prescod after a prototype by\n        # Jack Jansen.  The Expat source is included in Modules/expat/.  Usage\n        # of a system shared libexpat.so is possible with --with-system-expat\n        # configure option.\n        #\n        # More information on Expat can be found at www.libexpat.org.\n        #\n        if '--with-system-expat' in sysconfig.get_config_var(\"CONFIG_ARGS\"):\n            expat_inc = []\n            define_macros = []\n            extra_compile_args = []\n            expat_lib = ['expat']\n            expat_sources = []\n            expat_depends = []\n        else:\n            expat_inc = [os.path.join(self.srcdir, 'Modules', 'expat')]\n            define_macros = [\n                ('HAVE_EXPAT_CONFIG_H', '1'),\n                # bpo-30947: Python uses best available entropy sources to\n                # call XML_SetHashSalt(), expat entropy sources are not needed\n                ('XML_POOR_ENTROPY', '1'),\n            ]\n            extra_compile_args = []\n            expat_lib = []\n            expat_sources = ['expat/xmlparse.c',\n                             'expat/xmlrole.c',\n                             'expat/xmltok.c']\n            expat_depends = ['expat/ascii.h',\n                             'expat/asciitab.h',\n                             'expat/expat.h',\n                             'expat/expat_config.h',\n                             'expat/expat_external.h',\n                             'expat/internal.h',\n                             'expat/latin1tab.h',\n                             'expat/utf8tab.h',\n                             'expat/xmlrole.h',\n                             'expat/xmltok.h',\n                             'expat/xmltok_impl.h'\n                             ]\n\n            cc = sysconfig.get_config_var('CC').split()[0]\n            ret = os.system(\n                      '\"%s\" -Werror -Wno-unreachable-code -E -xc /dev/null >/dev/null 2>&1' % cc)\n            if ret >> 8 == 0:\n                extra_compile_args.append('-Wno-unreachable-code')\n\n        self.add(Extension('pyexpat',\n                           define_macros=define_macros,\n                           extra_compile_args=extra_compile_args,\n                           include_dirs=expat_inc,\n                           libraries=expat_lib,\n                           sources=['pyexpat.c'] + expat_sources,\n                           depends=expat_depends))\n\n        # Fredrik Lundh's cElementTree module.  Note that this also\n        # uses expat (via the CAPI hook in pyexpat).\n\n        if os.path.isfile(os.path.join(self.srcdir, 'Modules', '_elementtree.c')):\n            define_macros.append(('USE_PYEXPAT_CAPI', None))\n            self.add(Extension('_elementtree',\n                               define_macros=define_macros,\n                               include_dirs=expat_inc,\n                               libraries=expat_lib,\n                               sources=['_elementtree.c'],\n                               depends=['pyexpat.c', *expat_sources,\n                                        *expat_depends]))\n        else:\n            self.missing.append('_elementtree')\n\n    def detect_multibytecodecs(self):\n        # Hye-Shik Chang's CJKCodecs modules.\n        self.add(Extension('_multibytecodec',\n                           ['cjkcodecs/multibytecodec.c']))\n        for loc in ('kr', 'jp', 'cn', 'tw', 'hk', 'iso2022'):\n            self.add(Extension('_codecs_%s' % loc,\n                               ['cjkcodecs/_codecs_%s.c' % loc]))\n\n    def detect_multiprocessing(self):\n        # Richard Oudkerk's multiprocessing module\n        if MS_WINDOWS:\n            multiprocessing_srcs = ['_multiprocessing/multiprocessing.c',\n                                    '_multiprocessing/semaphore.c']\n\n        else:\n            multiprocessing_srcs = ['_multiprocessing/multiprocessing.c']\n            if (sysconfig.get_config_var('HAVE_SEM_OPEN') and not\n                sysconfig.get_config_var('POSIX_SEMAPHORES_NOT_ENABLED')):\n                multiprocessing_srcs.append('_multiprocessing/semaphore.c')\n            if (sysconfig.get_config_var('HAVE_SHM_OPEN') and\n                sysconfig.get_config_var('HAVE_SHM_UNLINK')):\n                posixshmem_srcs = ['_multiprocessing/posixshmem.c']\n                libs = []\n                if sysconfig.get_config_var('SHM_NEEDS_LIBRT'):\n                    # need to link with librt to get shm_open()\n                    libs.append('rt')\n                self.add(Extension('_posixshmem', posixshmem_srcs,\n                                   define_macros={},\n                                   libraries=libs,\n                                   include_dirs=[\"Modules/_multiprocessing\"]))\n\n        self.add(Extension('_multiprocessing', multiprocessing_srcs,\n                           include_dirs=[\"Modules/_multiprocessing\"]))\n\n    def detect_uuid(self):\n        # Build the _uuid module if possible\n        uuid_incs = find_file(\"uuid.h\", self.inc_dirs, [\"/usr/include/uuid\"])\n        if uuid_incs is not None:\n            if self.compiler.find_library_file(self.lib_dirs, 'uuid'):\n                uuid_libs = ['uuid']\n            else:\n                uuid_libs = []\n            self.add(Extension('_uuid', ['_uuidmodule.c'],\n                               libraries=uuid_libs,\n                               include_dirs=uuid_incs))\n        else:\n            self.missing.append('_uuid')\n\n    def detect_modules(self):\n        self.configure_compiler()\n        self.init_inc_lib_dirs()\n\n        self.detect_simple_extensions()\n        if TEST_EXTENSIONS:\n            self.detect_test_extensions()\n        self.detect_readline_curses()\n        self.detect_crypt()\n        self.detect_socket()\n        self.detect_openssl_hashlib()\n        self.detect_hash_builtins()\n        self.detect_dbm_gdbm()\n        self.detect_sqlite()\n        self.detect_platform_specific_exts()\n        self.detect_nis()\n        self.detect_compress_exts()\n        self.detect_expat_elementtree()\n        self.detect_multibytecodecs()\n        self.detect_decimal()\n        self.detect_ctypes()\n        self.detect_multiprocessing()\n        if not self.detect_tkinter():\n            self.missing.append('_tkinter')\n        self.detect_uuid()\n\n##         # Uncomment these lines if you want to play with xxmodule.c\n##         self.add(Extension('xx', ['xxmodule.c']))\n\n        if 'd' not in sysconfig.get_config_var('ABIFLAGS'):\n            self.add(Extension('xxlimited', ['xxlimited.c'],\n                               define_macros=[('Py_LIMITED_API', '0x03050000')]))\n\n    def detect_tkinter_explicitly(self):\n        # Build _tkinter using explicit locations for Tcl/Tk.\n        #\n        # This is enabled when both arguments are given to ./configure:\n        #\n        #     --with-tcltk-includes=\"-I/path/to/tclincludes \\\n        #                            -I/path/to/tkincludes\"\n        #     --with-tcltk-libs=\"-L/path/to/tcllibs -ltclm.n \\\n        #                        -L/path/to/tklibs -ltkm.n\"\n        #\n        # These values can also be specified or overridden via make:\n        #    make TCLTK_INCLUDES=\"...\" TCLTK_LIBS=\"...\"\n        #\n        # This can be useful for building and testing tkinter with multiple\n        # versions of Tcl/Tk.  Note that a build of Tk depends on a particular\n        # build of Tcl so you need to specify both arguments and use care when\n        # overriding.\n\n        # The _TCLTK variables are created in the Makefile sharedmods target.\n        tcltk_includes = os.environ.get('_TCLTK_INCLUDES')\n        tcltk_libs = os.environ.get('_TCLTK_LIBS')\n        if not (tcltk_includes and tcltk_libs):\n            # Resume default configuration search.\n            return False\n\n        extra_compile_args = tcltk_includes.split()\n        extra_link_args = tcltk_libs.split()\n        self.add(Extension('_tkinter', ['_tkinter.c', 'tkappinit.c'],\n                           define_macros=[('WITH_APPINIT', 1)],\n                           extra_compile_args = extra_compile_args,\n                           extra_link_args = extra_link_args))\n        return True\n\n    def detect_tkinter_darwin(self):\n        # The _tkinter module, using frameworks. Since frameworks are quite\n        # different the UNIX search logic is not sharable.\n        from os.path import join, exists\n        framework_dirs = [\n            '/Library/Frameworks',\n            '/System/Library/Frameworks/',\n            join(os.getenv('HOME'), '/Library/Frameworks')\n        ]\n\n        sysroot = macosx_sdk_root()\n\n        # Find the directory that contains the Tcl.framework and Tk.framework\n        # bundles.\n        # XXX distutils should support -F!\n        for F in framework_dirs:\n            # both Tcl.framework and Tk.framework should be present\n\n\n            for fw in 'Tcl', 'Tk':\n                if is_macosx_sdk_path(F):\n                    if not exists(join(sysroot, F[1:], fw + '.framework')):\n                        break\n                else:\n                    if not exists(join(F, fw + '.framework')):\n                        break\n            else:\n                # ok, F is now directory with both frameworks. Continure\n                # building\n                break\n        else:\n            # Tk and Tcl frameworks not found. Normal \"unix\" tkinter search\n            # will now resume.\n            return False\n\n        # For 8.4a2, we must add -I options that point inside the Tcl and Tk\n        # frameworks. In later release we should hopefully be able to pass\n        # the -F option to gcc, which specifies a framework lookup path.\n        #\n        include_dirs = [\n            join(F, fw + '.framework', H)\n            for fw in ('Tcl', 'Tk')\n            for H in ('Headers', 'Versions/Current/PrivateHeaders')\n        ]\n\n        # For 8.4a2, the X11 headers are not included. Rather than include a\n        # complicated search, this is a hard-coded path. It could bail out\n        # if X11 libs are not found...\n        include_dirs.append('/usr/X11R6/include')\n        frameworks = ['-framework', 'Tcl', '-framework', 'Tk']\n\n        # All existing framework builds of Tcl/Tk don't support 64-bit\n        # architectures.\n        cflags = sysconfig.get_config_vars('CFLAGS')[0]\n        archs = re.findall(r'-arch\\s+(\\w+)', cflags)\n\n        tmpfile = os.path.join(self.build_temp, 'tk.arch')\n        if not os.path.exists(self.build_temp):\n            os.makedirs(self.build_temp)\n\n        # Note: cannot use os.popen or subprocess here, that\n        # requires extensions that are not available here.\n        if is_macosx_sdk_path(F):\n            os.system(\"file %s/Tk.framework/Tk | grep 'for architecture' > %s\"%(os.path.join(sysroot, F[1:]), tmpfile))\n        else:\n            os.system(\"file %s/Tk.framework/Tk | grep 'for architecture' > %s\"%(F, tmpfile))\n\n        with open(tmpfile) as fp:\n            detected_archs = []\n            for ln in fp:\n                a = ln.split()[-1]\n                if a in archs:\n                    detected_archs.append(ln.split()[-1])\n        os.unlink(tmpfile)\n\n        for a in detected_archs:\n            frameworks.append('-arch')\n            frameworks.append(a)\n\n        self.add(Extension('_tkinter', ['_tkinter.c', 'tkappinit.c'],\n                           define_macros=[('WITH_APPINIT', 1)],\n                           include_dirs=include_dirs,\n                           libraries=[],\n                           extra_compile_args=frameworks[2:],\n                           extra_link_args=frameworks))\n        return True\n\n    def detect_tkinter(self):\n        # The _tkinter module.\n\n        # Check whether --with-tcltk-includes and --with-tcltk-libs were\n        # configured or passed into the make target.  If so, use these values\n        # to build tkinter and bypass the searches for Tcl and TK in standard\n        # locations.\n        if self.detect_tkinter_explicitly():\n            return True\n\n        # Rather than complicate the code below, detecting and building\n        # AquaTk is a separate method. Only one Tkinter will be built on\n        # Darwin - either AquaTk, if it is found, or X11 based Tk.\n        if (MACOS and self.detect_tkinter_darwin()):\n            return True\n\n        # Assume we haven't found any of the libraries or include files\n        # The versions with dots are used on Unix, and the versions without\n        # dots on Windows, for detection by cygwin.\n        tcllib = tklib = tcl_includes = tk_includes = None\n        for version in ['8.6', '86', '8.5', '85', '8.4', '84', '8.3', '83',\n                        '8.2', '82', '8.1', '81', '8.0', '80']:\n            tklib = self.compiler.find_library_file(self.lib_dirs,\n                                                        'tk' + version)\n            tcllib = self.compiler.find_library_file(self.lib_dirs,\n                                                         'tcl' + version)\n            if tklib and tcllib:\n                # Exit the loop when we've found the Tcl/Tk libraries\n                break\n\n        # Now check for the header files\n        if tklib and tcllib:\n            # Check for the include files on Debian and {Free,Open}BSD, where\n            # they're put in /usr/include/{tcl,tk}X.Y\n            dotversion = version\n            if '.' not in dotversion and \"bsd\" in HOST_PLATFORM.lower():\n                # OpenBSD and FreeBSD use Tcl/Tk library names like libtcl83.a,\n                # but the include subdirs are named like .../include/tcl8.3.\n                dotversion = dotversion[:-1] + '.' + dotversion[-1]\n            tcl_include_sub = []\n            tk_include_sub = []\n            for dir in self.inc_dirs:\n                tcl_include_sub += [dir + os.sep + \"tcl\" + dotversion]\n                tk_include_sub += [dir + os.sep + \"tk\" + dotversion]\n            tk_include_sub += tcl_include_sub\n            tcl_includes = find_file('tcl.h', self.inc_dirs, tcl_include_sub)\n            tk_includes = find_file('tk.h', self.inc_dirs, tk_include_sub)\n\n        if (tcllib is None or tklib is None or\n            tcl_includes is None or tk_includes is None):\n            self.announce(\"INFO: Can't locate Tcl/Tk libs and/or headers\", 2)\n            return False\n\n        # OK... everything seems to be present for Tcl/Tk.\n\n        include_dirs = []\n        libs = []\n        defs = []\n        added_lib_dirs = []\n        for dir in tcl_includes + tk_includes:\n            if dir not in include_dirs:\n                include_dirs.append(dir)\n\n        # Check for various platform-specific directories\n        if HOST_PLATFORM == 'sunos5':\n            include_dirs.append('/usr/openwin/include')\n            added_lib_dirs.append('/usr/openwin/lib')\n        elif os.path.exists('/usr/X11R6/include'):\n            include_dirs.append('/usr/X11R6/include')\n            added_lib_dirs.append('/usr/X11R6/lib64')\n            added_lib_dirs.append('/usr/X11R6/lib')\n        elif os.path.exists('/usr/X11R5/include'):\n            include_dirs.append('/usr/X11R5/include')\n            added_lib_dirs.append('/usr/X11R5/lib')\n        else:\n            # Assume default location for X11\n            include_dirs.append('/usr/X11/include')\n            added_lib_dirs.append('/usr/X11/lib')\n\n        # If Cygwin, then verify that X is installed before proceeding\n        if CYGWIN:\n            x11_inc = find_file('X11/Xlib.h', [], include_dirs)\n            if x11_inc is None:\n                return False\n\n        # Check for BLT extension\n        if self.compiler.find_library_file(self.lib_dirs + added_lib_dirs,\n                                               'BLT8.0'):\n            defs.append( ('WITH_BLT', 1) )\n            libs.append('BLT8.0')\n        elif self.compiler.find_library_file(self.lib_dirs + added_lib_dirs,\n                                                'BLT'):\n            defs.append( ('WITH_BLT', 1) )\n            libs.append('BLT')\n\n        # Add the Tcl/Tk libraries\n        libs.append('tk'+ version)\n        libs.append('tcl'+ version)\n\n        # Finally, link with the X11 libraries (not appropriate on cygwin)\n        if not CYGWIN:\n            libs.append('X11')\n\n        # XXX handle these, but how to detect?\n        # *** Uncomment and edit for PIL (TkImaging) extension only:\n        #       -DWITH_PIL -I../Extensions/Imaging/libImaging  tkImaging.c \\\n        # *** Uncomment and edit for TOGL extension only:\n        #       -DWITH_TOGL togl.c \\\n        # *** Uncomment these for TOGL extension only:\n        #       -lGL -lGLU -lXext -lXmu \\\n\n        self.add(Extension('_tkinter', ['_tkinter.c', 'tkappinit.c'],\n                           define_macros=[('WITH_APPINIT', 1)] + defs,\n                           include_dirs=include_dirs,\n                           libraries=libs,\n                           library_dirs=added_lib_dirs))\n        return True\n\n    def configure_ctypes_darwin(self, ext):\n        # Darwin (OS X) uses preconfigured files, in\n        # the Modules/_ctypes/libffi_osx directory.\n        ffi_srcdir = os.path.abspath(os.path.join(self.srcdir, 'Modules',\n                                                  '_ctypes', 'libffi_osx'))\n        sources = [os.path.join(ffi_srcdir, p)\n                   for p in ['ffi.c',\n                             'x86/darwin64.S',\n                             'x86/x86-darwin.S',\n                             'x86/x86-ffi_darwin.c',\n                             'x86/x86-ffi64.c',\n                             'powerpc/ppc-darwin.S',\n                             'powerpc/ppc-darwin_closure.S',\n                             'powerpc/ppc-ffi_darwin.c',\n                             'powerpc/ppc64-darwin_closure.S',\n                             ]]\n\n        # Add .S (preprocessed assembly) to C compiler source extensions.\n        self.compiler.src_extensions.append('.S')\n\n        include_dirs = [os.path.join(ffi_srcdir, 'include'),\n                        os.path.join(ffi_srcdir, 'powerpc')]\n        ext.include_dirs.extend(include_dirs)\n        ext.sources.extend(sources)\n        return True\n\n    def configure_ctypes(self, ext):\n        if not self.use_system_libffi:\n            if MACOS:\n                return self.configure_ctypes_darwin(ext)\n            print('INFO: Could not locate ffi libs and/or headers')\n            return False\n        return True\n\n    def detect_ctypes(self):\n        # Thomas Heller's _ctypes module\n        self.use_system_libffi = False\n        include_dirs = []\n        extra_compile_args = []\n        extra_link_args = []\n        sources = ['_ctypes/_ctypes.c',\n                   '_ctypes/callbacks.c',\n                   '_ctypes/callproc.c',\n                   '_ctypes/stgdict.c',\n                   '_ctypes/cfield.c']\n        depends = ['_ctypes/ctypes.h']\n\n        if MACOS:\n            sources.append('_ctypes/malloc_closure.c')\n            sources.append('_ctypes/darwin/dlfcn_simple.c')\n            extra_compile_args.append('-DMACOSX')\n            include_dirs.append('_ctypes/darwin')\n            # XXX Is this still needed?\n            # extra_link_args.extend(['-read_only_relocs', 'warning'])\n\n        elif HOST_PLATFORM == 'sunos5':\n            # XXX This shouldn't be necessary; it appears that some\n            # of the assembler code is non-PIC (i.e. it has relocations\n            # when it shouldn't. The proper fix would be to rewrite\n            # the assembler code to be PIC.\n            # This only works with GCC; the Sun compiler likely refuses\n            # this option. If you want to compile ctypes with the Sun\n            # compiler, please research a proper solution, instead of\n            # finding some -z option for the Sun compiler.\n            extra_link_args.append('-mimpure-text')\n\n        elif HOST_PLATFORM.startswith('hp-ux'):\n            extra_link_args.append('-fPIC')\n\n        ext = Extension('_ctypes',\n                        include_dirs=include_dirs,\n                        extra_compile_args=extra_compile_args,\n                        extra_link_args=extra_link_args,\n                        libraries=[],\n                        sources=sources,\n                        depends=depends)\n        self.add(ext)\n        if TEST_EXTENSIONS:\n            # function my_sqrt() needs libm for sqrt()\n            self.add(Extension('_ctypes_test',\n                               sources=['_ctypes/_ctypes_test.c'],\n                               libraries=['m']))\n\n        ffi_inc_dirs = self.inc_dirs.copy()\n        if MACOS:\n            if '--with-system-ffi' not in sysconfig.get_config_var(\"CONFIG_ARGS\"):\n                return\n            # OS X 10.5 comes with libffi.dylib; the include files are\n            # in /usr/include/ffi\n            ffi_inc_dirs.append('/usr/include/ffi')\n\n        ffi_inc = [sysconfig.get_config_var(\"LIBFFI_INCLUDEDIR\")]\n        if not ffi_inc or ffi_inc[0] == '':\n            ffi_inc = find_file('ffi.h', [], ffi_inc_dirs)\n        if ffi_inc is not None:\n            ffi_h = ffi_inc[0] + '/ffi.h'\n            if not os.path.exists(ffi_h):\n                ffi_inc = None\n                print('Header file {} does not exist'.format(ffi_h))\n        ffi_lib = None\n        if ffi_inc is not None:\n            for lib_name in ('ffi', 'ffi_pic'):\n                if (self.compiler.find_library_file(self.lib_dirs, lib_name)):\n                    ffi_lib = lib_name\n                    break\n\n        if ffi_inc and ffi_lib:\n            ext.include_dirs.extend(ffi_inc)\n            ext.libraries.append(ffi_lib)\n            self.use_system_libffi = True\n\n        if sysconfig.get_config_var('HAVE_LIBDL'):\n            # for dlopen, see bpo-32647\n            ext.libraries.append('dl')\n\n    def detect_decimal(self):\n        # Stefan Krah's _decimal module\n        extra_compile_args = []\n        undef_macros = []\n        if '--with-system-libmpdec' in sysconfig.get_config_var(\"CONFIG_ARGS\"):\n            include_dirs = []\n            libraries = [':libmpdec.so.2']\n            sources = ['_decimal/_decimal.c']\n            depends = ['_decimal/docstrings.h']\n        else:\n            include_dirs = [os.path.abspath(os.path.join(self.srcdir,\n                                                         'Modules',\n                                                         '_decimal',\n                                                         'libmpdec'))]\n            libraries = ['m']\n            sources = [\n              '_decimal/_decimal.c',\n              '_decimal/libmpdec/basearith.c',\n              '_decimal/libmpdec/constants.c',\n              '_decimal/libmpdec/context.c',\n              '_decimal/libmpdec/convolute.c',\n              '_decimal/libmpdec/crt.c',\n              '_decimal/libmpdec/difradix2.c',\n              '_decimal/libmpdec/fnt.c',\n              '_decimal/libmpdec/fourstep.c',\n              '_decimal/libmpdec/io.c',\n              '_decimal/libmpdec/memory.c',\n              '_decimal/libmpdec/mpdecimal.c',\n              '_decimal/libmpdec/numbertheory.c',\n              '_decimal/libmpdec/sixstep.c',\n              '_decimal/libmpdec/transpose.c',\n              ]\n            depends = [\n              '_decimal/docstrings.h',\n              '_decimal/libmpdec/basearith.h',\n              '_decimal/libmpdec/bits.h',\n              '_decimal/libmpdec/constants.h',\n              '_decimal/libmpdec/convolute.h',\n              '_decimal/libmpdec/crt.h',\n              '_decimal/libmpdec/difradix2.h',\n              '_decimal/libmpdec/fnt.h',\n              '_decimal/libmpdec/fourstep.h',\n              '_decimal/libmpdec/io.h',\n              '_decimal/libmpdec/mpalloc.h',\n              '_decimal/libmpdec/mpdecimal.h',\n              '_decimal/libmpdec/numbertheory.h',\n              '_decimal/libmpdec/sixstep.h',\n              '_decimal/libmpdec/transpose.h',\n              '_decimal/libmpdec/typearith.h',\n              '_decimal/libmpdec/umodarith.h',\n              ]\n\n        config = {\n          'x64':     [('CONFIG_64','1'), ('ASM','1')],\n          'uint128': [('CONFIG_64','1'), ('ANSI','1'), ('HAVE_UINT128_T','1')],\n          'ansi64':  [('CONFIG_64','1'), ('ANSI','1')],\n          'ppro':    [('CONFIG_32','1'), ('PPRO','1'), ('ASM','1')],\n          'ansi32':  [('CONFIG_32','1'), ('ANSI','1')],\n          'ansi-legacy': [('CONFIG_32','1'), ('ANSI','1'),\n                          ('LEGACY_COMPILER','1')],\n          'universal':   [('UNIVERSAL','1')]\n        }\n\n        cc = sysconfig.get_config_var('CC')\n        sizeof_size_t = sysconfig.get_config_var('SIZEOF_SIZE_T')\n        machine = os.environ.get('PYTHON_DECIMAL_WITH_MACHINE')\n\n        if machine:\n            # Override automatic configuration to facilitate testing.\n            define_macros = config[machine]\n        elif MACOS:\n            # Universal here means: build with the same options Python\n            # was built with.\n            define_macros = config['universal']\n        elif sizeof_size_t == 8:\n            if sysconfig.get_config_var('HAVE_GCC_ASM_FOR_X64'):\n                define_macros = config['x64']\n            elif sysconfig.get_config_var('HAVE_GCC_UINT128_T'):\n                define_macros = config['uint128']\n            else:\n                define_macros = config['ansi64']\n        elif sizeof_size_t == 4:\n            ppro = sysconfig.get_config_var('HAVE_GCC_ASM_FOR_X87')\n            if ppro and ('gcc' in cc or 'clang' in cc) and \\\n               not 'sunos' in HOST_PLATFORM:\n                # solaris: problems with register allocation.\n                # icc >= 11.0 works as well.\n                define_macros = config['ppro']\n                extra_compile_args.append('-Wno-unknown-pragmas')\n            else:\n                define_macros = config['ansi32']\n        else:\n            raise DistutilsError(\"_decimal: unsupported architecture\")\n\n        # Workarounds for toolchain bugs:\n        if sysconfig.get_config_var('HAVE_IPA_PURE_CONST_BUG'):\n            # Some versions of gcc miscompile inline asm:\n            # http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46491\n            # http://gcc.gnu.org/ml/gcc/2010-11/msg00366.html\n            extra_compile_args.append('-fno-ipa-pure-const')\n        if sysconfig.get_config_var('HAVE_GLIBC_MEMMOVE_BUG'):\n            # _FORTIFY_SOURCE wrappers for memmove and bcopy are incorrect:\n            # http://sourceware.org/ml/libc-alpha/2010-12/msg00009.html\n            undef_macros.append('_FORTIFY_SOURCE')\n\n        # Uncomment for extra functionality:\n        #define_macros.append(('EXTRA_FUNCTIONALITY', 1))\n        self.add(Extension('_decimal',\n                           include_dirs=include_dirs,\n                           libraries=libraries,\n                           define_macros=define_macros,\n                           undef_macros=undef_macros,\n                           extra_compile_args=extra_compile_args,\n                           sources=sources,\n                           depends=depends))\n\n    def detect_openssl_hashlib(self):\n        # Detect SSL support for the socket module (via _ssl)\n        config_vars = sysconfig.get_config_vars()\n\n        def split_var(name, sep):\n            # poor man's shlex, the re module is not available yet.\n            value = config_vars.get(name)\n            if not value:\n                return ()\n            # This trick works because ax_check_openssl uses --libs-only-L,\n            # --libs-only-l, and --cflags-only-I.\n            value = ' ' + value\n            sep = ' ' + sep\n            return [v.strip() for v in value.split(sep) if v.strip()]\n\n        openssl_includes = split_var('OPENSSL_INCLUDES', '-I')\n        openssl_libdirs = split_var('OPENSSL_LDFLAGS', '-L')\n        openssl_libs = split_var('OPENSSL_LIBS', '-l')\n        if not openssl_libs:\n            # libssl and libcrypto not found\n            self.missing.extend(['_ssl', '_hashlib'])\n            return None, None\n\n        # Find OpenSSL includes\n        ssl_incs = find_file(\n            'openssl/ssl.h', self.inc_dirs, openssl_includes\n        )\n        if ssl_incs is None:\n            self.missing.extend(['_ssl', '_hashlib'])\n            return None, None\n\n        # OpenSSL 1.0.2 uses Kerberos for KRB5 ciphers\n        krb5_h = find_file(\n            'krb5.h', self.inc_dirs,\n            ['/usr/kerberos/include']\n        )\n        if krb5_h:\n            ssl_incs.extend(krb5_h)\n\n        if config_vars.get(\"HAVE_X509_VERIFY_PARAM_SET1_HOST\"):\n            self.add(Extension(\n                '_ssl', ['_ssl.c'],\n                include_dirs=openssl_includes,\n                library_dirs=openssl_libdirs,\n                libraries=openssl_libs,\n                depends=['socketmodule.h', '_ssl/debughelpers.c'])\n            )\n        else:\n            self.missing.append('_ssl')\n\n        self.add(Extension('_hashlib', ['_hashopenssl.c'],\n                           depends=['hashlib.h'],\n                           include_dirs=openssl_includes,\n                           library_dirs=openssl_libdirs,\n                           libraries=openssl_libs))\n\n    def detect_hash_builtins(self):\n        # We always compile these even when OpenSSL is available (issue #14693).\n        # It's harmless and the object code is tiny (40-50 KiB per module,\n        # only loaded when actually used).\n        self.add(Extension('_sha256', ['sha256module.c'],\n                           depends=['hashlib.h']))\n        self.add(Extension('_sha512', ['sha512module.c'],\n                           depends=['hashlib.h']))\n        self.add(Extension('_md5', ['md5module.c'],\n                           depends=['hashlib.h']))\n        self.add(Extension('_sha1', ['sha1module.c'],\n                           depends=['hashlib.h']))\n\n        blake2_deps = glob(os.path.join(escape(self.srcdir),\n                                        'Modules/_blake2/impl/*'))\n        blake2_deps.append('hashlib.h')\n\n        self.add(Extension('_blake2',\n                           ['_blake2/blake2module.c',\n                            '_blake2/blake2b_impl.c',\n                            '_blake2/blake2s_impl.c'],\n                           depends=blake2_deps))\n\n        sha3_deps = glob(os.path.join(escape(self.srcdir),\n                                      'Modules/_sha3/kcp/*'))\n        sha3_deps.append('hashlib.h')\n        self.add(Extension('_sha3',\n                           ['_sha3/sha3module.c'],\n                           depends=sha3_deps))\n\n    def detect_nis(self):\n        if MS_WINDOWS or CYGWIN or HOST_PLATFORM == 'qnx6':\n            self.missing.append('nis')\n            return\n\n        libs = []\n        library_dirs = []\n        includes_dirs = []\n\n        # bpo-32521: glibc has deprecated Sun RPC for some time. Fedora 28\n        # moved headers and libraries to libtirpc and libnsl. The headers\n        # are in tircp and nsl sub directories.\n        rpcsvc_inc = find_file(\n            'rpcsvc/yp_prot.h', self.inc_dirs,\n            [os.path.join(inc_dir, 'nsl') for inc_dir in self.inc_dirs]\n        )\n        rpc_inc = find_file(\n            'rpc/rpc.h', self.inc_dirs,\n            [os.path.join(inc_dir, 'tirpc') for inc_dir in self.inc_dirs]\n        )\n        if rpcsvc_inc is None or rpc_inc is None:\n            # not found\n            self.missing.append('nis')\n            return\n        includes_dirs.extend(rpcsvc_inc)\n        includes_dirs.extend(rpc_inc)\n\n        if self.compiler.find_library_file(self.lib_dirs, 'nsl'):\n            libs.append('nsl')\n        else:\n            # libnsl-devel: check for libnsl in nsl/ subdirectory\n            nsl_dirs = [os.path.join(lib_dir, 'nsl') for lib_dir in self.lib_dirs]\n            libnsl = self.compiler.find_library_file(nsl_dirs, 'nsl')\n            if libnsl is not None:\n                library_dirs.append(os.path.dirname(libnsl))\n                libs.append('nsl')\n\n        if self.compiler.find_library_file(self.lib_dirs, 'tirpc'):\n            libs.append('tirpc')\n\n        self.add(Extension('nis', ['nismodule.c'],\n                           libraries=libs,\n                           library_dirs=library_dirs,\n                           include_dirs=includes_dirs))\n\n\nclass PyBuildInstall(install):\n    # Suppress the warning about installation into the lib_dynload\n    # directory, which is not in sys.path when running Python during\n    # installation:\n    def initialize_options (self):\n        install.initialize_options(self)\n        self.warn_dir=0\n\n    # Customize subcommands to not install an egg-info file for Python\n    sub_commands = [('install_lib', install.has_lib),\n                    ('install_headers', install.has_headers),\n                    ('install_scripts', install.has_scripts),\n                    ('install_data', install.has_data)]\n\n\nclass PyBuildInstallLib(install_lib):\n    # Do exactly what install_lib does but make sure correct access modes get\n    # set on installed directories and files. All installed files with get\n    # mode 644 unless they are a shared library in which case they will get\n    # mode 755. All installed directories will get mode 755.\n\n    # this is works for EXT_SUFFIX too, which ends with SHLIB_SUFFIX\n    shlib_suffix = sysconfig.get_config_var(\"SHLIB_SUFFIX\")\n\n    def install(self):\n        outfiles = install_lib.install(self)\n        self.set_file_modes(outfiles, 0o644, 0o755)\n        self.set_dir_modes(self.install_dir, 0o755)\n        return outfiles\n\n    def set_file_modes(self, files, defaultMode, sharedLibMode):\n        if not files: return\n\n        for filename in files:\n            if os.path.islink(filename): continue\n            mode = defaultMode\n            if filename.endswith(self.shlib_suffix): mode = sharedLibMode\n            log.info(\"changing mode of %s to %o\", filename, mode)\n            if not self.dry_run: os.chmod(filename, mode)\n\n    def set_dir_modes(self, dirname, mode):\n        for dirpath, dirnames, fnames in os.walk(dirname):\n            if os.path.islink(dirpath):\n                continue\n            log.info(\"changing mode of %s to %o\", dirpath, mode)\n            if not self.dry_run: os.chmod(dirpath, mode)\n\n\nclass PyBuildScripts(build_scripts):\n    def copy_scripts(self):\n        outfiles, updated_files = build_scripts.copy_scripts(self)\n        fullversion = '-{0[0]}.{0[1]}'.format(sys.version_info)\n        minoronly = '.{0[1]}'.format(sys.version_info)\n        newoutfiles = []\n        newupdated_files = []\n        for filename in outfiles:\n            if filename.endswith('2to3'):\n                newfilename = filename + fullversion\n            else:\n                newfilename = filename + minoronly\n            log.info('renaming %s to %s', filename, newfilename)\n            os.rename(filename, newfilename)\n            newoutfiles.append(newfilename)\n            if filename in updated_files:\n                newupdated_files.append(newfilename)\n        return newoutfiles, newupdated_files\n\n\ndef main():\n    set_compiler_flags('CFLAGS', 'PY_CFLAGS_NODIST')\n    set_compiler_flags('LDFLAGS', 'PY_LDFLAGS_NODIST')\n\n    class DummyProcess:\n        \"\"\"Hack for parallel build\"\"\"\n        ProcessPoolExecutor = None\n\n    sys.modules['concurrent.futures.process'] = DummyProcess\n\n    # turn off warnings when deprecated modules are imported\n    import warnings\n    warnings.filterwarnings(\"ignore\",category=DeprecationWarning)\n    setup(# PyPI Metadata (PEP 301)\n          name = \"Python\",\n          version = sys.version.split()[0],\n          url = \"http://www.python.org/%d.%d\" % sys.version_info[:2],\n          maintainer = \"Guido van Rossum and the Python community\",\n          maintainer_email = \"python-dev@python.org\",\n          description = \"A high-level object-oriented programming language\",\n          long_description = SUMMARY.strip(),\n          license = \"PSF license\",\n          classifiers = [x for x in CLASSIFIERS.split(\"\\n\") if x],\n          platforms = [\"Many\"],\n\n          # Build info\n          cmdclass = {'build_ext': PyBuildExt,\n                      'build_scripts': PyBuildScripts,\n                      'install': PyBuildInstall,\n                      'install_lib': PyBuildInstallLib},\n          # The struct module is defined here, because build_ext won't be\n          # called unless there's at least one extension module defined.\n          ext_modules=[Extension('_struct', ['_struct.c'])],\n\n          # If you change the scripts installed here, you also need to\n          # check the PyBuildScripts command above, and change the links\n          # created by the bininstall target in Makefile.pre.in\n          scripts = [\"Tools/scripts/pydoc3\", \"Tools/scripts/idle3\",\n                     \"Tools/scripts/2to3\"]\n        )\n\n# --install-platlib\nif __name__ == '__main__':\n    main()\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/configure.ac": "dnl ***********************************************\ndnl * Please run autoreconf to test your changes! *\ndnl ***********************************************\n\n# Set VERSION so we only need to edit in one place (i.e., here)\nm4_define(PYTHON_VERSION, 3.8)\n\nAC_PREREQ([2.69])\n\nAC_INIT([python],[PYTHON_VERSION],[https://bugs.python.org/])\n\nAC_CONFIG_MACRO_DIR(m4)\n\nAC_SUBST(BASECPPFLAGS)\nif test \"$srcdir\" != . -a \"$srcdir\" != \"$(pwd)\"; then\n    # If we're building out-of-tree, we need to make sure the following\n    # resources get picked up before their $srcdir counterparts.\n    #   Objects/ -> typeslots.inc\n    #   Include/ -> Python-ast.h, graminit.h\n    #   Python/  -> importlib.h\n    # (A side effect of this is that these resources will automatically be\n    #  regenerated when building out-of-tree, regardless of whether or not\n    #  the $srcdir counterpart is up-to-date.  This is an acceptable trade\n    #  off.)\n    BASECPPFLAGS=\"-IObjects -IInclude -IPython\"\nelse\n    BASECPPFLAGS=\"\"\nfi\n\nAC_SUBST(GITVERSION)\nAC_SUBST(GITTAG)\nAC_SUBST(GITBRANCH)\n\nif test -e $srcdir/.git\nthen\nAC_CHECK_PROG(HAS_GIT, git, found, not-found)\nelse\nHAS_GIT=no-repository\nfi\nif test $HAS_GIT = found\nthen\n    GITVERSION=\"git --git-dir \\$(srcdir)/.git rev-parse --short HEAD\"\n    GITTAG=\"git --git-dir \\$(srcdir)/.git describe --all --always --dirty\"\n    GITBRANCH=\"git --git-dir \\$(srcdir)/.git name-rev --name-only HEAD\"\nelse\n    GITVERSION=\"\"\n    GITTAG=\"\"\n    GITBRANCH=\"\"\nfi\n\nAC_CONFIG_SRCDIR([Include/object.h])\nAC_CONFIG_HEADER(pyconfig.h)\n\nAC_CANONICAL_HOST\nAC_SUBST(build)\nAC_SUBST(host)\n\n# pybuilddir.txt will be created by --generate-posix-vars in the Makefile\nrm -f pybuilddir.txt\n\nAC_CHECK_PROGS(PYTHON_FOR_REGEN, python$PACKAGE_VERSION python3 python, python3)\nAC_SUBST(PYTHON_FOR_REGEN)\n\nif test \"$cross_compiling\" = yes; then\n    AC_MSG_CHECKING([for python interpreter for cross build])\n    if test -z \"$PYTHON_FOR_BUILD\"; then\n        for interp in python$PACKAGE_VERSION python3 python; do\n\t    which $interp >/dev/null 2>&1 || continue\n\t    if $interp -c \"import sys;sys.exit(not '.'.join(str(n) for n in sys.version_info@<:@:2@:>@) == '$PACKAGE_VERSION')\"; then\n\t        break\n\t    fi\n            interp=\n\tdone\n        if test x$interp = x; then\n\t    AC_MSG_ERROR([python$PACKAGE_VERSION interpreter not found])\n\tfi\n        AC_MSG_RESULT($interp)\n\tPYTHON_FOR_BUILD='_PYTHON_PROJECT_BASE=$(abs_builddir) _PYTHON_HOST_PLATFORM=$(_PYTHON_HOST_PLATFORM) PYTHONPATH=$(shell test -f pybuilddir.txt && echo $(abs_builddir)/`cat pybuilddir.txt`:)$(srcdir)/Lib _PYTHON_SYSCONFIGDATA_NAME=_sysconfigdata_$(ABIFLAGS)_$(MACHDEP)_$(MULTIARCH) '$interp\n    fi\nelif test \"$cross_compiling\" = maybe; then\n    AC_MSG_ERROR([Cross compiling required --host=HOST-TUPLE and --build=ARCH])\nelse\n    PYTHON_FOR_BUILD='./$(BUILDPYTHON) -E'\nfi\nAC_SUBST(PYTHON_FOR_BUILD)\n\ndnl Ensure that if prefix is specified, it does not end in a slash. If\ndnl it does, we get path names containing '//' which is both ugly and\ndnl can cause trouble.\n\ndnl Last slash shouldn't be stripped if prefix=/\nif test \"$prefix\" != \"/\"; then\n    prefix=`echo \"$prefix\" | sed -e 's/\\/$//g'`\nfi\n\ndnl This is for stuff that absolutely must end up in pyconfig.h.\ndnl Please use pyport.h instead, if possible.\nAH_TOP([\n#ifndef Py_PYCONFIG_H\n#define Py_PYCONFIG_H\n])\nAH_BOTTOM([\n/* Define the macros needed if on a UnixWare 7.x system. */\n#if defined(__USLC__) && defined(__SCO_VERSION__)\n#define STRICT_SYSV_CURSES /* Don't use ncurses extensions */\n#endif\n\n#endif /*Py_PYCONFIG_H*/\n])\n\n# We don't use PACKAGE_ variables, and they cause conflicts\n# with other autoconf-based packages that include Python.h\ngrep -v 'define PACKAGE_' <confdefs.h >confdefs.h.new\nrm confdefs.h\nmv confdefs.h.new confdefs.h\n\nAC_SUBST(VERSION)\nVERSION=PYTHON_VERSION\n\n# Version number of Python's own shared library file.\nAC_SUBST(SOVERSION)\nSOVERSION=1.0\n\n# The later defininition of _XOPEN_SOURCE disables certain features\n# on Linux, so we need _GNU_SOURCE to re-enable them (makedev, tm_zone).\nAC_DEFINE(_GNU_SOURCE, 1, [Define on Linux to activate all library features])\n\n# The later defininition of _XOPEN_SOURCE and _POSIX_C_SOURCE disables\n# certain features on NetBSD, so we need _NETBSD_SOURCE to re-enable\n# them.\nAC_DEFINE(_NETBSD_SOURCE, 1, [Define on NetBSD to activate all library features])\n\n# The later defininition of _XOPEN_SOURCE and _POSIX_C_SOURCE disables\n# certain features on FreeBSD, so we need __BSD_VISIBLE to re-enable\n# them.\nAC_DEFINE(__BSD_VISIBLE, 1, [Define on FreeBSD to activate all library features])\n\n# The later defininition of _XOPEN_SOURCE and _POSIX_C_SOURCE disables\n# certain features on Mac OS X, so we need _DARWIN_C_SOURCE to re-enable\n# them.\nAC_DEFINE(_DARWIN_C_SOURCE, 1, [Define on Darwin to activate all library features])\n\n\ndefine_xopen_source=yes\n\n# Arguments passed to configure.\nAC_SUBST(CONFIG_ARGS)\nCONFIG_ARGS=\"$ac_configure_args\"\n\nAC_MSG_CHECKING([for --enable-universalsdk])\nAC_ARG_ENABLE(universalsdk,\n\tAS_HELP_STRING([--enable-universalsdk@<:@=SDKDIR@:>@], [Build fat binary against Mac OS X SDK]),\n[\n\tcase $enableval in\n\tyes)\n\t\t# Locate the best usable SDK, see Mac/README for more\n\t\t# information\n\t\tenableval=\"`/usr/bin/xcodebuild -version -sdk macosx Path 2>/dev/null`\"\n\t\tif ! ( echo $enableval | grep -E '\\.sdk' 1>/dev/null )\n\t\tthen\n\t\t\tenableval=/Developer/SDKs/MacOSX10.4u.sdk\n\t\t\tif test ! -d \"${enableval}\"\n\t\t\tthen\n\t\t\t\tenableval=/\n\t\t\tfi\n\t\tfi\n\t\t;;\n\tesac\n\tcase $enableval in\n\tno)\n\t\tUNIVERSALSDK=\n\t\tenable_universalsdk=\n\t\t;;\n\t*)\n\t\tUNIVERSALSDK=$enableval\n\t\tif test ! -d \"${UNIVERSALSDK}\"\n\t\tthen\n\t\t\tAC_MSG_ERROR([--enable-universalsdk specifies non-existing SDK: ${UNIVERSALSDK}])\n\t\tfi\n\t\t;;\n\tesac\n\n],[\n   \tUNIVERSALSDK=\n\tenable_universalsdk=\n])\nif test -n \"${UNIVERSALSDK}\"\nthen\n\tAC_MSG_RESULT(${UNIVERSALSDK})\nelse\n\tAC_MSG_RESULT(no)\nfi\nAC_SUBST(UNIVERSALSDK)\n\nAC_SUBST(ARCH_RUN_32BIT)\nARCH_RUN_32BIT=\"\"\n\n# For backward compatibility reasons we prefer to select '32-bit' if available,\n# otherwise use 'intel'\nUNIVERSAL_ARCHS=\"32-bit\"\nif test \"`uname -s`\" = \"Darwin\"\nthen\n\tif test -n \"${UNIVERSALSDK}\"\n\tthen\n\t\tif test -z \"`/usr/bin/file -L \"${UNIVERSALSDK}/usr/lib/libSystem.dylib\" | grep ppc`\"\n\t\tthen\n\t\t\tUNIVERSAL_ARCHS=\"intel\"\n\t\tfi\n\tfi\nfi\n\nAC_SUBST(LIPO_32BIT_FLAGS)\nAC_MSG_CHECKING(for --with-universal-archs)\nAC_ARG_WITH(universal-archs,\n    AS_HELP_STRING([--with-universal-archs=ARCH], [select architectures for universal build (\"32-bit\", \"64-bit\", \"3-way\", \"intel\", \"intel-32\", \"intel-64\", or \"all\")]),\n[\n\tUNIVERSAL_ARCHS=\"$withval\"\n],\n[])\nif test -n \"${UNIVERSALSDK}\"\nthen\n\tAC_MSG_RESULT(${UNIVERSAL_ARCHS})\nelse\n\tAC_MSG_RESULT(no)\nfi\n\nAC_ARG_WITH(framework-name,\n              AS_HELP_STRING([--with-framework-name=FRAMEWORK],\n                             [specify an alternate name of the framework built with --enable-framework]),\n[\n    PYTHONFRAMEWORK=${withval}\n    PYTHONFRAMEWORKDIR=${withval}.framework\n    PYTHONFRAMEWORKIDENTIFIER=org.python.`echo $withval | tr '[A-Z]' '[a-z]'`\n    ],[\n    PYTHONFRAMEWORK=Python\n    PYTHONFRAMEWORKDIR=Python.framework\n    PYTHONFRAMEWORKIDENTIFIER=org.python.python\n])\ndnl quadrigraphs \"@<:@\" and \"@:>@\" produce \"[\" and \"]\" in the output\nAC_ARG_ENABLE(framework,\n              AS_HELP_STRING([--enable-framework@<:@=INSTALLDIR@:>@], [Build (MacOSX|Darwin) framework]),\n[\n\tcase $enableval in\n\tyes)\n\t\tenableval=/Library/Frameworks\n\tesac\n\tcase $enableval in\n\tno)\n\t\tPYTHONFRAMEWORK=\n\t\tPYTHONFRAMEWORKDIR=no-framework\n\t\tPYTHONFRAMEWORKPREFIX=\n\t\tPYTHONFRAMEWORKINSTALLDIR=\n\t\tFRAMEWORKINSTALLFIRST=\n\t\tFRAMEWORKINSTALLLAST=\n\t\tFRAMEWORKALTINSTALLFIRST=\n\t\tFRAMEWORKALTINSTALLLAST=\n\t\tFRAMEWORKPYTHONW=\n\t\tif test \"x${prefix}\" = \"xNONE\"; then\n\t\t\tFRAMEWORKUNIXTOOLSPREFIX=\"${ac_default_prefix}\"\n\t\telse\n\t\t\tFRAMEWORKUNIXTOOLSPREFIX=\"${prefix}\"\n\t\tfi\n\t\tenable_framework=\n\t\t;;\n\t*)\n\t\tPYTHONFRAMEWORKPREFIX=\"${enableval}\"\n\t\tPYTHONFRAMEWORKINSTALLDIR=$PYTHONFRAMEWORKPREFIX/$PYTHONFRAMEWORKDIR\n\t\tFRAMEWORKINSTALLFIRST=\"frameworkinstallstructure\"\n\t\tFRAMEWORKALTINSTALLFIRST=\"frameworkinstallstructure \"\n\t\tFRAMEWORKINSTALLLAST=\"frameworkinstallmaclib frameworkinstallapps frameworkinstallunixtools\"\n\t\tFRAMEWORKALTINSTALLLAST=\"frameworkinstallmaclib frameworkinstallapps frameworkaltinstallunixtools\"\n\t\tFRAMEWORKPYTHONW=\"frameworkpythonw\"\n\t\tFRAMEWORKINSTALLAPPSPREFIX=\"/Applications\"\n\n\t\tif test \"x${prefix}\" = \"xNONE\" ; then\n\t\t\tFRAMEWORKUNIXTOOLSPREFIX=\"${ac_default_prefix}\"\n\n\t\telse\n\t\t\tFRAMEWORKUNIXTOOLSPREFIX=\"${prefix}\"\n\t\tfi\n\n\t\tcase \"${enableval}\" in\n\t\t/System*)\n\t\t\tFRAMEWORKINSTALLAPPSPREFIX=\"/Applications\"\n\t\t\tif test \"${prefix}\" = \"NONE\" ; then\n\t\t\t\t# See below\n\t\t\t\tFRAMEWORKUNIXTOOLSPREFIX=\"/usr\"\n\t\t\tfi\n\t\t\t;;\n\n\t\t/Library*)\n\t\t\tFRAMEWORKINSTALLAPPSPREFIX=\"/Applications\"\n\t\t\t;;\n\n\t\t*/Library/Frameworks)\n\t\t\tMDIR=\"`dirname \"${enableval}\"`\"\n\t\t\tMDIR=\"`dirname \"${MDIR}\"`\"\n\t\t\tFRAMEWORKINSTALLAPPSPREFIX=\"${MDIR}/Applications\"\n\n\t\t\tif test \"${prefix}\" = \"NONE\"; then\n\t\t\t\t# User hasn't specified the\n\t\t\t\t# --prefix option, but wants to install\n\t\t\t\t# the framework in a non-default location,\n\t\t\t\t# ensure that the compatibility links get\n\t\t\t\t# installed relative to that prefix as well\n\t\t\t\t# instead of in /usr/local.\n\t\t\t\tFRAMEWORKUNIXTOOLSPREFIX=\"${MDIR}\"\n\t\t\tfi\n\t\t\t;;\n\n\t\t*)\n\t\t\tFRAMEWORKINSTALLAPPSPREFIX=\"/Applications\"\n\t\t\t;;\n\t\tesac\n\n\t\tprefix=$PYTHONFRAMEWORKINSTALLDIR/Versions/$VERSION\n\n\t\t# Add files for Mac specific code to the list of output\n\t\t# files:\n\t\tAC_CONFIG_FILES(Mac/Makefile)\n\t\tAC_CONFIG_FILES(Mac/PythonLauncher/Makefile)\n\t\tAC_CONFIG_FILES(Mac/Resources/framework/Info.plist)\n\t\tAC_CONFIG_FILES(Mac/Resources/app/Info.plist)\n\tesac\n\t],[\n\tPYTHONFRAMEWORK=\n\tPYTHONFRAMEWORKDIR=no-framework\n\tPYTHONFRAMEWORKPREFIX=\n\tPYTHONFRAMEWORKINSTALLDIR=\n\tFRAMEWORKINSTALLFIRST=\n\tFRAMEWORKINSTALLLAST=\n\tFRAMEWORKALTINSTALLFIRST=\n\tFRAMEWORKALTINSTALLLAST=\n\tFRAMEWORKPYTHONW=\n\tif test \"x${prefix}\" = \"xNONE\" ; then\n\t\tFRAMEWORKUNIXTOOLSPREFIX=\"${ac_default_prefix}\"\n\telse\n\t\tFRAMEWORKUNIXTOOLSPREFIX=\"${prefix}\"\n\tfi\n\tenable_framework=\n\n])\nAC_SUBST(PYTHONFRAMEWORK)\nAC_SUBST(PYTHONFRAMEWORKIDENTIFIER)\nAC_SUBST(PYTHONFRAMEWORKDIR)\nAC_SUBST(PYTHONFRAMEWORKPREFIX)\nAC_SUBST(PYTHONFRAMEWORKINSTALLDIR)\nAC_SUBST(FRAMEWORKINSTALLFIRST)\nAC_SUBST(FRAMEWORKINSTALLLAST)\nAC_SUBST(FRAMEWORKALTINSTALLFIRST)\nAC_SUBST(FRAMEWORKALTINSTALLLAST)\nAC_SUBST(FRAMEWORKPYTHONW)\nAC_SUBST(FRAMEWORKUNIXTOOLSPREFIX)\nAC_SUBST(FRAMEWORKINSTALLAPPSPREFIX)\n\nAC_DEFINE_UNQUOTED(_PYTHONFRAMEWORK, \"${PYTHONFRAMEWORK}\", [framework name])\n\n##AC_ARG_WITH(dyld,\n##            AS_HELP_STRING([--with-dyld],\n##                           [Use (OpenStep|Rhapsody) dynamic linker]))\n##\n# Set name for machine-dependent library files\nAC_ARG_VAR([MACHDEP], [name for machine-dependent library files])\nAC_MSG_CHECKING(MACHDEP)\nif test -z \"$MACHDEP\"\nthen\n    # avoid using uname for cross builds\n    if test \"$cross_compiling\" = yes; then\n       # ac_sys_system and ac_sys_release are used for setting\n       # a lot of different things including 'define_xopen_source'\n       # in the case statement below.\n\tcase \"$host\" in\n\t*-*-linux-android*)\n\t\tac_sys_system=Linux-android\n\t\t;;\n\t*-*-linux*)\n\t\tac_sys_system=Linux\n\t\t;;\n\t*-*-cygwin*)\n\t\tac_sys_system=Cygwin\n\t\t;;\n\t*-*-vxworks*)\n\t    ac_sys_system=VxWorks\n\t    ;;\n\t*)\n\t\t# for now, limit cross builds to known configurations\n\t\tMACHDEP=\"unknown\"\n\t\tAC_MSG_ERROR([cross build not supported for $host])\n\tesac\n\tac_sys_release=\n    else\n\tac_sys_system=`uname -s`\n\tif test \"$ac_sys_system\" = \"AIX\" \\\n\t-o \"$ac_sys_system\" = \"UnixWare\" -o \"$ac_sys_system\" = \"OpenUNIX\"; then\n\t\tac_sys_release=`uname -v`\n\telse\n\t\tac_sys_release=`uname -r`\n\tfi\n    fi\n    ac_md_system=`echo $ac_sys_system |\n\t\t\ttr -d '[/ ]' | tr '[[A-Z]]' '[[a-z]]'`\n    ac_md_release=`echo $ac_sys_release |\n\t\t\ttr -d '[/ ]' | sed 's/^[[A-Z]]\\.//' | sed 's/\\..*//'`\n    MACHDEP=\"$ac_md_system$ac_md_release\"\n\n    case $MACHDEP in\n\taix*) MACHDEP=\"aix\";;\n\tlinux*) MACHDEP=\"linux\";;\n\tcygwin*) MACHDEP=\"cygwin\";;\n\tdarwin*) MACHDEP=\"darwin\";;\n\t'')\tMACHDEP=\"unknown\";;\n    esac\nfi\nAC_MSG_RESULT(\"$MACHDEP\")\n\nAC_SUBST(_PYTHON_HOST_PLATFORM)\nif test \"$cross_compiling\" = yes; then\n\tcase \"$host\" in\n\t*-*-linux*)\n\t\tcase \"$host_cpu\" in\n\t\tarm*)\n\t\t\t_host_cpu=arm\n\t\t\t;;\n\t\t*)\n\t\t\t_host_cpu=$host_cpu\n\t\tesac\n\t\t;;\n\t*-*-cygwin*)\n\t\t_host_cpu=\n\t\t;;\n\t*-*-vxworks*)\n\t\t_host_cpu=$host_cpu\n\t\t;;\n\t*)\n\t\t# for now, limit cross builds to known configurations\n\t\tMACHDEP=\"unknown\"\n\t\tAC_MSG_ERROR([cross build not supported for $host])\n\tesac\n\t_PYTHON_HOST_PLATFORM=\"$MACHDEP${_host_cpu:+-$_host_cpu}\"\nfi\n\n# Some systems cannot stand _XOPEN_SOURCE being defined at all; they\n# disable features if it is defined, without any means to access these\n# features as extensions. For these systems, we skip the definition of\n# _XOPEN_SOURCE. Before adding a system to the list to gain access to\n# some feature, make sure there is no alternative way to access this\n# feature. Also, when using wildcards, make sure you have verified the\n# need for not defining _XOPEN_SOURCE on all systems matching the\n# wildcard, and that the wildcard does not include future systems\n# (which may remove their limitations).\ndnl quadrigraphs \"@<:@\" and \"@:>@\" produce \"[\" and \"]\" in the output\ncase $ac_sys_system/$ac_sys_release in\n  # On OpenBSD, select(2) is not available if _XOPEN_SOURCE is defined,\n  # even though select is a POSIX function. Reported by J. Ribbens.\n  # Reconfirmed for OpenBSD 3.3 by Zachary Hamm, for 3.4 by Jason Ish.\n  # In addition, Stefan Krah confirms that issue #1244610 exists through\n  # OpenBSD 4.6, but is fixed in 4.7.\n  OpenBSD/2.* | OpenBSD/3.* | OpenBSD/4.@<:@0123456@:>@)\n    define_xopen_source=no\n    # OpenBSD undoes our definition of __BSD_VISIBLE if _XOPEN_SOURCE is\n    # also defined. This can be overridden by defining _BSD_SOURCE\n    # As this has a different meaning on Linux, only define it on OpenBSD\n    AC_DEFINE(_BSD_SOURCE, 1, [Define on OpenBSD to activate all library features])\n    ;;\n  OpenBSD/*)\n    # OpenBSD undoes our definition of __BSD_VISIBLE if _XOPEN_SOURCE is\n    # also defined. This can be overridden by defining _BSD_SOURCE\n    # As this has a different meaning on Linux, only define it on OpenBSD\n    AC_DEFINE(_BSD_SOURCE, 1, [Define on OpenBSD to activate all library features])\n    ;;\n  # Defining _XOPEN_SOURCE on NetBSD version prior to the introduction of\n  # _NETBSD_SOURCE disables certain features (eg. setgroups). Reported by\n  # Marc Recht\n  NetBSD/1.5 | NetBSD/1.5.* | NetBSD/1.6 | NetBSD/1.6.* | NetBSD/1.6@<:@A-S@:>@)\n    define_xopen_source=no;;\n  # From the perspective of Solaris, _XOPEN_SOURCE is not so much a\n  # request to enable features supported by the standard as a request\n  # to disable features not supported by the standard.  The best way\n  # for Python to use Solaris is simply to leave _XOPEN_SOURCE out\n  # entirely and define __EXTENSIONS__ instead.\n  SunOS/*)\n    define_xopen_source=no;;\n  # On UnixWare 7, u_long is never defined with _XOPEN_SOURCE,\n  # but used in /usr/include/netinet/tcp.h. Reported by Tim Rice.\n  # Reconfirmed for 7.1.4 by Martin v. Loewis.\n  OpenUNIX/8.0.0| UnixWare/7.1.@<:@0-4@:>@)\n    define_xopen_source=no;;\n  # On OpenServer 5, u_short is never defined with _XOPEN_SOURCE,\n  # but used in struct sockaddr.sa_family. Reported by Tim Rice.\n  SCO_SV/3.2)\n    define_xopen_source=no;;\n  # On MacOS X 10.2, a bug in ncurses.h means that it craps out if\n  # _XOPEN_EXTENDED_SOURCE is defined. Apparently, this is fixed in 10.3, which\n  # identifies itself as Darwin/7.*\n  # On Mac OS X 10.4, defining _POSIX_C_SOURCE or _XOPEN_SOURCE\n  # disables platform specific features beyond repair.\n  # On Mac OS X 10.3, defining _POSIX_C_SOURCE or _XOPEN_SOURCE\n  # has no effect, don't bother defining them\n  Darwin/@<:@6789@:>@.*)\n    define_xopen_source=no;;\n  Darwin/@<:@[12]@:>@@<:@0-9@:>@.*)\n    define_xopen_source=no;;\n  # On AIX 4 and 5.1, mbstate_t is defined only when _XOPEN_SOURCE == 500 but\n  # used in wcsnrtombs() and mbsnrtowcs() even if _XOPEN_SOURCE is not defined\n  # or has another value. By not (re)defining it, the defaults come in place.\n  AIX/4)\n    define_xopen_source=no;;\n  AIX/5)\n    if test `uname -r` -eq 1; then\n      define_xopen_source=no\n    fi\n    ;;\n  # On QNX 6.3.2, defining _XOPEN_SOURCE prevents netdb.h from\n  # defining NI_NUMERICHOST.\n  QNX/6.3.2)\n    define_xopen_source=no\n    ;;\n  # On VxWorks, defining _XOPEN_SOURCE causes compile failures\n  # in network headers still using system V types.\n  VxWorks/*)\n    define_xopen_source=no\n    ;;\n\n  # On HP-UX, defining _XOPEN_SOURCE to 600 or greater hides\n  # chroot() and other functions\n  hp*|HP*)\n    define_xopen_source=no\n    ;;\n\nesac\n\nif test $define_xopen_source = yes\nthen\n  # X/Open 7, incorporating POSIX.1-2008\n  AC_DEFINE(_XOPEN_SOURCE, 700,\n            Define to the level of X/Open that your system supports)\n\n  # On Tru64 Unix 4.0F, defining _XOPEN_SOURCE also requires\n  # definition of _XOPEN_SOURCE_EXTENDED and _POSIX_C_SOURCE, or else\n  # several APIs are not declared. Since this is also needed in some\n  # cases for HP-UX, we define it globally.\n  AC_DEFINE(_XOPEN_SOURCE_EXTENDED, 1,\n   \t    Define to activate Unix95-and-earlier features)\n\n  AC_DEFINE(_POSIX_C_SOURCE, 200809L, Define to activate features from IEEE Stds 1003.1-2008)\nfi\n\n# On HP-UX mbstate_t requires _INCLUDE__STDC_A1_SOURCE\ncase $ac_sys_system in\n  hp*|HP*)\n    define_stdc_a1=yes;;\n  *)\n    define_stdc_a1=no;;\nesac\n\nif test $define_stdc_a1 = yes\nthen\n  AC_DEFINE(_INCLUDE__STDC_A1_SOURCE, 1, Define to include mbstate_t for mbrtowc)\nfi\n\n# Record the configure-time value of MACOSX_DEPLOYMENT_TARGET,\n# it may influence the way we can build extensions, so distutils\n# needs to check it\nAC_SUBST(CONFIGURE_MACOSX_DEPLOYMENT_TARGET)\nAC_SUBST(EXPORT_MACOSX_DEPLOYMENT_TARGET)\nCONFIGURE_MACOSX_DEPLOYMENT_TARGET=\nEXPORT_MACOSX_DEPLOYMENT_TARGET='#'\n\n# checks for alternative programs\n\n# compiler flags are generated in two sets, BASECFLAGS and OPT.  OPT is just\n# for debug/optimization stuff.  BASECFLAGS is for flags that are required\n# just to get things to compile and link.  Users are free to override OPT\n# when running configure or make.  The build should not break if they do.\n# BASECFLAGS should generally not be messed with, however.\n\n# If the user switches compilers, we can't believe the cache\nif test ! -z \"$ac_cv_prog_CC\" -a ! -z \"$CC\" -a \"$CC\" != \"$ac_cv_prog_CC\"\nthen\n  AC_MSG_ERROR([cached CC is different -- throw away $cache_file\n(it is also a good idea to do 'make clean' before compiling)])\nfi\n\n# Don't let AC_PROG_CC set the default CFLAGS. It normally sets -g -O2\n# when the compiler supports them, but we don't always want -O2, and\n# we set -g later.\nif test -z \"$CFLAGS\"; then\n        CFLAGS=\nfi\n\nif test \"$ac_sys_system\" = \"Darwin\"\nthen\n\t# Compiler selection on MacOSX is more complicated than\n\t# AC_PROG_CC can handle, see Mac/README for more\n\t# information\n\tif test -z \"${CC}\"\n\tthen\n\t\tfound_gcc=\n\t\tfound_clang=\n\t\tas_save_IFS=$IFS; IFS=:\n\t\tfor as_dir in $PATH\n\t\tdo\n\t\t\tIFS=$as_save_IFS\n\t\t\tif test -x \"${as_dir}/gcc\"; then\n\t\t\t\tif test -z \"${found_gcc}\"; then\n\t\t\t\t\tfound_gcc=\"${as_dir}/gcc\"\n\t\t\t\tfi\n\t\t\tfi\n\t\t\tif test -x \"${as_dir}/clang\"; then\n\t\t\t\tif test -z \"${found_clang}\"; then\n\t\t\t\t\tfound_clang=\"${as_dir}/clang\"\n\t\t\t\tfi\n\t\t\tfi\n\t\tdone\n\t\tIFS=$as_save_IFS\n\n\t\tif test -n \"$found_gcc\" -a -n \"$found_clang\"\n\t\tthen\n\t\t\tif test -n \"`\"$found_gcc\" --version | grep llvm-gcc`\"\n\t\t\tthen\n\t\t\t\tAC_MSG_NOTICE([Detected llvm-gcc, falling back to clang])\n\t\t\t\tCC=\"$found_clang\"\n\t\t\t\tCXX=\"$found_clang++\"\n\t\t\tfi\n\n\n\t\telif test -z \"$found_gcc\" -a -n \"$found_clang\"\n\t\tthen\n\t\t\tAC_MSG_NOTICE([No GCC found, use CLANG])\n\t\t\tCC=\"$found_clang\"\n\t\t\tCXX=\"$found_clang++\"\n\n\t\telif test -z \"$found_gcc\" -a -z \"$found_clang\"\n\t\tthen\n\t\t\tfound_clang=`/usr/bin/xcrun -find clang 2>/dev/null`\n\t\t\tif test -n \"${found_clang}\"\n\t\t\tthen\n\t\t\t\tAC_MSG_NOTICE([Using clang from Xcode.app])\n\t\t\t\tCC=\"${found_clang}\"\n\t\t\t\tCXX=\"`/usr/bin/xcrun -find clang++`\"\n\n\t\t\t# else: use default behaviour\n\t\t\tfi\n\t\tfi\n\tfi\nfi\nAC_PROG_CC\nAC_PROG_CPP\nAC_PROG_GREP\nAC_PROG_SED\n\nAC_SUBST(CXX)\nAC_SUBST(MAINCC)\nAC_MSG_CHECKING(for --with-cxx-main=<compiler>)\nAC_ARG_WITH(cxx_main,\n            AS_HELP_STRING([--with-cxx-main=<compiler>],\n                           [compile main() and link python executable with C++ compiler]),\n[\n\n\tcase $withval in\n\tno)\twith_cxx_main=no\n\t\tMAINCC='$(CC)';;\n\tyes)\twith_cxx_main=yes\n\t\tMAINCC='$(CXX)';;\n\t*)\twith_cxx_main=yes\n\t\tMAINCC=$withval\n\t\tif test -z \"$CXX\"\n\t\tthen\n\t\t\tCXX=$withval\n\t\tfi;;\n\tesac], [\n\twith_cxx_main=no\n\tMAINCC='$(CC)'\n])\nAC_MSG_RESULT($with_cxx_main)\n\npreset_cxx=\"$CXX\"\nif test -z \"$CXX\"\nthen\n        case \"$CC\" in\n        gcc)    AC_PATH_TOOL(CXX, [g++], [g++], [notfound]) ;;\n        cc)     AC_PATH_TOOL(CXX, [c++], [c++], [notfound]) ;;\n        clang|*/clang)     AC_PATH_TOOL(CXX, [clang++], [clang++], [notfound]) ;;\n        icc|*/icc)         AC_PATH_TOOL(CXX, [icpc], [icpc], [notfound]) ;;\n        esac\n\tif test \"$CXX\" = \"notfound\"\n\tthen\n\t\tCXX=\"\"\n\tfi\nfi\nif test -z \"$CXX\"\nthen\n\tAC_CHECK_TOOLS(CXX, $CCC c++ g++ gcc CC cxx cc++ cl, notfound)\n\tif test \"$CXX\" = \"notfound\"\n\tthen\n\t\tCXX=\"\"\n\tfi\nfi\nif test \"$preset_cxx\" != \"$CXX\"\nthen\n        AC_MSG_NOTICE([\n\n  By default, distutils will build C++ extension modules with \"$CXX\".\n  If this is not intended, then set CXX on the configure command line.\n  ])\nfi\n\n\nMULTIARCH=$($CC --print-multiarch 2>/dev/null)\nAC_SUBST(MULTIARCH)\n\nAC_MSG_CHECKING([for the platform triplet based on compiler characteristics])\ncat >> conftest.c <<EOF\n#undef bfin\n#undef cris\n#undef fr30\n#undef linux\n#undef hppa\n#undef hpux\n#undef i386\n#undef mips\n#undef powerpc\n#undef sparc\n#undef unix\n#if defined(__ANDROID__)\n    # Android is not a multiarch system.\n#elif defined(__linux__)\n# if defined(__x86_64__) && defined(__LP64__)\n        x86_64-linux-gnu\n# elif defined(__x86_64__) && defined(__ILP32__)\n        x86_64-linux-gnux32\n# elif defined(__i386__)\n        i386-linux-gnu\n# elif defined(__aarch64__) && defined(__AARCH64EL__)\n#  if defined(__ILP32__)\n        aarch64_ilp32-linux-gnu\n#  else\n        aarch64-linux-gnu\n#  endif\n# elif defined(__aarch64__) && defined(__AARCH64EB__)\n#  if defined(__ILP32__)\n        aarch64_be_ilp32-linux-gnu\n#  else\n        aarch64_be-linux-gnu\n#  endif\n# elif defined(__alpha__)\n        alpha-linux-gnu\n# elif defined(__ARM_EABI__) && defined(__ARM_PCS_VFP)\n#  if defined(__ARMEL__)\n        arm-linux-gnueabihf\n#  else\n        armeb-linux-gnueabihf\n#  endif\n# elif defined(__ARM_EABI__) && !defined(__ARM_PCS_VFP)\n#  if defined(__ARMEL__)\n        arm-linux-gnueabi\n#  else\n        armeb-linux-gnueabi\n#  endif\n# elif defined(__hppa__)\n        hppa-linux-gnu\n# elif defined(__ia64__)\n        ia64-linux-gnu\n# elif defined(__m68k__) && !defined(__mcoldfire__)\n        m68k-linux-gnu\n# elif defined(__mips_hard_float) && defined(__mips_isa_rev) && (__mips_isa_rev >=6) && defined(_MIPSEL)\n#  if _MIPS_SIM == _ABIO32\n        mipsisa32r6el-linux-gnu\n#  elif _MIPS_SIM == _ABIN32\n        mipsisa64r6el-linux-gnuabin32\n#  elif _MIPS_SIM == _ABI64\n        mipsisa64r6el-linux-gnuabi64\n#  else\n#   error unknown platform triplet\n#  endif\n# elif defined(__mips_hard_float) && defined(__mips_isa_rev) && (__mips_isa_rev >=6)\n#  if _MIPS_SIM == _ABIO32\n        mipsisa32r6-linux-gnu\n#  elif _MIPS_SIM == _ABIN32\n        mipsisa64r6-linux-gnuabin32\n#  elif _MIPS_SIM == _ABI64\n        mipsisa64r6-linux-gnuabi64\n#  else\n#   error unknown platform triplet\n#  endif\n# elif defined(__mips_hard_float) && defined(_MIPSEL)\n#  if _MIPS_SIM == _ABIO32\n        mipsel-linux-gnu\n#  elif _MIPS_SIM == _ABIN32\n        mips64el-linux-gnuabin32\n#  elif _MIPS_SIM == _ABI64\n        mips64el-linux-gnuabi64\n#  else\n#   error unknown platform triplet\n#  endif\n# elif defined(__mips_hard_float)\n#  if _MIPS_SIM == _ABIO32\n        mips-linux-gnu\n#  elif _MIPS_SIM == _ABIN32\n        mips64-linux-gnuabin32\n#  elif _MIPS_SIM == _ABI64\n        mips64-linux-gnuabi64\n#  else\n#   error unknown platform triplet\n#  endif\n# elif defined(__or1k__)\n        or1k-linux-gnu\n# elif defined(__powerpc__) && defined(__SPE__)\n        powerpc-linux-gnuspe\n# elif defined(__powerpc64__)\n#  if defined(__LITTLE_ENDIAN__)\n        powerpc64le-linux-gnu\n#  else\n        powerpc64-linux-gnu\n#  endif\n# elif defined(__powerpc__)\n        powerpc-linux-gnu\n# elif defined(__s390x__)\n        s390x-linux-gnu\n# elif defined(__s390__)\n        s390-linux-gnu\n# elif defined(__sh__) && defined(__LITTLE_ENDIAN__)\n        sh4-linux-gnu\n# elif defined(__sparc__) && defined(__arch64__)\n        sparc64-linux-gnu\n# elif defined(__sparc__)\n        sparc-linux-gnu\n# elif defined(__riscv)\n#  if __riscv_xlen == 32\n        riscv32-linux-gnu\n#  elif __riscv_xlen == 64\n        riscv64-linux-gnu\n#  else\n#   error unknown platform triplet\n#  endif\n# else\n#   error unknown platform triplet\n# endif\n#elif defined(__FreeBSD_kernel__)\n# if defined(__LP64__)\n        x86_64-kfreebsd-gnu\n# elif defined(__i386__)\n        i386-kfreebsd-gnu\n# else\n#   error unknown platform triplet\n# endif\n#elif defined(__gnu_hurd__)\n        i386-gnu\n#elif defined(__APPLE__)\n        darwin\n#elif defined(__VXWORKS__)\n        vxworks\n#else\n# error unknown platform triplet\n#endif\n\nEOF\n\nif $CPP $CPPFLAGS conftest.c >conftest.out 2>/dev/null; then\n  PLATFORM_TRIPLET=`grep -v '^#' conftest.out | grep -v '^ *$' | tr -d ' \t'`\n  AC_MSG_RESULT([$PLATFORM_TRIPLET])\nelse\n  AC_MSG_RESULT([none])\nfi\nrm -f conftest.c conftest.out\n\nif test x$PLATFORM_TRIPLET != x && test x$MULTIARCH != x; then\n  if test x$PLATFORM_TRIPLET != x$MULTIARCH; then\n    AC_MSG_ERROR([internal configure error for the platform triplet, please file a bug report])\n  fi\nelif test x$PLATFORM_TRIPLET != x && test x$MULTIARCH = x; then\n  MULTIARCH=$PLATFORM_TRIPLET\nfi\nAC_SUBST(PLATFORM_TRIPLET)\nif test x$MULTIARCH != x; then\n  MULTIARCH_CPPFLAGS=\"-DMULTIARCH=\\\\\\\"$MULTIARCH\\\\\\\"\"\nfi\nAC_SUBST(MULTIARCH_CPPFLAGS)\n\nAC_MSG_CHECKING([for -Wl,--no-as-needed])\nsave_LDFLAGS=\"$LDFLAGS\"\nLDFLAGS=\"$LDFLAGS -Wl,--no-as-needed\"\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[]], [[]])],\n  [NO_AS_NEEDED=\"-Wl,--no-as-needed\"\n   AC_MSG_RESULT([yes])],\n  [NO_AS_NEEDED=\"\"\n   AC_MSG_RESULT([no])])\nLDFLAGS=\"$save_LDFLAGS\"\nAC_SUBST(NO_AS_NEEDED)\n\n\n# checks for UNIX variants that set C preprocessor variables\nAC_USE_SYSTEM_EXTENSIONS\n\nAC_MSG_CHECKING([for the Android API level])\ncat >> conftest.c <<EOF\n#ifdef __ANDROID__\nandroid_api = __ANDROID_API__\narm_arch = __ARM_ARCH\n#else\n#error not Android\n#endif\nEOF\n\nif $CPP $CPPFLAGS conftest.c >conftest.out 2>/dev/null; then\n  ANDROID_API_LEVEL=`sed -n -e '/__ANDROID_API__/d' -e 's/^android_api = //p' conftest.out`\n  _arm_arch=`sed -n -e '/__ARM_ARCH/d' -e 's/^arm_arch = //p' conftest.out`\n  AC_MSG_RESULT([$ANDROID_API_LEVEL])\n  if test -z \"$ANDROID_API_LEVEL\"; then\n    echo 'Fatal: you must define __ANDROID_API__'\n    exit 1\n  fi\n  AC_DEFINE_UNQUOTED(ANDROID_API_LEVEL, $ANDROID_API_LEVEL, [The Android API level.])\n\n  AC_MSG_CHECKING([for the Android arm ABI])\n  AC_MSG_RESULT([$_arm_arch])\n  if test \"$_arm_arch\" = 7; then\n    BASECFLAGS=\"${BASECFLAGS} -mfloat-abi=softfp -mfpu=vfpv3-d16\"\n    LDFLAGS=\"${LDFLAGS} -march=armv7-a -Wl,--fix-cortex-a8\"\n  fi\nelse\n  AC_MSG_RESULT([not Android])\nfi\nrm -f conftest.c conftest.out\n\n# Check for unsupported systems\ncase $ac_sys_system/$ac_sys_release in\natheos*|Linux*/1*)\n   echo This system \\($ac_sys_system/$ac_sys_release\\) is no longer supported.\n   echo See README for details.\n   exit 1;;\nesac\n\nAC_EXEEXT\nAC_MSG_CHECKING(for --with-suffix)\nAC_ARG_WITH(suffix,\n            AS_HELP_STRING([--with-suffix=.exe], [set executable suffix]),\n[\n\tcase $withval in\n\tno)\tEXEEXT=;;\n\tyes)\tEXEEXT=.exe;;\n\t*)\tEXEEXT=$withval;;\n\tesac])\nAC_MSG_RESULT($EXEEXT)\n\n# Test whether we're running on a non-case-sensitive system, in which\n# case we give a warning if no ext is given\nAC_SUBST(BUILDEXEEXT)\nAC_MSG_CHECKING(for case-insensitive build directory)\nif test ! -d CaseSensitiveTestDir; then\nmkdir CaseSensitiveTestDir\nfi\n\nif test -d casesensitivetestdir\nthen\n    AC_MSG_RESULT(yes)\n    BUILDEXEEXT=.exe\nelse\n\tAC_MSG_RESULT(no)\n\tBUILDEXEEXT=$EXEEXT\nfi\nrmdir CaseSensitiveTestDir\n\ncase $ac_sys_system in\nhp*|HP*)\n    case $CC in\n    cc|*/cc) CC=\"$CC -Ae\";;\n    esac;;\nesac\n\nAC_SUBST(LIBRARY)\nAC_MSG_CHECKING(LIBRARY)\nif test -z \"$LIBRARY\"\nthen\n\tLIBRARY='libpython$(VERSION)$(ABIFLAGS).a'\nfi\nAC_MSG_RESULT($LIBRARY)\n\n# LDLIBRARY is the name of the library to link against (as opposed to the\n# name of the library into which to insert object files). BLDLIBRARY is also\n# the library to link against, usually. On Mac OS X frameworks, BLDLIBRARY\n# is blank as the main program is not linked directly against LDLIBRARY.\n# LDLIBRARYDIR is the path to LDLIBRARY, which is made in a subdirectory. On\n# systems without shared libraries, LDLIBRARY is the same as LIBRARY\n# (defined in the Makefiles). On Cygwin LDLIBRARY is the import library,\n# DLLLIBRARY is the shared (i.e., DLL) library.\n#\n# RUNSHARED is used to run shared python without installed libraries\n#\n# INSTSONAME is the name of the shared library that will be use to install\n# on the system - some systems like version suffix, others don't\n#\n# LDVERSION is the shared library version number, normally the Python version\n# with the ABI build flags appended.\nAC_SUBST(LDLIBRARY)\nAC_SUBST(DLLLIBRARY)\nAC_SUBST(BLDLIBRARY)\nAC_SUBST(PY3LIBRARY)\nAC_SUBST(LDLIBRARYDIR)\nAC_SUBST(INSTSONAME)\nAC_SUBST(RUNSHARED)\nAC_SUBST(LDVERSION)\nLDLIBRARY=\"$LIBRARY\"\nBLDLIBRARY='$(LDLIBRARY)'\nINSTSONAME='$(LDLIBRARY)'\nDLLLIBRARY=''\nLDLIBRARYDIR=''\nRUNSHARED=''\nLDVERSION=\"$VERSION\"\n\n# LINKCC is the command that links the python executable -- default is $(CC).\n# If CXX is set, and if it is needed to link a main function that was\n# compiled with CXX, LINKCC is CXX instead. Always using CXX is undesirable:\n# python might then depend on the C++ runtime\n# This is altered for AIX in order to build the export list before\n# linking.\nAC_SUBST(LINKCC)\nAC_MSG_CHECKING(LINKCC)\nif test -z \"$LINKCC\"\nthen\n\tLINKCC='$(PURIFY) $(MAINCC)'\n\tcase $ac_sys_system in\n\tAIX*)\n\t   exp_extra=\"\\\"\\\"\"\n\t   if test $ac_sys_release -ge 5 -o \\\n\t\t   $ac_sys_release -eq 4 -a `uname -r` -ge 2 ; then\n\t       exp_extra=\".\"\n\t   fi\n\t   LINKCC=\"\\$(srcdir)/Modules/makexp_aix Modules/python.exp $exp_extra \\$(LIBRARY); $LINKCC\";;\n\tQNX*)\n\t   # qcc must be used because the other compilers do not\n\t   # support -N.\n\t   LINKCC=qcc;;\n\tesac\nfi\nAC_MSG_RESULT($LINKCC)\n\n# GNULD is set to \"yes\" if the GNU linker is used.  If this goes wrong\n# make sure we default having it set to \"no\": this is used by\n# distutils.unixccompiler to know if it should add --enable-new-dtags\n# to linker command lines, and failing to detect GNU ld simply results\n# in the same bahaviour as before.\nAC_SUBST(GNULD)\nAC_MSG_CHECKING(for GNU ld)\nac_prog=ld\nif test \"$GCC\" = yes; then\n       ac_prog=`$CC -print-prog-name=ld`\nfi\ncase `\"$ac_prog\" -V 2>&1 < /dev/null` in\n      *GNU*)\n          GNULD=yes;;\n      *)\n          GNULD=no;;\nesac\nAC_MSG_RESULT($GNULD)\n\nAC_MSG_CHECKING(for --enable-shared)\nAC_ARG_ENABLE(shared,\n              AS_HELP_STRING([--enable-shared], [disable/enable building shared python library]))\n\nif test -z \"$enable_shared\"\nthen\n  case $ac_sys_system in\n  CYGWIN*)\n    enable_shared=\"yes\";;\n  *)\n    enable_shared=\"no\";;\n  esac\nfi\nAC_MSG_RESULT($enable_shared)\n\nAC_MSG_CHECKING(for --enable-profiling)\nAC_ARG_ENABLE(profiling,\n              AS_HELP_STRING([--enable-profiling], [enable C-level code profiling]))\nif test \"x$enable_profiling\" = xyes; then\n  ac_save_cc=\"$CC\"\n  CC=\"$CC -pg\"\n  AC_LINK_IFELSE([AC_LANG_SOURCE([[int main() { return 0; }]])],\n    [],\n    [enable_profiling=no])\n  CC=\"$ac_save_cc\"\nelse\n  enable_profiling=no\nfi\nAC_MSG_RESULT($enable_profiling)\n\nif test \"x$enable_profiling\" = xyes; then\n  BASECFLAGS=\"-pg $BASECFLAGS\"\n  LDFLAGS=\"-pg $LDFLAGS\"\nfi\n\nAC_MSG_CHECKING(LDLIBRARY)\n\n# MacOSX framework builds need more magic. LDLIBRARY is the dynamic\n# library that we build, but we do not want to link against it (we\n# will find it with a -framework option). For this reason there is an\n# extra variable BLDLIBRARY against which Python and the extension\n# modules are linked, BLDLIBRARY. This is normally the same as\n# LDLIBRARY, but empty for MacOSX framework builds.\nif test \"$enable_framework\"\nthen\n  LDLIBRARY='$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n  RUNSHARED=DYLD_FRAMEWORK_PATH=`pwd`${DYLD_FRAMEWORK_PATH:+:${DYLD_FRAMEWORK_PATH}}\n  BLDLIBRARY=''\nelse\n  BLDLIBRARY='$(LDLIBRARY)'\nfi\n\n# Other platforms follow\nif test $enable_shared = \"yes\"; then\n  PY_ENABLE_SHARED=1\n  AC_DEFINE(Py_ENABLE_SHARED, 1, [Defined if Python is built as a shared library.])\n  case $ac_sys_system in\n    CYGWIN*)\n          LDLIBRARY='libpython$(LDVERSION).dll.a'\n          DLLLIBRARY='libpython$(LDVERSION).dll'\n          ;;\n    SunOS*)\n\t  LDLIBRARY='libpython$(LDVERSION).so'\n\t  BLDLIBRARY='-Wl,-R,$(LIBDIR) -L. -lpython$(LDVERSION)'\n\t  RUNSHARED=LD_LIBRARY_PATH=`pwd`${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\n\t  INSTSONAME=\"$LDLIBRARY\".$SOVERSION\n\t  if test \"$with_pydebug\" != yes\n\t  then\n\t      PY3LIBRARY=libpython3.so\n\t  fi\n          ;;\n    Linux*|GNU*|NetBSD*|FreeBSD*|DragonFly*|OpenBSD*)\n\t  LDLIBRARY='libpython$(LDVERSION).so'\n\t  BLDLIBRARY='-L. -lpython$(LDVERSION)'\n\t  RUNSHARED=LD_LIBRARY_PATH=`pwd`${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\n\t  INSTSONAME=\"$LDLIBRARY\".$SOVERSION\n\t  if test \"$with_pydebug\" != yes\n          then\n\t      PY3LIBRARY=libpython3.so\n\t  fi\n\t  ;;\n    hp*|HP*)\n\t  case `uname -m` in\n\t\tia64)\n\t\t\tLDLIBRARY='libpython$(LDVERSION).so'\n\t\t\t;;\n\t\t*)\n\t\t\tLDLIBRARY='libpython$(LDVERSION).sl'\n\t\t\t;;\n\t  esac\n\t  BLDLIBRARY='-Wl,+b,$(LIBDIR) -L. -lpython$(LDVERSION)'\n\t  RUNSHARED=SHLIB_PATH=`pwd`${SHLIB_PATH:+:${SHLIB_PATH}}\n\t  ;;\n    Darwin*)\n    \tLDLIBRARY='libpython$(LDVERSION).dylib'\n\tBLDLIBRARY='-L. -lpython$(LDVERSION)'\n\tRUNSHARED=DYLD_LIBRARY_PATH=`pwd`${DYLD_LIBRARY_PATH:+:${DYLD_LIBRARY_PATH}}\n\t;;\n    AIX*)\n\tLDLIBRARY='libpython$(LDVERSION).so'\n\tRUNSHARED=LIBPATH=`pwd`${LIBPATH:+:${LIBPATH}}\n\t;;\n\n  esac\nelse # shared is disabled\n  PY_ENABLE_SHARED=0\n  case $ac_sys_system in\n    CYGWIN*)\n          BLDLIBRARY='$(LIBRARY)'\n          LDLIBRARY='libpython$(LDVERSION).dll.a'\n          ;;\n  esac\nfi\n\nif test \"$cross_compiling\" = yes; then\n\tRUNSHARED=\nfi\n\nAC_MSG_RESULT($LDLIBRARY)\n\nAC_SUBST(AR)\nAC_CHECK_TOOLS(AR, ar aal, ar)\n\n# tweak ARFLAGS only if the user didn't set it on the command line\nAC_SUBST(ARFLAGS)\nif test -z \"$ARFLAGS\"\nthen\n        ARFLAGS=\"rcs\"\nfi\n\nAC_CHECK_TOOLS([READELF], [readelf], [:])\nif test \"$cross_compiling\" = yes; then\n    case \"$READELF\" in\n\treadelf|:)\n\tAC_MSG_ERROR([readelf for the host is required for cross builds])\n\t;;\n    esac\nfi\nAC_SUBST(READELF)\n\n\ncase $MACHDEP in\nhp*|HP*)\n\t# install -d does not work on HP-UX\n\tif test -z \"$INSTALL\"\n\tthen\n\t\tINSTALL=\"${srcdir}/install-sh -c\"\n\tfi\nesac\nAC_PROG_INSTALL\nAC_PROG_MKDIR_P\n\n# Not every filesystem supports hard links\nAC_SUBST(LN)\nif test -z \"$LN\" ; then\n\tcase $ac_sys_system in\n\t\tCYGWIN*) LN=\"ln -s\";;\n\t\t*) LN=ln;;\n\tesac\nfi\n\n# For calculating the .so ABI tag.\nAC_SUBST(ABIFLAGS)\nABIFLAGS=\"\"\n\n# Check for --with-pydebug\nAC_MSG_CHECKING(for --with-pydebug)\nAC_ARG_WITH(pydebug,\n            AS_HELP_STRING([--with-pydebug], [build with Py_DEBUG defined]),\n[\nif test \"$withval\" != no\nthen\n  AC_DEFINE(Py_DEBUG, 1,\n  [Define if you want to build an interpreter with many run-time checks.])\n  AC_MSG_RESULT(yes);\n  Py_DEBUG='true'\n  ABIFLAGS=\"${ABIFLAGS}d\"\nelse AC_MSG_RESULT(no); Py_DEBUG='false'\nfi],\n[AC_MSG_RESULT(no)])\n\n# Check for --with-trace-refs\n# --with-trace-refs\nAC_MSG_CHECKING(for --with-trace-refs)\nAC_ARG_WITH(trace-refs,\n  AS_HELP_STRING([--with-trace-refs],[enable tracing references for debugging purpose]),,\n  with_trace_refs=no)\nAC_MSG_RESULT($with_trace_refs)\n\nif test \"$with_trace_refs\" = \"yes\"\nthen\n  AC_DEFINE(Py_TRACE_REFS, 1, [Define if you want to enable tracing references for debugging purpose])\nfi\n\n# Check for --with-assertions.\n# This allows enabling assertions without Py_DEBUG.\nassertions='false'\nAC_MSG_CHECKING(for --with-assertions)\nAC_ARG_WITH(assertions,\n            AS_HELP_STRING([--with-assertions],[build with C assertions enabled]),\n[\nif test \"$withval\" != no\nthen\n  assertions='true'\nfi],\n[])\nif test \"$assertions\" = 'true'; then\n  AC_MSG_RESULT(yes)\nelif test \"$Py_DEBUG\" = 'true'; then\n  assertions='true'\n  AC_MSG_RESULT(implied by --with-pydebug)\nelse\n  AC_MSG_RESULT(no)\nfi\n\n# Enable optimization flags\nAC_SUBST(DEF_MAKE_ALL_RULE)\nAC_SUBST(DEF_MAKE_RULE)\nPy_OPT='false'\nAC_MSG_CHECKING(for --enable-optimizations)\nAC_ARG_ENABLE(optimizations, AS_HELP_STRING([--enable-optimizations], [Enable expensive, stable optimizations (PGO, etc).  Disabled by default.]),\n[\nif test \"$enableval\" != no\nthen\n  Py_OPT='true'\n  AC_MSG_RESULT(yes);\nelse\n  Py_OPT='false'\n  AC_MSG_RESULT(no);\nfi],\n[AC_MSG_RESULT(no)])\nif test \"$Py_OPT\" = 'true' ; then\n  # Intentionally not forcing Py_LTO='true' here.  Too many toolchains do not\n  # compile working code using it and both test_distutils and test_gdb are\n  # broken when you do manage to get a toolchain that works with it.  People\n  # who want LTO need to use --with-lto themselves.\n  DEF_MAKE_ALL_RULE=\"profile-opt\"\n  REQUIRE_PGO=\"yes\"\n  DEF_MAKE_RULE=\"build_all\"\nelse\n  DEF_MAKE_ALL_RULE=\"build_all\"\n  REQUIRE_PGO=\"no\"\n  DEF_MAKE_RULE=\"all\"\nfi\n\nAC_ARG_VAR(PROFILE_TASK, Python args for PGO generation task)\nAC_MSG_CHECKING(PROFILE_TASK)\nif test -z \"$PROFILE_TASK\"\nthen\n\tPROFILE_TASK='-m test --pgo'\nfi\nAC_MSG_RESULT($PROFILE_TASK)\n\n# Make llvm-relatec checks work on systems where llvm tools are not installed with their\n# normal names in the default $PATH (ie: Ubuntu).  They exist under the\n# non-suffixed name in their versioned llvm directory.\n\nllvm_bin_dir=''\nllvm_path=\"${PATH}\"\nif test \"${CC}\" = \"clang\"\nthen\n  clang_bin=`which clang`\n  # Some systems install clang elsewhere as a symlink to the real path\n  # which is where the related llvm tools are located.\n  if test -L \"${clang_bin}\"\n  then\n    clang_dir=`dirname \"${clang_bin}\"`\n    clang_bin=`readlink \"${clang_bin}\"`\n    llvm_bin_dir=\"${clang_dir}/\"`dirname \"${clang_bin}\"`\n    llvm_path=\"${llvm_path}${PATH_SEPARATOR}${llvm_bin_dir}\"\n  fi\nfi\n\n# Enable LTO flags\nAC_MSG_CHECKING(for --with-lto)\nAC_ARG_WITH(lto, AS_HELP_STRING([--with-lto], [Enable Link Time Optimization in any build. Disabled by default.]),\n[\nif test \"$withval\" != no\nthen\n  Py_LTO='true'\n  AC_MSG_RESULT(yes);\nelse\n  Py_LTO='false'\n  AC_MSG_RESULT(no);\nfi],\n[AC_MSG_RESULT(no)])\nif test \"$Py_LTO\" = 'true' ; then\n  case $CC in\n    *clang*)\n      AC_SUBST(LLVM_AR)\n      AC_PATH_TOOL(LLVM_AR, llvm-ar, '', ${llvm_path})\n      AC_SUBST(LLVM_AR_FOUND)\n      if test -n \"${LLVM_AR}\" -a -x \"${LLVM_AR}\"\n      then\n        LLVM_AR_FOUND=\"found\"\n      else\n        LLVM_AR_FOUND=\"not-found\"\n      fi\n      if test \"$ac_sys_system\" = \"Darwin\" -a \"${LLVM_AR_FOUND}\" = \"not-found\"\n      then\n        found_llvm_ar=`/usr/bin/xcrun -find llvm-ar 2>/dev/null`\n        if test -n \"${found_llvm_ar}\"\n        then\n          LLVM_AR='/usr/bin/xcrun llvm-ar'\n          LLVM_AR_FOUND=found\n          AC_MSG_NOTICE([llvm-ar found via xcrun: ${LLVM_AR}])\n        fi\n      fi\n      if test $LLVM_AR_FOUND = not-found\n      then\n        LLVM_PROFR_ERR=yes\n        AC_MSG_ERROR([llvm-ar is required for a --with-lto build with clang but could not be found.])\n      else\n        LLVM_AR_ERR=no\n      fi\n      AR=\"${LLVM_AR}\"\n      case $ac_sys_system in\n        Darwin*)\n          # Any changes made here should be reflected in the GCC+Darwin case below\n          LTOFLAGS=\"-flto -Wl,-export_dynamic\"\n          ;;\n        *)\n          LTOFLAGS=\"-flto\"\n          ;;\n      esac\n      ;;\n    *gcc*)\n      case $ac_sys_system in\n        Darwin*)\n          LTOFLAGS=\"-flto -Wl,-export_dynamic\"\n          ;;\n        *)\n          LTOFLAGS=\"-flto -fuse-linker-plugin -ffat-lto-objects -flto-partition=none\"\n          ;;\n      esac\n      ;;\n  esac\n\n  if test \"$ac_cv_prog_cc_g\" = \"yes\"\n  then\n      # bpo-30345: Add -g to LDFLAGS when compiling with LTO\n      # to get debug symbols.\n      LTOFLAGS=\"$LTOFLAGS -g\"\n  fi\n\n  CFLAGS_NODIST=\"$CFLAGS_NODIST $LTOFLAGS\"\n  LDFLAGS_NODIST=\"$LDFLAGS_NODIST $LTOFLAGS\"\nfi\n\n# Enable PGO flags.\nAC_SUBST(PGO_PROF_GEN_FLAG)\nAC_SUBST(PGO_PROF_USE_FLAG)\nAC_SUBST(LLVM_PROF_MERGER)\nAC_SUBST(LLVM_PROF_FILE)\nAC_SUBST(LLVM_PROF_ERR)\nAC_SUBST(LLVM_PROFDATA)\nAC_PATH_TOOL(LLVM_PROFDATA, llvm-profdata, '', ${llvm_path})\nAC_SUBST(LLVM_PROF_FOUND)\nif test -n \"${LLVM_PROFDATA}\" -a -x \"${LLVM_PROFDATA}\"\nthen\n  LLVM_PROF_FOUND=\"found\"\nelse\n  LLVM_PROF_FOUND=\"not-found\"\nfi\nif test \"$ac_sys_system\" = \"Darwin\" -a \"${LLVM_PROF_FOUND}\" = \"not-found\"\nthen\n  found_llvm_profdata=`/usr/bin/xcrun -find llvm-profdata 2>/dev/null`\n  if test -n \"${found_llvm_profdata}\"\n  then\n    # llvm-profdata isn't directly in $PATH in some cases.\n    # https://apple.stackexchange.com/questions/197053/\n    LLVM_PROFDATA='/usr/bin/xcrun llvm-profdata'\n    LLVM_PROF_FOUND=found\n    AC_MSG_NOTICE([llvm-profdata found via xcrun: ${LLVM_PROFDATA}])\n  fi\nfi\nLLVM_PROF_ERR=no\ncase $CC in\n  *clang*)\n    # Any changes made here should be reflected in the GCC+Darwin case below\n    PGO_PROF_GEN_FLAG=\"-fprofile-instr-generate\"\n    PGO_PROF_USE_FLAG=\"-fprofile-instr-use=code.profclangd\"\n    LLVM_PROF_MERGER=\"${LLVM_PROFDATA} merge -output=code.profclangd *.profclangr\"\n    LLVM_PROF_FILE=\"LLVM_PROFILE_FILE=\\\"code-%p.profclangr\\\"\"\n    if test $LLVM_PROF_FOUND = not-found\n    then\n      LLVM_PROF_ERR=yes\n      if test \"${REQUIRE_PGO}\" = \"yes\"\n      then\n        AC_MSG_ERROR([llvm-profdata is required for a --enable-optimizations build but could not be found.])\n      fi\n    fi\n    ;;\n  *gcc*)\n    case $ac_sys_system in\n      Darwin*)\n        PGO_PROF_GEN_FLAG=\"-fprofile-instr-generate\"\n        PGO_PROF_USE_FLAG=\"-fprofile-instr-use=code.profclangd\"\n        LLVM_PROF_MERGER=\"${LLVM_PROFDATA} merge -output=code.profclangd *.profclangr\"\n        LLVM_PROF_FILE=\"LLVM_PROFILE_FILE=\\\"code-%p.profclangr\\\"\"\n        if test \"${LLVM_PROF_FOUND}\" = \"not-found\"\n        then\n          LLVM_PROF_ERR=yes\n          if test \"${REQUIRE_PGO}\" = \"yes\"\n\t  then\n\t    AC_MSG_ERROR([llvm-profdata is required for a --enable-optimizations build but could not be found.])\n\t  fi\n        fi\n        ;;\n      *)\n        PGO_PROF_GEN_FLAG=\"-fprofile-generate\"\n        PGO_PROF_USE_FLAG=\"-fprofile-use -fprofile-correction\"\n        LLVM_PROF_MERGER=\"true\"\n        LLVM_PROF_FILE=\"\"\n        ;;\n    esac\n    ;;\n  *icc*)\n    PGO_PROF_GEN_FLAG=\"-prof-gen\"\n    PGO_PROF_USE_FLAG=\"-prof-use\"\n    LLVM_PROF_MERGER=\"true\"\n    LLVM_PROF_FILE=\"\"\n    ;;\nesac\n\n# XXX Shouldn't the code above that fiddles with BASECFLAGS and OPT be\n# merged with this chunk of code?\n\n# Optimizer/debugger flags\n# ------------------------\n# (The following bit of code is complicated enough - please keep things\n# indented properly.  Just pretend you're editing Python code. ;-)\n\n# There are two parallel sets of case statements below, one that checks to\n# see if OPT was set and one that does BASECFLAGS setting based upon\n# compiler and platform.  BASECFLAGS tweaks need to be made even if the\n# user set OPT.\n\ncase $CC in\n    *clang*)\n        cc_is_clang=1\n        ;;\n    *)\n        if $CC --version 2>&1 | grep -q clang\n        then\n            cc_is_clang=1\n        else\n            cc_is_clang=\n        fi\nesac\n\n# tweak OPT based on compiler and platform, only if the user didn't set\n# it on the command line\nAC_SUBST(OPT)\nAC_SUBST(CFLAGS_ALIASING)\nif test \"${OPT-unset}\" = \"unset\"\nthen\n    case $GCC in\n    yes)\n        # For gcc 4.x we need to use -fwrapv so lets check if its supported\n        if \"$CC\" -v --help 2>/dev/null |grep -- -fwrapv > /dev/null; then\n           WRAP=\"-fwrapv\"\n        fi\n\n        if test -n \"${cc_is_clang}\"\n        then\n            # Clang also needs -fwrapv\n            WRAP=\"-fwrapv\"\n            # bpo-30104: disable strict aliasing to compile correctly dtoa.c,\n            # see Makefile.pre.in for more information\n            CFLAGS_ALIASING=\"-fno-strict-aliasing\"\n        fi\n\n\tcase $ac_cv_prog_cc_g in\n\tyes)\n\t    if test \"$Py_DEBUG\" = 'true' ; then\n\t\t# Optimization messes up debuggers, so turn it off for\n\t\t# debug builds.\n                if \"$CC\" -v --help 2>/dev/null |grep -- -Og > /dev/null; then\n                    OPT=\"-g -Og -Wall\"\n                else\n                    OPT=\"-g -O0 -Wall\"\n                fi\n\t    else\n\t\tOPT=\"-g $WRAP -O3 -Wall\"\n\t    fi\n\t    ;;\n\t*)\n\t    OPT=\"-O3 -Wall\"\n\t    ;;\n\tesac\n\n\tcase $ac_sys_system in\n\t    SCO_SV*) OPT=\"$OPT -m486 -DSCO5\"\n\t    ;;\n        esac\n\t;;\n\n    *)\n\tOPT=\"-O\"\n\t;;\n    esac\nfi\n\nAC_SUBST(BASECFLAGS)\nAC_SUBST(CFLAGS_NODIST)\nAC_SUBST(LDFLAGS_NODIST)\n\n# The -arch flags for universal builds on OSX\nUNIVERSAL_ARCH_FLAGS=\nAC_SUBST(UNIVERSAL_ARCH_FLAGS)\n\n# tweak BASECFLAGS based on compiler and platform\ncase $GCC in\nyes)\n    CFLAGS_NODIST=\"$CFLAGS_NODIST -std=c99\"\n\n    AC_MSG_CHECKING(for -Wextra)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Wextra -Werror\"\n     AC_CACHE_VAL(ac_cv_extra_warnings,\n       AC_COMPILE_IFELSE(\n         [\n           AC_LANG_PROGRAM([[]], [[]])\n         ],[\n           ac_cv_extra_warnings=yes\n         ],[\n           ac_cv_extra_warnings=no\n         ]))\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_extra_warnings)\n\n    if test $ac_cv_extra_warnings = yes\n    then\n      CFLAGS_NODIST=\"$CFLAGS_NODIST -Wextra\"\n    fi\n\n    # Python doesn't violate C99 aliasing rules, but older versions of\n    # GCC produce warnings for legal Python code.  Enable\n    # -fno-strict-aliasing on versions of GCC that support but produce\n    # warnings.  See Issue3326\n    AC_MSG_CHECKING(whether $CC accepts and needs -fno-strict-aliasing)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -fno-strict-aliasing\"\n     save_CFLAGS=\"$CFLAGS\"\n     AC_CACHE_VAL(ac_cv_no_strict_aliasing,\n       AC_COMPILE_IFELSE(\n         [\n\t   AC_LANG_PROGRAM([[]], [[]])\n\t ],[\n\t   CC=\"$ac_save_cc -fstrict-aliasing\"\n           CFLAGS=\"$CFLAGS -Werror -Wstrict-aliasing\"\n           AC_COMPILE_IFELSE(\n\t     [\n\t       AC_LANG_PROGRAM([[void f(int **x) {}]],\n\t         [[double *x; f((int **) &x);]])\n\t     ],[\n\t       ac_cv_no_strict_aliasing=no\n\t     ],[\n               ac_cv_no_strict_aliasing=yes\n\t     ])\n\t ],[\n\t   ac_cv_no_strict_aliasing=no\n\t ]))\n     CFLAGS=\"$save_CFLAGS\"\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_no_strict_aliasing)\n    if test $ac_cv_no_strict_aliasing = yes\n    then\n      BASECFLAGS=\"$BASECFLAGS -fno-strict-aliasing\"\n    fi\n\n    # ICC doesn't recognize the option, but only emits a warning\n    ## XXX does it emit an unused result warning and can it be disabled?\n    case \"$CC\" in\n    *icc*)\n    ac_cv_disable_unused_result_warning=no\n    ;;\n    *)\n    AC_MSG_CHECKING(if we can turn off $CC unused result warning)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Wunused-result -Werror\"\n     save_CFLAGS=\"$CFLAGS\"\n     AC_CACHE_VAL(ac_cv_disable_unused_result_warning,\n       AC_COMPILE_IFELSE(\n         [\n\t   AC_LANG_PROGRAM([[]], [[]])\n\t ],[\n           ac_cv_disable_unused_result_warning=yes\n\t ],[\n           ac_cv_disable_unused_result_warning=no\n\t ]))\n     CFLAGS=\"$save_CFLAGS\"\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_disable_unused_result_warning)\n    ;;\n    esac\n\n    if test $ac_cv_disable_unused_result_warning = yes\n    then\n      BASECFLAGS=\"$BASECFLAGS -Wno-unused-result\"\n      CFLAGS_NODIST=\"$CFLAGS_NODIST -Wno-unused-result\"\n    fi\n\n    AC_MSG_CHECKING(if we can turn off $CC unused parameter warning)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Wunused-parameter -Werror\"\n     AC_CACHE_VAL(ac_cv_disable_unused_parameter_warning,\n       AC_COMPILE_IFELSE(\n         [\n           AC_LANG_PROGRAM([[]], [[]])\n         ],[\n           ac_cv_disable_unused_parameter_warning=yes\n         ],[\n           ac_cv_disable_unused_parameter_warning=no\n         ]))\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_disable_unused_parameter_warning)\n\n    if test $ac_cv_disable_unused_parameter_warning = yes\n    then\n      CFLAGS_NODIST=\"$CFLAGS_NODIST -Wno-unused-parameter\"\n    fi\n\n    AC_MSG_CHECKING(if we can turn off $CC missing field initializers warning)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Wmissing-field-initializers -Werror\"\n     AC_CACHE_VAL(ac_cv_disable_missing_field_initializers,\n       AC_COMPILE_IFELSE(\n         [\n           AC_LANG_PROGRAM([[]], [[]])\n         ],[\n           ac_cv_disable_missing_field_initializers=yes\n         ],[\n           ac_cv_disable_missing_field_initializers=no\n         ]))\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_disable_missing_field_initializers)\n\n    if test $ac_cv_disable_missing_field_initializers = yes\n    then\n      CFLAGS_NODIST=\"$CFLAGS_NODIST -Wno-missing-field-initializers\"\n    fi\n\n    AC_MSG_CHECKING(if we can turn on $CC mixed sign comparison warning)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Wsign-compare\"\n     save_CFLAGS=\"$CFLAGS\"\n     AC_CACHE_VAL(ac_cv_enable_sign_compare_warning,\n       AC_COMPILE_IFELSE(\n         [\n\t   AC_LANG_PROGRAM([[]], [[]])\n\t ],[\n           ac_cv_enable_sign_compare_warning=yes\n\t ],[\n           ac_cv_enable_sign_compare_warning=no\n\t ]))\n     CFLAGS=\"$save_CFLAGS\"\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_enable_sign_compare_warning)\n\n    if test $ac_cv_enable_sign_compare_warning = yes\n    then\n      BASECFLAGS=\"$BASECFLAGS -Wsign-compare\"\n    fi\n\n    AC_MSG_CHECKING(if we can turn on $CC unreachable code warning)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Wunreachable-code\"\n     save_CFLAGS=\"$CFLAGS\"\n     AC_CACHE_VAL(ac_cv_enable_unreachable_code_warning,\n       AC_COMPILE_IFELSE(\n         [\n\t   AC_LANG_PROGRAM([[]], [[]])\n\t ],[\n           ac_cv_enable_unreachable_code_warning=yes\n\t ],[\n           ac_cv_enable_unreachable_code_warning=no\n\t ]))\n     CFLAGS=\"$save_CFLAGS\"\n     CC=\"$ac_save_cc\"\n\n    # Don't enable unreachable code warning in debug mode, since it usually\n    # results in non-standard code paths.\n    # Issue #24324: Unfortunately, the unreachable code warning does not work\n    # correctly on gcc and has been silently removed from the compiler.\n    # It is supported on clang but on OS X systems gcc may be an alias\n    # for clang.  Try to determine if the compiler is not really gcc and,\n    # if so, only then enable the warning.\n    if test $ac_cv_enable_unreachable_code_warning = yes && \\\n        test \"$Py_DEBUG\" != \"true\" && \\\n        test -z \"`$CC --version 2>/dev/null | grep 'Free Software Foundation'`\"\n    then\n      BASECFLAGS=\"$BASECFLAGS -Wunreachable-code\"\n    else\n      ac_cv_enable_unreachable_code_warning=no\n    fi\n    AC_MSG_RESULT($ac_cv_enable_unreachable_code_warning)\n\n    AC_MSG_CHECKING(if we can turn on $CC strict-prototypes warning)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Werror -Wstrict-prototypes\"\n     AC_CACHE_VAL(ac_cv_enable_enable_strict_prototypes_warning,\n       AC_COMPILE_IFELSE(\n         [\n       AC_LANG_PROGRAM([[]], [[]])\n     ],[\n       ac_cv_enable_strict_prototypes_warning=yes\n     ],[\n       ac_cv_enable_strict_prototypes_warning=no\n     ]))\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_enable_strict_prototypes_warning)\n\n    if test $ac_cv_enable_strict_prototypes_warning = yes\n    then\n      CFLAGS_NODIST=\"$CFLAGS_NODIST -Wstrict-prototypes\"\n    fi\n\n    AC_MSG_CHECKING(if we can make implicit function declaration an error in $CC)\n     ac_save_cc=\"$CC\"\n     CC=\"$CC -Werror=implicit-function-declaration\"\n     AC_CACHE_VAL(ac_cv_enable_implicit_function_declaration_error,\n       AC_COMPILE_IFELSE(\n         [\n\t   AC_LANG_PROGRAM([[]], [[]])\n\t ],[\n           ac_cv_enable_implicit_function_declaration_error=yes\n\t ],[\n           ac_cv_enable_implicit_function_declaration_error=no\n\t ]))\n     CC=\"$ac_save_cc\"\n    AC_MSG_RESULT($ac_cv_enable_implicit_function_declaration_error)\n\n    if test $ac_cv_enable_implicit_function_declaration_error = yes\n    then\n      CFLAGS_NODIST=\"$CFLAGS_NODIST -Werror=implicit-function-declaration\"\n    fi\n\n    # if using gcc on alpha, use -mieee to get (near) full IEEE 754\n    # support.  Without this, treatment of subnormals doesn't follow\n    # the standard.\n    case $host in\n         alpha*)\n                BASECFLAGS=\"$BASECFLAGS -mieee\"\n                ;;\n    esac\n\n    case $ac_sys_system in\n\tSCO_SV*)\n\t    BASECFLAGS=\"$BASECFLAGS -m486 -DSCO5\"\n\t    ;;\n\n    Darwin*)\n        # -Wno-long-double, -no-cpp-precomp, and -mno-fused-madd\n        # used to be here, but non-Apple gcc doesn't accept them.\n        if test \"${CC}\" = gcc\n        then\n            AC_MSG_CHECKING(which compiler should be used)\n            case \"${UNIVERSALSDK}\" in\n            */MacOSX10.4u.sdk)\n                # Build using 10.4 SDK, force usage of gcc when the\n                # compiler is gcc, otherwise the user will get very\n                # confusing error messages when building on OSX 10.6\n                CC=gcc-4.0\n                CPP=cpp-4.0\n                ;;\n            esac\n            AC_MSG_RESULT($CC)\n        fi\n\n        if test \"${enable_universalsdk}\"\n        then\n            case \"$UNIVERSAL_ARCHS\" in\n            32-bit)\n               UNIVERSAL_ARCH_FLAGS=\"-arch ppc -arch i386\"\n               LIPO_32BIT_FLAGS=\"\"\n               ARCH_RUN_32BIT=\"\"\n               ;;\n            64-bit)\n               UNIVERSAL_ARCH_FLAGS=\"-arch ppc64 -arch x86_64\"\n               LIPO_32BIT_FLAGS=\"\"\n               ARCH_RUN_32BIT=\"true\"\n               ;;\n            all)\n               UNIVERSAL_ARCH_FLAGS=\"-arch i386 -arch ppc -arch ppc64 -arch x86_64\"\n               LIPO_32BIT_FLAGS=\"-extract ppc7400 -extract i386\"\n               ARCH_RUN_32BIT=\"/usr/bin/arch -i386 -ppc\"\n               ;;\n            intel)\n               UNIVERSAL_ARCH_FLAGS=\"-arch i386 -arch x86_64\"\n               LIPO_32BIT_FLAGS=\"-extract i386\"\n               ARCH_RUN_32BIT=\"/usr/bin/arch -i386\"\n               ;;\n            intel-32)\n               UNIVERSAL_ARCH_FLAGS=\"-arch i386\"\n               LIPO_32BIT_FLAGS=\"\"\n               ARCH_RUN_32BIT=\"\"\n               ;;\n            intel-64)\n               UNIVERSAL_ARCH_FLAGS=\"-arch x86_64\"\n               LIPO_32BIT_FLAGS=\"\"\n               ARCH_RUN_32BIT=\"true\"\n               ;;\n            3-way)\n               UNIVERSAL_ARCH_FLAGS=\"-arch i386 -arch ppc -arch x86_64\"\n               LIPO_32BIT_FLAGS=\"-extract ppc7400 -extract i386\"\n               ARCH_RUN_32BIT=\"/usr/bin/arch -i386 -ppc\"\n               ;;\n            *)\n               AC_MSG_ERROR([proper usage is --with-universal-arch=32-bit|64-bit|all|intel|3-way])\n               ;;\n            esac\n\n            if test \"${UNIVERSALSDK}\" != \"/\"\n            then\n                CFLAGS=\"${UNIVERSAL_ARCH_FLAGS} -isysroot ${UNIVERSALSDK} ${CFLAGS}\"\n                LDFLAGS=\"${UNIVERSAL_ARCH_FLAGS} -isysroot ${UNIVERSALSDK} ${LDFLAGS}\"\n                CPPFLAGS=\"-isysroot ${UNIVERSALSDK} ${CPPFLAGS}\"\n            else\n                CFLAGS=\"${UNIVERSAL_ARCH_FLAGS} ${CFLAGS}\"\n                LDFLAGS=\"${UNIVERSAL_ARCH_FLAGS} ${LDFLAGS}\"\n            fi\n        fi\n\n        # Calculate an appropriate deployment target for this build:\n        # The deployment target value is used explicitly to enable certain\n        # features are enabled (such as builtin libedit support for readline)\n        # through the use of Apple's Availability Macros and is used as a\n        # component of the string returned by distutils.get_platform().\n        #\n        # Use the value from:\n        # 1. the MACOSX_DEPLOYMENT_TARGET environment variable if specified\n        # 2. the operating system version of the build machine if >= 10.6\n        # 3. If running on OS X 10.3 through 10.5, use the legacy tests\n        #       below to pick either 10.3, 10.4, or 10.5 as the target.\n        # 4. If we are running on OS X 10.2 or earlier, good luck!\n\n        AC_MSG_CHECKING(which MACOSX_DEPLOYMENT_TARGET to use)\n        cur_target_major=`sw_vers -productVersion | \\\n                sed 's/\\([[0-9]]*\\)\\.\\([[0-9]]*\\).*/\\1/'`\n        cur_target_minor=`sw_vers -productVersion | \\\n                sed 's/\\([[0-9]]*\\)\\.\\([[0-9]]*\\).*/\\2/'`\n        cur_target=\"${cur_target_major}.${cur_target_minor}\"\n        if test ${cur_target_major} -eq 10 && \\\n           test ${cur_target_minor} -ge 3 && \\\n           test ${cur_target_minor} -le 5\n        then\n            # OS X 10.3 through 10.5\n            cur_target=10.3\n            if test ${enable_universalsdk}\n            then\n                case \"$UNIVERSAL_ARCHS\" in\n                all|3-way|intel|64-bit)\n                    # These configurations were first supported in 10.5\n                    cur_target='10.5'\n                    ;;\n                esac\n            else\n                if test `/usr/bin/arch` = \"i386\"\n                then\n                    # 10.4 was the first release to support Intel archs\n                    cur_target=\"10.4\"\n                fi\n            fi\n        fi\n        CONFIGURE_MACOSX_DEPLOYMENT_TARGET=${MACOSX_DEPLOYMENT_TARGET-${cur_target}}\n\n        # Make sure that MACOSX_DEPLOYMENT_TARGET is set in the\n        # environment with a value that is the same as what we'll use\n        # in the Makefile to ensure that we'll get the same compiler\n        # environment during configure and build time.\n        MACOSX_DEPLOYMENT_TARGET=\"$CONFIGURE_MACOSX_DEPLOYMENT_TARGET\"\n        export MACOSX_DEPLOYMENT_TARGET\n        EXPORT_MACOSX_DEPLOYMENT_TARGET=''\n        AC_MSG_RESULT($MACOSX_DEPLOYMENT_TARGET)\n\n        AC_MSG_CHECKING(if specified universal architectures work)\n        AC_LINK_IFELSE([AC_LANG_PROGRAM([[#include <stdio.h>]], [[printf(\"%d\", 42);]])],\n            [AC_MSG_RESULT(yes)],\n            [AC_MSG_RESULT(no)\n             AC_MSG_ERROR(check config.log and use the '--with-universal-archs' option)\n        ])\n\n        # end of Darwin* tests\n        ;;\n    esac\n    ;;\n\n*)\n    case $ac_sys_system in\n    OpenUNIX*|UnixWare*)\n\tBASECFLAGS=\"$BASECFLAGS -K pentium,host,inline,loop_unroll,alloca \"\n\t;;\n    SCO_SV*)\n\tBASECFLAGS=\"$BASECFLAGS -belf -Ki486 -DSCO5\"\n\t;;\n    esac\n    ;;\nesac\n\n# ICC needs -fp-model strict or floats behave badly\ncase \"$CC\" in\n*icc*)\n    CFLAGS_NODIST=\"$CFLAGS_NODIST -fp-model strict\"\n    ;;\nesac\n\nif test \"$assertions\" = 'true'; then\n  :\nelse\n  OPT=\"-DNDEBUG $OPT\"\nfi\n\nif test \"$ac_arch_flags\"\nthen\n\tBASECFLAGS=\"$BASECFLAGS $ac_arch_flags\"\nfi\n\n# On some compilers, pthreads are available without further options\n# (e.g. MacOS X). On some of these systems, the compiler will not\n# complain if unaccepted options are passed (e.g. gcc on Mac OS X).\n# So we have to see first whether pthreads are available without\n# options before we can check whether -Kpthread improves anything.\nAC_MSG_CHECKING(whether pthreads are available without options)\nAC_CACHE_VAL(ac_cv_pthread_is_default,\n[AC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <pthread.h>\n\nvoid* routine(void* p){return NULL;}\n\nint main(){\n  pthread_t p;\n  if(pthread_create(&p,NULL,routine,NULL)!=0)\n    return 1;\n  (void)pthread_detach(p);\n  return 0;\n}\n]])],[\n  ac_cv_pthread_is_default=yes\n  ac_cv_kthread=no\n  ac_cv_pthread=no\n],[ac_cv_pthread_is_default=no],[ac_cv_pthread_is_default=no])\n])\nAC_MSG_RESULT($ac_cv_pthread_is_default)\n\n\nif test $ac_cv_pthread_is_default = yes\nthen\n  ac_cv_kpthread=no\nelse\n# -Kpthread, if available, provides the right #defines\n# and linker options to make pthread_create available\n# Some compilers won't report that they do not support -Kpthread,\n# so we need to run a program to see whether it really made the\n# function available.\nAC_MSG_CHECKING(whether $CC accepts -Kpthread)\nAC_CACHE_VAL(ac_cv_kpthread,\n[ac_save_cc=\"$CC\"\nCC=\"$CC -Kpthread\"\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <pthread.h>\n\nvoid* routine(void* p){return NULL;}\n\nint main(){\n  pthread_t p;\n  if(pthread_create(&p,NULL,routine,NULL)!=0)\n    return 1;\n  (void)pthread_detach(p);\n  return 0;\n}\n]])],[ac_cv_kpthread=yes],[ac_cv_kpthread=no],[ac_cv_kpthread=no])\nCC=\"$ac_save_cc\"])\nAC_MSG_RESULT($ac_cv_kpthread)\nfi\n\nif test $ac_cv_kpthread = no -a $ac_cv_pthread_is_default = no\nthen\n# -Kthread, if available, provides the right #defines\n# and linker options to make pthread_create available\n# Some compilers won't report that they do not support -Kthread,\n# so we need to run a program to see whether it really made the\n# function available.\nAC_MSG_CHECKING(whether $CC accepts -Kthread)\nAC_CACHE_VAL(ac_cv_kthread,\n[ac_save_cc=\"$CC\"\nCC=\"$CC -Kthread\"\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <pthread.h>\n\nvoid* routine(void* p){return NULL;}\n\nint main(){\n  pthread_t p;\n  if(pthread_create(&p,NULL,routine,NULL)!=0)\n    return 1;\n  (void)pthread_detach(p);\n  return 0;\n}\n]])],[ac_cv_kthread=yes],[ac_cv_kthread=no],[ac_cv_kthread=no])\nCC=\"$ac_save_cc\"])\nAC_MSG_RESULT($ac_cv_kthread)\nfi\n\nif test $ac_cv_kthread = no -a $ac_cv_pthread_is_default = no\nthen\n# -pthread, if available, provides the right #defines\n# and linker options to make pthread_create available\n# Some compilers won't report that they do not support -pthread,\n# so we need to run a program to see whether it really made the\n# function available.\nAC_MSG_CHECKING(whether $CC accepts -pthread)\nAC_CACHE_VAL(ac_cv_pthread,\n[ac_save_cc=\"$CC\"\nCC=\"$CC -pthread\"\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <pthread.h>\n\nvoid* routine(void* p){return NULL;}\n\nint main(){\n  pthread_t p;\n  if(pthread_create(&p,NULL,routine,NULL)!=0)\n    return 1;\n  (void)pthread_detach(p);\n  return 0;\n}\n]])],[ac_cv_pthread=yes],[ac_cv_pthread=no],[ac_cv_pthread=no])\nCC=\"$ac_save_cc\"])\nAC_MSG_RESULT($ac_cv_pthread)\nfi\n\n# If we have set a CC compiler flag for thread support then\n# check if it works for CXX, too.\nac_cv_cxx_thread=no\nif test ! -z \"$CXX\"\nthen\nAC_MSG_CHECKING(whether $CXX also accepts flags for thread support)\nac_save_cxx=\"$CXX\"\n\nif test \"$ac_cv_kpthread\" = \"yes\"\nthen\n  CXX=\"$CXX -Kpthread\"\n  ac_cv_cxx_thread=yes\nelif test \"$ac_cv_kthread\" = \"yes\"\nthen\n  CXX=\"$CXX -Kthread\"\n  ac_cv_cxx_thread=yes\nelif test \"$ac_cv_pthread\" = \"yes\"\nthen\n  CXX=\"$CXX -pthread\"\n  ac_cv_cxx_thread=yes\nfi\n\nif test $ac_cv_cxx_thread = yes\nthen\n  echo 'void foo();int main(){foo();}void foo(){}' > conftest.$ac_ext\n  $CXX -c conftest.$ac_ext 2>&5\n  if $CXX -o conftest$ac_exeext conftest.$ac_objext 2>&5 \\\n     && test -s conftest$ac_exeext && ./conftest$ac_exeext\n  then\n    ac_cv_cxx_thread=yes\n  else\n    ac_cv_cxx_thread=no\n  fi\n  rm -fr conftest*\nfi\nAC_MSG_RESULT($ac_cv_cxx_thread)\nfi\nCXX=\"$ac_save_cxx\"\n\ndnl # check for ANSI or K&R (\"traditional\") preprocessor\ndnl AC_MSG_CHECKING(for C preprocessor type)\ndnl AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\ndnl #define spam(name, doc) {#name, &name, #name \"() -- \" doc}\ndnl int foo;\ndnl struct {char *name; int *addr; char *doc;} desc = spam(foo, \"something\");\ndnl ]], [[;]])],[cpp_type=ansi],[AC_DEFINE(HAVE_OLD_CPP) cpp_type=traditional])\ndnl AC_MSG_RESULT($cpp_type)\n\n# checks for header files\nAC_HEADER_STDC\nAC_CHECK_HEADERS(asm/types.h crypt.h conio.h direct.h dlfcn.h errno.h \\\nfcntl.h grp.h \\\nieeefp.h io.h langinfo.h libintl.h process.h pthread.h \\\nsched.h shadow.h signal.h stropts.h termios.h \\\nutime.h \\\npoll.h sys/devpoll.h sys/epoll.h sys/poll.h \\\nsys/audioio.h sys/xattr.h sys/bsdtty.h sys/event.h sys/file.h sys/ioctl.h \\\nsys/kern_control.h sys/loadavg.h sys/lock.h sys/mkdev.h sys/modem.h \\\nsys/param.h sys/random.h sys/select.h sys/sendfile.h sys/socket.h sys/statvfs.h \\\nsys/stat.h sys/syscall.h sys/sys_domain.h sys/termio.h sys/time.h \\\nsys/times.h sys/types.h sys/uio.h sys/un.h sys/utsname.h sys/wait.h pty.h \\\nlibutil.h sys/resource.h netpacket/packet.h sysexits.h bluetooth.h \\\nlinux/tipc.h linux/random.h spawn.h util.h alloca.h endian.h \\\nsys/endian.h sys/sysmacros.h linux/memfd.h sys/memfd.h sys/mman.h)\nAC_HEADER_DIRENT\nAC_HEADER_MAJOR\n\n# bluetooth/bluetooth.h has been known to not compile with -std=c99.\n# http://permalink.gmane.org/gmane.linux.bluez.kernel/22294\nSAVE_CFLAGS=$CFLAGS\nCFLAGS=\"-std=c99 $CFLAGS\"\nAC_CHECK_HEADERS(bluetooth/bluetooth.h)\nCFLAGS=$SAVE_CFLAGS\n\n# On Darwin (OS X) net/if.h requires sys/socket.h to be imported first.\nAC_CHECK_HEADERS([net/if.h], [], [],\n[#include <stdio.h>\n#ifdef STDC_HEADERS\n# include <stdlib.h>\n# include <stddef.h>\n#else\n# ifdef HAVE_STDLIB_H\n#  include <stdlib.h>\n# endif\n#endif\n#ifdef HAVE_SYS_SOCKET_H\n# include <sys/socket.h>\n#endif\n])\n\n# On Linux, netlink.h requires asm/types.h\nAC_CHECK_HEADERS(linux/netlink.h,,,[\n#ifdef HAVE_ASM_TYPES_H\n#include <asm/types.h>\n#endif\n#ifdef HAVE_SYS_SOCKET_H\n#include <sys/socket.h>\n#endif\n])\n\n# On Linux, qrtr.h requires asm/types.h\nAC_CHECK_HEADERS(linux/qrtr.h,,,[\n#ifdef HAVE_ASM_TYPES_H\n#include <asm/types.h>\n#endif\n#ifdef HAVE_SYS_SOCKET_H\n#include <sys/socket.h>\n#endif\n])\n\nAC_CHECK_HEADERS(linux/vm_sockets.h,,,[\n#ifdef HAVE_SYS_SOCKET_H\n#include <sys/socket.h>\n#endif\n])\n\n# On Linux, can.h and can/raw.h require sys/socket.h\nAC_CHECK_HEADERS(linux/can.h linux/can/raw.h linux/can/bcm.h,,,[\n#ifdef HAVE_SYS_SOCKET_H\n#include <sys/socket.h>\n#endif\n])\n\n# checks for typedefs\nwas_it_defined=no\nAC_MSG_CHECKING(for clock_t in time.h)\nAC_EGREP_HEADER(clock_t, time.h, was_it_defined=yes, [\n    AC_DEFINE(clock_t, long, [Define to 'long' if <time.h> doesn't define.])\n])\nAC_MSG_RESULT($was_it_defined)\n\nAC_MSG_CHECKING(for makedev)\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[\n#if defined(MAJOR_IN_MKDEV)\n#include <sys/mkdev.h>\n#elif defined(MAJOR_IN_SYSMACROS)\n#include <sys/sysmacros.h>\n#else\n#include <sys/types.h>\n#endif\n]], [[\n  makedev(0, 0) ]])\n],[ac_cv_has_makedev=yes],[ac_cv_has_makedev=no])\nAC_MSG_RESULT($ac_cv_has_makedev)\nif test \"$ac_cv_has_makedev\" = \"yes\"; then\n    AC_DEFINE(HAVE_MAKEDEV, 1, [Define this if you have the makedev macro.])\nfi\n\n# byte swapping\nAC_MSG_CHECKING(for le64toh)\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[\n#ifdef HAVE_ENDIAN_H\n#include <endian.h>\n#elif defined(HAVE_SYS_ENDIAN_H)\n#include <sys/endian.h>\n#endif\n]], [[\n   le64toh(1) ]])\n],[ac_cv_has_le64toh=yes],[ac_cv_has_le64toh=no])\nAC_MSG_RESULT($ac_cv_has_le64toh)\nif test \"$ac_cv_has_le64toh\" = \"yes\"; then\n    AC_DEFINE(HAVE_HTOLE64, 1, [Define this if you have le64toh()])\nfi\n\nuse_lfs=yes\n# Don't use largefile support for GNU/Hurd\ncase $ac_sys_system in GNU*)\n  use_lfs=no\nesac\n\nif test \"$use_lfs\" = \"yes\"; then\n# Two defines needed to enable largefile support on various platforms\n# These may affect some typedefs\ncase $ac_sys_system/$ac_sys_release in\nAIX*)\n    AC_DEFINE(_LARGE_FILES, 1,\n    [This must be defined on AIX systems to enable large file support.])\n    ;;\nesac\nAC_DEFINE(_LARGEFILE_SOURCE, 1,\n[This must be defined on some systems to enable large file support.])\nAC_DEFINE(_FILE_OFFSET_BITS, 64,\n[This must be set to 64 on some systems to enable large file support.])\nfi\n\n# Add some code to confdefs.h so that the test for off_t works on SCO\ncat >> confdefs.h <<\\EOF\n#if defined(SCO_DS)\n#undef _OFF_T\n#endif\nEOF\n\n# Type availability checks\nAC_TYPE_MODE_T\nAC_TYPE_OFF_T\nAC_TYPE_PID_T\nAC_DEFINE_UNQUOTED([RETSIGTYPE],[void],[assume C89 semantics that RETSIGTYPE is always void])\nAC_TYPE_SIZE_T\nAC_TYPE_UID_T\n\nAC_CHECK_TYPE(ssize_t,\n  AC_DEFINE(HAVE_SSIZE_T, 1, [Define if your compiler provides ssize_t]),,)\nAC_CHECK_TYPE(__uint128_t,\n  AC_DEFINE(HAVE_GCC_UINT128_T, 1, [Define if your compiler provides __uint128_t]),,)\n\n# Sizes of various common basic types\n# ANSI C requires sizeof(char) == 1, so no need to check it\nAC_CHECK_SIZEOF(int, 4)\nAC_CHECK_SIZEOF(long, 4)\nAC_CHECK_SIZEOF(long long, 8)\nAC_CHECK_SIZEOF(void *, 4)\nAC_CHECK_SIZEOF(short, 2)\nAC_CHECK_SIZEOF(float, 4)\nAC_CHECK_SIZEOF(double, 8)\nAC_CHECK_SIZEOF(fpos_t, 4)\nAC_CHECK_SIZEOF(size_t, 4)\nAC_CHECK_SIZEOF(pid_t, 4)\nAC_CHECK_SIZEOF(uintptr_t)\n\nAC_TYPE_LONG_DOUBLE\nAC_CHECK_SIZEOF(long double, 16)\n\nAC_CHECK_SIZEOF(_Bool, 1)\n\nAC_CHECK_SIZEOF(off_t, [], [\n#ifdef HAVE_SYS_TYPES_H\n#include <sys/types.h>\n#endif\n])\n\nAC_MSG_CHECKING(whether to enable large file support)\nif test \"$ac_cv_sizeof_off_t\" -gt \"$ac_cv_sizeof_long\" -a \\\n\t\"$ac_cv_sizeof_long_long\" -ge \"$ac_cv_sizeof_off_t\"; then\n  AC_DEFINE(HAVE_LARGEFILE_SUPPORT, 1,\n  [Defined to enable large file support when an off_t is bigger than a long\n   and long long is at least as big as an off_t. You may need\n   to add some flags for configuration and compilation to enable this mode.\n   (For Solaris and Linux, the necessary defines are already defined.)])\n  AC_MSG_RESULT(yes)\nelse\n  AC_MSG_RESULT(no)\nfi\n\nAC_CHECK_SIZEOF(time_t, [], [\n#ifdef HAVE_SYS_TYPES_H\n#include <sys/types.h>\n#endif\n#ifdef HAVE_TIME_H\n#include <time.h>\n#endif\n])\n\n# if have pthread_t then define SIZEOF_PTHREAD_T\nac_save_cc=\"$CC\"\nif test \"$ac_cv_kpthread\" = \"yes\"\nthen CC=\"$CC -Kpthread\"\nelif test \"$ac_cv_kthread\" = \"yes\"\nthen CC=\"$CC -Kthread\"\nelif test \"$ac_cv_pthread\" = \"yes\"\nthen CC=\"$CC -pthread\"\nfi\n\nAC_MSG_CHECKING(for pthread_t)\nhave_pthread_t=no\nAC_COMPILE_IFELSE([\n  AC_LANG_PROGRAM([[#include <pthread.h>]], [[pthread_t x; x = *(pthread_t*)0;]])\n],[have_pthread_t=yes],[])\nAC_MSG_RESULT($have_pthread_t)\nif test \"$have_pthread_t\" = yes ; then\n  AC_CHECK_SIZEOF(pthread_t, [], [\n#ifdef HAVE_PTHREAD_H\n#include <pthread.h>\n#endif\n  ])\nfi\n\n# Issue #25658: POSIX hasn't defined that pthread_key_t is compatible with int.\n# This checking will be unnecessary after removing deprecated TLS API.\nAC_CHECK_SIZEOF(pthread_key_t, [], [[#include <pthread.h>]])\nAC_MSG_CHECKING(whether pthread_key_t is compatible with int)\nif test \"$ac_cv_sizeof_pthread_key_t\" -eq \"$ac_cv_sizeof_int\" ; then\n  AC_COMPILE_IFELSE(\n    [AC_LANG_PROGRAM([[#include <pthread.h>]], [[pthread_key_t k; k * 1;]])],\n    [ac_pthread_key_t_is_arithmetic_type=yes],\n    [ac_pthread_key_t_is_arithmetic_type=no]\n  )\n  AC_MSG_RESULT($ac_pthread_key_t_is_arithmetic_type)\n  if test \"$ac_pthread_key_t_is_arithmetic_type\" = yes ; then\n    AC_DEFINE(PTHREAD_KEY_T_IS_COMPATIBLE_WITH_INT, 1,\n              [Define if pthread_key_t is compatible with int.])\n  fi\nelse\n  AC_MSG_RESULT(no)\nfi\nCC=\"$ac_save_cc\"\n\nAC_SUBST(OTHER_LIBTOOL_OPT)\ncase $ac_sys_system/$ac_sys_release in\n  Darwin/@<:@01567@:>@\\..*)\n    OTHER_LIBTOOL_OPT=\"-prebind -seg1addr 0x10000000\"\n    ;;\n  Darwin/*)\n    OTHER_LIBTOOL_OPT=\"\"\n    ;;\nesac\n\n\nAC_SUBST(LIBTOOL_CRUFT)\ncase $ac_sys_system/$ac_sys_release in\n  Darwin/@<:@01567@:>@\\..*)\n    LIBTOOL_CRUFT=\"-framework System -lcc_dynamic\"\n    if test \"${enable_universalsdk}\"; then\n\t    :\n    else\n        LIBTOOL_CRUFT=\"${LIBTOOL_CRUFT} -arch_only `/usr/bin/arch`\"\n    fi\n    LIBTOOL_CRUFT=$LIBTOOL_CRUFT' -install_name $(PYTHONFRAMEWORKINSTALLDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n    LIBTOOL_CRUFT=$LIBTOOL_CRUFT' -compatibility_version $(VERSION) -current_version $(VERSION)';;\n  Darwin/*)\n    gcc_version=`gcc -dumpversion`\n    if test ${gcc_version} '<' 4.0\n        then\n            LIBTOOL_CRUFT=\"-lcc_dynamic\"\n        else\n            LIBTOOL_CRUFT=\"\"\n    fi\n    AC_RUN_IFELSE([AC_LANG_SOURCE([[\n    #include <unistd.h>\n    int main(int argc, char*argv[])\n    {\n      if (sizeof(long) == 4) {\n    \t  return 0;\n      } else {\n      \t  return 1;\n      }\n    }\n    ]])],[ac_osx_32bit=yes],[ac_osx_32bit=no],[ac_osx_32bit=yes])\n\n    if test \"${ac_osx_32bit}\" = \"yes\"; then\n    \tcase `/usr/bin/arch` in\n    \ti386)\n    \t\tMACOSX_DEFAULT_ARCH=\"i386\"\n    \t\t;;\n    \tppc)\n    \t\tMACOSX_DEFAULT_ARCH=\"ppc\"\n    \t\t;;\n    \t*)\n    \t\tAC_MSG_ERROR([Unexpected output of 'arch' on OSX])\n    \t\t;;\n    \tesac\n    else\n    \tcase `/usr/bin/arch` in\n    \ti386)\n    \t\tMACOSX_DEFAULT_ARCH=\"x86_64\"\n    \t\t;;\n    \tppc)\n    \t\tMACOSX_DEFAULT_ARCH=\"ppc64\"\n    \t\t;;\n    \t*)\n    \t\tAC_MSG_ERROR([Unexpected output of 'arch' on OSX])\n    \t\t;;\n    \tesac\n\n    fi\n\n    LIBTOOL_CRUFT=$LIBTOOL_CRUFT\" -lSystem -lSystemStubs -arch_only ${MACOSX_DEFAULT_ARCH}\"\n    LIBTOOL_CRUFT=$LIBTOOL_CRUFT' -install_name $(PYTHONFRAMEWORKINSTALLDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n    LIBTOOL_CRUFT=$LIBTOOL_CRUFT' -compatibility_version $(VERSION) -current_version $(VERSION)';;\nesac\nAC_MSG_CHECKING(for --enable-framework)\nif test \"$enable_framework\"\nthen\n\tBASECFLAGS=\"$BASECFLAGS -fno-common -dynamic\"\n\t# -F. is needed to allow linking to the framework while\n\t# in the build location.\n\tAC_DEFINE(WITH_NEXT_FRAMEWORK, 1,\n         [Define if you want to produce an OpenStep/Rhapsody framework\n         (shared library plus accessory files).])\n\tAC_MSG_RESULT(yes)\n\tif test $enable_shared = \"yes\"\n\tthen\n\t\tAC_MSG_ERROR([Specifying both --enable-shared and --enable-framework is not supported, use only --enable-framework instead])\n\tfi\nelse\n\tAC_MSG_RESULT(no)\nfi\n\nAC_MSG_CHECKING(for dyld)\ncase $ac_sys_system/$ac_sys_release in\n  Darwin/*)\n  \tAC_DEFINE(WITH_DYLD, 1,\n        [Define if you want to use the new-style (Openstep, Rhapsody, MacOS)\n         dynamic linker (dyld) instead of the old-style (NextStep) dynamic\n         linker (rld). Dyld is necessary to support frameworks.])\n  \tAC_MSG_RESULT(always on for Darwin)\n  \t;;\n  *)\n\tAC_MSG_RESULT(no)\n\t;;\nesac\n\n# Set info about shared libraries.\nAC_SUBST(SHLIB_SUFFIX)\nAC_SUBST(LDSHARED)\nAC_SUBST(LDCXXSHARED)\nAC_SUBST(BLDSHARED)\nAC_SUBST(CCSHARED)\nAC_SUBST(LINKFORSHARED)\n\n# SHLIB_SUFFIX is the extension of shared libraries `(including the dot!)\n# -- usually .so, .sl on HP-UX, .dll on Cygwin\nAC_MSG_CHECKING(the extension of shared libraries)\nif test -z \"$SHLIB_SUFFIX\"; then\n\tcase $ac_sys_system in\n\thp*|HP*)\n\t\tcase `uname -m` in\n\t\t\tia64) SHLIB_SUFFIX=.so;;\n\t  \t\t*)    SHLIB_SUFFIX=.sl;;\n\t\tesac\n\t\t;;\n\tCYGWIN*)   SHLIB_SUFFIX=.dll;;\n\t*)\t   SHLIB_SUFFIX=.so;;\n\tesac\nfi\nAC_MSG_RESULT($SHLIB_SUFFIX)\n\n# LDSHARED is the ld *command* used to create shared library\n# -- \"cc -G\" on SunOS 5.x.\n# (Shared libraries in this instance are shared modules to be loaded into\n# Python, as opposed to building Python itself as a shared library.)\nAC_MSG_CHECKING(LDSHARED)\nif test -z \"$LDSHARED\"\nthen\n\tcase $ac_sys_system/$ac_sys_release in\n\tAIX*)\n\t\tBLDSHARED=\"Modules/ld_so_aix \\$(CC) -bI:Modules/python.exp\"\n\t\tLDSHARED=\"\\$(LIBPL)/ld_so_aix \\$(CC) -bI:\\$(LIBPL)/python.exp\"\n\t\t;;\n\tSunOS/5*)\n\t\tif test \"$GCC\" = \"yes\" ; then\n\t\t\tLDSHARED='$(CC) -shared'\n\t\t\tLDCXXSHARED='$(CXX) -shared'\n\t\telse\n\t\t\tLDSHARED='$(CC) -G'\n\t\t\tLDCXXSHARED='$(CXX) -G'\n\t\tfi ;;\n\thp*|HP*)\n\t\tif test \"$GCC\" = \"yes\" ; then\n\t\t\tLDSHARED='$(CC) -shared'\n\t\t\tLDCXXSHARED='$(CXX) -shared'\n\t\telse\n\t\t\tLDSHARED='$(CC) -b'\n\t\t\tLDCXXSHARED='$(CXX) -b'\n\t\tfi ;;\n\tDarwin/1.3*)\n\t\tLDSHARED='$(CC) -bundle'\n\t\tLDCXXSHARED='$(CXX) -bundle'\n\t\tif test \"$enable_framework\" ; then\n\t\t\t# Link against the framework. All externals should be defined.\n\t\t\tBLDSHARED=\"$LDSHARED \"'$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\t\tLDSHARED=\"$LDSHARED \"'$(PYTHONFRAMEWORKPREFIX)/$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\t\tLDCXXSHARED=\"$LDCXXSHARED \"'$(PYTHONFRAMEWORKPREFIX)/$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\telse\n\t\t\t# No framework. Ignore undefined symbols, assuming they come from Python\n\t\t\tLDSHARED=\"$LDSHARED -undefined suppress\"\n\t\t\tLDCXXSHARED=\"$LDCXXSHARED -undefined suppress\"\n\t\tfi ;;\n\tDarwin/1.4*|Darwin/5.*|Darwin/6.*)\n\t\tLDSHARED='$(CC) -bundle'\n\t\tLDCXXSHARED='$(CXX) -bundle'\n\t\tif test \"$enable_framework\" ; then\n\t\t\t# Link against the framework. All externals should be defined.\n\t\t\tBLDSHARED=\"$LDSHARED \"'$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\t\tLDSHARED=\"$LDSHARED \"'$(PYTHONFRAMEWORKPREFIX)/$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\t\tLDCXXSHARED=\"$LDCXXSHARED \"'$(PYTHONFRAMEWORKPREFIX)/$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\telse\n\t\t\t# No framework, use the Python app as bundle-loader\n\t\t\tBLDSHARED=\"$LDSHARED \"'-bundle_loader $(BUILDPYTHON)'\n\t\t\tLDSHARED=\"$LDSHARED \"'-bundle_loader $(BINDIR)/python$(VERSION)$(EXE)'\n\t\t\tLDCXXSHARED=\"$LDCXXSHARED \"'-bundle_loader $(BINDIR)/python$(VERSION)$(EXE)'\n\t\tfi ;;\n\tDarwin/*)\n\t\t# Use -undefined dynamic_lookup whenever possible (10.3 and later).\n\t\t# This allows an extension to be used in any Python\n\n\t\tdep_target_major=`echo ${MACOSX_DEPLOYMENT_TARGET} | \\\n\t\t\t\tsed 's/\\([[0-9]]*\\)\\.\\([[0-9]]*\\).*/\\1/'`\n\t\tdep_target_minor=`echo ${MACOSX_DEPLOYMENT_TARGET} | \\\n\t\t\t\tsed 's/\\([[0-9]]*\\)\\.\\([[0-9]]*\\).*/\\2/'`\n\t\tif test ${dep_target_major} -eq 10 && \\\n\t\t   test ${dep_target_minor} -le 2\n\t\tthen\n\t\t\t# building for OS X 10.0 through 10.2\n\t\t\tLDSHARED='$(CC) -bundle'\n\t\t\tLDCXXSHARED='$(CXX) -bundle'\n\t\t\tif test \"$enable_framework\" ; then\n\t\t\t\t# Link against the framework. All externals should be defined.\n\t\t\t\tBLDSHARED=\"$LDSHARED \"'$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\t\t\tLDSHARED=\"$LDSHARED \"'$(PYTHONFRAMEWORKPREFIX)/$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\t\t\tLDCXXSHARED=\"$LDCXXSHARED \"'$(PYTHONFRAMEWORKPREFIX)/$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\t\telse\n\t\t\t\t# No framework, use the Python app as bundle-loader\n\t\t\t\tBLDSHARED=\"$LDSHARED \"'-bundle_loader $(BUILDPYTHON)'\n\t\t\t\tLDSHARED=\"$LDSHARED \"'-bundle_loader $(BINDIR)/python$(VERSION)$(EXE)'\n\t\t\t\tLDCXXSHARED=\"$LDCXXSHARED \"'-bundle_loader $(BINDIR)/python$(VERSION)$(EXE)'\n\t\t\tfi\n\t\telse\n\t\t\t# building for OS X 10.3 and later\n\t\t\tLDSHARED='$(CC) -bundle -undefined dynamic_lookup'\n\t\t\tLDCXXSHARED='$(CXX) -bundle -undefined dynamic_lookup'\n\t\t\tBLDSHARED=\"$LDSHARED\"\n\t\tfi\n\t\t;;\n\tLinux*|GNU*|QNX*|VxWorks*)\n\t\tLDSHARED='$(CC) -shared'\n\t\tLDCXXSHARED='$(CXX) -shared';;\n\tFreeBSD*)\n\t\tif [[ \"`$CC -dM -E - </dev/null | grep __ELF__`\" != \"\" ]]\n\t\tthen\n\t\t\tLDSHARED='$(CC) -shared'\n\t\t\tLDCXXSHARED='$(CXX) -shared'\n\t\telse\n\t\t\tLDSHARED=\"ld -Bshareable\"\n\t\tfi;;\n\tOpenBSD*)\n\t\tif [[ \"`$CC -dM -E - </dev/null | grep __ELF__`\" != \"\" ]]\n\t\tthen\n\t\t\t\tLDSHARED='$(CC) -shared $(CCSHARED)'\n\t\t\t\tLDCXXSHARED='$(CXX) -shared $(CCSHARED)'\n\t\telse\n\t\t\t\tcase `uname -r` in\n\t\t\t\t[[01]].* | 2.[[0-7]] | 2.[[0-7]].*)\n\t\t\t\t   LDSHARED=\"ld -Bshareable ${LDFLAGS}\"\n\t\t\t\t   ;;\n\t\t\t\t*)\n\t\t\t\t   LDSHARED='$(CC) -shared $(CCSHARED)'\n\t\t\t\t   LDCXXSHARED='$(CXX) -shared $(CCSHARED)'\n\t\t\t\t   ;;\n\t\t\t\tesac\n\t\tfi;;\n\tNetBSD*|DragonFly*)\n\t\tLDSHARED='$(CC) -shared'\n\t\tLDCXXSHARED='$(CXX) -shared';;\n\tOpenUNIX*|UnixWare*)\n\t\tif test \"$GCC\" = \"yes\" ; then\n\t\t\tLDSHARED='$(CC) -shared'\n\t\t\tLDCXXSHARED='$(CXX) -shared'\n\t\telse\n\t\t\tLDSHARED='$(CC) -G'\n\t\t\tLDCXXSHARED='$(CXX) -G'\n\t\tfi;;\n\tSCO_SV*)\n\t\tLDSHARED='$(CC) -Wl,-G,-Bexport'\n\t\tLDCXXSHARED='$(CXX) -Wl,-G,-Bexport';;\n\tCYGWIN*)\n\t\tLDSHARED=\"gcc -shared -Wl,--enable-auto-image-base\"\n\t\tLDCXXSHARED=\"g++ -shared -Wl,--enable-auto-image-base\";;\n\t*)\tLDSHARED=\"ld\";;\n\tesac\nfi\nAC_MSG_RESULT($LDSHARED)\nLDCXXSHARED=${LDCXXSHARED-$LDSHARED}\nBLDSHARED=${BLDSHARED-$LDSHARED}\n# CCSHARED are the C *flags* used to create objects to go into a shared\n# library (module) -- this is only needed for a few systems\nAC_MSG_CHECKING(CCSHARED)\nif test -z \"$CCSHARED\"\nthen\n\tcase $ac_sys_system/$ac_sys_release in\n\tSunOS*) if test \"$GCC\" = yes;\n\t\tthen CCSHARED=\"-fPIC\";\n\t\telif test `uname -p` = sparc;\n\t\tthen CCSHARED=\"-xcode=pic32\";\n\t\telse CCSHARED=\"-Kpic\";\n\t\tfi;;\n\thp*|HP*) if test \"$GCC\" = yes;\n\t\t then CCSHARED=\"-fPIC\";\n\t\t else CCSHARED=\"+z\";\n\t\t fi;;\n\tLinux-android*) ;;\n\tLinux*|GNU*) CCSHARED=\"-fPIC\";;\n\tFreeBSD*|NetBSD*|OpenBSD*|DragonFly*) CCSHARED=\"-fPIC\";;\n\tOpenUNIX*|UnixWare*)\n\t\tif test \"$GCC\" = \"yes\"\n\t\tthen CCSHARED=\"-fPIC\"\n\t\telse CCSHARED=\"-KPIC\"\n\t\tfi;;\n\tSCO_SV*)\n\t\tif test \"$GCC\" = \"yes\"\n\t\tthen CCSHARED=\"-fPIC\"\n\t\telse CCSHARED=\"-Kpic -belf\"\n\t\tfi;;\n\tVxWorks*)\n\t\tCCSHARED=\"-fpic -D__SO_PICABILINUX__  -ftls-model=global-dynamic\"\n\tesac\nfi\nAC_MSG_RESULT($CCSHARED)\n# LINKFORSHARED are the flags passed to the $(CC) command that links\n# the python executable -- this is only needed for a few systems\nAC_MSG_CHECKING(LINKFORSHARED)\nif test -z \"$LINKFORSHARED\"\nthen\n\tcase $ac_sys_system/$ac_sys_release in\n\tAIX*)\tLINKFORSHARED='-Wl,-bE:Modules/python.exp -lld';;\n\thp*|HP*)\n\t    LINKFORSHARED=\"-Wl,-E -Wl,+s\";;\n#\t    LINKFORSHARED=\"-Wl,-E -Wl,+s -Wl,+b\\$(BINLIBDEST)/lib-dynload\";;\n\tLinux-android*) LINKFORSHARED=\"-pie -Xlinker -export-dynamic\";;\n\tLinux*|GNU*) LINKFORSHARED=\"-Xlinker -export-dynamic\";;\n\t# -u libsys_s pulls in all symbols in libsys\n\tDarwin/*)\n\t\tLINKFORSHARED=\"$extra_undefs -framework CoreFoundation\"\n\n\t\t# Issue #18075: the default maximum stack size (8MBytes) is too\n\t\t# small for the default recursion limit. Increase the stack size\n\t\t# to ensure that tests don't crash\n\t\t# Note: This matches the value of THREAD_STACK_SIZE in\n\t\t# thread_pthread.h\n\t\tLINKFORSHARED=\"-Wl,-stack_size,1000000 $LINKFORSHARED\"\n\n\t\tif test \"$enable_framework\"\n\t\tthen\n\t\t\tLINKFORSHARED=\"$LINKFORSHARED \"'$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'\n\t\tfi\n\t\tLINKFORSHARED=\"$LINKFORSHARED\";;\n\tOpenUNIX*|UnixWare*) LINKFORSHARED=\"-Wl,-Bexport\";;\n\tSCO_SV*) LINKFORSHARED=\"-Wl,-Bexport\";;\n\tReliantUNIX*) LINKFORSHARED=\"-W1 -Blargedynsym\";;\n\tFreeBSD*|NetBSD*|OpenBSD*|DragonFly*)\n\t\tif [[ \"`$CC -dM -E - </dev/null | grep __ELF__`\" != \"\" ]]\n\t\tthen\n\t\t\tLINKFORSHARED=\"-Wl,--export-dynamic\"\n\t\tfi;;\n\tSunOS/5*) case $CC in\n\t\t  *gcc*)\n\t\t    if $CC -Xlinker --help 2>&1 | grep export-dynamic >/dev/null\n\t\t    then\n\t\t\tLINKFORSHARED=\"-Xlinker --export-dynamic\"\n\t\t    fi;;\n\t\t  esac;;\n\tCYGWIN*)\n\t\tif test $enable_shared = \"no\"\n\t\tthen\n\t\t\tLINKFORSHARED='-Wl,--out-implib=$(LDLIBRARY)'\n\t\tfi;;\n\tQNX*)\n\t\t# -Wl,-E causes the symbols to be added to the dynamic\n\t\t# symbol table so that they can be found when a module\n\t\t# is loaded.  -N 2048K causes the stack size to be set\n\t\t# to 2048 kilobytes so that the stack doesn't overflow\n\t\t# when running test_compile.py.\n\t\tLINKFORSHARED='-Wl,-E -N 2048K';;\n\tVxWorks*)\n\t\tLINKFORSHARED='--export-dynamic';;\n\tesac\nfi\nAC_MSG_RESULT($LINKFORSHARED)\n\n\nAC_SUBST(CFLAGSFORSHARED)\nAC_MSG_CHECKING(CFLAGSFORSHARED)\nif test ! \"$LIBRARY\" = \"$LDLIBRARY\"\nthen\n\tcase $ac_sys_system in\n\tCYGWIN*)\n\t\t# Cygwin needs CCSHARED when building extension DLLs\n\t\t# but not when building the interpreter DLL.\n\t\tCFLAGSFORSHARED='';;\n\t*)\n\t\tCFLAGSFORSHARED='$(CCSHARED)'\n\tesac\nfi\nAC_MSG_RESULT($CFLAGSFORSHARED)\n\n# SHLIBS are libraries (except -lc and -lm) to link to the python shared\n# library (with --enable-shared).\n# For platforms on which shared libraries are not allowed to have unresolved\n# symbols, this must be set to $(LIBS) (expanded by make). We do this even\n# if it is not required, since it creates a dependency of the shared library\n# to LIBS. This, in turn, means that applications linking the shared libpython\n# don't need to link LIBS explicitly. The default should be only changed\n# on systems where this approach causes problems.\nAC_SUBST(SHLIBS)\nAC_MSG_CHECKING(SHLIBS)\ncase \"$ac_sys_system\" in\n\t*)\n\t\tSHLIBS='$(LIBS)';;\nesac\nAC_MSG_RESULT($SHLIBS)\n\n\n# checks for libraries\nAC_CHECK_LIB(sendfile, sendfile)\nAC_CHECK_LIB(dl, dlopen)\t# Dynamic linking for SunOS/Solaris and SYSV\nAC_CHECK_LIB(dld, shl_load)\t# Dynamic linking for HP-UX\n\n# checks for uuid.h location\nAC_CHECK_HEADERS([uuid/uuid.h uuid.h])\n\nAC_MSG_CHECKING(for uuid_generate_time_safe)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <uuid/uuid.h>]], [[\n#ifndef uuid_generate_time_safe\nvoid *x = uuid_generate_time_safe\n#endif\n]])],\n  [AC_DEFINE(HAVE_UUID_GENERATE_TIME_SAFE, 1, Define if uuid_generate_time_safe() exists.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\n# AIX provides support for RFC4122 (uuid) in libc.a starting with AIX 6.1 (anno 2007)\n# FreeBSD and OpenBSD provides support as well\nAC_MSG_CHECKING(for uuid_create)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <uuid.h>]], [[\n#ifndef uuid_create\nvoid *x = uuid_create\n#endif\n]])],\n  [AC_DEFINE(HAVE_UUID_CREATE, 1, Define if uuid_create() exists.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\n# Little-endian FreeBSD, OpenBSD and NetBSD needs encoding into an octet\n# stream in big-endian byte-order\nAC_MSG_CHECKING(for uuid_enc_be)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <uuid.h>]], [[\n#ifndef uuid_enc_be\nvoid *x = uuid_enc_be\n#endif\n]])],\n  [AC_DEFINE(HAVE_UUID_ENC_BE, 1, Define if uuid_enc_be() exists.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\n# 'Real Time' functions on Solaris\n# posix4 on Solaris 2.6\n# pthread (first!) on Linux\nAC_SEARCH_LIBS(sem_init, pthread rt posix4)\n\n# check if we need libintl for locale functions\nAC_CHECK_LIB(intl, textdomain,\n\t[AC_DEFINE(WITH_LIBINTL, 1,\n\t[Define to 1 if libintl is needed for locale functions.])\n        LIBS=\"-lintl $LIBS\"])\n\n# checks for system dependent C++ extensions support\ncase \"$ac_sys_system\" in\n\tAIX*)\tAC_MSG_CHECKING(for genuine AIX C++ extensions support)\n\t\tAC_LINK_IFELSE([\n\t\t  AC_LANG_PROGRAM([[#include <load.h>]],\n\t\t\t\t  [[loadAndInit(\"\", 0, \"\")]])\n\t\t],[\n\t\t  AC_DEFINE(AIX_GENUINE_CPLUSPLUS, 1,\n                      [Define for AIX if your compiler is a genuine IBM xlC/xlC_r\n                       and you want support for AIX C++ shared extension modules.])\n\t\t  AC_MSG_RESULT(yes)\n\t\t],[\n\t\t  AC_MSG_RESULT(no)\n\t\t]);;\n\t*) ;;\nesac\n\n# check for systems that require aligned memory access\nAC_MSG_CHECKING(aligned memory access is required)\nAC_CACHE_VAL(ac_cv_aligned_required,\n[AC_RUN_IFELSE([AC_LANG_SOURCE([[\nint main()\n{\n    char s[16];\n    int i, *p1, *p2;\n    for (i=0; i < 16; i++)\n        s[i] = i;\n    p1 = (int*)(s+1);\n    p2 = (int*)(s+2);\n    if (*p1 == *p2)\n        return 1;\n    return 0;\n}]])],\n[ac_cv_aligned_required=no],\n[ac_cv_aligned_required=yes],\n[ac_cv_aligned_required=yes])\n])\nAC_MSG_RESULT($ac_cv_aligned_required)\nif test \"$ac_cv_aligned_required\" = yes ; then\n  AC_DEFINE([HAVE_ALIGNED_REQUIRED], [1],\n    [Define if aligned memory access is required])\nfi\n\n# str, bytes and memoryview hash algorithm\nAH_TEMPLATE(Py_HASH_ALGORITHM,\n  [Define hash algorithm for str, bytes and memoryview.\n   SipHash24: 1, FNV: 2, externally defined: 0])\n\nAC_MSG_CHECKING(for --with-hash-algorithm)\ndnl quadrigraphs \"@<:@\" and \"@:>@\" produce \"[\" and \"]\" in the output\nAC_ARG_WITH(hash_algorithm,\n            AS_HELP_STRING([--with-hash-algorithm=@<:@fnv|siphash24@:>@],\n                           [select hash algorithm]),\n[\nAC_MSG_RESULT($withval)\ncase \"$withval\" in\n    siphash24)\n        AC_DEFINE(Py_HASH_ALGORITHM, 1)\n        ;;\n    fnv)\n        AC_DEFINE(Py_HASH_ALGORITHM, 2)\n        ;;\n    *)\n        AC_MSG_ERROR([unknown hash algorithm '$withval'])\n        ;;\nesac\n],\n[AC_MSG_RESULT(default)])\n\nAC_MSG_CHECKING(for --with-address-sanitizer)\nAC_ARG_WITH(address_sanitizer,\n            AS_HELP_STRING([--with-address-sanitizer],\n                           [enable AddressSanitizer (asan)]),\n[\nAC_MSG_RESULT($withval)\nBASECFLAGS=\"-fsanitize=address -fno-omit-frame-pointer $BASECFLAGS\"\nLDFLAGS=\"-fsanitize=address $LDFLAGS\"\n# ASan works by controlling memory allocation, our own malloc interferes.\nwith_pymalloc=\"no\"\n],\n[AC_MSG_RESULT(no)])\n\nAC_MSG_CHECKING(for --with-memory-sanitizer)\nAC_ARG_WITH(memory_sanitizer,\n            AS_HELP_STRING([--with-memory-sanitizer],\n                           [enable MemorySanitizer (msan)]),\n[\nAC_MSG_RESULT($withval)\nBASECFLAGS=\"-fsanitize=memory -fsanitize-memory-track-origins=2 -fno-omit-frame-pointer $BASECFLAGS\"\nLDFLAGS=\"-fsanitize=memory -fsanitize-memory-track-origins=2 $LDFLAGS\"\n# MSan works by controlling memory allocation, our own malloc interferes.\nwith_pymalloc=\"no\"\n],\n[AC_MSG_RESULT(no)])\n\nAC_MSG_CHECKING(for --with-undefined-behavior-sanitizer)\nAC_ARG_WITH(undefined_behavior_sanitizer,\n            AS_HELP_STRING([--with-undefined-behavior-sanitizer],\n                           [enable UndefinedBehaviorSanitizer (ubsan)]),\n[\nAC_MSG_RESULT($withval)\nBASECFLAGS=\"-fsanitize=undefined $BASECFLAGS\"\nLDFLAGS=\"-fsanitize=undefined $LDFLAGS\"\n],\n[AC_MSG_RESULT(no)])\n\n# Most SVR4 platforms (e.g. Solaris) need -lsocket and -lnsl.\nAC_CHECK_LIB(nsl, t_open, [LIBS=\"-lnsl $LIBS\"]) # SVR4\nAC_CHECK_LIB(socket, socket, [LIBS=\"-lsocket $LIBS\"], [], $LIBS) # SVR4 sockets\n\nAC_MSG_CHECKING(for --with-libs)\nAC_ARG_WITH(libs,\n            AS_HELP_STRING([--with-libs='lib1 ...'], [link against additional libs]),\n[\nAC_MSG_RESULT($withval)\nLIBS=\"$withval $LIBS\"\n],\n[AC_MSG_RESULT(no)])\n\nPKG_PROG_PKG_CONFIG\n\n# Check for use of the system expat library\nAC_MSG_CHECKING(for --with-system-expat)\nAC_ARG_WITH(system_expat,\n            AS_HELP_STRING([--with-system-expat], [build pyexpat module using an installed expat library]),\n            [],\n            [with_system_expat=\"no\"])\n\nAC_MSG_RESULT($with_system_expat)\n\n# Check for use of the system libffi library\nAC_MSG_CHECKING(for --with-system-ffi)\nAC_ARG_WITH(system_ffi,\n            AS_HELP_STRING([--with-system-ffi], [build _ctypes module using an installed ffi library]),,,)\n\nif test \"$ac_sys_system\" = \"Darwin\"\nthen\n    case \"$with_system_ffi\" in\n        \"\")\n            with_system_ffi=\"no\"\n            ;;\n        yes|no)\n            ;;\n        *)\n            AC_MSG_ERROR([--with-system-ffi accepts no arguments])\n            ;;\n    esac\n    AC_MSG_RESULT($with_system_ffi)\nelse\n    AC_MSG_RESULT(yes)\n    if test \"$with_system_ffi\" != \"\"\n    then\n        AC_MSG_WARN([--with(out)-system-ffi is ignored on this platform])\n    fi\n    with_system_ffi=\"yes\"\nfi\n\nif test \"$with_system_ffi\" = \"yes\" && test -n \"$PKG_CONFIG\"; then\n    LIBFFI_INCLUDEDIR=\"`\"$PKG_CONFIG\" libffi --cflags-only-I 2>/dev/null | sed -e 's/^-I//;s/ *$//'`\"\nelse\n    LIBFFI_INCLUDEDIR=\"\"\nfi\nAC_SUBST(LIBFFI_INCLUDEDIR)\n\n# Check for use of the system libmpdec library\nAC_MSG_CHECKING(for --with-system-libmpdec)\nAC_ARG_WITH(system_libmpdec,\n            AS_HELP_STRING([--with-system-libmpdec], [build _decimal module using an installed libmpdec library]),\n            [],\n            [with_system_libmpdec=\"no\"])\n\nAC_MSG_RESULT($with_system_libmpdec)\n\n# Check whether _decimal should use a coroutine-local or thread-local context\nAC_MSG_CHECKING(for --with-decimal-contextvar)\nAC_ARG_WITH(decimal_contextvar,\n            AS_HELP_STRING([--with-decimal-contextvar], [build _decimal module using a coroutine-local rather than a thread-local context (default is yes)]),\n            [],\n            [with_decimal_contextvar=\"yes\"])\n\nif test \"$with_decimal_contextvar\" != \"no\"\nthen\n    AC_DEFINE(WITH_DECIMAL_CONTEXTVAR, 1,\n      [Define if you want build the _decimal module using a coroutine-local rather than a thread-local context])\nfi\n\nAC_MSG_RESULT($with_decimal_contextvar)\n\n# Check for support for loadable sqlite extensions\nAC_MSG_CHECKING(for --enable-loadable-sqlite-extensions)\nAC_ARG_ENABLE(loadable-sqlite-extensions,\n              AS_HELP_STRING([--enable-loadable-sqlite-extensions], [support loadable extensions in _sqlite module]),\n              [],\n              [enable_loadable_sqlite_extensions=\"no\"])\n\nAC_MSG_RESULT($enable_loadable_sqlite_extensions)\n\n# Check for --with-tcltk-includes=path and --with-tcltk-libs=path\nAC_SUBST(TCLTK_INCLUDES)\nAC_SUBST(TCLTK_LIBS)\nAC_MSG_CHECKING(for --with-tcltk-includes)\nAC_ARG_WITH(tcltk-includes,\n            AS_HELP_STRING([--with-tcltk-includes='-I...'], [override search for Tcl and Tk include files]),\n            [],\n            [with_tcltk_includes=\"default\"])\nAC_MSG_RESULT($with_tcltk_includes)\nAC_MSG_CHECKING(for --with-tcltk-libs)\nAC_ARG_WITH(tcltk-libs,\n            AS_HELP_STRING([--with-tcltk-libs='-L...'], [override search for Tcl and Tk libs]),\n            [],\n            [with_tcltk_libs=\"default\"])\nAC_MSG_RESULT($with_tcltk_libs)\nif test \"x$with_tcltk_includes\" = xdefault || test \"x$with_tcltk_libs\" = xdefault\nthen\n  if test \"x$with_tcltk_includes\" != \"x$with_tcltk_libs\"\n  then\n    AC_MSG_ERROR([use both --with-tcltk-includes='...' and --with-tcltk-libs='...' or neither])\n  fi\n  TCLTK_INCLUDES=\"\"\n  TCLTK_LIBS=\"\"\nelse\n  TCLTK_INCLUDES=\"$with_tcltk_includes\"\n  TCLTK_LIBS=\"$with_tcltk_libs\"\nfi\n\n# Check for --with-dbmliborder\nAC_MSG_CHECKING(for --with-dbmliborder)\nAC_ARG_WITH(dbmliborder,\n            AS_HELP_STRING([--with-dbmliborder=db1:db2:...], [order to check db backends for dbm. Valid value is a colon separated string with the backend names `ndbm', `gdbm' and `bdb'.]),\n[\nif test x$with_dbmliborder = xyes\nthen\nAC_MSG_ERROR([proper usage is --with-dbmliborder=db1:db2:...])\nelse\n  for db in `echo $with_dbmliborder | sed 's/:/ /g'`; do\n    if test x$db != xndbm && test x$db != xgdbm && test x$db != xbdb\n    then\n      AC_MSG_ERROR([proper usage is --with-dbmliborder=db1:db2:...])\n    fi\n  done\nfi])\nAC_MSG_RESULT($with_dbmliborder)\n\n# Templates for things AC_DEFINEd more than once.\n# For a single AC_DEFINE, no template is needed.\nAH_TEMPLATE(_REENTRANT,\n  [Define to force use of thread-safe errno, h_errno, and other functions])\n\nif test \"$ac_cv_pthread_is_default\" = yes\nthen\n    # Defining _REENTRANT on system with POSIX threads should not hurt.\n    AC_DEFINE(_REENTRANT)\n    posix_threads=yes\n    if test \"$ac_sys_system\" = \"SunOS\"; then\n        CFLAGS=\"$CFLAGS -D_REENTRANT\"\n    fi\nelif test \"$ac_cv_kpthread\" = \"yes\"\nthen\n    CC=\"$CC -Kpthread\"\n    if test \"$ac_cv_cxx_thread\" = \"yes\"; then\n        CXX=\"$CXX -Kpthread\"\n    fi\n    posix_threads=yes\nelif test \"$ac_cv_kthread\" = \"yes\"\nthen\n    CC=\"$CC -Kthread\"\n    if test \"$ac_cv_cxx_thread\" = \"yes\"; then\n        CXX=\"$CXX -Kthread\"\n    fi\n    posix_threads=yes\nelif test \"$ac_cv_pthread\" = \"yes\"\nthen\n    CC=\"$CC -pthread\"\n    if test \"$ac_cv_cxx_thread\" = \"yes\"; then\n        CXX=\"$CXX -pthread\"\n    fi\n    posix_threads=yes\nelse\n    if test ! -z \"$withval\" -a -d \"$withval\"\n    then LDFLAGS=\"$LDFLAGS -L$withval\"\n    fi\n\n    # According to the POSIX spec, a pthreads implementation must\n    # define _POSIX_THREADS in unistd.h. Some apparently don't\n    # (e.g. gnu pth with pthread emulation)\n    AC_MSG_CHECKING(for _POSIX_THREADS in unistd.h)\n    AC_EGREP_CPP(yes,\n    [\n#include <unistd.h>\n#ifdef _POSIX_THREADS\nyes\n#endif\n    ], unistd_defines_pthreads=yes, unistd_defines_pthreads=no)\n    AC_MSG_RESULT($unistd_defines_pthreads)\n\n    AC_DEFINE(_REENTRANT)\n    # Just looking for pthread_create in libpthread is not enough:\n    # on HP/UX, pthread.h renames pthread_create to a different symbol name.\n    # So we really have to include pthread.h, and then link.\n    _libs=$LIBS\n    LIBS=\"$LIBS -lpthread\"\n    AC_MSG_CHECKING([for pthread_create in -lpthread])\n    AC_LINK_IFELSE([AC_LANG_PROGRAM([[\n#include <stdio.h>\n#include <pthread.h>\n\nvoid * start_routine (void *arg) { exit (0); }]], [[\npthread_create (NULL, NULL, start_routine, NULL)]])],[\n    AC_MSG_RESULT(yes)\n    posix_threads=yes\n    ],[\n    LIBS=$_libs\n    AC_CHECK_FUNC(pthread_detach, [\n    posix_threads=yes\n    ],[\n    AC_CHECK_LIB(pthreads, pthread_create, [\n    posix_threads=yes\n    LIBS=\"$LIBS -lpthreads\"\n    ], [\n    AC_CHECK_LIB(c_r, pthread_create, [\n    posix_threads=yes\n    LIBS=\"$LIBS -lc_r\"\n    ], [\n    AC_CHECK_LIB(pthread, __pthread_create_system, [\n    posix_threads=yes\n    LIBS=\"$LIBS -lpthread\"\n    ], [\n    AC_CHECK_LIB(cma, pthread_create, [\n    posix_threads=yes\n    LIBS=\"$LIBS -lcma\"\n    ],[\n    AC_MSG_ERROR([could not find pthreads on your system])\n    ])\n    ])])])])])\n\n    AC_CHECK_LIB(mpc, usconfig, [\n    LIBS=\"$LIBS -lmpc\"\n    ])\n\nfi\n\nif test \"$posix_threads\" = \"yes\"; then\n      if test \"$unistd_defines_pthreads\" = \"no\"; then\n         AC_DEFINE(_POSIX_THREADS, 1,\n         [Define if you have POSIX threads,\n          and your system does not define that.])\n      fi\n\n      # Bug 662787: Using semaphores causes unexplicable hangs on Solaris 8.\n      case  $ac_sys_system/$ac_sys_release in\n      SunOS/5.6) AC_DEFINE(HAVE_PTHREAD_DESTRUCTOR, 1,\n                       [Defined for Solaris 2.6 bug in pthread header.])\n\t\t       ;;\n      SunOS/5.8) AC_DEFINE(HAVE_BROKEN_POSIX_SEMAPHORES, 1,\n\t\t       [Define if the Posix semaphores do not work on your system])\n\t\t       ;;\n      AIX/*) AC_DEFINE(HAVE_BROKEN_POSIX_SEMAPHORES, 1,\n\t\t       [Define if the Posix semaphores do not work on your system])\n\t\t       ;;\n      esac\n\n      AC_MSG_CHECKING(if PTHREAD_SCOPE_SYSTEM is supported)\n      AC_CACHE_VAL(ac_cv_pthread_system_supported,\n      [AC_RUN_IFELSE([AC_LANG_SOURCE([[\n      #include <stdio.h>\n      #include <pthread.h>\n      void *foo(void *parm) {\n        return NULL;\n      }\n      main() {\n        pthread_attr_t attr;\n        pthread_t id;\n        if (pthread_attr_init(&attr)) return (-1);\n        if (pthread_attr_setscope(&attr, PTHREAD_SCOPE_SYSTEM)) return (-1);\n        if (pthread_create(&id, &attr, foo, NULL)) return (-1);\n        return (0);\n      }]])],\n      [ac_cv_pthread_system_supported=yes],\n      [ac_cv_pthread_system_supported=no],\n      [ac_cv_pthread_system_supported=no])\n      ])\n      AC_MSG_RESULT($ac_cv_pthread_system_supported)\n      if test \"$ac_cv_pthread_system_supported\" = \"yes\"; then\n        AC_DEFINE(PTHREAD_SYSTEM_SCHED_SUPPORTED, 1, [Defined if PTHREAD_SCOPE_SYSTEM supported.])\n      fi\n      AC_CHECK_FUNCS(pthread_sigmask,\n        [case $ac_sys_system in\n        CYGWIN*)\n          AC_DEFINE(HAVE_BROKEN_PTHREAD_SIGMASK, 1,\n            [Define if pthread_sigmask() does not work on your system.])\n            ;;\n        esac])\n      AC_CHECK_FUNCS(pthread_getcpuclockid)\nfi\n\n\n# Check for enable-ipv6\nAH_TEMPLATE(ENABLE_IPV6, [Define if --enable-ipv6 is specified])\nAC_MSG_CHECKING([if --enable-ipv6 is specified])\nAC_ARG_ENABLE(ipv6,\n[  --enable-ipv6           Enable ipv6 (with ipv4) support\n  --disable-ipv6          Disable ipv6 support],\n[ case \"$enableval\" in\n  no)\n       AC_MSG_RESULT(no)\n       ipv6=no\n       ;;\n  *)   AC_MSG_RESULT(yes)\n       AC_DEFINE(ENABLE_IPV6)\n       ipv6=yes\n       ;;\n  esac ],\n\n[\ndnl the check does not work on cross compilation case...\n  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[ /* AF_INET6 available check */\n#include <sys/types.h>\n#include <sys/socket.h>]],\n[[int domain = AF_INET6;]])],[\n  AC_MSG_RESULT(yes)\n  ipv6=yes\n],[\n  AC_MSG_RESULT(no)\n  ipv6=no\n])\n\nif test \"$ipv6\" = \"yes\"; then\n\tAC_MSG_CHECKING(if RFC2553 API is available)\n\tAC_COMPILE_IFELSE([\n\t  AC_LANG_PROGRAM([[#include <sys/types.h>\n#include <netinet/in.h>]],\n\t\t\t  [[struct sockaddr_in6 x;\n\t\t\t    x.sin6_scope_id;]])\n\t],[\n\t  AC_MSG_RESULT(yes)\n\t  ipv6=yes\n\t],[\n\t  AC_MSG_RESULT(no, IPv6 disabled)\n\t  ipv6=no\n\t])\nfi\n\nif test \"$ipv6\" = \"yes\"; then\n\tAC_DEFINE(ENABLE_IPV6)\nfi\n])\n\nipv6type=unknown\nipv6lib=none\nipv6trylibc=no\n\nif test \"$ipv6\" = \"yes\"; then\n\tAC_MSG_CHECKING([ipv6 stack type])\n\tfor i in inria kame linux-glibc linux-inet6 solaris toshiba v6d zeta;\n\tdo\n\t\tcase $i in\n\t\tinria)\n\t\t\tdnl http://www.kame.net/\n\t\t\tAC_EGREP_CPP(yes, [\n#include <netinet/in.h>\n#ifdef IPV6_INRIA_VERSION\nyes\n#endif],\n\t\t\t\t[ipv6type=$i])\n\t\t\t;;\n\t\tkame)\n\t\t\tdnl http://www.kame.net/\n\t\t\tAC_EGREP_CPP(yes, [\n#include <netinet/in.h>\n#ifdef __KAME__\nyes\n#endif],\n\t\t\t\t[ipv6type=$i;\n\t\t\t\tipv6lib=inet6\n\t\t\t\tipv6libdir=/usr/local/v6/lib\n\t\t\t\tipv6trylibc=yes])\n\t\t\t;;\n\t\tlinux-glibc)\n\t\t\tdnl http://www.v6.linux.or.jp/\n\t\t\tAC_EGREP_CPP(yes, [\n#include <features.h>\n#if defined(__GLIBC__) && ((__GLIBC__ == 2 && __GLIBC_MINOR__ >= 1) || (__GLIBC__ > 2))\nyes\n#endif],\n\t\t\t\t[ipv6type=$i;\n\t\t\t\tipv6trylibc=yes])\n\t\t\t;;\n\t\tlinux-inet6)\n\t\t\tdnl http://www.v6.linux.or.jp/\n\t\t\tif test -d /usr/inet6; then\n\t\t\t\tipv6type=$i\n\t\t\t\tipv6lib=inet6\n\t\t\t\tipv6libdir=/usr/inet6/lib\n\t\t\t\tBASECFLAGS=\"-I/usr/inet6/include $BASECFLAGS\"\n\t\t\tfi\n\t\t\t;;\n\t\tsolaris)\n\t\t\tif test -f /etc/netconfig; then\n                          if $GREP -q tcp6 /etc/netconfig; then\n\t\t\t\tipv6type=$i\n\t\t\t\tipv6trylibc=yes\n                          fi\n                        fi\n\t\t\t;;\n\t\ttoshiba)\n\t\t\tAC_EGREP_CPP(yes, [\n#include <sys/param.h>\n#ifdef _TOSHIBA_INET6\nyes\n#endif],\n\t\t\t\t[ipv6type=$i;\n\t\t\t\tipv6lib=inet6;\n\t\t\t\tipv6libdir=/usr/local/v6/lib])\n\t\t\t;;\n\t\tv6d)\n\t\t\tAC_EGREP_CPP(yes, [\n#include </usr/local/v6/include/sys/v6config.h>\n#ifdef __V6D__\nyes\n#endif],\n\t\t\t\t[ipv6type=$i;\n\t\t\t\tipv6lib=v6;\n\t\t\t\tipv6libdir=/usr/local/v6/lib;\n\t\t\t\tBASECFLAGS=\"-I/usr/local/v6/include $BASECFLAGS\"])\n\t\t\t;;\n\t\tzeta)\n\t\t\tAC_EGREP_CPP(yes, [\n#include <sys/param.h>\n#ifdef _ZETA_MINAMI_INET6\nyes\n#endif],\n\t\t\t\t[ipv6type=$i;\n\t\t\t\tipv6lib=inet6;\n\t\t\t\tipv6libdir=/usr/local/v6/lib])\n\t\t\t;;\n\t\tesac\n\t\tif test \"$ipv6type\" != \"unknown\"; then\n\t\t\tbreak\n\t\tfi\n\tdone\n\tAC_MSG_RESULT($ipv6type)\nfi\n\nif test \"$ipv6\" = \"yes\" -a \"$ipv6lib\" != \"none\"; then\n\tif test -d $ipv6libdir -a -f $ipv6libdir/lib$ipv6lib.a; then\n\t\tLIBS=\"-L$ipv6libdir -l$ipv6lib $LIBS\"\n\t\techo \"using lib$ipv6lib\"\n\telse\n\t\tif test $ipv6trylibc = \"yes\"; then\n\t\t\techo \"using libc\"\n\t\telse\n\t\t\techo 'Fatal: no $ipv6lib library found.  cannot continue.'\n\t\t\techo \"You need to fetch lib$ipv6lib.a from appropriate\"\n\t\t\techo 'ipv6 kit and compile beforehand.'\n\t\t\texit 1\n\t\tfi\n\tfi\nfi\n\nAC_MSG_CHECKING(for CAN_RAW_FD_FRAMES)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[ /* CAN_RAW_FD_FRAMES available check */\n#include <linux/can/raw.h>]],\n[[int can_raw_fd_frames = CAN_RAW_FD_FRAMES;]])],[\n  AC_DEFINE(HAVE_LINUX_CAN_RAW_FD_FRAMES, 1, [Define if compiling using Linux 3.6 or later.])\n  AC_MSG_RESULT(yes)\n],[\n  AC_MSG_RESULT(no)\n])\n\n# Check for --with-doc-strings\nAC_MSG_CHECKING(for --with-doc-strings)\nAC_ARG_WITH(doc-strings,\n            AS_HELP_STRING([--with(out)-doc-strings], [disable/enable documentation strings]))\n\nif test -z \"$with_doc_strings\"\nthen with_doc_strings=\"yes\"\nfi\nif test \"$with_doc_strings\" != \"no\"\nthen\n    AC_DEFINE(WITH_DOC_STRINGS, 1,\n      [Define if you want documentation strings in extension modules])\nfi\nAC_MSG_RESULT($with_doc_strings)\n\n# Check for Python-specific malloc support\nAC_MSG_CHECKING(for --with-pymalloc)\nAC_ARG_WITH(pymalloc,\n            AS_HELP_STRING([--with(out)-pymalloc], [disable/enable specialized mallocs]))\n\nif test -z \"$with_pymalloc\"\nthen\n    with_pymalloc=\"yes\"\nfi\nif test \"$with_pymalloc\" != \"no\"\nthen\n    AC_DEFINE(WITH_PYMALLOC, 1,\n     [Define if you want to compile in Python-specific mallocs])\nfi\nAC_MSG_RESULT($with_pymalloc)\n\n# Check for --with-c-locale-coercion\nAC_MSG_CHECKING(for --with-c-locale-coercion)\nAC_ARG_WITH(c-locale-coercion,\n            AS_HELP_STRING([--with(out)-c-locale-coercion],\n              [disable/enable C locale coercion to a UTF-8 based locale]))\n\nif test -z \"$with_c_locale_coercion\"\nthen\n    with_c_locale_coercion=\"yes\"\nfi\nif test \"$with_c_locale_coercion\" != \"no\"\nthen\n    AC_DEFINE(PY_COERCE_C_LOCALE, 1,\n      [Define if you want to coerce the C locale to a UTF-8 based locale])\nfi\nAC_MSG_RESULT($with_c_locale_coercion)\n\n# Check for Valgrind support\nAC_MSG_CHECKING([for --with-valgrind])\nAC_ARG_WITH([valgrind],\n  AS_HELP_STRING([--with-valgrind], [Enable Valgrind support]),,\n  with_valgrind=no)\nAC_MSG_RESULT([$with_valgrind])\nif test \"$with_valgrind\" != no; then\n    AC_CHECK_HEADER([valgrind/valgrind.h],\n      [AC_DEFINE([WITH_VALGRIND], 1, [Define if you want pymalloc to be disabled when running under valgrind])],\n      [AC_MSG_ERROR([Valgrind support requested but headers not available])]\n    )\n    OPT=\"-DDYNAMIC_ANNOTATIONS_ENABLED=1 $OPT\"\nfi\n\n# Check for DTrace support\nAC_MSG_CHECKING(for --with-dtrace)\nAC_ARG_WITH(dtrace,\n  AS_HELP_STRING([--with(out)-dtrace],[disable/enable DTrace support]),,\n  with_dtrace=no)\nAC_MSG_RESULT($with_dtrace)\n\nAC_SUBST(DTRACE)\nAC_SUBST(DFLAGS)\nAC_SUBST(DTRACE_HEADERS)\nAC_SUBST(DTRACE_OBJS)\nDTRACE=\nDFLAGS=\nDTRACE_HEADERS=\nDTRACE_OBJS=\n\nif test \"$with_dtrace\" = \"yes\"\nthen\n    AC_PATH_PROG(DTRACE, [dtrace], [not found])\n    if test \"$DTRACE\" = \"not found\"; then\n        AC_MSG_ERROR([dtrace command not found on \\$PATH])\n    fi\n    AC_DEFINE(WITH_DTRACE, 1, [Define if you want to compile in DTrace support])\n    DTRACE_HEADERS=\"Include/pydtrace_probes.h\"\n\n    # On OS X, DTrace providers do not need to be explicitly compiled and\n    # linked into the binary. Correspondingly, dtrace(1) is missing the ELF\n    # generation flag '-G'. We check for presence of this flag, rather than\n    # hardcoding support by OS, in the interest of robustness.\n    AC_CACHE_CHECK([whether DTrace probes require linking],\n        [ac_cv_dtrace_link], [dnl\n            ac_cv_dtrace_link=no\n            echo 'BEGIN{}' > conftest.d\n            \"$DTRACE\" -G -s conftest.d -o conftest.o > /dev/null 2>&1 && \\\n                ac_cv_dtrace_link=yes\n      ])\n    if test \"$ac_cv_dtrace_link\" = \"yes\"; then\n        DTRACE_OBJS=\"Python/pydtrace.o\"\n    fi\nfi\n\n# -I${DLINCLDIR} is added to the compile rule for importdl.o\nAC_SUBST(DLINCLDIR)\nDLINCLDIR=.\n\n# the dlopen() function means we might want to use dynload_shlib.o. some\n# platforms, such as AIX, have dlopen(), but don't want to use it.\nAC_CHECK_FUNCS(dlopen)\n\n# DYNLOADFILE specifies which dynload_*.o file we will use for dynamic\n# loading of modules.\nAC_SUBST(DYNLOADFILE)\nAC_MSG_CHECKING(DYNLOADFILE)\nif test -z \"$DYNLOADFILE\"\nthen\n\tcase $ac_sys_system/$ac_sys_release in\n\tAIX*) # Use dynload_shlib.c and dlopen() if we have it; otherwise dynload_aix.c\n\tif test \"$ac_cv_func_dlopen\" = yes\n\tthen DYNLOADFILE=\"dynload_shlib.o\"\n\telse DYNLOADFILE=\"dynload_aix.o\"\n\tfi\n\t;;\n\thp*|HP*) DYNLOADFILE=\"dynload_hpux.o\";;\n\t*)\n\t# use dynload_shlib.c and dlopen() if we have it; otherwise stub\n\t# out any dynamic loading\n\tif test \"$ac_cv_func_dlopen\" = yes\n\tthen DYNLOADFILE=\"dynload_shlib.o\"\n\telse DYNLOADFILE=\"dynload_stub.o\"\n\tfi\n\t;;\n\tesac\nfi\nAC_MSG_RESULT($DYNLOADFILE)\nif test \"$DYNLOADFILE\" != \"dynload_stub.o\"\nthen\n\tAC_DEFINE(HAVE_DYNAMIC_LOADING, 1,\n        [Defined when any dynamic module loading is enabled.])\nfi\n\n# MACHDEP_OBJS can be set to platform-specific object files needed by Python\n\nAC_SUBST(MACHDEP_OBJS)\nAC_MSG_CHECKING(MACHDEP_OBJS)\nif test -z \"$MACHDEP_OBJS\"\nthen\n\tMACHDEP_OBJS=$extra_machdep_objs\nelse\n\tMACHDEP_OBJS=\"$MACHDEP_OBJS $extra_machdep_objs\"\nfi\nif test -z \"$MACHDEP_OBJS\"; then\n  AC_MSG_RESULT([none])\nelse\n  AC_MSG_RESULT([$MACHDEP_OBJS])\nfi\n\n# checks for library functions\nAC_CHECK_FUNCS(alarm accept4 setitimer getitimer bind_textdomain_codeset chown \\\n clock confstr copy_file_range ctermid dup3 execv explicit_bzero explicit_memset \\\n faccessat fchmod fchmodat fchown fchownat \\\n fdwalk fexecve fdopendir fork fpathconf fstatat ftime ftruncate futimesat \\\n futimens futimes gai_strerror getentropy \\\n getgrgid_r getgrnam_r \\\n getgrouplist getgroups getlogin getloadavg getpeername getpgid getpid \\\n getpriority getresuid getresgid getpwent getpwnam_r getpwuid_r getspnam getspent getsid getwd \\\n if_nameindex \\\n initgroups kill killpg lchown lockf linkat lstat lutimes mmap \\\n memrchr mbrtowc mkdirat mkfifo \\\n madvise mkfifoat mknod mknodat mktime mremap nice openat pathconf pause pipe2 plock poll \\\n posix_fallocate posix_fadvise posix_spawn posix_spawnp pread preadv preadv2 \\\n pthread_condattr_setclock pthread_init pthread_kill putenv pwrite pwritev pwritev2 \\\n readlink readlinkat readv realpath renameat \\\n sem_open sem_timedwait sem_getvalue sem_unlink sendfile setegid seteuid \\\n setgid sethostname \\\n setlocale setregid setreuid setresuid setresgid setsid setpgid setpgrp setpriority setuid setvbuf \\\n sched_get_priority_max sched_setaffinity sched_setscheduler sched_setparam \\\n sched_rr_get_interval \\\n sigaction sigaltstack sigfillset siginterrupt sigpending sigrelse \\\n sigtimedwait sigwait sigwaitinfo snprintf strftime strlcpy strsignal symlinkat sync \\\n sysconf tcgetpgrp tcsetpgrp tempnam timegm times tmpfile tmpnam tmpnam_r \\\n truncate uname unlinkat unsetenv utimensat utimes waitid waitpid wait3 wait4 \\\n wcscoll wcsftime wcsxfrm wmemcmp writev _getpty rtpSpawn)\n\n# Force lchmod off for Linux. Linux disallows changing the mode of symbolic\n# links. Some libc implementations have a stub lchmod implementation that always\n# returns an error.\nif test \"$MACHDEP\" != linux; then\n  AC_CHECK_FUNCS(lchmod)\nfi\n\nAC_CHECK_DECL(dirfd,\n    AC_DEFINE(HAVE_DIRFD, 1,\n              Define if you have the 'dirfd' function or macro.), ,\n      [#include <sys/types.h>\n       #include <dirent.h>])\n\n# For some functions, having a definition is not sufficient, since\n# we want to take their address.\nAC_MSG_CHECKING(for chroot)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[void *x=chroot]])],\n  [AC_DEFINE(HAVE_CHROOT, 1, Define if you have the 'chroot' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for link)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[void *x=link]])],\n  [AC_DEFINE(HAVE_LINK, 1, Define if you have the 'link' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for symlink)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[void *x=symlink]])],\n  [AC_DEFINE(HAVE_SYMLINK, 1, Define if you have the 'symlink' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for fchdir)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[void *x=fchdir]])],\n  [AC_DEFINE(HAVE_FCHDIR, 1, Define if you have the 'fchdir' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for fsync)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[void *x=fsync]])],\n  [AC_DEFINE(HAVE_FSYNC, 1, Define if you have the 'fsync' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for fdatasync)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[void *x=fdatasync]])],\n  [AC_DEFINE(HAVE_FDATASYNC, 1, Define if you have the 'fdatasync' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for epoll)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/epoll.h>]], [[void *x=epoll_create]])],\n  [AC_DEFINE(HAVE_EPOLL, 1, Define if you have the 'epoll' functions.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for epoll_create1)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/epoll.h>]], [[void *x=epoll_create1]])],\n  [AC_DEFINE(HAVE_EPOLL_CREATE1, 1, Define if you have the 'epoll_create1' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for kqueue)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/types.h>\n#include <sys/event.h>\n    ]], [[int x=kqueue()]])],\n  [AC_DEFINE(HAVE_KQUEUE, 1, Define if you have the 'kqueue' functions.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\nAC_MSG_CHECKING(for prlimit)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/time.h>\n#include <sys/resource.h>\n    ]], [[void *x=prlimit]])],\n  [AC_DEFINE(HAVE_PRLIMIT, 1, Define if you have the 'prlimit' functions.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\nAC_MSG_CHECKING(for memfd_create)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#ifdef HAVE_SYS_MMAN_H\n#include <sys/mman.h>\n#endif\n#ifdef HAVE_SYS_MEMFD_H\n#include <sys/memfd.h>\n#endif\n]], [[void *x=memfd_create]])],\n  [AC_DEFINE(HAVE_MEMFD_CREATE, 1, Define if you have the 'memfd_create' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\n# On some systems (eg. FreeBSD 5), we would find a definition of the\n# functions ctermid_r, setgroups in the library, but no prototype\n# (e.g. because we use _XOPEN_SOURCE). See whether we can take their\n# address to avoid compiler warnings and potential miscompilations\n# because of the missing prototypes.\n\nAC_MSG_CHECKING(for ctermid_r)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <stdio.h>\n]], [[void* p = ctermid_r]])],\n  [AC_DEFINE(HAVE_CTERMID_R, 1, Define if you have the 'ctermid_r' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\nAC_CACHE_CHECK([for flock declaration], [ac_cv_flock_decl],\n  [AC_COMPILE_IFELSE(\n    [AC_LANG_PROGRAM(\n      [#include <sys/file.h>],\n      [void* p = flock]\n    )],\n    [ac_cv_flock_decl=yes],\n    [ac_cv_flock_decl=no]\n  )\n])\nif test \"x${ac_cv_flock_decl}\" = xyes; then\n  AC_CHECK_FUNCS(flock,,\n    AC_CHECK_LIB(bsd,flock,\n      [AC_DEFINE(HAVE_FLOCK)\n       AC_DEFINE(FLOCK_NEEDS_LIBBSD, 1, Define if flock needs to be linked with bsd library.)\n    ])\n  )\nfi\n\nAC_MSG_CHECKING(for getpagesize)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <unistd.h>\n]], [[void* p = getpagesize]])],\n  [AC_DEFINE(HAVE_GETPAGESIZE, 1, Define if you have the 'getpagesize' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\nAC_MSG_CHECKING(for broken unsetenv)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <stdlib.h>\n]], [[int res = unsetenv(\"DUMMY\")]])],\n  [AC_MSG_RESULT(no)],\n  [AC_DEFINE(HAVE_BROKEN_UNSETENV, 1, Define if `unsetenv` does not return an int.)\n   AC_MSG_RESULT(yes)\n])\n\ndnl check for true\nAC_CHECK_PROGS(TRUE, true, /bin/true)\n\ndnl On some systems (e.g. Solaris 9), hstrerror and inet_aton are in -lresolv\ndnl On others, they are in the C library, so we to take no action\nAC_CHECK_LIB(c, inet_aton, [$ac_cv_prog_TRUE],\n  AC_CHECK_LIB(resolv, inet_aton)\n)\n\n# On Tru64, chflags seems to be present, but calling it will\n# exit Python\nAC_CACHE_CHECK([for chflags], [ac_cv_have_chflags], [dnl\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <sys/stat.h>\n#include <unistd.h>\nint main(int argc, char*argv[])\n{\n  if(chflags(argv[0], 0) != 0)\n    return 1;\n  return 0;\n}\n]])],\n[ac_cv_have_chflags=yes],\n[ac_cv_have_chflags=no],\n[ac_cv_have_chflags=cross])\n])\nif test \"$ac_cv_have_chflags\" = cross ; then\n  AC_CHECK_FUNC([chflags], [ac_cv_have_chflags=\"yes\"], [ac_cv_have_chflags=\"no\"])\nfi\nif test \"$ac_cv_have_chflags\" = yes ; then\n  AC_DEFINE(HAVE_CHFLAGS, 1, [Define to 1 if you have the 'chflags' function.])\nfi\n\nAC_CACHE_CHECK([for lchflags], [ac_cv_have_lchflags], [dnl\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <sys/stat.h>\n#include <unistd.h>\nint main(int argc, char*argv[])\n{\n  if(lchflags(argv[0], 0) != 0)\n    return 1;\n  return 0;\n}\n]])],[ac_cv_have_lchflags=yes],[ac_cv_have_lchflags=no],[ac_cv_have_lchflags=cross])\n])\nif test \"$ac_cv_have_lchflags\" = cross ; then\n  AC_CHECK_FUNC([lchflags], [ac_cv_have_lchflags=\"yes\"], [ac_cv_have_lchflags=\"no\"])\nfi\nif test \"$ac_cv_have_lchflags\" = yes ; then\n  AC_DEFINE(HAVE_LCHFLAGS, 1, [Define to 1 if you have the 'lchflags' function.])\nfi\n\ndnl Check if system zlib has *Copy() functions\ndnl\ndnl On MacOSX the linker will search for dylibs on the entire linker path\ndnl before searching for static libraries. setup.py adds -Wl,-search_paths_first\ndnl to revert to a more traditional unix behaviour and make it possible to\ndnl override the system libz with a local static library of libz. Temporarily\ndnl add that flag to our CFLAGS as well to ensure that we check the version\ndnl of libz that will be used by setup.py.\ndnl The -L/usr/local/lib is needed as wel to get the same compilation\ndnl environment as setup.py (and leaving it out can cause configure to use the\ndnl wrong version of the library)\ncase $ac_sys_system/$ac_sys_release in\nDarwin/*)\n\t_CUR_CFLAGS=\"${CFLAGS}\"\n\t_CUR_LDFLAGS=\"${LDFLAGS}\"\n\tCFLAGS=\"${CFLAGS} -Wl,-search_paths_first\"\n\tLDFLAGS=\"${LDFLAGS} -Wl,-search_paths_first -L/usr/local/lib\"\n\t;;\nesac\n\nAC_CHECK_LIB(z, inflateCopy, AC_DEFINE(HAVE_ZLIB_COPY, 1, [Define if the zlib library has inflateCopy]))\n\ncase $ac_sys_system/$ac_sys_release in\nDarwin/*)\n\tCFLAGS=\"${_CUR_CFLAGS}\"\n\tLDFLAGS=\"${_CUR_LDFLAGS}\"\n\t;;\nesac\n\nAC_MSG_CHECKING(for hstrerror)\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[\n#include <netdb.h>\n]], [[void* p = hstrerror; hstrerror(0)]])],\n  [AC_DEFINE(HAVE_HSTRERROR, 1, Define if you have the 'hstrerror' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\nAC_MSG_CHECKING(for inet_aton)\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n]], [[void* p = inet_aton;inet_aton(0,0)]])],\n  [AC_DEFINE(HAVE_INET_ATON, 1, Define if you have the 'inet_aton' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\nAC_MSG_CHECKING(for inet_pton)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n]], [[void* p = inet_pton]])],\n  [AC_DEFINE(HAVE_INET_PTON, 1, Define if you have the 'inet_pton' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\n# On some systems, setgroups is in unistd.h, on others, in grp.h\nAC_MSG_CHECKING(for setgroups)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <unistd.h>\n#ifdef HAVE_GRP_H\n#include <grp.h>\n#endif\n]], [[void* p = setgroups]])],\n  [AC_DEFINE(HAVE_SETGROUPS, 1, Define if you have the 'setgroups' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)\n])\n\n# check for openpty and forkpty\n\nAC_CHECK_FUNCS(openpty,,\n   AC_CHECK_LIB(util,openpty,\n     [AC_DEFINE(HAVE_OPENPTY) LIBS=\"$LIBS -lutil\"],\n     AC_CHECK_LIB(bsd,openpty, [AC_DEFINE(HAVE_OPENPTY) LIBS=\"$LIBS -lbsd\"])\n   )\n)\nAC_CHECK_FUNCS(forkpty,,\n   AC_CHECK_LIB(util,forkpty,\n     [AC_DEFINE(HAVE_FORKPTY) LIBS=\"$LIBS -lutil\"],\n     AC_CHECK_LIB(bsd,forkpty, [AC_DEFINE(HAVE_FORKPTY) LIBS=\"$LIBS -lbsd\"])\n   )\n)\n\n# check for long file support functions\nAC_CHECK_FUNCS(fseek64 fseeko fstatvfs ftell64 ftello statvfs)\n\nAC_REPLACE_FUNCS(dup2 strdup)\nAC_CHECK_FUNCS(getpgrp,\n  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[getpgrp(0);]])],\n    [AC_DEFINE(GETPGRP_HAVE_ARG, 1, [Define if getpgrp() must be called as getpgrp(0).])],\n    [])\n)\nAC_CHECK_FUNCS(setpgrp,\n  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]], [[setpgrp(0,0);]])],\n    [AC_DEFINE(SETPGRP_HAVE_ARG, 1, [Define if setpgrp() must be called as setpgrp(0, 0).])],\n    [])\n)\nAC_CHECK_FUNCS(gettimeofday,\n  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/time.h>]],\n  \t\t\t\t     [[gettimeofday((struct timeval*)0,(struct timezone*)0);]])],\n    [],\n    [AC_DEFINE(GETTIMEOFDAY_NO_TZ, 1,\n      [Define if gettimeofday() does not have second (timezone) argument\n       This is the case on Motorola V4 (R40V4.2)])\n    ])\n)\n\n# We search for both crypt and crypt_r as one or the other may be defined\n# This gets us our -lcrypt in LIBS when required on the target platform.\nAC_SEARCH_LIBS(crypt, crypt)\nAC_SEARCH_LIBS(crypt_r, crypt)\n\nAC_CHECK_FUNC(crypt_r,\n  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#define _GNU_SOURCE  /* Required for crypt_r()'s prototype in glibc. */\n#include <crypt.h>\n]], [[\nstruct crypt_data d;\nchar *r = crypt_r(\"\", \"\", &d);\n]])],\n    [AC_DEFINE(HAVE_CRYPT_R, 1, [Define if you have the crypt_r() function.])],\n    [])\n)\n\nAC_CHECK_FUNCS(clock_gettime, [], [\n    AC_CHECK_LIB(rt, clock_gettime, [\n        LIBS=\"$LIBS -lrt\"\n        AC_DEFINE(HAVE_CLOCK_GETTIME, 1)\n        AC_DEFINE(TIMEMODULE_LIB, [rt],\n                  [Library needed by timemodule.c: librt may be needed for clock_gettime()])\n    ])\n])\n\nAC_CHECK_FUNCS(clock_getres, [], [\n    AC_CHECK_LIB(rt, clock_getres, [\n        AC_DEFINE(HAVE_CLOCK_GETRES, 1)\n    ])\n])\n\nAC_CHECK_FUNCS(clock_settime, [], [\n    AC_CHECK_LIB(rt, clock_settime, [\n        AC_DEFINE(HAVE_CLOCK_SETTIME, 1)\n    ])\n])\n\nAC_MSG_CHECKING(for major, minor, and makedev)\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[\n#if defined(MAJOR_IN_MKDEV)\n#include <sys/mkdev.h>\n#elif defined(MAJOR_IN_SYSMACROS)\n#include <sys/sysmacros.h>\n#else\n#include <sys/types.h>\n#endif\n]], [[\n  makedev(major(0),minor(0));\n]])],[\n  AC_DEFINE(HAVE_DEVICE_MACROS, 1,\n\t    [Define to 1 if you have the device macros.])\n  AC_MSG_RESULT(yes)\n],[\n  AC_MSG_RESULT(no)\n])\n\n# On OSF/1 V5.1, getaddrinfo is available, but a define\n# for [no]getaddrinfo in netdb.h.\nAC_MSG_CHECKING(for getaddrinfo)\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netdb.h>\n#include <stdio.h>\n]], [[getaddrinfo(NULL, NULL, NULL, NULL);]])],\n[have_getaddrinfo=yes],\n[have_getaddrinfo=no])\nAC_MSG_RESULT($have_getaddrinfo)\nif test $have_getaddrinfo = yes\nthen\n  AC_MSG_CHECKING(getaddrinfo bug)\n  AC_CACHE_VAL(ac_cv_buggy_getaddrinfo,\n  AC_RUN_IFELSE([AC_LANG_SOURCE([[[\n#include <stdio.h>\n#include <sys/types.h>\n#include <netdb.h>\n#include <string.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n\nint main()\n{\n  int passive, gaierr, inet4 = 0, inet6 = 0;\n  struct addrinfo hints, *ai, *aitop;\n  char straddr[INET6_ADDRSTRLEN], strport[16];\n\n  for (passive = 0; passive <= 1; passive++) {\n    memset(&hints, 0, sizeof(hints));\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_flags = passive ? AI_PASSIVE : 0;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n    if ((gaierr = getaddrinfo(NULL, \"54321\", &hints, &aitop)) != 0) {\n      (void)gai_strerror(gaierr);\n      goto bad;\n    }\n    for (ai = aitop; ai; ai = ai->ai_next) {\n      if (ai->ai_addr == NULL ||\n          ai->ai_addrlen == 0 ||\n          getnameinfo(ai->ai_addr, ai->ai_addrlen,\n                      straddr, sizeof(straddr), strport, sizeof(strport),\n                      NI_NUMERICHOST|NI_NUMERICSERV) != 0) {\n        goto bad;\n      }\n      switch (ai->ai_family) {\n      case AF_INET:\n        if (strcmp(strport, \"54321\") != 0) {\n          goto bad;\n        }\n        if (passive) {\n          if (strcmp(straddr, \"0.0.0.0\") != 0) {\n            goto bad;\n          }\n        } else {\n          if (strcmp(straddr, \"127.0.0.1\") != 0) {\n            goto bad;\n          }\n        }\n        inet4++;\n        break;\n      case AF_INET6:\n        if (strcmp(strport, \"54321\") != 0) {\n          goto bad;\n        }\n        if (passive) {\n          if (strcmp(straddr, \"::\") != 0) {\n            goto bad;\n          }\n        } else {\n          if (strcmp(straddr, \"::1\") != 0) {\n            goto bad;\n          }\n        }\n        inet6++;\n        break;\n      case AF_UNSPEC:\n        goto bad;\n        break;\n      default:\n        /* another family support? */\n        break;\n      }\n    }\n    freeaddrinfo(aitop);\n    aitop = NULL;\n  }\n\n  if (!(inet4 == 0 || inet4 == 2))\n    goto bad;\n  if (!(inet6 == 0 || inet6 == 2))\n    goto bad;\n\n  if (aitop)\n    freeaddrinfo(aitop);\n  return 0;\n\n bad:\n  if (aitop)\n    freeaddrinfo(aitop);\n  return 1;\n}\n]]])],\n[ac_cv_buggy_getaddrinfo=no],\n[ac_cv_buggy_getaddrinfo=yes],\n[\nif test \"${enable_ipv6+set}\" = set; then\n  ac_cv_buggy_getaddrinfo=\"no -- configured with --(en|dis)able-ipv6\"\nelse\n  ac_cv_buggy_getaddrinfo=yes\nfi]))\nfi\n\nAC_MSG_RESULT($ac_cv_buggy_getaddrinfo)\n\nif test $have_getaddrinfo = no || test \"$ac_cv_buggy_getaddrinfo\" = yes\nthen\n\tif test $ipv6 = yes\n\tthen\n\t\techo 'Fatal: You must get working getaddrinfo() function.'\n\t\techo '       or you can specify \"--disable-ipv6\"'.\n\t\texit 1\n\tfi\nelse\n\tAC_DEFINE(HAVE_GETADDRINFO, 1, [Define if you have the getaddrinfo function.])\nfi\n\nAC_CHECK_FUNCS(getnameinfo)\n\n# checks for structures\nAC_HEADER_TIME\nAC_STRUCT_TM\nAC_STRUCT_TIMEZONE\nAC_CHECK_MEMBERS([struct stat.st_rdev])\nAC_CHECK_MEMBERS([struct stat.st_blksize])\nAC_CHECK_MEMBERS([struct stat.st_flags])\nAC_CHECK_MEMBERS([struct stat.st_gen])\nAC_CHECK_MEMBERS([struct stat.st_birthtime])\nAC_CHECK_MEMBERS([struct stat.st_blocks])\nAC_CHECK_MEMBERS([struct passwd.pw_gecos, struct passwd.pw_passwd], [], [], [[\n  #include <sys/types.h>\n  #include <pwd.h>\n]])\n# Issue #21085: In Cygwin, siginfo_t does not have si_band field.\nAC_CHECK_MEMBERS([siginfo_t.si_band], [], [], [[#include <signal.h>]])\n\nAC_MSG_CHECKING(for time.h that defines altzone)\nAC_CACHE_VAL(ac_cv_header_time_altzone,[\n  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <time.h>]], [[return altzone;]])],\n    [ac_cv_header_time_altzone=yes],\n    [ac_cv_header_time_altzone=no])\n  ])\nAC_MSG_RESULT($ac_cv_header_time_altzone)\nif test $ac_cv_header_time_altzone = yes; then\n  AC_DEFINE(HAVE_ALTZONE, 1, [Define this if your time.h defines altzone.])\nfi\n\nwas_it_defined=no\nAC_MSG_CHECKING(whether sys/select.h and sys/time.h may both be included)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/types.h>\n#include <sys/select.h>\n#include <sys/time.h>\n]], [[;]])],[\n  AC_DEFINE(SYS_SELECT_WITH_SYS_TIME, 1,\n  [Define if  you can safely include both <sys/select.h> and <sys/time.h>\n   (which you can't on SCO ODT 3.0).])\n  was_it_defined=yes\n],[])\nAC_MSG_RESULT($was_it_defined)\n\nAC_MSG_CHECKING(for addrinfo)\nAC_CACHE_VAL(ac_cv_struct_addrinfo,\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <netdb.h>]], [[struct addrinfo a]])],\n  [ac_cv_struct_addrinfo=yes],\n  [ac_cv_struct_addrinfo=no]))\nAC_MSG_RESULT($ac_cv_struct_addrinfo)\nif test $ac_cv_struct_addrinfo = yes; then\n\tAC_DEFINE(HAVE_ADDRINFO, 1, [struct addrinfo (netdb.h)])\nfi\n\nAC_MSG_CHECKING(for sockaddr_storage)\nAC_CACHE_VAL(ac_cv_struct_sockaddr_storage,\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#\t\tinclude <sys/types.h>\n#\t\tinclude <sys/socket.h>]], [[struct sockaddr_storage s]])],\n  [ac_cv_struct_sockaddr_storage=yes],\n  [ac_cv_struct_sockaddr_storage=no]))\nAC_MSG_RESULT($ac_cv_struct_sockaddr_storage)\nif test $ac_cv_struct_sockaddr_storage = yes; then\n\tAC_DEFINE(HAVE_SOCKADDR_STORAGE, 1, [struct sockaddr_storage (sys/socket.h)])\nfi\n\nAC_MSG_CHECKING(for sockaddr_alg)\nAC_CACHE_VAL(ac_cv_struct_sockaddr_alg,\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#\t\tinclude <sys/types.h>\n#\t\tinclude <sys/socket.h>\n#\t\tinclude <linux/if_alg.h>]], [[struct sockaddr_alg s]])],\n  [ac_cv_struct_sockaddr_alg=yes],\n  [ac_cv_struct_sockaddr_alg=no]))\nAC_MSG_RESULT($ac_cv_struct_sockaddr_alg)\nif test $ac_cv_struct_sockaddr_alg = yes; then\n\tAC_DEFINE(HAVE_SOCKADDR_ALG, 1, [struct sockaddr_alg (linux/if_alg.h)])\nfi\n\n# checks for compiler characteristics\n\nAC_C_CHAR_UNSIGNED\nAC_C_CONST\n\nworks=no\nAC_MSG_CHECKING(for working signed char)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[]], [[signed char c;]])],\n  [works=yes],\n  [AC_DEFINE(signed, , [Define to empty if the keyword does not work.])]\n)\nAC_MSG_RESULT($works)\n\nhave_prototypes=no\nAC_MSG_CHECKING(for prototypes)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[int foo(int x) { return 0; }]], [[return foo(10);]])],\n  [AC_DEFINE(HAVE_PROTOTYPES, 1,\n     [Define if your compiler supports function prototype])\n   have_prototypes=yes],\n  []\n)\nAC_MSG_RESULT($have_prototypes)\n\nworks=no\nAC_MSG_CHECKING(for variable length prototypes and stdarg.h)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <stdarg.h>\nint foo(int x, ...) {\n\tva_list va;\n\tva_start(va, x);\n\tva_arg(va, int);\n\tva_arg(va, char *);\n\tva_arg(va, double);\n\treturn 0;\n}\n]], [[return foo(10, \"\", 3.14);]])],[\n  AC_DEFINE(HAVE_STDARG_PROTOTYPES, 1,\n   [Define if your compiler supports variable length function prototypes\n   (e.g. void fprintf(FILE *, char *, ...);) *and* <stdarg.h>])\n  works=yes\n],[])\nAC_MSG_RESULT($works)\n\n# check for socketpair\nAC_MSG_CHECKING(for socketpair)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <sys/types.h>\n#include <sys/socket.h>\n]], [[void *x=socketpair]])],\n  [AC_DEFINE(HAVE_SOCKETPAIR, 1, [Define if you have the 'socketpair' function.])\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\n# check if sockaddr has sa_len member\nAC_MSG_CHECKING(if sockaddr has sa_len member)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/types.h>\n#include <sys/socket.h>]], [[struct sockaddr x;\nx.sa_len = 0;]])],\n  [AC_MSG_RESULT(yes)\n   AC_DEFINE(HAVE_SOCKADDR_SA_LEN, 1, [Define if sockaddr has sa_len member])],\n  [AC_MSG_RESULT(no)]\n)\n\n# sigh -- gethostbyname_r is a mess; it can have 3, 5 or 6 arguments :-(\nAH_TEMPLATE(HAVE_GETHOSTBYNAME_R,\n  [Define this if you have some version of gethostbyname_r()])\n\nAC_CHECK_FUNC(gethostbyname_r, [\n  AC_DEFINE(HAVE_GETHOSTBYNAME_R)\n  AC_MSG_CHECKING([gethostbyname_r with 6 args])\n  OLD_CFLAGS=$CFLAGS\n  CFLAGS=\"$CFLAGS $MY_CPPFLAGS $MY_THREAD_CPPFLAGS $MY_CFLAGS\"\n  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#   include <netdb.h>\n  ]], [[\n    char *name;\n    struct hostent *he, *res;\n    char buffer[2048];\n    int buflen = 2048;\n    int h_errnop;\n\n    (void) gethostbyname_r(name, he, buffer, buflen, &res, &h_errnop)\n  ]])],[\n    AC_DEFINE(HAVE_GETHOSTBYNAME_R)\n    AC_DEFINE(HAVE_GETHOSTBYNAME_R_6_ARG, 1,\n    [Define this if you have the 6-arg version of gethostbyname_r().])\n    AC_MSG_RESULT(yes)\n  ],[\n    AC_MSG_RESULT(no)\n    AC_MSG_CHECKING([gethostbyname_r with 5 args])\n    AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#       include <netdb.h>\n      ]], [[\n        char *name;\n        struct hostent *he;\n        char buffer[2048];\n        int buflen = 2048;\n        int h_errnop;\n\n        (void) gethostbyname_r(name, he, buffer, buflen, &h_errnop)\n      ]])],\n      [\n        AC_DEFINE(HAVE_GETHOSTBYNAME_R)\n        AC_DEFINE(HAVE_GETHOSTBYNAME_R_5_ARG, 1,\n          [Define this if you have the 5-arg version of gethostbyname_r().])\n        AC_MSG_RESULT(yes)\n      ], [\n        AC_MSG_RESULT(no)\n        AC_MSG_CHECKING([gethostbyname_r with 3 args])\n        AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#           include <netdb.h>\n          ]], [[\n            char *name;\n            struct hostent *he;\n            struct hostent_data data;\n\n            (void) gethostbyname_r(name, he, &data);\n          ]])],\n          [\n            AC_DEFINE(HAVE_GETHOSTBYNAME_R)\n            AC_DEFINE(HAVE_GETHOSTBYNAME_R_3_ARG, 1,\n              [Define this if you have the 3-arg version of gethostbyname_r().])\n            AC_MSG_RESULT(yes)\n          ], [\n           AC_MSG_RESULT(no)\n        ])\n    ])\n  ])\n  CFLAGS=$OLD_CFLAGS\n], [\n  AC_CHECK_FUNCS(gethostbyname)\n])\nAC_SUBST(HAVE_GETHOSTBYNAME_R_6_ARG)\nAC_SUBST(HAVE_GETHOSTBYNAME_R_5_ARG)\nAC_SUBST(HAVE_GETHOSTBYNAME_R_3_ARG)\nAC_SUBST(HAVE_GETHOSTBYNAME_R)\nAC_SUBST(HAVE_GETHOSTBYNAME)\n\n# checks for system services\n# (none yet)\n\n# Linux requires this for correct f.p. operations\nAC_CHECK_FUNC(__fpu_control,\n  [],\n  [AC_CHECK_LIB(ieee, __fpu_control)\n])\n\n# check for --with-libm=...\nAC_SUBST(LIBM)\ncase $ac_sys_system in\nDarwin) ;;\n*) LIBM=-lm\nesac\nAC_MSG_CHECKING(for --with-libm=STRING)\nAC_ARG_WITH(libm,\n            AS_HELP_STRING([--with-libm=STRING], [math library]),\n[\nif test \"$withval\" = no\nthen LIBM=\n     AC_MSG_RESULT(force LIBM empty)\nelif test \"$withval\" != yes\nthen LIBM=$withval\n     AC_MSG_RESULT(set LIBM=\"$withval\")\nelse AC_MSG_ERROR([proper usage is --with-libm=STRING])\nfi],\n[AC_MSG_RESULT(default LIBM=\"$LIBM\")])\n\n# check for --with-libc=...\nAC_SUBST(LIBC)\nAC_MSG_CHECKING(for --with-libc=STRING)\nAC_ARG_WITH(libc,\n            AS_HELP_STRING([--with-libc=STRING], [C library]),\n[\nif test \"$withval\" = no\nthen LIBC=\n     AC_MSG_RESULT(force LIBC empty)\nelif test \"$withval\" != yes\nthen LIBC=$withval\n     AC_MSG_RESULT(set LIBC=\"$withval\")\nelse AC_MSG_ERROR([proper usage is --with-libc=STRING])\nfi],\n[AC_MSG_RESULT(default LIBC=\"$LIBC\")])\n\n# **************************************\n# * Check for gcc x64 inline assembler *\n# **************************************\n\nAC_MSG_CHECKING(for x64 gcc inline assembler)\nAC_LINK_IFELSE(   [AC_LANG_PROGRAM([[]], [[\n  __asm__ __volatile__ (\"movq %rcx, %rax\");\n]])],[have_gcc_asm_for_x64=yes],[have_gcc_asm_for_x64=no])\nAC_MSG_RESULT($have_gcc_asm_for_x64)\nif test \"$have_gcc_asm_for_x64\" = yes\nthen\n    AC_DEFINE(HAVE_GCC_ASM_FOR_X64, 1,\n    [Define if we can use x64 gcc inline assembler])\nfi\n\n# **************************************************\n# * Check for various properties of floating point *\n# **************************************************\n\nAX_C_FLOAT_WORDS_BIGENDIAN\nif test \"$ax_cv_c_float_words_bigendian\" = \"yes\"\nthen\n  AC_DEFINE(DOUBLE_IS_BIG_ENDIAN_IEEE754, 1,\n  [Define if C doubles are 64-bit IEEE 754 binary format, stored\n   with the most significant byte first])\nelif test \"$ax_cv_c_float_words_bigendian\" = \"no\"\nthen\n  AC_DEFINE(DOUBLE_IS_LITTLE_ENDIAN_IEEE754, 1,\n  [Define if C doubles are 64-bit IEEE 754 binary format, stored\n   with the least significant byte first])\nelse\n  # Some ARM platforms use a mixed-endian representation for doubles.\n  # While Python doesn't currently have full support for these platforms\n  # (see e.g., issue 1762561), we can at least make sure that float <-> string\n  # conversions work.\n  # FLOAT_WORDS_BIGENDIAN doesnt actually detect this case, but if it's not big\n  # or little, then it must be this?\n  AC_DEFINE(DOUBLE_IS_ARM_MIXED_ENDIAN_IEEE754, 1,\n  [Define if C doubles are 64-bit IEEE 754 binary format, stored\n   in ARM mixed-endian order (byte order 45670123)])\nfi\n\n# The short float repr introduced in Python 3.1 requires the\n# correctly-rounded string <-> double conversion functions from\n# Python/dtoa.c, which in turn require that the FPU uses 53-bit\n# rounding; this is a problem on x86, where the x87 FPU has a default\n# rounding precision of 64 bits.  For gcc/x86, we can fix this by\n# using inline assembler to get and set the x87 FPU control word.\n\n# This inline assembler syntax may also work for suncc and icc,\n# so we try it on all platforms.\n\nAC_MSG_CHECKING(whether we can use gcc inline assembler to get and set x87 control word)\nAC_LINK_IFELSE(   [AC_LANG_PROGRAM([[]], [[\n  unsigned short cw;\n  __asm__ __volatile__ (\"fnstcw %0\" : \"=m\" (cw));\n  __asm__ __volatile__ (\"fldcw %0\" : : \"m\" (cw));\n]])],[have_gcc_asm_for_x87=yes],[have_gcc_asm_for_x87=no])\nAC_MSG_RESULT($have_gcc_asm_for_x87)\nif test \"$have_gcc_asm_for_x87\" = yes\nthen\n    AC_DEFINE(HAVE_GCC_ASM_FOR_X87, 1,\n    [Define if we can use gcc inline assembler to get and set x87 control word])\nfi\n\nAC_MSG_CHECKING(whether we can use gcc inline assembler to get and set mc68881 fpcr)\nAC_LINK_IFELSE(   [AC_LANG_PROGRAM([[]], [[\n  unsigned int fpcr;\n  __asm__ __volatile__ (\"fmove.l %%fpcr,%0\" : \"=g\" (fpcr));\n  __asm__ __volatile__ (\"fmove.l %0,%%fpcr\" : : \"g\" (fpcr));\n]])],[have_gcc_asm_for_mc68881=yes],[have_gcc_asm_for_mc68881=no])\nAC_MSG_RESULT($have_gcc_asm_for_mc68881)\nif test \"$have_gcc_asm_for_mc68881\" = yes\nthen\n    AC_DEFINE(HAVE_GCC_ASM_FOR_MC68881, 1,\n    [Define if we can use gcc inline assembler to get and set mc68881 fpcr])\nfi\n\n# Detect whether system arithmetic is subject to x87-style double\n# rounding issues.  The result of this test has little meaning on non\n# IEEE 754 platforms.  On IEEE 754, test should return 1 if rounding\n# mode is round-to-nearest and double rounding issues are present, and\n# 0 otherwise.  See http://bugs.python.org/issue2937 for more info.\nAC_MSG_CHECKING(for x87-style double rounding)\n# $BASECFLAGS may affect the result\nac_save_cc=\"$CC\"\nCC=\"$CC $BASECFLAGS\"\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdlib.h>\n#include <math.h>\nint main() {\n    volatile double x, y, z;\n    /* 1./(1-2**-53) -> 1+2**-52 (correct), 1.0 (double rounding) */\n    x = 0.99999999999999989; /* 1-2**-53 */\n    y = 1./x;\n    if (y != 1.)\n        exit(0);\n    /* 1e16+2.99999 -> 1e16+2. (correct), 1e16+4. (double rounding) */\n    x = 1e16;\n    y = 2.99999;\n    z = x + y;\n    if (z != 1e16+4.)\n        exit(0);\n    /* both tests show evidence of double rounding */\n    exit(1);\n}\n]])],\n[ac_cv_x87_double_rounding=no],\n[ac_cv_x87_double_rounding=yes],\n[ac_cv_x87_double_rounding=no])\nCC=\"$ac_save_cc\"\nAC_MSG_RESULT($ac_cv_x87_double_rounding)\nif test \"$ac_cv_x87_double_rounding\" = yes\nthen\n  AC_DEFINE(X87_DOUBLE_ROUNDING, 1,\n  [Define if arithmetic is subject to x87-style double rounding issue])\nfi\n\n# ************************************\n# * Check for mathematical functions *\n# ************************************\n\nLIBS_SAVE=$LIBS\nLIBS=\"$LIBS $LIBM\"\n\nAC_CHECK_FUNCS([acosh asinh atanh copysign erf erfc expm1 finite gamma])\nAC_CHECK_FUNCS([hypot lgamma log1p log2 round tgamma])\nAC_CHECK_DECLS([isinf, isnan, isfinite], [], [], [[#include <math.h>]])\n\n# For multiprocessing module, check that sem_open\n# actually works.  For FreeBSD versions <= 7.2,\n# the kernel module that provides POSIX semaphores\n# isn't loaded by default, so an attempt to call\n# sem_open results in a 'Signal 12' error.\nAC_MSG_CHECKING(whether POSIX semaphores are enabled)\nAC_CACHE_VAL(ac_cv_posix_semaphores_enabled,\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <unistd.h>\n#include <fcntl.h>\n#include <stdio.h>\n#include <semaphore.h>\n#include <sys/stat.h>\n\nint main(void) {\n  sem_t *a = sem_open(\"/autoconf\", O_CREAT, S_IRUSR|S_IWUSR, 0);\n  if (a == SEM_FAILED) {\n    perror(\"sem_open\");\n    return 1;\n  }\n  sem_close(a);\n  sem_unlink(\"/autoconf\");\n  return 0;\n}\n]])],\n[ac_cv_posix_semaphores_enabled=yes],\n[ac_cv_posix_semaphores_enabled=no],\n[ac_cv_posix_semaphores_enabled=yes])\n)\nAC_MSG_RESULT($ac_cv_posix_semaphores_enabled)\nif test $ac_cv_posix_semaphores_enabled = no\nthen\n  AC_DEFINE(POSIX_SEMAPHORES_NOT_ENABLED, 1,\n            [Define if POSIX semaphores aren't enabled on your system])\nfi\n\n# Multiprocessing check for broken sem_getvalue\nAC_MSG_CHECKING(for broken sem_getvalue)\nAC_CACHE_VAL(ac_cv_broken_sem_getvalue,\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <unistd.h>\n#include <fcntl.h>\n#include <stdio.h>\n#include <semaphore.h>\n#include <sys/stat.h>\n\nint main(void){\n  sem_t *a = sem_open(\"/autocftw\", O_CREAT, S_IRUSR|S_IWUSR, 0);\n  int count;\n  int res;\n  if(a==SEM_FAILED){\n    perror(\"sem_open\");\n    return 1;\n\n  }\n  res = sem_getvalue(a, &count);\n  sem_close(a);\n  sem_unlink(\"/autocftw\");\n  return res==-1 ? 1 : 0;\n}\n]])],\n[ac_cv_broken_sem_getvalue=no],\n[ac_cv_broken_sem_getvalue=yes],\n[ac_cv_broken_sem_getvalue=yes])\n)\nAC_MSG_RESULT($ac_cv_broken_sem_getvalue)\nif test $ac_cv_broken_sem_getvalue = yes\nthen\n  AC_DEFINE(HAVE_BROKEN_SEM_GETVALUE, 1,\n  [define to 1 if your sem_getvalue is broken.])\nfi\n\nAC_CHECK_DECLS([RTLD_LAZY, RTLD_NOW, RTLD_GLOBAL, RTLD_LOCAL, RTLD_NODELETE, RTLD_NOLOAD, RTLD_DEEPBIND, RTLD_MEMBER], [], [], [[#include <dlfcn.h>]])\n\n# determine what size digit to use for Python's longs\nAC_MSG_CHECKING([digit size for Python's longs])\nAC_ARG_ENABLE(big-digits,\nAS_HELP_STRING([--enable-big-digits@<:@=BITS@:>@],[use big digits for Python longs [[BITS=30]]]),\n[case $enable_big_digits in\nyes)\n  enable_big_digits=30 ;;\nno)\n  enable_big_digits=15 ;;\n[15|30])\n  ;;\n*)\n  AC_MSG_ERROR([bad value $enable_big_digits for --enable-big-digits; value should be 15 or 30]) ;;\nesac\nAC_MSG_RESULT($enable_big_digits)\nAC_DEFINE_UNQUOTED(PYLONG_BITS_IN_DIGIT, $enable_big_digits, [Define as the preferred size in bits of long digits])\n],\n[AC_MSG_RESULT(no value specified)])\n\n# check for wchar.h\nAC_CHECK_HEADER(wchar.h, [\n  AC_DEFINE(HAVE_WCHAR_H, 1,\n  [Define if the compiler provides a wchar.h header file.])\n  wchar_h=\"yes\"\n],\nwchar_h=\"no\"\n)\n\n# determine wchar_t size\nif test \"$wchar_h\" = yes\nthen\n  AC_CHECK_SIZEOF(wchar_t, 4, [#include <wchar.h>])\nfi\n\nAC_MSG_CHECKING(for UCS-4 tcl)\nhave_ucs4_tcl=no\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n#include <tcl.h>\n#if TCL_UTF_MAX != 6\n# error \"NOT UCS4_TCL\"\n#endif]], [[]])],[\n  AC_DEFINE(HAVE_UCS4_TCL, 1, [Define this if you have tcl and TCL_UTF_MAX==6])\n  have_ucs4_tcl=yes\n],[])\nAC_MSG_RESULT($have_ucs4_tcl)\n\n# check whether wchar_t is signed or not\nif test \"$wchar_h\" = yes\nthen\n  # check whether wchar_t is signed or not\n  AC_MSG_CHECKING(whether wchar_t is signed)\n  AC_CACHE_VAL(ac_cv_wchar_t_signed, [\n  AC_RUN_IFELSE([AC_LANG_SOURCE([[\n  #include <wchar.h>\n  int main()\n  {\n\t/* Success: exit code 0 */\n        return ((((wchar_t) -1) < ((wchar_t) 0)) ? 0 : 1);\n  }\n  ]])],\n  [ac_cv_wchar_t_signed=yes],\n  [ac_cv_wchar_t_signed=no],\n  [ac_cv_wchar_t_signed=yes])])\n  AC_MSG_RESULT($ac_cv_wchar_t_signed)\nfi\n\nAC_MSG_CHECKING(whether wchar_t is usable)\n# wchar_t is only usable if it maps to an unsigned type\nif test \"$ac_cv_sizeof_wchar_t\" -ge 2 \\\n          -a \"$ac_cv_wchar_t_signed\" = \"no\"\nthen\n  AC_DEFINE(HAVE_USABLE_WCHAR_T, 1,\n  [Define if you have a useable wchar_t type defined in wchar.h; useable\n   means wchar_t must be an unsigned type with at least 16 bits. (see\n   Include/unicodeobject.h).])\n  AC_MSG_RESULT(yes)\nelse\n  AC_MSG_RESULT(no)\nfi\n\n# check for endianness\nAC_C_BIGENDIAN\n\n# ABI version string for Python extension modules.  This appears between the\n# periods in shared library file names, e.g. foo.<SOABI>.so.  It is calculated\n# from the following attributes which affect the ABI of this Python build (in\n# this order):\n#\n# * The Python implementation (always 'cpython-' for us)\n# * The major and minor version numbers\n# * --with-pydebug (adds a 'd')\n#\n# Thus for example, Python 3.2 built with wide unicode, pydebug, and pymalloc,\n# would get a shared library ABI version tag of 'cpython-32dmu' and shared\n# libraries would be named 'foo.cpython-32dmu.so'.\n#\n# In Python 3.2 and older, --with-wide-unicode added a 'u' flag.\n# In Python 3.7 and older, --with-pymalloc added a 'm' flag.\nAC_SUBST(SOABI)\nAC_MSG_CHECKING(ABIFLAGS)\nAC_MSG_RESULT($ABIFLAGS)\nAC_MSG_CHECKING(SOABI)\nSOABI='cpython-'`echo $VERSION | tr -d .`${ABIFLAGS}${PLATFORM_TRIPLET:+-$PLATFORM_TRIPLET}\nAC_MSG_RESULT($SOABI)\n\n# Release and debug (Py_DEBUG) ABI are compatible, but not Py_TRACE_REFS ABI\nif test \"$Py_DEBUG\" = 'true' -a \"$with_trace_refs\" != \"yes\"; then\n  # Similar to SOABI but remove \"d\" flag from ABIFLAGS\n  AC_SUBST(ALT_SOABI)\n  ALT_SOABI='cpython-'`echo $VERSION | tr -d .``echo $ABIFLAGS | tr -d d`${PLATFORM_TRIPLET:+-$PLATFORM_TRIPLET}\n  AC_DEFINE_UNQUOTED(ALT_SOABI, \"${ALT_SOABI}\",\n            [Alternative SOABI used in debug build to load C extensions built in release mode])\nfi\n\nAC_SUBST(EXT_SUFFIX)\nEXT_SUFFIX=.${SOABI}${SHLIB_SUFFIX}\n\nAC_MSG_CHECKING(LDVERSION)\nLDVERSION='$(VERSION)$(ABIFLAGS)'\nAC_MSG_RESULT($LDVERSION)\n\n# On Android and Cygwin the shared libraries must be linked with libpython.\nAC_SUBST(LIBPYTHON)\nif test -n \"$ANDROID_API_LEVEL\" -o \"$MACHDEP\" = \"cygwin\"; then\n  LIBPYTHON=\"-lpython${VERSION}${ABIFLAGS}\"\nelse\n  LIBPYTHON=''\nfi\n\ndnl define LIBPL after ABIFLAGS and LDVERSION is defined.\nAC_SUBST(PY_ENABLE_SHARED)\nif test x$PLATFORM_TRIPLET = x; then\n  LIBPL='$(prefix)'\"/lib/python${VERSION}/config-${LDVERSION}\"\nelse\n  LIBPL='$(prefix)'\"/lib/python${VERSION}/config-${LDVERSION}-${PLATFORM_TRIPLET}\"\nfi\nAC_SUBST(LIBPL)\n\n# Check whether right shifting a negative integer extends the sign bit\n# or fills with zeros (like the Cray J90, according to Tim Peters).\nAC_MSG_CHECKING(whether right shift extends the sign bit)\nAC_CACHE_VAL(ac_cv_rshift_extends_sign, [\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\nint main()\n{\n\treturn (((-1)>>3 == -1) ? 0 : 1);\n}\n]])],\n[ac_cv_rshift_extends_sign=yes],\n[ac_cv_rshift_extends_sign=no],\n[ac_cv_rshift_extends_sign=yes])])\nAC_MSG_RESULT($ac_cv_rshift_extends_sign)\nif test \"$ac_cv_rshift_extends_sign\" = no\nthen\n  AC_DEFINE(SIGNED_RIGHT_SHIFT_ZERO_FILLS, 1,\n  [Define if i>>j for signed int i does not extend the sign bit\n   when i < 0])\nfi\n\n# check for getc_unlocked and related locking functions\nAC_MSG_CHECKING(for getc_unlocked() and friends)\nAC_CACHE_VAL(ac_cv_have_getc_unlocked, [\nAC_LINK_IFELSE([AC_LANG_PROGRAM([[#include <stdio.h>]], [[\n\tFILE *f = fopen(\"/dev/null\", \"r\");\n\tflockfile(f);\n\tgetc_unlocked(f);\n\tfunlockfile(f);\n]])],[ac_cv_have_getc_unlocked=yes],[ac_cv_have_getc_unlocked=no])])\nAC_MSG_RESULT($ac_cv_have_getc_unlocked)\nif test \"$ac_cv_have_getc_unlocked\" = yes\nthen\n  AC_DEFINE(HAVE_GETC_UNLOCKED, 1,\n  [Define this if you have flockfile(), getc_unlocked(), and funlockfile()])\nfi\n\n# check where readline lives\n# save the value of LIBS so we don't actually link Python with readline\nLIBS_no_readline=$LIBS\n\n# On some systems we need to link readline to a termcap compatible\n# library.  NOTE: Keep the precedence of listed libraries synchronised\n# with setup.py.\npy_cv_lib_readline=no\nAC_MSG_CHECKING([how to link readline libs])\nfor py_libtermcap in \"\" tinfo ncursesw ncurses curses termcap; do\n  if test -z \"$py_libtermcap\"; then\n    READLINE_LIBS=\"-lreadline\"\n  else\n    READLINE_LIBS=\"-lreadline -l$py_libtermcap\"\n  fi\n  LIBS=\"$READLINE_LIBS $LIBS_no_readline\"\n  AC_LINK_IFELSE(\n    [AC_LANG_CALL([],[readline])],\n    [py_cv_lib_readline=yes])\n  if test $py_cv_lib_readline = yes; then\n    break\n  fi\ndone\n# Uncomment this line if you want to use READINE_LIBS in Makefile or scripts\n#AC_SUBST([READLINE_LIBS])\nif test $py_cv_lib_readline = no; then\n  AC_MSG_RESULT([none])\nelse\n  AC_MSG_RESULT([$READLINE_LIBS])\n  AC_DEFINE(HAVE_LIBREADLINE, 1,\n    [Define if you have the readline library (-lreadline).])\nfi\n\n# check for readline 2.2\nAC_PREPROC_IFELSE([AC_LANG_SOURCE([[#include <readline/readline.h>]])],\n  [have_readline=yes],\n  [have_readline=no]\n)\nif test $have_readline = yes\nthen\n  AC_EGREP_HEADER([extern int rl_completion_append_character;],\n  [readline/readline.h],\n  AC_DEFINE(HAVE_RL_COMPLETION_APPEND_CHARACTER, 1,\n  [Define if you have readline 2.2]), )\n  AC_EGREP_HEADER([extern int rl_completion_suppress_append;],\n  [readline/readline.h],\n  AC_DEFINE(HAVE_RL_COMPLETION_SUPPRESS_APPEND, 1,\n  [Define if you have rl_completion_suppress_append]), )\nfi\n\n# check for readline 4.0\nAC_CHECK_LIB(readline, rl_pre_input_hook,\n\tAC_DEFINE(HAVE_RL_PRE_INPUT_HOOK, 1,\n        [Define if you have readline 4.0]), ,$READLINE_LIBS)\n\n# also in 4.0\nAC_CHECK_LIB(readline, rl_completion_display_matches_hook,\n\tAC_DEFINE(HAVE_RL_COMPLETION_DISPLAY_MATCHES_HOOK, 1,\n        [Define if you have readline 4.0]), ,$READLINE_LIBS)\n\n# also in 4.0, but not in editline\nAC_CHECK_LIB(readline, rl_resize_terminal,\n\tAC_DEFINE(HAVE_RL_RESIZE_TERMINAL, 1,\n        [Define if you have readline 4.0]), ,$READLINE_LIBS)\n\n# check for readline 4.2\nAC_CHECK_LIB(readline, rl_completion_matches,\n\tAC_DEFINE(HAVE_RL_COMPLETION_MATCHES, 1,\n        [Define if you have readline 4.2]), ,$READLINE_LIBS)\n\n# also in readline 4.2\nAC_PREPROC_IFELSE([AC_LANG_SOURCE([[#include <readline/readline.h>]])],\n  [have_readline=yes],\n  [have_readline=no]\n)\nif test $have_readline = yes\nthen\n  AC_EGREP_HEADER([extern int rl_catch_signals;],\n  [readline/readline.h],\n  AC_DEFINE(HAVE_RL_CATCH_SIGNAL, 1,\n  [Define if you can turn off readline's signal handling.]), )\nfi\n\nAC_CHECK_LIB(readline, append_history,\n\tAC_DEFINE(HAVE_RL_APPEND_HISTORY, 1,\n        [Define if readline supports append_history]), ,$READLINE_LIBS)\n\n# End of readline checks: restore LIBS\nLIBS=$LIBS_no_readline\n\nAC_MSG_CHECKING(for broken nice())\nAC_CACHE_VAL(ac_cv_broken_nice, [\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdlib.h>\n#include <unistd.h>\nint main()\n{\n\tint val1 = nice(1);\n\tif (val1 != -1 && val1 == nice(2))\n\t\texit(0);\n\texit(1);\n}\n]])],\n[ac_cv_broken_nice=yes],\n[ac_cv_broken_nice=no],\n[ac_cv_broken_nice=no])])\nAC_MSG_RESULT($ac_cv_broken_nice)\nif test \"$ac_cv_broken_nice\" = yes\nthen\n  AC_DEFINE(HAVE_BROKEN_NICE, 1,\n  [Define if nice() returns success/failure instead of the new priority.])\nfi\n\nAC_MSG_CHECKING(for broken poll())\nAC_CACHE_VAL(ac_cv_broken_poll,\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <poll.h>\n#include <unistd.h>\n\nint main()\n{\n    struct pollfd poll_struct = { 42, POLLIN|POLLPRI|POLLOUT, 0 };\n    int poll_test;\n\n    close (42);\n\n    poll_test = poll(&poll_struct, 1, 0);\n    if (poll_test < 0)\n        return 0;\n    else if (poll_test == 0 && poll_struct.revents != POLLNVAL)\n        return 0;\n    else\n        return 1;\n}\n]])],\n[ac_cv_broken_poll=yes],\n[ac_cv_broken_poll=no],\n[ac_cv_broken_poll=no]))\nAC_MSG_RESULT($ac_cv_broken_poll)\nif test \"$ac_cv_broken_poll\" = yes\nthen\n  AC_DEFINE(HAVE_BROKEN_POLL, 1,\n      [Define if poll() sets errno on invalid file descriptors.])\nfi\n\n# check tzset(3) exists and works like we expect it to\nAC_MSG_CHECKING(for working tzset())\nAC_CACHE_VAL(ac_cv_working_tzset, [\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdlib.h>\n#include <time.h>\n#include <string.h>\n\n#if HAVE_TZNAME\nextern char *tzname[];\n#endif\n\nint main()\n{\n\t/* Note that we need to ensure that not only does tzset(3)\n\t   do 'something' with localtime, but it works as documented\n\t   in the library reference and as expected by the test suite.\n\t   This includes making sure that tzname is set properly if\n\t   tm->tm_zone does not exist since it is the alternative way\n\t   of getting timezone info.\n\n\t   Red Hat 6.2 doesn't understand the southern hemisphere\n\t   after New Year's Day.\n\t*/\n\n\ttime_t groundhogday = 1044144000; /* GMT-based */\n\ttime_t midyear = groundhogday + (365 * 24 * 3600 / 2);\n\n\tputenv(\"TZ=UTC+0\");\n\ttzset();\n\tif (localtime(&groundhogday)->tm_hour != 0)\n\t    exit(1);\n#if HAVE_TZNAME\n\t/* For UTC, tzname[1] is sometimes \"\", sometimes \"   \" */\n\tif (strcmp(tzname[0], \"UTC\") ||\n\t\t(tzname[1][0] != 0 && tzname[1][0] != ' '))\n\t    exit(1);\n#endif\n\n\tputenv(\"TZ=EST+5EDT,M4.1.0,M10.5.0\");\n\ttzset();\n\tif (localtime(&groundhogday)->tm_hour != 19)\n\t    exit(1);\n#if HAVE_TZNAME\n\tif (strcmp(tzname[0], \"EST\") || strcmp(tzname[1], \"EDT\"))\n\t    exit(1);\n#endif\n\n\tputenv(\"TZ=AEST-10AEDT-11,M10.5.0,M3.5.0\");\n\ttzset();\n\tif (localtime(&groundhogday)->tm_hour != 11)\n\t    exit(1);\n#if HAVE_TZNAME\n\tif (strcmp(tzname[0], \"AEST\") || strcmp(tzname[1], \"AEDT\"))\n\t    exit(1);\n#endif\n\n#if HAVE_STRUCT_TM_TM_ZONE\n\tif (strcmp(localtime(&groundhogday)->tm_zone, \"AEDT\"))\n\t    exit(1);\n\tif (strcmp(localtime(&midyear)->tm_zone, \"AEST\"))\n\t    exit(1);\n#endif\n\n\texit(0);\n}\n]])],\n[ac_cv_working_tzset=yes],\n[ac_cv_working_tzset=no],\n[ac_cv_working_tzset=no])])\nAC_MSG_RESULT($ac_cv_working_tzset)\nif test \"$ac_cv_working_tzset\" = yes\nthen\n  AC_DEFINE(HAVE_WORKING_TZSET, 1,\n  [Define if tzset() actually switches the local timezone in a meaningful way.])\nfi\n\n# Look for subsecond timestamps in struct stat\nAC_MSG_CHECKING(for tv_nsec in struct stat)\nAC_CACHE_VAL(ac_cv_stat_tv_nsec,\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/stat.h>]], [[\nstruct stat st;\nst.st_mtim.tv_nsec = 1;\n]])],\n[ac_cv_stat_tv_nsec=yes],\n[ac_cv_stat_tv_nsec=no]))\nAC_MSG_RESULT($ac_cv_stat_tv_nsec)\nif test \"$ac_cv_stat_tv_nsec\" = yes\nthen\n  AC_DEFINE(HAVE_STAT_TV_NSEC, 1,\n  [Define if you have struct stat.st_mtim.tv_nsec])\nfi\n\n# Look for BSD style subsecond timestamps in struct stat\nAC_MSG_CHECKING(for tv_nsec2 in struct stat)\nAC_CACHE_VAL(ac_cv_stat_tv_nsec2,\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/stat.h>]], [[\nstruct stat st;\nst.st_mtimespec.tv_nsec = 1;\n]])],\n[ac_cv_stat_tv_nsec2=yes],\n[ac_cv_stat_tv_nsec2=no]))\nAC_MSG_RESULT($ac_cv_stat_tv_nsec2)\nif test \"$ac_cv_stat_tv_nsec2\" = yes\nthen\n  AC_DEFINE(HAVE_STAT_TV_NSEC2, 1,\n  [Define if you have struct stat.st_mtimensec])\nfi\n\n# first curses header check\nac_save_cppflags=\"$CPPFLAGS\"\nif test \"$cross_compiling\" = no; then\n  CPPFLAGS=\"$CPPFLAGS -I/usr/include/ncursesw\"\nfi\n\nAC_CHECK_HEADERS(curses.h ncurses.h)\n\n# On Solaris, term.h requires curses.h\nAC_CHECK_HEADERS(term.h,,,[\n#ifdef HAVE_CURSES_H\n#include <curses.h>\n#endif\n])\n\n# On HP/UX 11.0, mvwdelch is a block with a return statement\nAC_MSG_CHECKING(whether mvwdelch is an expression)\nAC_CACHE_VAL(ac_cv_mvwdelch_is_expression,\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n  int rtn;\n  rtn = mvwdelch(0,0,0);\n]])],\n[ac_cv_mvwdelch_is_expression=yes],\n[ac_cv_mvwdelch_is_expression=no]))\nAC_MSG_RESULT($ac_cv_mvwdelch_is_expression)\n\nif test \"$ac_cv_mvwdelch_is_expression\" = yes\nthen\n  AC_DEFINE(MVWDELCH_IS_EXPRESSION, 1,\n  [Define if mvwdelch in curses.h is an expression.])\nfi\n\n# Issue #25720: ncurses has introduced the NCURSES_OPAQUE symbol making opaque\n# structs since version 5.7.  If the macro is defined as zero before including\n# [n]curses.h, ncurses will expose fields of the structs regardless of the\n# configuration.\nAC_MSG_CHECKING(whether WINDOW has _flags)\nAC_CACHE_VAL(ac_cv_window_has_flags,\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n  #define NCURSES_OPAQUE 0\n  #include <curses.h>\n]], [[\n  WINDOW *w;\n  w->_flags = 0;\n]])],\n[ac_cv_window_has_flags=yes],\n[ac_cv_window_has_flags=no]))\nAC_MSG_RESULT($ac_cv_window_has_flags)\n\n\nif test \"$ac_cv_window_has_flags\" = yes\nthen\n  AC_DEFINE(WINDOW_HAS_FLAGS, 1,\n  [Define if WINDOW in curses.h offers a field _flags.])\nfi\n\nAC_MSG_CHECKING(for is_pad)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef is_pad\nvoid *x=is_pad\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_IS_PAD, 1, Define if you have the 'is_pad' function or macro.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for is_term_resized)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[void *x=is_term_resized]])],\n  [AC_DEFINE(HAVE_CURSES_IS_TERM_RESIZED, 1, Define if you have the 'is_term_resized' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for resize_term)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[void *x=resize_term]])],\n  [AC_DEFINE(HAVE_CURSES_RESIZE_TERM, 1, Define if you have the 'resize_term' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for resizeterm)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[void *x=resizeterm]])],\n  [AC_DEFINE(HAVE_CURSES_RESIZETERM, 1, Define if you have the 'resizeterm' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for immedok)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef immedok\nvoid *x=immedok\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_IMMEDOK, 1, Define if you have the 'immedok' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for syncok)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef syncok\nvoid *x=syncok\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_SYNCOK, 1, Define if you have the 'syncok' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for wchgat)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef wchgat\nvoid *x=wchgat\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_WCHGAT, 1, Define if you have the 'wchgat' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for filter)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef filter\nvoid *x=filter\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_FILTER, 1, Define if you have the 'filter' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for has_key)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef has_key\nvoid *x=has_key\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_HAS_KEY, 1, Define if you have the 'has_key' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for typeahead)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef typeahead\nvoid *x=typeahead\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_TYPEAHEAD, 1, Define if you have the 'typeahead' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n\nAC_MSG_CHECKING(for use_env)\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <curses.h>]], [[\n#ifndef use_env\nvoid *x=use_env\n#endif\n]])],\n  [AC_DEFINE(HAVE_CURSES_USE_ENV, 1, Define if you have the 'use_env' function.)\n   AC_MSG_RESULT(yes)],\n  [AC_MSG_RESULT(no)]\n)\n# last curses configure check\nCPPFLAGS=$ac_save_cppflags\n\nAC_MSG_NOTICE([checking for device files])\n\ndnl NOTE: Inform user how to proceed with files when cross compiling.\nif test \"x$cross_compiling\" = xyes; then\n  if test \"${ac_cv_file__dev_ptmx+set}\" != set; then\n    AC_MSG_CHECKING([for /dev/ptmx])\n    AC_MSG_RESULT([not set])\n    AC_MSG_ERROR([set ac_cv_file__dev_ptmx to yes/no in your CONFIG_SITE file when cross compiling])\n  fi\n  if test \"${ac_cv_file__dev_ptc+set}\" != set; then\n    AC_MSG_CHECKING([for /dev/ptc])\n    AC_MSG_RESULT([not set])\n    AC_MSG_ERROR([set ac_cv_file__dev_ptc to yes/no in your CONFIG_SITE file when cross compiling])\n  fi\nfi\n\nAC_CHECK_FILE(/dev/ptmx, [], [])\nif test \"x$ac_cv_file__dev_ptmx\" = xyes; then\n  AC_DEFINE(HAVE_DEV_PTMX, 1,\n  [Define to 1 if you have the /dev/ptmx device file.])\nfi\nAC_CHECK_FILE(/dev/ptc, [], [])\nif test \"x$ac_cv_file__dev_ptc\" = xyes; then\n  AC_DEFINE(HAVE_DEV_PTC, 1,\n  [Define to 1 if you have the /dev/ptc device file.])\nfi\n\nif test $ac_sys_system = Darwin\nthen\n\tLIBS=\"$LIBS -framework CoreFoundation\"\nfi\n\nAC_CACHE_CHECK([for %zd printf() format support], ac_cv_have_size_t_format, [dnl\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <stddef.h>\n#include <string.h>\n\n#ifdef HAVE_SYS_TYPES_H\n#include <sys/types.h>\n#endif\n\n#ifdef HAVE_SSIZE_T\ntypedef ssize_t Py_ssize_t;\n#elif SIZEOF_VOID_P == SIZEOF_LONG\ntypedef long Py_ssize_t;\n#else\ntypedef int Py_ssize_t;\n#endif\n\nint main()\n{\n    char buffer[256];\n\n    if(sprintf(buffer, \"%zd\", (size_t)123) < 0)\n       \treturn 1;\n\n    if (strcmp(buffer, \"123\"))\n\treturn 1;\n\n    if (sprintf(buffer, \"%zd\", (Py_ssize_t)-123) < 0)\n       \treturn 1;\n\n    if (strcmp(buffer, \"-123\"))\n\treturn 1;\n\n    return 0;\n}\n]])],\n  [ac_cv_have_size_t_format=yes],\n  [ac_cv_have_size_t_format=no],\n  [ac_cv_have_size_t_format=\"cross -- assuming yes\"\n])])\nif test \"$ac_cv_have_size_t_format\" != no ; then\n  AC_DEFINE(PY_FORMAT_SIZE_T, \"z\",\n  [Define to printf format modifier for Py_ssize_t])\nfi\n\nAC_CHECK_TYPE(socklen_t,,\n  AC_DEFINE(socklen_t,int,\n            [Define to `int' if <sys/socket.h> does not define.]),[\n#ifdef HAVE_SYS_TYPES_H\n#include <sys/types.h>\n#endif\n#ifdef HAVE_SYS_SOCKET_H\n#include <sys/socket.h>\n#endif\n])\n\nAC_MSG_CHECKING(for broken mbstowcs)\nAC_CACHE_VAL(ac_cv_broken_mbstowcs,\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdio.h>\n#include<stdlib.h>\nint main() {\n    size_t len = -1;\n    const char *str = \"text\";\n    len = mbstowcs(NULL, str, 0);\n    return (len != 4);\n}\n]])],\n[ac_cv_broken_mbstowcs=no],\n[ac_cv_broken_mbstowcs=yes],\n[ac_cv_broken_mbstowcs=no]))\nAC_MSG_RESULT($ac_cv_broken_mbstowcs)\nif test \"$ac_cv_broken_mbstowcs\" = yes\nthen\n  AC_DEFINE(HAVE_BROKEN_MBSTOWCS, 1,\n  [Define if mbstowcs(NULL, \"text\", 0) does not return the number of\n   wide chars that would be converted.])\nfi\n\n# Check for --with-computed-gotos\nAC_MSG_CHECKING(for --with-computed-gotos)\nAC_ARG_WITH(computed-gotos,\n            AS_HELP_STRING([--with(out)-computed-gotos],\n                           [Use computed gotos in evaluation loop (enabled by default on supported compilers)]),\n[\nif test \"$withval\" = yes\nthen\n  AC_DEFINE(USE_COMPUTED_GOTOS, 1,\n  [Define if you want to use computed gotos in ceval.c.])\n  AC_MSG_RESULT(yes)\nfi\nif test \"$withval\" = no\nthen\n  AC_DEFINE(USE_COMPUTED_GOTOS, 0,\n  [Define if you want to use computed gotos in ceval.c.])\n  AC_MSG_RESULT(no)\nfi\n],\n[AC_MSG_RESULT(no value specified)])\n\nAC_MSG_CHECKING(whether $CC supports computed gotos)\nAC_CACHE_VAL(ac_cv_computed_gotos,\nAC_RUN_IFELSE([AC_LANG_SOURCE([[[\nint main(int argc, char **argv)\n{\n    static void *targets[1] = { &&LABEL1 };\n    goto LABEL2;\nLABEL1:\n    return 0;\nLABEL2:\n    goto *targets[0];\n    return 1;\n}\n]]])],\n[ac_cv_computed_gotos=yes],\n[ac_cv_computed_gotos=no],\n[if test \"${with_computed_gotos+set}\" = set; then\n   ac_cv_computed_gotos=\"$with_computed_gotos -- configured --with(out)-computed-gotos\"\n else\n   ac_cv_computed_gotos=no\n fi]))\nAC_MSG_RESULT($ac_cv_computed_gotos)\ncase \"$ac_cv_computed_gotos\" in yes*)\n  AC_DEFINE(HAVE_COMPUTED_GOTOS, 1,\n  [Define if the C compiler supports computed gotos.])\nesac\n\ncase $ac_sys_system in\nAIX*)\n  AC_DEFINE(HAVE_BROKEN_PIPE_BUF, 1, [Define if the system reports an invalid PIPE_BUF value.]) ;;\nesac\n\n\nAC_SUBST(THREADHEADERS)\n\nfor h in `(cd $srcdir;echo Python/thread_*.h)`\ndo\n  THREADHEADERS=\"$THREADHEADERS \\$(srcdir)/$h\"\ndone\n\nAC_SUBST(SRCDIRS)\nSRCDIRS=\"Parser Objects Python Modules Modules/_io Programs\"\nAC_MSG_CHECKING(for build directories)\nfor dir in $SRCDIRS; do\n    if test ! -d $dir; then\n        mkdir $dir\n    fi\ndone\nAC_MSG_RESULT(done)\n\n# Availability of -O2:\nAC_MSG_CHECKING(for -O2)\nsaved_cflags=\"$CFLAGS\"\nCFLAGS=\"-O2\"\nAC_COMPILE_IFELSE([AC_LANG_PROGRAM([[]], [[\n]])],[have_O2=yes],[have_O2=no])\nAC_MSG_RESULT($have_O2)\nCFLAGS=\"$saved_cflags\"\n\n# _FORTIFY_SOURCE wrappers for memmove and bcopy are incorrect:\n# http://sourceware.org/ml/libc-alpha/2010-12/msg00009.html\nAC_MSG_CHECKING(for glibc _FORTIFY_SOURCE/memmove bug)\nsaved_cflags=\"$CFLAGS\"\nCFLAGS=\"-O2 -D_FORTIFY_SOURCE=2\"\nif test \"$have_O2\" = no; then\n    CFLAGS=\"\"\nfi\nAC_RUN_IFELSE([AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\nvoid foo(void *p, void *q) { memmove(p, q, 19); }\nint main() {\n  char a[32] = \"123456789000000000\";\n  foo(&a[9], a);\n  if (strcmp(a, \"123456789123456789000000000\") != 0)\n    return 1;\n  foo(a, &a[9]);\n  if (strcmp(a, \"123456789000000000\") != 0)\n    return 1;\n  return 0;\n}\n]])],\n[have_glibc_memmove_bug=no],\n[have_glibc_memmove_bug=yes],\n[have_glibc_memmove_bug=undefined])\nCFLAGS=\"$saved_cflags\"\nAC_MSG_RESULT($have_glibc_memmove_bug)\nif test \"$have_glibc_memmove_bug\" = yes; then\n    AC_DEFINE(HAVE_GLIBC_MEMMOVE_BUG, 1,\n    [Define if glibc has incorrect _FORTIFY_SOURCE wrappers\n     for memmove and bcopy.])\nfi\n\nif test \"$have_gcc_asm_for_x87\" = yes; then\n    # Some versions of gcc miscompile inline asm:\n    # http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46491\n    # http://gcc.gnu.org/ml/gcc/2010-11/msg00366.html\n    case $CC in\n        *gcc*)\n            AC_MSG_CHECKING(for gcc ipa-pure-const bug)\n            saved_cflags=\"$CFLAGS\"\n            CFLAGS=\"-O2\"\n            AC_RUN_IFELSE([AC_LANG_SOURCE([[\n            __attribute__((noinline)) int\n            foo(int *p) {\n              int r;\n              asm ( \"movl \\$6, (%1)\\n\\t\"\n                    \"xorl %0, %0\\n\\t\"\n                    : \"=r\" (r) : \"r\" (p) : \"memory\"\n              );\n              return r;\n            }\n            int main() {\n              int p = 8;\n              if ((foo(&p) ? : p) != 6)\n                return 1;\n              return 0;\n            }\n            ]])],\n            [have_ipa_pure_const_bug=no],\n            [have_ipa_pure_const_bug=yes],\n            [have_ipa_pure_const_bug=undefined])\n            CFLAGS=\"$saved_cflags\"\n            AC_MSG_RESULT($have_ipa_pure_const_bug)\n            if test \"$have_ipa_pure_const_bug\" = yes; then\n                AC_DEFINE(HAVE_IPA_PURE_CONST_BUG, 1,\n                          [Define if gcc has the ipa-pure-const bug.])\n            fi\n        ;;\n    esac\nfi\n\n# Check for stdatomic.h\nAC_MSG_CHECKING(for stdatomic.h)\nAC_LINK_IFELSE(\n[\n  AC_LANG_SOURCE([[\n    #include <stdatomic.h>\n    atomic_int int_var;\n    atomic_uintptr_t uintptr_var;\n    int main() {\n      atomic_store_explicit(&int_var, 5, memory_order_relaxed);\n      atomic_store_explicit(&uintptr_var, 0, memory_order_relaxed);\n      int loaded_value = atomic_load_explicit(&int_var, memory_order_seq_cst);\n      return 0;\n    }\n  ]])\n],[have_stdatomic_h=yes],[have_stdatomic_h=no])\n\nAC_MSG_RESULT($have_stdatomic_h)\n\nif test \"$have_stdatomic_h\" = yes; then\n    AC_DEFINE(HAVE_STD_ATOMIC, 1,\n              [Has stdatomic.h with atomic_int and atomic_uintptr_t])\nfi\n\n# Check for GCC >= 4.7 __atomic builtins\nAC_MSG_CHECKING(for GCC >= 4.7 __atomic builtins)\nAC_LINK_IFELSE(\n[\n  AC_LANG_SOURCE([[\n    volatile int val = 1;\n    int main() {\n      __atomic_load_n(&val, __ATOMIC_SEQ_CST);\n      return 0;\n    }\n  ]])\n],[have_builtin_atomic=yes],[have_builtin_atomic=no])\n\nAC_MSG_RESULT($have_builtin_atomic)\n\nif test \"$have_builtin_atomic\" = yes; then\n    AC_DEFINE(HAVE_BUILTIN_ATOMIC, 1, [Has builtin atomics])\nfi\n\n# ensurepip option\nAC_MSG_CHECKING(for ensurepip)\nAC_ARG_WITH(ensurepip,\n    [AS_HELP_STRING([--with(out)-ensurepip=@<:@=upgrade@:>@],\n        [\"install\" or \"upgrade\" using bundled pip])],\n    [],\n    [with_ensurepip=upgrade])\nAS_CASE($with_ensurepip,\n    [yes|upgrade],[ENSUREPIP=upgrade],\n    [install],[ENSUREPIP=install],\n    [no],[ENSUREPIP=no],\n    [AC_MSG_ERROR([--with-ensurepip=upgrade|install|no])])\nAC_MSG_RESULT($ENSUREPIP)\nAC_SUBST(ENSUREPIP)\n\n# check if the dirent structure of a d_type field and DT_UNKNOWN is defined\nAC_MSG_CHECKING(if the dirent structure of a d_type field)\nAC_LINK_IFELSE(\n[\n  AC_LANG_SOURCE([[\n    #include <dirent.h>\n\n    int main() {\n      struct dirent entry;\n      return entry.d_type == DT_UNKNOWN;\n    }\n  ]])\n],[have_dirent_d_type=yes],[have_dirent_d_type=no])\nAC_MSG_RESULT($have_dirent_d_type)\n\nif test \"$have_dirent_d_type\" = yes; then\n    AC_DEFINE(HAVE_DIRENT_D_TYPE, 1,\n              [Define to 1 if the dirent structure has a d_type field])\nfi\n\n# check if the Linux getrandom() syscall is available\nAC_MSG_CHECKING(for the Linux getrandom() syscall)\nAC_LINK_IFELSE(\n[\n  AC_LANG_SOURCE([[\n    #include <unistd.h>\n    #include <sys/syscall.h>\n    #include <linux/random.h>\n\n    int main() {\n        char buffer[1];\n        const size_t buflen = sizeof(buffer);\n        const int flags = GRND_NONBLOCK;\n        /* ignore the result, Python checks for ENOSYS and EAGAIN at runtime */\n        (void)syscall(SYS_getrandom, buffer, buflen, flags);\n        return 0;\n    }\n  ]])\n],[have_getrandom_syscall=yes],[have_getrandom_syscall=no])\nAC_MSG_RESULT($have_getrandom_syscall)\n\nif test \"$have_getrandom_syscall\" = yes; then\n    AC_DEFINE(HAVE_GETRANDOM_SYSCALL, 1,\n              [Define to 1 if the Linux getrandom() syscall is available])\nfi\n\n# check if the getrandom() function is available\n# the test was written for the Solaris function of <sys/random.h>\nAC_MSG_CHECKING(for the getrandom() function)\nAC_LINK_IFELSE(\n[\n  AC_LANG_SOURCE([[\n    #include <sys/random.h>\n\n    int main() {\n        char buffer[1];\n        const size_t buflen = sizeof(buffer);\n        const int flags = 0;\n        /* ignore the result, Python checks for ENOSYS at runtime */\n        (void)getrandom(buffer, buflen, flags);\n        return 0;\n    }\n  ]])\n],[have_getrandom=yes],[have_getrandom=no])\nAC_MSG_RESULT($have_getrandom)\n\nif test \"$have_getrandom\" = yes; then\n    AC_DEFINE(HAVE_GETRANDOM, 1,\n              [Define to 1 if the getrandom() function is available])\nfi\n\n# checks for POSIX shared memory, used by Modules/_multiprocessing/posixshmem.c\n# shm_* may only be available if linking against librt\nsave_LIBS=\"$LIBS\"\nsave_includes_default=\"$ac_includes_default\"\nAC_SEARCH_LIBS(shm_open, rt)\nif test \"$ac_cv_search_shm_open\" = \"-lrt\"; then\n    AC_DEFINE(SHM_NEEDS_LIBRT, 1,\n              [Define to 1 if you must link with -lrt for shm_open().])\nfi\nAC_CHECK_HEADERS(sys/mman.h)\n# temporarily override ac_includes_default for AC_CHECK_FUNCS below\nac_includes_default=\"\\\n${ac_includes_default}\n#ifndef __cplusplus\n#  ifdef HAVE_SYS_MMAN_H\n#    include <sys/mman.h>\n#  endif\n#endif\n\"\nAC_CHECK_FUNCS([shm_open shm_unlink])\n# we don't want to link with librt always, restore LIBS\nLIBS=\"$save_LIBS\"\nac_includes_default=\"$save_includes_default\"\n\n# Check for usable OpenSSL\nAX_CHECK_OPENSSL([have_openssl=yes],[have_openssl=no])\n\nif test \"$have_openssl\" = yes; then\n    AC_MSG_CHECKING([for X509_VERIFY_PARAM_set1_host in libssl])\n\n    save_LIBS=\"$LIBS\"\n    save_LDFLAGS=\"$LDFLAGS\"\n    save_CPPFLAGS=\"$CPPFLAGS\"\n    LDFLAGS=\"$LDFLAGS $OPENSSL_LDFLAGS\"\n    LIBS=\"$OPENSSL_LIBS $LIBS\"\n    CPPFLAGS=\"$OPENSSL_INCLUDES $CPPFLAGS\"\n\n    AC_LINK_IFELSE([AC_LANG_PROGRAM([\n        [#include <openssl/x509_vfy.h>]\n    ], [\n        [X509_VERIFY_PARAM *p = X509_VERIFY_PARAM_new();]\n        [X509_VERIFY_PARAM_set1_host(p, \"localhost\", 0);]\n        [X509_VERIFY_PARAM_set1_ip_asc(p, \"127.0.0.1\");]\n        [X509_VERIFY_PARAM_set_hostflags(p, 0);]\n    ])\n    ],\n    [\n        ac_cv_has_x509_verify_param_set1_host=yes\n    ],\n    [\n        ac_cv_has_x509_verify_param_set1_host=no\n    ])\n    AC_MSG_RESULT($ac_cv_has_x509_verify_param_set1_host)\n    if test \"$ac_cv_has_x509_verify_param_set1_host\" = \"yes\"; then\n        AC_DEFINE(HAVE_X509_VERIFY_PARAM_SET1_HOST, 1,\n        [Define if libssl has X509_VERIFY_PARAM_set1_host and related function])\n    fi\n\n    CPPFLAGS=\"$save_CPPFLAGS\"\n    LDFLAGS=\"$save_LDFLAGS\"\n    LIBS=\"$save_LIBS\"\nfi\n\n# ssl module default cipher suite string\nAH_TEMPLATE(PY_SSL_DEFAULT_CIPHERS,\n  [Default cipher suites list for ssl module.\n   1: Python's preferred selection, 2: leave OpenSSL defaults untouched, 0: custom string])\nAH_TEMPLATE(PY_SSL_DEFAULT_CIPHER_STRING,\n  [Cipher suite string for PY_SSL_DEFAULT_CIPHERS=0]\n)\n\nAC_MSG_CHECKING(for --with-ssl-default-suites)\nAC_ARG_WITH(ssl-default-suites,\n            AS_HELP_STRING([--with-ssl-default-suites=@<:@python|openssl|STRING@:>@],\n                           [Override default cipher suites string,\n                            python: use Python's preferred selection (default),\n                            openssl: leave OpenSSL's defaults untouched,\n                            STRING: use a custom string,\n                            PROTOCOL_SSLv2 ignores the setting]),\n[\nAC_MSG_RESULT($withval)\ncase \"$withval\" in\n    python)\n        AC_DEFINE(PY_SSL_DEFAULT_CIPHERS, 1)\n        ;;\n    openssl)\n        AC_DEFINE(PY_SSL_DEFAULT_CIPHERS, 2)\n        ;;\n    *)\n        AC_DEFINE(PY_SSL_DEFAULT_CIPHERS, 0)\n        AC_DEFINE_UNQUOTED(PY_SSL_DEFAULT_CIPHER_STRING, \"$withval\")\n        ;;\nesac\n],\n[\nAC_MSG_RESULT(python)\nAC_DEFINE(PY_SSL_DEFAULT_CIPHERS, 1)\n])\n\n\n# generate output files\nAC_CONFIG_FILES(Makefile.pre Misc/python.pc Misc/python-embed.pc Misc/python-config.sh)\nAC_CONFIG_FILES([Modules/ld_so_aix], [chmod +x Modules/ld_so_aix])\nAC_OUTPUT\n\necho \"creating Modules/Setup.local\" >&AS_MESSAGE_FD\nif test ! -f Modules/Setup.local\nthen\n\techo \"# Edit this file for local setup changes\" >Modules/Setup.local\nfi\n\necho \"creating Makefile\" >&AS_MESSAGE_FD\n$SHELL $srcdir/Modules/makesetup -c $srcdir/Modules/config.c.in \\\n\t\t\t-s Modules \\\n\t\t\tModules/Setup.local $srcdir/Modules/Setup\nmv config.c Modules\n\nif test \"$Py_OPT\" = 'false' -a \"$Py_DEBUG\" != 'true'; then\n    echo \"\" >&AS_MESSAGE_FD\n    echo \"\" >&AS_MESSAGE_FD\n    echo \"If you want a release build with all stable optimizations active (PGO, etc),\" >&AS_MESSAGE_FD\n    echo \"please run ./configure --enable-optimizations\" >&AS_MESSAGE_FD\n    echo \"\" >&AS_MESSAGE_FD\n    echo \"\" >&AS_MESSAGE_FD\nfi\n\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/pyconfig.h.in": "/* pyconfig.h.in.  Generated from configure.ac by autoheader.  */\n\n\n#ifndef Py_PYCONFIG_H\n#define Py_PYCONFIG_H\n\n\n/* Define if building universal (internal helper macro) */\n#undef AC_APPLE_UNIVERSAL_BUILD\n\n/* Define for AIX if your compiler is a genuine IBM xlC/xlC_r and you want\n   support for AIX C++ shared extension modules. */\n#undef AIX_GENUINE_CPLUSPLUS\n\n/* Alternative SOABI used in debug build to load C extensions built in release\n   mode */\n#undef ALT_SOABI\n\n/* The Android API level. */\n#undef ANDROID_API_LEVEL\n\n/* Define if C doubles are 64-bit IEEE 754 binary format, stored in ARM\n   mixed-endian order (byte order 45670123) */\n#undef DOUBLE_IS_ARM_MIXED_ENDIAN_IEEE754\n\n/* Define if C doubles are 64-bit IEEE 754 binary format, stored with the most\n   significant byte first */\n#undef DOUBLE_IS_BIG_ENDIAN_IEEE754\n\n/* Define if C doubles are 64-bit IEEE 754 binary format, stored with the\n   least significant byte first */\n#undef DOUBLE_IS_LITTLE_ENDIAN_IEEE754\n\n/* Define if --enable-ipv6 is specified */\n#undef ENABLE_IPV6\n\n/* Define to 1 if your system stores words within floats with the most\n   significant word first */\n#undef FLOAT_WORDS_BIGENDIAN\n\n/* Define if flock needs to be linked with bsd library. */\n#undef FLOCK_NEEDS_LIBBSD\n\n/* Define if getpgrp() must be called as getpgrp(0). */\n#undef GETPGRP_HAVE_ARG\n\n/* Define if gettimeofday() does not have second (timezone) argument This is\n   the case on Motorola V4 (R40V4.2) */\n#undef GETTIMEOFDAY_NO_TZ\n\n/* Define to 1 if you have the `accept4' function. */\n#undef HAVE_ACCEPT4\n\n/* Define to 1 if you have the `acosh' function. */\n#undef HAVE_ACOSH\n\n/* struct addrinfo (netdb.h) */\n#undef HAVE_ADDRINFO\n\n/* Define to 1 if you have the `alarm' function. */\n#undef HAVE_ALARM\n\n/* Define if aligned memory access is required */\n#undef HAVE_ALIGNED_REQUIRED\n\n/* Define to 1 if you have the <alloca.h> header file. */\n#undef HAVE_ALLOCA_H\n\n/* Define this if your time.h defines altzone. */\n#undef HAVE_ALTZONE\n\n/* Define to 1 if you have the `asinh' function. */\n#undef HAVE_ASINH\n\n/* Define to 1 if you have the <asm/types.h> header file. */\n#undef HAVE_ASM_TYPES_H\n\n/* Define to 1 if you have the `atanh' function. */\n#undef HAVE_ATANH\n\n/* Define to 1 if you have the `bind_textdomain_codeset' function. */\n#undef HAVE_BIND_TEXTDOMAIN_CODESET\n\n/* Define to 1 if you have the <bluetooth/bluetooth.h> header file. */\n#undef HAVE_BLUETOOTH_BLUETOOTH_H\n\n/* Define to 1 if you have the <bluetooth.h> header file. */\n#undef HAVE_BLUETOOTH_H\n\n/* Define if mbstowcs(NULL, \"text\", 0) does not return the number of wide\n   chars that would be converted. */\n#undef HAVE_BROKEN_MBSTOWCS\n\n/* Define if nice() returns success/failure instead of the new priority. */\n#undef HAVE_BROKEN_NICE\n\n/* Define if the system reports an invalid PIPE_BUF value. */\n#undef HAVE_BROKEN_PIPE_BUF\n\n/* Define if poll() sets errno on invalid file descriptors. */\n#undef HAVE_BROKEN_POLL\n\n/* Define if the Posix semaphores do not work on your system */\n#undef HAVE_BROKEN_POSIX_SEMAPHORES\n\n/* Define if pthread_sigmask() does not work on your system. */\n#undef HAVE_BROKEN_PTHREAD_SIGMASK\n\n/* define to 1 if your sem_getvalue is broken. */\n#undef HAVE_BROKEN_SEM_GETVALUE\n\n/* Define if `unsetenv` does not return an int. */\n#undef HAVE_BROKEN_UNSETENV\n\n/* Has builtin atomics */\n#undef HAVE_BUILTIN_ATOMIC\n\n/* Define to 1 if you have the 'chflags' function. */\n#undef HAVE_CHFLAGS\n\n/* Define to 1 if you have the `chown' function. */\n#undef HAVE_CHOWN\n\n/* Define if you have the 'chroot' function. */\n#undef HAVE_CHROOT\n\n/* Define to 1 if you have the `clock' function. */\n#undef HAVE_CLOCK\n\n/* Define to 1 if you have the `clock_getres' function. */\n#undef HAVE_CLOCK_GETRES\n\n/* Define to 1 if you have the `clock_gettime' function. */\n#undef HAVE_CLOCK_GETTIME\n\n/* Define to 1 if you have the `clock_settime' function. */\n#undef HAVE_CLOCK_SETTIME\n\n/* Define if the C compiler supports computed gotos. */\n#undef HAVE_COMPUTED_GOTOS\n\n/* Define to 1 if you have the `confstr' function. */\n#undef HAVE_CONFSTR\n\n/* Define to 1 if you have the <conio.h> header file. */\n#undef HAVE_CONIO_H\n\n/* Define to 1 if you have the `copysign' function. */\n#undef HAVE_COPYSIGN\n\n/* Define to 1 if you have the `copy_file_range' function. */\n#undef HAVE_COPY_FILE_RANGE\n\n/* Define to 1 if you have the <crypt.h> header file. */\n#undef HAVE_CRYPT_H\n\n/* Define if you have the crypt_r() function. */\n#undef HAVE_CRYPT_R\n\n/* Define to 1 if you have the `ctermid' function. */\n#undef HAVE_CTERMID\n\n/* Define if you have the 'ctermid_r' function. */\n#undef HAVE_CTERMID_R\n\n/* Define if you have the 'filter' function. */\n#undef HAVE_CURSES_FILTER\n\n/* Define to 1 if you have the <curses.h> header file. */\n#undef HAVE_CURSES_H\n\n/* Define if you have the 'has_key' function. */\n#undef HAVE_CURSES_HAS_KEY\n\n/* Define if you have the 'immedok' function. */\n#undef HAVE_CURSES_IMMEDOK\n\n/* Define if you have the 'is_pad' function or macro. */\n#undef HAVE_CURSES_IS_PAD\n\n/* Define if you have the 'is_term_resized' function. */\n#undef HAVE_CURSES_IS_TERM_RESIZED\n\n/* Define if you have the 'resizeterm' function. */\n#undef HAVE_CURSES_RESIZETERM\n\n/* Define if you have the 'resize_term' function. */\n#undef HAVE_CURSES_RESIZE_TERM\n\n/* Define if you have the 'syncok' function. */\n#undef HAVE_CURSES_SYNCOK\n\n/* Define if you have the 'typeahead' function. */\n#undef HAVE_CURSES_TYPEAHEAD\n\n/* Define if you have the 'use_env' function. */\n#undef HAVE_CURSES_USE_ENV\n\n/* Define if you have the 'wchgat' function. */\n#undef HAVE_CURSES_WCHGAT\n\n/* Define to 1 if you have the declaration of `isfinite', and to 0 if you\n   don't. */\n#undef HAVE_DECL_ISFINITE\n\n/* Define to 1 if you have the declaration of `isinf', and to 0 if you don't.\n   */\n#undef HAVE_DECL_ISINF\n\n/* Define to 1 if you have the declaration of `isnan', and to 0 if you don't.\n   */\n#undef HAVE_DECL_ISNAN\n\n/* Define to 1 if you have the declaration of `RTLD_DEEPBIND', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_DEEPBIND\n\n/* Define to 1 if you have the declaration of `RTLD_GLOBAL', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_GLOBAL\n\n/* Define to 1 if you have the declaration of `RTLD_LAZY', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_LAZY\n\n/* Define to 1 if you have the declaration of `RTLD_LOCAL', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_LOCAL\n\n/* Define to 1 if you have the declaration of `RTLD_MEMBER', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_MEMBER\n\n/* Define to 1 if you have the declaration of `RTLD_NODELETE', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_NODELETE\n\n/* Define to 1 if you have the declaration of `RTLD_NOLOAD', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_NOLOAD\n\n/* Define to 1 if you have the declaration of `RTLD_NOW', and to 0 if you\n   don't. */\n#undef HAVE_DECL_RTLD_NOW\n\n/* Define to 1 if you have the declaration of `tzname', and to 0 if you don't.\n   */\n#undef HAVE_DECL_TZNAME\n\n/* Define to 1 if you have the device macros. */\n#undef HAVE_DEVICE_MACROS\n\n/* Define to 1 if you have the /dev/ptc device file. */\n#undef HAVE_DEV_PTC\n\n/* Define to 1 if you have the /dev/ptmx device file. */\n#undef HAVE_DEV_PTMX\n\n/* Define to 1 if you have the <direct.h> header file. */\n#undef HAVE_DIRECT_H\n\n/* Define to 1 if the dirent structure has a d_type field */\n#undef HAVE_DIRENT_D_TYPE\n\n/* Define to 1 if you have the <dirent.h> header file, and it defines `DIR'.\n   */\n#undef HAVE_DIRENT_H\n\n/* Define if you have the 'dirfd' function or macro. */\n#undef HAVE_DIRFD\n\n/* Define to 1 if you have the <dlfcn.h> header file. */\n#undef HAVE_DLFCN_H\n\n/* Define to 1 if you have the `dlopen' function. */\n#undef HAVE_DLOPEN\n\n/* Define to 1 if you have the `dup2' function. */\n#undef HAVE_DUP2\n\n/* Define to 1 if you have the `dup3' function. */\n#undef HAVE_DUP3\n\n/* Defined when any dynamic module loading is enabled. */\n#undef HAVE_DYNAMIC_LOADING\n\n/* Define to 1 if you have the <endian.h> header file. */\n#undef HAVE_ENDIAN_H\n\n/* Define if you have the 'epoll' functions. */\n#undef HAVE_EPOLL\n\n/* Define if you have the 'epoll_create1' function. */\n#undef HAVE_EPOLL_CREATE1\n\n/* Define to 1 if you have the `erf' function. */\n#undef HAVE_ERF\n\n/* Define to 1 if you have the `erfc' function. */\n#undef HAVE_ERFC\n\n/* Define to 1 if you have the <errno.h> header file. */\n#undef HAVE_ERRNO_H\n\n/* Define to 1 if you have the `execv' function. */\n#undef HAVE_EXECV\n\n/* Define to 1 if you have the `explicit_bzero' function. */\n#undef HAVE_EXPLICIT_BZERO\n\n/* Define to 1 if you have the `explicit_memset' function. */\n#undef HAVE_EXPLICIT_MEMSET\n\n/* Define to 1 if you have the `expm1' function. */\n#undef HAVE_EXPM1\n\n/* Define to 1 if you have the `faccessat' function. */\n#undef HAVE_FACCESSAT\n\n/* Define if you have the 'fchdir' function. */\n#undef HAVE_FCHDIR\n\n/* Define to 1 if you have the `fchmod' function. */\n#undef HAVE_FCHMOD\n\n/* Define to 1 if you have the `fchmodat' function. */\n#undef HAVE_FCHMODAT\n\n/* Define to 1 if you have the `fchown' function. */\n#undef HAVE_FCHOWN\n\n/* Define to 1 if you have the `fchownat' function. */\n#undef HAVE_FCHOWNAT\n\n/* Define to 1 if you have the <fcntl.h> header file. */\n#undef HAVE_FCNTL_H\n\n/* Define if you have the 'fdatasync' function. */\n#undef HAVE_FDATASYNC\n\n/* Define to 1 if you have the `fdopendir' function. */\n#undef HAVE_FDOPENDIR\n\n/* Define to 1 if you have the `fdwalk' function. */\n#undef HAVE_FDWALK\n\n/* Define to 1 if you have the `fexecve' function. */\n#undef HAVE_FEXECVE\n\n/* Define to 1 if you have the `finite' function. */\n#undef HAVE_FINITE\n\n/* Define to 1 if you have the `flock' function. */\n#undef HAVE_FLOCK\n\n/* Define to 1 if you have the `fork' function. */\n#undef HAVE_FORK\n\n/* Define to 1 if you have the `forkpty' function. */\n#undef HAVE_FORKPTY\n\n/* Define to 1 if you have the `fpathconf' function. */\n#undef HAVE_FPATHCONF\n\n/* Define to 1 if you have the `fseek64' function. */\n#undef HAVE_FSEEK64\n\n/* Define to 1 if you have the `fseeko' function. */\n#undef HAVE_FSEEKO\n\n/* Define to 1 if you have the `fstatat' function. */\n#undef HAVE_FSTATAT\n\n/* Define to 1 if you have the `fstatvfs' function. */\n#undef HAVE_FSTATVFS\n\n/* Define if you have the 'fsync' function. */\n#undef HAVE_FSYNC\n\n/* Define to 1 if you have the `ftell64' function. */\n#undef HAVE_FTELL64\n\n/* Define to 1 if you have the `ftello' function. */\n#undef HAVE_FTELLO\n\n/* Define to 1 if you have the `ftime' function. */\n#undef HAVE_FTIME\n\n/* Define to 1 if you have the `ftruncate' function. */\n#undef HAVE_FTRUNCATE\n\n/* Define to 1 if you have the `futimens' function. */\n#undef HAVE_FUTIMENS\n\n/* Define to 1 if you have the `futimes' function. */\n#undef HAVE_FUTIMES\n\n/* Define to 1 if you have the `futimesat' function. */\n#undef HAVE_FUTIMESAT\n\n/* Define to 1 if you have the `gai_strerror' function. */\n#undef HAVE_GAI_STRERROR\n\n/* Define to 1 if you have the `gamma' function. */\n#undef HAVE_GAMMA\n\n/* Define if we can use gcc inline assembler to get and set mc68881 fpcr */\n#undef HAVE_GCC_ASM_FOR_MC68881\n\n/* Define if we can use x64 gcc inline assembler */\n#undef HAVE_GCC_ASM_FOR_X64\n\n/* Define if we can use gcc inline assembler to get and set x87 control word\n   */\n#undef HAVE_GCC_ASM_FOR_X87\n\n/* Define if your compiler provides __uint128_t */\n#undef HAVE_GCC_UINT128_T\n\n/* Define if you have the getaddrinfo function. */\n#undef HAVE_GETADDRINFO\n\n/* Define this if you have flockfile(), getc_unlocked(), and funlockfile() */\n#undef HAVE_GETC_UNLOCKED\n\n/* Define to 1 if you have the `getentropy' function. */\n#undef HAVE_GETENTROPY\n\n/* Define to 1 if you have the `getgrgid_r' function. */\n#undef HAVE_GETGRGID_R\n\n/* Define to 1 if you have the `getgrnam_r' function. */\n#undef HAVE_GETGRNAM_R\n\n/* Define to 1 if you have the `getgrouplist' function. */\n#undef HAVE_GETGROUPLIST\n\n/* Define to 1 if you have the `getgroups' function. */\n#undef HAVE_GETGROUPS\n\n/* Define to 1 if you have the `gethostbyname' function. */\n#undef HAVE_GETHOSTBYNAME\n\n/* Define this if you have some version of gethostbyname_r() */\n#undef HAVE_GETHOSTBYNAME_R\n\n/* Define this if you have the 3-arg version of gethostbyname_r(). */\n#undef HAVE_GETHOSTBYNAME_R_3_ARG\n\n/* Define this if you have the 5-arg version of gethostbyname_r(). */\n#undef HAVE_GETHOSTBYNAME_R_5_ARG\n\n/* Define this if you have the 6-arg version of gethostbyname_r(). */\n#undef HAVE_GETHOSTBYNAME_R_6_ARG\n\n/* Define to 1 if you have the `getitimer' function. */\n#undef HAVE_GETITIMER\n\n/* Define to 1 if you have the `getloadavg' function. */\n#undef HAVE_GETLOADAVG\n\n/* Define to 1 if you have the `getlogin' function. */\n#undef HAVE_GETLOGIN\n\n/* Define to 1 if you have the `getnameinfo' function. */\n#undef HAVE_GETNAMEINFO\n\n/* Define if you have the 'getpagesize' function. */\n#undef HAVE_GETPAGESIZE\n\n/* Define to 1 if you have the `getpeername' function. */\n#undef HAVE_GETPEERNAME\n\n/* Define to 1 if you have the `getpgid' function. */\n#undef HAVE_GETPGID\n\n/* Define to 1 if you have the `getpgrp' function. */\n#undef HAVE_GETPGRP\n\n/* Define to 1 if you have the `getpid' function. */\n#undef HAVE_GETPID\n\n/* Define to 1 if you have the `getpriority' function. */\n#undef HAVE_GETPRIORITY\n\n/* Define to 1 if you have the `getpwent' function. */\n#undef HAVE_GETPWENT\n\n/* Define to 1 if you have the `getpwnam_r' function. */\n#undef HAVE_GETPWNAM_R\n\n/* Define to 1 if you have the `getpwuid_r' function. */\n#undef HAVE_GETPWUID_R\n\n/* Define to 1 if the getrandom() function is available */\n#undef HAVE_GETRANDOM\n\n/* Define to 1 if the Linux getrandom() syscall is available */\n#undef HAVE_GETRANDOM_SYSCALL\n\n/* Define to 1 if you have the `getresgid' function. */\n#undef HAVE_GETRESGID\n\n/* Define to 1 if you have the `getresuid' function. */\n#undef HAVE_GETRESUID\n\n/* Define to 1 if you have the `getsid' function. */\n#undef HAVE_GETSID\n\n/* Define to 1 if you have the `getspent' function. */\n#undef HAVE_GETSPENT\n\n/* Define to 1 if you have the `getspnam' function. */\n#undef HAVE_GETSPNAM\n\n/* Define to 1 if you have the `gettimeofday' function. */\n#undef HAVE_GETTIMEOFDAY\n\n/* Define to 1 if you have the `getwd' function. */\n#undef HAVE_GETWD\n\n/* Define if glibc has incorrect _FORTIFY_SOURCE wrappers for memmove and\n   bcopy. */\n#undef HAVE_GLIBC_MEMMOVE_BUG\n\n/* Define to 1 if you have the <grp.h> header file. */\n#undef HAVE_GRP_H\n\n/* Define if you have the 'hstrerror' function. */\n#undef HAVE_HSTRERROR\n\n/* Define this if you have le64toh() */\n#undef HAVE_HTOLE64\n\n/* Define to 1 if you have the `hypot' function. */\n#undef HAVE_HYPOT\n\n/* Define to 1 if you have the <ieeefp.h> header file. */\n#undef HAVE_IEEEFP_H\n\n/* Define to 1 if you have the `if_nameindex' function. */\n#undef HAVE_IF_NAMEINDEX\n\n/* Define if you have the 'inet_aton' function. */\n#undef HAVE_INET_ATON\n\n/* Define if you have the 'inet_pton' function. */\n#undef HAVE_INET_PTON\n\n/* Define to 1 if you have the `initgroups' function. */\n#undef HAVE_INITGROUPS\n\n/* Define to 1 if you have the <inttypes.h> header file. */\n#undef HAVE_INTTYPES_H\n\n/* Define to 1 if you have the <io.h> header file. */\n#undef HAVE_IO_H\n\n/* Define if gcc has the ipa-pure-const bug. */\n#undef HAVE_IPA_PURE_CONST_BUG\n\n/* Define to 1 if you have the `kill' function. */\n#undef HAVE_KILL\n\n/* Define to 1 if you have the `killpg' function. */\n#undef HAVE_KILLPG\n\n/* Define if you have the 'kqueue' functions. */\n#undef HAVE_KQUEUE\n\n/* Define to 1 if you have the <langinfo.h> header file. */\n#undef HAVE_LANGINFO_H\n\n/* Defined to enable large file support when an off_t is bigger than a long\n   and long long is at least as big as an off_t. You may need to add some\n   flags for configuration and compilation to enable this mode. (For Solaris\n   and Linux, the necessary defines are already defined.) */\n#undef HAVE_LARGEFILE_SUPPORT\n\n/* Define to 1 if you have the 'lchflags' function. */\n#undef HAVE_LCHFLAGS\n\n/* Define to 1 if you have the `lchmod' function. */\n#undef HAVE_LCHMOD\n\n/* Define to 1 if you have the `lchown' function. */\n#undef HAVE_LCHOWN\n\n/* Define to 1 if you have the `lgamma' function. */\n#undef HAVE_LGAMMA\n\n/* Define to 1 if you have the `dl' library (-ldl). */\n#undef HAVE_LIBDL\n\n/* Define to 1 if you have the `dld' library (-ldld). */\n#undef HAVE_LIBDLD\n\n/* Define to 1 if you have the `ieee' library (-lieee). */\n#undef HAVE_LIBIEEE\n\n/* Define to 1 if you have the <libintl.h> header file. */\n#undef HAVE_LIBINTL_H\n\n/* Define if you have the readline library (-lreadline). */\n#undef HAVE_LIBREADLINE\n\n/* Define to 1 if you have the `resolv' library (-lresolv). */\n#undef HAVE_LIBRESOLV\n\n/* Define to 1 if you have the `sendfile' library (-lsendfile). */\n#undef HAVE_LIBSENDFILE\n\n/* Define to 1 if you have the <libutil.h> header file. */\n#undef HAVE_LIBUTIL_H\n\n/* Define if you have the 'link' function. */\n#undef HAVE_LINK\n\n/* Define to 1 if you have the `linkat' function. */\n#undef HAVE_LINKAT\n\n/* Define to 1 if you have the <linux/can/bcm.h> header file. */\n#undef HAVE_LINUX_CAN_BCM_H\n\n/* Define to 1 if you have the <linux/can.h> header file. */\n#undef HAVE_LINUX_CAN_H\n\n/* Define if compiling using Linux 3.6 or later. */\n#undef HAVE_LINUX_CAN_RAW_FD_FRAMES\n\n/* Define to 1 if you have the <linux/can/raw.h> header file. */\n#undef HAVE_LINUX_CAN_RAW_H\n\n/* Define to 1 if you have the <linux/memfd.h> header file. */\n#undef HAVE_LINUX_MEMFD_H\n\n/* Define to 1 if you have the <linux/netlink.h> header file. */\n#undef HAVE_LINUX_NETLINK_H\n\n/* Define to 1 if you have the <linux/qrtr.h> header file. */\n#undef HAVE_LINUX_QRTR_H\n\n/* Define to 1 if you have the <linux/random.h> header file. */\n#undef HAVE_LINUX_RANDOM_H\n\n/* Define to 1 if you have the <linux/tipc.h> header file. */\n#undef HAVE_LINUX_TIPC_H\n\n/* Define to 1 if you have the <linux/vm_sockets.h> header file. */\n#undef HAVE_LINUX_VM_SOCKETS_H\n\n/* Define to 1 if you have the `lockf' function. */\n#undef HAVE_LOCKF\n\n/* Define to 1 if you have the `log1p' function. */\n#undef HAVE_LOG1P\n\n/* Define to 1 if you have the `log2' function. */\n#undef HAVE_LOG2\n\n/* Define to 1 if the system has the type `long double'. */\n#undef HAVE_LONG_DOUBLE\n\n/* Define to 1 if you have the `lstat' function. */\n#undef HAVE_LSTAT\n\n/* Define to 1 if you have the `lutimes' function. */\n#undef HAVE_LUTIMES\n\n/* Define to 1 if you have the `madvise' function. */\n#undef HAVE_MADVISE\n\n/* Define this if you have the makedev macro. */\n#undef HAVE_MAKEDEV\n\n/* Define to 1 if you have the `mbrtowc' function. */\n#undef HAVE_MBRTOWC\n\n/* Define if you have the 'memfd_create' function. */\n#undef HAVE_MEMFD_CREATE\n\n/* Define to 1 if you have the <memory.h> header file. */\n#undef HAVE_MEMORY_H\n\n/* Define to 1 if you have the `memrchr' function. */\n#undef HAVE_MEMRCHR\n\n/* Define to 1 if you have the `mkdirat' function. */\n#undef HAVE_MKDIRAT\n\n/* Define to 1 if you have the `mkfifo' function. */\n#undef HAVE_MKFIFO\n\n/* Define to 1 if you have the `mkfifoat' function. */\n#undef HAVE_MKFIFOAT\n\n/* Define to 1 if you have the `mknod' function. */\n#undef HAVE_MKNOD\n\n/* Define to 1 if you have the `mknodat' function. */\n#undef HAVE_MKNODAT\n\n/* Define to 1 if you have the `mktime' function. */\n#undef HAVE_MKTIME\n\n/* Define to 1 if you have the `mmap' function. */\n#undef HAVE_MMAP\n\n/* Define to 1 if you have the `mremap' function. */\n#undef HAVE_MREMAP\n\n/* Define to 1 if you have the <ncurses.h> header file. */\n#undef HAVE_NCURSES_H\n\n/* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */\n#undef HAVE_NDIR_H\n\n/* Define to 1 if you have the <netpacket/packet.h> header file. */\n#undef HAVE_NETPACKET_PACKET_H\n\n/* Define to 1 if you have the <net/if.h> header file. */\n#undef HAVE_NET_IF_H\n\n/* Define to 1 if you have the `nice' function. */\n#undef HAVE_NICE\n\n/* Define to 1 if you have the `openat' function. */\n#undef HAVE_OPENAT\n\n/* Define to 1 if you have the `openpty' function. */\n#undef HAVE_OPENPTY\n\n/* Define to 1 if you have the `pathconf' function. */\n#undef HAVE_PATHCONF\n\n/* Define to 1 if you have the `pause' function. */\n#undef HAVE_PAUSE\n\n/* Define to 1 if you have the `pipe2' function. */\n#undef HAVE_PIPE2\n\n/* Define to 1 if you have the `plock' function. */\n#undef HAVE_PLOCK\n\n/* Define to 1 if you have the `poll' function. */\n#undef HAVE_POLL\n\n/* Define to 1 if you have the <poll.h> header file. */\n#undef HAVE_POLL_H\n\n/* Define to 1 if you have the `posix_fadvise' function. */\n#undef HAVE_POSIX_FADVISE\n\n/* Define to 1 if you have the `posix_fallocate' function. */\n#undef HAVE_POSIX_FALLOCATE\n\n/* Define to 1 if you have the `posix_spawn' function. */\n#undef HAVE_POSIX_SPAWN\n\n/* Define to 1 if you have the `posix_spawnp' function. */\n#undef HAVE_POSIX_SPAWNP\n\n/* Define to 1 if you have the `pread' function. */\n#undef HAVE_PREAD\n\n/* Define to 1 if you have the `preadv' function. */\n#undef HAVE_PREADV\n\n/* Define to 1 if you have the `preadv2' function. */\n#undef HAVE_PREADV2\n\n/* Define if you have the 'prlimit' functions. */\n#undef HAVE_PRLIMIT\n\n/* Define to 1 if you have the <process.h> header file. */\n#undef HAVE_PROCESS_H\n\n/* Define if your compiler supports function prototype */\n#undef HAVE_PROTOTYPES\n\n/* Define to 1 if you have the `pthread_condattr_setclock' function. */\n#undef HAVE_PTHREAD_CONDATTR_SETCLOCK\n\n/* Defined for Solaris 2.6 bug in pthread header. */\n#undef HAVE_PTHREAD_DESTRUCTOR\n\n/* Define to 1 if you have the `pthread_getcpuclockid' function. */\n#undef HAVE_PTHREAD_GETCPUCLOCKID\n\n/* Define to 1 if you have the <pthread.h> header file. */\n#undef HAVE_PTHREAD_H\n\n/* Define to 1 if you have the `pthread_init' function. */\n#undef HAVE_PTHREAD_INIT\n\n/* Define to 1 if you have the `pthread_kill' function. */\n#undef HAVE_PTHREAD_KILL\n\n/* Define to 1 if you have the `pthread_sigmask' function. */\n#undef HAVE_PTHREAD_SIGMASK\n\n/* Define to 1 if you have the <pty.h> header file. */\n#undef HAVE_PTY_H\n\n/* Define to 1 if you have the `putenv' function. */\n#undef HAVE_PUTENV\n\n/* Define to 1 if you have the `pwrite' function. */\n#undef HAVE_PWRITE\n\n/* Define to 1 if you have the `pwritev' function. */\n#undef HAVE_PWRITEV\n\n/* Define to 1 if you have the `pwritev2' function. */\n#undef HAVE_PWRITEV2\n\n/* Define to 1 if you have the `readlink' function. */\n#undef HAVE_READLINK\n\n/* Define to 1 if you have the `readlinkat' function. */\n#undef HAVE_READLINKAT\n\n/* Define to 1 if you have the `readv' function. */\n#undef HAVE_READV\n\n/* Define to 1 if you have the `realpath' function. */\n#undef HAVE_REALPATH\n\n/* Define to 1 if you have the `renameat' function. */\n#undef HAVE_RENAMEAT\n\n/* Define if readline supports append_history */\n#undef HAVE_RL_APPEND_HISTORY\n\n/* Define if you can turn off readline's signal handling. */\n#undef HAVE_RL_CATCH_SIGNAL\n\n/* Define if you have readline 2.2 */\n#undef HAVE_RL_COMPLETION_APPEND_CHARACTER\n\n/* Define if you have readline 4.0 */\n#undef HAVE_RL_COMPLETION_DISPLAY_MATCHES_HOOK\n\n/* Define if you have readline 4.2 */\n#undef HAVE_RL_COMPLETION_MATCHES\n\n/* Define if you have rl_completion_suppress_append */\n#undef HAVE_RL_COMPLETION_SUPPRESS_APPEND\n\n/* Define if you have readline 4.0 */\n#undef HAVE_RL_PRE_INPUT_HOOK\n\n/* Define if you have readline 4.0 */\n#undef HAVE_RL_RESIZE_TERMINAL\n\n/* Define to 1 if you have the `round' function. */\n#undef HAVE_ROUND\n\n/* Define to 1 if you have the `rtpSpawn' function. */\n#undef HAVE_RTPSPAWN\n\n/* Define to 1 if you have the `sched_get_priority_max' function. */\n#undef HAVE_SCHED_GET_PRIORITY_MAX\n\n/* Define to 1 if you have the <sched.h> header file. */\n#undef HAVE_SCHED_H\n\n/* Define to 1 if you have the `sched_rr_get_interval' function. */\n#undef HAVE_SCHED_RR_GET_INTERVAL\n\n/* Define to 1 if you have the `sched_setaffinity' function. */\n#undef HAVE_SCHED_SETAFFINITY\n\n/* Define to 1 if you have the `sched_setparam' function. */\n#undef HAVE_SCHED_SETPARAM\n\n/* Define to 1 if you have the `sched_setscheduler' function. */\n#undef HAVE_SCHED_SETSCHEDULER\n\n/* Define to 1 if you have the `sem_getvalue' function. */\n#undef HAVE_SEM_GETVALUE\n\n/* Define to 1 if you have the `sem_open' function. */\n#undef HAVE_SEM_OPEN\n\n/* Define to 1 if you have the `sem_timedwait' function. */\n#undef HAVE_SEM_TIMEDWAIT\n\n/* Define to 1 if you have the `sem_unlink' function. */\n#undef HAVE_SEM_UNLINK\n\n/* Define to 1 if you have the `sendfile' function. */\n#undef HAVE_SENDFILE\n\n/* Define to 1 if you have the `setegid' function. */\n#undef HAVE_SETEGID\n\n/* Define to 1 if you have the `seteuid' function. */\n#undef HAVE_SETEUID\n\n/* Define to 1 if you have the `setgid' function. */\n#undef HAVE_SETGID\n\n/* Define if you have the 'setgroups' function. */\n#undef HAVE_SETGROUPS\n\n/* Define to 1 if you have the `sethostname' function. */\n#undef HAVE_SETHOSTNAME\n\n/* Define to 1 if you have the `setitimer' function. */\n#undef HAVE_SETITIMER\n\n/* Define to 1 if you have the `setlocale' function. */\n#undef HAVE_SETLOCALE\n\n/* Define to 1 if you have the `setpgid' function. */\n#undef HAVE_SETPGID\n\n/* Define to 1 if you have the `setpgrp' function. */\n#undef HAVE_SETPGRP\n\n/* Define to 1 if you have the `setpriority' function. */\n#undef HAVE_SETPRIORITY\n\n/* Define to 1 if you have the `setregid' function. */\n#undef HAVE_SETREGID\n\n/* Define to 1 if you have the `setresgid' function. */\n#undef HAVE_SETRESGID\n\n/* Define to 1 if you have the `setresuid' function. */\n#undef HAVE_SETRESUID\n\n/* Define to 1 if you have the `setreuid' function. */\n#undef HAVE_SETREUID\n\n/* Define to 1 if you have the `setsid' function. */\n#undef HAVE_SETSID\n\n/* Define to 1 if you have the `setuid' function. */\n#undef HAVE_SETUID\n\n/* Define to 1 if you have the `setvbuf' function. */\n#undef HAVE_SETVBUF\n\n/* Define to 1 if you have the <shadow.h> header file. */\n#undef HAVE_SHADOW_H\n\n/* Define to 1 if you have the `shm_open' function. */\n#undef HAVE_SHM_OPEN\n\n/* Define to 1 if you have the `shm_unlink' function. */\n#undef HAVE_SHM_UNLINK\n\n/* Define to 1 if you have the `sigaction' function. */\n#undef HAVE_SIGACTION\n\n/* Define to 1 if you have the `sigaltstack' function. */\n#undef HAVE_SIGALTSTACK\n\n/* Define to 1 if you have the `sigfillset' function. */\n#undef HAVE_SIGFILLSET\n\n/* Define to 1 if `si_band' is a member of `siginfo_t'. */\n#undef HAVE_SIGINFO_T_SI_BAND\n\n/* Define to 1 if you have the `siginterrupt' function. */\n#undef HAVE_SIGINTERRUPT\n\n/* Define to 1 if you have the <signal.h> header file. */\n#undef HAVE_SIGNAL_H\n\n/* Define to 1 if you have the `sigpending' function. */\n#undef HAVE_SIGPENDING\n\n/* Define to 1 if you have the `sigrelse' function. */\n#undef HAVE_SIGRELSE\n\n/* Define to 1 if you have the `sigtimedwait' function. */\n#undef HAVE_SIGTIMEDWAIT\n\n/* Define to 1 if you have the `sigwait' function. */\n#undef HAVE_SIGWAIT\n\n/* Define to 1 if you have the `sigwaitinfo' function. */\n#undef HAVE_SIGWAITINFO\n\n/* Define to 1 if you have the `snprintf' function. */\n#undef HAVE_SNPRINTF\n\n/* struct sockaddr_alg (linux/if_alg.h) */\n#undef HAVE_SOCKADDR_ALG\n\n/* Define if sockaddr has sa_len member */\n#undef HAVE_SOCKADDR_SA_LEN\n\n/* struct sockaddr_storage (sys/socket.h) */\n#undef HAVE_SOCKADDR_STORAGE\n\n/* Define if you have the 'socketpair' function. */\n#undef HAVE_SOCKETPAIR\n\n/* Define to 1 if you have the <spawn.h> header file. */\n#undef HAVE_SPAWN_H\n\n/* Define if your compiler provides ssize_t */\n#undef HAVE_SSIZE_T\n\n/* Define to 1 if you have the `statvfs' function. */\n#undef HAVE_STATVFS\n\n/* Define if you have struct stat.st_mtim.tv_nsec */\n#undef HAVE_STAT_TV_NSEC\n\n/* Define if you have struct stat.st_mtimensec */\n#undef HAVE_STAT_TV_NSEC2\n\n/* Define if your compiler supports variable length function prototypes (e.g.\n   void fprintf(FILE *, char *, ...);) *and* <stdarg.h> */\n#undef HAVE_STDARG_PROTOTYPES\n\n/* Define to 1 if you have the <stdint.h> header file. */\n#undef HAVE_STDINT_H\n\n/* Define to 1 if you have the <stdlib.h> header file. */\n#undef HAVE_STDLIB_H\n\n/* Has stdatomic.h with atomic_int and atomic_uintptr_t */\n#undef HAVE_STD_ATOMIC\n\n/* Define to 1 if you have the `strdup' function. */\n#undef HAVE_STRDUP\n\n/* Define to 1 if you have the `strftime' function. */\n#undef HAVE_STRFTIME\n\n/* Define to 1 if you have the <strings.h> header file. */\n#undef HAVE_STRINGS_H\n\n/* Define to 1 if you have the <string.h> header file. */\n#undef HAVE_STRING_H\n\n/* Define to 1 if you have the `strlcpy' function. */\n#undef HAVE_STRLCPY\n\n/* Define to 1 if you have the <stropts.h> header file. */\n#undef HAVE_STROPTS_H\n\n/* Define to 1 if you have the `strsignal' function. */\n#undef HAVE_STRSIGNAL\n\n/* Define to 1 if `pw_gecos' is a member of `struct passwd'. */\n#undef HAVE_STRUCT_PASSWD_PW_GECOS\n\n/* Define to 1 if `pw_passwd' is a member of `struct passwd'. */\n#undef HAVE_STRUCT_PASSWD_PW_PASSWD\n\n/* Define to 1 if `st_birthtime' is a member of `struct stat'. */\n#undef HAVE_STRUCT_STAT_ST_BIRTHTIME\n\n/* Define to 1 if `st_blksize' is a member of `struct stat'. */\n#undef HAVE_STRUCT_STAT_ST_BLKSIZE\n\n/* Define to 1 if `st_blocks' is a member of `struct stat'. */\n#undef HAVE_STRUCT_STAT_ST_BLOCKS\n\n/* Define to 1 if `st_flags' is a member of `struct stat'. */\n#undef HAVE_STRUCT_STAT_ST_FLAGS\n\n/* Define to 1 if `st_gen' is a member of `struct stat'. */\n#undef HAVE_STRUCT_STAT_ST_GEN\n\n/* Define to 1 if `st_rdev' is a member of `struct stat'. */\n#undef HAVE_STRUCT_STAT_ST_RDEV\n\n/* Define to 1 if `tm_zone' is a member of `struct tm'. */\n#undef HAVE_STRUCT_TM_TM_ZONE\n\n/* Define if you have the 'symlink' function. */\n#undef HAVE_SYMLINK\n\n/* Define to 1 if you have the `symlinkat' function. */\n#undef HAVE_SYMLINKAT\n\n/* Define to 1 if you have the `sync' function. */\n#undef HAVE_SYNC\n\n/* Define to 1 if you have the `sysconf' function. */\n#undef HAVE_SYSCONF\n\n/* Define to 1 if you have the <sysexits.h> header file. */\n#undef HAVE_SYSEXITS_H\n\n/* Define to 1 if you have the <sys/audioio.h> header file. */\n#undef HAVE_SYS_AUDIOIO_H\n\n/* Define to 1 if you have the <sys/bsdtty.h> header file. */\n#undef HAVE_SYS_BSDTTY_H\n\n/* Define to 1 if you have the <sys/devpoll.h> header file. */\n#undef HAVE_SYS_DEVPOLL_H\n\n/* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.\n   */\n#undef HAVE_SYS_DIR_H\n\n/* Define to 1 if you have the <sys/endian.h> header file. */\n#undef HAVE_SYS_ENDIAN_H\n\n/* Define to 1 if you have the <sys/epoll.h> header file. */\n#undef HAVE_SYS_EPOLL_H\n\n/* Define to 1 if you have the <sys/event.h> header file. */\n#undef HAVE_SYS_EVENT_H\n\n/* Define to 1 if you have the <sys/file.h> header file. */\n#undef HAVE_SYS_FILE_H\n\n/* Define to 1 if you have the <sys/ioctl.h> header file. */\n#undef HAVE_SYS_IOCTL_H\n\n/* Define to 1 if you have the <sys/kern_control.h> header file. */\n#undef HAVE_SYS_KERN_CONTROL_H\n\n/* Define to 1 if you have the <sys/loadavg.h> header file. */\n#undef HAVE_SYS_LOADAVG_H\n\n/* Define to 1 if you have the <sys/lock.h> header file. */\n#undef HAVE_SYS_LOCK_H\n\n/* Define to 1 if you have the <sys/memfd.h> header file. */\n#undef HAVE_SYS_MEMFD_H\n\n/* Define to 1 if you have the <sys/mkdev.h> header file. */\n#undef HAVE_SYS_MKDEV_H\n\n/* Define to 1 if you have the <sys/mman.h> header file. */\n#undef HAVE_SYS_MMAN_H\n\n/* Define to 1 if you have the <sys/modem.h> header file. */\n#undef HAVE_SYS_MODEM_H\n\n/* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.\n   */\n#undef HAVE_SYS_NDIR_H\n\n/* Define to 1 if you have the <sys/param.h> header file. */\n#undef HAVE_SYS_PARAM_H\n\n/* Define to 1 if you have the <sys/poll.h> header file. */\n#undef HAVE_SYS_POLL_H\n\n/* Define to 1 if you have the <sys/random.h> header file. */\n#undef HAVE_SYS_RANDOM_H\n\n/* Define to 1 if you have the <sys/resource.h> header file. */\n#undef HAVE_SYS_RESOURCE_H\n\n/* Define to 1 if you have the <sys/select.h> header file. */\n#undef HAVE_SYS_SELECT_H\n\n/* Define to 1 if you have the <sys/sendfile.h> header file. */\n#undef HAVE_SYS_SENDFILE_H\n\n/* Define to 1 if you have the <sys/socket.h> header file. */\n#undef HAVE_SYS_SOCKET_H\n\n/* Define to 1 if you have the <sys/statvfs.h> header file. */\n#undef HAVE_SYS_STATVFS_H\n\n/* Define to 1 if you have the <sys/stat.h> header file. */\n#undef HAVE_SYS_STAT_H\n\n/* Define to 1 if you have the <sys/syscall.h> header file. */\n#undef HAVE_SYS_SYSCALL_H\n\n/* Define to 1 if you have the <sys/sysmacros.h> header file. */\n#undef HAVE_SYS_SYSMACROS_H\n\n/* Define to 1 if you have the <sys/sys_domain.h> header file. */\n#undef HAVE_SYS_SYS_DOMAIN_H\n\n/* Define to 1 if you have the <sys/termio.h> header file. */\n#undef HAVE_SYS_TERMIO_H\n\n/* Define to 1 if you have the <sys/times.h> header file. */\n#undef HAVE_SYS_TIMES_H\n\n/* Define to 1 if you have the <sys/time.h> header file. */\n#undef HAVE_SYS_TIME_H\n\n/* Define to 1 if you have the <sys/types.h> header file. */\n#undef HAVE_SYS_TYPES_H\n\n/* Define to 1 if you have the <sys/uio.h> header file. */\n#undef HAVE_SYS_UIO_H\n\n/* Define to 1 if you have the <sys/un.h> header file. */\n#undef HAVE_SYS_UN_H\n\n/* Define to 1 if you have the <sys/utsname.h> header file. */\n#undef HAVE_SYS_UTSNAME_H\n\n/* Define to 1 if you have the <sys/wait.h> header file. */\n#undef HAVE_SYS_WAIT_H\n\n/* Define to 1 if you have the <sys/xattr.h> header file. */\n#undef HAVE_SYS_XATTR_H\n\n/* Define to 1 if you have the `tcgetpgrp' function. */\n#undef HAVE_TCGETPGRP\n\n/* Define to 1 if you have the `tcsetpgrp' function. */\n#undef HAVE_TCSETPGRP\n\n/* Define to 1 if you have the `tempnam' function. */\n#undef HAVE_TEMPNAM\n\n/* Define to 1 if you have the <termios.h> header file. */\n#undef HAVE_TERMIOS_H\n\n/* Define to 1 if you have the <term.h> header file. */\n#undef HAVE_TERM_H\n\n/* Define to 1 if you have the `tgamma' function. */\n#undef HAVE_TGAMMA\n\n/* Define to 1 if you have the `timegm' function. */\n#undef HAVE_TIMEGM\n\n/* Define to 1 if you have the `times' function. */\n#undef HAVE_TIMES\n\n/* Define to 1 if you have the `tmpfile' function. */\n#undef HAVE_TMPFILE\n\n/* Define to 1 if you have the `tmpnam' function. */\n#undef HAVE_TMPNAM\n\n/* Define to 1 if you have the `tmpnam_r' function. */\n#undef HAVE_TMPNAM_R\n\n/* Define to 1 if your `struct tm' has `tm_zone'. Deprecated, use\n   `HAVE_STRUCT_TM_TM_ZONE' instead. */\n#undef HAVE_TM_ZONE\n\n/* Define to 1 if you have the `truncate' function. */\n#undef HAVE_TRUNCATE\n\n/* Define to 1 if you don't have `tm_zone' but do have the external array\n   `tzname'. */\n#undef HAVE_TZNAME\n\n/* Define this if you have tcl and TCL_UTF_MAX==6 */\n#undef HAVE_UCS4_TCL\n\n/* Define to 1 if you have the `uname' function. */\n#undef HAVE_UNAME\n\n/* Define to 1 if you have the <unistd.h> header file. */\n#undef HAVE_UNISTD_H\n\n/* Define to 1 if you have the `unlinkat' function. */\n#undef HAVE_UNLINKAT\n\n/* Define to 1 if you have the `unsetenv' function. */\n#undef HAVE_UNSETENV\n\n/* Define if you have a useable wchar_t type defined in wchar.h; useable means\n   wchar_t must be an unsigned type with at least 16 bits. (see\n   Include/unicodeobject.h). */\n#undef HAVE_USABLE_WCHAR_T\n\n/* Define to 1 if you have the <util.h> header file. */\n#undef HAVE_UTIL_H\n\n/* Define to 1 if you have the `utimensat' function. */\n#undef HAVE_UTIMENSAT\n\n/* Define to 1 if you have the `utimes' function. */\n#undef HAVE_UTIMES\n\n/* Define to 1 if you have the <utime.h> header file. */\n#undef HAVE_UTIME_H\n\n/* Define if uuid_create() exists. */\n#undef HAVE_UUID_CREATE\n\n/* Define if uuid_enc_be() exists. */\n#undef HAVE_UUID_ENC_BE\n\n/* Define if uuid_generate_time_safe() exists. */\n#undef HAVE_UUID_GENERATE_TIME_SAFE\n\n/* Define to 1 if you have the <uuid.h> header file. */\n#undef HAVE_UUID_H\n\n/* Define to 1 if you have the <uuid/uuid.h> header file. */\n#undef HAVE_UUID_UUID_H\n\n/* Define to 1 if you have the `wait3' function. */\n#undef HAVE_WAIT3\n\n/* Define to 1 if you have the `wait4' function. */\n#undef HAVE_WAIT4\n\n/* Define to 1 if you have the `waitid' function. */\n#undef HAVE_WAITID\n\n/* Define to 1 if you have the `waitpid' function. */\n#undef HAVE_WAITPID\n\n/* Define if the compiler provides a wchar.h header file. */\n#undef HAVE_WCHAR_H\n\n/* Define to 1 if you have the `wcscoll' function. */\n#undef HAVE_WCSCOLL\n\n/* Define to 1 if you have the `wcsftime' function. */\n#undef HAVE_WCSFTIME\n\n/* Define to 1 if you have the `wcsxfrm' function. */\n#undef HAVE_WCSXFRM\n\n/* Define to 1 if you have the `wmemcmp' function. */\n#undef HAVE_WMEMCMP\n\n/* Define if tzset() actually switches the local timezone in a meaningful way.\n   */\n#undef HAVE_WORKING_TZSET\n\n/* Define to 1 if you have the `writev' function. */\n#undef HAVE_WRITEV\n\n/* Define if libssl has X509_VERIFY_PARAM_set1_host and related function */\n#undef HAVE_X509_VERIFY_PARAM_SET1_HOST\n\n/* Define if the zlib library has inflateCopy */\n#undef HAVE_ZLIB_COPY\n\n/* Define to 1 if you have the `_getpty' function. */\n#undef HAVE__GETPTY\n\n/* Define to 1 if `major', `minor', and `makedev' are declared in <mkdev.h>.\n   */\n#undef MAJOR_IN_MKDEV\n\n/* Define to 1 if `major', `minor', and `makedev' are declared in\n   <sysmacros.h>. */\n#undef MAJOR_IN_SYSMACROS\n\n/* Define if mvwdelch in curses.h is an expression. */\n#undef MVWDELCH_IS_EXPRESSION\n\n/* Define to the address where bug reports for this package should be sent. */\n#undef PACKAGE_BUGREPORT\n\n/* Define to the full name of this package. */\n#undef PACKAGE_NAME\n\n/* Define to the full name and version of this package. */\n#undef PACKAGE_STRING\n\n/* Define to the one symbol short name of this package. */\n#undef PACKAGE_TARNAME\n\n/* Define to the home page for this package. */\n#undef PACKAGE_URL\n\n/* Define to the version of this package. */\n#undef PACKAGE_VERSION\n\n/* Define if POSIX semaphores aren't enabled on your system */\n#undef POSIX_SEMAPHORES_NOT_ENABLED\n\n/* Define if pthread_key_t is compatible with int. */\n#undef PTHREAD_KEY_T_IS_COMPATIBLE_WITH_INT\n\n/* Defined if PTHREAD_SCOPE_SYSTEM supported. */\n#undef PTHREAD_SYSTEM_SCHED_SUPPORTED\n\n/* Define as the preferred size in bits of long digits */\n#undef PYLONG_BITS_IN_DIGIT\n\n/* Define if you want to coerce the C locale to a UTF-8 based locale */\n#undef PY_COERCE_C_LOCALE\n\n/* Define to printf format modifier for Py_ssize_t */\n#undef PY_FORMAT_SIZE_T\n\n/* Default cipher suites list for ssl module. 1: Python's preferred selection,\n   2: leave OpenSSL defaults untouched, 0: custom string */\n#undef PY_SSL_DEFAULT_CIPHERS\n\n/* Cipher suite string for PY_SSL_DEFAULT_CIPHERS=0 */\n#undef PY_SSL_DEFAULT_CIPHER_STRING\n\n/* Define if you want to build an interpreter with many run-time checks. */\n#undef Py_DEBUG\n\n/* Defined if Python is built as a shared library. */\n#undef Py_ENABLE_SHARED\n\n/* Define hash algorithm for str, bytes and memoryview. SipHash24: 1, FNV: 2,\n   externally defined: 0 */\n#undef Py_HASH_ALGORITHM\n\n/* Define if you want to enable tracing references for debugging purpose */\n#undef Py_TRACE_REFS\n\n/* assume C89 semantics that RETSIGTYPE is always void */\n#undef RETSIGTYPE\n\n/* Define if setpgrp() must be called as setpgrp(0, 0). */\n#undef SETPGRP_HAVE_ARG\n\n/* Define to 1 if you must link with -lrt for shm_open(). */\n#undef SHM_NEEDS_LIBRT\n\n/* Define if i>>j for signed int i does not extend the sign bit when i < 0 */\n#undef SIGNED_RIGHT_SHIFT_ZERO_FILLS\n\n/* The size of `double', as computed by sizeof. */\n#undef SIZEOF_DOUBLE\n\n/* The size of `float', as computed by sizeof. */\n#undef SIZEOF_FLOAT\n\n/* The size of `fpos_t', as computed by sizeof. */\n#undef SIZEOF_FPOS_T\n\n/* The size of `int', as computed by sizeof. */\n#undef SIZEOF_INT\n\n/* The size of `long', as computed by sizeof. */\n#undef SIZEOF_LONG\n\n/* The size of `long double', as computed by sizeof. */\n#undef SIZEOF_LONG_DOUBLE\n\n/* The size of `long long', as computed by sizeof. */\n#undef SIZEOF_LONG_LONG\n\n/* The size of `off_t', as computed by sizeof. */\n#undef SIZEOF_OFF_T\n\n/* The size of `pid_t', as computed by sizeof. */\n#undef SIZEOF_PID_T\n\n/* The size of `pthread_key_t', as computed by sizeof. */\n#undef SIZEOF_PTHREAD_KEY_T\n\n/* The size of `pthread_t', as computed by sizeof. */\n#undef SIZEOF_PTHREAD_T\n\n/* The size of `short', as computed by sizeof. */\n#undef SIZEOF_SHORT\n\n/* The size of `size_t', as computed by sizeof. */\n#undef SIZEOF_SIZE_T\n\n/* The size of `time_t', as computed by sizeof. */\n#undef SIZEOF_TIME_T\n\n/* The size of `uintptr_t', as computed by sizeof. */\n#undef SIZEOF_UINTPTR_T\n\n/* The size of `void *', as computed by sizeof. */\n#undef SIZEOF_VOID_P\n\n/* The size of `wchar_t', as computed by sizeof. */\n#undef SIZEOF_WCHAR_T\n\n/* The size of `_Bool', as computed by sizeof. */\n#undef SIZEOF__BOOL\n\n/* Define to 1 if you have the ANSI C header files. */\n#undef STDC_HEADERS\n\n/* Define if you can safely include both <sys/select.h> and <sys/time.h>\n   (which you can't on SCO ODT 3.0). */\n#undef SYS_SELECT_WITH_SYS_TIME\n\n/* Library needed by timemodule.c: librt may be needed for clock_gettime() */\n#undef TIMEMODULE_LIB\n\n/* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */\n#undef TIME_WITH_SYS_TIME\n\n/* Define to 1 if your <sys/time.h> declares `struct tm'. */\n#undef TM_IN_SYS_TIME\n\n/* Define if you want to use computed gotos in ceval.c. */\n#undef USE_COMPUTED_GOTOS\n\n/* Enable extensions on AIX 3, Interix.  */\n#ifndef _ALL_SOURCE\n# undef _ALL_SOURCE\n#endif\n/* Enable GNU extensions on systems that have them.  */\n#ifndef _GNU_SOURCE\n# undef _GNU_SOURCE\n#endif\n/* Enable threading extensions on Solaris.  */\n#ifndef _POSIX_PTHREAD_SEMANTICS\n# undef _POSIX_PTHREAD_SEMANTICS\n#endif\n/* Enable extensions on HP NonStop.  */\n#ifndef _TANDEM_SOURCE\n# undef _TANDEM_SOURCE\n#endif\n/* Enable general extensions on Solaris.  */\n#ifndef __EXTENSIONS__\n# undef __EXTENSIONS__\n#endif\n\n\n/* Define if WINDOW in curses.h offers a field _flags. */\n#undef WINDOW_HAS_FLAGS\n\n/* Define if you want build the _decimal module using a coroutine-local rather\n   than a thread-local context */\n#undef WITH_DECIMAL_CONTEXTVAR\n\n/* Define if you want documentation strings in extension modules */\n#undef WITH_DOC_STRINGS\n\n/* Define if you want to compile in DTrace support */\n#undef WITH_DTRACE\n\n/* Define if you want to use the new-style (Openstep, Rhapsody, MacOS) dynamic\n   linker (dyld) instead of the old-style (NextStep) dynamic linker (rld).\n   Dyld is necessary to support frameworks. */\n#undef WITH_DYLD\n\n/* Define to 1 if libintl is needed for locale functions. */\n#undef WITH_LIBINTL\n\n/* Define if you want to produce an OpenStep/Rhapsody framework (shared\n   library plus accessory files). */\n#undef WITH_NEXT_FRAMEWORK\n\n/* Define if you want to compile in Python-specific mallocs */\n#undef WITH_PYMALLOC\n\n/* Define if you want pymalloc to be disabled when running under valgrind */\n#undef WITH_VALGRIND\n\n/* Define WORDS_BIGENDIAN to 1 if your processor stores words with the most\n   significant byte first (like Motorola and SPARC, unlike Intel). */\n#if defined AC_APPLE_UNIVERSAL_BUILD\n# if defined __BIG_ENDIAN__\n#  define WORDS_BIGENDIAN 1\n# endif\n#else\n# ifndef WORDS_BIGENDIAN\n#  undef WORDS_BIGENDIAN\n# endif\n#endif\n\n/* Define if arithmetic is subject to x87-style double rounding issue */\n#undef X87_DOUBLE_ROUNDING\n\n/* Define on OpenBSD to activate all library features */\n#undef _BSD_SOURCE\n\n/* Define on Darwin to activate all library features */\n#undef _DARWIN_C_SOURCE\n\n/* This must be set to 64 on some systems to enable large file support. */\n#undef _FILE_OFFSET_BITS\n\n/* Define on Linux to activate all library features */\n#undef _GNU_SOURCE\n\n/* Define to include mbstate_t for mbrtowc */\n#undef _INCLUDE__STDC_A1_SOURCE\n\n/* This must be defined on some systems to enable large file support. */\n#undef _LARGEFILE_SOURCE\n\n/* This must be defined on AIX systems to enable large file support. */\n#undef _LARGE_FILES\n\n/* Define to 1 if on MINIX. */\n#undef _MINIX\n\n/* Define on NetBSD to activate all library features */\n#undef _NETBSD_SOURCE\n\n/* Define to 2 if the system does not provide POSIX.1 features except with\n   this defined. */\n#undef _POSIX_1_SOURCE\n\n/* Define to activate features from IEEE Stds 1003.1-2008 */\n#undef _POSIX_C_SOURCE\n\n/* Define to 1 if you need to in order for `stat' and other things to work. */\n#undef _POSIX_SOURCE\n\n/* Define if you have POSIX threads, and your system does not define that. */\n#undef _POSIX_THREADS\n\n/* framework name */\n#undef _PYTHONFRAMEWORK\n\n/* Define to force use of thread-safe errno, h_errno, and other functions */\n#undef _REENTRANT\n\n/* Define to the level of X/Open that your system supports */\n#undef _XOPEN_SOURCE\n\n/* Define to activate Unix95-and-earlier features */\n#undef _XOPEN_SOURCE_EXTENDED\n\n/* Define on FreeBSD to activate all library features */\n#undef __BSD_VISIBLE\n\n/* Define to 1 if type `char' is unsigned and you are not using gcc.  */\n#ifndef __CHAR_UNSIGNED__\n# undef __CHAR_UNSIGNED__\n#endif\n\n/* Define to 'long' if <time.h> doesn't define. */\n#undef clock_t\n\n/* Define to empty if `const' does not conform to ANSI C. */\n#undef const\n\n/* Define to `int' if <sys/types.h> doesn't define. */\n#undef gid_t\n\n/* Define to `int' if <sys/types.h> does not define. */\n#undef mode_t\n\n/* Define to `long int' if <sys/types.h> does not define. */\n#undef off_t\n\n/* Define to `int' if <sys/types.h> does not define. */\n#undef pid_t\n\n/* Define to empty if the keyword does not work. */\n#undef signed\n\n/* Define to `unsigned int' if <sys/types.h> does not define. */\n#undef size_t\n\n/* Define to `int' if <sys/socket.h> does not define. */\n#undef socklen_t\n\n/* Define to `int' if <sys/types.h> doesn't define. */\n#undef uid_t\n\n\n/* Define the macros needed if on a UnixWare 7.x system. */\n#if defined(__USLC__) && defined(__SCO_VERSION__)\n#define STRICT_SYSV_CURSES /* Don't use ncurses extensions */\n#endif\n\n#endif /*Py_PYCONFIG_H*/\n\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/ctypes/_aix.py": "\"\"\"\nLib/ctypes.util.find_library() support for AIX\nSimilar approach as done for Darwin support by using separate files\nbut unlike Darwin - no extension such as ctypes.macholib.*\n\ndlopen() is an interface to AIX initAndLoad() - primary documentation at:\nhttps://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.basetrf1/dlopen.htm\nhttps://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.basetrf1/load.htm\n\nAIX supports two styles for dlopen(): svr4 (System V Release 4) which is common on posix\nplatforms, but also a BSD style - aka SVR3.\n\nFrom AIX 5.3 Difference Addendum (December 2004)\n2.9 SVR4 linking affinity\nNowadays, there are two major object file formats used by the operating systems:\nXCOFF: The COFF enhanced by IBM and others. The original COFF (Common\nObject File Format) was the base of SVR3 and BSD 4.2 systems.\nELF:   Executable and Linking Format that was developed by AT&T and is a\nbase for SVR4 UNIX.\n\nWhile the shared library content is identical on AIX - one is located as a filepath name\n(svr4 style) and the other is located as a member of an archive (and the archive\nis located as a filepath name).\n\nThe key difference arises when supporting multiple abi formats (i.e., 32 and 64 bit).\nFor svr4 either only one ABI is supported, or there are two directories, or there\nare different file names. The most common solution for multiple ABI is multiple\ndirectories.\n\nFor the XCOFF (aka AIX) style - one directory (one archive file) is sufficient\nas multiple shared libraries can be in the archive - even sharing the same name.\nIn documentation the archive is also referred to as the \"base\" and the shared\nlibrary object is referred to as the \"member\".\n\nFor dlopen() on AIX (read initAndLoad()) the calls are similar.\nDefault activity occurs when no path information is provided. When path\ninformation is provided dlopen() does not search any other directories.\n\nFor SVR4 - the shared library name is the name of the file expected: libFOO.so\nFor AIX - the shared library is expressed as base(member). The search is for the\nbase (e.g., libFOO.a) and once the base is found the shared library - identified by\nmember (e.g., libFOO.so, or shr.o) is located and loaded.\n\nThe mode bit RTLD_MEMBER tells initAndLoad() that it needs to use the AIX (SVR3)\nnaming style.\n\"\"\"\n__author__ = \"Michael Felt <aixtools@felt.demon.nl>\"\n\nimport re\nfrom os import environ, path\nfrom sys import executable\nfrom ctypes import c_void_p, sizeof\nfrom subprocess import Popen, PIPE, DEVNULL\n\n# Executable bit size - 32 or 64\n# Used to filter the search in an archive by size, e.g., -X64\nAIX_ABI = sizeof(c_void_p) * 8\n\n\nfrom sys import maxsize\ndef _last_version(libnames, sep):\n    def _num_version(libname):\n        # \"libxyz.so.MAJOR.MINOR\" => [MAJOR, MINOR]\n        parts = libname.split(sep)\n        nums = []\n        try:\n            while parts:\n                nums.insert(0, int(parts.pop()))\n        except ValueError:\n            pass\n        return nums or [maxsize]\n    return max(reversed(libnames), key=_num_version)\n\ndef get_ld_header(p):\n    # \"nested-function, but placed at module level\n    ld_header = None\n    for line in p.stdout:\n        if line.startswith(('/', './', '../')):\n            ld_header = line\n        elif \"INDEX\" in line:\n            return ld_header.rstrip('\\n')\n    return None\n\ndef get_ld_header_info(p):\n    # \"nested-function, but placed at module level\n    # as an ld_header was found, return known paths, archives and members\n    # these lines start with a digit\n    info = []\n    for line in p.stdout:\n        if re.match(\"[0-9]\", line):\n            info.append(line)\n        else:\n            # blank line (separator), consume line and end for loop\n            break\n    return info\n\ndef get_ld_headers(file):\n    \"\"\"\n    Parse the header of the loader section of executable and archives\n    This function calls /usr/bin/dump -H as a subprocess\n    and returns a list of (ld_header, ld_header_info) tuples.\n    \"\"\"\n    # get_ld_headers parsing:\n    # 1. Find a line that starts with /, ./, or ../ - set as ld_header\n    # 2. If \"INDEX\" in occurs in a following line - return ld_header\n    # 3. get info (lines starting with [0-9])\n    ldr_headers = []\n    p = Popen([\"/usr/bin/dump\", f\"-X{AIX_ABI}\", \"-H\", file],\n        universal_newlines=True, stdout=PIPE, stderr=DEVNULL)\n    # be sure to read to the end-of-file - getting all entries\n    while True:\n        ld_header = get_ld_header(p)\n        if ld_header:\n            ldr_headers.append((ld_header, get_ld_header_info(p)))\n        else:\n            break\n    p.stdout.close()\n    p.wait()\n    return ldr_headers\n\ndef get_shared(ld_headers):\n    \"\"\"\n    extract the shareable objects from ld_headers\n    character \"[\" is used to strip off the path information.\n    Note: the \"[\" and \"]\" characters that are part of dump -H output\n    are not removed here.\n    \"\"\"\n    shared = []\n    for (line, _) in ld_headers:\n        # potential member lines contain \"[\"\n        # otherwise, no processing needed\n        if \"[\" in line:\n            # Strip off trailing colon (:)\n            shared.append(line[line.index(\"[\"):-1])\n    return shared\n\ndef get_one_match(expr, lines):\n    \"\"\"\n    Must be only one match, otherwise result is None.\n    When there is a match, strip leading \"[\" and trailing \"]\"\n    \"\"\"\n    # member names in the ld_headers output are between square brackets\n    expr = rf'\\[({expr})\\]'\n    matches = list(filter(None, (re.search(expr, line) for line in lines)))\n    if len(matches) == 1:\n        return matches[0].group(1)\n    else:\n        return None\n\n# additional processing to deal with AIX legacy names for 64-bit members\ndef get_legacy(members):\n    \"\"\"\n    This routine provides historical aka legacy naming schemes started\n    in AIX4 shared library support for library members names.\n    e.g., in /usr/lib/libc.a the member name shr.o for 32-bit binary and\n    shr_64.o for 64-bit binary.\n    \"\"\"\n    if AIX_ABI == 64:\n        # AIX 64-bit member is one of shr64.o, shr_64.o, or shr4_64.o\n        expr = r'shr4?_?64\\.o'\n        member = get_one_match(expr, members)\n        if member:\n            return member\n    else:\n        # 32-bit legacy names - both shr.o and shr4.o exist.\n        # shr.o is the preffered name so we look for shr.o first\n        #  i.e., shr4.o is returned only when shr.o does not exist\n        for name in ['shr.o', 'shr4.o']:\n            member = get_one_match(re.escape(name), members)\n            if member:\n                return member\n    return None\n\ndef get_version(name, members):\n    \"\"\"\n    Sort list of members and return highest numbered version - if it exists.\n    This function is called when an unversioned libFOO.a(libFOO.so) has\n    not been found.\n\n    Versioning for the member name is expected to follow\n    GNU LIBTOOL conventions: the highest version (x, then X.y, then X.Y.z)\n     * find [libFoo.so.X]\n     * find [libFoo.so.X.Y]\n     * find [libFoo.so.X.Y.Z]\n\n    Before the GNU convention became the standard scheme regardless of\n    binary size AIX packagers used GNU convention \"as-is\" for 32-bit\n    archive members but used an \"distinguishing\" name for 64-bit members.\n    This scheme inserted either 64 or _64 between libFOO and .so\n    - generally libFOO_64.so, but occasionally libFOO64.so\n    \"\"\"\n    # the expression ending for versions must start as\n    # '.so.[0-9]', i.e., *.so.[at least one digit]\n    # while multiple, more specific expressions could be specified\n    # to search for .so.X, .so.X.Y and .so.X.Y.Z\n    # after the first required 'dot' digit\n    # any combination of additional 'dot' digits pairs are accepted\n    # anything more than libFOO.so.digits.digits.digits\n    # should be seen as a member name outside normal expectations\n    exprs = [rf'lib{name}\\.so\\.[0-9]+[0-9.]*',\n        rf'lib{name}_?64\\.so\\.[0-9]+[0-9.]*']\n    for expr in exprs:\n        versions = []\n        for line in members:\n            m = re.search(expr, line)\n            if m:\n                versions.append(m.group(0))\n        if versions:\n            return _last_version(versions, '.')\n    return None\n\ndef get_member(name, members):\n    \"\"\"\n    Return an archive member matching the request in name.\n    Name is the library name without any prefix like lib, suffix like .so,\n    or version number.\n    Given a list of members find and return the most appropriate result\n    Priority is given to generic libXXX.so, then a versioned libXXX.so.a.b.c\n    and finally, legacy AIX naming scheme.\n    \"\"\"\n    # look first for a generic match - prepend lib and append .so\n    expr = rf'lib{name}\\.so'\n    member = get_one_match(expr, members)\n    if member:\n        return member\n    elif AIX_ABI == 64:\n        expr = rf'lib{name}64\\.so'\n        member = get_one_match(expr, members)\n    if member:\n        return member\n    # since an exact match with .so as suffix was not found\n    # look for a versioned name\n    # If a versioned name is not found, look for AIX legacy member name\n    member = get_version(name, members)\n    if member:\n        return member\n    else:\n        return get_legacy(members)\n\ndef get_libpaths():\n    \"\"\"\n    On AIX, the buildtime searchpath is stored in the executable.\n    as \"loader header information\".\n    The command /usr/bin/dump -H extracts this info.\n    Prefix searched libraries with LD_LIBRARY_PATH (preferred),\n    or LIBPATH if defined. These paths are appended to the paths\n    to libraries the python executable is linked with.\n    This mimics AIX dlopen() behavior.\n    \"\"\"\n    libpaths = environ.get(\"LD_LIBRARY_PATH\")\n    if libpaths is None:\n        libpaths = environ.get(\"LIBPATH\")\n    if libpaths is None:\n        libpaths = []\n    else:\n        libpaths = libpaths.split(\":\")\n    objects = get_ld_headers(executable)\n    for (_, lines) in objects:\n        for line in lines:\n            # the second (optional) argument is PATH if it includes a /\n            path = line.split()[1]\n            if \"/\" in path:\n                libpaths.extend(path.split(\":\"))\n    return libpaths\n\ndef find_shared(paths, name):\n    \"\"\"\n    paths is a list of directories to search for an archive.\n    name is the abbreviated name given to find_library().\n    Process: search \"paths\" for archive, and if an archive is found\n    return the result of get_member().\n    If an archive is not found then return None\n    \"\"\"\n    for dir in paths:\n        # /lib is a symbolic link to /usr/lib, skip it\n        if dir == \"/lib\":\n            continue\n        # \"lib\" is prefixed to emulate compiler name resolution,\n        # e.g., -lc to libc\n        base = f'lib{name}.a'\n        archive = path.join(dir, base)\n        if path.exists(archive):\n            members = get_shared(get_ld_headers(archive))\n            member = get_member(re.escape(name), members)\n            if member != None:\n                return (base, member)\n            else:\n                return (None, None)\n    return (None, None)\n\ndef find_library(name):\n    \"\"\"AIX implementation of ctypes.util.find_library()\n    Find an archive member that will dlopen(). If not available,\n    also search for a file (or link) with a .so suffix.\n\n    AIX supports two types of schemes that can be used with dlopen().\n    The so-called SystemV Release4 (svr4) format is commonly suffixed\n    with .so while the (default) AIX scheme has the library (archive)\n    ending with the suffix .a\n    As an archive has multiple members (e.g., 32-bit and 64-bit) in one file\n    the argument passed to dlopen must include both the library and\n    the member names in a single string.\n\n    find_library() looks first for an archive (.a) with a suitable member.\n    If no archive+member pair is found, look for a .so file.\n    \"\"\"\n\n    libpaths = get_libpaths()\n    (base, member) = find_shared(libpaths, name)\n    if base != None:\n        return f\"{base}({member})\"\n\n    # To get here, a member in an archive has not been found\n    # In other words, either:\n    # a) a .a file was not found\n    # b) a .a file did not have a suitable member\n    # So, look for a .so file\n    # Check libpaths for .so file\n    # Note, the installation must prepare a link from a .so\n    # to a versioned file\n    # This is common practice by GNU libtool on other platforms\n    soname = f\"lib{name}.so\"\n    for dir in libpaths:\n        # /lib is a symbolic link to /usr/lib, skip it\n        if dir == \"/lib\":\n            continue\n        shlib = path.join(dir, soname)\n        if path.exists(shlib):\n            return soname\n    # if we are here, we have not found anything plausible\n    return None\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/ctypes/__init__.py": "\"\"\"create and manipulate C data types in Python\"\"\"\n\nimport os as _os, sys as _sys\n\n__version__ = \"1.1.0\"\n\nfrom _ctypes import Union, Structure, Array\nfrom _ctypes import _Pointer\nfrom _ctypes import CFuncPtr as _CFuncPtr\nfrom _ctypes import __version__ as _ctypes_version\nfrom _ctypes import RTLD_LOCAL, RTLD_GLOBAL\nfrom _ctypes import ArgumentError\n\nfrom struct import calcsize as _calcsize\n\nif __version__ != _ctypes_version:\n    raise Exception(\"Version number mismatch\", __version__, _ctypes_version)\n\nif _os.name == \"nt\":\n    from _ctypes import FormatError\n\nDEFAULT_MODE = RTLD_LOCAL\nif _os.name == \"posix\" and _sys.platform == \"darwin\":\n    # On OS X 10.3, we use RTLD_GLOBAL as default mode\n    # because RTLD_LOCAL does not work at least on some\n    # libraries.  OS X 10.3 is Darwin 7, so we check for\n    # that.\n\n    if int(_os.uname().release.split('.')[0]) < 8:\n        DEFAULT_MODE = RTLD_GLOBAL\n\nfrom _ctypes import FUNCFLAG_CDECL as _FUNCFLAG_CDECL, \\\n     FUNCFLAG_PYTHONAPI as _FUNCFLAG_PYTHONAPI, \\\n     FUNCFLAG_USE_ERRNO as _FUNCFLAG_USE_ERRNO, \\\n     FUNCFLAG_USE_LASTERROR as _FUNCFLAG_USE_LASTERROR\n\n# WINOLEAPI -> HRESULT\n# WINOLEAPI_(type)\n#\n# STDMETHODCALLTYPE\n#\n# STDMETHOD(name)\n# STDMETHOD_(type, name)\n#\n# STDAPICALLTYPE\n\ndef create_string_buffer(init, size=None):\n    \"\"\"create_string_buffer(aBytes) -> character array\n    create_string_buffer(anInteger) -> character array\n    create_string_buffer(aBytes, anInteger) -> character array\n    \"\"\"\n    if isinstance(init, bytes):\n        if size is None:\n            size = len(init)+1\n        _sys.audit(\"ctypes.create_string_buffer\", init, size)\n        buftype = c_char * size\n        buf = buftype()\n        buf.value = init\n        return buf\n    elif isinstance(init, int):\n        _sys.audit(\"ctypes.create_string_buffer\", None, init)\n        buftype = c_char * init\n        buf = buftype()\n        return buf\n    raise TypeError(init)\n\ndef c_buffer(init, size=None):\n##    \"deprecated, use create_string_buffer instead\"\n##    import warnings\n##    warnings.warn(\"c_buffer is deprecated, use create_string_buffer instead\",\n##                  DeprecationWarning, stacklevel=2)\n    return create_string_buffer(init, size)\n\n_c_functype_cache = {}\ndef CFUNCTYPE(restype, *argtypes, **kw):\n    \"\"\"CFUNCTYPE(restype, *argtypes,\n                 use_errno=False, use_last_error=False) -> function prototype.\n\n    restype: the result type\n    argtypes: a sequence specifying the argument types\n\n    The function prototype can be called in different ways to create a\n    callable object:\n\n    prototype(integer address) -> foreign function\n    prototype(callable) -> create and return a C callable function from callable\n    prototype(integer index, method name[, paramflags]) -> foreign function calling a COM method\n    prototype((ordinal number, dll object)[, paramflags]) -> foreign function exported by ordinal\n    prototype((function name, dll object)[, paramflags]) -> foreign function exported by name\n    \"\"\"\n    flags = _FUNCFLAG_CDECL\n    if kw.pop(\"use_errno\", False):\n        flags |= _FUNCFLAG_USE_ERRNO\n    if kw.pop(\"use_last_error\", False):\n        flags |= _FUNCFLAG_USE_LASTERROR\n    if kw:\n        raise ValueError(\"unexpected keyword argument(s) %s\" % kw.keys())\n    try:\n        return _c_functype_cache[(restype, argtypes, flags)]\n    except KeyError:\n        class CFunctionType(_CFuncPtr):\n            _argtypes_ = argtypes\n            _restype_ = restype\n            _flags_ = flags\n        _c_functype_cache[(restype, argtypes, flags)] = CFunctionType\n        return CFunctionType\n\nif _os.name == \"nt\":\n    from _ctypes import LoadLibrary as _dlopen\n    from _ctypes import FUNCFLAG_STDCALL as _FUNCFLAG_STDCALL\n\n    _win_functype_cache = {}\n    def WINFUNCTYPE(restype, *argtypes, **kw):\n        # docstring set later (very similar to CFUNCTYPE.__doc__)\n        flags = _FUNCFLAG_STDCALL\n        if kw.pop(\"use_errno\", False):\n            flags |= _FUNCFLAG_USE_ERRNO\n        if kw.pop(\"use_last_error\", False):\n            flags |= _FUNCFLAG_USE_LASTERROR\n        if kw:\n            raise ValueError(\"unexpected keyword argument(s) %s\" % kw.keys())\n        try:\n            return _win_functype_cache[(restype, argtypes, flags)]\n        except KeyError:\n            class WinFunctionType(_CFuncPtr):\n                _argtypes_ = argtypes\n                _restype_ = restype\n                _flags_ = flags\n            _win_functype_cache[(restype, argtypes, flags)] = WinFunctionType\n            return WinFunctionType\n    if WINFUNCTYPE.__doc__:\n        WINFUNCTYPE.__doc__ = CFUNCTYPE.__doc__.replace(\"CFUNCTYPE\", \"WINFUNCTYPE\")\n\nelif _os.name == \"posix\":\n    from _ctypes import dlopen as _dlopen\n\nfrom _ctypes import sizeof, byref, addressof, alignment, resize\nfrom _ctypes import get_errno, set_errno\nfrom _ctypes import _SimpleCData\n\ndef _check_size(typ, typecode=None):\n    # Check if sizeof(ctypes_type) against struct.calcsize.  This\n    # should protect somewhat against a misconfigured libffi.\n    from struct import calcsize\n    if typecode is None:\n        # Most _type_ codes are the same as used in struct\n        typecode = typ._type_\n    actual, required = sizeof(typ), calcsize(typecode)\n    if actual != required:\n        raise SystemError(\"sizeof(%s) wrong: %d instead of %d\" % \\\n                          (typ, actual, required))\n\nclass py_object(_SimpleCData):\n    _type_ = \"O\"\n    def __repr__(self):\n        try:\n            return super().__repr__()\n        except ValueError:\n            return \"%s(<NULL>)\" % type(self).__name__\n_check_size(py_object, \"P\")\n\nclass c_short(_SimpleCData):\n    _type_ = \"h\"\n_check_size(c_short)\n\nclass c_ushort(_SimpleCData):\n    _type_ = \"H\"\n_check_size(c_ushort)\n\nclass c_long(_SimpleCData):\n    _type_ = \"l\"\n_check_size(c_long)\n\nclass c_ulong(_SimpleCData):\n    _type_ = \"L\"\n_check_size(c_ulong)\n\nif _calcsize(\"i\") == _calcsize(\"l\"):\n    # if int and long have the same size, make c_int an alias for c_long\n    c_int = c_long\n    c_uint = c_ulong\nelse:\n    class c_int(_SimpleCData):\n        _type_ = \"i\"\n    _check_size(c_int)\n\n    class c_uint(_SimpleCData):\n        _type_ = \"I\"\n    _check_size(c_uint)\n\nclass c_float(_SimpleCData):\n    _type_ = \"f\"\n_check_size(c_float)\n\nclass c_double(_SimpleCData):\n    _type_ = \"d\"\n_check_size(c_double)\n\nclass c_longdouble(_SimpleCData):\n    _type_ = \"g\"\nif sizeof(c_longdouble) == sizeof(c_double):\n    c_longdouble = c_double\n\nif _calcsize(\"l\") == _calcsize(\"q\"):\n    # if long and long long have the same size, make c_longlong an alias for c_long\n    c_longlong = c_long\n    c_ulonglong = c_ulong\nelse:\n    class c_longlong(_SimpleCData):\n        _type_ = \"q\"\n    _check_size(c_longlong)\n\n    class c_ulonglong(_SimpleCData):\n        _type_ = \"Q\"\n    ##    def from_param(cls, val):\n    ##        return ('d', float(val), val)\n    ##    from_param = classmethod(from_param)\n    _check_size(c_ulonglong)\n\nclass c_ubyte(_SimpleCData):\n    _type_ = \"B\"\nc_ubyte.__ctype_le__ = c_ubyte.__ctype_be__ = c_ubyte\n# backward compatibility:\n##c_uchar = c_ubyte\n_check_size(c_ubyte)\n\nclass c_byte(_SimpleCData):\n    _type_ = \"b\"\nc_byte.__ctype_le__ = c_byte.__ctype_be__ = c_byte\n_check_size(c_byte)\n\nclass c_char(_SimpleCData):\n    _type_ = \"c\"\nc_char.__ctype_le__ = c_char.__ctype_be__ = c_char\n_check_size(c_char)\n\nclass c_char_p(_SimpleCData):\n    _type_ = \"z\"\n    def __repr__(self):\n        return \"%s(%s)\" % (self.__class__.__name__, c_void_p.from_buffer(self).value)\n_check_size(c_char_p, \"P\")\n\nclass c_void_p(_SimpleCData):\n    _type_ = \"P\"\nc_voidp = c_void_p # backwards compatibility (to a bug)\n_check_size(c_void_p)\n\nclass c_bool(_SimpleCData):\n    _type_ = \"?\"\n\nfrom _ctypes import POINTER, pointer, _pointer_type_cache\n\nclass c_wchar_p(_SimpleCData):\n    _type_ = \"Z\"\n    def __repr__(self):\n        return \"%s(%s)\" % (self.__class__.__name__, c_void_p.from_buffer(self).value)\n\nclass c_wchar(_SimpleCData):\n    _type_ = \"u\"\n\ndef _reset_cache():\n    _pointer_type_cache.clear()\n    _c_functype_cache.clear()\n    if _os.name == \"nt\":\n        _win_functype_cache.clear()\n    # _SimpleCData.c_wchar_p_from_param\n    POINTER(c_wchar).from_param = c_wchar_p.from_param\n    # _SimpleCData.c_char_p_from_param\n    POINTER(c_char).from_param = c_char_p.from_param\n    _pointer_type_cache[None] = c_void_p\n\ndef create_unicode_buffer(init, size=None):\n    \"\"\"create_unicode_buffer(aString) -> character array\n    create_unicode_buffer(anInteger) -> character array\n    create_unicode_buffer(aString, anInteger) -> character array\n    \"\"\"\n    if isinstance(init, str):\n        if size is None:\n            if sizeof(c_wchar) == 2:\n                # UTF-16 requires a surrogate pair (2 wchar_t) for non-BMP\n                # characters (outside [U+0000; U+FFFF] range). +1 for trailing\n                # NUL character.\n                size = sum(2 if ord(c) > 0xFFFF else 1 for c in init) + 1\n            else:\n                # 32-bit wchar_t (1 wchar_t per Unicode character). +1 for\n                # trailing NUL character.\n                size = len(init) + 1\n        _sys.audit(\"ctypes.create_unicode_buffer\", init, size)\n        buftype = c_wchar * size\n        buf = buftype()\n        buf.value = init\n        return buf\n    elif isinstance(init, int):\n        _sys.audit(\"ctypes.create_unicode_buffer\", None, init)\n        buftype = c_wchar * init\n        buf = buftype()\n        return buf\n    raise TypeError(init)\n\n\n# XXX Deprecated\ndef SetPointerType(pointer, cls):\n    if _pointer_type_cache.get(cls, None) is not None:\n        raise RuntimeError(\"This type already exists in the cache\")\n    if id(pointer) not in _pointer_type_cache:\n        raise RuntimeError(\"What's this???\")\n    pointer.set_type(cls)\n    _pointer_type_cache[cls] = pointer\n    del _pointer_type_cache[id(pointer)]\n\n# XXX Deprecated\ndef ARRAY(typ, len):\n    return typ * len\n\n################################################################\n\n\nclass CDLL(object):\n    \"\"\"An instance of this class represents a loaded dll/shared\n    library, exporting functions using the standard C calling\n    convention (named 'cdecl' on Windows).\n\n    The exported functions can be accessed as attributes, or by\n    indexing with the function name.  Examples:\n\n    <obj>.qsort -> callable object\n    <obj>['qsort'] -> callable object\n\n    Calling the functions releases the Python GIL during the call and\n    reacquires it afterwards.\n    \"\"\"\n    _func_flags_ = _FUNCFLAG_CDECL\n    _func_restype_ = c_int\n    # default values for repr\n    _name = '<uninitialized>'\n    _handle = 0\n    _FuncPtr = None\n\n    def __init__(self, name, mode=DEFAULT_MODE, handle=None,\n                 use_errno=False,\n                 use_last_error=False,\n                 winmode=None):\n        self._name = name\n        flags = self._func_flags_\n        if use_errno:\n            flags |= _FUNCFLAG_USE_ERRNO\n        if use_last_error:\n            flags |= _FUNCFLAG_USE_LASTERROR\n        if _sys.platform.startswith(\"aix\"):\n            \"\"\"When the name contains \".a(\" and ends with \")\",\n               e.g., \"libFOO.a(libFOO.so)\" - this is taken to be an\n               archive(member) syntax for dlopen(), and the mode is adjusted.\n               Otherwise, name is presented to dlopen() as a file argument.\n            \"\"\"\n            if name and name.endswith(\")\") and \".a(\" in name:\n                mode |= ( _os.RTLD_MEMBER | _os.RTLD_NOW )\n        if _os.name == \"nt\":\n            if winmode is not None:\n                mode = winmode\n            else:\n                import nt\n                mode = nt._LOAD_LIBRARY_SEARCH_DEFAULT_DIRS\n                if '/' in name or '\\\\' in name:\n                    self._name = nt._getfullpathname(self._name)\n                    mode |= nt._LOAD_LIBRARY_SEARCH_DLL_LOAD_DIR\n\n        class _FuncPtr(_CFuncPtr):\n            _flags_ = flags\n            _restype_ = self._func_restype_\n        self._FuncPtr = _FuncPtr\n\n        if handle is None:\n            self._handle = _dlopen(self._name, mode)\n        else:\n            self._handle = handle\n\n    def __repr__(self):\n        return \"<%s '%s', handle %x at %#x>\" % \\\n               (self.__class__.__name__, self._name,\n                (self._handle & (_sys.maxsize*2 + 1)),\n                id(self) & (_sys.maxsize*2 + 1))\n\n    def __getattr__(self, name):\n        if name.startswith('__') and name.endswith('__'):\n            raise AttributeError(name)\n        func = self.__getitem__(name)\n        setattr(self, name, func)\n        return func\n\n    def __getitem__(self, name_or_ordinal):\n        func = self._FuncPtr((name_or_ordinal, self))\n        if not isinstance(name_or_ordinal, int):\n            func.__name__ = name_or_ordinal\n        return func\n\nclass PyDLL(CDLL):\n    \"\"\"This class represents the Python library itself.  It allows\n    accessing Python API functions.  The GIL is not released, and\n    Python exceptions are handled correctly.\n    \"\"\"\n    _func_flags_ = _FUNCFLAG_CDECL | _FUNCFLAG_PYTHONAPI\n\nif _os.name == \"nt\":\n\n    class WinDLL(CDLL):\n        \"\"\"This class represents a dll exporting functions using the\n        Windows stdcall calling convention.\n        \"\"\"\n        _func_flags_ = _FUNCFLAG_STDCALL\n\n    # XXX Hm, what about HRESULT as normal parameter?\n    # Mustn't it derive from c_long then?\n    from _ctypes import _check_HRESULT, _SimpleCData\n    class HRESULT(_SimpleCData):\n        _type_ = \"l\"\n        # _check_retval_ is called with the function's result when it\n        # is used as restype.  It checks for the FAILED bit, and\n        # raises an OSError if it is set.\n        #\n        # The _check_retval_ method is implemented in C, so that the\n        # method definition itself is not included in the traceback\n        # when it raises an error - that is what we want (and Python\n        # doesn't have a way to raise an exception in the caller's\n        # frame).\n        _check_retval_ = _check_HRESULT\n\n    class OleDLL(CDLL):\n        \"\"\"This class represents a dll exporting functions using the\n        Windows stdcall calling convention, and returning HRESULT.\n        HRESULT error values are automatically raised as OSError\n        exceptions.\n        \"\"\"\n        _func_flags_ = _FUNCFLAG_STDCALL\n        _func_restype_ = HRESULT\n\nclass LibraryLoader(object):\n    def __init__(self, dlltype):\n        self._dlltype = dlltype\n\n    def __getattr__(self, name):\n        if name[0] == '_':\n            raise AttributeError(name)\n        dll = self._dlltype(name)\n        setattr(self, name, dll)\n        return dll\n\n    def __getitem__(self, name):\n        return getattr(self, name)\n\n    def LoadLibrary(self, name):\n        return self._dlltype(name)\n\ncdll = LibraryLoader(CDLL)\npydll = LibraryLoader(PyDLL)\n\nif _os.name == \"nt\":\n    pythonapi = PyDLL(\"python dll\", None, _sys.dllhandle)\nelif _sys.platform == \"cygwin\":\n    pythonapi = PyDLL(\"libpython%d.%d.dll\" % _sys.version_info[:2])\nelse:\n    pythonapi = PyDLL(None)\n\n\nif _os.name == \"nt\":\n    windll = LibraryLoader(WinDLL)\n    oledll = LibraryLoader(OleDLL)\n\n    GetLastError = windll.kernel32.GetLastError\n    from _ctypes import get_last_error, set_last_error\n\n    def WinError(code=None, descr=None):\n        if code is None:\n            code = GetLastError()\n        if descr is None:\n            descr = FormatError(code).strip()\n        return OSError(None, descr, None, code)\n\nif sizeof(c_uint) == sizeof(c_void_p):\n    c_size_t = c_uint\n    c_ssize_t = c_int\nelif sizeof(c_ulong) == sizeof(c_void_p):\n    c_size_t = c_ulong\n    c_ssize_t = c_long\nelif sizeof(c_ulonglong) == sizeof(c_void_p):\n    c_size_t = c_ulonglong\n    c_ssize_t = c_longlong\n\n# functions\n\nfrom _ctypes import _memmove_addr, _memset_addr, _string_at_addr, _cast_addr\n\n## void *memmove(void *, const void *, size_t);\nmemmove = CFUNCTYPE(c_void_p, c_void_p, c_void_p, c_size_t)(_memmove_addr)\n\n## void *memset(void *, int, size_t)\nmemset = CFUNCTYPE(c_void_p, c_void_p, c_int, c_size_t)(_memset_addr)\n\ndef PYFUNCTYPE(restype, *argtypes):\n    class CFunctionType(_CFuncPtr):\n        _argtypes_ = argtypes\n        _restype_ = restype\n        _flags_ = _FUNCFLAG_CDECL | _FUNCFLAG_PYTHONAPI\n    return CFunctionType\n\n_cast = PYFUNCTYPE(py_object, c_void_p, py_object, py_object)(_cast_addr)\ndef cast(obj, typ):\n    return _cast(obj, obj, typ)\n\n_string_at = PYFUNCTYPE(py_object, c_void_p, c_int)(_string_at_addr)\ndef string_at(ptr, size=-1):\n    \"\"\"string_at(addr[, size]) -> string\n\n    Return the string at addr.\"\"\"\n    return _string_at(ptr, size)\n\ntry:\n    from _ctypes import _wstring_at_addr\nexcept ImportError:\n    pass\nelse:\n    _wstring_at = PYFUNCTYPE(py_object, c_void_p, c_int)(_wstring_at_addr)\n    def wstring_at(ptr, size=-1):\n        \"\"\"wstring_at(addr[, size]) -> string\n\n        Return the string at addr.\"\"\"\n        return _wstring_at(ptr, size)\n\n\nif _os.name == \"nt\": # COM stuff\n    def DllGetClassObject(rclsid, riid, ppv):\n        try:\n            ccom = __import__(\"comtypes.server.inprocserver\", globals(), locals(), ['*'])\n        except ImportError:\n            return -2147221231 # CLASS_E_CLASSNOTAVAILABLE\n        else:\n            return ccom.DllGetClassObject(rclsid, riid, ppv)\n\n    def DllCanUnloadNow():\n        try:\n            ccom = __import__(\"comtypes.server.inprocserver\", globals(), locals(), ['*'])\n        except ImportError:\n            return 0 # S_OK\n        return ccom.DllCanUnloadNow()\n\nfrom ctypes._endian import BigEndianStructure, LittleEndianStructure\n\n# Fill in specifically-sized types\nc_int8 = c_byte\nc_uint8 = c_ubyte\nfor kind in [c_short, c_int, c_long, c_longlong]:\n    if sizeof(kind) == 2: c_int16 = kind\n    elif sizeof(kind) == 4: c_int32 = kind\n    elif sizeof(kind) == 8: c_int64 = kind\nfor kind in [c_ushort, c_uint, c_ulong, c_ulonglong]:\n    if sizeof(kind) == 2: c_uint16 = kind\n    elif sizeof(kind) == 4: c_uint32 = kind\n    elif sizeof(kind) == 8: c_uint64 = kind\ndel(kind)\n\n_reset_cache()\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_sys.py": "from test import support\nfrom test.support.script_helper import assert_python_ok, assert_python_failure\nimport builtins\nimport codecs\nimport gc\nimport locale\nimport operator\nimport os\nimport struct\nimport subprocess\nimport sys\nimport sysconfig\nimport test.support\nimport textwrap\nimport unittest\nimport warnings\n\n\n# count the number of test runs, used to create unique\n# strings to intern in test_intern()\nINTERN_NUMRUNS = 0\n\n\nclass DisplayHookTest(unittest.TestCase):\n\n    def test_original_displayhook(self):\n        dh = sys.__displayhook__\n\n        with support.captured_stdout() as out:\n            dh(42)\n\n        self.assertEqual(out.getvalue(), \"42\\n\")\n        self.assertEqual(builtins._, 42)\n\n        del builtins._\n\n        with support.captured_stdout() as out:\n            dh(None)\n\n        self.assertEqual(out.getvalue(), \"\")\n        self.assertTrue(not hasattr(builtins, \"_\"))\n\n        # sys.displayhook() requires arguments\n        self.assertRaises(TypeError, dh)\n\n        stdout = sys.stdout\n        try:\n            del sys.stdout\n            self.assertRaises(RuntimeError, dh, 42)\n        finally:\n            sys.stdout = stdout\n\n    def test_lost_displayhook(self):\n        displayhook = sys.displayhook\n        try:\n            del sys.displayhook\n            code = compile(\"42\", \"<string>\", \"single\")\n            self.assertRaises(RuntimeError, eval, code)\n        finally:\n            sys.displayhook = displayhook\n\n    def test_custom_displayhook(self):\n        def baddisplayhook(obj):\n            raise ValueError\n\n        with support.swap_attr(sys, 'displayhook', baddisplayhook):\n            code = compile(\"42\", \"<string>\", \"single\")\n            self.assertRaises(ValueError, eval, code)\n\n\nclass ExceptHookTest(unittest.TestCase):\n\n    def test_original_excepthook(self):\n        try:\n            raise ValueError(42)\n        except ValueError as exc:\n            with support.captured_stderr() as err:\n                sys.__excepthook__(*sys.exc_info())\n\n        self.assertTrue(err.getvalue().endswith(\"ValueError: 42\\n\"))\n\n        self.assertRaises(TypeError, sys.__excepthook__)\n\n    def test_excepthook_bytes_filename(self):\n        # bpo-37467: sys.excepthook() must not crash if a filename\n        # is a bytes string\n        with warnings.catch_warnings():\n            warnings.simplefilter('ignore', BytesWarning)\n\n            try:\n                raise SyntaxError(\"msg\", (b\"bytes_filename\", 123, 0, \"text\"))\n            except SyntaxError as exc:\n                with support.captured_stderr() as err:\n                    sys.__excepthook__(*sys.exc_info())\n\n        err = err.getvalue()\n        self.assertIn(\"\"\"  File \"b'bytes_filename'\", line 123\\n\"\"\", err)\n        self.assertIn(\"\"\"    text\\n\"\"\", err)\n        self.assertTrue(err.endswith(\"SyntaxError: msg\\n\"))\n\n    def test_excepthook(self):\n        with test.support.captured_output(\"stderr\") as stderr:\n            sys.excepthook(1, '1', 1)\n        self.assertTrue(\"TypeError: print_exception(): Exception expected for \" \\\n                         \"value, str found\" in stderr.getvalue())\n\n    # FIXME: testing the code for a lost or replaced excepthook in\n    # Python/pythonrun.c::PyErr_PrintEx() is tricky.\n\n\nclass SysModuleTest(unittest.TestCase):\n\n    def tearDown(self):\n        test.support.reap_children()\n\n    def test_exit(self):\n        # call with two arguments\n        self.assertRaises(TypeError, sys.exit, 42, 42)\n\n        # call without argument\n        with self.assertRaises(SystemExit) as cm:\n            sys.exit()\n        self.assertIsNone(cm.exception.code)\n\n        rc, out, err = assert_python_ok('-c', 'import sys; sys.exit()')\n        self.assertEqual(rc, 0)\n        self.assertEqual(out, b'')\n        self.assertEqual(err, b'')\n\n        # call with integer argument\n        with self.assertRaises(SystemExit) as cm:\n            sys.exit(42)\n        self.assertEqual(cm.exception.code, 42)\n\n        # call with tuple argument with one entry\n        # entry will be unpacked\n        with self.assertRaises(SystemExit) as cm:\n            sys.exit((42,))\n        self.assertEqual(cm.exception.code, 42)\n\n        # call with string argument\n        with self.assertRaises(SystemExit) as cm:\n            sys.exit(\"exit\")\n        self.assertEqual(cm.exception.code, \"exit\")\n\n        # call with tuple argument with two entries\n        with self.assertRaises(SystemExit) as cm:\n            sys.exit((17, 23))\n        self.assertEqual(cm.exception.code, (17, 23))\n\n        # test that the exit machinery handles SystemExits properly\n        rc, out, err = assert_python_failure('-c', 'raise SystemExit(47)')\n        self.assertEqual(rc, 47)\n        self.assertEqual(out, b'')\n        self.assertEqual(err, b'')\n\n        def check_exit_message(code, expected, **env_vars):\n            rc, out, err = assert_python_failure('-c', code, **env_vars)\n            self.assertEqual(rc, 1)\n            self.assertEqual(out, b'')\n            self.assertTrue(err.startswith(expected),\n                \"%s doesn't start with %s\" % (ascii(err), ascii(expected)))\n\n        # test that stderr buffer is flushed before the exit message is written\n        # into stderr\n        check_exit_message(\n            r'import sys; sys.stderr.write(\"unflushed,\"); sys.exit(\"message\")',\n            b\"unflushed,message\")\n\n        # test that the exit message is written with backslashreplace error\n        # handler to stderr\n        check_exit_message(\n            r'import sys; sys.exit(\"surrogates:\\uDCFF\")',\n            b\"surrogates:\\\\udcff\")\n\n        # test that the unicode message is encoded to the stderr encoding\n        # instead of the default encoding (utf8)\n        check_exit_message(\n            r'import sys; sys.exit(\"h\\xe9\")',\n            b\"h\\xe9\", PYTHONIOENCODING='latin-1')\n\n    def test_getdefaultencoding(self):\n        self.assertRaises(TypeError, sys.getdefaultencoding, 42)\n        # can't check more than the type, as the user might have changed it\n        self.assertIsInstance(sys.getdefaultencoding(), str)\n\n    # testing sys.settrace() is done in test_sys_settrace.py\n    # testing sys.setprofile() is done in test_sys_setprofile.py\n\n    def test_setcheckinterval(self):\n        with warnings.catch_warnings():\n            warnings.simplefilter(\"ignore\")\n            self.assertRaises(TypeError, sys.setcheckinterval)\n            orig = sys.getcheckinterval()\n            for n in 0, 100, 120, orig: # orig last to restore starting state\n                sys.setcheckinterval(n)\n                self.assertEqual(sys.getcheckinterval(), n)\n\n    def test_switchinterval(self):\n        self.assertRaises(TypeError, sys.setswitchinterval)\n        self.assertRaises(TypeError, sys.setswitchinterval, \"a\")\n        self.assertRaises(ValueError, sys.setswitchinterval, -1.0)\n        self.assertRaises(ValueError, sys.setswitchinterval, 0.0)\n        orig = sys.getswitchinterval()\n        # sanity check\n        self.assertTrue(orig < 0.5, orig)\n        try:\n            for n in 0.00001, 0.05, 3.0, orig:\n                sys.setswitchinterval(n)\n                self.assertAlmostEqual(sys.getswitchinterval(), n)\n        finally:\n            sys.setswitchinterval(orig)\n\n    def test_recursionlimit(self):\n        self.assertRaises(TypeError, sys.getrecursionlimit, 42)\n        oldlimit = sys.getrecursionlimit()\n        self.assertRaises(TypeError, sys.setrecursionlimit)\n        self.assertRaises(ValueError, sys.setrecursionlimit, -42)\n        sys.setrecursionlimit(10000)\n        self.assertEqual(sys.getrecursionlimit(), 10000)\n        sys.setrecursionlimit(oldlimit)\n\n    def test_recursionlimit_recovery(self):\n        if hasattr(sys, 'gettrace') and sys.gettrace():\n            self.skipTest('fatal error if run with a trace function')\n\n        oldlimit = sys.getrecursionlimit()\n        def f():\n            f()\n        try:\n            for depth in (10, 25, 50, 75, 100, 250, 1000):\n                try:\n                    sys.setrecursionlimit(depth)\n                except RecursionError:\n                    # Issue #25274: The recursion limit is too low at the\n                    # current recursion depth\n                    continue\n\n                # Issue #5392: test stack overflow after hitting recursion\n                # limit twice\n                self.assertRaises(RecursionError, f)\n                self.assertRaises(RecursionError, f)\n        finally:\n            sys.setrecursionlimit(oldlimit)\n\n    @test.support.cpython_only\n    def test_setrecursionlimit_recursion_depth(self):\n        # Issue #25274: Setting a low recursion limit must be blocked if the\n        # current recursion depth is already higher than the \"lower-water\n        # mark\". Otherwise, it may not be possible anymore to\n        # reset the overflowed flag to 0.\n\n        from _testcapi import get_recursion_depth\n\n        def set_recursion_limit_at_depth(depth, limit):\n            recursion_depth = get_recursion_depth()\n            if recursion_depth >= depth:\n                with self.assertRaises(RecursionError) as cm:\n                    sys.setrecursionlimit(limit)\n                self.assertRegex(str(cm.exception),\n                                 \"cannot set the recursion limit to [0-9]+ \"\n                                 \"at the recursion depth [0-9]+: \"\n                                 \"the limit is too low\")\n            else:\n                set_recursion_limit_at_depth(depth, limit)\n\n        oldlimit = sys.getrecursionlimit()\n        try:\n            sys.setrecursionlimit(1000)\n\n            for limit in (10, 25, 50, 75, 100, 150, 200):\n                # formula extracted from _Py_RecursionLimitLowerWaterMark()\n                if limit > 200:\n                    depth = limit - 50\n                else:\n                    depth = limit * 3 // 4\n                set_recursion_limit_at_depth(depth, limit)\n        finally:\n            sys.setrecursionlimit(oldlimit)\n\n    def test_recursionlimit_fatalerror(self):\n        # A fatal error occurs if a second recursion limit is hit when recovering\n        # from a first one.\n        code = textwrap.dedent(\"\"\"\n            import sys\n\n            def f():\n                try:\n                    f()\n                except RecursionError:\n                    f()\n\n            sys.setrecursionlimit(%d)\n            f()\"\"\")\n        with test.support.SuppressCrashReport():\n            for i in (50, 1000):\n                sub = subprocess.Popen([sys.executable, '-c', code % i],\n                    stderr=subprocess.PIPE)\n                err = sub.communicate()[1]\n                self.assertTrue(sub.returncode, sub.returncode)\n                self.assertIn(\n                    b\"Fatal Python error: Cannot recover from stack overflow\",\n                    err)\n\n    def test_getwindowsversion(self):\n        # Raise SkipTest if sys doesn't have getwindowsversion attribute\n        test.support.get_attribute(sys, \"getwindowsversion\")\n        v = sys.getwindowsversion()\n        self.assertEqual(len(v), 5)\n        self.assertIsInstance(v[0], int)\n        self.assertIsInstance(v[1], int)\n        self.assertIsInstance(v[2], int)\n        self.assertIsInstance(v[3], int)\n        self.assertIsInstance(v[4], str)\n        self.assertRaises(IndexError, operator.getitem, v, 5)\n        self.assertIsInstance(v.major, int)\n        self.assertIsInstance(v.minor, int)\n        self.assertIsInstance(v.build, int)\n        self.assertIsInstance(v.platform, int)\n        self.assertIsInstance(v.service_pack, str)\n        self.assertIsInstance(v.service_pack_minor, int)\n        self.assertIsInstance(v.service_pack_major, int)\n        self.assertIsInstance(v.suite_mask, int)\n        self.assertIsInstance(v.product_type, int)\n        self.assertEqual(v[0], v.major)\n        self.assertEqual(v[1], v.minor)\n        self.assertEqual(v[2], v.build)\n        self.assertEqual(v[3], v.platform)\n        self.assertEqual(v[4], v.service_pack)\n\n        # This is how platform.py calls it. Make sure tuple\n        #  still has 5 elements\n        maj, min, buildno, plat, csd = sys.getwindowsversion()\n\n    def test_call_tracing(self):\n        self.assertRaises(TypeError, sys.call_tracing, type, 2)\n\n    @unittest.skipUnless(hasattr(sys, \"setdlopenflags\"),\n                         'test needs sys.setdlopenflags()')\n    def test_dlopenflags(self):\n        self.assertTrue(hasattr(sys, \"getdlopenflags\"))\n        self.assertRaises(TypeError, sys.getdlopenflags, 42)\n        oldflags = sys.getdlopenflags()\n        self.assertRaises(TypeError, sys.setdlopenflags)\n        sys.setdlopenflags(oldflags+1)\n        self.assertEqual(sys.getdlopenflags(), oldflags+1)\n        sys.setdlopenflags(oldflags)\n\n    @test.support.refcount_test\n    def test_refcount(self):\n        # n here must be a global in order for this test to pass while\n        # tracing with a python function.  Tracing calls PyFrame_FastToLocals\n        # which will add a copy of any locals to the frame object, causing\n        # the reference count to increase by 2 instead of 1.\n        global n\n        self.assertRaises(TypeError, sys.getrefcount)\n        c = sys.getrefcount(None)\n        n = None\n        self.assertEqual(sys.getrefcount(None), c+1)\n        del n\n        self.assertEqual(sys.getrefcount(None), c)\n        if hasattr(sys, \"gettotalrefcount\"):\n            self.assertIsInstance(sys.gettotalrefcount(), int)\n\n    def test_getframe(self):\n        self.assertRaises(TypeError, sys._getframe, 42, 42)\n        self.assertRaises(ValueError, sys._getframe, 2000000000)\n        self.assertTrue(\n            SysModuleTest.test_getframe.__code__ \\\n            is sys._getframe().f_code\n        )\n\n    # sys._current_frames() is a CPython-only gimmick.\n    @test.support.reap_threads\n    def test_current_frames(self):\n        import threading\n        import traceback\n\n        # Spawn a thread that blocks at a known place.  Then the main\n        # thread does sys._current_frames(), and verifies that the frames\n        # returned make sense.\n        entered_g = threading.Event()\n        leave_g = threading.Event()\n        thread_info = []  # the thread's id\n\n        def f123():\n            g456()\n\n        def g456():\n            thread_info.append(threading.get_ident())\n            entered_g.set()\n            leave_g.wait()\n\n        t = threading.Thread(target=f123)\n        t.start()\n        entered_g.wait()\n\n        # At this point, t has finished its entered_g.set(), although it's\n        # impossible to guess whether it's still on that line or has moved on\n        # to its leave_g.wait().\n        self.assertEqual(len(thread_info), 1)\n        thread_id = thread_info[0]\n\n        d = sys._current_frames()\n        for tid in d:\n            self.assertIsInstance(tid, int)\n            self.assertGreater(tid, 0)\n\n        main_id = threading.get_ident()\n        self.assertIn(main_id, d)\n        self.assertIn(thread_id, d)\n\n        # Verify that the captured main-thread frame is _this_ frame.\n        frame = d.pop(main_id)\n        self.assertTrue(frame is sys._getframe())\n\n        # Verify that the captured thread frame is blocked in g456, called\n        # from f123.  This is a litte tricky, since various bits of\n        # threading.py are also in the thread's call stack.\n        frame = d.pop(thread_id)\n        stack = traceback.extract_stack(frame)\n        for i, (filename, lineno, funcname, sourceline) in enumerate(stack):\n            if funcname == \"f123\":\n                break\n        else:\n            self.fail(\"didn't find f123() on thread's call stack\")\n\n        self.assertEqual(sourceline, \"g456()\")\n\n        # And the next record must be for g456().\n        filename, lineno, funcname, sourceline = stack[i+1]\n        self.assertEqual(funcname, \"g456\")\n        self.assertIn(sourceline, [\"leave_g.wait()\", \"entered_g.set()\"])\n\n        # Reap the spawned thread.\n        leave_g.set()\n        t.join()\n\n    def test_attributes(self):\n        self.assertIsInstance(sys.api_version, int)\n        self.assertIsInstance(sys.argv, list)\n        self.assertIn(sys.byteorder, (\"little\", \"big\"))\n        self.assertIsInstance(sys.builtin_module_names, tuple)\n        self.assertIsInstance(sys.copyright, str)\n        self.assertIsInstance(sys.exec_prefix, str)\n        self.assertIsInstance(sys.base_exec_prefix, str)\n        self.assertIsInstance(sys.executable, str)\n        self.assertEqual(len(sys.float_info), 11)\n        self.assertEqual(sys.float_info.radix, 2)\n        self.assertEqual(len(sys.int_info), 2)\n        self.assertTrue(sys.int_info.bits_per_digit % 5 == 0)\n        self.assertTrue(sys.int_info.sizeof_digit >= 1)\n        self.assertEqual(type(sys.int_info.bits_per_digit), int)\n        self.assertEqual(type(sys.int_info.sizeof_digit), int)\n        self.assertIsInstance(sys.hexversion, int)\n\n        self.assertEqual(len(sys.hash_info), 9)\n        self.assertLess(sys.hash_info.modulus, 2**sys.hash_info.width)\n        # sys.hash_info.modulus should be a prime; we do a quick\n        # probable primality test (doesn't exclude the possibility of\n        # a Carmichael number)\n        for x in range(1, 100):\n            self.assertEqual(\n                pow(x, sys.hash_info.modulus-1, sys.hash_info.modulus),\n                1,\n                \"sys.hash_info.modulus {} is a non-prime\".format(\n                    sys.hash_info.modulus)\n                )\n        self.assertIsInstance(sys.hash_info.inf, int)\n        self.assertIsInstance(sys.hash_info.nan, int)\n        self.assertIsInstance(sys.hash_info.imag, int)\n        algo = sysconfig.get_config_var(\"Py_HASH_ALGORITHM\")\n        if sys.hash_info.algorithm in {\"fnv\", \"siphash24\"}:\n            self.assertIn(sys.hash_info.hash_bits, {32, 64})\n            self.assertIn(sys.hash_info.seed_bits, {32, 64, 128})\n\n            if algo == 1:\n                self.assertEqual(sys.hash_info.algorithm, \"siphash24\")\n            elif algo == 2:\n                self.assertEqual(sys.hash_info.algorithm, \"fnv\")\n            else:\n                self.assertIn(sys.hash_info.algorithm, {\"fnv\", \"siphash24\"})\n        else:\n            # PY_HASH_EXTERNAL\n            self.assertEqual(algo, 0)\n        self.assertGreaterEqual(sys.hash_info.cutoff, 0)\n        self.assertLess(sys.hash_info.cutoff, 8)\n\n        self.assertIsInstance(sys.maxsize, int)\n        self.assertIsInstance(sys.maxunicode, int)\n        self.assertEqual(sys.maxunicode, 0x10FFFF)\n        self.assertIsInstance(sys.platform, str)\n        self.assertIsInstance(sys.prefix, str)\n        self.assertIsInstance(sys.base_prefix, str)\n        self.assertIsInstance(sys.version, str)\n        vi = sys.version_info\n        self.assertIsInstance(vi[:], tuple)\n        self.assertEqual(len(vi), 5)\n        self.assertIsInstance(vi[0], int)\n        self.assertIsInstance(vi[1], int)\n        self.assertIsInstance(vi[2], int)\n        self.assertIn(vi[3], (\"alpha\", \"beta\", \"candidate\", \"final\"))\n        self.assertIsInstance(vi[4], int)\n        self.assertIsInstance(vi.major, int)\n        self.assertIsInstance(vi.minor, int)\n        self.assertIsInstance(vi.micro, int)\n        self.assertIn(vi.releaselevel, (\"alpha\", \"beta\", \"candidate\", \"final\"))\n        self.assertIsInstance(vi.serial, int)\n        self.assertEqual(vi[0], vi.major)\n        self.assertEqual(vi[1], vi.minor)\n        self.assertEqual(vi[2], vi.micro)\n        self.assertEqual(vi[3], vi.releaselevel)\n        self.assertEqual(vi[4], vi.serial)\n        self.assertTrue(vi > (1,0,0))\n        self.assertIsInstance(sys.float_repr_style, str)\n        self.assertIn(sys.float_repr_style, ('short', 'legacy'))\n        if not sys.platform.startswith('win'):\n            self.assertIsInstance(sys.abiflags, str)\n\n    def test_thread_info(self):\n        info = sys.thread_info\n        self.assertEqual(len(info), 3)\n        self.assertIn(info.name, ('nt', 'pthread', 'solaris', None))\n        self.assertIn(info.lock, ('semaphore', 'mutex+cond', None))\n\n    def test_43581(self):\n        # Can't use sys.stdout, as this is a StringIO object when\n        # the test runs under regrtest.\n        self.assertEqual(sys.__stdout__.encoding, sys.__stderr__.encoding)\n\n    def test_intern(self):\n        global INTERN_NUMRUNS\n        INTERN_NUMRUNS += 1\n        self.assertRaises(TypeError, sys.intern)\n        s = \"never interned before\" + str(INTERN_NUMRUNS)\n        self.assertTrue(sys.intern(s) is s)\n        s2 = s.swapcase().swapcase()\n        self.assertTrue(sys.intern(s2) is s)\n\n        # Subclasses of string can't be interned, because they\n        # provide too much opportunity for insane things to happen.\n        # We don't want them in the interned dict and if they aren't\n        # actually interned, we don't want to create the appearance\n        # that they are by allowing intern() to succeed.\n        class S(str):\n            def __hash__(self):\n                return 123\n\n        self.assertRaises(TypeError, sys.intern, S(\"abc\"))\n\n    def test_sys_flags(self):\n        self.assertTrue(sys.flags)\n        attrs = (\"debug\",\n                 \"inspect\", \"interactive\", \"optimize\", \"dont_write_bytecode\",\n                 \"no_user_site\", \"no_site\", \"ignore_environment\", \"verbose\",\n                 \"bytes_warning\", \"quiet\", \"hash_randomization\", \"isolated\",\n                 \"dev_mode\", \"utf8_mode\")\n        for attr in attrs:\n            self.assertTrue(hasattr(sys.flags, attr), attr)\n            attr_type = bool if attr == \"dev_mode\" else int\n            self.assertEqual(type(getattr(sys.flags, attr)), attr_type, attr)\n        self.assertTrue(repr(sys.flags))\n        self.assertEqual(len(sys.flags), len(attrs))\n\n        self.assertIn(sys.flags.utf8_mode, {0, 1, 2})\n\n    def assert_raise_on_new_sys_type(self, sys_attr):\n        # Users are intentionally prevented from creating new instances of\n        # sys.flags, sys.version_info, and sys.getwindowsversion.\n        attr_type = type(sys_attr)\n        with self.assertRaises(TypeError):\n            attr_type()\n        with self.assertRaises(TypeError):\n            attr_type.__new__(attr_type)\n\n    def test_sys_flags_no_instantiation(self):\n        self.assert_raise_on_new_sys_type(sys.flags)\n\n    def test_sys_version_info_no_instantiation(self):\n        self.assert_raise_on_new_sys_type(sys.version_info)\n\n    def test_sys_getwindowsversion_no_instantiation(self):\n        # Skip if not being run on Windows.\n        test.support.get_attribute(sys, \"getwindowsversion\")\n        self.assert_raise_on_new_sys_type(sys.getwindowsversion())\n\n    @test.support.cpython_only\n    def test_clear_type_cache(self):\n        sys._clear_type_cache()\n\n    def test_ioencoding(self):\n        env = dict(os.environ)\n\n        # Test character: cent sign, encoded as 0x4A (ASCII J) in CP424,\n        # not representable in ASCII.\n\n        env[\"PYTHONIOENCODING\"] = \"cp424\"\n        p = subprocess.Popen([sys.executable, \"-c\", 'print(chr(0xa2))'],\n                             stdout = subprocess.PIPE, env=env)\n        out = p.communicate()[0].strip()\n        expected = (\"\\xa2\" + os.linesep).encode(\"cp424\")\n        self.assertEqual(out, expected)\n\n        env[\"PYTHONIOENCODING\"] = \"ascii:replace\"\n        p = subprocess.Popen([sys.executable, \"-c\", 'print(chr(0xa2))'],\n                             stdout = subprocess.PIPE, env=env)\n        out = p.communicate()[0].strip()\n        self.assertEqual(out, b'?')\n\n        env[\"PYTHONIOENCODING\"] = \"ascii\"\n        p = subprocess.Popen([sys.executable, \"-c\", 'print(chr(0xa2))'],\n                             stdout=subprocess.PIPE, stderr=subprocess.PIPE,\n                             env=env)\n        out, err = p.communicate()\n        self.assertEqual(out, b'')\n        self.assertIn(b'UnicodeEncodeError:', err)\n        self.assertIn(rb\"'\\xa2'\", err)\n\n        env[\"PYTHONIOENCODING\"] = \"ascii:\"\n        p = subprocess.Popen([sys.executable, \"-c\", 'print(chr(0xa2))'],\n                             stdout=subprocess.PIPE, stderr=subprocess.PIPE,\n                             env=env)\n        out, err = p.communicate()\n        self.assertEqual(out, b'')\n        self.assertIn(b'UnicodeEncodeError:', err)\n        self.assertIn(rb\"'\\xa2'\", err)\n\n        env[\"PYTHONIOENCODING\"] = \":surrogateescape\"\n        p = subprocess.Popen([sys.executable, \"-c\", 'print(chr(0xdcbd))'],\n                             stdout=subprocess.PIPE, env=env)\n        out = p.communicate()[0].strip()\n        self.assertEqual(out, b'\\xbd')\n\n    @unittest.skipUnless(test.support.FS_NONASCII,\n                         'requires OS support of non-ASCII encodings')\n    @unittest.skipUnless(sys.getfilesystemencoding() == locale.getpreferredencoding(False),\n                         'requires FS encoding to match locale')\n    def test_ioencoding_nonascii(self):\n        env = dict(os.environ)\n\n        env[\"PYTHONIOENCODING\"] = \"\"\n        p = subprocess.Popen([sys.executable, \"-c\",\n                                'print(%a)' % test.support.FS_NONASCII],\n                                stdout=subprocess.PIPE, env=env)\n        out = p.communicate()[0].strip()\n        self.assertEqual(out, os.fsencode(test.support.FS_NONASCII))\n\n    @unittest.skipIf(sys.base_prefix != sys.prefix,\n                     'Test is not venv-compatible')\n    def test_executable(self):\n        # sys.executable should be absolute\n        self.assertEqual(os.path.abspath(sys.executable), sys.executable)\n\n        # Issue #7774: Ensure that sys.executable is an empty string if argv[0]\n        # has been set to a non existent program name and Python is unable to\n        # retrieve the real program name\n\n        # For a normal installation, it should work without 'cwd'\n        # argument. For test runs in the build directory, see #7774.\n        python_dir = os.path.dirname(os.path.realpath(sys.executable))\n        p = subprocess.Popen(\n            [\"nonexistent\", \"-c\",\n             'import sys; print(sys.executable.encode(\"ascii\", \"backslashreplace\"))'],\n            executable=sys.executable, stdout=subprocess.PIPE, cwd=python_dir)\n        stdout = p.communicate()[0]\n        executable = stdout.strip().decode(\"ASCII\")\n        p.wait()\n        self.assertIn(executable, [\"b''\", repr(sys.executable.encode(\"ascii\", \"backslashreplace\"))])\n\n    def check_fsencoding(self, fs_encoding, expected=None):\n        self.assertIsNotNone(fs_encoding)\n        codecs.lookup(fs_encoding)\n        if expected:\n            self.assertEqual(fs_encoding, expected)\n\n    def test_getfilesystemencoding(self):\n        fs_encoding = sys.getfilesystemencoding()\n        if sys.platform == 'darwin':\n            expected = 'utf-8'\n        else:\n            expected = None\n        self.check_fsencoding(fs_encoding, expected)\n\n    def c_locale_get_error_handler(self, locale, isolated=False, encoding=None):\n        # Force the POSIX locale\n        env = os.environ.copy()\n        env[\"LC_ALL\"] = locale\n        env[\"PYTHONCOERCECLOCALE\"] = \"0\"\n        code = '\\n'.join((\n            'import sys',\n            'def dump(name):',\n            '    std = getattr(sys, name)',\n            '    print(\"%s: %s\" % (name, std.errors))',\n            'dump(\"stdin\")',\n            'dump(\"stdout\")',\n            'dump(\"stderr\")',\n        ))\n        args = [sys.executable, \"-X\", \"utf8=0\", \"-c\", code]\n        if isolated:\n            args.append(\"-I\")\n        if encoding is not None:\n            env['PYTHONIOENCODING'] = encoding\n        else:\n            env.pop('PYTHONIOENCODING', None)\n        p = subprocess.Popen(args,\n                              stdout=subprocess.PIPE,\n                              stderr=subprocess.STDOUT,\n                              env=env,\n                              universal_newlines=True)\n        stdout, stderr = p.communicate()\n        return stdout\n\n    def check_locale_surrogateescape(self, locale):\n        out = self.c_locale_get_error_handler(locale, isolated=True)\n        self.assertEqual(out,\n                         'stdin: surrogateescape\\n'\n                         'stdout: surrogateescape\\n'\n                         'stderr: backslashreplace\\n')\n\n        # replace the default error handler\n        out = self.c_locale_get_error_handler(locale, encoding=':ignore')\n        self.assertEqual(out,\n                         'stdin: ignore\\n'\n                         'stdout: ignore\\n'\n                         'stderr: backslashreplace\\n')\n\n        # force the encoding\n        out = self.c_locale_get_error_handler(locale, encoding='iso8859-1')\n        self.assertEqual(out,\n                         'stdin: strict\\n'\n                         'stdout: strict\\n'\n                         'stderr: backslashreplace\\n')\n        out = self.c_locale_get_error_handler(locale, encoding='iso8859-1:')\n        self.assertEqual(out,\n                         'stdin: strict\\n'\n                         'stdout: strict\\n'\n                         'stderr: backslashreplace\\n')\n\n        # have no any effect\n        out = self.c_locale_get_error_handler(locale, encoding=':')\n        self.assertEqual(out,\n                         'stdin: surrogateescape\\n'\n                         'stdout: surrogateescape\\n'\n                         'stderr: backslashreplace\\n')\n        out = self.c_locale_get_error_handler(locale, encoding='')\n        self.assertEqual(out,\n                         'stdin: surrogateescape\\n'\n                         'stdout: surrogateescape\\n'\n                         'stderr: backslashreplace\\n')\n\n    def test_c_locale_surrogateescape(self):\n        self.check_locale_surrogateescape('C')\n\n    def test_posix_locale_surrogateescape(self):\n        self.check_locale_surrogateescape('POSIX')\n\n    def test_implementation(self):\n        # This test applies to all implementations equally.\n\n        levels = {'alpha': 0xA, 'beta': 0xB, 'candidate': 0xC, 'final': 0xF}\n\n        self.assertTrue(hasattr(sys.implementation, 'name'))\n        self.assertTrue(hasattr(sys.implementation, 'version'))\n        self.assertTrue(hasattr(sys.implementation, 'hexversion'))\n        self.assertTrue(hasattr(sys.implementation, 'cache_tag'))\n\n        version = sys.implementation.version\n        self.assertEqual(version[:2], (version.major, version.minor))\n\n        hexversion = (version.major << 24 | version.minor << 16 |\n                      version.micro << 8 | levels[version.releaselevel] << 4 |\n                      version.serial << 0)\n        self.assertEqual(sys.implementation.hexversion, hexversion)\n\n        # PEP 421 requires that .name be lower case.\n        self.assertEqual(sys.implementation.name,\n                         sys.implementation.name.lower())\n\n    @test.support.cpython_only\n    def test_debugmallocstats(self):\n        # Test sys._debugmallocstats()\n        from test.support.script_helper import assert_python_ok\n        args = ['-c', 'import sys; sys._debugmallocstats()']\n        ret, out, err = assert_python_ok(*args)\n        self.assertIn(b\"free PyDictObjects\", err)\n\n        # The function has no parameter\n        self.assertRaises(TypeError, sys._debugmallocstats, True)\n\n    @unittest.skipUnless(hasattr(sys, \"getallocatedblocks\"),\n                         \"sys.getallocatedblocks unavailable on this build\")\n    def test_getallocatedblocks(self):\n        try:\n            import _testcapi\n        except ImportError:\n            with_pymalloc = support.with_pymalloc()\n        else:\n            try:\n                alloc_name = _testcapi.pymem_getallocatorsname()\n            except RuntimeError as exc:\n                # \"cannot get allocators name\" (ex: tracemalloc is used)\n                with_pymalloc = True\n            else:\n                with_pymalloc = (alloc_name in ('pymalloc', 'pymalloc_debug'))\n\n        # Some sanity checks\n        a = sys.getallocatedblocks()\n        self.assertIs(type(a), int)\n        if with_pymalloc:\n            self.assertGreater(a, 0)\n        else:\n            # When WITH_PYMALLOC isn't available, we don't know anything\n            # about the underlying implementation: the function might\n            # return 0 or something greater.\n            self.assertGreaterEqual(a, 0)\n        try:\n            # While we could imagine a Python session where the number of\n            # multiple buffer objects would exceed the sharing of references,\n            # it is unlikely to happen in a normal test run.\n            self.assertLess(a, sys.gettotalrefcount())\n        except AttributeError:\n            # gettotalrefcount() not available\n            pass\n        gc.collect()\n        b = sys.getallocatedblocks()\n        self.assertLessEqual(b, a)\n        gc.collect()\n        c = sys.getallocatedblocks()\n        self.assertIn(c, range(b - 50, b + 50))\n\n    @test.support.requires_type_collecting\n    def test_is_finalizing(self):\n        self.assertIs(sys.is_finalizing(), False)\n        # Don't use the atexit module because _Py_Finalizing is only set\n        # after calling atexit callbacks\n        code = \"\"\"if 1:\n            import sys\n\n            class AtExit:\n                is_finalizing = sys.is_finalizing\n                print = print\n\n                def __del__(self):\n                    self.print(self.is_finalizing(), flush=True)\n\n            # Keep a reference in the __main__ module namespace, so the\n            # AtExit destructor will be called at Python exit\n            ref = AtExit()\n        \"\"\"\n        rc, stdout, stderr = assert_python_ok('-c', code)\n        self.assertEqual(stdout.rstrip(), b'True')\n\n    @test.support.requires_type_collecting\n    def test_issue20602(self):\n        # sys.flags and sys.float_info were wiped during shutdown.\n        code = \"\"\"if 1:\n            import sys\n            class A:\n                def __del__(self, sys=sys):\n                    print(sys.flags)\n                    print(sys.float_info)\n            a = A()\n            \"\"\"\n        rc, out, err = assert_python_ok('-c', code)\n        out = out.splitlines()\n        self.assertIn(b'sys.flags', out[0])\n        self.assertIn(b'sys.float_info', out[1])\n\n    @unittest.skipUnless(hasattr(sys, 'getandroidapilevel'),\n                         'need sys.getandroidapilevel()')\n    def test_getandroidapilevel(self):\n        level = sys.getandroidapilevel()\n        self.assertIsInstance(level, int)\n        self.assertGreater(level, 0)\n\n    def test_sys_tracebacklimit(self):\n        code = \"\"\"if 1:\n            import sys\n            def f1():\n                1 / 0\n            def f2():\n                f1()\n            sys.tracebacklimit = %r\n            f2()\n        \"\"\"\n        def check(tracebacklimit, expected):\n            p = subprocess.Popen([sys.executable, '-c', code % tracebacklimit],\n                                 stderr=subprocess.PIPE)\n            out = p.communicate()[1]\n            self.assertEqual(out.splitlines(), expected)\n\n        traceback = [\n            b'Traceback (most recent call last):',\n            b'  File \"<string>\", line 8, in <module>',\n            b'  File \"<string>\", line 6, in f2',\n            b'  File \"<string>\", line 4, in f1',\n            b'ZeroDivisionError: division by zero'\n        ]\n        check(10, traceback)\n        check(3, traceback)\n        check(2, traceback[:1] + traceback[2:])\n        check(1, traceback[:1] + traceback[3:])\n        check(0, [traceback[-1]])\n        check(-1, [traceback[-1]])\n        check(1<<1000, traceback)\n        check(-1<<1000, [traceback[-1]])\n        check(None, traceback)\n\n    def test_no_duplicates_in_meta_path(self):\n        self.assertEqual(len(sys.meta_path), len(set(sys.meta_path)))\n\n    @unittest.skipUnless(hasattr(sys, \"_enablelegacywindowsfsencoding\"),\n                         'needs sys._enablelegacywindowsfsencoding()')\n    def test__enablelegacywindowsfsencoding(self):\n        code = ('import sys',\n                'sys._enablelegacywindowsfsencoding()',\n                'print(sys.getfilesystemencoding(), sys.getfilesystemencodeerrors())')\n        rc, out, err = assert_python_ok('-c', '; '.join(code))\n        out = out.decode('ascii', 'replace').rstrip()\n        self.assertEqual(out, 'mbcs replace')\n\n\n@test.support.cpython_only\nclass UnraisableHookTest(unittest.TestCase):\n    def write_unraisable_exc(self, exc, err_msg, obj):\n        import _testcapi\n        import types\n        err_msg2 = f\"Exception ignored {err_msg}\"\n        try:\n            _testcapi.write_unraisable_exc(exc, err_msg, obj)\n            return types.SimpleNamespace(exc_type=type(exc),\n                                         exc_value=exc,\n                                         exc_traceback=exc.__traceback__,\n                                         err_msg=err_msg2,\n                                         object=obj)\n        finally:\n            # Explicitly break any reference cycle\n            exc = None\n\n    def test_original_unraisablehook(self):\n        for err_msg in (None, \"original hook\"):\n            with self.subTest(err_msg=err_msg):\n                obj = \"an object\"\n\n                with test.support.captured_output(\"stderr\") as stderr:\n                    with test.support.swap_attr(sys, 'unraisablehook',\n                                                sys.__unraisablehook__):\n                        self.write_unraisable_exc(ValueError(42), err_msg, obj)\n\n                err = stderr.getvalue()\n                if err_msg is not None:\n                    self.assertIn(f'Exception ignored {err_msg}: {obj!r}\\n', err)\n                else:\n                    self.assertIn(f'Exception ignored in: {obj!r}\\n', err)\n                self.assertIn('Traceback (most recent call last):\\n', err)\n                self.assertIn('ValueError: 42\\n', err)\n\n    def test_original_unraisablehook_err(self):\n        # bpo-22836: PyErr_WriteUnraisable() should give sensible reports\n        class BrokenDel:\n            def __del__(self):\n                exc = ValueError(\"del is broken\")\n                # The following line is included in the traceback report:\n                raise exc\n\n        class BrokenStrException(Exception):\n            def __str__(self):\n                raise Exception(\"str() is broken\")\n\n        class BrokenExceptionDel:\n            def __del__(self):\n                exc = BrokenStrException()\n                # The following line is included in the traceback report:\n                raise exc\n\n        for test_class in (BrokenDel, BrokenExceptionDel):\n            with self.subTest(test_class):\n                obj = test_class()\n                with test.support.captured_stderr() as stderr, \\\n                     test.support.swap_attr(sys, 'unraisablehook',\n                                            sys.__unraisablehook__):\n                    # Trigger obj.__del__()\n                    del obj\n\n                report = stderr.getvalue()\n                self.assertIn(\"Exception ignored\", report)\n                self.assertIn(test_class.__del__.__qualname__, report)\n                self.assertIn(\"test_sys.py\", report)\n                self.assertIn(\"raise exc\", report)\n                if test_class is BrokenExceptionDel:\n                    self.assertIn(\"BrokenStrException\", report)\n                    self.assertIn(\"<exception str() failed>\", report)\n                else:\n                    self.assertIn(\"ValueError\", report)\n                    self.assertIn(\"del is broken\", report)\n                self.assertTrue(report.endswith(\"\\n\"))\n\n\n    def test_original_unraisablehook_wrong_type(self):\n        exc = ValueError(42)\n        with test.support.swap_attr(sys, 'unraisablehook',\n                                    sys.__unraisablehook__):\n            with self.assertRaises(TypeError):\n                sys.unraisablehook(exc)\n\n    def test_custom_unraisablehook(self):\n        hook_args = None\n\n        def hook_func(args):\n            nonlocal hook_args\n            hook_args = args\n\n        obj = object()\n        try:\n            with test.support.swap_attr(sys, 'unraisablehook', hook_func):\n                expected = self.write_unraisable_exc(ValueError(42),\n                                                     \"custom hook\", obj)\n                for attr in \"exc_type exc_value exc_traceback err_msg object\".split():\n                    self.assertEqual(getattr(hook_args, attr),\n                                     getattr(expected, attr),\n                                     (hook_args, expected))\n        finally:\n            # expected and hook_args contain an exception: break reference cycle\n            expected = None\n            hook_args = None\n\n    def test_custom_unraisablehook_fail(self):\n        def hook_func(*args):\n            raise Exception(\"hook_func failed\")\n\n        with test.support.captured_output(\"stderr\") as stderr:\n            with test.support.swap_attr(sys, 'unraisablehook', hook_func):\n                self.write_unraisable_exc(ValueError(42),\n                                          \"custom hook fail\", None)\n\n        err = stderr.getvalue()\n        self.assertIn(f'Exception ignored in sys.unraisablehook: '\n                      f'{hook_func!r}\\n',\n                      err)\n        self.assertIn('Traceback (most recent call last):\\n', err)\n        self.assertIn('Exception: hook_func failed\\n', err)\n\n\n@test.support.cpython_only\nclass SizeofTest(unittest.TestCase):\n\n    def setUp(self):\n        self.P = struct.calcsize('P')\n        self.longdigit = sys.int_info.sizeof_digit\n        import _testcapi\n        self.gc_headsize = _testcapi.SIZEOF_PYGC_HEAD\n\n    check_sizeof = test.support.check_sizeof\n\n    def test_gc_head_size(self):\n        # Check that the gc header size is added to objects tracked by the gc.\n        vsize = test.support.calcvobjsize\n        gc_header_size = self.gc_headsize\n        # bool objects are not gc tracked\n        self.assertEqual(sys.getsizeof(True), vsize('') + self.longdigit)\n        # but lists are\n        self.assertEqual(sys.getsizeof([]), vsize('Pn') + gc_header_size)\n\n    def test_errors(self):\n        class BadSizeof:\n            def __sizeof__(self):\n                raise ValueError\n        self.assertRaises(ValueError, sys.getsizeof, BadSizeof())\n\n        class InvalidSizeof:\n            def __sizeof__(self):\n                return None\n        self.assertRaises(TypeError, sys.getsizeof, InvalidSizeof())\n        sentinel = [\"sentinel\"]\n        self.assertIs(sys.getsizeof(InvalidSizeof(), sentinel), sentinel)\n\n        class FloatSizeof:\n            def __sizeof__(self):\n                return 4.5\n        self.assertRaises(TypeError, sys.getsizeof, FloatSizeof())\n        self.assertIs(sys.getsizeof(FloatSizeof(), sentinel), sentinel)\n\n        class OverflowSizeof(int):\n            def __sizeof__(self):\n                return int(self)\n        self.assertEqual(sys.getsizeof(OverflowSizeof(sys.maxsize)),\n                         sys.maxsize + self.gc_headsize)\n        with self.assertRaises(OverflowError):\n            sys.getsizeof(OverflowSizeof(sys.maxsize + 1))\n        with self.assertRaises(ValueError):\n            sys.getsizeof(OverflowSizeof(-1))\n        with self.assertRaises((ValueError, OverflowError)):\n            sys.getsizeof(OverflowSizeof(-sys.maxsize - 1))\n\n    def test_default(self):\n        size = test.support.calcvobjsize\n        self.assertEqual(sys.getsizeof(True), size('') + self.longdigit)\n        self.assertEqual(sys.getsizeof(True, -1), size('') + self.longdigit)\n\n    def test_objecttypes(self):\n        # check all types defined in Objects/\n        calcsize = struct.calcsize\n        size = test.support.calcobjsize\n        vsize = test.support.calcvobjsize\n        check = self.check_sizeof\n        # bool\n        check(True, vsize('') + self.longdigit)\n        # buffer\n        # XXX\n        # builtin_function_or_method\n        check(len, size('5P'))\n        # bytearray\n        samples = [b'', b'u'*100000]\n        for sample in samples:\n            x = bytearray(sample)\n            check(x, vsize('n2Pi') + x.__alloc__())\n        # bytearray_iterator\n        check(iter(bytearray()), size('nP'))\n        # bytes\n        check(b'', vsize('n') + 1)\n        check(b'x' * 10, vsize('n') + 11)\n        # cell\n        def get_cell():\n            x = 42\n            def inner():\n                return x\n            return inner\n        check(get_cell().__closure__[0], size('P'))\n        # code\n        def check_code_size(a, expected_size):\n            self.assertGreaterEqual(sys.getsizeof(a), expected_size)\n        check_code_size(get_cell().__code__, size('6i13P'))\n        check_code_size(get_cell.__code__, size('6i13P'))\n        def get_cell2(x):\n            def inner():\n                return x\n            return inner\n        check_code_size(get_cell2.__code__, size('6i13P') + calcsize('n'))\n        # complex\n        check(complex(0,1), size('2d'))\n        # method_descriptor (descriptor object)\n        check(str.lower, size('3PPP'))\n        # classmethod_descriptor (descriptor object)\n        # XXX\n        # member_descriptor (descriptor object)\n        import datetime\n        check(datetime.timedelta.days, size('3PP'))\n        # getset_descriptor (descriptor object)\n        import collections\n        check(collections.defaultdict.default_factory, size('3PP'))\n        # wrapper_descriptor (descriptor object)\n        check(int.__add__, size('3P2P'))\n        # method-wrapper (descriptor object)\n        check({}.__iter__, size('2P'))\n        # empty dict\n        check({}, size('nQ2P'))\n        # dict\n        check({\"a\": 1}, size('nQ2P') + calcsize('2nP2n') + 8 + (8*2//3)*calcsize('n2P'))\n        longdict = {1:1, 2:2, 3:3, 4:4, 5:5, 6:6, 7:7, 8:8}\n        check(longdict, size('nQ2P') + calcsize('2nP2n') + 16 + (16*2//3)*calcsize('n2P'))\n        # dictionary-keyview\n        check({}.keys(), size('P'))\n        # dictionary-valueview\n        check({}.values(), size('P'))\n        # dictionary-itemview\n        check({}.items(), size('P'))\n        # dictionary iterator\n        check(iter({}), size('P2nPn'))\n        # dictionary-keyiterator\n        check(iter({}.keys()), size('P2nPn'))\n        # dictionary-valueiterator\n        check(iter({}.values()), size('P2nPn'))\n        # dictionary-itemiterator\n        check(iter({}.items()), size('P2nPn'))\n        # dictproxy\n        class C(object): pass\n        check(C.__dict__, size('P'))\n        # BaseException\n        check(BaseException(), size('5Pb'))\n        # UnicodeEncodeError\n        check(UnicodeEncodeError(\"\", \"\", 0, 0, \"\"), size('5Pb 2P2nP'))\n        # UnicodeDecodeError\n        check(UnicodeDecodeError(\"\", b\"\", 0, 0, \"\"), size('5Pb 2P2nP'))\n        # UnicodeTranslateError\n        check(UnicodeTranslateError(\"\", 0, 1, \"\"), size('5Pb 2P2nP'))\n        # ellipses\n        check(Ellipsis, size(''))\n        # EncodingMap\n        import codecs, encodings.iso8859_3\n        x = codecs.charmap_build(encodings.iso8859_3.decoding_table)\n        check(x, size('32B2iB'))\n        # enumerate\n        check(enumerate([]), size('n3P'))\n        # reverse\n        check(reversed(''), size('nP'))\n        # float\n        check(float(0), size('d'))\n        # sys.floatinfo\n        check(sys.float_info, vsize('') + self.P * len(sys.float_info))\n        # frame\n        import inspect\n        CO_MAXBLOCKS = 20\n        x = inspect.currentframe()\n        ncells = len(x.f_code.co_cellvars)\n        nfrees = len(x.f_code.co_freevars)\n        extras = x.f_code.co_stacksize + x.f_code.co_nlocals +\\\n                  ncells + nfrees - 1\n        check(x, vsize('5P2c4P3ic' + CO_MAXBLOCKS*'3i' + 'P' + extras*'P'))\n        # function\n        def func(): pass\n        check(func, size('13P'))\n        class c():\n            @staticmethod\n            def foo():\n                pass\n            @classmethod\n            def bar(cls):\n                pass\n            # staticmethod\n            check(foo, size('PP'))\n            # classmethod\n            check(bar, size('PP'))\n        # generator\n        def get_gen(): yield 1\n        check(get_gen(), size('Pb2PPP4P'))\n        # iterator\n        check(iter('abc'), size('lP'))\n        # callable-iterator\n        import re\n        check(re.finditer('',''), size('2P'))\n        # list\n        samples = [[], [1,2,3], ['1', '2', '3']]\n        for sample in samples:\n            check(sample, vsize('Pn') + len(sample)*self.P)\n        # sortwrapper (list)\n        # XXX\n        # cmpwrapper (list)\n        # XXX\n        # listiterator (list)\n        check(iter([]), size('lP'))\n        # listreverseiterator (list)\n        check(reversed([]), size('nP'))\n        # int\n        check(0, vsize(''))\n        check(1, vsize('') + self.longdigit)\n        check(-1, vsize('') + self.longdigit)\n        PyLong_BASE = 2**sys.int_info.bits_per_digit\n        check(int(PyLong_BASE), vsize('') + 2*self.longdigit)\n        check(int(PyLong_BASE**2-1), vsize('') + 2*self.longdigit)\n        check(int(PyLong_BASE**2), vsize('') + 3*self.longdigit)\n        # module\n        check(unittest, size('PnPPP'))\n        # None\n        check(None, size(''))\n        # NotImplementedType\n        check(NotImplemented, size(''))\n        # object\n        check(object(), size(''))\n        # property (descriptor object)\n        class C(object):\n            def getx(self): return self.__x\n            def setx(self, value): self.__x = value\n            def delx(self): del self.__x\n            x = property(getx, setx, delx, \"\")\n            check(x, size('4Pi'))\n        # PyCapsule\n        # XXX\n        # rangeiterator\n        check(iter(range(1)), size('4l'))\n        # reverse\n        check(reversed(''), size('nP'))\n        # range\n        check(range(1), size('4P'))\n        check(range(66000), size('4P'))\n        # set\n        # frozenset\n        PySet_MINSIZE = 8\n        samples = [[], range(10), range(50)]\n        s = size('3nP' + PySet_MINSIZE*'nP' + '2nP')\n        for sample in samples:\n            minused = len(sample)\n            if minused == 0: tmp = 1\n            # the computation of minused is actually a bit more complicated\n            # but this suffices for the sizeof test\n            minused = minused*2\n            newsize = PySet_MINSIZE\n            while newsize <= minused:\n                newsize = newsize << 1\n            if newsize <= 8:\n                check(set(sample), s)\n                check(frozenset(sample), s)\n            else:\n                check(set(sample), s + newsize*calcsize('nP'))\n                check(frozenset(sample), s + newsize*calcsize('nP'))\n        # setiterator\n        check(iter(set()), size('P3n'))\n        # slice\n        check(slice(0), size('3P'))\n        # super\n        check(super(int), size('3P'))\n        # tuple\n        check((), vsize(''))\n        check((1,2,3), vsize('') + 3*self.P)\n        # type\n        # static type: PyTypeObject\n        fmt = 'P2nPI13Pl4Pn9Pn11PIPPP'\n        if hasattr(sys, 'getcounts'):\n            fmt += '3n2P'\n        s = vsize(fmt)\n        check(int, s)\n        # class\n        s = vsize(fmt +                 # PyTypeObject\n                  '3P'                  # PyAsyncMethods\n                  '36P'                 # PyNumberMethods\n                  '3P'                  # PyMappingMethods\n                  '10P'                 # PySequenceMethods\n                  '2P'                  # PyBufferProcs\n                  '4P')\n        class newstyleclass(object): pass\n        # Separate block for PyDictKeysObject with 8 keys and 5 entries\n        check(newstyleclass, s + calcsize(\"2nP2n0P\") + 8 + 5*calcsize(\"n2P\"))\n        # dict with shared keys\n        check(newstyleclass().__dict__, size('nQ2P') + 5*self.P)\n        o = newstyleclass()\n        o.a = o.b = o.c = o.d = o.e = o.f = o.g = o.h = 1\n        # Separate block for PyDictKeysObject with 16 keys and 10 entries\n        check(newstyleclass, s + calcsize(\"2nP2n0P\") + 16 + 10*calcsize(\"n2P\"))\n        # dict with shared keys\n        check(newstyleclass().__dict__, size('nQ2P') + 10*self.P)\n        # unicode\n        # each tuple contains a string and its expected character size\n        # don't put any static strings here, as they may contain\n        # wchar_t or UTF-8 representations\n        samples = ['1'*100, '\\xff'*50,\n                   '\\u0100'*40, '\\uffff'*100,\n                   '\\U00010000'*30, '\\U0010ffff'*100]\n        asciifields = \"nnbP\"\n        compactfields = asciifields + \"nPn\"\n        unicodefields = compactfields + \"P\"\n        for s in samples:\n            maxchar = ord(max(s))\n            if maxchar < 128:\n                L = size(asciifields) + len(s) + 1\n            elif maxchar < 256:\n                L = size(compactfields) + len(s) + 1\n            elif maxchar < 65536:\n                L = size(compactfields) + 2*(len(s) + 1)\n            else:\n                L = size(compactfields) + 4*(len(s) + 1)\n            check(s, L)\n        # verify that the UTF-8 size is accounted for\n        s = chr(0x4000)   # 4 bytes canonical representation\n        check(s, size(compactfields) + 4)\n        # compile() will trigger the generation of the UTF-8\n        # representation as a side effect\n        compile(s, \"<stdin>\", \"eval\")\n        check(s, size(compactfields) + 4 + 4)\n        # TODO: add check that forces the presence of wchar_t representation\n        # TODO: add check that forces layout of unicodefields\n        # weakref\n        import weakref\n        check(weakref.ref(int), size('2Pn2P'))\n        # weakproxy\n        # XXX\n        # weakcallableproxy\n        check(weakref.proxy(int), size('2Pn2P'))\n\n    def check_slots(self, obj, base, extra):\n        expected = sys.getsizeof(base) + struct.calcsize(extra)\n        if gc.is_tracked(obj) and not gc.is_tracked(base):\n            expected += self.gc_headsize\n        self.assertEqual(sys.getsizeof(obj), expected)\n\n    def test_slots(self):\n        # check all subclassable types defined in Objects/ that allow\n        # non-empty __slots__\n        check = self.check_slots\n        class BA(bytearray):\n            __slots__ = 'a', 'b', 'c'\n        check(BA(), bytearray(), '3P')\n        class D(dict):\n            __slots__ = 'a', 'b', 'c'\n        check(D(x=[]), {'x': []}, '3P')\n        class L(list):\n            __slots__ = 'a', 'b', 'c'\n        check(L(), [], '3P')\n        class S(set):\n            __slots__ = 'a', 'b', 'c'\n        check(S(), set(), '3P')\n        class FS(frozenset):\n            __slots__ = 'a', 'b', 'c'\n        check(FS(), frozenset(), '3P')\n        from collections import OrderedDict\n        class OD(OrderedDict):\n            __slots__ = 'a', 'b', 'c'\n        check(OD(x=[]), OrderedDict(x=[]), '3P')\n\n    def test_pythontypes(self):\n        # check all types defined in Python/\n        size = test.support.calcobjsize\n        vsize = test.support.calcvobjsize\n        check = self.check_sizeof\n        # _ast.AST\n        import _ast\n        check(_ast.AST(), size('P'))\n        try:\n            raise TypeError\n        except TypeError:\n            tb = sys.exc_info()[2]\n            # traceback\n            if tb is not None:\n                check(tb, size('2P2i'))\n        # symtable entry\n        # XXX\n        # sys.flags\n        check(sys.flags, vsize('') + self.P * len(sys.flags))\n\n    def test_asyncgen_hooks(self):\n        old = sys.get_asyncgen_hooks()\n        self.assertIsNone(old.firstiter)\n        self.assertIsNone(old.finalizer)\n\n        firstiter = lambda *a: None\n        sys.set_asyncgen_hooks(firstiter=firstiter)\n        hooks = sys.get_asyncgen_hooks()\n        self.assertIs(hooks.firstiter, firstiter)\n        self.assertIs(hooks[0], firstiter)\n        self.assertIs(hooks.finalizer, None)\n        self.assertIs(hooks[1], None)\n\n        finalizer = lambda *a: None\n        sys.set_asyncgen_hooks(finalizer=finalizer)\n        hooks = sys.get_asyncgen_hooks()\n        self.assertIs(hooks.firstiter, firstiter)\n        self.assertIs(hooks[0], firstiter)\n        self.assertIs(hooks.finalizer, finalizer)\n        self.assertIs(hooks[1], finalizer)\n\n        sys.set_asyncgen_hooks(*old)\n        cur = sys.get_asyncgen_hooks()\n        self.assertIsNone(cur.firstiter)\n        self.assertIsNone(cur.finalizer)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Python/pystate.c": "\n/* Thread and interpreter state structures and their interfaces */\n\n#include \"Python.h\"\n#include \"pycore_ceval.h\"\n#include \"pycore_initconfig.h\"\n#include \"pycore_pymem.h\"\n#include \"pycore_pystate.h\"\n#include \"pycore_pylifecycle.h\"\n\n/* --------------------------------------------------------------------------\nCAUTION\n\nAlways use PyMem_RawMalloc() and PyMem_RawFree() directly in this file.  A\nnumber of these functions are advertised as safe to call when the GIL isn't\nheld, and in a debug build Python redirects (e.g.) PyMem_NEW (etc) to Python's\ndebugging obmalloc functions.  Those aren't thread-safe (they rely on the GIL\nto avoid the expense of doing their own locking).\n-------------------------------------------------------------------------- */\n\n#ifdef HAVE_DLOPEN\n#ifdef HAVE_DLFCN_H\n#include <dlfcn.h>\n#endif\n#if !HAVE_DECL_RTLD_LAZY\n#define RTLD_LAZY 1\n#endif\n#endif\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#define _PyRuntimeGILState_GetThreadState(gilstate) \\\n    ((PyThreadState*)_Py_atomic_load_relaxed(&(gilstate)->tstate_current))\n#define _PyRuntimeGILState_SetThreadState(gilstate, value) \\\n    _Py_atomic_store_relaxed(&(gilstate)->tstate_current, \\\n                             (uintptr_t)(value))\n\n/* Forward declarations */\nstatic PyThreadState *_PyGILState_GetThisThreadState(struct _gilstate_runtime_state *gilstate);\nstatic void _PyThreadState_Delete(_PyRuntimeState *runtime, PyThreadState *tstate);\n\n\nstatic PyStatus\n_PyRuntimeState_Init_impl(_PyRuntimeState *runtime)\n{\n    /* We preserve the hook across init, because there is\n       currently no public API to set it between runtime\n       initialization and interpreter initialization. */\n    void *open_code_hook = runtime->open_code_hook;\n    void *open_code_userdata = runtime->open_code_userdata;\n    _Py_AuditHookEntry *audit_hook_head = runtime->audit_hook_head;\n\n    memset(runtime, 0, sizeof(*runtime));\n\n    runtime->open_code_hook = open_code_hook;\n    runtime->open_code_userdata = open_code_userdata;\n    runtime->audit_hook_head = audit_hook_head;\n\n    _PyGC_Initialize(&runtime->gc);\n    _PyEval_Initialize(&runtime->ceval);\n\n    PyPreConfig_InitPythonConfig(&runtime->preconfig);\n\n    runtime->gilstate.check_enabled = 1;\n\n    /* A TSS key must be initialized with Py_tss_NEEDS_INIT\n       in accordance with the specification. */\n    Py_tss_t initial = Py_tss_NEEDS_INIT;\n    runtime->gilstate.autoTSSkey = initial;\n\n    runtime->interpreters.mutex = PyThread_allocate_lock();\n    if (runtime->interpreters.mutex == NULL) {\n        return _PyStatus_ERR(\"Can't initialize threads for interpreter\");\n    }\n    runtime->interpreters.next_id = -1;\n\n    runtime->xidregistry.mutex = PyThread_allocate_lock();\n    if (runtime->xidregistry.mutex == NULL) {\n        return _PyStatus_ERR(\"Can't initialize threads for cross-interpreter data registry\");\n    }\n\n    // Set it to the ID of the main thread of the main interpreter.\n    runtime->main_thread = PyThread_get_thread_ident();\n\n    return _PyStatus_OK();\n}\n\nPyStatus\n_PyRuntimeState_Init(_PyRuntimeState *runtime)\n{\n    /* Force default allocator, since _PyRuntimeState_Fini() must\n       use the same allocator than this function. */\n    PyMemAllocatorEx old_alloc;\n    _PyMem_SetDefaultAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n\n    PyStatus status = _PyRuntimeState_Init_impl(runtime);\n\n    PyMem_SetAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n    return status;\n}\n\nvoid\n_PyRuntimeState_Fini(_PyRuntimeState *runtime)\n{\n    /* Force the allocator used by _PyRuntimeState_Init(). */\n    PyMemAllocatorEx old_alloc;\n    _PyMem_SetDefaultAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n\n    if (runtime->interpreters.mutex != NULL) {\n        PyThread_free_lock(runtime->interpreters.mutex);\n        runtime->interpreters.mutex = NULL;\n    }\n\n    if (runtime->xidregistry.mutex != NULL) {\n        PyThread_free_lock(runtime->xidregistry.mutex);\n        runtime->xidregistry.mutex = NULL;\n    }\n\n    PyMem_SetAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n}\n\n/* This function is called from PyOS_AfterFork_Child to ensure that\n * newly created child processes do not share locks with the parent.\n */\n\nvoid\n_PyRuntimeState_ReInitThreads(_PyRuntimeState *runtime)\n{\n    // This was initially set in _PyRuntimeState_Init().\n    runtime->main_thread = PyThread_get_thread_ident();\n\n    /* Force default allocator, since _PyRuntimeState_Fini() must\n       use the same allocator than this function. */\n    PyMemAllocatorEx old_alloc;\n    _PyMem_SetDefaultAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n\n    runtime->interpreters.mutex = PyThread_allocate_lock();\n    runtime->interpreters.main->id_mutex = PyThread_allocate_lock();\n    runtime->xidregistry.mutex = PyThread_allocate_lock();\n\n    PyMem_SetAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n\n    if (runtime->interpreters.mutex == NULL) {\n        Py_FatalError(\"Can't initialize lock for runtime interpreters\");\n    }\n\n    if (runtime->interpreters.main->id_mutex == NULL) {\n        Py_FatalError(\"Can't initialize ID lock for main interpreter\");\n    }\n\n    if (runtime->xidregistry.mutex == NULL) {\n        Py_FatalError(\"Can't initialize lock for cross-interpreter data registry\");\n    }\n}\n\n#define HEAD_LOCK(runtime) \\\n    PyThread_acquire_lock((runtime)->interpreters.mutex, WAIT_LOCK)\n#define HEAD_UNLOCK(runtime) \\\n    PyThread_release_lock((runtime)->interpreters.mutex)\n\n/* Forward declaration */\nstatic void _PyGILState_NoteThreadState(\n    struct _gilstate_runtime_state *gilstate, PyThreadState* tstate);\n\nPyStatus\n_PyInterpreterState_Enable(_PyRuntimeState *runtime)\n{\n    struct pyinterpreters *interpreters = &runtime->interpreters;\n    interpreters->next_id = 0;\n\n    /* Py_Finalize() calls _PyRuntimeState_Fini() which clears the mutex.\n       Create a new mutex if needed. */\n    if (interpreters->mutex == NULL) {\n        /* Force default allocator, since _PyRuntimeState_Fini() must\n           use the same allocator than this function. */\n        PyMemAllocatorEx old_alloc;\n        _PyMem_SetDefaultAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n\n        interpreters->mutex = PyThread_allocate_lock();\n\n        PyMem_SetAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n\n        if (interpreters->mutex == NULL) {\n            return _PyStatus_ERR(\"Can't initialize threads for interpreter\");\n        }\n    }\n\n    return _PyStatus_OK();\n}\n\nPyInterpreterState *\nPyInterpreterState_New(void)\n{\n    if (PySys_Audit(\"cpython.PyInterpreterState_New\", NULL) < 0) {\n        return NULL;\n    }\n\n    PyInterpreterState *interp = PyMem_RawMalloc(sizeof(PyInterpreterState));\n    if (interp == NULL) {\n        return NULL;\n    }\n\n    memset(interp, 0, sizeof(*interp));\n    interp->id_refcount = -1;\n    interp->check_interval = 100;\n\n    PyConfig_InitPythonConfig(&interp->config);\n\n    interp->eval_frame = _PyEval_EvalFrameDefault;\n#ifdef HAVE_DLOPEN\n#if HAVE_DECL_RTLD_NOW\n    interp->dlopenflags = RTLD_NOW;\n#else\n    interp->dlopenflags = RTLD_LAZY;\n#endif\n#endif\n\n    _PyRuntimeState *runtime = &_PyRuntime;\n    struct pyinterpreters *interpreters = &runtime->interpreters;\n\n    HEAD_LOCK(runtime);\n    if (interpreters->next_id < 0) {\n        /* overflow or Py_Initialize() not called! */\n        PyErr_SetString(PyExc_RuntimeError,\n                        \"failed to get an interpreter ID\");\n        PyMem_RawFree(interp);\n        interp = NULL;\n    }\n    else {\n        interp->id = interpreters->next_id;\n        interpreters->next_id += 1;\n        interp->next = interpreters->head;\n        if (interpreters->main == NULL) {\n            interpreters->main = interp;\n        }\n        interpreters->head = interp;\n    }\n    HEAD_UNLOCK(runtime);\n\n    if (interp == NULL) {\n        return NULL;\n    }\n\n    interp->tstate_next_unique_id = 0;\n\n    interp->audit_hooks = NULL;\n\n    return interp;\n}\n\n\nstatic void\n_PyInterpreterState_Clear(_PyRuntimeState *runtime, PyInterpreterState *interp)\n{\n    if (PySys_Audit(\"cpython.PyInterpreterState_Clear\", NULL) < 0) {\n        PyErr_Clear();\n    }\n\n    HEAD_LOCK(runtime);\n    for (PyThreadState *p = interp->tstate_head; p != NULL; p = p->next) {\n        PyThreadState_Clear(p);\n    }\n    HEAD_UNLOCK(runtime);\n\n    Py_CLEAR(interp->audit_hooks);\n\n    PyConfig_Clear(&interp->config);\n    Py_CLEAR(interp->codec_search_path);\n    Py_CLEAR(interp->codec_search_cache);\n    Py_CLEAR(interp->codec_error_registry);\n    Py_CLEAR(interp->modules);\n    Py_CLEAR(interp->modules_by_index);\n    Py_CLEAR(interp->sysdict);\n    Py_CLEAR(interp->builtins);\n    Py_CLEAR(interp->builtins_copy);\n    Py_CLEAR(interp->importlib);\n    Py_CLEAR(interp->import_func);\n    Py_CLEAR(interp->dict);\n#ifdef HAVE_FORK\n    Py_CLEAR(interp->before_forkers);\n    Py_CLEAR(interp->after_forkers_parent);\n    Py_CLEAR(interp->after_forkers_child);\n#endif\n    if (runtime->finalizing == NULL) {\n        _PyWarnings_Fini(interp);\n    }\n    // XXX Once we have one allocator per interpreter (i.e.\n    // per-interpreter GC) we must ensure that all of the interpreter's\n    // objects have been cleaned up at the point.\n}\n\nvoid\nPyInterpreterState_Clear(PyInterpreterState *interp)\n{\n    _PyInterpreterState_Clear(&_PyRuntime, interp);\n}\n\n\nstatic void\nzapthreads(_PyRuntimeState *runtime, PyInterpreterState *interp)\n{\n    PyThreadState *p;\n    /* No need to lock the mutex here because this should only happen\n       when the threads are all really dead (XXX famous last words). */\n    while ((p = interp->tstate_head) != NULL) {\n        _PyThreadState_Delete(runtime, p);\n    }\n}\n\n\nstatic void\n_PyInterpreterState_Delete(_PyRuntimeState *runtime,\n                           PyInterpreterState *interp)\n{\n    struct pyinterpreters *interpreters = &runtime->interpreters;\n    zapthreads(runtime, interp);\n    HEAD_LOCK(runtime);\n    PyInterpreterState **p;\n    for (p = &interpreters->head; ; p = &(*p)->next) {\n        if (*p == NULL) {\n            Py_FatalError(\"PyInterpreterState_Delete: invalid interp\");\n        }\n        if (*p == interp) {\n            break;\n        }\n    }\n    if (interp->tstate_head != NULL) {\n        Py_FatalError(\"PyInterpreterState_Delete: remaining threads\");\n    }\n    *p = interp->next;\n    if (interpreters->main == interp) {\n        interpreters->main = NULL;\n        if (interpreters->head != NULL) {\n            Py_FatalError(\"PyInterpreterState_Delete: remaining subinterpreters\");\n        }\n    }\n    HEAD_UNLOCK(runtime);\n    if (interp->id_mutex != NULL) {\n        PyThread_free_lock(interp->id_mutex);\n    }\n    PyMem_RawFree(interp);\n}\n\n\nvoid\nPyInterpreterState_Delete(PyInterpreterState *interp)\n{\n    _PyInterpreterState_Delete(&_PyRuntime, interp);\n}\n\n\n/*\n * Delete all interpreter states except the main interpreter.  If there\n * is a current interpreter state, it *must* be the main interpreter.\n */\nvoid\n_PyInterpreterState_DeleteExceptMain(_PyRuntimeState *runtime)\n{\n    struct _gilstate_runtime_state *gilstate = &runtime->gilstate;\n    struct pyinterpreters *interpreters = &runtime->interpreters;\n\n    PyThreadState *tstate = _PyThreadState_Swap(gilstate, NULL);\n    if (tstate != NULL && tstate->interp != interpreters->main) {\n        Py_FatalError(\"PyInterpreterState_DeleteExceptMain: not main interpreter\");\n    }\n\n    HEAD_LOCK(runtime);\n    PyInterpreterState *interp = interpreters->head;\n    interpreters->head = NULL;\n    while (interp != NULL) {\n        if (interp == interpreters->main) {\n            interpreters->main->next = NULL;\n            interpreters->head = interp;\n            interp = interp->next;\n            continue;\n        }\n\n        _PyInterpreterState_Clear(runtime, interp);  // XXX must activate?\n        zapthreads(runtime, interp);\n        if (interp->id_mutex != NULL) {\n            PyThread_free_lock(interp->id_mutex);\n        }\n        PyInterpreterState *prev_interp = interp;\n        interp = interp->next;\n        PyMem_RawFree(prev_interp);\n    }\n    HEAD_UNLOCK(runtime);\n\n    if (interpreters->head == NULL) {\n        Py_FatalError(\"PyInterpreterState_DeleteExceptMain: missing main\");\n    }\n    _PyThreadState_Swap(gilstate, tstate);\n}\n\n\nPyInterpreterState *\n_PyInterpreterState_Get(void)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    if (tstate == NULL) {\n        Py_FatalError(\"_PyInterpreterState_Get(): no current thread state\");\n    }\n    PyInterpreterState *interp = tstate->interp;\n    if (interp == NULL) {\n        Py_FatalError(\"_PyInterpreterState_Get(): no current interpreter\");\n    }\n    return interp;\n}\n\n\nint64_t\nPyInterpreterState_GetID(PyInterpreterState *interp)\n{\n    if (interp == NULL) {\n        PyErr_SetString(PyExc_RuntimeError, \"no interpreter provided\");\n        return -1;\n    }\n    return interp->id;\n}\n\n\nstatic PyInterpreterState *\ninterp_look_up_id(_PyRuntimeState *runtime, PY_INT64_T requested_id)\n{\n    PyInterpreterState *interp = runtime->interpreters.head;\n    while (interp != NULL) {\n        PY_INT64_T id = PyInterpreterState_GetID(interp);\n        if (id < 0) {\n            return NULL;\n        }\n        if (requested_id == id) {\n            return interp;\n        }\n        interp = PyInterpreterState_Next(interp);\n    }\n    return NULL;\n}\n\nPyInterpreterState *\n_PyInterpreterState_LookUpID(PY_INT64_T requested_id)\n{\n    PyInterpreterState *interp = NULL;\n    if (requested_id >= 0) {\n        _PyRuntimeState *runtime = &_PyRuntime;\n        HEAD_LOCK(runtime);\n        interp = interp_look_up_id(runtime, requested_id);\n        HEAD_UNLOCK(runtime);\n    }\n    if (interp == NULL && !PyErr_Occurred()) {\n        PyErr_Format(PyExc_RuntimeError,\n                     \"unrecognized interpreter ID %lld\", requested_id);\n    }\n    return interp;\n}\n\n\nint\n_PyInterpreterState_IDInitref(PyInterpreterState *interp)\n{\n    if (interp->id_mutex != NULL) {\n        return 0;\n    }\n    interp->id_mutex = PyThread_allocate_lock();\n    if (interp->id_mutex == NULL) {\n        PyErr_SetString(PyExc_RuntimeError,\n                        \"failed to create init interpreter ID mutex\");\n        return -1;\n    }\n    interp->id_refcount = 0;\n    return 0;\n}\n\n\nvoid\n_PyInterpreterState_IDIncref(PyInterpreterState *interp)\n{\n    if (interp->id_mutex == NULL) {\n        return;\n    }\n    PyThread_acquire_lock(interp->id_mutex, WAIT_LOCK);\n    interp->id_refcount += 1;\n    PyThread_release_lock(interp->id_mutex);\n}\n\n\nvoid\n_PyInterpreterState_IDDecref(PyInterpreterState *interp)\n{\n    if (interp->id_mutex == NULL) {\n        return;\n    }\n    struct _gilstate_runtime_state *gilstate = &_PyRuntime.gilstate;\n    PyThread_acquire_lock(interp->id_mutex, WAIT_LOCK);\n    assert(interp->id_refcount != 0);\n    interp->id_refcount -= 1;\n    int64_t refcount = interp->id_refcount;\n    PyThread_release_lock(interp->id_mutex);\n\n    if (refcount == 0 && interp->requires_idref) {\n        // XXX Using the \"head\" thread isn't strictly correct.\n        PyThreadState *tstate = PyInterpreterState_ThreadHead(interp);\n        // XXX Possible GILState issues?\n        PyThreadState *save_tstate = _PyThreadState_Swap(gilstate, tstate);\n        Py_EndInterpreter(tstate);\n        _PyThreadState_Swap(gilstate, save_tstate);\n    }\n}\n\nint\n_PyInterpreterState_RequiresIDRef(PyInterpreterState *interp)\n{\n    return interp->requires_idref;\n}\n\nvoid\n_PyInterpreterState_RequireIDRef(PyInterpreterState *interp, int required)\n{\n    interp->requires_idref = required ? 1 : 0;\n}\n\nPyObject *\n_PyInterpreterState_GetMainModule(PyInterpreterState *interp)\n{\n    if (interp->modules == NULL) {\n        PyErr_SetString(PyExc_RuntimeError, \"interpreter not initialized\");\n        return NULL;\n    }\n    return PyMapping_GetItemString(interp->modules, \"__main__\");\n}\n\nPyObject *\nPyInterpreterState_GetDict(PyInterpreterState *interp)\n{\n    if (interp->dict == NULL) {\n        interp->dict = PyDict_New();\n        if (interp->dict == NULL) {\n            PyErr_Clear();\n        }\n    }\n    /* Returning NULL means no per-interpreter dict is available. */\n    return interp->dict;\n}\n\n/* Default implementation for _PyThreadState_GetFrame */\nstatic struct _frame *\nthreadstate_getframe(PyThreadState *self)\n{\n    return self->frame;\n}\n\nstatic PyThreadState *\nnew_threadstate(PyInterpreterState *interp, int init)\n{\n    _PyRuntimeState *runtime = &_PyRuntime;\n    PyThreadState *tstate = (PyThreadState *)PyMem_RawMalloc(sizeof(PyThreadState));\n    if (tstate == NULL) {\n        return NULL;\n    }\n\n    if (_PyThreadState_GetFrame == NULL) {\n        _PyThreadState_GetFrame = threadstate_getframe;\n    }\n\n    tstate->interp = interp;\n\n    tstate->frame = NULL;\n    tstate->recursion_depth = 0;\n    tstate->overflowed = 0;\n    tstate->recursion_critical = 0;\n    tstate->stackcheck_counter = 0;\n    tstate->tracing = 0;\n    tstate->use_tracing = 0;\n    tstate->gilstate_counter = 0;\n    tstate->async_exc = NULL;\n    tstate->thread_id = PyThread_get_thread_ident();\n\n    tstate->dict = NULL;\n\n    tstate->curexc_type = NULL;\n    tstate->curexc_value = NULL;\n    tstate->curexc_traceback = NULL;\n\n    tstate->exc_state.exc_type = NULL;\n    tstate->exc_state.exc_value = NULL;\n    tstate->exc_state.exc_traceback = NULL;\n    tstate->exc_state.previous_item = NULL;\n    tstate->exc_info = &tstate->exc_state;\n\n    tstate->c_profilefunc = NULL;\n    tstate->c_tracefunc = NULL;\n    tstate->c_profileobj = NULL;\n    tstate->c_traceobj = NULL;\n\n    tstate->trash_delete_nesting = 0;\n    tstate->trash_delete_later = NULL;\n    tstate->on_delete = NULL;\n    tstate->on_delete_data = NULL;\n\n    tstate->coroutine_origin_tracking_depth = 0;\n\n    tstate->async_gen_firstiter = NULL;\n    tstate->async_gen_finalizer = NULL;\n\n    tstate->context = NULL;\n    tstate->context_ver = 1;\n\n    if (init) {\n        _PyThreadState_Init(runtime, tstate);\n    }\n\n    HEAD_LOCK(runtime);\n    tstate->id = ++interp->tstate_next_unique_id;\n    tstate->prev = NULL;\n    tstate->next = interp->tstate_head;\n    if (tstate->next)\n        tstate->next->prev = tstate;\n    interp->tstate_head = tstate;\n    HEAD_UNLOCK(runtime);\n\n    return tstate;\n}\n\nPyThreadState *\nPyThreadState_New(PyInterpreterState *interp)\n{\n    return new_threadstate(interp, 1);\n}\n\nPyThreadState *\n_PyThreadState_Prealloc(PyInterpreterState *interp)\n{\n    return new_threadstate(interp, 0);\n}\n\nvoid\n_PyThreadState_Init(_PyRuntimeState *runtime, PyThreadState *tstate)\n{\n    _PyGILState_NoteThreadState(&runtime->gilstate, tstate);\n}\n\nPyObject*\nPyState_FindModule(struct PyModuleDef* module)\n{\n    Py_ssize_t index = module->m_base.m_index;\n    PyInterpreterState *state = _PyInterpreterState_GET_UNSAFE();\n    PyObject *res;\n    if (module->m_slots) {\n        return NULL;\n    }\n    if (index == 0)\n        return NULL;\n    if (state->modules_by_index == NULL)\n        return NULL;\n    if (index >= PyList_GET_SIZE(state->modules_by_index))\n        return NULL;\n    res = PyList_GET_ITEM(state->modules_by_index, index);\n    return res==Py_None ? NULL : res;\n}\n\nint\n_PyState_AddModule(PyObject* module, struct PyModuleDef* def)\n{\n    PyInterpreterState *state;\n    if (!def) {\n        assert(PyErr_Occurred());\n        return -1;\n    }\n    if (def->m_slots) {\n        PyErr_SetString(PyExc_SystemError,\n                        \"PyState_AddModule called on module with slots\");\n        return -1;\n    }\n    state = _PyInterpreterState_GET_UNSAFE();\n    if (!state->modules_by_index) {\n        state->modules_by_index = PyList_New(0);\n        if (!state->modules_by_index)\n            return -1;\n    }\n    while (PyList_GET_SIZE(state->modules_by_index) <= def->m_base.m_index)\n        if (PyList_Append(state->modules_by_index, Py_None) < 0)\n            return -1;\n    Py_INCREF(module);\n    return PyList_SetItem(state->modules_by_index,\n                          def->m_base.m_index, module);\n}\n\nint\nPyState_AddModule(PyObject* module, struct PyModuleDef* def)\n{\n    Py_ssize_t index;\n    PyInterpreterState *state = _PyInterpreterState_GET_UNSAFE();\n    if (!def) {\n        Py_FatalError(\"PyState_AddModule: Module Definition is NULL\");\n        return -1;\n    }\n    index = def->m_base.m_index;\n    if (state->modules_by_index &&\n        index < PyList_GET_SIZE(state->modules_by_index) &&\n        module == PyList_GET_ITEM(state->modules_by_index, index)) {\n        Py_FatalError(\"PyState_AddModule: Module already added!\");\n        return -1;\n    }\n    return _PyState_AddModule(module, def);\n}\n\nint\nPyState_RemoveModule(struct PyModuleDef* def)\n{\n    PyInterpreterState *state;\n    Py_ssize_t index = def->m_base.m_index;\n    if (def->m_slots) {\n        PyErr_SetString(PyExc_SystemError,\n                        \"PyState_RemoveModule called on module with slots\");\n        return -1;\n    }\n    state = _PyInterpreterState_GET_UNSAFE();\n    if (index == 0) {\n        Py_FatalError(\"PyState_RemoveModule: Module index invalid.\");\n        return -1;\n    }\n    if (state->modules_by_index == NULL) {\n        Py_FatalError(\"PyState_RemoveModule: Interpreters module-list not accessible.\");\n        return -1;\n    }\n    if (index > PyList_GET_SIZE(state->modules_by_index)) {\n        Py_FatalError(\"PyState_RemoveModule: Module index out of bounds.\");\n        return -1;\n    }\n    Py_INCREF(Py_None);\n    return PyList_SetItem(state->modules_by_index, index, Py_None);\n}\n\n/* used by import.c:PyImport_Cleanup */\nvoid\n_PyState_ClearModules(void)\n{\n    PyInterpreterState *state = _PyInterpreterState_GET_UNSAFE();\n    if (state->modules_by_index) {\n        Py_ssize_t i;\n        for (i = 0; i < PyList_GET_SIZE(state->modules_by_index); i++) {\n            PyObject *m = PyList_GET_ITEM(state->modules_by_index, i);\n            if (PyModule_Check(m)) {\n                /* cleanup the saved copy of module dicts */\n                PyModuleDef *md = PyModule_GetDef(m);\n                if (md)\n                    Py_CLEAR(md->m_base.m_copy);\n            }\n        }\n        /* Setting modules_by_index to NULL could be dangerous, so we\n           clear the list instead. */\n        if (PyList_SetSlice(state->modules_by_index,\n                            0, PyList_GET_SIZE(state->modules_by_index),\n                            NULL))\n            PyErr_WriteUnraisable(state->modules_by_index);\n    }\n}\n\nvoid\nPyThreadState_Clear(PyThreadState *tstate)\n{\n    int verbose = tstate->interp->config.verbose;\n\n    if (verbose && tstate->frame != NULL) {\n        /* bpo-20526: After the main thread calls\n           _PyRuntimeState_SetFinalizing() in Py_FinalizeEx(), threads must\n           exit when trying to take the GIL. If a thread exit in the middle of\n           _PyEval_EvalFrameDefault(), tstate->frame is not reset to its\n           previous value. It is more likely with daemon threads, but it can\n           happen with regular threads if threading._shutdown() fails\n           (ex: interrupted by CTRL+C). */\n        fprintf(stderr,\n          \"PyThreadState_Clear: warning: thread still has a frame\\n\");\n    }\n\n    /* Don't clear tstate->frame: it is a borrowed reference */\n\n    Py_CLEAR(tstate->dict);\n    Py_CLEAR(tstate->async_exc);\n\n    Py_CLEAR(tstate->curexc_type);\n    Py_CLEAR(tstate->curexc_value);\n    Py_CLEAR(tstate->curexc_traceback);\n\n    Py_CLEAR(tstate->exc_state.exc_type);\n    Py_CLEAR(tstate->exc_state.exc_value);\n    Py_CLEAR(tstate->exc_state.exc_traceback);\n\n    /* The stack of exception states should contain just this thread. */\n    if (verbose && tstate->exc_info != &tstate->exc_state) {\n        fprintf(stderr,\n          \"PyThreadState_Clear: warning: thread still has a generator\\n\");\n    }\n\n    tstate->c_profilefunc = NULL;\n    tstate->c_tracefunc = NULL;\n    Py_CLEAR(tstate->c_profileobj);\n    Py_CLEAR(tstate->c_traceobj);\n\n    Py_CLEAR(tstate->async_gen_firstiter);\n    Py_CLEAR(tstate->async_gen_finalizer);\n\n    Py_CLEAR(tstate->context);\n}\n\n\n/* Common code for PyThreadState_Delete() and PyThreadState_DeleteCurrent() */\nstatic void\ntstate_delete_common(_PyRuntimeState *runtime, PyThreadState *tstate)\n{\n    if (tstate == NULL) {\n        Py_FatalError(\"PyThreadState_Delete: NULL tstate\");\n    }\n    PyInterpreterState *interp = tstate->interp;\n    if (interp == NULL) {\n        Py_FatalError(\"PyThreadState_Delete: NULL interp\");\n    }\n    HEAD_LOCK(runtime);\n    if (tstate->prev)\n        tstate->prev->next = tstate->next;\n    else\n        interp->tstate_head = tstate->next;\n    if (tstate->next)\n        tstate->next->prev = tstate->prev;\n    HEAD_UNLOCK(runtime);\n    if (tstate->on_delete != NULL) {\n        tstate->on_delete(tstate->on_delete_data);\n    }\n    PyMem_RawFree(tstate);\n}\n\n\nstatic void\n_PyThreadState_Delete(_PyRuntimeState *runtime, PyThreadState *tstate)\n{\n    struct _gilstate_runtime_state *gilstate = &runtime->gilstate;\n    if (tstate == _PyRuntimeGILState_GetThreadState(gilstate)) {\n        Py_FatalError(\"PyThreadState_Delete: tstate is still current\");\n    }\n    if (gilstate->autoInterpreterState &&\n        PyThread_tss_get(&gilstate->autoTSSkey) == tstate)\n    {\n        PyThread_tss_set(&gilstate->autoTSSkey, NULL);\n    }\n    tstate_delete_common(runtime, tstate);\n}\n\n\nvoid\nPyThreadState_Delete(PyThreadState *tstate)\n{\n    _PyThreadState_Delete(&_PyRuntime, tstate);\n}\n\n\nstatic void\n_PyThreadState_DeleteCurrent(_PyRuntimeState *runtime)\n{\n    struct _gilstate_runtime_state *gilstate = &runtime->gilstate;\n    PyThreadState *tstate = _PyRuntimeGILState_GetThreadState(gilstate);\n    if (tstate == NULL)\n        Py_FatalError(\n            \"PyThreadState_DeleteCurrent: no current tstate\");\n    tstate_delete_common(runtime, tstate);\n    if (gilstate->autoInterpreterState &&\n        PyThread_tss_get(&gilstate->autoTSSkey) == tstate)\n    {\n        PyThread_tss_set(&gilstate->autoTSSkey, NULL);\n    }\n    _PyRuntimeGILState_SetThreadState(gilstate, NULL);\n    PyEval_ReleaseLock();\n}\n\nvoid\nPyThreadState_DeleteCurrent()\n{\n    _PyThreadState_DeleteCurrent(&_PyRuntime);\n}\n\n\n/*\n * Delete all thread states except the one passed as argument.\n * Note that, if there is a current thread state, it *must* be the one\n * passed as argument.  Also, this won't touch any other interpreters\n * than the current one, since we don't know which thread state should\n * be kept in those other interpreters.\n */\nvoid\n_PyThreadState_DeleteExcept(_PyRuntimeState *runtime, PyThreadState *tstate)\n{\n    PyInterpreterState *interp = tstate->interp;\n    PyThreadState *p, *next, *garbage;\n    HEAD_LOCK(runtime);\n    /* Remove all thread states, except tstate, from the linked list of\n       thread states.  This will allow calling PyThreadState_Clear()\n       without holding the lock. */\n    garbage = interp->tstate_head;\n    if (garbage == tstate)\n        garbage = tstate->next;\n    if (tstate->prev)\n        tstate->prev->next = tstate->next;\n    if (tstate->next)\n        tstate->next->prev = tstate->prev;\n    tstate->prev = tstate->next = NULL;\n    interp->tstate_head = tstate;\n    HEAD_UNLOCK(runtime);\n    /* Clear and deallocate all stale thread states.  Even if this\n       executes Python code, we should be safe since it executes\n       in the current thread, not one of the stale threads. */\n    for (p = garbage; p; p = next) {\n        next = p->next;\n        PyThreadState_Clear(p);\n        PyMem_RawFree(p);\n    }\n}\n\n\nPyThreadState *\n_PyThreadState_UncheckedGet(void)\n{\n    return _PyThreadState_GET();\n}\n\n\nPyThreadState *\nPyThreadState_Get(void)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    if (tstate == NULL)\n        Py_FatalError(\"PyThreadState_Get: no current thread\");\n\n    return tstate;\n}\n\n\nPyThreadState *\n_PyThreadState_Swap(struct _gilstate_runtime_state *gilstate, PyThreadState *newts)\n{\n    PyThreadState *oldts = _PyRuntimeGILState_GetThreadState(gilstate);\n\n    _PyRuntimeGILState_SetThreadState(gilstate, newts);\n    /* It should not be possible for more than one thread state\n       to be used for a thread.  Check this the best we can in debug\n       builds.\n    */\n#if defined(Py_DEBUG)\n    if (newts) {\n        /* This can be called from PyEval_RestoreThread(). Similar\n           to it, we need to ensure errno doesn't change.\n        */\n        int err = errno;\n        PyThreadState *check = _PyGILState_GetThisThreadState(gilstate);\n        if (check && check->interp == newts->interp && check != newts)\n            Py_FatalError(\"Invalid thread state for this thread\");\n        errno = err;\n    }\n#endif\n    return oldts;\n}\n\nPyThreadState *\nPyThreadState_Swap(PyThreadState *newts)\n{\n    return _PyThreadState_Swap(&_PyRuntime.gilstate, newts);\n}\n\n/* An extension mechanism to store arbitrary additional per-thread state.\n   PyThreadState_GetDict() returns a dictionary that can be used to hold such\n   state; the caller should pick a unique key and store its state there.  If\n   PyThreadState_GetDict() returns NULL, an exception has *not* been raised\n   and the caller should assume no per-thread state is available. */\n\nPyObject *\nPyThreadState_GetDict(void)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    if (tstate == NULL)\n        return NULL;\n\n    if (tstate->dict == NULL) {\n        PyObject *d;\n        tstate->dict = d = PyDict_New();\n        if (d == NULL)\n            PyErr_Clear();\n    }\n    return tstate->dict;\n}\n\n\n/* Asynchronously raise an exception in a thread.\n   Requested by Just van Rossum and Alex Martelli.\n   To prevent naive misuse, you must write your own extension\n   to call this, or use ctypes.  Must be called with the GIL held.\n   Returns the number of tstates modified (normally 1, but 0 if `id` didn't\n   match any known thread id).  Can be called with exc=NULL to clear an\n   existing async exception.  This raises no exceptions. */\n\nint\nPyThreadState_SetAsyncExc(unsigned long id, PyObject *exc)\n{\n    _PyRuntimeState *runtime = &_PyRuntime;\n    PyInterpreterState *interp = _PyRuntimeState_GetThreadState(runtime)->interp;\n\n    /* Although the GIL is held, a few C API functions can be called\n     * without the GIL held, and in particular some that create and\n     * destroy thread and interpreter states.  Those can mutate the\n     * list of thread states we're traversing, so to prevent that we lock\n     * head_mutex for the duration.\n     */\n    HEAD_LOCK(runtime);\n    for (PyThreadState *p = interp->tstate_head; p != NULL; p = p->next) {\n        if (p->thread_id == id) {\n            /* Tricky:  we need to decref the current value\n             * (if any) in p->async_exc, but that can in turn\n             * allow arbitrary Python code to run, including\n             * perhaps calls to this function.  To prevent\n             * deadlock, we need to release head_mutex before\n             * the decref.\n             */\n            PyObject *old_exc = p->async_exc;\n            Py_XINCREF(exc);\n            p->async_exc = exc;\n            HEAD_UNLOCK(runtime);\n            Py_XDECREF(old_exc);\n            _PyEval_SignalAsyncExc(&runtime->ceval);\n            return 1;\n        }\n    }\n    HEAD_UNLOCK(runtime);\n    return 0;\n}\n\n\n/* Routines for advanced debuggers, requested by David Beazley.\n   Don't use unless you know what you are doing! */\n\nPyInterpreterState *\nPyInterpreterState_Head(void)\n{\n    return _PyRuntime.interpreters.head;\n}\n\nPyInterpreterState *\nPyInterpreterState_Main(void)\n{\n    return _PyRuntime.interpreters.main;\n}\n\nPyInterpreterState *\nPyInterpreterState_Next(PyInterpreterState *interp) {\n    return interp->next;\n}\n\nPyThreadState *\nPyInterpreterState_ThreadHead(PyInterpreterState *interp) {\n    return interp->tstate_head;\n}\n\nPyThreadState *\nPyThreadState_Next(PyThreadState *tstate) {\n    return tstate->next;\n}\n\n/* The implementation of sys._current_frames().  This is intended to be\n   called with the GIL held, as it will be when called via\n   sys._current_frames().  It's possible it would work fine even without\n   the GIL held, but haven't thought enough about that.\n*/\nPyObject *\n_PyThread_CurrentFrames(void)\n{\n    PyObject *result;\n    PyInterpreterState *i;\n\n    if (PySys_Audit(\"sys._current_frames\", NULL) < 0) {\n        return NULL;\n    }\n\n    result = PyDict_New();\n    if (result == NULL)\n        return NULL;\n\n    /* for i in all interpreters:\n     *     for t in all of i's thread states:\n     *          if t's frame isn't NULL, map t's id to its frame\n     * Because these lists can mutate even when the GIL is held, we\n     * need to grab head_mutex for the duration.\n     */\n    _PyRuntimeState *runtime = &_PyRuntime;\n    HEAD_LOCK(runtime);\n    for (i = runtime->interpreters.head; i != NULL; i = i->next) {\n        PyThreadState *t;\n        for (t = i->tstate_head; t != NULL; t = t->next) {\n            PyObject *id;\n            int stat;\n            struct _frame *frame = t->frame;\n            if (frame == NULL)\n                continue;\n            id = PyLong_FromUnsignedLong(t->thread_id);\n            if (id == NULL)\n                goto Fail;\n            stat = PyDict_SetItem(result, id, (PyObject *)frame);\n            Py_DECREF(id);\n            if (stat < 0)\n                goto Fail;\n        }\n    }\n    HEAD_UNLOCK(runtime);\n    return result;\n\n Fail:\n    HEAD_UNLOCK(runtime);\n    Py_DECREF(result);\n    return NULL;\n}\n\n/* Python \"auto thread state\" API. */\n\n/* Keep this as a static, as it is not reliable!  It can only\n   ever be compared to the state for the *current* thread.\n   * If not equal, then it doesn't matter that the actual\n     value may change immediately after comparison, as it can't\n     possibly change to the current thread's state.\n   * If equal, then the current thread holds the lock, so the value can't\n     change until we yield the lock.\n*/\nstatic int\nPyThreadState_IsCurrent(PyThreadState *tstate)\n{\n    /* Must be the tstate for this thread */\n    struct _gilstate_runtime_state *gilstate = &_PyRuntime.gilstate;\n    assert(_PyGILState_GetThisThreadState(gilstate) == tstate);\n    return tstate == _PyRuntimeGILState_GetThreadState(gilstate);\n}\n\n/* Internal initialization/finalization functions called by\n   Py_Initialize/Py_FinalizeEx\n*/\nvoid\n_PyGILState_Init(_PyRuntimeState *runtime,\n                 PyInterpreterState *interp, PyThreadState *tstate)\n{\n    /* must init with valid states */\n    assert(interp != NULL);\n    assert(tstate != NULL);\n\n    struct _gilstate_runtime_state *gilstate = &runtime->gilstate;\n\n    if (PyThread_tss_create(&gilstate->autoTSSkey) != 0) {\n        Py_FatalError(\"Could not allocate TSS entry\");\n    }\n    gilstate->autoInterpreterState = interp;\n    assert(PyThread_tss_get(&gilstate->autoTSSkey) == NULL);\n    assert(tstate->gilstate_counter == 0);\n\n    _PyGILState_NoteThreadState(gilstate, tstate);\n}\n\nPyInterpreterState *\n_PyGILState_GetInterpreterStateUnsafe(void)\n{\n    return _PyRuntime.gilstate.autoInterpreterState;\n}\n\nvoid\n_PyGILState_Fini(_PyRuntimeState *runtime)\n{\n    struct _gilstate_runtime_state *gilstate = &runtime->gilstate;\n    PyThread_tss_delete(&gilstate->autoTSSkey);\n    gilstate->autoInterpreterState = NULL;\n}\n\n/* Reset the TSS key - called by PyOS_AfterFork_Child().\n * This should not be necessary, but some - buggy - pthread implementations\n * don't reset TSS upon fork(), see issue #10517.\n */\nvoid\n_PyGILState_Reinit(_PyRuntimeState *runtime)\n{\n    struct _gilstate_runtime_state *gilstate = &runtime->gilstate;\n    PyThreadState *tstate = _PyGILState_GetThisThreadState(gilstate);\n\n    PyThread_tss_delete(&gilstate->autoTSSkey);\n    if (PyThread_tss_create(&gilstate->autoTSSkey) != 0) {\n        Py_FatalError(\"Could not allocate TSS entry\");\n    }\n\n    /* If the thread had an associated auto thread state, reassociate it with\n     * the new key. */\n    if (tstate &&\n        PyThread_tss_set(&gilstate->autoTSSkey, (void *)tstate) != 0)\n    {\n        Py_FatalError(\"Couldn't create autoTSSkey mapping\");\n    }\n}\n\n/* When a thread state is created for a thread by some mechanism other than\n   PyGILState_Ensure, it's important that the GILState machinery knows about\n   it so it doesn't try to create another thread state for the thread (this is\n   a better fix for SF bug #1010677 than the first one attempted).\n*/\nstatic void\n_PyGILState_NoteThreadState(struct _gilstate_runtime_state *gilstate, PyThreadState* tstate)\n{\n    /* If autoTSSkey isn't initialized, this must be the very first\n       threadstate created in Py_Initialize().  Don't do anything for now\n       (we'll be back here when _PyGILState_Init is called). */\n    if (!gilstate->autoInterpreterState) {\n        return;\n    }\n\n    /* Stick the thread state for this thread in thread specific storage.\n\n       The only situation where you can legitimately have more than one\n       thread state for an OS level thread is when there are multiple\n       interpreters.\n\n       You shouldn't really be using the PyGILState_ APIs anyway (see issues\n       #10915 and #15751).\n\n       The first thread state created for that given OS level thread will\n       \"win\", which seems reasonable behaviour.\n    */\n    if (PyThread_tss_get(&gilstate->autoTSSkey) == NULL) {\n        if ((PyThread_tss_set(&gilstate->autoTSSkey, (void *)tstate)) != 0) {\n            Py_FatalError(\"Couldn't create autoTSSkey mapping\");\n        }\n    }\n\n    /* PyGILState_Release must not try to delete this thread state. */\n    tstate->gilstate_counter = 1;\n}\n\n/* The public functions */\nstatic PyThreadState *\n_PyGILState_GetThisThreadState(struct _gilstate_runtime_state *gilstate)\n{\n    if (gilstate->autoInterpreterState == NULL)\n        return NULL;\n    return (PyThreadState *)PyThread_tss_get(&gilstate->autoTSSkey);\n}\n\nPyThreadState *\nPyGILState_GetThisThreadState(void)\n{\n    return _PyGILState_GetThisThreadState(&_PyRuntime.gilstate);\n}\n\nint\nPyGILState_Check(void)\n{\n\n    if (!_PyGILState_check_enabled) {\n        return 1;\n    }\n\n    struct _gilstate_runtime_state *gilstate = &_PyRuntime.gilstate;\n    if (!PyThread_tss_is_created(&gilstate->autoTSSkey)) {\n        return 1;\n    }\n\n    PyThreadState *tstate = _PyRuntimeGILState_GetThreadState(gilstate);\n    if (tstate == NULL) {\n        return 0;\n    }\n\n    return (tstate == _PyGILState_GetThisThreadState(gilstate));\n}\n\nPyGILState_STATE\nPyGILState_Ensure(void)\n{\n    struct _gilstate_runtime_state *gilstate = &_PyRuntime.gilstate;\n    int current;\n    PyThreadState *tcur;\n    int need_init_threads = 0;\n\n    /* Note that we do not auto-init Python here - apart from\n       potential races with 2 threads auto-initializing, pep-311\n       spells out other issues.  Embedders are expected to have\n       called Py_Initialize() and usually PyEval_InitThreads().\n    */\n    /* Py_Initialize() hasn't been called! */\n    assert(gilstate->autoInterpreterState);\n\n    tcur = (PyThreadState *)PyThread_tss_get(&gilstate->autoTSSkey);\n    if (tcur == NULL) {\n        need_init_threads = 1;\n\n        /* Create a new thread state for this thread */\n        tcur = PyThreadState_New(gilstate->autoInterpreterState);\n        if (tcur == NULL)\n            Py_FatalError(\"Couldn't create thread-state for new thread\");\n        /* This is our thread state!  We'll need to delete it in the\n           matching call to PyGILState_Release(). */\n        tcur->gilstate_counter = 0;\n        current = 0; /* new thread state is never current */\n    }\n    else {\n        current = PyThreadState_IsCurrent(tcur);\n    }\n\n    if (current == 0) {\n        PyEval_RestoreThread(tcur);\n    }\n\n    /* Update our counter in the thread-state - no need for locks:\n       - tcur will remain valid as we hold the GIL.\n       - the counter is safe as we are the only thread \"allowed\"\n         to modify this value\n    */\n    ++tcur->gilstate_counter;\n\n    if (need_init_threads) {\n        /* At startup, Python has no concrete GIL. If PyGILState_Ensure() is\n           called from a new thread for the first time, we need the create the\n           GIL. */\n        PyEval_InitThreads();\n    }\n\n    return current ? PyGILState_LOCKED : PyGILState_UNLOCKED;\n}\n\nvoid\nPyGILState_Release(PyGILState_STATE oldstate)\n{\n    _PyRuntimeState *runtime = &_PyRuntime;\n    PyThreadState *tcur = PyThread_tss_get(&runtime->gilstate.autoTSSkey);\n    if (tcur == NULL) {\n        Py_FatalError(\"auto-releasing thread-state, \"\n                      \"but no thread-state for this thread\");\n    }\n\n    /* We must hold the GIL and have our thread state current */\n    /* XXX - remove the check - the assert should be fine,\n       but while this is very new (April 2003), the extra check\n       by release-only users can't hurt.\n    */\n    if (!PyThreadState_IsCurrent(tcur)) {\n        Py_FatalError(\"This thread state must be current when releasing\");\n    }\n    assert(PyThreadState_IsCurrent(tcur));\n    --tcur->gilstate_counter;\n    assert(tcur->gilstate_counter >= 0); /* illegal counter value */\n\n    /* If we're going to destroy this thread-state, we must\n     * clear it while the GIL is held, as destructors may run.\n     */\n    if (tcur->gilstate_counter == 0) {\n        /* can't have been locked when we created it */\n        assert(oldstate == PyGILState_UNLOCKED);\n        PyThreadState_Clear(tcur);\n        /* Delete the thread-state.  Note this releases the GIL too!\n         * It's vital that the GIL be held here, to avoid shutdown\n         * races; see bugs 225673 and 1061968 (that nasty bug has a\n         * habit of coming back).\n         */\n        _PyThreadState_DeleteCurrent(runtime);\n    }\n    /* Release the lock if necessary */\n    else if (oldstate == PyGILState_UNLOCKED)\n        PyEval_SaveThread();\n}\n\n\n/**************************/\n/* cross-interpreter data */\n/**************************/\n\n/* cross-interpreter data */\n\ncrossinterpdatafunc _PyCrossInterpreterData_Lookup(PyObject *);\n\n/* This is a separate func from _PyCrossInterpreterData_Lookup in order\n   to keep the registry code separate. */\nstatic crossinterpdatafunc\n_lookup_getdata(PyObject *obj)\n{\n    crossinterpdatafunc getdata = _PyCrossInterpreterData_Lookup(obj);\n    if (getdata == NULL && PyErr_Occurred() == 0)\n        PyErr_Format(PyExc_ValueError,\n                     \"%S does not support cross-interpreter data\", obj);\n    return getdata;\n}\n\nint\n_PyObject_CheckCrossInterpreterData(PyObject *obj)\n{\n    crossinterpdatafunc getdata = _lookup_getdata(obj);\n    if (getdata == NULL) {\n        return -1;\n    }\n    return 0;\n}\n\nstatic int\n_check_xidata(_PyCrossInterpreterData *data)\n{\n    // data->data can be anything, including NULL, so we don't check it.\n\n    // data->obj may be NULL, so we don't check it.\n\n    if (data->interp < 0) {\n        PyErr_SetString(PyExc_SystemError, \"missing interp\");\n        return -1;\n    }\n\n    if (data->new_object == NULL) {\n        PyErr_SetString(PyExc_SystemError, \"missing new_object func\");\n        return -1;\n    }\n\n    // data->free may be NULL, so we don't check it.\n\n    return 0;\n}\n\nint\n_PyObject_GetCrossInterpreterData(PyObject *obj, _PyCrossInterpreterData *data)\n{\n    // _PyInterpreterState_Get() aborts if lookup fails, so we don't need\n    // to check the result for NULL.\n    PyInterpreterState *interp = _PyInterpreterState_Get();\n\n    // Reset data before re-populating.\n    *data = (_PyCrossInterpreterData){0};\n    data->free = PyMem_RawFree;  // Set a default that may be overridden.\n\n    // Call the \"getdata\" func for the object.\n    Py_INCREF(obj);\n    crossinterpdatafunc getdata = _lookup_getdata(obj);\n    if (getdata == NULL) {\n        Py_DECREF(obj);\n        return -1;\n    }\n    int res = getdata(obj, data);\n    Py_DECREF(obj);\n    if (res != 0) {\n        return -1;\n    }\n\n    // Fill in the blanks and validate the result.\n    data->interp = interp->id;\n    if (_check_xidata(data) != 0) {\n        _PyCrossInterpreterData_Release(data);\n        return -1;\n    }\n\n    return 0;\n}\n\nstatic void\n_release_xidata(void *arg)\n{\n    _PyCrossInterpreterData *data = (_PyCrossInterpreterData *)arg;\n    if (data->free != NULL) {\n        data->free(data->data);\n    }\n    Py_XDECREF(data->obj);\n}\n\nstatic void\n_call_in_interpreter(struct _gilstate_runtime_state *gilstate,\n                     PyInterpreterState *interp,\n                     void (*func)(void *), void *arg)\n{\n    /* We would use Py_AddPendingCall() if it weren't specific to the\n     * main interpreter (see bpo-33608).  In the meantime we take a\n     * naive approach.\n     */\n    PyThreadState *save_tstate = NULL;\n    if (interp != _PyRuntimeGILState_GetThreadState(gilstate)->interp) {\n        // XXX Using the \"head\" thread isn't strictly correct.\n        PyThreadState *tstate = PyInterpreterState_ThreadHead(interp);\n        // XXX Possible GILState issues?\n        save_tstate = _PyThreadState_Swap(gilstate, tstate);\n    }\n\n    func(arg);\n\n    // Switch back.\n    if (save_tstate != NULL) {\n        _PyThreadState_Swap(gilstate, save_tstate);\n    }\n}\n\nvoid\n_PyCrossInterpreterData_Release(_PyCrossInterpreterData *data)\n{\n    if (data->data == NULL && data->obj == NULL) {\n        // Nothing to release!\n        return;\n    }\n\n    // Switch to the original interpreter.\n    PyInterpreterState *interp = _PyInterpreterState_LookUpID(data->interp);\n    if (interp == NULL) {\n        // The intepreter was already destroyed.\n        if (data->free != NULL) {\n            // XXX Someone leaked some memory...\n        }\n        return;\n    }\n\n    // \"Release\" the data and/or the object.\n    struct _gilstate_runtime_state *gilstate = &_PyRuntime.gilstate;\n    _call_in_interpreter(gilstate, interp, _release_xidata, data);\n}\n\nPyObject *\n_PyCrossInterpreterData_NewObject(_PyCrossInterpreterData *data)\n{\n    return data->new_object(data);\n}\n\n/* registry of {type -> crossinterpdatafunc} */\n\n/* For now we use a global registry of shareable classes.  An\n   alternative would be to add a tp_* slot for a class's\n   crossinterpdatafunc. It would be simpler and more efficient. */\n\nstatic int\n_register_xidata(struct _xidregistry *xidregistry, PyTypeObject *cls,\n                 crossinterpdatafunc getdata)\n{\n    // Note that we effectively replace already registered classes\n    // rather than failing.\n    struct _xidregitem *newhead = PyMem_RawMalloc(sizeof(struct _xidregitem));\n    if (newhead == NULL)\n        return -1;\n    newhead->cls = cls;\n    newhead->getdata = getdata;\n    newhead->next = xidregistry->head;\n    xidregistry->head = newhead;\n    return 0;\n}\n\nstatic void _register_builtins_for_crossinterpreter_data(struct _xidregistry *xidregistry);\n\nint\n_PyCrossInterpreterData_RegisterClass(PyTypeObject *cls,\n                                       crossinterpdatafunc getdata)\n{\n    if (!PyType_Check(cls)) {\n        PyErr_Format(PyExc_ValueError, \"only classes may be registered\");\n        return -1;\n    }\n    if (getdata == NULL) {\n        PyErr_Format(PyExc_ValueError, \"missing 'getdata' func\");\n        return -1;\n    }\n\n    // Make sure the class isn't ever deallocated.\n    Py_INCREF((PyObject *)cls);\n\n    struct _xidregistry *xidregistry = &_PyRuntime.xidregistry ;\n    PyThread_acquire_lock(xidregistry->mutex, WAIT_LOCK);\n    if (xidregistry->head == NULL) {\n        _register_builtins_for_crossinterpreter_data(xidregistry);\n    }\n    int res = _register_xidata(xidregistry, cls, getdata);\n    PyThread_release_lock(xidregistry->mutex);\n    return res;\n}\n\n/* Cross-interpreter objects are looked up by exact match on the class.\n   We can reassess this policy when we move from a global registry to a\n   tp_* slot. */\n\ncrossinterpdatafunc\n_PyCrossInterpreterData_Lookup(PyObject *obj)\n{\n    struct _xidregistry *xidregistry = &_PyRuntime.xidregistry ;\n    PyObject *cls = PyObject_Type(obj);\n    crossinterpdatafunc getdata = NULL;\n    PyThread_acquire_lock(xidregistry->mutex, WAIT_LOCK);\n    struct _xidregitem *cur = xidregistry->head;\n    if (cur == NULL) {\n        _register_builtins_for_crossinterpreter_data(xidregistry);\n        cur = xidregistry->head;\n    }\n    for(; cur != NULL; cur = cur->next) {\n        if (cur->cls == (PyTypeObject *)cls) {\n            getdata = cur->getdata;\n            break;\n        }\n    }\n    Py_DECREF(cls);\n    PyThread_release_lock(xidregistry->mutex);\n    return getdata;\n}\n\n/* cross-interpreter data for builtin types */\n\nstruct _shared_bytes_data {\n    char *bytes;\n    Py_ssize_t len;\n};\n\nstatic PyObject *\n_new_bytes_object(_PyCrossInterpreterData *data)\n{\n    struct _shared_bytes_data *shared = (struct _shared_bytes_data *)(data->data);\n    return PyBytes_FromStringAndSize(shared->bytes, shared->len);\n}\n\nstatic int\n_bytes_shared(PyObject *obj, _PyCrossInterpreterData *data)\n{\n    struct _shared_bytes_data *shared = PyMem_NEW(struct _shared_bytes_data, 1);\n    if (PyBytes_AsStringAndSize(obj, &shared->bytes, &shared->len) < 0) {\n        return -1;\n    }\n    data->data = (void *)shared;\n    Py_INCREF(obj);\n    data->obj = obj;  // Will be \"released\" (decref'ed) when data released.\n    data->new_object = _new_bytes_object;\n    data->free = PyMem_Free;\n    return 0;\n}\n\nstruct _shared_str_data {\n    int kind;\n    const void *buffer;\n    Py_ssize_t len;\n};\n\nstatic PyObject *\n_new_str_object(_PyCrossInterpreterData *data)\n{\n    struct _shared_str_data *shared = (struct _shared_str_data *)(data->data);\n    return PyUnicode_FromKindAndData(shared->kind, shared->buffer, shared->len);\n}\n\nstatic int\n_str_shared(PyObject *obj, _PyCrossInterpreterData *data)\n{\n    struct _shared_str_data *shared = PyMem_NEW(struct _shared_str_data, 1);\n    shared->kind = PyUnicode_KIND(obj);\n    shared->buffer = PyUnicode_DATA(obj);\n    shared->len = PyUnicode_GET_LENGTH(obj);\n    data->data = (void *)shared;\n    Py_INCREF(obj);\n    data->obj = obj;  // Will be \"released\" (decref'ed) when data released.\n    data->new_object = _new_str_object;\n    data->free = PyMem_Free;\n    return 0;\n}\n\nstatic PyObject *\n_new_long_object(_PyCrossInterpreterData *data)\n{\n    return PyLong_FromSsize_t((Py_ssize_t)(data->data));\n}\n\nstatic int\n_long_shared(PyObject *obj, _PyCrossInterpreterData *data)\n{\n    /* Note that this means the size of shareable ints is bounded by\n     * sys.maxsize.  Hence on 32-bit architectures that is half the\n     * size of maximum shareable ints on 64-bit.\n     */\n    Py_ssize_t value = PyLong_AsSsize_t(obj);\n    if (value == -1 && PyErr_Occurred()) {\n        if (PyErr_ExceptionMatches(PyExc_OverflowError)) {\n            PyErr_SetString(PyExc_OverflowError, \"try sending as bytes\");\n        }\n        return -1;\n    }\n    data->data = (void *)value;\n    data->obj = NULL;\n    data->new_object = _new_long_object;\n    data->free = NULL;\n    return 0;\n}\n\nstatic PyObject *\n_new_none_object(_PyCrossInterpreterData *data)\n{\n    // XXX Singleton refcounts are problematic across interpreters...\n    Py_INCREF(Py_None);\n    return Py_None;\n}\n\nstatic int\n_none_shared(PyObject *obj, _PyCrossInterpreterData *data)\n{\n    data->data = NULL;\n    // data->obj remains NULL\n    data->new_object = _new_none_object;\n    data->free = NULL;  // There is nothing to free.\n    return 0;\n}\n\nstatic void\n_register_builtins_for_crossinterpreter_data(struct _xidregistry *xidregistry)\n{\n    // None\n    if (_register_xidata(xidregistry, (PyTypeObject *)PyObject_Type(Py_None), _none_shared) != 0) {\n        Py_FatalError(\"could not register None for cross-interpreter sharing\");\n    }\n\n    // int\n    if (_register_xidata(xidregistry, &PyLong_Type, _long_shared) != 0) {\n        Py_FatalError(\"could not register int for cross-interpreter sharing\");\n    }\n\n    // bytes\n    if (_register_xidata(xidregistry, &PyBytes_Type, _bytes_shared) != 0) {\n        Py_FatalError(\"could not register bytes for cross-interpreter sharing\");\n    }\n\n    // str\n    if (_register_xidata(xidregistry, &PyUnicode_Type, _str_shared) != 0) {\n        Py_FatalError(\"could not register str for cross-interpreter sharing\");\n    }\n}\n\n\n#ifdef __cplusplus\n}\n#endif\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Python/sysmodule.c": "\n/* System module */\n\n/*\nVarious bits of information used by the interpreter are collected in\nmodule 'sys'.\nFunction member:\n- exit(sts): raise SystemExit\nData members:\n- stdin, stdout, stderr: standard file objects\n- modules: the table of modules (dictionary)\n- path: module search path (list of strings)\n- argv: script arguments (list of strings)\n- ps1, ps2: optional primary and secondary prompts (strings)\n*/\n\n#include \"Python.h\"\n#include \"code.h\"\n#include \"frameobject.h\"\n#include \"pycore_initconfig.h\"\n#include \"pycore_pylifecycle.h\"\n#include \"pycore_pymem.h\"\n#include \"pycore_pathconfig.h\"\n#include \"pycore_pystate.h\"\n#include \"pycore_tupleobject.h\"\n#include \"pythread.h\"\n#include \"pydtrace.h\"\n\n#include \"osdefs.h\"\n#include <locale.h>\n\n#ifdef MS_WINDOWS\n#define WIN32_LEAN_AND_MEAN\n#include <windows.h>\n#endif /* MS_WINDOWS */\n\n#ifdef MS_COREDLL\nextern void *PyWin_DLLhModule;\n/* A string loaded from the DLL at startup: */\nextern const char *PyWin_DLLVersionString;\n#endif\n\n/*[clinic input]\nmodule sys\n[clinic start generated code]*/\n/*[clinic end generated code: output=da39a3ee5e6b4b0d input=3726b388feee8cea]*/\n\n#include \"clinic/sysmodule.c.h\"\n\n_Py_IDENTIFIER(_);\n_Py_IDENTIFIER(__sizeof__);\n_Py_IDENTIFIER(_xoptions);\n_Py_IDENTIFIER(buffer);\n_Py_IDENTIFIER(builtins);\n_Py_IDENTIFIER(encoding);\n_Py_IDENTIFIER(path);\n_Py_IDENTIFIER(stdout);\n_Py_IDENTIFIER(stderr);\n_Py_IDENTIFIER(warnoptions);\n_Py_IDENTIFIER(write);\n\nPyObject *\n_PySys_GetObjectId(_Py_Identifier *key)\n{\n    PyObject *sd = _PyInterpreterState_GET_UNSAFE()->sysdict;\n    if (sd == NULL) {\n        return NULL;\n    }\n    return _PyDict_GetItemId(sd, key);\n}\n\nPyObject *\nPySys_GetObject(const char *name)\n{\n    PyObject *sd = _PyInterpreterState_GET_UNSAFE()->sysdict;\n    if (sd == NULL) {\n        return NULL;\n    }\n    return PyDict_GetItemString(sd, name);\n}\n\nint\n_PySys_SetObjectId(_Py_Identifier *key, PyObject *v)\n{\n    PyObject *sd = _PyInterpreterState_GET_UNSAFE()->sysdict;\n    if (v == NULL) {\n        if (_PyDict_GetItemId(sd, key) == NULL) {\n            return 0;\n        }\n        else {\n            return _PyDict_DelItemId(sd, key);\n        }\n    }\n    else {\n        return _PyDict_SetItemId(sd, key, v);\n    }\n}\n\nint\nPySys_SetObject(const char *name, PyObject *v)\n{\n    PyObject *sd = _PyInterpreterState_GET_UNSAFE()->sysdict;\n    if (v == NULL) {\n        if (PyDict_GetItemString(sd, name) == NULL) {\n            return 0;\n        }\n        else {\n            return PyDict_DelItemString(sd, name);\n        }\n    }\n    else {\n        return PyDict_SetItemString(sd, name, v);\n    }\n}\n\nstatic int\nshould_audit(void)\n{\n    PyThreadState *ts = _PyThreadState_GET();\n    if (!ts) {\n        return 0;\n    }\n    PyInterpreterState *is = ts ? ts->interp : NULL;\n    return _PyRuntime.audit_hook_head\n        || (is && is->audit_hooks)\n        || PyDTrace_AUDIT_ENABLED();\n}\n\nint\nPySys_Audit(const char *event, const char *argFormat, ...)\n{\n    PyObject *eventName = NULL;\n    PyObject *eventArgs = NULL;\n    PyObject *hooks = NULL;\n    PyObject *hook = NULL;\n    int res = -1;\n\n    /* N format is inappropriate, because you do not know\n       whether the reference is consumed by the call.\n       Assert rather than exception for perf reasons */\n    assert(!argFormat || !strchr(argFormat, 'N'));\n\n    /* Early exit when no hooks are registered */\n    if (!should_audit()) {\n        return 0;\n    }\n\n    _Py_AuditHookEntry *e = _PyRuntime.audit_hook_head;\n    PyThreadState *ts = _PyThreadState_GET();\n    PyInterpreterState *is = ts ? ts->interp : NULL;\n    int dtrace = PyDTrace_AUDIT_ENABLED();\n\n    PyObject *exc_type, *exc_value, *exc_tb;\n    if (ts) {\n        PyErr_Fetch(&exc_type, &exc_value, &exc_tb);\n    }\n\n    /* Initialize event args now */\n    if (argFormat && argFormat[0]) {\n        va_list args;\n        va_start(args, argFormat);\n        eventArgs = _Py_VaBuildValue_SizeT(argFormat, args);\n        va_end(args);\n        if (eventArgs && !PyTuple_Check(eventArgs)) {\n            PyObject *argTuple = PyTuple_Pack(1, eventArgs);\n            Py_DECREF(eventArgs);\n            eventArgs = argTuple;\n        }\n    } else {\n        eventArgs = PyTuple_New(0);\n    }\n    if (!eventArgs) {\n        goto exit;\n    }\n\n    /* Call global hooks */\n    for (; e; e = e->next) {\n        if (e->hookCFunction(event, eventArgs, e->userData) < 0) {\n            goto exit;\n        }\n    }\n\n    /* Dtrace USDT point */\n    if (dtrace) {\n        PyDTrace_AUDIT(event, (void *)eventArgs);\n    }\n\n    /* Call interpreter hooks */\n    if (is && is->audit_hooks) {\n        eventName = PyUnicode_FromString(event);\n        if (!eventName) {\n            goto exit;\n        }\n\n        hooks = PyObject_GetIter(is->audit_hooks);\n        if (!hooks) {\n            goto exit;\n        }\n\n        /* Disallow tracing in hooks unless explicitly enabled */\n        ts->tracing++;\n        ts->use_tracing = 0;\n        while ((hook = PyIter_Next(hooks)) != NULL) {\n            _Py_IDENTIFIER(__cantrace__);\n            PyObject *o;\n            int canTrace = _PyObject_LookupAttrId(hook, &PyId___cantrace__, &o);\n            if (o) {\n                canTrace = PyObject_IsTrue(o);\n                Py_DECREF(o);\n            }\n            if (canTrace < 0) {\n                break;\n            }\n            if (canTrace) {\n                ts->use_tracing = (ts->c_tracefunc || ts->c_profilefunc);\n                ts->tracing--;\n            }\n            o = PyObject_CallFunctionObjArgs(hook, eventName,\n                                             eventArgs, NULL);\n            if (canTrace) {\n                ts->tracing++;\n                ts->use_tracing = 0;\n            }\n            if (!o) {\n                break;\n            }\n            Py_DECREF(o);\n            Py_CLEAR(hook);\n        }\n        ts->use_tracing = (ts->c_tracefunc || ts->c_profilefunc);\n        ts->tracing--;\n        if (PyErr_Occurred()) {\n            goto exit;\n        }\n    }\n\n    res = 0;\n\nexit:\n    Py_XDECREF(hook);\n    Py_XDECREF(hooks);\n    Py_XDECREF(eventName);\n    Py_XDECREF(eventArgs);\n\n    if (ts) {\n        if (!res) {\n            PyErr_Restore(exc_type, exc_value, exc_tb);\n        } else {\n            assert(PyErr_Occurred());\n            Py_XDECREF(exc_type);\n            Py_XDECREF(exc_value);\n            Py_XDECREF(exc_tb);\n        }\n    }\n\n    return res;\n}\n\n/* We expose this function primarily for our own cleanup during\n * finalization. In general, it should not need to be called,\n * and as such it is not defined in any header files.\n */\nvoid _PySys_ClearAuditHooks(void) {\n    /* Must be finalizing to clear hooks */\n    _PyRuntimeState *runtime = &_PyRuntime;\n    PyThreadState *ts = _PyRuntimeState_GetThreadState(runtime);\n    assert(!ts || _Py_CURRENTLY_FINALIZING(runtime, ts));\n    if (!ts || !_Py_CURRENTLY_FINALIZING(runtime, ts))\n        return;\n\n    if (Py_VerboseFlag) {\n        PySys_WriteStderr(\"# clear sys.audit hooks\\n\");\n    }\n\n    /* Hooks can abort later hooks for this event, but cannot\n       abort the clear operation itself. */\n    PySys_Audit(\"cpython._PySys_ClearAuditHooks\", NULL);\n    PyErr_Clear();\n\n    _Py_AuditHookEntry *e = _PyRuntime.audit_hook_head, *n;\n    _PyRuntime.audit_hook_head = NULL;\n    while (e) {\n        n = e->next;\n        PyMem_RawFree(e);\n        e = n;\n    }\n}\n\nint\nPySys_AddAuditHook(Py_AuditHookFunction hook, void *userData)\n{\n    /* Invoke existing audit hooks to allow them an opportunity to abort. */\n    /* Cannot invoke hooks until we are initialized */\n    if (Py_IsInitialized()) {\n        if (PySys_Audit(\"sys.addaudithook\", NULL) < 0) {\n            if (PyErr_ExceptionMatches(PyExc_RuntimeError)) {\n                /* We do not report errors derived from RuntimeError */\n                PyErr_Clear();\n                return 0;\n            }\n            return -1;\n        }\n    }\n\n    _Py_AuditHookEntry *e = _PyRuntime.audit_hook_head;\n    if (!e) {\n        e = (_Py_AuditHookEntry*)PyMem_RawMalloc(sizeof(_Py_AuditHookEntry));\n        _PyRuntime.audit_hook_head = e;\n    } else {\n        while (e->next)\n            e = e->next;\n        e = e->next = (_Py_AuditHookEntry*)PyMem_RawMalloc(\n            sizeof(_Py_AuditHookEntry));\n    }\n\n    if (!e) {\n        if (Py_IsInitialized())\n            PyErr_NoMemory();\n        return -1;\n    }\n\n    e->next = NULL;\n    e->hookCFunction = (Py_AuditHookFunction)hook;\n    e->userData = userData;\n\n    return 0;\n}\n\n/*[clinic input]\nsys.addaudithook\n\n    hook: object\n\nAdds a new audit hook callback.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_addaudithook_impl(PyObject *module, PyObject *hook)\n/*[clinic end generated code: output=4f9c17aaeb02f44e input=0f3e191217a45e34]*/\n{\n    /* Invoke existing audit hooks to allow them an opportunity to abort. */\n    if (PySys_Audit(\"sys.addaudithook\", NULL) < 0) {\n        if (PyErr_ExceptionMatches(PyExc_Exception)) {\n            /* We do not report errors derived from Exception */\n            PyErr_Clear();\n            Py_RETURN_NONE;\n        }\n        return NULL;\n    }\n\n    PyInterpreterState *is = _PyInterpreterState_Get();\n\n    if (is->audit_hooks == NULL) {\n        is->audit_hooks = PyList_New(0);\n        if (is->audit_hooks == NULL) {\n            return NULL;\n        }\n    }\n\n    if (PyList_Append(is->audit_hooks, hook) < 0) {\n        return NULL;\n    }\n\n    Py_RETURN_NONE;\n}\n\nPyDoc_STRVAR(audit_doc,\n\"audit(event, *args)\\n\\\n\\n\\\nPasses the event to any audit hooks that are attached.\");\n\nstatic PyObject *\nsys_audit(PyObject *self, PyObject *const *args, Py_ssize_t argc)\n{\n    if (argc == 0) {\n        PyErr_SetString(PyExc_TypeError, \"audit() missing 1 required positional argument: 'event'\");\n        return NULL;\n    }\n\n    if (!should_audit()) {\n        Py_RETURN_NONE;\n    }\n\n    PyObject *auditEvent = args[0];\n    if (!auditEvent) {\n        PyErr_SetString(PyExc_TypeError, \"expected str for argument 'event'\");\n        return NULL;\n    }\n    if (!PyUnicode_Check(auditEvent)) {\n        PyErr_Format(PyExc_TypeError, \"expected str for argument 'event', not %.200s\",\n            Py_TYPE(auditEvent)->tp_name);\n        return NULL;\n    }\n    const char *event = PyUnicode_AsUTF8(auditEvent);\n    if (!event) {\n        return NULL;\n    }\n\n    PyObject *auditArgs = _PyTuple_FromArray(args + 1, argc - 1);\n    if (!auditArgs) {\n        return NULL;\n    }\n\n    int res = PySys_Audit(event, \"O\", auditArgs);\n    Py_DECREF(auditArgs);\n\n    if (res < 0) {\n        return NULL;\n    }\n\n    Py_RETURN_NONE;\n}\n\n\nstatic PyObject *\nsys_breakpointhook(PyObject *self, PyObject *const *args, Py_ssize_t nargs, PyObject *keywords)\n{\n    assert(!PyErr_Occurred());\n    char *envar = Py_GETENV(\"PYTHONBREAKPOINT\");\n\n    if (envar == NULL || strlen(envar) == 0) {\n        envar = \"pdb.set_trace\";\n    }\n    else if (!strcmp(envar, \"0\")) {\n        /* The breakpoint is explicitly no-op'd. */\n        Py_RETURN_NONE;\n    }\n    /* According to POSIX the string returned by getenv() might be invalidated\n     * or the string content might be overwritten by a subsequent call to\n     * getenv().  Since importing a module can performs the getenv() calls,\n     * we need to save a copy of envar. */\n    envar = _PyMem_RawStrdup(envar);\n    if (envar == NULL) {\n        PyErr_NoMemory();\n        return NULL;\n    }\n    const char *last_dot = strrchr(envar, '.');\n    const char *attrname = NULL;\n    PyObject *modulepath = NULL;\n\n    if (last_dot == NULL) {\n        /* The breakpoint is a built-in, e.g. PYTHONBREAKPOINT=int */\n        modulepath = PyUnicode_FromString(\"builtins\");\n        attrname = envar;\n    }\n    else if (last_dot != envar) {\n        /* Split on the last dot; */\n        modulepath = PyUnicode_FromStringAndSize(envar, last_dot - envar);\n        attrname = last_dot + 1;\n    }\n    else {\n        goto warn;\n    }\n    if (modulepath == NULL) {\n        PyMem_RawFree(envar);\n        return NULL;\n    }\n\n    PyObject *module = PyImport_Import(modulepath);\n    Py_DECREF(modulepath);\n\n    if (module == NULL) {\n        if (PyErr_ExceptionMatches(PyExc_ImportError)) {\n            goto warn;\n        }\n        PyMem_RawFree(envar);\n        return NULL;\n    }\n\n    PyObject *hook = PyObject_GetAttrString(module, attrname);\n    Py_DECREF(module);\n\n    if (hook == NULL) {\n        if (PyErr_ExceptionMatches(PyExc_AttributeError)) {\n            goto warn;\n        }\n        PyMem_RawFree(envar);\n        return NULL;\n    }\n    PyMem_RawFree(envar);\n    PyObject *retval = _PyObject_Vectorcall(hook, args, nargs, keywords);\n    Py_DECREF(hook);\n    return retval;\n\n  warn:\n    /* If any of the imports went wrong, then warn and ignore. */\n    PyErr_Clear();\n    int status = PyErr_WarnFormat(\n        PyExc_RuntimeWarning, 0,\n        \"Ignoring unimportable $PYTHONBREAKPOINT: \\\"%s\\\"\", envar);\n    PyMem_RawFree(envar);\n    if (status < 0) {\n        /* Printing the warning raised an exception. */\n        return NULL;\n    }\n    /* The warning was (probably) issued. */\n    Py_RETURN_NONE;\n}\n\nPyDoc_STRVAR(breakpointhook_doc,\n\"breakpointhook(*args, **kws)\\n\"\n\"\\n\"\n\"This hook function is called by built-in breakpoint().\\n\"\n);\n\n/* Write repr(o) to sys.stdout using sys.stdout.encoding and 'backslashreplace'\n   error handler. If sys.stdout has a buffer attribute, use\n   sys.stdout.buffer.write(encoded), otherwise redecode the string and use\n   sys.stdout.write(redecoded).\n\n   Helper function for sys_displayhook(). */\nstatic int\nsys_displayhook_unencodable(PyObject *outf, PyObject *o)\n{\n    PyObject *stdout_encoding = NULL;\n    PyObject *encoded, *escaped_str, *repr_str, *buffer, *result;\n    const char *stdout_encoding_str;\n    int ret;\n\n    stdout_encoding = _PyObject_GetAttrId(outf, &PyId_encoding);\n    if (stdout_encoding == NULL)\n        goto error;\n    stdout_encoding_str = PyUnicode_AsUTF8(stdout_encoding);\n    if (stdout_encoding_str == NULL)\n        goto error;\n\n    repr_str = PyObject_Repr(o);\n    if (repr_str == NULL)\n        goto error;\n    encoded = PyUnicode_AsEncodedString(repr_str,\n                                        stdout_encoding_str,\n                                        \"backslashreplace\");\n    Py_DECREF(repr_str);\n    if (encoded == NULL)\n        goto error;\n\n    if (_PyObject_LookupAttrId(outf, &PyId_buffer, &buffer) < 0) {\n        Py_DECREF(encoded);\n        goto error;\n    }\n    if (buffer) {\n        result = _PyObject_CallMethodIdObjArgs(buffer, &PyId_write, encoded, NULL);\n        Py_DECREF(buffer);\n        Py_DECREF(encoded);\n        if (result == NULL)\n            goto error;\n        Py_DECREF(result);\n    }\n    else {\n        escaped_str = PyUnicode_FromEncodedObject(encoded,\n                                                  stdout_encoding_str,\n                                                  \"strict\");\n        Py_DECREF(encoded);\n        if (PyFile_WriteObject(escaped_str, outf, Py_PRINT_RAW) != 0) {\n            Py_DECREF(escaped_str);\n            goto error;\n        }\n        Py_DECREF(escaped_str);\n    }\n    ret = 0;\n    goto finally;\n\nerror:\n    ret = -1;\nfinally:\n    Py_XDECREF(stdout_encoding);\n    return ret;\n}\n\n/*[clinic input]\nsys.displayhook\n\n    object as o: object\n    /\n\nPrint an object to sys.stdout and also save it in builtins._\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_displayhook(PyObject *module, PyObject *o)\n/*[clinic end generated code: output=347477d006df92ed input=08ba730166d7ef72]*/\n{\n    PyObject *outf;\n    PyObject *builtins;\n    static PyObject *newline = NULL;\n    int err;\n\n    builtins = _PyImport_GetModuleId(&PyId_builtins);\n    if (builtins == NULL) {\n        if (!PyErr_Occurred()) {\n            PyErr_SetString(PyExc_RuntimeError, \"lost builtins module\");\n        }\n        return NULL;\n    }\n    Py_DECREF(builtins);\n\n    /* Print value except if None */\n    /* After printing, also assign to '_' */\n    /* Before, set '_' to None to avoid recursion */\n    if (o == Py_None) {\n        Py_RETURN_NONE;\n    }\n    if (_PyObject_SetAttrId(builtins, &PyId__, Py_None) != 0)\n        return NULL;\n    outf = _PySys_GetObjectId(&PyId_stdout);\n    if (outf == NULL || outf == Py_None) {\n        PyErr_SetString(PyExc_RuntimeError, \"lost sys.stdout\");\n        return NULL;\n    }\n    if (PyFile_WriteObject(o, outf, 0) != 0) {\n        if (PyErr_ExceptionMatches(PyExc_UnicodeEncodeError)) {\n            /* repr(o) is not encodable to sys.stdout.encoding with\n             * sys.stdout.errors error handler (which is probably 'strict') */\n            PyErr_Clear();\n            err = sys_displayhook_unencodable(outf, o);\n            if (err)\n                return NULL;\n        }\n        else {\n            return NULL;\n        }\n    }\n    if (newline == NULL) {\n        newline = PyUnicode_FromString(\"\\n\");\n        if (newline == NULL)\n            return NULL;\n    }\n    if (PyFile_WriteObject(newline, outf, Py_PRINT_RAW) != 0)\n        return NULL;\n    if (_PyObject_SetAttrId(builtins, &PyId__, o) != 0)\n        return NULL;\n    Py_RETURN_NONE;\n}\n\n\n/*[clinic input]\nsys.excepthook\n\n    exctype:   object\n    value:     object\n    traceback: object\n    /\n\nHandle an exception by displaying it with a traceback on sys.stderr.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_excepthook_impl(PyObject *module, PyObject *exctype, PyObject *value,\n                    PyObject *traceback)\n/*[clinic end generated code: output=18d99fdda21b6b5e input=ecf606fa826f19d9]*/\n{\n    PyErr_Display(exctype, value, traceback);\n    Py_RETURN_NONE;\n}\n\n\n/*[clinic input]\nsys.exc_info\n\nReturn current exception information: (type, value, traceback).\n\nReturn information about the most recent exception caught by an except\nclause in the current stack frame or in an older stack frame.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_exc_info_impl(PyObject *module)\n/*[clinic end generated code: output=3afd0940cf3a4d30 input=b5c5bf077788a3e5]*/\n{\n    _PyErr_StackItem *err_info = _PyErr_GetTopmostException(_PyThreadState_GET());\n    return Py_BuildValue(\n        \"(OOO)\",\n        err_info->exc_type != NULL ? err_info->exc_type : Py_None,\n        err_info->exc_value != NULL ? err_info->exc_value : Py_None,\n        err_info->exc_traceback != NULL ?\n            err_info->exc_traceback : Py_None);\n}\n\n\n/*[clinic input]\nsys.unraisablehook\n\n    unraisable: object\n    /\n\nHandle an unraisable exception.\n\nThe unraisable argument has the following attributes:\n\n* exc_type: Exception type.\n* exc_value: Exception value, can be None.\n* exc_traceback: Exception traceback, can be None.\n* err_msg: Error message, can be None.\n* object: Object causing the exception, can be None.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_unraisablehook(PyObject *module, PyObject *unraisable)\n/*[clinic end generated code: output=bb92838b32abaa14 input=ec3af148294af8d3]*/\n{\n    return _PyErr_WriteUnraisableDefaultHook(unraisable);\n}\n\n\n/*[clinic input]\nsys.exit\n\n    status: object = None\n    /\n\nExit the interpreter by raising SystemExit(status).\n\nIf the status is omitted or None, it defaults to zero (i.e., success).\nIf the status is an integer, it will be used as the system exit status.\nIf it is another kind of object, it will be printed and the system\nexit status will be one (i.e., failure).\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_exit_impl(PyObject *module, PyObject *status)\n/*[clinic end generated code: output=13870986c1ab2ec0 input=b86ca9497baa94f2]*/\n{\n    /* Raise SystemExit so callers may catch it or clean up. */\n    PyErr_SetObject(PyExc_SystemExit, status);\n    return NULL;\n}\n\n\n\n/*[clinic input]\nsys.getdefaultencoding\n\nReturn the current default encoding used by the Unicode implementation.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getdefaultencoding_impl(PyObject *module)\n/*[clinic end generated code: output=256d19dfcc0711e6 input=d416856ddbef6909]*/\n{\n    return PyUnicode_FromString(PyUnicode_GetDefaultEncoding());\n}\n\n/*[clinic input]\nsys.getfilesystemencoding\n\nReturn the encoding used to convert Unicode filenames to OS filenames.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getfilesystemencoding_impl(PyObject *module)\n/*[clinic end generated code: output=1dc4bdbe9be44aa7 input=8475f8649b8c7d8c]*/\n{\n    PyInterpreterState *interp = _PyInterpreterState_GET_UNSAFE();\n    const PyConfig *config = &interp->config;\n    return PyUnicode_FromWideChar(config->filesystem_encoding, -1);\n}\n\n/*[clinic input]\nsys.getfilesystemencodeerrors\n\nReturn the error mode used Unicode to OS filename conversion.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getfilesystemencodeerrors_impl(PyObject *module)\n/*[clinic end generated code: output=ba77b36bbf7c96f5 input=22a1e8365566f1e5]*/\n{\n    PyInterpreterState *interp = _PyInterpreterState_GET_UNSAFE();\n    const PyConfig *config = &interp->config;\n    return PyUnicode_FromWideChar(config->filesystem_errors, -1);\n}\n\n/*[clinic input]\nsys.intern\n\n    string as s: unicode\n    /\n\n``Intern'' the given string.\n\nThis enters the string in the (global) table of interned strings whose\npurpose is to speed up dictionary lookups. Return the string itself or\nthe previously interned string object with the same value.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_intern_impl(PyObject *module, PyObject *s)\n/*[clinic end generated code: output=be680c24f5c9e5d6 input=849483c006924e2f]*/\n{\n    if (PyUnicode_CheckExact(s)) {\n        Py_INCREF(s);\n        PyUnicode_InternInPlace(&s);\n        return s;\n    }\n    else {\n        PyErr_Format(PyExc_TypeError,\n                     \"can't intern %.400s\", s->ob_type->tp_name);\n        return NULL;\n    }\n}\n\n\n/*\n * Cached interned string objects used for calling the profile and\n * trace functions.  Initialized by trace_init().\n */\nstatic PyObject *whatstrings[8] = {NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL};\n\nstatic int\ntrace_init(void)\n{\n    static const char * const whatnames[8] = {\n        \"call\", \"exception\", \"line\", \"return\",\n        \"c_call\", \"c_exception\", \"c_return\",\n        \"opcode\"\n    };\n    PyObject *name;\n    int i;\n    for (i = 0; i < 8; ++i) {\n        if (whatstrings[i] == NULL) {\n            name = PyUnicode_InternFromString(whatnames[i]);\n            if (name == NULL)\n                return -1;\n            whatstrings[i] = name;\n        }\n    }\n    return 0;\n}\n\n\nstatic PyObject *\ncall_trampoline(PyObject* callback,\n                PyFrameObject *frame, int what, PyObject *arg)\n{\n    PyObject *result;\n    PyObject *stack[3];\n\n    if (PyFrame_FastToLocalsWithError(frame) < 0) {\n        return NULL;\n    }\n\n    stack[0] = (PyObject *)frame;\n    stack[1] = whatstrings[what];\n    stack[2] = (arg != NULL) ? arg : Py_None;\n\n    /* call the Python-level function */\n    result = _PyObject_FastCall(callback, stack, 3);\n\n    PyFrame_LocalsToFast(frame, 1);\n    if (result == NULL) {\n        PyTraceBack_Here(frame);\n    }\n\n    return result;\n}\n\nstatic int\nprofile_trampoline(PyObject *self, PyFrameObject *frame,\n                   int what, PyObject *arg)\n{\n    PyObject *result;\n\n    if (arg == NULL)\n        arg = Py_None;\n    result = call_trampoline(self, frame, what, arg);\n    if (result == NULL) {\n        PyEval_SetProfile(NULL, NULL);\n        return -1;\n    }\n    Py_DECREF(result);\n    return 0;\n}\n\nstatic int\ntrace_trampoline(PyObject *self, PyFrameObject *frame,\n                 int what, PyObject *arg)\n{\n    PyObject *callback;\n    PyObject *result;\n\n    if (what == PyTrace_CALL)\n        callback = self;\n    else\n        callback = frame->f_trace;\n    if (callback == NULL)\n        return 0;\n    result = call_trampoline(callback, frame, what, arg);\n    if (result == NULL) {\n        PyEval_SetTrace(NULL, NULL);\n        Py_CLEAR(frame->f_trace);\n        return -1;\n    }\n    if (result != Py_None) {\n        Py_XSETREF(frame->f_trace, result);\n    }\n    else {\n        Py_DECREF(result);\n    }\n    return 0;\n}\n\nstatic PyObject *\nsys_settrace(PyObject *self, PyObject *args)\n{\n    if (trace_init() == -1)\n        return NULL;\n    if (args == Py_None)\n        PyEval_SetTrace(NULL, NULL);\n    else\n        PyEval_SetTrace(trace_trampoline, args);\n    Py_RETURN_NONE;\n}\n\nPyDoc_STRVAR(settrace_doc,\n\"settrace(function)\\n\\\n\\n\\\nSet the global debug tracing function.  It will be called on each\\n\\\nfunction call.  See the debugger chapter in the library manual.\"\n);\n\n/*[clinic input]\nsys.gettrace\n\nReturn the global debug tracing function set with sys.settrace.\n\nSee the debugger chapter in the library manual.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_gettrace_impl(PyObject *module)\n/*[clinic end generated code: output=e97e3a4d8c971b6e input=373b51bb2147f4d8]*/\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    PyObject *temp = tstate->c_traceobj;\n\n    if (temp == NULL)\n        temp = Py_None;\n    Py_INCREF(temp);\n    return temp;\n}\n\nstatic PyObject *\nsys_setprofile(PyObject *self, PyObject *args)\n{\n    if (trace_init() == -1)\n        return NULL;\n    if (args == Py_None)\n        PyEval_SetProfile(NULL, NULL);\n    else\n        PyEval_SetProfile(profile_trampoline, args);\n    Py_RETURN_NONE;\n}\n\nPyDoc_STRVAR(setprofile_doc,\n\"setprofile(function)\\n\\\n\\n\\\nSet the profiling function.  It will be called on each function call\\n\\\nand return.  See the profiler chapter in the library manual.\"\n);\n\n/*[clinic input]\nsys.getprofile\n\nReturn the profiling function set with sys.setprofile.\n\nSee the profiler chapter in the library manual.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getprofile_impl(PyObject *module)\n/*[clinic end generated code: output=579b96b373448188 input=1b3209d89a32965d]*/\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    PyObject *temp = tstate->c_profileobj;\n\n    if (temp == NULL)\n        temp = Py_None;\n    Py_INCREF(temp);\n    return temp;\n}\n\n/*[clinic input]\nsys.setcheckinterval\n\n    n: int\n    /\n\nSet the async event check interval to n instructions.\n\nThis tells the Python interpreter to check for asynchronous events\nevery n instructions.\n\nThis also affects how often thread switches occur.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_setcheckinterval_impl(PyObject *module, int n)\n/*[clinic end generated code: output=3f686cef07e6e178 input=7a35b17bf22a6227]*/\n{\n    if (PyErr_WarnEx(PyExc_DeprecationWarning,\n                     \"sys.getcheckinterval() and sys.setcheckinterval() \"\n                     \"are deprecated.  Use sys.setswitchinterval() \"\n                     \"instead.\", 1) < 0)\n        return NULL;\n\n    PyInterpreterState *interp = _PyInterpreterState_Get();\n    interp->check_interval = n;\n    Py_RETURN_NONE;\n}\n\n/*[clinic input]\nsys.getcheckinterval\n\nReturn the current check interval; see sys.setcheckinterval().\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getcheckinterval_impl(PyObject *module)\n/*[clinic end generated code: output=1b5060bf2b23a47c input=4b6589cbcca1db4e]*/\n{\n    if (PyErr_WarnEx(PyExc_DeprecationWarning,\n                     \"sys.getcheckinterval() and sys.setcheckinterval() \"\n                     \"are deprecated.  Use sys.getswitchinterval() \"\n                     \"instead.\", 1) < 0)\n        return NULL;\n    PyInterpreterState *interp = _PyInterpreterState_Get();\n    return PyLong_FromLong(interp->check_interval);\n}\n\n/*[clinic input]\nsys.setswitchinterval\n\n    interval: double\n    /\n\nSet the ideal thread switching delay inside the Python interpreter.\n\nThe actual frequency of switching threads can be lower if the\ninterpreter executes long sequences of uninterruptible code\n(this is implementation-specific and workload-dependent).\n\nThe parameter must represent the desired switching delay in seconds\nA typical value is 0.005 (5 milliseconds).\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_setswitchinterval_impl(PyObject *module, double interval)\n/*[clinic end generated code: output=65a19629e5153983 input=561b477134df91d9]*/\n{\n    if (interval <= 0.0) {\n        PyErr_SetString(PyExc_ValueError,\n                        \"switch interval must be strictly positive\");\n        return NULL;\n    }\n    _PyEval_SetSwitchInterval((unsigned long) (1e6 * interval));\n    Py_RETURN_NONE;\n}\n\n\n/*[clinic input]\nsys.getswitchinterval -> double\n\nReturn the current thread switch interval; see sys.setswitchinterval().\n[clinic start generated code]*/\n\nstatic double\nsys_getswitchinterval_impl(PyObject *module)\n/*[clinic end generated code: output=a38c277c85b5096d input=bdf9d39c0ebbbb6f]*/\n{\n    return 1e-6 * _PyEval_GetSwitchInterval();\n}\n\n/*[clinic input]\nsys.setrecursionlimit\n\n    limit as new_limit: int\n    /\n\nSet the maximum depth of the Python interpreter stack to n.\n\nThis limit prevents infinite recursion from causing an overflow of the C\nstack and crashing Python.  The highest possible limit is platform-\ndependent.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_setrecursionlimit_impl(PyObject *module, int new_limit)\n/*[clinic end generated code: output=35e1c64754800ace input=b0f7a23393924af3]*/\n{\n    int mark;\n    PyThreadState *tstate;\n\n    if (new_limit < 1) {\n        PyErr_SetString(PyExc_ValueError,\n                        \"recursion limit must be greater or equal than 1\");\n        return NULL;\n    }\n\n    /* Issue #25274: When the recursion depth hits the recursion limit in\n       _Py_CheckRecursiveCall(), the overflowed flag of the thread state is\n       set to 1 and a RecursionError is raised. The overflowed flag is reset\n       to 0 when the recursion depth goes below the low-water mark: see\n       Py_LeaveRecursiveCall().\n\n       Reject too low new limit if the current recursion depth is higher than\n       the new low-water mark. Otherwise it may not be possible anymore to\n       reset the overflowed flag to 0. */\n    mark = _Py_RecursionLimitLowerWaterMark(new_limit);\n    tstate = _PyThreadState_GET();\n    if (tstate->recursion_depth >= mark) {\n        PyErr_Format(PyExc_RecursionError,\n                     \"cannot set the recursion limit to %i at \"\n                     \"the recursion depth %i: the limit is too low\",\n                     new_limit, tstate->recursion_depth);\n        return NULL;\n    }\n\n    Py_SetRecursionLimit(new_limit);\n    Py_RETURN_NONE;\n}\n\n/*[clinic input]\nsys.set_coroutine_origin_tracking_depth\n\n  depth: int\n\nEnable or disable origin tracking for coroutine objects in this thread.\n\nCoroutine objects will track 'depth' frames of traceback information\nabout where they came from, available in their cr_origin attribute.\n\nSet a depth of 0 to disable.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_set_coroutine_origin_tracking_depth_impl(PyObject *module, int depth)\n/*[clinic end generated code: output=0a2123c1cc6759c5 input=a1d0a05f89d2c426]*/\n{\n    if (depth < 0) {\n        PyErr_SetString(PyExc_ValueError, \"depth must be >= 0\");\n        return NULL;\n    }\n    _PyEval_SetCoroutineOriginTrackingDepth(depth);\n    Py_RETURN_NONE;\n}\n\n/*[clinic input]\nsys.get_coroutine_origin_tracking_depth -> int\n\nCheck status of origin tracking for coroutine objects in this thread.\n[clinic start generated code]*/\n\nstatic int\nsys_get_coroutine_origin_tracking_depth_impl(PyObject *module)\n/*[clinic end generated code: output=3699f7be95a3afb8 input=335266a71205b61a]*/\n{\n    return _PyEval_GetCoroutineOriginTrackingDepth();\n}\n\nstatic PyTypeObject AsyncGenHooksType;\n\nPyDoc_STRVAR(asyncgen_hooks_doc,\n\"asyncgen_hooks\\n\\\n\\n\\\nA named tuple providing information about asynchronous\\n\\\ngenerators hooks.  The attributes are read only.\");\n\nstatic PyStructSequence_Field asyncgen_hooks_fields[] = {\n    {\"firstiter\", \"Hook to intercept first iteration\"},\n    {\"finalizer\", \"Hook to intercept finalization\"},\n    {0}\n};\n\nstatic PyStructSequence_Desc asyncgen_hooks_desc = {\n    \"asyncgen_hooks\",          /* name */\n    asyncgen_hooks_doc,        /* doc */\n    asyncgen_hooks_fields ,    /* fields */\n    2\n};\n\nstatic int\nset_async_gen_firstiter(PyObject *firstiter)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n\n    if (PySys_Audit(\"sys.set_asyncgen_hook_firstiter\", NULL) < 0) {\n        return -1;\n    }\n\n    Py_XINCREF(firstiter);\n    Py_XSETREF(tstate->async_gen_firstiter, firstiter);\n    return 0;\n}\n\nvoid\n_PyEval_SetAsyncGenFirstiter(PyObject *firstiter)\n{\n    if (set_async_gen_firstiter(firstiter) < 0) {\n        PyErr_WriteUnraisable(NULL);\n    }\n}\n\nstatic int\nset_async_gen_finalizer(PyObject *finalizer)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n\n    if (PySys_Audit(\"sys.set_asyncgen_hook_finalizer\", NULL) < 0) {\n        return -1;\n    }\n\n    Py_XINCREF(finalizer);\n    Py_XSETREF(tstate->async_gen_finalizer, finalizer);\n    return 0;\n}\n\nvoid\n_PyEval_SetAsyncGenFinalizer(PyObject *finalizer)\n{\n    if (set_async_gen_finalizer(finalizer) < 0) {\n        PyErr_WriteUnraisable(NULL);\n    }\n}\n\n\nstatic PyObject *\nsys_set_asyncgen_hooks(PyObject *self, PyObject *args, PyObject *kw)\n{\n    static char *keywords[] = {\"firstiter\", \"finalizer\", NULL};\n    PyObject *firstiter = NULL;\n    PyObject *finalizer = NULL;\n\n    if (!PyArg_ParseTupleAndKeywords(\n            args, kw, \"|OO\", keywords,\n            &firstiter, &finalizer)) {\n        return NULL;\n    }\n\n    if (finalizer && finalizer != Py_None) {\n        if (!PyCallable_Check(finalizer)) {\n            PyErr_Format(PyExc_TypeError,\n                         \"callable finalizer expected, got %.50s\",\n                         Py_TYPE(finalizer)->tp_name);\n            return NULL;\n        }\n        if (set_async_gen_finalizer(finalizer) < 0) {\n            return NULL;\n        }\n    }\n    else if (finalizer == Py_None && set_async_gen_finalizer(NULL) < 0) {\n        return NULL;\n    }\n\n    if (firstiter && firstiter != Py_None) {\n        if (!PyCallable_Check(firstiter)) {\n            PyErr_Format(PyExc_TypeError,\n                         \"callable firstiter expected, got %.50s\",\n                         Py_TYPE(firstiter)->tp_name);\n            return NULL;\n        }\n        if (set_async_gen_firstiter(firstiter) < 0) {\n            return NULL;\n        }\n    }\n    else if (firstiter == Py_None && set_async_gen_firstiter(NULL) < 0) {\n        return NULL;\n    }\n\n    Py_RETURN_NONE;\n}\n\nPyDoc_STRVAR(set_asyncgen_hooks_doc,\n\"set_asyncgen_hooks(* [, firstiter] [, finalizer])\\n\\\n\\n\\\nSet a finalizer for async generators objects.\"\n);\n\n/*[clinic input]\nsys.get_asyncgen_hooks\n\nReturn the installed asynchronous generators hooks.\n\nThis returns a namedtuple of the form (firstiter, finalizer).\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_get_asyncgen_hooks_impl(PyObject *module)\n/*[clinic end generated code: output=53a253707146f6cf input=3676b9ea62b14625]*/\n{\n    PyObject *res;\n    PyObject *firstiter = _PyEval_GetAsyncGenFirstiter();\n    PyObject *finalizer = _PyEval_GetAsyncGenFinalizer();\n\n    res = PyStructSequence_New(&AsyncGenHooksType);\n    if (res == NULL) {\n        return NULL;\n    }\n\n    if (firstiter == NULL) {\n        firstiter = Py_None;\n    }\n\n    if (finalizer == NULL) {\n        finalizer = Py_None;\n    }\n\n    Py_INCREF(firstiter);\n    PyStructSequence_SET_ITEM(res, 0, firstiter);\n\n    Py_INCREF(finalizer);\n    PyStructSequence_SET_ITEM(res, 1, finalizer);\n\n    return res;\n}\n\n\nstatic PyTypeObject Hash_InfoType;\n\nPyDoc_STRVAR(hash_info_doc,\n\"hash_info\\n\\\n\\n\\\nA named tuple providing parameters used for computing\\n\\\nhashes. The attributes are read only.\");\n\nstatic PyStructSequence_Field hash_info_fields[] = {\n    {\"width\", \"width of the type used for hashing, in bits\"},\n    {\"modulus\", \"prime number giving the modulus on which the hash \"\n                \"function is based\"},\n    {\"inf\", \"value to be used for hash of a positive infinity\"},\n    {\"nan\", \"value to be used for hash of a nan\"},\n    {\"imag\", \"multiplier used for the imaginary part of a complex number\"},\n    {\"algorithm\", \"name of the algorithm for hashing of str, bytes and \"\n                  \"memoryviews\"},\n    {\"hash_bits\", \"internal output size of hash algorithm\"},\n    {\"seed_bits\", \"seed size of hash algorithm\"},\n    {\"cutoff\", \"small string optimization cutoff\"},\n    {NULL, NULL}\n};\n\nstatic PyStructSequence_Desc hash_info_desc = {\n    \"sys.hash_info\",\n    hash_info_doc,\n    hash_info_fields,\n    9,\n};\n\nstatic PyObject *\nget_hash_info(void)\n{\n    PyObject *hash_info;\n    int field = 0;\n    PyHash_FuncDef *hashfunc;\n    hash_info = PyStructSequence_New(&Hash_InfoType);\n    if (hash_info == NULL)\n        return NULL;\n    hashfunc = PyHash_GetFuncDef();\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromLong(8*sizeof(Py_hash_t)));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromSsize_t(_PyHASH_MODULUS));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromLong(_PyHASH_INF));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromLong(_PyHASH_NAN));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromLong(_PyHASH_IMAG));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyUnicode_FromString(hashfunc->name));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromLong(hashfunc->hash_bits));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromLong(hashfunc->seed_bits));\n    PyStructSequence_SET_ITEM(hash_info, field++,\n                              PyLong_FromLong(Py_HASH_CUTOFF));\n    if (PyErr_Occurred()) {\n        Py_CLEAR(hash_info);\n        return NULL;\n    }\n    return hash_info;\n}\n/*[clinic input]\nsys.getrecursionlimit\n\nReturn the current value of the recursion limit.\n\nThe recursion limit is the maximum depth of the Python interpreter\nstack.  This limit prevents infinite recursion from causing an overflow\nof the C stack and crashing Python.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getrecursionlimit_impl(PyObject *module)\n/*[clinic end generated code: output=d571fb6b4549ef2e input=1c6129fd2efaeea8]*/\n{\n    return PyLong_FromLong(Py_GetRecursionLimit());\n}\n\n#ifdef MS_WINDOWS\n\nstatic PyTypeObject WindowsVersionType = {0, 0, 0, 0, 0, 0};\n\nstatic PyStructSequence_Field windows_version_fields[] = {\n    {\"major\", \"Major version number\"},\n    {\"minor\", \"Minor version number\"},\n    {\"build\", \"Build number\"},\n    {\"platform\", \"Operating system platform\"},\n    {\"service_pack\", \"Latest Service Pack installed on the system\"},\n    {\"service_pack_major\", \"Service Pack major version number\"},\n    {\"service_pack_minor\", \"Service Pack minor version number\"},\n    {\"suite_mask\", \"Bit mask identifying available product suites\"},\n    {\"product_type\", \"System product type\"},\n    {\"platform_version\", \"Diagnostic version number\"},\n    {0}\n};\n\nstatic PyStructSequence_Desc windows_version_desc = {\n    \"sys.getwindowsversion\",       /* name */\n    sys_getwindowsversion__doc__,  /* doc */\n    windows_version_fields,        /* fields */\n    5                              /* For backward compatibility,\n                                      only the first 5 items are accessible\n                                      via indexing, the rest are name only */\n};\n\n/* Disable deprecation warnings about GetVersionEx as the result is\n   being passed straight through to the caller, who is responsible for\n   using it correctly. */\n#pragma warning(push)\n#pragma warning(disable:4996)\n\n/*[clinic input]\nsys.getwindowsversion\n\nReturn info about the running version of Windows as a named tuple.\n\nThe members are named: major, minor, build, platform, service_pack,\nservice_pack_major, service_pack_minor, suite_mask, product_type and\nplatform_version. For backward compatibility, only the first 5 items\nare available by indexing. All elements are numbers, except\nservice_pack and platform_type which are strings, and platform_version\nwhich is a 3-tuple. Platform is always 2. Product_type may be 1 for a\nworkstation, 2 for a domain controller, 3 for a server.\nPlatform_version is a 3-tuple containing a version number that is\nintended for identifying the OS rather than feature detection.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getwindowsversion_impl(PyObject *module)\n/*[clinic end generated code: output=1ec063280b932857 input=73a228a328fee63a]*/\n{\n    PyObject *version;\n    int pos = 0;\n    OSVERSIONINFOEXW ver;\n    DWORD realMajor, realMinor, realBuild;\n    HANDLE hKernel32;\n    wchar_t kernel32_path[MAX_PATH];\n    LPVOID verblock;\n    DWORD verblock_size;\n\n    ver.dwOSVersionInfoSize = sizeof(ver);\n    if (!GetVersionExW((OSVERSIONINFOW*) &ver))\n        return PyErr_SetFromWindowsErr(0);\n\n    version = PyStructSequence_New(&WindowsVersionType);\n    if (version == NULL)\n        return NULL;\n\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.dwMajorVersion));\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.dwMinorVersion));\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.dwBuildNumber));\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.dwPlatformId));\n    PyStructSequence_SET_ITEM(version, pos++, PyUnicode_FromWideChar(ver.szCSDVersion, -1));\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.wServicePackMajor));\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.wServicePackMinor));\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.wSuiteMask));\n    PyStructSequence_SET_ITEM(version, pos++, PyLong_FromLong(ver.wProductType));\n\n    realMajor = ver.dwMajorVersion;\n    realMinor = ver.dwMinorVersion;\n    realBuild = ver.dwBuildNumber;\n\n    // GetVersion will lie if we are running in a compatibility mode.\n    // We need to read the version info from a system file resource\n    // to accurately identify the OS version. If we fail for any reason,\n    // just return whatever GetVersion said.\n    Py_BEGIN_ALLOW_THREADS\n    hKernel32 = GetModuleHandleW(L\"kernel32.dll\");\n    Py_END_ALLOW_THREADS\n    if (hKernel32 && GetModuleFileNameW(hKernel32, kernel32_path, MAX_PATH) &&\n        (verblock_size = GetFileVersionInfoSizeW(kernel32_path, NULL)) &&\n        (verblock = PyMem_RawMalloc(verblock_size))) {\n        VS_FIXEDFILEINFO *ffi;\n        UINT ffi_len;\n\n        if (GetFileVersionInfoW(kernel32_path, 0, verblock_size, verblock) &&\n            VerQueryValueW(verblock, L\"\", (LPVOID)&ffi, &ffi_len)) {\n            realMajor = HIWORD(ffi->dwProductVersionMS);\n            realMinor = LOWORD(ffi->dwProductVersionMS);\n            realBuild = HIWORD(ffi->dwProductVersionLS);\n        }\n        PyMem_RawFree(verblock);\n    }\n    PyStructSequence_SET_ITEM(version, pos++, Py_BuildValue(\"(kkk)\",\n        realMajor,\n        realMinor,\n        realBuild\n    ));\n\n    if (PyErr_Occurred()) {\n        Py_DECREF(version);\n        return NULL;\n    }\n\n    return version;\n}\n\n#pragma warning(pop)\n\n/*[clinic input]\nsys._enablelegacywindowsfsencoding\n\nChanges the default filesystem encoding to mbcs:replace.\n\nThis is done for consistency with earlier versions of Python. See PEP\n529 for more information.\n\nThis is equivalent to defining the PYTHONLEGACYWINDOWSFSENCODING\nenvironment variable before launching Python.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys__enablelegacywindowsfsencoding_impl(PyObject *module)\n/*[clinic end generated code: output=f5c3855b45e24fe9 input=2bfa931a20704492]*/\n{\n    if (_PyUnicode_EnableLegacyWindowsFSEncoding() < 0) {\n        return NULL;\n    }\n    Py_RETURN_NONE;\n}\n\n#endif /* MS_WINDOWS */\n\n#ifdef HAVE_DLOPEN\n\n/*[clinic input]\nsys.setdlopenflags\n\n    flags as new_val: int\n    /\n\nSet the flags used by the interpreter for dlopen calls.\n\nThis is used, for example, when the interpreter loads extension\nmodules. Among other things, this will enable a lazy resolving of\nsymbols when importing a module, if called as sys.setdlopenflags(0).\nTo share symbols across extension modules, call as\nsys.setdlopenflags(os.RTLD_GLOBAL).  Symbolic names for the flag\nmodules can be found in the os module (RTLD_xxx constants, e.g.\nos.RTLD_LAZY).\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_setdlopenflags_impl(PyObject *module, int new_val)\n/*[clinic end generated code: output=ec918b7fe0a37281 input=4c838211e857a77f]*/\n{\n    PyInterpreterState *interp = _PyInterpreterState_Get();\n    interp->dlopenflags = new_val;\n    Py_RETURN_NONE;\n}\n\n\n/*[clinic input]\nsys.getdlopenflags\n\nReturn the current value of the flags that are used for dlopen calls.\n\nThe flag constants are defined in the os module.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getdlopenflags_impl(PyObject *module)\n/*[clinic end generated code: output=e92cd1bc5005da6e input=dc4ea0899c53b4b6]*/\n{\n    PyInterpreterState *interp = _PyInterpreterState_Get();\n    return PyLong_FromLong(interp->dlopenflags);\n}\n\n#endif  /* HAVE_DLOPEN */\n\n#ifdef USE_MALLOPT\n/* Link with -lmalloc (or -lmpc) on an SGI */\n#include <malloc.h>\n\n/*[clinic input]\nsys.mdebug\n\n    flag: int\n    /\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_mdebug_impl(PyObject *module, int flag)\n/*[clinic end generated code: output=5431d545847c3637 input=151d150ae1636f8a]*/\n{\n    int flag;\n    mallopt(M_DEBUG, flag);\n    Py_RETURN_NONE;\n}\n#endif /* USE_MALLOPT */\n\nsize_t\n_PySys_GetSizeOf(PyObject *o)\n{\n    PyObject *res = NULL;\n    PyObject *method;\n    Py_ssize_t size;\n\n    /* Make sure the type is initialized. float gets initialized late */\n    if (PyType_Ready(Py_TYPE(o)) < 0)\n        return (size_t)-1;\n\n    method = _PyObject_LookupSpecial(o, &PyId___sizeof__);\n    if (method == NULL) {\n        if (!PyErr_Occurred())\n            PyErr_Format(PyExc_TypeError,\n                         \"Type %.100s doesn't define __sizeof__\",\n                         Py_TYPE(o)->tp_name);\n    }\n    else {\n        res = _PyObject_CallNoArg(method);\n        Py_DECREF(method);\n    }\n\n    if (res == NULL)\n        return (size_t)-1;\n\n    size = PyLong_AsSsize_t(res);\n    Py_DECREF(res);\n    if (size == -1 && PyErr_Occurred())\n        return (size_t)-1;\n\n    if (size < 0) {\n        PyErr_SetString(PyExc_ValueError, \"__sizeof__() should return >= 0\");\n        return (size_t)-1;\n    }\n\n    /* add gc_head size */\n    if (PyObject_IS_GC(o))\n        return ((size_t)size) + sizeof(PyGC_Head);\n    return (size_t)size;\n}\n\nstatic PyObject *\nsys_getsizeof(PyObject *self, PyObject *args, PyObject *kwds)\n{\n    static char *kwlist[] = {\"object\", \"default\", 0};\n    size_t size;\n    PyObject *o, *dflt = NULL;\n\n    if (!PyArg_ParseTupleAndKeywords(args, kwds, \"O|O:getsizeof\",\n                                     kwlist, &o, &dflt))\n        return NULL;\n\n    size = _PySys_GetSizeOf(o);\n\n    if (size == (size_t)-1 && PyErr_Occurred()) {\n        /* Has a default value been given */\n        if (dflt != NULL && PyErr_ExceptionMatches(PyExc_TypeError)) {\n            PyErr_Clear();\n            Py_INCREF(dflt);\n            return dflt;\n        }\n        else\n            return NULL;\n    }\n\n    return PyLong_FromSize_t(size);\n}\n\nPyDoc_STRVAR(getsizeof_doc,\n\"getsizeof(object [, default]) -> int\\n\\\n\\n\\\nReturn the size of object in bytes.\");\n\n/*[clinic input]\nsys.getrefcount -> Py_ssize_t\n\n    object:  object\n    /\n\nReturn the reference count of object.\n\nThe count returned is generally one higher than you might expect,\nbecause it includes the (temporary) reference as an argument to\ngetrefcount().\n[clinic start generated code]*/\n\nstatic Py_ssize_t\nsys_getrefcount_impl(PyObject *module, PyObject *object)\n/*[clinic end generated code: output=5fd477f2264b85b2 input=bf474efd50a21535]*/\n{\n    return object->ob_refcnt;\n}\n\n#ifdef Py_REF_DEBUG\n/*[clinic input]\nsys.gettotalrefcount -> Py_ssize_t\n[clinic start generated code]*/\n\nstatic Py_ssize_t\nsys_gettotalrefcount_impl(PyObject *module)\n/*[clinic end generated code: output=4103886cf17c25bc input=53b744faa5d2e4f6]*/\n{\n    return _Py_GetRefTotal();\n}\n#endif /* Py_REF_DEBUG */\n\n/*[clinic input]\nsys.getallocatedblocks -> Py_ssize_t\n\nReturn the number of memory blocks currently allocated.\n[clinic start generated code]*/\n\nstatic Py_ssize_t\nsys_getallocatedblocks_impl(PyObject *module)\n/*[clinic end generated code: output=f0c4e873f0b6dcf7 input=dab13ee346a0673e]*/\n{\n    return _Py_GetAllocatedBlocks();\n}\n\n#ifdef COUNT_ALLOCS\n/*[clinic input]\nsys.getcounts\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getcounts_impl(PyObject *module)\n/*[clinic end generated code: output=20df00bc164f43cb input=ad2ec7bda5424953]*/\n{\n    extern PyObject *_Py_get_counts(void);\n\n    return _Py_get_counts();\n}\n#endif\n\n/*[clinic input]\nsys._getframe\n\n    depth: int = 0\n    /\n\nReturn a frame object from the call stack.\n\nIf optional integer depth is given, return the frame object that many\ncalls below the top of the stack.  If that is deeper than the call\nstack, ValueError is raised.  The default for depth is zero, returning\nthe frame at the top of the call stack.\n\nThis function should be used for internal and specialized purposes\nonly.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys__getframe_impl(PyObject *module, int depth)\n/*[clinic end generated code: output=d438776c04d59804 input=c1be8a6464b11ee5]*/\n{\n    PyFrameObject *f = _PyThreadState_GET()->frame;\n\n    if (PySys_Audit(\"sys._getframe\", \"O\", f) < 0) {\n        return NULL;\n    }\n\n    while (depth > 0 && f != NULL) {\n        f = f->f_back;\n        --depth;\n    }\n    if (f == NULL) {\n        PyErr_SetString(PyExc_ValueError,\n                        \"call stack is not deep enough\");\n        return NULL;\n    }\n    Py_INCREF(f);\n    return (PyObject*)f;\n}\n\n/*[clinic input]\nsys._current_frames\n\nReturn a dict mapping each thread's thread id to its current stack frame.\n\nThis function should be used for specialized purposes only.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys__current_frames_impl(PyObject *module)\n/*[clinic end generated code: output=d2a41ac0a0a3809a input=2a9049c5f5033691]*/\n{\n    return _PyThread_CurrentFrames();\n}\n\n/*[clinic input]\nsys.call_tracing\n\n    func: object\n    args as funcargs: object(subclass_of='&PyTuple_Type')\n    /\n\nCall func(*args), while tracing is enabled.\n\nThe tracing state is saved, and restored afterwards.  This is intended\nto be called from a debugger from a checkpoint, to recursively debug\nsome other code.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_call_tracing_impl(PyObject *module, PyObject *func, PyObject *funcargs)\n/*[clinic end generated code: output=7e4999853cd4e5a6 input=5102e8b11049f92f]*/\n{\n    return _PyEval_CallTracing(func, funcargs);\n}\n\n/*[clinic input]\nsys.callstats\n\nReturn a tuple of function call statistics.\n\nA tuple is returned only if CALL_PROFILE was defined when Python was\nbuilt.  Otherwise, this returns None.\n\nWhen enabled, this function returns detailed, implementation-specific\ndetails about the number of function calls executed. The return value\nis a 11-tuple where the entries in the tuple are counts of:\n0. all function calls\n1. calls to PyFunction_Type objects\n2. PyFunction calls that do not create an argument tuple\n3. PyFunction calls that do not create an argument tuple\n   and bypass PyEval_EvalCodeEx()\n4. PyMethod calls\n5. PyMethod calls on bound methods\n6. PyType calls\n7. PyCFunction calls\n8. generator calls\n9. All other calls\n10. Number of stack pops performed by call_function()\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_callstats_impl(PyObject *module)\n/*[clinic end generated code: output=edc4a74957fa8def input=d447d8d224d5d175]*/\n{\n    if (PyErr_WarnEx(PyExc_DeprecationWarning,\n                      \"sys.callstats() has been deprecated in Python 3.7 \"\n                      \"and will be removed in the future\", 1) < 0) {\n        return NULL;\n    }\n\n    Py_RETURN_NONE;\n}\n\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n/*[clinic input]\nsys._debugmallocstats\n\nPrint summary info to stderr about the state of pymalloc's structures.\n\nIn Py_DEBUG mode, also perform some expensive internal consistency\nchecks.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys__debugmallocstats_impl(PyObject *module)\n/*[clinic end generated code: output=ec3565f8c7cee46a input=33c0c9c416f98424]*/\n{\n#ifdef WITH_PYMALLOC\n    if (_PyObject_DebugMallocStats(stderr)) {\n        fputc('\\n', stderr);\n    }\n#endif\n    _PyObject_DebugTypeStats(stderr);\n\n    Py_RETURN_NONE;\n}\n\n#ifdef Py_TRACE_REFS\n/* Defined in objects.c because it uses static globals if that file */\nextern PyObject *_Py_GetObjects(PyObject *, PyObject *);\n#endif\n\n#ifdef DYNAMIC_EXECUTION_PROFILE\n/* Defined in ceval.c because it uses static globals if that file */\nextern PyObject *_Py_GetDXProfile(PyObject *,  PyObject *);\n#endif\n\n#ifdef __cplusplus\n}\n#endif\n\n\n/*[clinic input]\nsys._clear_type_cache\n\nClear the internal type lookup cache.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys__clear_type_cache_impl(PyObject *module)\n/*[clinic end generated code: output=20e48ca54a6f6971 input=127f3e04a8d9b555]*/\n{\n    PyType_ClearCache();\n    Py_RETURN_NONE;\n}\n\n/*[clinic input]\nsys.is_finalizing\n\nReturn True if Python is exiting.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_is_finalizing_impl(PyObject *module)\n/*[clinic end generated code: output=735b5ff7962ab281 input=f0df747a039948a5]*/\n{\n    return PyBool_FromLong(_Py_IsFinalizing());\n}\n\n#ifdef ANDROID_API_LEVEL\n/*[clinic input]\nsys.getandroidapilevel\n\nReturn the build time API version of Android as an integer.\n[clinic start generated code]*/\n\nstatic PyObject *\nsys_getandroidapilevel_impl(PyObject *module)\n/*[clinic end generated code: output=214abf183a1c70c1 input=3e6d6c9fcdd24ac6]*/\n{\n    return PyLong_FromLong(ANDROID_API_LEVEL);\n}\n#endif   /* ANDROID_API_LEVEL */\n\n\n\nstatic PyMethodDef sys_methods[] = {\n    /* Might as well keep this in alphabetic order */\n    SYS_ADDAUDITHOOK_METHODDEF\n    {\"audit\",           (PyCFunction)(void(*)(void))sys_audit, METH_FASTCALL, audit_doc },\n    {\"breakpointhook\",  (PyCFunction)(void(*)(void))sys_breakpointhook,\n     METH_FASTCALL | METH_KEYWORDS, breakpointhook_doc},\n    SYS_CALLSTATS_METHODDEF\n    SYS__CLEAR_TYPE_CACHE_METHODDEF\n    SYS__CURRENT_FRAMES_METHODDEF\n    SYS_DISPLAYHOOK_METHODDEF\n    SYS_EXC_INFO_METHODDEF\n    SYS_EXCEPTHOOK_METHODDEF\n    SYS_EXIT_METHODDEF\n    SYS_GETDEFAULTENCODING_METHODDEF\n    SYS_GETDLOPENFLAGS_METHODDEF\n    SYS_GETALLOCATEDBLOCKS_METHODDEF\n    SYS_GETCOUNTS_METHODDEF\n#ifdef DYNAMIC_EXECUTION_PROFILE\n    {\"getdxp\",          _Py_GetDXProfile, METH_VARARGS},\n#endif\n    SYS_GETFILESYSTEMENCODING_METHODDEF\n    SYS_GETFILESYSTEMENCODEERRORS_METHODDEF\n#ifdef Py_TRACE_REFS\n    {\"getobjects\",      _Py_GetObjects, METH_VARARGS},\n#endif\n    SYS_GETTOTALREFCOUNT_METHODDEF\n    SYS_GETREFCOUNT_METHODDEF\n    SYS_GETRECURSIONLIMIT_METHODDEF\n    {\"getsizeof\",   (PyCFunction)(void(*)(void))sys_getsizeof,\n     METH_VARARGS | METH_KEYWORDS, getsizeof_doc},\n    SYS__GETFRAME_METHODDEF\n    SYS_GETWINDOWSVERSION_METHODDEF\n    SYS__ENABLELEGACYWINDOWSFSENCODING_METHODDEF\n    SYS_INTERN_METHODDEF\n    SYS_IS_FINALIZING_METHODDEF\n    SYS_MDEBUG_METHODDEF\n    SYS_SETCHECKINTERVAL_METHODDEF\n    SYS_GETCHECKINTERVAL_METHODDEF\n    SYS_SETSWITCHINTERVAL_METHODDEF\n    SYS_GETSWITCHINTERVAL_METHODDEF\n    SYS_SETDLOPENFLAGS_METHODDEF\n    {\"setprofile\",      sys_setprofile, METH_O, setprofile_doc},\n    SYS_GETPROFILE_METHODDEF\n    SYS_SETRECURSIONLIMIT_METHODDEF\n    {\"settrace\",        sys_settrace, METH_O, settrace_doc},\n    SYS_GETTRACE_METHODDEF\n    SYS_CALL_TRACING_METHODDEF\n    SYS__DEBUGMALLOCSTATS_METHODDEF\n    SYS_SET_COROUTINE_ORIGIN_TRACKING_DEPTH_METHODDEF\n    SYS_GET_COROUTINE_ORIGIN_TRACKING_DEPTH_METHODDEF\n    {\"set_asyncgen_hooks\", (PyCFunction)(void(*)(void))sys_set_asyncgen_hooks,\n     METH_VARARGS | METH_KEYWORDS, set_asyncgen_hooks_doc},\n    SYS_GET_ASYNCGEN_HOOKS_METHODDEF\n    SYS_GETANDROIDAPILEVEL_METHODDEF\n    SYS_UNRAISABLEHOOK_METHODDEF\n    {NULL,              NULL}           /* sentinel */\n};\n\nstatic PyObject *\nlist_builtin_module_names(void)\n{\n    PyObject *list = PyList_New(0);\n    int i;\n    if (list == NULL)\n        return NULL;\n    for (i = 0; PyImport_Inittab[i].name != NULL; i++) {\n        PyObject *name = PyUnicode_FromString(\n            PyImport_Inittab[i].name);\n        if (name == NULL)\n            break;\n        PyList_Append(list, name);\n        Py_DECREF(name);\n    }\n    if (PyList_Sort(list) != 0) {\n        Py_DECREF(list);\n        list = NULL;\n    }\n    if (list) {\n        PyObject *v = PyList_AsTuple(list);\n        Py_DECREF(list);\n        list = v;\n    }\n    return list;\n}\n\n/* Pre-initialization support for sys.warnoptions and sys._xoptions\n *\n * Modern internal code paths:\n *   These APIs get called after _Py_InitializeCore and get to use the\n *   regular CPython list, dict, and unicode APIs.\n *\n * Legacy embedding code paths:\n *   The multi-phase initialization API isn't public yet, so embedding\n *   apps still need to be able configure sys.warnoptions and sys._xoptions\n *   before they call Py_Initialize. To support this, we stash copies of\n *   the supplied wchar * sequences in linked lists, and then migrate the\n *   contents of those lists to the sys module in _PyInitializeCore.\n *\n */\n\nstruct _preinit_entry {\n    wchar_t *value;\n    struct _preinit_entry *next;\n};\n\ntypedef struct _preinit_entry *_Py_PreInitEntry;\n\nstatic _Py_PreInitEntry _preinit_warnoptions = NULL;\nstatic _Py_PreInitEntry _preinit_xoptions = NULL;\n\nstatic _Py_PreInitEntry\n_alloc_preinit_entry(const wchar_t *value)\n{\n    /* To get this to work, we have to initialize the runtime implicitly */\n    _PyRuntime_Initialize();\n\n    /* Force default allocator, so we can ensure that it also gets used to\n     * destroy the linked list in _clear_preinit_entries.\n     */\n    PyMemAllocatorEx old_alloc;\n    _PyMem_SetDefaultAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n\n    _Py_PreInitEntry node = PyMem_RawCalloc(1, sizeof(*node));\n    if (node != NULL) {\n        node->value = _PyMem_RawWcsdup(value);\n        if (node->value == NULL) {\n            PyMem_RawFree(node);\n            node = NULL;\n        };\n    };\n\n    PyMem_SetAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n    return node;\n}\n\nstatic int\n_append_preinit_entry(_Py_PreInitEntry *optionlist, const wchar_t *value)\n{\n    _Py_PreInitEntry new_entry = _alloc_preinit_entry(value);\n    if (new_entry == NULL) {\n        return -1;\n    }\n    /* We maintain the linked list in this order so it's easy to play back\n     * the add commands in the same order later on in _Py_InitializeCore\n     */\n    _Py_PreInitEntry last_entry = *optionlist;\n    if (last_entry == NULL) {\n        *optionlist = new_entry;\n    } else {\n        while (last_entry->next != NULL) {\n            last_entry = last_entry->next;\n        }\n        last_entry->next = new_entry;\n    }\n    return 0;\n}\n\nstatic void\n_clear_preinit_entries(_Py_PreInitEntry *optionlist)\n{\n    _Py_PreInitEntry current = *optionlist;\n    *optionlist = NULL;\n    /* Deallocate the nodes and their contents using the default allocator */\n    PyMemAllocatorEx old_alloc;\n    _PyMem_SetDefaultAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n    while (current != NULL) {\n        _Py_PreInitEntry next = current->next;\n        PyMem_RawFree(current->value);\n        PyMem_RawFree(current);\n        current = next;\n    }\n    PyMem_SetAllocator(PYMEM_DOMAIN_RAW, &old_alloc);\n}\n\n\nPyStatus\n_PySys_ReadPreinitWarnOptions(PyWideStringList *options)\n{\n    PyStatus status;\n    _Py_PreInitEntry entry;\n\n    for (entry = _preinit_warnoptions; entry != NULL; entry = entry->next) {\n        status = PyWideStringList_Append(options, entry->value);\n        if (_PyStatus_EXCEPTION(status)) {\n            return status;\n        }\n    }\n\n    _clear_preinit_entries(&_preinit_warnoptions);\n    return _PyStatus_OK();\n}\n\n\nPyStatus\n_PySys_ReadPreinitXOptions(PyConfig *config)\n{\n    PyStatus status;\n    _Py_PreInitEntry entry;\n\n    for (entry = _preinit_xoptions; entry != NULL; entry = entry->next) {\n        status = PyWideStringList_Append(&config->xoptions, entry->value);\n        if (_PyStatus_EXCEPTION(status)) {\n            return status;\n        }\n    }\n\n    _clear_preinit_entries(&_preinit_xoptions);\n    return _PyStatus_OK();\n}\n\n\nstatic PyObject *\nget_warnoptions(void)\n{\n    PyObject *warnoptions = _PySys_GetObjectId(&PyId_warnoptions);\n    if (warnoptions == NULL || !PyList_Check(warnoptions)) {\n        /* PEP432 TODO: we can reach this if warnoptions is NULL in the main\n        *  interpreter config. When that happens, we need to properly set\n         * the `warnoptions` reference in the main interpreter config as well.\n         *\n         * For Python 3.7, we shouldn't be able to get here due to the\n         * combination of how _PyMainInterpreter_ReadConfig and _PySys_EndInit\n         * work, but we expect 3.8+ to make the _PyMainInterpreter_ReadConfig\n         * call optional for embedding applications, thus making this\n         * reachable again.\n         */\n        warnoptions = PyList_New(0);\n        if (warnoptions == NULL)\n            return NULL;\n        if (_PySys_SetObjectId(&PyId_warnoptions, warnoptions)) {\n            Py_DECREF(warnoptions);\n            return NULL;\n        }\n        Py_DECREF(warnoptions);\n    }\n    return warnoptions;\n}\n\nvoid\nPySys_ResetWarnOptions(void)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    if (tstate == NULL) {\n        _clear_preinit_entries(&_preinit_warnoptions);\n        return;\n    }\n\n    PyObject *warnoptions = _PySys_GetObjectId(&PyId_warnoptions);\n    if (warnoptions == NULL || !PyList_Check(warnoptions))\n        return;\n    PyList_SetSlice(warnoptions, 0, PyList_GET_SIZE(warnoptions), NULL);\n}\n\nstatic int\n_PySys_AddWarnOptionWithError(PyObject *option)\n{\n    PyObject *warnoptions = get_warnoptions();\n    if (warnoptions == NULL) {\n        return -1;\n    }\n    if (PyList_Append(warnoptions, option)) {\n        return -1;\n    }\n    return 0;\n}\n\nvoid\nPySys_AddWarnOptionUnicode(PyObject *option)\n{\n    if (_PySys_AddWarnOptionWithError(option) < 0) {\n        /* No return value, therefore clear error state if possible */\n        if (_PyThreadState_UncheckedGet()) {\n            PyErr_Clear();\n        }\n    }\n}\n\nvoid\nPySys_AddWarnOption(const wchar_t *s)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    if (tstate == NULL) {\n        _append_preinit_entry(&_preinit_warnoptions, s);\n        return;\n    }\n    PyObject *unicode;\n    unicode = PyUnicode_FromWideChar(s, -1);\n    if (unicode == NULL)\n        return;\n    PySys_AddWarnOptionUnicode(unicode);\n    Py_DECREF(unicode);\n}\n\nint\nPySys_HasWarnOptions(void)\n{\n    PyObject *warnoptions = _PySys_GetObjectId(&PyId_warnoptions);\n    return (warnoptions != NULL && PyList_Check(warnoptions)\n            && PyList_GET_SIZE(warnoptions) > 0);\n}\n\nstatic PyObject *\nget_xoptions(void)\n{\n    PyObject *xoptions = _PySys_GetObjectId(&PyId__xoptions);\n    if (xoptions == NULL || !PyDict_Check(xoptions)) {\n        /* PEP432 TODO: we can reach this if xoptions is NULL in the main\n        *  interpreter config. When that happens, we need to properly set\n         * the `xoptions` reference in the main interpreter config as well.\n         *\n         * For Python 3.7, we shouldn't be able to get here due to the\n         * combination of how _PyMainInterpreter_ReadConfig and _PySys_EndInit\n         * work, but we expect 3.8+ to make the _PyMainInterpreter_ReadConfig\n         * call optional for embedding applications, thus making this\n         * reachable again.\n         */\n        xoptions = PyDict_New();\n        if (xoptions == NULL)\n            return NULL;\n        if (_PySys_SetObjectId(&PyId__xoptions, xoptions)) {\n            Py_DECREF(xoptions);\n            return NULL;\n        }\n        Py_DECREF(xoptions);\n    }\n    return xoptions;\n}\n\nstatic int\n_PySys_AddXOptionWithError(const wchar_t *s)\n{\n    PyObject *name = NULL, *value = NULL;\n\n    PyObject *opts = get_xoptions();\n    if (opts == NULL) {\n        goto error;\n    }\n\n    const wchar_t *name_end = wcschr(s, L'=');\n    if (!name_end) {\n        name = PyUnicode_FromWideChar(s, -1);\n        value = Py_True;\n        Py_INCREF(value);\n    }\n    else {\n        name = PyUnicode_FromWideChar(s, name_end - s);\n        value = PyUnicode_FromWideChar(name_end + 1, -1);\n    }\n    if (name == NULL || value == NULL) {\n        goto error;\n    }\n    if (PyDict_SetItem(opts, name, value) < 0) {\n        goto error;\n    }\n    Py_DECREF(name);\n    Py_DECREF(value);\n    return 0;\n\nerror:\n    Py_XDECREF(name);\n    Py_XDECREF(value);\n    return -1;\n}\n\nvoid\nPySys_AddXOption(const wchar_t *s)\n{\n    PyThreadState *tstate = _PyThreadState_GET();\n    if (tstate == NULL) {\n        _append_preinit_entry(&_preinit_xoptions, s);\n        return;\n    }\n    if (_PySys_AddXOptionWithError(s) < 0) {\n        /* No return value, therefore clear error state if possible */\n        PyErr_Clear();\n    }\n}\n\nPyObject *\nPySys_GetXOptions(void)\n{\n    return get_xoptions();\n}\n\n/* XXX This doc string is too long to be a single string literal in VC++ 5.0.\n   Two literals concatenated works just fine.  If you have a K&R compiler\n   or other abomination that however *does* understand longer strings,\n   get rid of the !!! comment in the middle and the quotes that surround it. */\nPyDoc_VAR(sys_doc) =\nPyDoc_STR(\n\"This module provides access to some objects used or maintained by the\\n\\\ninterpreter and to functions that interact strongly with the interpreter.\\n\\\n\\n\\\nDynamic objects:\\n\\\n\\n\\\nargv -- command line arguments; argv[0] is the script pathname if known\\n\\\npath -- module search path; path[0] is the script directory, else ''\\n\\\nmodules -- dictionary of loaded modules\\n\\\n\\n\\\ndisplayhook -- called to show results in an interactive session\\n\\\nexcepthook -- called to handle any uncaught exception other than SystemExit\\n\\\n  To customize printing in an interactive session or to install a custom\\n\\\n  top-level exception handler, assign other functions to replace these.\\n\\\n\\n\\\nstdin -- standard input file object; used by input()\\n\\\nstdout -- standard output file object; used by print()\\n\\\nstderr -- standard error object; used for error messages\\n\\\n  By assigning other file objects (or objects that behave like files)\\n\\\n  to these, it is possible to redirect all of the interpreter's I/O.\\n\\\n\\n\\\nlast_type -- type of last uncaught exception\\n\\\nlast_value -- value of last uncaught exception\\n\\\nlast_traceback -- traceback of last uncaught exception\\n\\\n  These three are only available in an interactive session after a\\n\\\n  traceback has been printed.\\n\\\n\"\n)\n/* concatenating string here */\nPyDoc_STR(\n\"\\n\\\nStatic objects:\\n\\\n\\n\\\nbuiltin_module_names -- tuple of module names built into this interpreter\\n\\\ncopyright -- copyright notice pertaining to this interpreter\\n\\\nexec_prefix -- prefix used to find the machine-specific Python library\\n\\\nexecutable -- absolute path of the executable binary of the Python interpreter\\n\\\nfloat_info -- a named tuple with information about the float implementation.\\n\\\nfloat_repr_style -- string indicating the style of repr() output for floats\\n\\\nhash_info -- a named tuple with information about the hash algorithm.\\n\\\nhexversion -- version information encoded as a single integer\\n\\\nimplementation -- Python implementation information.\\n\\\nint_info -- a named tuple with information about the int implementation.\\n\\\nmaxsize -- the largest supported length of containers.\\n\\\nmaxunicode -- the value of the largest Unicode code point\\n\\\nplatform -- platform identifier\\n\\\nprefix -- prefix used to find the Python library\\n\\\nthread_info -- a named tuple with information about the thread implementation.\\n\\\nversion -- the version of this interpreter as a string\\n\\\nversion_info -- version information as a named tuple\\n\\\n\"\n)\n#ifdef MS_COREDLL\n/* concatenating string here */\nPyDoc_STR(\n\"dllhandle -- [Windows only] integer handle of the Python DLL\\n\\\nwinver -- [Windows only] version number of the Python DLL\\n\\\n\"\n)\n#endif /* MS_COREDLL */\n#ifdef MS_WINDOWS\n/* concatenating string here */\nPyDoc_STR(\n\"_enablelegacywindowsfsencoding -- [Windows only]\\n\\\n\"\n)\n#endif\nPyDoc_STR(\n\"__stdin__ -- the original stdin; don't touch!\\n\\\n__stdout__ -- the original stdout; don't touch!\\n\\\n__stderr__ -- the original stderr; don't touch!\\n\\\n__displayhook__ -- the original displayhook; don't touch!\\n\\\n__excepthook__ -- the original excepthook; don't touch!\\n\\\n\\n\\\nFunctions:\\n\\\n\\n\\\ndisplayhook() -- print an object to the screen, and save it in builtins._\\n\\\nexcepthook() -- print an exception and its traceback to sys.stderr\\n\\\nexc_info() -- return thread-safe information about the current exception\\n\\\nexit() -- exit the interpreter by raising SystemExit\\n\\\ngetdlopenflags() -- returns flags to be used for dlopen() calls\\n\\\ngetprofile() -- get the global profiling function\\n\\\ngetrefcount() -- return the reference count for an object (plus one :-)\\n\\\ngetrecursionlimit() -- return the max recursion depth for the interpreter\\n\\\ngetsizeof() -- return the size of an object in bytes\\n\\\ngettrace() -- get the global debug tracing function\\n\\\nsetcheckinterval() -- control how often the interpreter checks for events\\n\\\nsetdlopenflags() -- set the flags to be used for dlopen() calls\\n\\\nsetprofile() -- set the global profiling function\\n\\\nsetrecursionlimit() -- set the max recursion depth for the interpreter\\n\\\nsettrace() -- set the global debug tracing function\\n\\\n\"\n)\n/* end of sys_doc */ ;\n\n\nPyDoc_STRVAR(flags__doc__,\n\"sys.flags\\n\\\n\\n\\\nFlags provided through command line arguments or environment vars.\");\n\nstatic PyTypeObject FlagsType;\n\nstatic PyStructSequence_Field flags_fields[] = {\n    {\"debug\",                   \"-d\"},\n    {\"inspect\",                 \"-i\"},\n    {\"interactive\",             \"-i\"},\n    {\"optimize\",                \"-O or -OO\"},\n    {\"dont_write_bytecode\",     \"-B\"},\n    {\"no_user_site\",            \"-s\"},\n    {\"no_site\",                 \"-S\"},\n    {\"ignore_environment\",      \"-E\"},\n    {\"verbose\",                 \"-v\"},\n    /* {\"unbuffered\",                   \"-u\"}, */\n    /* {\"skip_first\",                   \"-x\"}, */\n    {\"bytes_warning\",           \"-b\"},\n    {\"quiet\",                   \"-q\"},\n    {\"hash_randomization\",      \"-R\"},\n    {\"isolated\",                \"-I\"},\n    {\"dev_mode\",                \"-X dev\"},\n    {\"utf8_mode\",               \"-X utf8\"},\n    {0}\n};\n\nstatic PyStructSequence_Desc flags_desc = {\n    \"sys.flags\",        /* name */\n    flags__doc__,       /* doc */\n    flags_fields,       /* fields */\n    15\n};\n\nstatic PyObject*\nmake_flags(_PyRuntimeState *runtime, PyInterpreterState *interp)\n{\n    int pos = 0;\n    PyObject *seq;\n    const PyPreConfig *preconfig = &runtime->preconfig;\n    const PyConfig *config = &interp->config;\n\n    seq = PyStructSequence_New(&FlagsType);\n    if (seq == NULL)\n        return NULL;\n\n#define SetFlag(flag) \\\n    PyStructSequence_SET_ITEM(seq, pos++, PyLong_FromLong(flag))\n\n    SetFlag(config->parser_debug);\n    SetFlag(config->inspect);\n    SetFlag(config->interactive);\n    SetFlag(config->optimization_level);\n    SetFlag(!config->write_bytecode);\n    SetFlag(!config->user_site_directory);\n    SetFlag(!config->site_import);\n    SetFlag(!config->use_environment);\n    SetFlag(config->verbose);\n    /* SetFlag(saw_unbuffered_flag); */\n    /* SetFlag(skipfirstline); */\n    SetFlag(config->bytes_warning);\n    SetFlag(config->quiet);\n    SetFlag(config->use_hash_seed == 0 || config->hash_seed != 0);\n    SetFlag(config->isolated);\n    PyStructSequence_SET_ITEM(seq, pos++, PyBool_FromLong(config->dev_mode));\n    SetFlag(preconfig->utf8_mode);\n#undef SetFlag\n\n    if (PyErr_Occurred()) {\n        Py_DECREF(seq);\n        return NULL;\n    }\n    return seq;\n}\n\nPyDoc_STRVAR(version_info__doc__,\n\"sys.version_info\\n\\\n\\n\\\nVersion information as a named tuple.\");\n\nstatic PyTypeObject VersionInfoType;\n\nstatic PyStructSequence_Field version_info_fields[] = {\n    {\"major\", \"Major release number\"},\n    {\"minor\", \"Minor release number\"},\n    {\"micro\", \"Patch release number\"},\n    {\"releaselevel\", \"'alpha', 'beta', 'candidate', or 'final'\"},\n    {\"serial\", \"Serial release number\"},\n    {0}\n};\n\nstatic PyStructSequence_Desc version_info_desc = {\n    \"sys.version_info\",     /* name */\n    version_info__doc__,    /* doc */\n    version_info_fields,    /* fields */\n    5\n};\n\nstatic PyObject *\nmake_version_info(void)\n{\n    PyObject *version_info;\n    char *s;\n    int pos = 0;\n\n    version_info = PyStructSequence_New(&VersionInfoType);\n    if (version_info == NULL) {\n        return NULL;\n    }\n\n    /*\n     * These release level checks are mutually exclusive and cover\n     * the field, so don't get too fancy with the pre-processor!\n     */\n#if PY_RELEASE_LEVEL == PY_RELEASE_LEVEL_ALPHA\n    s = \"alpha\";\n#elif PY_RELEASE_LEVEL == PY_RELEASE_LEVEL_BETA\n    s = \"beta\";\n#elif PY_RELEASE_LEVEL == PY_RELEASE_LEVEL_GAMMA\n    s = \"candidate\";\n#elif PY_RELEASE_LEVEL == PY_RELEASE_LEVEL_FINAL\n    s = \"final\";\n#endif\n\n#define SetIntItem(flag) \\\n    PyStructSequence_SET_ITEM(version_info, pos++, PyLong_FromLong(flag))\n#define SetStrItem(flag) \\\n    PyStructSequence_SET_ITEM(version_info, pos++, PyUnicode_FromString(flag))\n\n    SetIntItem(PY_MAJOR_VERSION);\n    SetIntItem(PY_MINOR_VERSION);\n    SetIntItem(PY_MICRO_VERSION);\n    SetStrItem(s);\n    SetIntItem(PY_RELEASE_SERIAL);\n#undef SetIntItem\n#undef SetStrItem\n\n    if (PyErr_Occurred()) {\n        Py_CLEAR(version_info);\n        return NULL;\n    }\n    return version_info;\n}\n\n/* sys.implementation values */\n#define NAME \"cpython\"\nconst char *_PySys_ImplName = NAME;\n#define MAJOR Py_STRINGIFY(PY_MAJOR_VERSION)\n#define MINOR Py_STRINGIFY(PY_MINOR_VERSION)\n#define TAG NAME \"-\" MAJOR MINOR\nconst char *_PySys_ImplCacheTag = TAG;\n#undef NAME\n#undef MAJOR\n#undef MINOR\n#undef TAG\n\nstatic PyObject *\nmake_impl_info(PyObject *version_info)\n{\n    int res;\n    PyObject *impl_info, *value, *ns;\n\n    impl_info = PyDict_New();\n    if (impl_info == NULL)\n        return NULL;\n\n    /* populate the dict */\n\n    value = PyUnicode_FromString(_PySys_ImplName);\n    if (value == NULL)\n        goto error;\n    res = PyDict_SetItemString(impl_info, \"name\", value);\n    Py_DECREF(value);\n    if (res < 0)\n        goto error;\n\n    value = PyUnicode_FromString(_PySys_ImplCacheTag);\n    if (value == NULL)\n        goto error;\n    res = PyDict_SetItemString(impl_info, \"cache_tag\", value);\n    Py_DECREF(value);\n    if (res < 0)\n        goto error;\n\n    res = PyDict_SetItemString(impl_info, \"version\", version_info);\n    if (res < 0)\n        goto error;\n\n    value = PyLong_FromLong(PY_VERSION_HEX);\n    if (value == NULL)\n        goto error;\n    res = PyDict_SetItemString(impl_info, \"hexversion\", value);\n    Py_DECREF(value);\n    if (res < 0)\n        goto error;\n\n#ifdef MULTIARCH\n    value = PyUnicode_FromString(MULTIARCH);\n    if (value == NULL)\n        goto error;\n    res = PyDict_SetItemString(impl_info, \"_multiarch\", value);\n    Py_DECREF(value);\n    if (res < 0)\n        goto error;\n#endif\n\n    /* dict ready */\n\n    ns = _PyNamespace_New(impl_info);\n    Py_DECREF(impl_info);\n    return ns;\n\nerror:\n    Py_CLEAR(impl_info);\n    return NULL;\n}\n\nstatic struct PyModuleDef sysmodule = {\n    PyModuleDef_HEAD_INIT,\n    \"sys\",\n    sys_doc,\n    -1, /* multiple \"initialization\" just copies the module dict. */\n    sys_methods,\n    NULL,\n    NULL,\n    NULL,\n    NULL\n};\n\n/* Updating the sys namespace, returning NULL pointer on error */\n#define SET_SYS_FROM_STRING_BORROW(key, value)             \\\n    do {                                                   \\\n        PyObject *v = (value);                             \\\n        if (v == NULL) {                                   \\\n            goto err_occurred;                             \\\n        }                                                  \\\n        res = PyDict_SetItemString(sysdict, key, v);       \\\n        if (res < 0) {                                     \\\n            goto err_occurred;                             \\\n        }                                                  \\\n    } while (0)\n#define SET_SYS_FROM_STRING(key, value)                    \\\n    do {                                                   \\\n        PyObject *v = (value);                             \\\n        if (v == NULL) {                                   \\\n            goto err_occurred;                             \\\n        }                                                  \\\n        res = PyDict_SetItemString(sysdict, key, v);       \\\n        Py_DECREF(v);                                      \\\n        if (res < 0) {                                     \\\n            goto err_occurred;                             \\\n        }                                                  \\\n    } while (0)\n\nstatic PyStatus\n_PySys_InitCore(_PyRuntimeState *runtime, PyInterpreterState *interp,\n                PyObject *sysdict)\n{\n    PyObject *version_info;\n    int res;\n\n    /* stdin/stdout/stderr are set in pylifecycle.c */\n\n    SET_SYS_FROM_STRING_BORROW(\"__displayhook__\",\n                               PyDict_GetItemString(sysdict, \"displayhook\"));\n    SET_SYS_FROM_STRING_BORROW(\"__excepthook__\",\n                               PyDict_GetItemString(sysdict, \"excepthook\"));\n    SET_SYS_FROM_STRING_BORROW(\n        \"__breakpointhook__\",\n        PyDict_GetItemString(sysdict, \"breakpointhook\"));\n    SET_SYS_FROM_STRING_BORROW(\"__unraisablehook__\",\n                               PyDict_GetItemString(sysdict, \"unraisablehook\"));\n\n    SET_SYS_FROM_STRING(\"version\",\n                         PyUnicode_FromString(Py_GetVersion()));\n    SET_SYS_FROM_STRING(\"hexversion\",\n                         PyLong_FromLong(PY_VERSION_HEX));\n    SET_SYS_FROM_STRING(\"_git\",\n                        Py_BuildValue(\"(szz)\", \"CPython\", _Py_gitidentifier(),\n                                      _Py_gitversion()));\n    SET_SYS_FROM_STRING(\"_framework\", PyUnicode_FromString(_PYTHONFRAMEWORK));\n    SET_SYS_FROM_STRING(\"api_version\",\n                        PyLong_FromLong(PYTHON_API_VERSION));\n    SET_SYS_FROM_STRING(\"copyright\",\n                        PyUnicode_FromString(Py_GetCopyright()));\n    SET_SYS_FROM_STRING(\"platform\",\n                        PyUnicode_FromString(Py_GetPlatform()));\n    SET_SYS_FROM_STRING(\"maxsize\",\n                        PyLong_FromSsize_t(PY_SSIZE_T_MAX));\n    SET_SYS_FROM_STRING(\"float_info\",\n                        PyFloat_GetInfo());\n    SET_SYS_FROM_STRING(\"int_info\",\n                        PyLong_GetInfo());\n    /* initialize hash_info */\n    if (Hash_InfoType.tp_name == NULL) {\n        if (PyStructSequence_InitType2(&Hash_InfoType, &hash_info_desc) < 0) {\n            goto type_init_failed;\n        }\n    }\n    SET_SYS_FROM_STRING(\"hash_info\",\n                        get_hash_info());\n    SET_SYS_FROM_STRING(\"maxunicode\",\n                        PyLong_FromLong(0x10FFFF));\n    SET_SYS_FROM_STRING(\"builtin_module_names\",\n                        list_builtin_module_names());\n#if PY_BIG_ENDIAN\n    SET_SYS_FROM_STRING(\"byteorder\",\n                        PyUnicode_FromString(\"big\"));\n#else\n    SET_SYS_FROM_STRING(\"byteorder\",\n                        PyUnicode_FromString(\"little\"));\n#endif\n\n#ifdef MS_COREDLL\n    SET_SYS_FROM_STRING(\"dllhandle\",\n                        PyLong_FromVoidPtr(PyWin_DLLhModule));\n    SET_SYS_FROM_STRING(\"winver\",\n                        PyUnicode_FromString(PyWin_DLLVersionString));\n#endif\n#ifdef ABIFLAGS\n    SET_SYS_FROM_STRING(\"abiflags\",\n                        PyUnicode_FromString(ABIFLAGS));\n#endif\n\n    /* version_info */\n    if (VersionInfoType.tp_name == NULL) {\n        if (PyStructSequence_InitType2(&VersionInfoType,\n                                       &version_info_desc) < 0) {\n            goto type_init_failed;\n        }\n    }\n    version_info = make_version_info();\n    SET_SYS_FROM_STRING(\"version_info\", version_info);\n    /* prevent user from creating new instances */\n    VersionInfoType.tp_init = NULL;\n    VersionInfoType.tp_new = NULL;\n    res = PyDict_DelItemString(VersionInfoType.tp_dict, \"__new__\");\n    if (res < 0 && PyErr_ExceptionMatches(PyExc_KeyError))\n        PyErr_Clear();\n\n    /* implementation */\n    SET_SYS_FROM_STRING(\"implementation\", make_impl_info(version_info));\n\n    /* flags */\n    if (FlagsType.tp_name == 0) {\n        if (PyStructSequence_InitType2(&FlagsType, &flags_desc) < 0) {\n            goto type_init_failed;\n        }\n    }\n    /* Set flags to their default values (updated by _PySys_InitMain()) */\n    SET_SYS_FROM_STRING(\"flags\", make_flags(runtime, interp));\n\n#if defined(MS_WINDOWS)\n    /* getwindowsversion */\n    if (WindowsVersionType.tp_name == 0)\n        if (PyStructSequence_InitType2(&WindowsVersionType,\n                                       &windows_version_desc) < 0) {\n            goto type_init_failed;\n        }\n    /* prevent user from creating new instances */\n    WindowsVersionType.tp_init = NULL;\n    WindowsVersionType.tp_new = NULL;\n    assert(!PyErr_Occurred());\n    res = PyDict_DelItemString(WindowsVersionType.tp_dict, \"__new__\");\n    if (res < 0 && PyErr_ExceptionMatches(PyExc_KeyError)) {\n        PyErr_Clear();\n    }\n#endif\n\n    /* float repr style: 0.03 (short) vs 0.029999999999999999 (legacy) */\n#ifndef PY_NO_SHORT_FLOAT_REPR\n    SET_SYS_FROM_STRING(\"float_repr_style\",\n                        PyUnicode_FromString(\"short\"));\n#else\n    SET_SYS_FROM_STRING(\"float_repr_style\",\n                        PyUnicode_FromString(\"legacy\"));\n#endif\n\n    SET_SYS_FROM_STRING(\"thread_info\", PyThread_GetInfo());\n\n    /* initialize asyncgen_hooks */\n    if (AsyncGenHooksType.tp_name == NULL) {\n        if (PyStructSequence_InitType2(\n                &AsyncGenHooksType, &asyncgen_hooks_desc) < 0) {\n            goto type_init_failed;\n        }\n    }\n\n    if (PyErr_Occurred()) {\n        goto err_occurred;\n    }\n    return _PyStatus_OK();\n\ntype_init_failed:\n    return _PyStatus_ERR(\"failed to initialize a type\");\n\nerr_occurred:\n    return _PyStatus_ERR(\"can't initialize sys module\");\n}\n\n#undef SET_SYS_FROM_STRING\n\n/* Updating the sys namespace, returning integer error codes */\n#define SET_SYS_FROM_STRING_INT_RESULT(key, value)         \\\n    do {                                                   \\\n        PyObject *v = (value);                             \\\n        if (v == NULL)                                     \\\n            return -1;                                     \\\n        res = PyDict_SetItemString(sysdict, key, v);       \\\n        Py_DECREF(v);                                      \\\n        if (res < 0) {                                     \\\n            return res;                                    \\\n        }                                                  \\\n    } while (0)\n\n\nstatic int\nsys_add_xoption(PyObject *opts, const wchar_t *s)\n{\n    PyObject *name, *value;\n\n    const wchar_t *name_end = wcschr(s, L'=');\n    if (!name_end) {\n        name = PyUnicode_FromWideChar(s, -1);\n        value = Py_True;\n        Py_INCREF(value);\n    }\n    else {\n        name = PyUnicode_FromWideChar(s, name_end - s);\n        value = PyUnicode_FromWideChar(name_end + 1, -1);\n    }\n    if (name == NULL || value == NULL) {\n        goto error;\n    }\n    if (PyDict_SetItem(opts, name, value) < 0) {\n        goto error;\n    }\n    Py_DECREF(name);\n    Py_DECREF(value);\n    return 0;\n\nerror:\n    Py_XDECREF(name);\n    Py_XDECREF(value);\n    return -1;\n}\n\n\nstatic PyObject*\nsys_create_xoptions_dict(const PyConfig *config)\n{\n    Py_ssize_t nxoption = config->xoptions.length;\n    wchar_t * const * xoptions = config->xoptions.items;\n    PyObject *dict = PyDict_New();\n    if (dict == NULL) {\n        return NULL;\n    }\n\n    for (Py_ssize_t i=0; i < nxoption; i++) {\n        const wchar_t *option = xoptions[i];\n        if (sys_add_xoption(dict, option) < 0) {\n            Py_DECREF(dict);\n            return NULL;\n        }\n    }\n\n    return dict;\n}\n\n\nint\n_PySys_InitMain(_PyRuntimeState *runtime, PyInterpreterState *interp)\n{\n    PyObject *sysdict = interp->sysdict;\n    const PyConfig *config = &interp->config;\n    int res;\n\n#define COPY_LIST(KEY, VALUE) \\\n    do { \\\n        PyObject *list = _PyWideStringList_AsList(&(VALUE)); \\\n        if (list == NULL) { \\\n            return -1; \\\n        } \\\n        SET_SYS_FROM_STRING_BORROW(KEY, list); \\\n        Py_DECREF(list); \\\n    } while (0)\n\n#define SET_SYS_FROM_WSTR(KEY, VALUE) \\\n    do { \\\n        PyObject *str = PyUnicode_FromWideChar(VALUE, -1); \\\n        if (str == NULL) { \\\n            return -1; \\\n        } \\\n        SET_SYS_FROM_STRING_BORROW(KEY, str); \\\n        Py_DECREF(str); \\\n    } while (0)\n\n    COPY_LIST(\"path\", config->module_search_paths);\n\n    SET_SYS_FROM_WSTR(\"executable\", config->executable);\n    SET_SYS_FROM_WSTR(\"_base_executable\", config->base_executable);\n    SET_SYS_FROM_WSTR(\"prefix\", config->prefix);\n    SET_SYS_FROM_WSTR(\"base_prefix\", config->base_prefix);\n    SET_SYS_FROM_WSTR(\"exec_prefix\", config->exec_prefix);\n    SET_SYS_FROM_WSTR(\"base_exec_prefix\", config->base_exec_prefix);\n\n    if (config->pycache_prefix != NULL) {\n        SET_SYS_FROM_WSTR(\"pycache_prefix\", config->pycache_prefix);\n    } else {\n        PyDict_SetItemString(sysdict, \"pycache_prefix\", Py_None);\n    }\n\n    COPY_LIST(\"argv\", config->argv);\n    COPY_LIST(\"warnoptions\", config->warnoptions);\n\n    PyObject *xoptions = sys_create_xoptions_dict(config);\n    if (xoptions == NULL) {\n        return -1;\n    }\n    SET_SYS_FROM_STRING_BORROW(\"_xoptions\", xoptions);\n    Py_DECREF(xoptions);\n\n#undef COPY_LIST\n#undef SET_SYS_FROM_WSTR\n\n    /* Set flags to their final values */\n    SET_SYS_FROM_STRING_INT_RESULT(\"flags\", make_flags(runtime, interp));\n    /* prevent user from creating new instances */\n    FlagsType.tp_init = NULL;\n    FlagsType.tp_new = NULL;\n    res = PyDict_DelItemString(FlagsType.tp_dict, \"__new__\");\n    if (res < 0) {\n        if (!PyErr_ExceptionMatches(PyExc_KeyError)) {\n            return res;\n        }\n        PyErr_Clear();\n    }\n\n    SET_SYS_FROM_STRING_INT_RESULT(\"dont_write_bytecode\",\n                         PyBool_FromLong(!config->write_bytecode));\n\n    if (get_warnoptions() == NULL)\n        return -1;\n\n    if (get_xoptions() == NULL)\n        return -1;\n\n    if (PyErr_Occurred())\n        return -1;\n\n    return 0;\n\nerr_occurred:\n    return -1;\n}\n\n#undef SET_SYS_FROM_STRING_BORROW\n#undef SET_SYS_FROM_STRING_INT_RESULT\n\n\n/* Set up a preliminary stderr printer until we have enough\n   infrastructure for the io module in place.\n\n   Use UTF-8/surrogateescape and ignore EAGAIN errors. */\nPyStatus\n_PySys_SetPreliminaryStderr(PyObject *sysdict)\n{\n    PyObject *pstderr = PyFile_NewStdPrinter(fileno(stderr));\n    if (pstderr == NULL) {\n        goto error;\n    }\n    if (_PyDict_SetItemId(sysdict, &PyId_stderr, pstderr) < 0) {\n        goto error;\n    }\n    if (PyDict_SetItemString(sysdict, \"__stderr__\", pstderr) < 0) {\n        goto error;\n    }\n    Py_DECREF(pstderr);\n    return _PyStatus_OK();\n\nerror:\n    Py_XDECREF(pstderr);\n    return _PyStatus_ERR(\"can't set preliminary stderr\");\n}\n\n\n/* Create sys module without all attributes: _PySys_InitMain() should be called\n   later to add remaining attributes. */\nPyStatus\n_PySys_Create(_PyRuntimeState *runtime, PyInterpreterState *interp,\n              PyObject **sysmod_p)\n{\n    PyObject *modules = PyDict_New();\n    if (modules == NULL) {\n        return _PyStatus_ERR(\"can't make modules dictionary\");\n    }\n    interp->modules = modules;\n\n    PyObject *sysmod = _PyModule_CreateInitialized(&sysmodule, PYTHON_API_VERSION);\n    if (sysmod == NULL) {\n        return _PyStatus_ERR(\"failed to create a module object\");\n    }\n\n    PyObject *sysdict = PyModule_GetDict(sysmod);\n    if (sysdict == NULL) {\n        return _PyStatus_ERR(\"can't initialize sys dict\");\n    }\n    Py_INCREF(sysdict);\n    interp->sysdict = sysdict;\n\n    if (PyDict_SetItemString(sysdict, \"modules\", interp->modules) < 0) {\n        return _PyStatus_ERR(\"can't initialize sys module\");\n    }\n\n    PyStatus status = _PySys_SetPreliminaryStderr(sysdict);\n    if (_PyStatus_EXCEPTION(status)) {\n        return status;\n    }\n\n    status = _PySys_InitCore(runtime, interp, sysdict);\n    if (_PyStatus_EXCEPTION(status)) {\n        return status;\n    }\n\n    _PyImport_FixupBuiltin(sysmod, \"sys\", interp->modules);\n\n    *sysmod_p = sysmod;\n    return _PyStatus_OK();\n}\n\n\nstatic PyObject *\nmakepathobject(const wchar_t *path, wchar_t delim)\n{\n    int i, n;\n    const wchar_t *p;\n    PyObject *v, *w;\n\n    n = 1;\n    p = path;\n    while ((p = wcschr(p, delim)) != NULL) {\n        n++;\n        p++;\n    }\n    v = PyList_New(n);\n    if (v == NULL)\n        return NULL;\n    for (i = 0; ; i++) {\n        p = wcschr(path, delim);\n        if (p == NULL)\n            p = path + wcslen(path); /* End of string */\n        w = PyUnicode_FromWideChar(path, (Py_ssize_t)(p - path));\n        if (w == NULL) {\n            Py_DECREF(v);\n            return NULL;\n        }\n        PyList_SET_ITEM(v, i, w);\n        if (*p == '\\0')\n            break;\n        path = p+1;\n    }\n    return v;\n}\n\nvoid\nPySys_SetPath(const wchar_t *path)\n{\n    PyObject *v;\n    if ((v = makepathobject(path, DELIM)) == NULL)\n        Py_FatalError(\"can't create sys.path\");\n    if (_PySys_SetObjectId(&PyId_path, v) != 0)\n        Py_FatalError(\"can't assign sys.path\");\n    Py_DECREF(v);\n}\n\nstatic PyObject *\nmake_sys_argv(int argc, wchar_t * const * argv)\n{\n    PyObject *list = PyList_New(argc);\n    if (list == NULL) {\n        return NULL;\n    }\n\n    for (Py_ssize_t i = 0; i < argc; i++) {\n        PyObject *v = PyUnicode_FromWideChar(argv[i], -1);\n        if (v == NULL) {\n            Py_DECREF(list);\n            return NULL;\n        }\n        PyList_SET_ITEM(list, i, v);\n    }\n    return list;\n}\n\nvoid\nPySys_SetArgvEx(int argc, wchar_t **argv, int updatepath)\n{\n    wchar_t* empty_argv[1] = {L\"\"};\n\n    if (argc < 1 || argv == NULL) {\n        /* Ensure at least one (empty) argument is seen */\n        argv = empty_argv;\n        argc = 1;\n    }\n\n    PyObject *av = make_sys_argv(argc, argv);\n    if (av == NULL) {\n        Py_FatalError(\"no mem for sys.argv\");\n    }\n    if (PySys_SetObject(\"argv\", av) != 0) {\n        Py_DECREF(av);\n        Py_FatalError(\"can't assign sys.argv\");\n    }\n    Py_DECREF(av);\n\n    if (updatepath) {\n        /* If argv[0] is not '-c' nor '-m', prepend argv[0] to sys.path.\n           If argv[0] is a symlink, use the real path. */\n        const PyWideStringList argv_list = {.length = argc, .items = argv};\n        PyObject *path0 = NULL;\n        if (_PyPathConfig_ComputeSysPath0(&argv_list, &path0)) {\n            if (path0 == NULL) {\n                Py_FatalError(\"can't compute path0 from argv\");\n            }\n\n            PyObject *sys_path = _PySys_GetObjectId(&PyId_path);\n            if (sys_path != NULL) {\n                if (PyList_Insert(sys_path, 0, path0) < 0) {\n                    Py_DECREF(path0);\n                    Py_FatalError(\"can't prepend path0 to sys.path\");\n                }\n            }\n            Py_DECREF(path0);\n        }\n    }\n}\n\nvoid\nPySys_SetArgv(int argc, wchar_t **argv)\n{\n    PySys_SetArgvEx(argc, argv, Py_IsolatedFlag == 0);\n}\n\n/* Reimplementation of PyFile_WriteString() no calling indirectly\n   PyErr_CheckSignals(): avoid the call to PyObject_Str(). */\n\nstatic int\nsys_pyfile_write_unicode(PyObject *unicode, PyObject *file)\n{\n    PyObject *writer = NULL, *result = NULL;\n    int err;\n\n    if (file == NULL)\n        return -1;\n\n    writer = _PyObject_GetAttrId(file, &PyId_write);\n    if (writer == NULL)\n        goto error;\n\n    result = PyObject_CallFunctionObjArgs(writer, unicode, NULL);\n    if (result == NULL) {\n        goto error;\n    } else {\n        err = 0;\n        goto finally;\n    }\n\nerror:\n    err = -1;\nfinally:\n    Py_XDECREF(writer);\n    Py_XDECREF(result);\n    return err;\n}\n\nstatic int\nsys_pyfile_write(const char *text, PyObject *file)\n{\n    PyObject *unicode = NULL;\n    int err;\n\n    if (file == NULL)\n        return -1;\n\n    unicode = PyUnicode_FromString(text);\n    if (unicode == NULL)\n        return -1;\n\n    err = sys_pyfile_write_unicode(unicode, file);\n    Py_DECREF(unicode);\n    return err;\n}\n\n/* APIs to write to sys.stdout or sys.stderr using a printf-like interface.\n   Adapted from code submitted by Just van Rossum.\n\n   PySys_WriteStdout(format, ...)\n   PySys_WriteStderr(format, ...)\n\n      The first function writes to sys.stdout; the second to sys.stderr.  When\n      there is a problem, they write to the real (C level) stdout or stderr;\n      no exceptions are raised.\n\n      PyErr_CheckSignals() is not called to avoid the execution of the Python\n      signal handlers: they may raise a new exception whereas sys_write()\n      ignores all exceptions.\n\n      Both take a printf-style format string as their first argument followed\n      by a variable length argument list determined by the format string.\n\n      *** WARNING ***\n\n      The format should limit the total size of the formatted output string to\n      1000 bytes.  In particular, this means that no unrestricted \"%s\" formats\n      should occur; these should be limited using \"%.<N>s where <N> is a\n      decimal number calculated so that <N> plus the maximum size of other\n      formatted text does not exceed 1000 bytes.  Also watch out for \"%f\",\n      which can print hundreds of digits for very large numbers.\n\n */\n\nstatic void\nsys_write(_Py_Identifier *key, FILE *fp, const char *format, va_list va)\n{\n    PyObject *file;\n    PyObject *error_type, *error_value, *error_traceback;\n    char buffer[1001];\n    int written;\n\n    PyErr_Fetch(&error_type, &error_value, &error_traceback);\n    file = _PySys_GetObjectId(key);\n    written = PyOS_vsnprintf(buffer, sizeof(buffer), format, va);\n    if (sys_pyfile_write(buffer, file) != 0) {\n        PyErr_Clear();\n        fputs(buffer, fp);\n    }\n    if (written < 0 || (size_t)written >= sizeof(buffer)) {\n        const char *truncated = \"... truncated\";\n        if (sys_pyfile_write(truncated, file) != 0)\n            fputs(truncated, fp);\n    }\n    PyErr_Restore(error_type, error_value, error_traceback);\n}\n\nvoid\nPySys_WriteStdout(const char *format, ...)\n{\n    va_list va;\n\n    va_start(va, format);\n    sys_write(&PyId_stdout, stdout, format, va);\n    va_end(va);\n}\n\nvoid\nPySys_WriteStderr(const char *format, ...)\n{\n    va_list va;\n\n    va_start(va, format);\n    sys_write(&PyId_stderr, stderr, format, va);\n    va_end(va);\n}\n\nstatic void\nsys_format(_Py_Identifier *key, FILE *fp, const char *format, va_list va)\n{\n    PyObject *file, *message;\n    PyObject *error_type, *error_value, *error_traceback;\n    const char *utf8;\n\n    PyErr_Fetch(&error_type, &error_value, &error_traceback);\n    file = _PySys_GetObjectId(key);\n    message = PyUnicode_FromFormatV(format, va);\n    if (message != NULL) {\n        if (sys_pyfile_write_unicode(message, file) != 0) {\n            PyErr_Clear();\n            utf8 = PyUnicode_AsUTF8(message);\n            if (utf8 != NULL)\n                fputs(utf8, fp);\n        }\n        Py_DECREF(message);\n    }\n    PyErr_Restore(error_type, error_value, error_traceback);\n}\n\nvoid\nPySys_FormatStdout(const char *format, ...)\n{\n    va_list va;\n\n    va_start(va, format);\n    sys_format(&PyId_stdout, stdout, format, va);\n    va_end(va);\n}\n\nvoid\nPySys_FormatStderr(const char *format, ...)\n{\n    va_list va;\n\n    va_start(va, format);\n    sys_format(&PyId_stderr, stderr, format, va);\n    va_end(va);\n}\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Python/dynload_shlib.c": "\n/* Support for dynamic loading of extension modules */\n\n#include \"Python.h\"\n#include \"pycore_pystate.h\"\n#include \"importdl.h\"\n\n#include <sys/types.h>\n#include <sys/stat.h>\n\n#if defined(__NetBSD__)\n#include <sys/param.h>\n#if (NetBSD < 199712)\n#include <nlist.h>\n#include <link.h>\n#define dlerror() \"error in dynamic linking\"\n#endif\n#endif /* NetBSD */\n\n#ifdef HAVE_DLFCN_H\n#include <dlfcn.h>\n#endif\n\n#if (defined(__OpenBSD__) || defined(__NetBSD__)) && !defined(__ELF__)\n#define LEAD_UNDERSCORE \"_\"\n#else\n#define LEAD_UNDERSCORE \"\"\n#endif\n\n/* The .so extension module ABI tag, supplied by the Makefile via\n   Makefile.pre.in and configure.  This is used to discriminate between\n   incompatible .so files so that extensions for different Python builds can\n   live in the same directory.  E.g. foomodule.cpython-32.so\n*/\n\nconst char *_PyImport_DynLoadFiletab[] = {\n#ifdef __CYGWIN__\n    \".dll\",\n#else  /* !__CYGWIN__ */\n    \".\" SOABI \".so\",\n#ifdef ALT_SOABI\n    \".\" ALT_SOABI \".so\",\n#endif\n    \".abi\" PYTHON_ABI_STRING \".so\",\n    \".so\",\n#endif  /* __CYGWIN__ */\n    NULL,\n};\n\nstatic struct {\n    dev_t dev;\n    ino_t ino;\n    void *handle;\n} handles[128];\nstatic int nhandles = 0;\n\n\ndl_funcptr\n_PyImport_FindSharedFuncptr(const char *prefix,\n                            const char *shortname,\n                            const char *pathname, FILE *fp)\n{\n    dl_funcptr p;\n    void *handle;\n    char funcname[258];\n    char pathbuf[260];\n    int dlopenflags=0;\n\n    if (strchr(pathname, '/') == NULL) {\n        /* Prefix bare filename with \"./\" */\n        PyOS_snprintf(pathbuf, sizeof(pathbuf), \"./%-.255s\", pathname);\n        pathname = pathbuf;\n    }\n\n    PyOS_snprintf(funcname, sizeof(funcname),\n                  LEAD_UNDERSCORE \"%.20s_%.200s\", prefix, shortname);\n\n    if (fp != NULL) {\n        int i;\n        struct _Py_stat_struct status;\n        if (_Py_fstat(fileno(fp), &status) == -1)\n            return NULL;\n        for (i = 0; i < nhandles; i++) {\n            if (status.st_dev == handles[i].dev &&\n                status.st_ino == handles[i].ino) {\n                p = (dl_funcptr) dlsym(handles[i].handle,\n                                       funcname);\n                return p;\n            }\n        }\n        if (nhandles < 128) {\n            handles[nhandles].dev = status.st_dev;\n            handles[nhandles].ino = status.st_ino;\n        }\n    }\n\n    dlopenflags = _PyInterpreterState_Get()->dlopenflags;\n\n    handle = dlopen(pathname, dlopenflags);\n\n    if (handle == NULL) {\n        PyObject *mod_name;\n        PyObject *path;\n        PyObject *error_ob;\n        const char *error = dlerror();\n        if (error == NULL)\n            error = \"unknown dlopen() error\";\n        error_ob = PyUnicode_DecodeLocale(error, \"surrogateescape\");\n        if (error_ob == NULL)\n            return NULL;\n        mod_name = PyUnicode_FromString(shortname);\n        if (mod_name == NULL) {\n            Py_DECREF(error_ob);\n            return NULL;\n        }\n        path = PyUnicode_DecodeFSDefault(pathname);\n        if (path == NULL) {\n            Py_DECREF(error_ob);\n            Py_DECREF(mod_name);\n            return NULL;\n        }\n        PyErr_SetImportError(error_ob, mod_name, path);\n        Py_DECREF(error_ob);\n        Py_DECREF(mod_name);\n        Py_DECREF(path);\n        return NULL;\n    }\n    if (fp != NULL && nhandles < 128)\n        handles[nhandles++].handle = handle;\n    p = (dl_funcptr) dlsym(handle, funcname);\n    return p;\n}\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Python/clinic/sysmodule.c.h": "/*[clinic input]\npreserve\n[clinic start generated code]*/\n\nPyDoc_STRVAR(sys_addaudithook__doc__,\n\"addaudithook($module, /, hook)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Adds a new audit hook callback.\");\n\n#define SYS_ADDAUDITHOOK_METHODDEF    \\\n    {\"addaudithook\", (PyCFunction)(void(*)(void))sys_addaudithook, METH_FASTCALL|METH_KEYWORDS, sys_addaudithook__doc__},\n\nstatic PyObject *\nsys_addaudithook_impl(PyObject *module, PyObject *hook);\n\nstatic PyObject *\nsys_addaudithook(PyObject *module, PyObject *const *args, Py_ssize_t nargs, PyObject *kwnames)\n{\n    PyObject *return_value = NULL;\n    static const char * const _keywords[] = {\"hook\", NULL};\n    static _PyArg_Parser _parser = {NULL, _keywords, \"addaudithook\", 0};\n    PyObject *argsbuf[1];\n    PyObject *hook;\n\n    args = _PyArg_UnpackKeywords(args, nargs, NULL, kwnames, &_parser, 1, 1, 0, argsbuf);\n    if (!args) {\n        goto exit;\n    }\n    hook = args[0];\n    return_value = sys_addaudithook_impl(module, hook);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_displayhook__doc__,\n\"displayhook($module, object, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Print an object to sys.stdout and also save it in builtins._\");\n\n#define SYS_DISPLAYHOOK_METHODDEF    \\\n    {\"displayhook\", (PyCFunction)sys_displayhook, METH_O, sys_displayhook__doc__},\n\nPyDoc_STRVAR(sys_excepthook__doc__,\n\"excepthook($module, exctype, value, traceback, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Handle an exception by displaying it with a traceback on sys.stderr.\");\n\n#define SYS_EXCEPTHOOK_METHODDEF    \\\n    {\"excepthook\", (PyCFunction)(void(*)(void))sys_excepthook, METH_FASTCALL, sys_excepthook__doc__},\n\nstatic PyObject *\nsys_excepthook_impl(PyObject *module, PyObject *exctype, PyObject *value,\n                    PyObject *traceback);\n\nstatic PyObject *\nsys_excepthook(PyObject *module, PyObject *const *args, Py_ssize_t nargs)\n{\n    PyObject *return_value = NULL;\n    PyObject *exctype;\n    PyObject *value;\n    PyObject *traceback;\n\n    if (!_PyArg_CheckPositional(\"excepthook\", nargs, 3, 3)) {\n        goto exit;\n    }\n    exctype = args[0];\n    value = args[1];\n    traceback = args[2];\n    return_value = sys_excepthook_impl(module, exctype, value, traceback);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_exc_info__doc__,\n\"exc_info($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return current exception information: (type, value, traceback).\\n\"\n\"\\n\"\n\"Return information about the most recent exception caught by an except\\n\"\n\"clause in the current stack frame or in an older stack frame.\");\n\n#define SYS_EXC_INFO_METHODDEF    \\\n    {\"exc_info\", (PyCFunction)sys_exc_info, METH_NOARGS, sys_exc_info__doc__},\n\nstatic PyObject *\nsys_exc_info_impl(PyObject *module);\n\nstatic PyObject *\nsys_exc_info(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_exc_info_impl(module);\n}\n\nPyDoc_STRVAR(sys_unraisablehook__doc__,\n\"unraisablehook($module, unraisable, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Handle an unraisable exception.\\n\"\n\"\\n\"\n\"The unraisable argument has the following attributes:\\n\"\n\"\\n\"\n\"* exc_type: Exception type.\\n\"\n\"* exc_value: Exception value, can be None.\\n\"\n\"* exc_traceback: Exception traceback, can be None.\\n\"\n\"* err_msg: Error message, can be None.\\n\"\n\"* object: Object causing the exception, can be None.\");\n\n#define SYS_UNRAISABLEHOOK_METHODDEF    \\\n    {\"unraisablehook\", (PyCFunction)sys_unraisablehook, METH_O, sys_unraisablehook__doc__},\n\nPyDoc_STRVAR(sys_exit__doc__,\n\"exit($module, status=None, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Exit the interpreter by raising SystemExit(status).\\n\"\n\"\\n\"\n\"If the status is omitted or None, it defaults to zero (i.e., success).\\n\"\n\"If the status is an integer, it will be used as the system exit status.\\n\"\n\"If it is another kind of object, it will be printed and the system\\n\"\n\"exit status will be one (i.e., failure).\");\n\n#define SYS_EXIT_METHODDEF    \\\n    {\"exit\", (PyCFunction)(void(*)(void))sys_exit, METH_FASTCALL, sys_exit__doc__},\n\nstatic PyObject *\nsys_exit_impl(PyObject *module, PyObject *status);\n\nstatic PyObject *\nsys_exit(PyObject *module, PyObject *const *args, Py_ssize_t nargs)\n{\n    PyObject *return_value = NULL;\n    PyObject *status = Py_None;\n\n    if (!_PyArg_CheckPositional(\"exit\", nargs, 0, 1)) {\n        goto exit;\n    }\n    if (nargs < 1) {\n        goto skip_optional;\n    }\n    status = args[0];\nskip_optional:\n    return_value = sys_exit_impl(module, status);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_getdefaultencoding__doc__,\n\"getdefaultencoding($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the current default encoding used by the Unicode implementation.\");\n\n#define SYS_GETDEFAULTENCODING_METHODDEF    \\\n    {\"getdefaultencoding\", (PyCFunction)sys_getdefaultencoding, METH_NOARGS, sys_getdefaultencoding__doc__},\n\nstatic PyObject *\nsys_getdefaultencoding_impl(PyObject *module);\n\nstatic PyObject *\nsys_getdefaultencoding(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getdefaultencoding_impl(module);\n}\n\nPyDoc_STRVAR(sys_getfilesystemencoding__doc__,\n\"getfilesystemencoding($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the encoding used to convert Unicode filenames to OS filenames.\");\n\n#define SYS_GETFILESYSTEMENCODING_METHODDEF    \\\n    {\"getfilesystemencoding\", (PyCFunction)sys_getfilesystemencoding, METH_NOARGS, sys_getfilesystemencoding__doc__},\n\nstatic PyObject *\nsys_getfilesystemencoding_impl(PyObject *module);\n\nstatic PyObject *\nsys_getfilesystemencoding(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getfilesystemencoding_impl(module);\n}\n\nPyDoc_STRVAR(sys_getfilesystemencodeerrors__doc__,\n\"getfilesystemencodeerrors($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the error mode used Unicode to OS filename conversion.\");\n\n#define SYS_GETFILESYSTEMENCODEERRORS_METHODDEF    \\\n    {\"getfilesystemencodeerrors\", (PyCFunction)sys_getfilesystemencodeerrors, METH_NOARGS, sys_getfilesystemencodeerrors__doc__},\n\nstatic PyObject *\nsys_getfilesystemencodeerrors_impl(PyObject *module);\n\nstatic PyObject *\nsys_getfilesystemencodeerrors(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getfilesystemencodeerrors_impl(module);\n}\n\nPyDoc_STRVAR(sys_intern__doc__,\n\"intern($module, string, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"``Intern\\'\\' the given string.\\n\"\n\"\\n\"\n\"This enters the string in the (global) table of interned strings whose\\n\"\n\"purpose is to speed up dictionary lookups. Return the string itself or\\n\"\n\"the previously interned string object with the same value.\");\n\n#define SYS_INTERN_METHODDEF    \\\n    {\"intern\", (PyCFunction)sys_intern, METH_O, sys_intern__doc__},\n\nstatic PyObject *\nsys_intern_impl(PyObject *module, PyObject *s);\n\nstatic PyObject *\nsys_intern(PyObject *module, PyObject *arg)\n{\n    PyObject *return_value = NULL;\n    PyObject *s;\n\n    if (!PyUnicode_Check(arg)) {\n        _PyArg_BadArgument(\"intern\", \"argument\", \"str\", arg);\n        goto exit;\n    }\n    if (PyUnicode_READY(arg) == -1) {\n        goto exit;\n    }\n    s = arg;\n    return_value = sys_intern_impl(module, s);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_gettrace__doc__,\n\"gettrace($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the global debug tracing function set with sys.settrace.\\n\"\n\"\\n\"\n\"See the debugger chapter in the library manual.\");\n\n#define SYS_GETTRACE_METHODDEF    \\\n    {\"gettrace\", (PyCFunction)sys_gettrace, METH_NOARGS, sys_gettrace__doc__},\n\nstatic PyObject *\nsys_gettrace_impl(PyObject *module);\n\nstatic PyObject *\nsys_gettrace(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_gettrace_impl(module);\n}\n\nPyDoc_STRVAR(sys_getprofile__doc__,\n\"getprofile($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the profiling function set with sys.setprofile.\\n\"\n\"\\n\"\n\"See the profiler chapter in the library manual.\");\n\n#define SYS_GETPROFILE_METHODDEF    \\\n    {\"getprofile\", (PyCFunction)sys_getprofile, METH_NOARGS, sys_getprofile__doc__},\n\nstatic PyObject *\nsys_getprofile_impl(PyObject *module);\n\nstatic PyObject *\nsys_getprofile(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getprofile_impl(module);\n}\n\nPyDoc_STRVAR(sys_setcheckinterval__doc__,\n\"setcheckinterval($module, n, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Set the async event check interval to n instructions.\\n\"\n\"\\n\"\n\"This tells the Python interpreter to check for asynchronous events\\n\"\n\"every n instructions.\\n\"\n\"\\n\"\n\"This also affects how often thread switches occur.\");\n\n#define SYS_SETCHECKINTERVAL_METHODDEF    \\\n    {\"setcheckinterval\", (PyCFunction)sys_setcheckinterval, METH_O, sys_setcheckinterval__doc__},\n\nstatic PyObject *\nsys_setcheckinterval_impl(PyObject *module, int n);\n\nstatic PyObject *\nsys_setcheckinterval(PyObject *module, PyObject *arg)\n{\n    PyObject *return_value = NULL;\n    int n;\n\n    if (PyFloat_Check(arg)) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"integer argument expected, got float\" );\n        goto exit;\n    }\n    n = _PyLong_AsInt(arg);\n    if (n == -1 && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = sys_setcheckinterval_impl(module, n);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_getcheckinterval__doc__,\n\"getcheckinterval($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the current check interval; see sys.setcheckinterval().\");\n\n#define SYS_GETCHECKINTERVAL_METHODDEF    \\\n    {\"getcheckinterval\", (PyCFunction)sys_getcheckinterval, METH_NOARGS, sys_getcheckinterval__doc__},\n\nstatic PyObject *\nsys_getcheckinterval_impl(PyObject *module);\n\nstatic PyObject *\nsys_getcheckinterval(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getcheckinterval_impl(module);\n}\n\nPyDoc_STRVAR(sys_setswitchinterval__doc__,\n\"setswitchinterval($module, interval, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Set the ideal thread switching delay inside the Python interpreter.\\n\"\n\"\\n\"\n\"The actual frequency of switching threads can be lower if the\\n\"\n\"interpreter executes long sequences of uninterruptible code\\n\"\n\"(this is implementation-specific and workload-dependent).\\n\"\n\"\\n\"\n\"The parameter must represent the desired switching delay in seconds\\n\"\n\"A typical value is 0.005 (5 milliseconds).\");\n\n#define SYS_SETSWITCHINTERVAL_METHODDEF    \\\n    {\"setswitchinterval\", (PyCFunction)sys_setswitchinterval, METH_O, sys_setswitchinterval__doc__},\n\nstatic PyObject *\nsys_setswitchinterval_impl(PyObject *module, double interval);\n\nstatic PyObject *\nsys_setswitchinterval(PyObject *module, PyObject *arg)\n{\n    PyObject *return_value = NULL;\n    double interval;\n\n    if (PyFloat_CheckExact(arg)) {\n        interval = PyFloat_AS_DOUBLE(arg);\n    }\n    else\n    {\n        interval = PyFloat_AsDouble(arg);\n        if (interval == -1.0 && PyErr_Occurred()) {\n            goto exit;\n        }\n    }\n    return_value = sys_setswitchinterval_impl(module, interval);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_getswitchinterval__doc__,\n\"getswitchinterval($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the current thread switch interval; see sys.setswitchinterval().\");\n\n#define SYS_GETSWITCHINTERVAL_METHODDEF    \\\n    {\"getswitchinterval\", (PyCFunction)sys_getswitchinterval, METH_NOARGS, sys_getswitchinterval__doc__},\n\nstatic double\nsys_getswitchinterval_impl(PyObject *module);\n\nstatic PyObject *\nsys_getswitchinterval(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    PyObject *return_value = NULL;\n    double _return_value;\n\n    _return_value = sys_getswitchinterval_impl(module);\n    if ((_return_value == -1.0) && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = PyFloat_FromDouble(_return_value);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_setrecursionlimit__doc__,\n\"setrecursionlimit($module, limit, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Set the maximum depth of the Python interpreter stack to n.\\n\"\n\"\\n\"\n\"This limit prevents infinite recursion from causing an overflow of the C\\n\"\n\"stack and crashing Python.  The highest possible limit is platform-\\n\"\n\"dependent.\");\n\n#define SYS_SETRECURSIONLIMIT_METHODDEF    \\\n    {\"setrecursionlimit\", (PyCFunction)sys_setrecursionlimit, METH_O, sys_setrecursionlimit__doc__},\n\nstatic PyObject *\nsys_setrecursionlimit_impl(PyObject *module, int new_limit);\n\nstatic PyObject *\nsys_setrecursionlimit(PyObject *module, PyObject *arg)\n{\n    PyObject *return_value = NULL;\n    int new_limit;\n\n    if (PyFloat_Check(arg)) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"integer argument expected, got float\" );\n        goto exit;\n    }\n    new_limit = _PyLong_AsInt(arg);\n    if (new_limit == -1 && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = sys_setrecursionlimit_impl(module, new_limit);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_set_coroutine_origin_tracking_depth__doc__,\n\"set_coroutine_origin_tracking_depth($module, /, depth)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Enable or disable origin tracking for coroutine objects in this thread.\\n\"\n\"\\n\"\n\"Coroutine objects will track \\'depth\\' frames of traceback information\\n\"\n\"about where they came from, available in their cr_origin attribute.\\n\"\n\"\\n\"\n\"Set a depth of 0 to disable.\");\n\n#define SYS_SET_COROUTINE_ORIGIN_TRACKING_DEPTH_METHODDEF    \\\n    {\"set_coroutine_origin_tracking_depth\", (PyCFunction)(void(*)(void))sys_set_coroutine_origin_tracking_depth, METH_FASTCALL|METH_KEYWORDS, sys_set_coroutine_origin_tracking_depth__doc__},\n\nstatic PyObject *\nsys_set_coroutine_origin_tracking_depth_impl(PyObject *module, int depth);\n\nstatic PyObject *\nsys_set_coroutine_origin_tracking_depth(PyObject *module, PyObject *const *args, Py_ssize_t nargs, PyObject *kwnames)\n{\n    PyObject *return_value = NULL;\n    static const char * const _keywords[] = {\"depth\", NULL};\n    static _PyArg_Parser _parser = {NULL, _keywords, \"set_coroutine_origin_tracking_depth\", 0};\n    PyObject *argsbuf[1];\n    int depth;\n\n    args = _PyArg_UnpackKeywords(args, nargs, NULL, kwnames, &_parser, 1, 1, 0, argsbuf);\n    if (!args) {\n        goto exit;\n    }\n    if (PyFloat_Check(args[0])) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"integer argument expected, got float\" );\n        goto exit;\n    }\n    depth = _PyLong_AsInt(args[0]);\n    if (depth == -1 && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = sys_set_coroutine_origin_tracking_depth_impl(module, depth);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_get_coroutine_origin_tracking_depth__doc__,\n\"get_coroutine_origin_tracking_depth($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Check status of origin tracking for coroutine objects in this thread.\");\n\n#define SYS_GET_COROUTINE_ORIGIN_TRACKING_DEPTH_METHODDEF    \\\n    {\"get_coroutine_origin_tracking_depth\", (PyCFunction)sys_get_coroutine_origin_tracking_depth, METH_NOARGS, sys_get_coroutine_origin_tracking_depth__doc__},\n\nstatic int\nsys_get_coroutine_origin_tracking_depth_impl(PyObject *module);\n\nstatic PyObject *\nsys_get_coroutine_origin_tracking_depth(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    PyObject *return_value = NULL;\n    int _return_value;\n\n    _return_value = sys_get_coroutine_origin_tracking_depth_impl(module);\n    if ((_return_value == -1) && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = PyLong_FromLong((long)_return_value);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_get_asyncgen_hooks__doc__,\n\"get_asyncgen_hooks($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the installed asynchronous generators hooks.\\n\"\n\"\\n\"\n\"This returns a namedtuple of the form (firstiter, finalizer).\");\n\n#define SYS_GET_ASYNCGEN_HOOKS_METHODDEF    \\\n    {\"get_asyncgen_hooks\", (PyCFunction)sys_get_asyncgen_hooks, METH_NOARGS, sys_get_asyncgen_hooks__doc__},\n\nstatic PyObject *\nsys_get_asyncgen_hooks_impl(PyObject *module);\n\nstatic PyObject *\nsys_get_asyncgen_hooks(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_get_asyncgen_hooks_impl(module);\n}\n\nPyDoc_STRVAR(sys_getrecursionlimit__doc__,\n\"getrecursionlimit($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the current value of the recursion limit.\\n\"\n\"\\n\"\n\"The recursion limit is the maximum depth of the Python interpreter\\n\"\n\"stack.  This limit prevents infinite recursion from causing an overflow\\n\"\n\"of the C stack and crashing Python.\");\n\n#define SYS_GETRECURSIONLIMIT_METHODDEF    \\\n    {\"getrecursionlimit\", (PyCFunction)sys_getrecursionlimit, METH_NOARGS, sys_getrecursionlimit__doc__},\n\nstatic PyObject *\nsys_getrecursionlimit_impl(PyObject *module);\n\nstatic PyObject *\nsys_getrecursionlimit(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getrecursionlimit_impl(module);\n}\n\n#if defined(MS_WINDOWS)\n\nPyDoc_STRVAR(sys_getwindowsversion__doc__,\n\"getwindowsversion($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return info about the running version of Windows as a named tuple.\\n\"\n\"\\n\"\n\"The members are named: major, minor, build, platform, service_pack,\\n\"\n\"service_pack_major, service_pack_minor, suite_mask, product_type and\\n\"\n\"platform_version. For backward compatibility, only the first 5 items\\n\"\n\"are available by indexing. All elements are numbers, except\\n\"\n\"service_pack and platform_type which are strings, and platform_version\\n\"\n\"which is a 3-tuple. Platform is always 2. Product_type may be 1 for a\\n\"\n\"workstation, 2 for a domain controller, 3 for a server.\\n\"\n\"Platform_version is a 3-tuple containing a version number that is\\n\"\n\"intended for identifying the OS rather than feature detection.\");\n\n#define SYS_GETWINDOWSVERSION_METHODDEF    \\\n    {\"getwindowsversion\", (PyCFunction)sys_getwindowsversion, METH_NOARGS, sys_getwindowsversion__doc__},\n\nstatic PyObject *\nsys_getwindowsversion_impl(PyObject *module);\n\nstatic PyObject *\nsys_getwindowsversion(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getwindowsversion_impl(module);\n}\n\n#endif /* defined(MS_WINDOWS) */\n\n#if defined(MS_WINDOWS)\n\nPyDoc_STRVAR(sys__enablelegacywindowsfsencoding__doc__,\n\"_enablelegacywindowsfsencoding($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Changes the default filesystem encoding to mbcs:replace.\\n\"\n\"\\n\"\n\"This is done for consistency with earlier versions of Python. See PEP\\n\"\n\"529 for more information.\\n\"\n\"\\n\"\n\"This is equivalent to defining the PYTHONLEGACYWINDOWSFSENCODING\\n\"\n\"environment variable before launching Python.\");\n\n#define SYS__ENABLELEGACYWINDOWSFSENCODING_METHODDEF    \\\n    {\"_enablelegacywindowsfsencoding\", (PyCFunction)sys__enablelegacywindowsfsencoding, METH_NOARGS, sys__enablelegacywindowsfsencoding__doc__},\n\nstatic PyObject *\nsys__enablelegacywindowsfsencoding_impl(PyObject *module);\n\nstatic PyObject *\nsys__enablelegacywindowsfsencoding(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys__enablelegacywindowsfsencoding_impl(module);\n}\n\n#endif /* defined(MS_WINDOWS) */\n\n#if defined(HAVE_DLOPEN)\n\nPyDoc_STRVAR(sys_setdlopenflags__doc__,\n\"setdlopenflags($module, flags, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Set the flags used by the interpreter for dlopen calls.\\n\"\n\"\\n\"\n\"This is used, for example, when the interpreter loads extension\\n\"\n\"modules. Among other things, this will enable a lazy resolving of\\n\"\n\"symbols when importing a module, if called as sys.setdlopenflags(0).\\n\"\n\"To share symbols across extension modules, call as\\n\"\n\"sys.setdlopenflags(os.RTLD_GLOBAL).  Symbolic names for the flag\\n\"\n\"modules can be found in the os module (RTLD_xxx constants, e.g.\\n\"\n\"os.RTLD_LAZY).\");\n\n#define SYS_SETDLOPENFLAGS_METHODDEF    \\\n    {\"setdlopenflags\", (PyCFunction)sys_setdlopenflags, METH_O, sys_setdlopenflags__doc__},\n\nstatic PyObject *\nsys_setdlopenflags_impl(PyObject *module, int new_val);\n\nstatic PyObject *\nsys_setdlopenflags(PyObject *module, PyObject *arg)\n{\n    PyObject *return_value = NULL;\n    int new_val;\n\n    if (PyFloat_Check(arg)) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"integer argument expected, got float\" );\n        goto exit;\n    }\n    new_val = _PyLong_AsInt(arg);\n    if (new_val == -1 && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = sys_setdlopenflags_impl(module, new_val);\n\nexit:\n    return return_value;\n}\n\n#endif /* defined(HAVE_DLOPEN) */\n\n#if defined(HAVE_DLOPEN)\n\nPyDoc_STRVAR(sys_getdlopenflags__doc__,\n\"getdlopenflags($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the current value of the flags that are used for dlopen calls.\\n\"\n\"\\n\"\n\"The flag constants are defined in the os module.\");\n\n#define SYS_GETDLOPENFLAGS_METHODDEF    \\\n    {\"getdlopenflags\", (PyCFunction)sys_getdlopenflags, METH_NOARGS, sys_getdlopenflags__doc__},\n\nstatic PyObject *\nsys_getdlopenflags_impl(PyObject *module);\n\nstatic PyObject *\nsys_getdlopenflags(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getdlopenflags_impl(module);\n}\n\n#endif /* defined(HAVE_DLOPEN) */\n\n#if defined(USE_MALLOPT)\n\nPyDoc_STRVAR(sys_mdebug__doc__,\n\"mdebug($module, flag, /)\\n\"\n\"--\\n\"\n\"\\n\");\n\n#define SYS_MDEBUG_METHODDEF    \\\n    {\"mdebug\", (PyCFunction)sys_mdebug, METH_O, sys_mdebug__doc__},\n\nstatic PyObject *\nsys_mdebug_impl(PyObject *module, int flag);\n\nstatic PyObject *\nsys_mdebug(PyObject *module, PyObject *arg)\n{\n    PyObject *return_value = NULL;\n    int flag;\n\n    if (PyFloat_Check(arg)) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"integer argument expected, got float\" );\n        goto exit;\n    }\n    flag = _PyLong_AsInt(arg);\n    if (flag == -1 && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = sys_mdebug_impl(module, flag);\n\nexit:\n    return return_value;\n}\n\n#endif /* defined(USE_MALLOPT) */\n\nPyDoc_STRVAR(sys_getrefcount__doc__,\n\"getrefcount($module, object, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the reference count of object.\\n\"\n\"\\n\"\n\"The count returned is generally one higher than you might expect,\\n\"\n\"because it includes the (temporary) reference as an argument to\\n\"\n\"getrefcount().\");\n\n#define SYS_GETREFCOUNT_METHODDEF    \\\n    {\"getrefcount\", (PyCFunction)sys_getrefcount, METH_O, sys_getrefcount__doc__},\n\nstatic Py_ssize_t\nsys_getrefcount_impl(PyObject *module, PyObject *object);\n\nstatic PyObject *\nsys_getrefcount(PyObject *module, PyObject *object)\n{\n    PyObject *return_value = NULL;\n    Py_ssize_t _return_value;\n\n    _return_value = sys_getrefcount_impl(module, object);\n    if ((_return_value == -1) && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = PyLong_FromSsize_t(_return_value);\n\nexit:\n    return return_value;\n}\n\n#if defined(Py_REF_DEBUG)\n\nPyDoc_STRVAR(sys_gettotalrefcount__doc__,\n\"gettotalrefcount($module, /)\\n\"\n\"--\\n\"\n\"\\n\");\n\n#define SYS_GETTOTALREFCOUNT_METHODDEF    \\\n    {\"gettotalrefcount\", (PyCFunction)sys_gettotalrefcount, METH_NOARGS, sys_gettotalrefcount__doc__},\n\nstatic Py_ssize_t\nsys_gettotalrefcount_impl(PyObject *module);\n\nstatic PyObject *\nsys_gettotalrefcount(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    PyObject *return_value = NULL;\n    Py_ssize_t _return_value;\n\n    _return_value = sys_gettotalrefcount_impl(module);\n    if ((_return_value == -1) && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = PyLong_FromSsize_t(_return_value);\n\nexit:\n    return return_value;\n}\n\n#endif /* defined(Py_REF_DEBUG) */\n\nPyDoc_STRVAR(sys_getallocatedblocks__doc__,\n\"getallocatedblocks($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the number of memory blocks currently allocated.\");\n\n#define SYS_GETALLOCATEDBLOCKS_METHODDEF    \\\n    {\"getallocatedblocks\", (PyCFunction)sys_getallocatedblocks, METH_NOARGS, sys_getallocatedblocks__doc__},\n\nstatic Py_ssize_t\nsys_getallocatedblocks_impl(PyObject *module);\n\nstatic PyObject *\nsys_getallocatedblocks(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    PyObject *return_value = NULL;\n    Py_ssize_t _return_value;\n\n    _return_value = sys_getallocatedblocks_impl(module);\n    if ((_return_value == -1) && PyErr_Occurred()) {\n        goto exit;\n    }\n    return_value = PyLong_FromSsize_t(_return_value);\n\nexit:\n    return return_value;\n}\n\n#if defined(COUNT_ALLOCS)\n\nPyDoc_STRVAR(sys_getcounts__doc__,\n\"getcounts($module, /)\\n\"\n\"--\\n\"\n\"\\n\");\n\n#define SYS_GETCOUNTS_METHODDEF    \\\n    {\"getcounts\", (PyCFunction)sys_getcounts, METH_NOARGS, sys_getcounts__doc__},\n\nstatic PyObject *\nsys_getcounts_impl(PyObject *module);\n\nstatic PyObject *\nsys_getcounts(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getcounts_impl(module);\n}\n\n#endif /* defined(COUNT_ALLOCS) */\n\nPyDoc_STRVAR(sys__getframe__doc__,\n\"_getframe($module, depth=0, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return a frame object from the call stack.\\n\"\n\"\\n\"\n\"If optional integer depth is given, return the frame object that many\\n\"\n\"calls below the top of the stack.  If that is deeper than the call\\n\"\n\"stack, ValueError is raised.  The default for depth is zero, returning\\n\"\n\"the frame at the top of the call stack.\\n\"\n\"\\n\"\n\"This function should be used for internal and specialized purposes\\n\"\n\"only.\");\n\n#define SYS__GETFRAME_METHODDEF    \\\n    {\"_getframe\", (PyCFunction)(void(*)(void))sys__getframe, METH_FASTCALL, sys__getframe__doc__},\n\nstatic PyObject *\nsys__getframe_impl(PyObject *module, int depth);\n\nstatic PyObject *\nsys__getframe(PyObject *module, PyObject *const *args, Py_ssize_t nargs)\n{\n    PyObject *return_value = NULL;\n    int depth = 0;\n\n    if (!_PyArg_CheckPositional(\"_getframe\", nargs, 0, 1)) {\n        goto exit;\n    }\n    if (nargs < 1) {\n        goto skip_optional;\n    }\n    if (PyFloat_Check(args[0])) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"integer argument expected, got float\" );\n        goto exit;\n    }\n    depth = _PyLong_AsInt(args[0]);\n    if (depth == -1 && PyErr_Occurred()) {\n        goto exit;\n    }\nskip_optional:\n    return_value = sys__getframe_impl(module, depth);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys__current_frames__doc__,\n\"_current_frames($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return a dict mapping each thread\\'s thread id to its current stack frame.\\n\"\n\"\\n\"\n\"This function should be used for specialized purposes only.\");\n\n#define SYS__CURRENT_FRAMES_METHODDEF    \\\n    {\"_current_frames\", (PyCFunction)sys__current_frames, METH_NOARGS, sys__current_frames__doc__},\n\nstatic PyObject *\nsys__current_frames_impl(PyObject *module);\n\nstatic PyObject *\nsys__current_frames(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys__current_frames_impl(module);\n}\n\nPyDoc_STRVAR(sys_call_tracing__doc__,\n\"call_tracing($module, func, args, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Call func(*args), while tracing is enabled.\\n\"\n\"\\n\"\n\"The tracing state is saved, and restored afterwards.  This is intended\\n\"\n\"to be called from a debugger from a checkpoint, to recursively debug\\n\"\n\"some other code.\");\n\n#define SYS_CALL_TRACING_METHODDEF    \\\n    {\"call_tracing\", (PyCFunction)(void(*)(void))sys_call_tracing, METH_FASTCALL, sys_call_tracing__doc__},\n\nstatic PyObject *\nsys_call_tracing_impl(PyObject *module, PyObject *func, PyObject *funcargs);\n\nstatic PyObject *\nsys_call_tracing(PyObject *module, PyObject *const *args, Py_ssize_t nargs)\n{\n    PyObject *return_value = NULL;\n    PyObject *func;\n    PyObject *funcargs;\n\n    if (!_PyArg_CheckPositional(\"call_tracing\", nargs, 2, 2)) {\n        goto exit;\n    }\n    func = args[0];\n    if (!PyTuple_Check(args[1])) {\n        _PyArg_BadArgument(\"call_tracing\", \"argument 2\", \"tuple\", args[1]);\n        goto exit;\n    }\n    funcargs = args[1];\n    return_value = sys_call_tracing_impl(module, func, funcargs);\n\nexit:\n    return return_value;\n}\n\nPyDoc_STRVAR(sys_callstats__doc__,\n\"callstats($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return a tuple of function call statistics.\\n\"\n\"\\n\"\n\"A tuple is returned only if CALL_PROFILE was defined when Python was\\n\"\n\"built.  Otherwise, this returns None.\\n\"\n\"\\n\"\n\"When enabled, this function returns detailed, implementation-specific\\n\"\n\"details about the number of function calls executed. The return value\\n\"\n\"is a 11-tuple where the entries in the tuple are counts of:\\n\"\n\"0. all function calls\\n\"\n\"1. calls to PyFunction_Type objects\\n\"\n\"2. PyFunction calls that do not create an argument tuple\\n\"\n\"3. PyFunction calls that do not create an argument tuple\\n\"\n\"   and bypass PyEval_EvalCodeEx()\\n\"\n\"4. PyMethod calls\\n\"\n\"5. PyMethod calls on bound methods\\n\"\n\"6. PyType calls\\n\"\n\"7. PyCFunction calls\\n\"\n\"8. generator calls\\n\"\n\"9. All other calls\\n\"\n\"10. Number of stack pops performed by call_function()\");\n\n#define SYS_CALLSTATS_METHODDEF    \\\n    {\"callstats\", (PyCFunction)sys_callstats, METH_NOARGS, sys_callstats__doc__},\n\nstatic PyObject *\nsys_callstats_impl(PyObject *module);\n\nstatic PyObject *\nsys_callstats(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_callstats_impl(module);\n}\n\nPyDoc_STRVAR(sys__debugmallocstats__doc__,\n\"_debugmallocstats($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Print summary info to stderr about the state of pymalloc\\'s structures.\\n\"\n\"\\n\"\n\"In Py_DEBUG mode, also perform some expensive internal consistency\\n\"\n\"checks.\");\n\n#define SYS__DEBUGMALLOCSTATS_METHODDEF    \\\n    {\"_debugmallocstats\", (PyCFunction)sys__debugmallocstats, METH_NOARGS, sys__debugmallocstats__doc__},\n\nstatic PyObject *\nsys__debugmallocstats_impl(PyObject *module);\n\nstatic PyObject *\nsys__debugmallocstats(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys__debugmallocstats_impl(module);\n}\n\nPyDoc_STRVAR(sys__clear_type_cache__doc__,\n\"_clear_type_cache($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Clear the internal type lookup cache.\");\n\n#define SYS__CLEAR_TYPE_CACHE_METHODDEF    \\\n    {\"_clear_type_cache\", (PyCFunction)sys__clear_type_cache, METH_NOARGS, sys__clear_type_cache__doc__},\n\nstatic PyObject *\nsys__clear_type_cache_impl(PyObject *module);\n\nstatic PyObject *\nsys__clear_type_cache(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys__clear_type_cache_impl(module);\n}\n\nPyDoc_STRVAR(sys_is_finalizing__doc__,\n\"is_finalizing($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return True if Python is exiting.\");\n\n#define SYS_IS_FINALIZING_METHODDEF    \\\n    {\"is_finalizing\", (PyCFunction)sys_is_finalizing, METH_NOARGS, sys_is_finalizing__doc__},\n\nstatic PyObject *\nsys_is_finalizing_impl(PyObject *module);\n\nstatic PyObject *\nsys_is_finalizing(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_is_finalizing_impl(module);\n}\n\n#if defined(ANDROID_API_LEVEL)\n\nPyDoc_STRVAR(sys_getandroidapilevel__doc__,\n\"getandroidapilevel($module, /)\\n\"\n\"--\\n\"\n\"\\n\"\n\"Return the build time API version of Android as an integer.\");\n\n#define SYS_GETANDROIDAPILEVEL_METHODDEF    \\\n    {\"getandroidapilevel\", (PyCFunction)sys_getandroidapilevel, METH_NOARGS, sys_getandroidapilevel__doc__},\n\nstatic PyObject *\nsys_getandroidapilevel_impl(PyObject *module);\n\nstatic PyObject *\nsys_getandroidapilevel(PyObject *module, PyObject *Py_UNUSED(ignored))\n{\n    return sys_getandroidapilevel_impl(module);\n}\n\n#endif /* defined(ANDROID_API_LEVEL) */\n\n#ifndef SYS_GETWINDOWSVERSION_METHODDEF\n    #define SYS_GETWINDOWSVERSION_METHODDEF\n#endif /* !defined(SYS_GETWINDOWSVERSION_METHODDEF) */\n\n#ifndef SYS__ENABLELEGACYWINDOWSFSENCODING_METHODDEF\n    #define SYS__ENABLELEGACYWINDOWSFSENCODING_METHODDEF\n#endif /* !defined(SYS__ENABLELEGACYWINDOWSFSENCODING_METHODDEF) */\n\n#ifndef SYS_SETDLOPENFLAGS_METHODDEF\n    #define SYS_SETDLOPENFLAGS_METHODDEF\n#endif /* !defined(SYS_SETDLOPENFLAGS_METHODDEF) */\n\n#ifndef SYS_GETDLOPENFLAGS_METHODDEF\n    #define SYS_GETDLOPENFLAGS_METHODDEF\n#endif /* !defined(SYS_GETDLOPENFLAGS_METHODDEF) */\n\n#ifndef SYS_MDEBUG_METHODDEF\n    #define SYS_MDEBUG_METHODDEF\n#endif /* !defined(SYS_MDEBUG_METHODDEF) */\n\n#ifndef SYS_GETTOTALREFCOUNT_METHODDEF\n    #define SYS_GETTOTALREFCOUNT_METHODDEF\n#endif /* !defined(SYS_GETTOTALREFCOUNT_METHODDEF) */\n\n#ifndef SYS_GETCOUNTS_METHODDEF\n    #define SYS_GETCOUNTS_METHODDEF\n#endif /* !defined(SYS_GETCOUNTS_METHODDEF) */\n\n#ifndef SYS_GETANDROIDAPILEVEL_METHODDEF\n    #define SYS_GETANDROIDAPILEVEL_METHODDEF\n#endif /* !defined(SYS_GETANDROIDAPILEVEL_METHODDEF) */\n/*[clinic end generated code: output=273f9cec8bfcab91 input=a9049054013a1b77]*/\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Include/internal/pycore_pystate.h": "#ifndef Py_INTERNAL_PYSTATE_H\n#define Py_INTERNAL_PYSTATE_H\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#ifndef Py_BUILD_CORE\n#  error \"this header requires Py_BUILD_CORE define\"\n#endif\n\n#include \"cpython/initconfig.h\"\n#include \"fileobject.h\"\n#include \"pystate.h\"\n#include \"pythread.h\"\n#include \"sysmodule.h\"\n\n#include \"pycore_gil.h\"   /* _gil_runtime_state  */\n#include \"pycore_pathconfig.h\"\n#include \"pycore_pymem.h\"\n#include \"pycore_warnings.h\"\n\n\n/* ceval state */\n\nstruct _pending_calls {\n    int finishing;\n    PyThread_type_lock lock;\n    /* Request for running pending calls. */\n    _Py_atomic_int calls_to_do;\n    /* Request for looking at the `async_exc` field of the current\n       thread state.\n       Guarded by the GIL. */\n    int async_exc;\n#define NPENDINGCALLS 32\n    struct {\n        int (*func)(void *);\n        void *arg;\n    } calls[NPENDINGCALLS];\n    int first;\n    int last;\n};\n\nstruct _ceval_runtime_state {\n    int recursion_limit;\n    /* Records whether tracing is on for any thread.  Counts the number\n       of threads for which tstate->c_tracefunc is non-NULL, so if the\n       value is 0, we know we don't have to check this thread's\n       c_tracefunc.  This speeds up the if statement in\n       PyEval_EvalFrameEx() after fast_next_opcode. */\n    int tracing_possible;\n    /* This single variable consolidates all requests to break out of\n       the fast path in the eval loop. */\n    _Py_atomic_int eval_breaker;\n    /* Request for dropping the GIL */\n    _Py_atomic_int gil_drop_request;\n    struct _pending_calls pending;\n    /* Request for checking signals. */\n    _Py_atomic_int signals_pending;\n    struct _gil_runtime_state gil;\n};\n\n/* interpreter state */\n\ntypedef PyObject* (*_PyFrameEvalFunction)(struct _frame *, int);\n\n// The PyInterpreterState typedef is in Include/pystate.h.\nstruct _is {\n\n    struct _is *next;\n    struct _ts *tstate_head;\n\n    int64_t id;\n    int64_t id_refcount;\n    int requires_idref;\n    PyThread_type_lock id_mutex;\n\n    int finalizing;\n\n    PyObject *modules;\n    PyObject *modules_by_index;\n    PyObject *sysdict;\n    PyObject *builtins;\n    PyObject *importlib;\n\n    /* Used in Python/sysmodule.c. */\n    int check_interval;\n\n    /* Used in Modules/_threadmodule.c. */\n    long num_threads;\n    /* Support for runtime thread stack size tuning.\n       A value of 0 means using the platform's default stack size\n       or the size specified by the THREAD_STACK_SIZE macro. */\n    /* Used in Python/thread.c. */\n    size_t pythread_stacksize;\n\n    PyObject *codec_search_path;\n    PyObject *codec_search_cache;\n    PyObject *codec_error_registry;\n    int codecs_initialized;\n\n    /* fs_codec.encoding is initialized to NULL.\n       Later, it is set to a non-NULL string by _PyUnicode_InitEncodings(). */\n    struct {\n        char *encoding;   /* Filesystem encoding (encoded to UTF-8) */\n        char *errors;     /* Filesystem errors (encoded to UTF-8) */\n        _Py_error_handler error_handler;\n    } fs_codec;\n\n    PyConfig config;\n#ifdef HAVE_DLOPEN\n    int dlopenflags;\n#endif\n\n    PyObject *dict;  /* Stores per-interpreter state */\n\n    PyObject *builtins_copy;\n    PyObject *import_func;\n    /* Initialized to PyEval_EvalFrameDefault(). */\n    _PyFrameEvalFunction eval_frame;\n\n    Py_ssize_t co_extra_user_count;\n    freefunc co_extra_freefuncs[MAX_CO_EXTRA_USERS];\n\n#ifdef HAVE_FORK\n    PyObject *before_forkers;\n    PyObject *after_forkers_parent;\n    PyObject *after_forkers_child;\n#endif\n    /* AtExit module */\n    void (*pyexitfunc)(PyObject *);\n    PyObject *pyexitmodule;\n\n    uint64_t tstate_next_unique_id;\n\n    struct _warnings_runtime_state warnings;\n\n    PyObject *audit_hooks;\n};\n\nPyAPI_FUNC(struct _is*) _PyInterpreterState_LookUpID(PY_INT64_T);\n\nPyAPI_FUNC(int) _PyInterpreterState_IDInitref(struct _is *);\nPyAPI_FUNC(void) _PyInterpreterState_IDIncref(struct _is *);\nPyAPI_FUNC(void) _PyInterpreterState_IDDecref(struct _is *);\n\n\n/* cross-interpreter data registry */\n\n/* For now we use a global registry of shareable classes.  An\n   alternative would be to add a tp_* slot for a class's\n   crossinterpdatafunc. It would be simpler and more efficient. */\n\nstruct _xidregitem;\n\nstruct _xidregitem {\n    PyTypeObject *cls;\n    crossinterpdatafunc getdata;\n    struct _xidregitem *next;\n};\n\n/* runtime audit hook state */\n\ntypedef struct _Py_AuditHookEntry {\n    struct _Py_AuditHookEntry *next;\n    Py_AuditHookFunction hookCFunction;\n    void *userData;\n} _Py_AuditHookEntry;\n\n/* GIL state */\n\nstruct _gilstate_runtime_state {\n    int check_enabled;\n    /* Assuming the current thread holds the GIL, this is the\n       PyThreadState for the current thread. */\n    _Py_atomic_address tstate_current;\n    PyThreadFrameGetter getframe;\n    /* The single PyInterpreterState used by this process'\n       GILState implementation\n    */\n    /* TODO: Given interp_main, it may be possible to kill this ref */\n    PyInterpreterState *autoInterpreterState;\n    Py_tss_t autoTSSkey;\n};\n\n/* hook for PyEval_GetFrame(), requested for Psyco */\n#define _PyThreadState_GetFrame _PyRuntime.gilstate.getframe\n\n/* Issue #26558: Flag to disable PyGILState_Check().\n   If set to non-zero, PyGILState_Check() always return 1. */\n#define _PyGILState_check_enabled _PyRuntime.gilstate.check_enabled\n\n\n/* Full Python runtime state */\n\ntypedef struct pyruntimestate {\n    /* Is running Py_PreInitialize()? */\n    int preinitializing;\n\n    /* Is Python preinitialized? Set to 1 by Py_PreInitialize() */\n    int preinitialized;\n\n    /* Is Python core initialized? Set to 1 by _Py_InitializeCore() */\n    int core_initialized;\n\n    /* Is Python fully initialized? Set to 1 by Py_Initialize() */\n    int initialized;\n\n    /* Set by Py_FinalizeEx(). Only reset to NULL if Py_Initialize()\n       is called again. */\n    PyThreadState *finalizing;\n\n    struct pyinterpreters {\n        PyThread_type_lock mutex;\n        PyInterpreterState *head;\n        PyInterpreterState *main;\n        /* _next_interp_id is an auto-numbered sequence of small\n           integers.  It gets initialized in _PyInterpreterState_Init(),\n           which is called in Py_Initialize(), and used in\n           PyInterpreterState_New().  A negative interpreter ID\n           indicates an error occurred.  The main interpreter will\n           always have an ID of 0.  Overflow results in a RuntimeError.\n           If that becomes a problem later then we can adjust, e.g. by\n           using a Python int. */\n        int64_t next_id;\n    } interpreters;\n    // XXX Remove this field once we have a tp_* slot.\n    struct _xidregistry {\n        PyThread_type_lock mutex;\n        struct _xidregitem *head;\n    } xidregistry;\n\n    unsigned long main_thread;\n\n#define NEXITFUNCS 32\n    void (*exitfuncs[NEXITFUNCS])(void);\n    int nexitfuncs;\n\n    struct _gc_runtime_state gc;\n    struct _ceval_runtime_state ceval;\n    struct _gilstate_runtime_state gilstate;\n\n    PyPreConfig preconfig;\n\n    Py_OpenCodeHookFunction open_code_hook;\n    void *open_code_userdata;\n    _Py_AuditHookEntry *audit_hook_head;\n\n    // XXX Consolidate globals found via the check-c-globals script.\n} _PyRuntimeState;\n\n#define _PyRuntimeState_INIT \\\n    {.preinitialized = 0, .core_initialized = 0, .initialized = 0}\n/* Note: _PyRuntimeState_INIT sets other fields to 0/NULL */\n\nPyAPI_DATA(_PyRuntimeState) _PyRuntime;\nPyAPI_FUNC(PyStatus) _PyRuntimeState_Init(_PyRuntimeState *runtime);\nPyAPI_FUNC(void) _PyRuntimeState_Fini(_PyRuntimeState *runtime);\nPyAPI_FUNC(void) _PyRuntimeState_ReInitThreads(_PyRuntimeState *runtime);\n\n/* Initialize _PyRuntimeState.\n   Return NULL on success, or return an error message on failure. */\nPyAPI_FUNC(PyStatus) _PyRuntime_Initialize(void);\n\nPyAPI_FUNC(void) _PyRuntime_Finalize(void);\n\n#define _Py_CURRENTLY_FINALIZING(runtime, tstate) \\\n    (runtime->finalizing == tstate)\n\n\n/* Variable and macro for in-line access to current thread\n   and interpreter state */\n\n#define _PyRuntimeState_GetThreadState(runtime) \\\n    ((PyThreadState*)_Py_atomic_load_relaxed(&(runtime)->gilstate.tstate_current))\n\n/* Get the current Python thread state.\n\n   Efficient macro reading directly the 'gilstate.tstate_current' atomic\n   variable. The macro is unsafe: it does not check for error and it can\n   return NULL.\n\n   The caller must hold the GIL.\n\n   See also PyThreadState_Get() and PyThreadState_GET(). */\n#define _PyThreadState_GET() _PyRuntimeState_GetThreadState(&_PyRuntime)\n\n/* Redefine PyThreadState_GET() as an alias to _PyThreadState_GET() */\n#undef PyThreadState_GET\n#define PyThreadState_GET() _PyThreadState_GET()\n\n/* Get the current interpreter state.\n\n   The macro is unsafe: it does not check for error and it can return NULL.\n\n   The caller must hold the GIL.\n\n   See also _PyInterpreterState_Get()\n   and _PyGILState_GetInterpreterStateUnsafe(). */\n#define _PyInterpreterState_GET_UNSAFE() (_PyThreadState_GET()->interp)\n\n\n/* Other */\n\nPyAPI_FUNC(void) _PyThreadState_Init(\n    _PyRuntimeState *runtime,\n    PyThreadState *tstate);\nPyAPI_FUNC(void) _PyThreadState_DeleteExcept(\n    _PyRuntimeState *runtime,\n    PyThreadState *tstate);\n\nPyAPI_FUNC(PyThreadState *) _PyThreadState_Swap(\n    struct _gilstate_runtime_state *gilstate,\n    PyThreadState *newts);\n\nPyAPI_FUNC(PyStatus) _PyInterpreterState_Enable(_PyRuntimeState *runtime);\nPyAPI_FUNC(void) _PyInterpreterState_DeleteExceptMain(_PyRuntimeState *runtime);\n\nPyAPI_FUNC(void) _PyGILState_Reinit(_PyRuntimeState *runtime);\n\n\nPyAPI_FUNC(int) _PyOS_InterruptOccurred(PyThreadState *tstate);\n\n#ifdef __cplusplus\n}\n#endif\n#endif /* !Py_INTERNAL_PYSTATE_H */\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Modules/_ctypes/callproc.c": "/*\n * History: First version dated from 3/97, derived from my SCMLIB version\n * for win16.\n */\n/*\n * Related Work:\n *      - calldll       http://www.nightmare.com/software.html\n *      - libffi        http://sourceware.cygnus.com/libffi/\n *      - ffcall        http://clisp.cons.org/~haible/packages-ffcall.html\n *   and, of course, Don Beaudry's MESS package, but this is more ctypes\n *   related.\n */\n\n\n/*\n  How are functions called, and how are parameters converted to C ?\n\n  1. _ctypes.c::PyCFuncPtr_call receives an argument tuple 'inargs' and a\n  keyword dictionary 'kwds'.\n\n  2. After several checks, _build_callargs() is called which returns another\n  tuple 'callargs'.  This may be the same tuple as 'inargs', a slice of\n  'inargs', or a completely fresh tuple, depending on several things (is it a\n  COM method?, are 'paramflags' available?).\n\n  3. _build_callargs also calculates bitarrays containing indexes into\n  the callargs tuple, specifying how to build the return value(s) of\n  the function.\n\n  4. _ctypes_callproc is then called with the 'callargs' tuple.  _ctypes_callproc first\n  allocates two arrays.  The first is an array of 'struct argument' items, the\n  second array has 'void *' entries.\n\n  5. If 'converters' are present (converters is a sequence of argtypes'\n  from_param methods), for each item in 'callargs' converter is called and the\n  result passed to ConvParam.  If 'converters' are not present, each argument\n  is directly passed to ConvParm.\n\n  6. For each arg, ConvParam stores the contained C data (or a pointer to it,\n  for structures) into the 'struct argument' array.\n\n  7. Finally, a loop fills the 'void *' array so that each item points to the\n  data contained in or pointed to by the 'struct argument' array.\n\n  8. The 'void *' argument array is what _call_function_pointer\n  expects. _call_function_pointer then has very little to do - only some\n  libffi specific stuff, then it calls ffi_call.\n\n  So, there are 4 data structures holding processed arguments:\n  - the inargs tuple (in PyCFuncPtr_call)\n  - the callargs tuple (in PyCFuncPtr_call)\n  - the 'struct arguments' array\n  - the 'void *' array\n\n */\n\n#include \"Python.h\"\n#include \"structmember.h\"\n\n#ifdef MS_WIN32\n#include <windows.h>\n#include <tchar.h>\n#else\n#include \"ctypes_dlfcn.h\"\n#endif\n\n#ifdef MS_WIN32\n#include <malloc.h>\n#endif\n\n#include <ffi.h>\n#include \"ctypes.h\"\n#ifdef HAVE_ALLOCA_H\n/* AIX needs alloca.h for alloca() */\n#include <alloca.h>\n#endif\n\n#ifdef _Py_MEMORY_SANITIZER\n#include <sanitizer/msan_interface.h>\n#endif\n\n#if defined(_DEBUG) || defined(__MINGW32__)\n/* Don't use structured exception handling on Windows if this is defined.\n   MingW, AFAIK, doesn't support it.\n*/\n#define DONT_USE_SEH\n#endif\n\n#define CTYPES_CAPSULE_NAME_PYMEM \"_ctypes pymem\"\n\nstatic void pymem_destructor(PyObject *ptr)\n{\n    void *p = PyCapsule_GetPointer(ptr, CTYPES_CAPSULE_NAME_PYMEM);\n    if (p) {\n        PyMem_Free(p);\n    }\n}\n\n/*\n  ctypes maintains thread-local storage that has space for two error numbers:\n  private copies of the system 'errno' value and, on Windows, the system error code\n  accessed by the GetLastError() and SetLastError() api functions.\n\n  Foreign functions created with CDLL(..., use_errno=True), when called, swap\n  the system 'errno' value with the private copy just before the actual\n  function call, and swapped again immediately afterwards.  The 'use_errno'\n  parameter defaults to False, in this case 'ctypes_errno' is not touched.\n\n  On Windows, foreign functions created with CDLL(..., use_last_error=True) or\n  WinDLL(..., use_last_error=True) swap the system LastError value with the\n  ctypes private copy.\n\n  The values are also swapped immediately before and after ctypes callback\n  functions are called, if the callbacks are constructed using the new\n  optional use_errno parameter set to True: CFUNCTYPE(..., use_errno=TRUE) or\n  WINFUNCTYPE(..., use_errno=True).\n\n  New ctypes functions are provided to access the ctypes private copies from\n  Python:\n\n  - ctypes.set_errno(value) and ctypes.set_last_error(value) store 'value' in\n    the private copy and returns the previous value.\n\n  - ctypes.get_errno() and ctypes.get_last_error() returns the current ctypes\n    private copies value.\n*/\n\n/*\n  This function creates and returns a thread-local Python object that has\n  space to store two integer error numbers; once created the Python object is\n  kept alive in the thread state dictionary as long as the thread itself.\n*/\nPyObject *\n_ctypes_get_errobj(int **pspace)\n{\n    PyObject *dict = PyThreadState_GetDict();\n    PyObject *errobj;\n    static PyObject *error_object_name;\n    if (dict == NULL) {\n        PyErr_SetString(PyExc_RuntimeError,\n                        \"cannot get thread state\");\n        return NULL;\n    }\n    if (error_object_name == NULL) {\n        error_object_name = PyUnicode_InternFromString(\"ctypes.error_object\");\n        if (error_object_name == NULL)\n            return NULL;\n    }\n    errobj = PyDict_GetItemWithError(dict, error_object_name);\n    if (errobj) {\n        if (!PyCapsule_IsValid(errobj, CTYPES_CAPSULE_NAME_PYMEM)) {\n            PyErr_SetString(PyExc_RuntimeError,\n                \"ctypes.error_object is an invalid capsule\");\n            return NULL;\n        }\n        Py_INCREF(errobj);\n    }\n    else if (!PyErr_Occurred()) {\n        void *space = PyMem_Malloc(sizeof(int) * 2);\n        if (space == NULL)\n            return NULL;\n        memset(space, 0, sizeof(int) * 2);\n        errobj = PyCapsule_New(space, CTYPES_CAPSULE_NAME_PYMEM, pymem_destructor);\n        if (errobj == NULL) {\n            PyMem_Free(space);\n            return NULL;\n        }\n        if (-1 == PyDict_SetItem(dict, error_object_name,\n                                 errobj)) {\n            Py_DECREF(errobj);\n            return NULL;\n        }\n    }\n    else {\n        return NULL;\n    }\n    *pspace = (int *)PyCapsule_GetPointer(errobj, CTYPES_CAPSULE_NAME_PYMEM);\n    return errobj;\n}\n\nstatic PyObject *\nget_error_internal(PyObject *self, PyObject *args, int index)\n{\n    int *space;\n    PyObject *errobj = _ctypes_get_errobj(&space);\n    PyObject *result;\n\n    if (errobj == NULL)\n        return NULL;\n    result = PyLong_FromLong(space[index]);\n    Py_DECREF(errobj);\n    return result;\n}\n\nstatic PyObject *\nset_error_internal(PyObject *self, PyObject *args, int index)\n{\n    int new_errno, old_errno;\n    PyObject *errobj;\n    int *space;\n\n    if (!PyArg_ParseTuple(args, \"i\", &new_errno)) {\n        return NULL;\n    }\n    errobj = _ctypes_get_errobj(&space);\n    if (errobj == NULL)\n        return NULL;\n    old_errno = space[index];\n    space[index] = new_errno;\n    Py_DECREF(errobj);\n    return PyLong_FromLong(old_errno);\n}\n\nstatic PyObject *\nget_errno(PyObject *self, PyObject *args)\n{\n    if (PySys_Audit(\"ctypes.get_errno\", NULL) < 0) {\n        return NULL;\n    }\n    return get_error_internal(self, args, 0);\n}\n\nstatic PyObject *\nset_errno(PyObject *self, PyObject *args)\n{\n    if (PySys_Audit(\"ctypes.set_errno\", \"O\", args) < 0) {\n        return NULL;\n    }\n    return set_error_internal(self, args, 0);\n}\n\n#ifdef MS_WIN32\n\nstatic PyObject *\nget_last_error(PyObject *self, PyObject *args)\n{\n    if (PySys_Audit(\"ctypes.get_last_error\", NULL) < 0) {\n        return NULL;\n    }\n    return get_error_internal(self, args, 1);\n}\n\nstatic PyObject *\nset_last_error(PyObject *self, PyObject *args)\n{\n    if (PySys_Audit(\"ctypes.set_last_error\", \"O\", args) < 0) {\n        return NULL;\n    }\n    return set_error_internal(self, args, 1);\n}\n\nPyObject *ComError;\n\nstatic WCHAR *FormatError(DWORD code)\n{\n    WCHAR *lpMsgBuf;\n    DWORD n;\n    n = FormatMessageW(FORMAT_MESSAGE_ALLOCATE_BUFFER |\n                       FORMAT_MESSAGE_FROM_SYSTEM |\n                       FORMAT_MESSAGE_IGNORE_INSERTS,\n                       NULL,\n                       code,\n                       MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), /* Default language */\n               (LPWSTR) &lpMsgBuf,\n               0,\n               NULL);\n    if (n) {\n        while (iswspace(lpMsgBuf[n-1]))\n            --n;\n        lpMsgBuf[n] = L'\\0'; /* rstrip() */\n    }\n    return lpMsgBuf;\n}\n\n#ifndef DONT_USE_SEH\nstatic void SetException(DWORD code, EXCEPTION_RECORD *pr)\n{\n    if (PySys_Audit(\"ctypes.seh_exception\", \"I\", code) < 0) {\n        /* An exception was set by the audit hook */\n        return;\n    }\n\n    /* The 'code' is a normal win32 error code so it could be handled by\n    PyErr_SetFromWindowsErr(). However, for some errors, we have additional\n    information not included in the error code. We handle those here and\n    delegate all others to the generic function. */\n    switch (code) {\n    case EXCEPTION_ACCESS_VIOLATION:\n        /* The thread attempted to read from or write\n           to a virtual address for which it does not\n           have the appropriate access. */\n        if (pr->ExceptionInformation[0] == 0)\n            PyErr_Format(PyExc_OSError,\n                         \"exception: access violation reading %p\",\n                         pr->ExceptionInformation[1]);\n        else\n            PyErr_Format(PyExc_OSError,\n                         \"exception: access violation writing %p\",\n                         pr->ExceptionInformation[1]);\n        break;\n\n    case EXCEPTION_BREAKPOINT:\n        /* A breakpoint was encountered. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: breakpoint encountered\");\n        break;\n\n    case EXCEPTION_DATATYPE_MISALIGNMENT:\n        /* The thread attempted to read or write data that is\n           misaligned on hardware that does not provide\n           alignment. For example, 16-bit values must be\n           aligned on 2-byte boundaries, 32-bit values on\n           4-byte boundaries, and so on. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: datatype misalignment\");\n        break;\n\n    case EXCEPTION_SINGLE_STEP:\n        /* A trace trap or other single-instruction mechanism\n           signaled that one instruction has been executed. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: single step\");\n        break;\n\n    case EXCEPTION_ARRAY_BOUNDS_EXCEEDED:\n        /* The thread attempted to access an array element\n           that is out of bounds, and the underlying hardware\n           supports bounds checking. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: array bounds exceeded\");\n        break;\n\n    case EXCEPTION_FLT_DENORMAL_OPERAND:\n        /* One of the operands in a floating-point operation\n           is denormal. A denormal value is one that is too\n           small to represent as a standard floating-point\n           value. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: floating-point operand denormal\");\n        break;\n\n    case EXCEPTION_FLT_DIVIDE_BY_ZERO:\n        /* The thread attempted to divide a floating-point\n           value by a floating-point divisor of zero. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: float divide by zero\");\n        break;\n\n    case EXCEPTION_FLT_INEXACT_RESULT:\n        /* The result of a floating-point operation cannot be\n           represented exactly as a decimal fraction. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: float inexact\");\n        break;\n\n    case EXCEPTION_FLT_INVALID_OPERATION:\n        /* This exception represents any floating-point\n           exception not included in this list. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: float invalid operation\");\n        break;\n\n    case EXCEPTION_FLT_OVERFLOW:\n        /* The exponent of a floating-point operation is\n           greater than the magnitude allowed by the\n           corresponding type. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: float overflow\");\n        break;\n\n    case EXCEPTION_FLT_STACK_CHECK:\n        /* The stack overflowed or underflowed as the result\n           of a floating-point operation. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: stack over/underflow\");\n        break;\n\n    case EXCEPTION_STACK_OVERFLOW:\n        /* The stack overflowed or underflowed as the result\n           of a floating-point operation. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: stack overflow\");\n        break;\n\n    case EXCEPTION_FLT_UNDERFLOW:\n        /* The exponent of a floating-point operation is less\n           than the magnitude allowed by the corresponding\n           type. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: float underflow\");\n        break;\n\n    case EXCEPTION_INT_DIVIDE_BY_ZERO:\n        /* The thread attempted to divide an integer value by\n           an integer divisor of zero. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: integer divide by zero\");\n        break;\n\n    case EXCEPTION_INT_OVERFLOW:\n        /* The result of an integer operation caused a carry\n           out of the most significant bit of the result. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: integer overflow\");\n        break;\n\n    case EXCEPTION_PRIV_INSTRUCTION:\n        /* The thread attempted to execute an instruction\n           whose operation is not allowed in the current\n           machine mode. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: privileged instruction\");\n        break;\n\n    case EXCEPTION_NONCONTINUABLE_EXCEPTION:\n        /* The thread attempted to continue execution after a\n           noncontinuable exception occurred. */\n        PyErr_SetString(PyExc_OSError,\n                        \"exception: nocontinuable\");\n        break;\n\n    default:\n        PyErr_SetFromWindowsErr(code);\n        break;\n    }\n}\n\nstatic DWORD HandleException(EXCEPTION_POINTERS *ptrs,\n                             DWORD *pdw, EXCEPTION_RECORD *record)\n{\n    *pdw = ptrs->ExceptionRecord->ExceptionCode;\n    *record = *ptrs->ExceptionRecord;\n    /* We don't want to catch breakpoint exceptions, they are used to attach\n     * a debugger to the process.\n     */\n    if (*pdw == EXCEPTION_BREAKPOINT)\n        return EXCEPTION_CONTINUE_SEARCH;\n    return EXCEPTION_EXECUTE_HANDLER;\n}\n#endif\n\nstatic PyObject *\ncheck_hresult(PyObject *self, PyObject *args)\n{\n    HRESULT hr;\n    if (!PyArg_ParseTuple(args, \"i\", &hr))\n        return NULL;\n    if (FAILED(hr))\n        return PyErr_SetFromWindowsErr(hr);\n    return PyLong_FromLong(hr);\n}\n\n#endif\n\n/**************************************************************/\n\nPyCArgObject *\nPyCArgObject_new(void)\n{\n    PyCArgObject *p;\n    p = PyObject_New(PyCArgObject, &PyCArg_Type);\n    if (p == NULL)\n        return NULL;\n    p->pffi_type = NULL;\n    p->tag = '\\0';\n    p->obj = NULL;\n    memset(&p->value, 0, sizeof(p->value));\n    return p;\n}\n\nstatic void\nPyCArg_dealloc(PyCArgObject *self)\n{\n    Py_XDECREF(self->obj);\n    PyObject_Del(self);\n}\n\nstatic int\nis_literal_char(unsigned char c)\n{\n    return c < 128 && _PyUnicode_IsPrintable(c) && c != '\\\\' && c != '\\'';\n}\n\nstatic PyObject *\nPyCArg_repr(PyCArgObject *self)\n{\n    switch(self->tag) {\n    case 'b':\n    case 'B':\n        return PyUnicode_FromFormat(\"<cparam '%c' (%d)>\",\n            self->tag, self->value.b);\n    case 'h':\n    case 'H':\n        return PyUnicode_FromFormat(\"<cparam '%c' (%d)>\",\n            self->tag, self->value.h);\n    case 'i':\n    case 'I':\n        return PyUnicode_FromFormat(\"<cparam '%c' (%d)>\",\n            self->tag, self->value.i);\n    case 'l':\n    case 'L':\n        return PyUnicode_FromFormat(\"<cparam '%c' (%ld)>\",\n            self->tag, self->value.l);\n\n    case 'q':\n    case 'Q':\n        return PyUnicode_FromFormat(\"<cparam '%c' (%lld)>\",\n            self->tag, self->value.q);\n    case 'd':\n    case 'f': {\n        PyObject *f = PyFloat_FromDouble((self->tag == 'f') ? self->value.f : self->value.d);\n        if (f == NULL) {\n            return NULL;\n        }\n        PyObject *result = PyUnicode_FromFormat(\"<cparam '%c' (%R)>\", self->tag, f);\n        Py_DECREF(f);\n        return result;\n    }\n    case 'c':\n        if (is_literal_char((unsigned char)self->value.c)) {\n            return PyUnicode_FromFormat(\"<cparam '%c' ('%c')>\",\n                self->tag, self->value.c);\n        }\n        else {\n            return PyUnicode_FromFormat(\"<cparam '%c' ('\\\\x%02x')>\",\n                self->tag, (unsigned char)self->value.c);\n        }\n\n/* Hm, are these 'z' and 'Z' codes useful at all?\n   Shouldn't they be replaced by the functionality of c_string\n   and c_wstring ?\n*/\n    case 'z':\n    case 'Z':\n    case 'P':\n        return PyUnicode_FromFormat(\"<cparam '%c' (%p)>\",\n            self->tag, self->value.p);\n        break;\n\n    default:\n        if (is_literal_char((unsigned char)self->tag)) {\n            return PyUnicode_FromFormat(\"<cparam '%c' at %p>\",\n                (unsigned char)self->tag, (void *)self);\n        }\n        else {\n            return PyUnicode_FromFormat(\"<cparam 0x%02x at %p>\",\n                (unsigned char)self->tag, (void *)self);\n        }\n    }\n}\n\nstatic PyMemberDef PyCArgType_members[] = {\n    { \"_obj\", T_OBJECT,\n      offsetof(PyCArgObject, obj), READONLY,\n      \"the wrapped object\" },\n    { NULL },\n};\n\nPyTypeObject PyCArg_Type = {\n    PyVarObject_HEAD_INIT(NULL, 0)\n    \"CArgObject\",\n    sizeof(PyCArgObject),\n    0,\n    (destructor)PyCArg_dealloc,                 /* tp_dealloc */\n    0,                                          /* tp_vectorcall_offset */\n    0,                                          /* tp_getattr */\n    0,                                          /* tp_setattr */\n    0,                                          /* tp_as_async */\n    (reprfunc)PyCArg_repr,                      /* tp_repr */\n    0,                                          /* tp_as_number */\n    0,                                          /* tp_as_sequence */\n    0,                                          /* tp_as_mapping */\n    0,                                          /* tp_hash */\n    0,                                          /* tp_call */\n    0,                                          /* tp_str */\n    0,                                          /* tp_getattro */\n    0,                                          /* tp_setattro */\n    0,                                          /* tp_as_buffer */\n    Py_TPFLAGS_DEFAULT,                         /* tp_flags */\n    0,                                          /* tp_doc */\n    0,                                          /* tp_traverse */\n    0,                                          /* tp_clear */\n    0,                                          /* tp_richcompare */\n    0,                                          /* tp_weaklistoffset */\n    0,                                          /* tp_iter */\n    0,                                          /* tp_iternext */\n    0,                                          /* tp_methods */\n    PyCArgType_members,                         /* tp_members */\n};\n\n/****************************************************************/\n/*\n * Convert a PyObject * into a parameter suitable to pass to an\n * C function call.\n *\n * 1. Python integers are converted to C int and passed by value.\n *    Py_None is converted to a C NULL pointer.\n *\n * 2. 3-tuples are expected to have a format character in the first\n *    item, which must be 'i', 'f', 'd', 'q', or 'P'.\n *    The second item will have to be an integer, float, double, long long\n *    or integer (denoting an address void *), will be converted to the\n *    corresponding C data type and passed by value.\n *\n * 3. Other Python objects are tested for an '_as_parameter_' attribute.\n *    The value of this attribute must be an integer which will be passed\n *    by value, or a 2-tuple or 3-tuple which will be used according\n *    to point 2 above. The third item (if any), is ignored. It is normally\n *    used to keep the object alive where this parameter refers to.\n *    XXX This convention is dangerous - you can construct arbitrary tuples\n *    in Python and pass them. Would it be safer to use a custom container\n *    datatype instead of a tuple?\n *\n * 4. Other Python objects cannot be passed as parameters - an exception is raised.\n *\n * 5. ConvParam will store the converted result in a struct containing format\n *    and value.\n */\n\nunion result {\n    char c;\n    char b;\n    short h;\n    int i;\n    long l;\n    long long q;\n    long double D;\n    double d;\n    float f;\n    void *p;\n};\n\nstruct argument {\n    ffi_type *ffi_type;\n    PyObject *keep;\n    union result value;\n};\n\n/*\n * Convert a single Python object into a PyCArgObject and return it.\n */\nstatic int ConvParam(PyObject *obj, Py_ssize_t index, struct argument *pa)\n{\n    StgDictObject *dict;\n    pa->keep = NULL; /* so we cannot forget it later */\n\n    dict = PyObject_stgdict(obj);\n    if (dict) {\n        PyCArgObject *carg;\n        assert(dict->paramfunc);\n        /* If it has an stgdict, it is a CDataObject */\n        carg = dict->paramfunc((CDataObject *)obj);\n        if (carg == NULL)\n            return -1;\n        pa->ffi_type = carg->pffi_type;\n        memcpy(&pa->value, &carg->value, sizeof(pa->value));\n        pa->keep = (PyObject *)carg;\n        return 0;\n    }\n\n    if (PyCArg_CheckExact(obj)) {\n        PyCArgObject *carg = (PyCArgObject *)obj;\n        pa->ffi_type = carg->pffi_type;\n        Py_INCREF(obj);\n        pa->keep = obj;\n        memcpy(&pa->value, &carg->value, sizeof(pa->value));\n        return 0;\n    }\n\n    /* check for None, integer, string or unicode and use directly if successful */\n    if (obj == Py_None) {\n        pa->ffi_type = &ffi_type_pointer;\n        pa->value.p = NULL;\n        return 0;\n    }\n\n    if (PyLong_Check(obj)) {\n        pa->ffi_type = &ffi_type_sint;\n        pa->value.i = (long)PyLong_AsUnsignedLong(obj);\n        if (pa->value.i == -1 && PyErr_Occurred()) {\n            PyErr_Clear();\n            pa->value.i = PyLong_AsLong(obj);\n            if (pa->value.i == -1 && PyErr_Occurred()) {\n                PyErr_SetString(PyExc_OverflowError,\n                                \"int too long to convert\");\n                return -1;\n            }\n        }\n        return 0;\n    }\n\n    if (PyBytes_Check(obj)) {\n        pa->ffi_type = &ffi_type_pointer;\n        pa->value.p = PyBytes_AsString(obj);\n        Py_INCREF(obj);\n        pa->keep = obj;\n        return 0;\n    }\n\n#ifdef CTYPES_UNICODE\n    if (PyUnicode_Check(obj)) {\n        pa->ffi_type = &ffi_type_pointer;\n        pa->value.p = PyUnicode_AsWideCharString(obj, NULL);\n        if (pa->value.p == NULL)\n            return -1;\n        pa->keep = PyCapsule_New(pa->value.p, CTYPES_CAPSULE_NAME_PYMEM, pymem_destructor);\n        if (!pa->keep) {\n            PyMem_Free(pa->value.p);\n            return -1;\n        }\n        return 0;\n    }\n#endif\n\n    {\n        _Py_IDENTIFIER(_as_parameter_);\n        PyObject *arg;\n        if (_PyObject_LookupAttrId(obj, &PyId__as_parameter_, &arg) < 0) {\n            return -1;\n        }\n        /* Which types should we exactly allow here?\n           integers are required for using Python classes\n           as parameters (they have to expose the '_as_parameter_'\n           attribute)\n        */\n        if (arg) {\n            int result;\n            result = ConvParam(arg, index, pa);\n            Py_DECREF(arg);\n            return result;\n        }\n        PyErr_Format(PyExc_TypeError,\n                     \"Don't know how to convert parameter %d\",\n                     Py_SAFE_DOWNCAST(index, Py_ssize_t, int));\n        return -1;\n    }\n}\n\n#if defined(MS_WIN32) && !defined(_WIN32_WCE)\n/*\nPer: https://msdn.microsoft.com/en-us/library/7572ztz4.aspx\nTo be returned by value in RAX, user-defined types must have a length \nof 1, 2, 4, 8, 16, 32, or 64 bits\n*/\nint can_return_struct_as_int(size_t s)\n{\n    return s == 1 || s == 2 || s == 4;\n}\n\nint can_return_struct_as_sint64(size_t s)\n{\n#ifdef _M_ARM\n    // 8 byte structs cannot be returned in a register on ARM32\n    return 0;\n#else\n    return s == 8;\n#endif\n}\n#endif\n\n\nffi_type *_ctypes_get_ffi_type(PyObject *obj)\n{\n    StgDictObject *dict;\n    if (obj == NULL)\n        return &ffi_type_sint;\n    dict = PyType_stgdict(obj);\n    if (dict == NULL)\n        return &ffi_type_sint;\n#if defined(MS_WIN32) && !defined(_WIN32_WCE)\n    /* This little trick works correctly with MSVC.\n       It returns small structures in registers\n    */\n    if (dict->ffi_type_pointer.type == FFI_TYPE_STRUCT) {\n        if (can_return_struct_as_int(dict->ffi_type_pointer.size))\n            return &ffi_type_sint32;\n        else if (can_return_struct_as_sint64 (dict->ffi_type_pointer.size))\n            return &ffi_type_sint64;\n    }\n#endif\n    return &dict->ffi_type_pointer;\n}\n\n\n/*\n * libffi uses:\n *\n * ffi_status ffi_prep_cif(ffi_cif *cif, ffi_abi abi,\n *                         unsigned int nargs,\n *                         ffi_type *rtype,\n *                         ffi_type **atypes);\n *\n * and then\n *\n * void ffi_call(ffi_cif *cif, void *fn, void *rvalue, void **avalues);\n */\nstatic int _call_function_pointer(int flags,\n                                  PPROC pProc,\n                                  void **avalues,\n                                  ffi_type **atypes,\n                                  ffi_type *restype,\n                                  void *resmem,\n                                  int argcount)\n{\n    PyThreadState *_save = NULL; /* For Py_BLOCK_THREADS and Py_UNBLOCK_THREADS */\n    PyObject *error_object = NULL;\n    int *space;\n    ffi_cif cif;\n    int cc;\n#if defined(MS_WIN32) && !defined(DONT_USE_SEH)\n    DWORD dwExceptionCode = 0;\n    EXCEPTION_RECORD record;\n#endif\n    /* XXX check before here */\n    if (restype == NULL) {\n        PyErr_SetString(PyExc_RuntimeError,\n                        \"No ffi_type for result\");\n        return -1;\n    }\n\n    cc = FFI_DEFAULT_ABI;\n#if defined(MS_WIN32) && !defined(MS_WIN64) && !defined(_WIN32_WCE) && !defined(_M_ARM)\n    if ((flags & FUNCFLAG_CDECL) == 0)\n        cc = FFI_STDCALL;\n#endif\n    if (FFI_OK != ffi_prep_cif(&cif,\n                               cc,\n                               argcount,\n                               restype,\n                               atypes)) {\n        PyErr_SetString(PyExc_RuntimeError,\n                        \"ffi_prep_cif failed\");\n        return -1;\n    }\n\n    if (flags & (FUNCFLAG_USE_ERRNO | FUNCFLAG_USE_LASTERROR)) {\n        error_object = _ctypes_get_errobj(&space);\n        if (error_object == NULL)\n            return -1;\n    }\n    if ((flags & FUNCFLAG_PYTHONAPI) == 0)\n        Py_UNBLOCK_THREADS\n    if (flags & FUNCFLAG_USE_ERRNO) {\n        int temp = space[0];\n        space[0] = errno;\n        errno = temp;\n    }\n#ifdef MS_WIN32\n    if (flags & FUNCFLAG_USE_LASTERROR) {\n        int temp = space[1];\n        space[1] = GetLastError();\n        SetLastError(temp);\n    }\n#ifndef DONT_USE_SEH\n    __try {\n#endif\n#endif\n                ffi_call(&cif, (void *)pProc, resmem, avalues);\n#ifdef MS_WIN32\n#ifndef DONT_USE_SEH\n    }\n    __except (HandleException(GetExceptionInformation(),\n                              &dwExceptionCode, &record)) {\n        ;\n    }\n#endif\n    if (flags & FUNCFLAG_USE_LASTERROR) {\n        int temp = space[1];\n        space[1] = GetLastError();\n        SetLastError(temp);\n    }\n#endif\n    if (flags & FUNCFLAG_USE_ERRNO) {\n        int temp = space[0];\n        space[0] = errno;\n        errno = temp;\n    }\n    if ((flags & FUNCFLAG_PYTHONAPI) == 0)\n        Py_BLOCK_THREADS\n    Py_XDECREF(error_object);\n#ifdef MS_WIN32\n#ifndef DONT_USE_SEH\n    if (dwExceptionCode) {\n        SetException(dwExceptionCode, &record);\n        return -1;\n    }\n#endif\n#endif\n    if ((flags & FUNCFLAG_PYTHONAPI) && PyErr_Occurred())\n        return -1;\n    return 0;\n}\n\n/*\n * Convert the C value in result into a Python object, depending on restype.\n *\n * - If restype is NULL, return a Python integer.\n * - If restype is None, return None.\n * - If restype is a simple ctypes type (c_int, c_void_p), call the type's getfunc,\n *   pass the result to checker and return the result.\n * - If restype is another ctypes type, return an instance of that.\n * - Otherwise, call restype and return the result.\n */\nstatic PyObject *GetResult(PyObject *restype, void *result, PyObject *checker)\n{\n    StgDictObject *dict;\n    PyObject *retval, *v;\n\n    if (restype == NULL)\n        return PyLong_FromLong(*(int *)result);\n\n    if (restype == Py_None) {\n        Py_RETURN_NONE;\n    }\n\n    dict = PyType_stgdict(restype);\n    if (dict == NULL)\n        return PyObject_CallFunction(restype, \"i\", *(int *)result);\n\n    if (dict->getfunc && !_ctypes_simple_instance(restype)) {\n        retval = dict->getfunc(result, dict->size);\n        /* If restype is py_object (detected by comparing getfunc with\n           O_get), we have to call Py_DECREF because O_get has already\n           called Py_INCREF.\n        */\n        if (dict->getfunc == _ctypes_get_fielddesc(\"O\")->getfunc) {\n            Py_DECREF(retval);\n        }\n    } else\n        retval = PyCData_FromBaseObj(restype, NULL, 0, result);\n\n    if (!checker || !retval)\n        return retval;\n\n    v = PyObject_CallFunctionObjArgs(checker, retval, NULL);\n    if (v == NULL)\n        _PyTraceback_Add(\"GetResult\", \"_ctypes/callproc.c\", __LINE__-2);\n    Py_DECREF(retval);\n    return v;\n}\n\n/*\n * Raise a new exception 'exc_class', adding additional text to the original\n * exception string.\n */\nvoid _ctypes_extend_error(PyObject *exc_class, const char *fmt, ...)\n{\n    va_list vargs;\n    PyObject *tp, *v, *tb, *s, *cls_str, *msg_str;\n\n    va_start(vargs, fmt);\n    s = PyUnicode_FromFormatV(fmt, vargs);\n    va_end(vargs);\n    if (!s)\n        return;\n\n    PyErr_Fetch(&tp, &v, &tb);\n    PyErr_NormalizeException(&tp, &v, &tb);\n    cls_str = PyObject_Str(tp);\n    if (cls_str) {\n        PyUnicode_AppendAndDel(&s, cls_str);\n        PyUnicode_AppendAndDel(&s, PyUnicode_FromString(\": \"));\n        if (s == NULL)\n            goto error;\n    } else\n        PyErr_Clear();\n    msg_str = PyObject_Str(v);\n    if (msg_str)\n        PyUnicode_AppendAndDel(&s, msg_str);\n    else {\n        PyErr_Clear();\n        PyUnicode_AppendAndDel(&s, PyUnicode_FromString(\"???\"));\n    }\n    if (s == NULL)\n        goto error;\n    PyErr_SetObject(exc_class, s);\nerror:\n    Py_XDECREF(tp);\n    Py_XDECREF(v);\n    Py_XDECREF(tb);\n    Py_XDECREF(s);\n}\n\n\n#ifdef MS_WIN32\n\nstatic PyObject *\nGetComError(HRESULT errcode, GUID *riid, IUnknown *pIunk)\n{\n    HRESULT hr;\n    ISupportErrorInfo *psei = NULL;\n    IErrorInfo *pei = NULL;\n    BSTR descr=NULL, helpfile=NULL, source=NULL;\n    GUID guid;\n    DWORD helpcontext=0;\n    LPOLESTR progid;\n    PyObject *obj;\n    LPOLESTR text;\n\n    /* We absolutely have to release the GIL during COM method calls,\n       otherwise we may get a deadlock!\n    */\n    Py_BEGIN_ALLOW_THREADS\n\n    hr = pIunk->lpVtbl->QueryInterface(pIunk, &IID_ISupportErrorInfo, (void **)&psei);\n    if (FAILED(hr))\n        goto failed;\n\n    hr = psei->lpVtbl->InterfaceSupportsErrorInfo(psei, riid);\n    psei->lpVtbl->Release(psei);\n    if (FAILED(hr))\n        goto failed;\n\n    hr = GetErrorInfo(0, &pei);\n    if (hr != S_OK)\n        goto failed;\n\n    pei->lpVtbl->GetDescription(pei, &descr);\n    pei->lpVtbl->GetGUID(pei, &guid);\n    pei->lpVtbl->GetHelpContext(pei, &helpcontext);\n    pei->lpVtbl->GetHelpFile(pei, &helpfile);\n    pei->lpVtbl->GetSource(pei, &source);\n\n    pei->lpVtbl->Release(pei);\n\n  failed:\n    Py_END_ALLOW_THREADS\n\n    progid = NULL;\n    ProgIDFromCLSID(&guid, &progid);\n\n    text = FormatError(errcode);\n    obj = Py_BuildValue(\n        \"iu(uuuiu)\",\n        errcode,\n        text,\n        descr, source, helpfile, helpcontext,\n        progid);\n    if (obj) {\n        PyErr_SetObject(ComError, obj);\n        Py_DECREF(obj);\n    }\n    LocalFree(text);\n\n    if (descr)\n        SysFreeString(descr);\n    if (helpfile)\n        SysFreeString(helpfile);\n    if (source)\n        SysFreeString(source);\n\n    return NULL;\n}\n#endif\n\n#if (defined(__x86_64__) && (defined(__MINGW64__) || defined(__CYGWIN__))) || \\\n    defined(__aarch64__) || defined(__riscv)\n#define CTYPES_PASS_BY_REF_HACK\n#define POW2(x) (((x & ~(x - 1)) == x) ? x : 0)\n#define IS_PASS_BY_REF(x) (x > 8 || !POW2(x))\n#endif\n\n/*\n * bpo-13097: Max number of arguments _ctypes_callproc will accept.\n *\n * This limit is enforced for the `alloca()` call in `_ctypes_callproc`,\n * to avoid allocating a massive buffer on the stack.\n */\n#define CTYPES_MAX_ARGCOUNT 1024\n\n/*\n * Requirements, must be ensured by the caller:\n * - argtuple is tuple of arguments\n * - argtypes is either NULL, or a tuple of the same size as argtuple\n *\n * - XXX various requirements for restype, not yet collected\n */\nPyObject *_ctypes_callproc(PPROC pProc,\n                    PyObject *argtuple,\n#ifdef MS_WIN32\n                    IUnknown *pIunk,\n                    GUID *iid,\n#endif\n                    int flags,\n                    PyObject *argtypes, /* misleading name: This is a tuple of\n                                           methods, not types: the .from_param\n                                           class methods of the types */\n            PyObject *restype,\n            PyObject *checker)\n{\n    Py_ssize_t i, n, argcount, argtype_count;\n    void *resbuf;\n    struct argument *args, *pa;\n    ffi_type **atypes;\n    ffi_type *rtype;\n    void **avalues;\n    PyObject *retval = NULL;\n\n    n = argcount = PyTuple_GET_SIZE(argtuple);\n#ifdef MS_WIN32\n    /* an optional COM object this pointer */\n    if (pIunk)\n        ++argcount;\n#endif\n\n    if (argcount > CTYPES_MAX_ARGCOUNT)\n    {\n        PyErr_Format(PyExc_ArgError, \"too many arguments (%zi), maximum is %i\",\n                     argcount, CTYPES_MAX_ARGCOUNT);\n        return NULL;\n    }\n\n    args = (struct argument *)alloca(sizeof(struct argument) * argcount);\n    if (!args) {\n        PyErr_NoMemory();\n        return NULL;\n    }\n    memset(args, 0, sizeof(struct argument) * argcount);\n    argtype_count = argtypes ? PyTuple_GET_SIZE(argtypes) : 0;\n#ifdef MS_WIN32\n    if (pIunk) {\n        args[0].ffi_type = &ffi_type_pointer;\n        args[0].value.p = pIunk;\n        pa = &args[1];\n    } else\n#endif\n        pa = &args[0];\n\n    /* Convert the arguments */\n    for (i = 0; i < n; ++i, ++pa) {\n        PyObject *converter;\n        PyObject *arg;\n        int err;\n\n        arg = PyTuple_GET_ITEM(argtuple, i);            /* borrowed ref */\n        /* For cdecl functions, we allow more actual arguments\n           than the length of the argtypes tuple.\n           This is checked in _ctypes::PyCFuncPtr_Call\n        */\n        if (argtypes && argtype_count > i) {\n            PyObject *v;\n            converter = PyTuple_GET_ITEM(argtypes, i);\n            v = PyObject_CallFunctionObjArgs(converter, arg, NULL);\n            if (v == NULL) {\n                _ctypes_extend_error(PyExc_ArgError, \"argument %zd: \", i+1);\n                goto cleanup;\n            }\n\n            err = ConvParam(v, i+1, pa);\n            Py_DECREF(v);\n            if (-1 == err) {\n                _ctypes_extend_error(PyExc_ArgError, \"argument %zd: \", i+1);\n                goto cleanup;\n            }\n        } else {\n            err = ConvParam(arg, i+1, pa);\n            if (-1 == err) {\n                _ctypes_extend_error(PyExc_ArgError, \"argument %zd: \", i+1);\n                goto cleanup; /* leaking ? */\n            }\n        }\n    }\n\n    rtype = _ctypes_get_ffi_type(restype);\n    resbuf = alloca(max(rtype->size, sizeof(ffi_arg)));\n\n#ifdef _Py_MEMORY_SANITIZER\n    /* ffi_call actually initializes resbuf, but from asm, which\n     * MemorySanitizer can't detect. Avoid false positives from MSan. */\n    if (resbuf != NULL) {\n        __msan_unpoison(resbuf, max(rtype->size, sizeof(ffi_arg)));\n    }\n#endif\n    avalues = (void **)alloca(sizeof(void *) * argcount);\n    atypes = (ffi_type **)alloca(sizeof(ffi_type *) * argcount);\n    if (!resbuf || !avalues || !atypes) {\n        PyErr_NoMemory();\n        goto cleanup;\n    }\n    for (i = 0; i < argcount; ++i) {\n        atypes[i] = args[i].ffi_type;\n#ifdef CTYPES_PASS_BY_REF_HACK\n        size_t size = atypes[i]->size;\n        if (IS_PASS_BY_REF(size)) {\n            void *tmp = alloca(size);\n            if (atypes[i]->type == FFI_TYPE_STRUCT)\n                memcpy(tmp, args[i].value.p, size);\n            else\n                memcpy(tmp, (void*)&args[i].value, size);\n\n            avalues[i] = tmp;\n        }\n        else\n#endif\n        if (atypes[i]->type == FFI_TYPE_STRUCT)\n            avalues[i] = (void *)args[i].value.p;\n        else\n            avalues[i] = (void *)&args[i].value;\n    }\n\n    if (-1 == _call_function_pointer(flags, pProc, avalues, atypes,\n                                     rtype, resbuf,\n                                     Py_SAFE_DOWNCAST(argcount,\n                                                      Py_ssize_t,\n                                                      int)))\n        goto cleanup;\n\n#ifdef WORDS_BIGENDIAN\n    /* libffi returns the result in a buffer with sizeof(ffi_arg). This\n       causes problems on big endian machines, since the result buffer\n       address cannot simply be used as result pointer, instead we must\n       adjust the pointer value:\n     */\n    /*\n      XXX I should find out and clarify why this is needed at all,\n      especially why adjusting for ffi_type_float must be avoided on\n      64-bit platforms.\n     */\n    if (rtype->type != FFI_TYPE_FLOAT\n        && rtype->type != FFI_TYPE_STRUCT\n        && rtype->size < sizeof(ffi_arg))\n    {\n        resbuf = (char *)resbuf + sizeof(ffi_arg) - rtype->size;\n    }\n#endif\n\n#ifdef MS_WIN32\n    if (iid && pIunk) {\n        if (*(int *)resbuf & 0x80000000)\n            retval = GetComError(*(HRESULT *)resbuf, iid, pIunk);\n        else\n            retval = PyLong_FromLong(*(int *)resbuf);\n    } else if (flags & FUNCFLAG_HRESULT) {\n        if (*(int *)resbuf & 0x80000000)\n            retval = PyErr_SetFromWindowsErr(*(int *)resbuf);\n        else\n            retval = PyLong_FromLong(*(int *)resbuf);\n    } else\n#endif\n        retval = GetResult(restype, resbuf, checker);\n  cleanup:\n    for (i = 0; i < argcount; ++i)\n        Py_XDECREF(args[i].keep);\n    return retval;\n}\n\nstatic int\n_parse_voidp(PyObject *obj, void **address)\n{\n    *address = PyLong_AsVoidPtr(obj);\n    if (*address == NULL)\n        return 0;\n    return 1;\n}\n\n#ifdef MS_WIN32\n\nstatic const char format_error_doc[] =\n\"FormatError([integer]) -> string\\n\\\n\\n\\\nConvert a win32 error code into a string. If the error code is not\\n\\\ngiven, the return value of a call to GetLastError() is used.\\n\";\nstatic PyObject *format_error(PyObject *self, PyObject *args)\n{\n    PyObject *result;\n    wchar_t *lpMsgBuf;\n    DWORD code = 0;\n    if (!PyArg_ParseTuple(args, \"|i:FormatError\", &code))\n        return NULL;\n    if (code == 0)\n        code = GetLastError();\n    lpMsgBuf = FormatError(code);\n    if (lpMsgBuf) {\n        result = PyUnicode_FromWideChar(lpMsgBuf, wcslen(lpMsgBuf));\n        LocalFree(lpMsgBuf);\n    } else {\n        result = PyUnicode_FromString(\"<no description>\");\n    }\n    return result;\n}\n\nstatic const char load_library_doc[] =\n\"LoadLibrary(name, load_flags) -> handle\\n\\\n\\n\\\nLoad an executable (usually a DLL), and return a handle to it.\\n\\\nThe handle may be used to locate exported functions in this\\n\\\nmodule. load_flags are as defined for LoadLibraryEx in the\\n\\\nWindows API.\\n\";\nstatic PyObject *load_library(PyObject *self, PyObject *args)\n{\n    const WCHAR *name;\n    PyObject *nameobj;\n    int load_flags = 0;\n    HMODULE hMod;\n    DWORD err;\n\n    if (!PyArg_ParseTuple(args, \"U|i:LoadLibrary\", &nameobj, &load_flags))\n        return NULL;\n\n    name = _PyUnicode_AsUnicode(nameobj);\n    if (!name)\n        return NULL;\n\n    if (PySys_Audit(\"ctypes.dlopen\", \"O\", nameobj) < 0) {\n        return NULL;\n    }\n\n    Py_BEGIN_ALLOW_THREADS\n    /* bpo-36085: Limit DLL search directories to avoid pre-loading\n     * attacks and enable use of the AddDllDirectory function.\n     */\n    hMod = LoadLibraryExW(name, NULL, (DWORD)load_flags);\n    err = hMod ? 0 : GetLastError();\n    Py_END_ALLOW_THREADS\n\n    if (err == ERROR_MOD_NOT_FOUND) {\n        PyErr_Format(PyExc_FileNotFoundError,\n                     (\"Could not find module '%.500S' (or one of its \"\n                      \"dependencies). Try using the full path with \"\n                      \"constructor syntax.\"),\n                     nameobj);\n        return NULL;\n    } else if (err) {\n        return PyErr_SetFromWindowsErr(err);\n    }\n#ifdef _WIN64\n    return PyLong_FromVoidPtr(hMod);\n#else\n    return Py_BuildValue(\"i\", hMod);\n#endif\n}\n\nstatic const char free_library_doc[] =\n\"FreeLibrary(handle) -> void\\n\\\n\\n\\\nFree the handle of an executable previously loaded by LoadLibrary.\\n\";\nstatic PyObject *free_library(PyObject *self, PyObject *args)\n{\n    void *hMod;\n    BOOL result;\n    DWORD err;\n    if (!PyArg_ParseTuple(args, \"O&:FreeLibrary\", &_parse_voidp, &hMod))\n        return NULL;\n\n    Py_BEGIN_ALLOW_THREADS\n    result = FreeLibrary((HMODULE)hMod);\n    err = result ? 0 : GetLastError();\n    Py_END_ALLOW_THREADS\n\n    if (!result) {\n        return PyErr_SetFromWindowsErr(err);\n    }\n    Py_RETURN_NONE;\n}\n\nstatic const char copy_com_pointer_doc[] =\n\"CopyComPointer(src, dst) -> HRESULT value\\n\";\n\nstatic PyObject *\ncopy_com_pointer(PyObject *self, PyObject *args)\n{\n    PyObject *p1, *p2, *r = NULL;\n    struct argument a, b;\n    IUnknown *src, **pdst;\n    if (!PyArg_ParseTuple(args, \"OO:CopyComPointer\", &p1, &p2))\n        return NULL;\n    a.keep = b.keep = NULL;\n\n    if (-1 == ConvParam(p1, 0, &a) || -1 == ConvParam(p2, 1, &b))\n        goto done;\n    src = (IUnknown *)a.value.p;\n    pdst = (IUnknown **)b.value.p;\n\n    if (pdst == NULL)\n        r = PyLong_FromLong(E_POINTER);\n    else {\n        if (src)\n            src->lpVtbl->AddRef(src);\n        *pdst = src;\n        r = PyLong_FromLong(S_OK);\n    }\n  done:\n    Py_XDECREF(a.keep);\n    Py_XDECREF(b.keep);\n    return r;\n}\n#else\n\nstatic PyObject *py_dl_open(PyObject *self, PyObject *args)\n{\n    PyObject *name, *name2;\n    char *name_str;\n    void * handle;\n#if HAVE_DECL_RTLD_LOCAL\n    int mode = RTLD_NOW | RTLD_LOCAL;\n#else\n    /* cygwin doesn't define RTLD_LOCAL */\n    int mode = RTLD_NOW;\n#endif\n    if (!PyArg_ParseTuple(args, \"O|i:dlopen\", &name, &mode))\n        return NULL;\n    mode |= RTLD_NOW;\n    if (name != Py_None) {\n        if (PyUnicode_FSConverter(name, &name2) == 0)\n            return NULL;\n        name_str = PyBytes_AS_STRING(name2);\n    } else {\n        name_str = NULL;\n        name2 = NULL;\n    }\n    if (PySys_Audit(\"ctypes.dlopen\", \"O\", name) < 0) {\n        return NULL;\n    }\n    handle = ctypes_dlopen(name_str, mode);\n    Py_XDECREF(name2);\n    if (!handle) {\n        const char *errmsg = ctypes_dlerror();\n        if (!errmsg)\n            errmsg = \"dlopen() error\";\n        PyErr_SetString(PyExc_OSError,\n                               errmsg);\n        return NULL;\n    }\n    return PyLong_FromVoidPtr(handle);\n}\n\nstatic PyObject *py_dl_close(PyObject *self, PyObject *args)\n{\n    void *handle;\n\n    if (!PyArg_ParseTuple(args, \"O&:dlclose\", &_parse_voidp, &handle))\n        return NULL;\n    if (dlclose(handle)) {\n        PyErr_SetString(PyExc_OSError,\n                               ctypes_dlerror());\n        return NULL;\n    }\n    Py_RETURN_NONE;\n}\n\nstatic PyObject *py_dl_sym(PyObject *self, PyObject *args)\n{\n    char *name;\n    void *handle;\n    void *ptr;\n\n    if (!PyArg_ParseTuple(args, \"O&s:dlsym\",\n                          &_parse_voidp, &handle, &name))\n        return NULL;\n    if (PySys_Audit(\"ctypes.dlsym/handle\", \"O\", args) < 0) {\n        return NULL;\n    }\n    ptr = ctypes_dlsym((void*)handle, name);\n    if (!ptr) {\n        PyErr_SetString(PyExc_OSError,\n                               ctypes_dlerror());\n        return NULL;\n    }\n    return PyLong_FromVoidPtr(ptr);\n}\n#endif\n\n/*\n * Only for debugging so far: So that we can call CFunction instances\n *\n * XXX Needs to accept more arguments: flags, argtypes, restype\n */\nstatic PyObject *\ncall_function(PyObject *self, PyObject *args)\n{\n    void *func;\n    PyObject *arguments;\n    PyObject *result;\n\n    if (!PyArg_ParseTuple(args,\n                          \"O&O!\",\n                          &_parse_voidp, &func,\n                          &PyTuple_Type, &arguments))\n        return NULL;\n    if (PySys_Audit(\"ctypes.call_function\", \"nO\",\n                    (Py_ssize_t)func, arguments) < 0) {\n        return NULL;\n    }\n\n    result =  _ctypes_callproc((PPROC)func,\n                        arguments,\n#ifdef MS_WIN32\n                        NULL,\n                        NULL,\n#endif\n                        0, /* flags */\n                NULL, /* self->argtypes */\n                NULL, /* self->restype */\n                NULL); /* checker */\n    return result;\n}\n\n/*\n * Only for debugging so far: So that we can call CFunction instances\n *\n * XXX Needs to accept more arguments: flags, argtypes, restype\n */\nstatic PyObject *\ncall_cdeclfunction(PyObject *self, PyObject *args)\n{\n    void *func;\n    PyObject *arguments;\n    PyObject *result;\n\n    if (!PyArg_ParseTuple(args,\n                          \"O&O!\",\n                          &_parse_voidp, &func,\n                          &PyTuple_Type, &arguments))\n        return NULL;\n    if (PySys_Audit(\"ctypes.call_function\", \"nO\",\n                    (Py_ssize_t)func, arguments) < 0) {\n        return NULL;\n    }\n\n    result =  _ctypes_callproc((PPROC)func,\n                        arguments,\n#ifdef MS_WIN32\n                        NULL,\n                        NULL,\n#endif\n                        FUNCFLAG_CDECL, /* flags */\n                        NULL, /* self->argtypes */\n                        NULL, /* self->restype */\n                        NULL); /* checker */\n    return result;\n}\n\n/*****************************************************************\n * functions\n */\nstatic const char sizeof_doc[] =\n\"sizeof(C type) -> integer\\n\"\n\"sizeof(C instance) -> integer\\n\"\n\"Return the size in bytes of a C instance\";\n\nstatic PyObject *\nsizeof_func(PyObject *self, PyObject *obj)\n{\n    StgDictObject *dict;\n\n    dict = PyType_stgdict(obj);\n    if (dict)\n        return PyLong_FromSsize_t(dict->size);\n\n    if (CDataObject_Check(obj))\n        return PyLong_FromSsize_t(((CDataObject *)obj)->b_size);\n    PyErr_SetString(PyExc_TypeError,\n                    \"this type has no size\");\n    return NULL;\n}\n\nstatic const char alignment_doc[] =\n\"alignment(C type) -> integer\\n\"\n\"alignment(C instance) -> integer\\n\"\n\"Return the alignment requirements of a C instance\";\n\nstatic PyObject *\nalign_func(PyObject *self, PyObject *obj)\n{\n    StgDictObject *dict;\n\n    dict = PyType_stgdict(obj);\n    if (dict)\n        return PyLong_FromSsize_t(dict->align);\n\n    dict = PyObject_stgdict(obj);\n    if (dict)\n        return PyLong_FromSsize_t(dict->align);\n\n    PyErr_SetString(PyExc_TypeError,\n                    \"no alignment info\");\n    return NULL;\n}\n\nstatic const char byref_doc[] =\n\"byref(C instance[, offset=0]) -> byref-object\\n\"\n\"Return a pointer lookalike to a C instance, only usable\\n\"\n\"as function argument\";\n\n/*\n * We must return something which can be converted to a parameter,\n * but still has a reference to self.\n */\nstatic PyObject *\nbyref(PyObject *self, PyObject *args)\n{\n    PyCArgObject *parg;\n    PyObject *obj;\n    PyObject *pyoffset = NULL;\n    Py_ssize_t offset = 0;\n\n    if (!PyArg_UnpackTuple(args, \"byref\", 1, 2,\n                           &obj, &pyoffset))\n        return NULL;\n    if (pyoffset) {\n        offset = PyNumber_AsSsize_t(pyoffset, NULL);\n        if (offset == -1 && PyErr_Occurred())\n            return NULL;\n    }\n    if (!CDataObject_Check(obj)) {\n        PyErr_Format(PyExc_TypeError,\n                     \"byref() argument must be a ctypes instance, not '%s'\",\n                     Py_TYPE(obj)->tp_name);\n        return NULL;\n    }\n\n    parg = PyCArgObject_new();\n    if (parg == NULL)\n        return NULL;\n\n    parg->tag = 'P';\n    parg->pffi_type = &ffi_type_pointer;\n    Py_INCREF(obj);\n    parg->obj = obj;\n    parg->value.p = (char *)((CDataObject *)obj)->b_ptr + offset;\n    return (PyObject *)parg;\n}\n\nstatic const char addressof_doc[] =\n\"addressof(C instance) -> integer\\n\"\n\"Return the address of the C instance internal buffer\";\n\nstatic PyObject *\naddressof(PyObject *self, PyObject *obj)\n{\n    if (!CDataObject_Check(obj)) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"invalid type\");\n        return NULL;\n    }\n    if (PySys_Audit(\"ctypes.addressof\", \"(O)\", obj) < 0) {\n        return NULL;\n    }\n    return PyLong_FromVoidPtr(((CDataObject *)obj)->b_ptr);\n}\n\nstatic int\nconverter(PyObject *obj, void **address)\n{\n    *address = PyLong_AsVoidPtr(obj);\n    return *address != NULL;\n}\n\nstatic PyObject *\nMy_PyObj_FromPtr(PyObject *self, PyObject *args)\n{\n    PyObject *ob;\n    if (!PyArg_ParseTuple(args, \"O&:PyObj_FromPtr\", converter, &ob)) {\n        return NULL;\n    }\n    if (PySys_Audit(\"ctypes.PyObj_FromPtr\", \"(O)\", ob) < 0) {\n        return NULL;\n    }\n    Py_INCREF(ob);\n    return ob;\n}\n\nstatic PyObject *\nMy_Py_INCREF(PyObject *self, PyObject *arg)\n{\n    Py_INCREF(arg); /* that's what this function is for */\n    Py_INCREF(arg); /* that for returning it */\n    return arg;\n}\n\nstatic PyObject *\nMy_Py_DECREF(PyObject *self, PyObject *arg)\n{\n    Py_DECREF(arg); /* that's what this function is for */\n    Py_INCREF(arg); /* that's for returning it */\n    return arg;\n}\n\nstatic PyObject *\nresize(PyObject *self, PyObject *args)\n{\n    CDataObject *obj;\n    StgDictObject *dict;\n    Py_ssize_t size;\n\n    if (!PyArg_ParseTuple(args,\n                          \"On:resize\",\n                          &obj, &size))\n        return NULL;\n\n    dict = PyObject_stgdict((PyObject *)obj);\n    if (dict == NULL) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"excepted ctypes instance\");\n        return NULL;\n    }\n    if (size < dict->size) {\n        PyErr_Format(PyExc_ValueError,\n                     \"minimum size is %zd\",\n                     dict->size);\n        return NULL;\n    }\n    if (obj->b_needsfree == 0) {\n        PyErr_Format(PyExc_ValueError,\n                     \"Memory cannot be resized because this object doesn't own it\");\n        return NULL;\n    }\n    if ((size_t)size <= sizeof(obj->b_value)) {\n        /* internal default buffer is large enough */\n        obj->b_size = size;\n        goto done;\n    }\n    if (!_CDataObject_HasExternalBuffer(obj)) {\n        /* We are currently using the objects default buffer, but it\n           isn't large enough any more. */\n        void *ptr = PyMem_Malloc(size);\n        if (ptr == NULL)\n            return PyErr_NoMemory();\n        memset(ptr, 0, size);\n        memmove(ptr, obj->b_ptr, obj->b_size);\n        obj->b_ptr = ptr;\n        obj->b_size = size;\n    } else {\n        void * ptr = PyMem_Realloc(obj->b_ptr, size);\n        if (ptr == NULL)\n            return PyErr_NoMemory();\n        obj->b_ptr = ptr;\n        obj->b_size = size;\n    }\n  done:\n    Py_RETURN_NONE;\n}\n\nstatic PyObject *\nunpickle(PyObject *self, PyObject *args)\n{\n    PyObject *typ, *state, *meth, *obj, *result;\n    _Py_IDENTIFIER(__new__);\n    _Py_IDENTIFIER(__setstate__);\n\n    if (!PyArg_ParseTuple(args, \"OO!\", &typ, &PyTuple_Type, &state))\n        return NULL;\n    obj = _PyObject_CallMethodIdObjArgs(typ, &PyId___new__, typ, NULL);\n    if (obj == NULL)\n        return NULL;\n\n    meth = _PyObject_GetAttrId(obj, &PyId___setstate__);\n    if (meth == NULL) {\n        goto error;\n    }\n\n    result = PyObject_Call(meth, state, NULL);\n    Py_DECREF(meth);\n    if (result == NULL) {\n        goto error;\n    }\n    Py_DECREF(result);\n\n    return obj;\n\nerror:\n    Py_DECREF(obj);\n    return NULL;\n}\n\nstatic PyObject *\nPOINTER(PyObject *self, PyObject *cls)\n{\n    PyObject *result;\n    PyTypeObject *typ;\n    PyObject *key;\n    char *buf;\n\n    result = PyDict_GetItemWithError(_ctypes_ptrtype_cache, cls);\n    if (result) {\n        Py_INCREF(result);\n        return result;\n    }\n    else if (PyErr_Occurred()) {\n        return NULL;\n    }\n    if (PyUnicode_CheckExact(cls)) {\n        const char *name = PyUnicode_AsUTF8(cls);\n        if (name == NULL)\n            return NULL;\n        buf = PyMem_Malloc(strlen(name) + 3 + 1);\n        if (buf == NULL)\n            return PyErr_NoMemory();\n        sprintf(buf, \"LP_%s\", name);\n        result = PyObject_CallFunction((PyObject *)Py_TYPE(&PyCPointer_Type),\n                                       \"s(O){}\",\n                                       buf,\n                                       &PyCPointer_Type);\n        PyMem_Free(buf);\n        if (result == NULL)\n            return result;\n        key = PyLong_FromVoidPtr(result);\n        if (key == NULL) {\n            Py_DECREF(result);\n            return NULL;\n        }\n    } else if (PyType_Check(cls)) {\n        typ = (PyTypeObject *)cls;\n        buf = PyMem_Malloc(strlen(typ->tp_name) + 3 + 1);\n        if (buf == NULL)\n            return PyErr_NoMemory();\n        sprintf(buf, \"LP_%s\", typ->tp_name);\n        result = PyObject_CallFunction((PyObject *)Py_TYPE(&PyCPointer_Type),\n                                       \"s(O){sO}\",\n                                       buf,\n                                       &PyCPointer_Type,\n                                       \"_type_\", cls);\n        PyMem_Free(buf);\n        if (result == NULL)\n            return result;\n        Py_INCREF(cls);\n        key = cls;\n    } else {\n        PyErr_SetString(PyExc_TypeError, \"must be a ctypes type\");\n        return NULL;\n    }\n    if (-1 == PyDict_SetItem(_ctypes_ptrtype_cache, key, result)) {\n        Py_DECREF(result);\n        Py_DECREF(key);\n        return NULL;\n    }\n    Py_DECREF(key);\n    return result;\n}\n\nstatic PyObject *\npointer(PyObject *self, PyObject *arg)\n{\n    PyObject *result;\n    PyObject *typ;\n\n    typ = PyDict_GetItemWithError(_ctypes_ptrtype_cache, (PyObject *)Py_TYPE(arg));\n    if (typ) {\n        return PyObject_CallFunctionObjArgs(typ, arg, NULL);\n    }\n    else if (PyErr_Occurred()) {\n        return NULL;\n    }\n    typ = POINTER(NULL, (PyObject *)Py_TYPE(arg));\n    if (typ == NULL)\n        return NULL;\n    result = PyObject_CallFunctionObjArgs(typ, arg, NULL);\n    Py_DECREF(typ);\n    return result;\n}\n\nstatic PyObject *\nbuffer_info(PyObject *self, PyObject *arg)\n{\n    StgDictObject *dict = PyType_stgdict(arg);\n    PyObject *shape;\n    Py_ssize_t i;\n\n    if (dict == NULL)\n        dict = PyObject_stgdict(arg);\n    if (dict == NULL) {\n        PyErr_SetString(PyExc_TypeError,\n                        \"not a ctypes type or object\");\n        return NULL;\n    }\n    shape = PyTuple_New(dict->ndim);\n    if (shape == NULL)\n        return NULL;\n    for (i = 0; i < (int)dict->ndim; ++i)\n        PyTuple_SET_ITEM(shape, i, PyLong_FromSsize_t(dict->shape[i]));\n\n    if (PyErr_Occurred()) {\n        Py_DECREF(shape);\n        return NULL;\n    }\n    return Py_BuildValue(\"siN\", dict->format, dict->ndim, shape);\n}\n\nPyMethodDef _ctypes_module_methods[] = {\n    {\"get_errno\", get_errno, METH_NOARGS},\n    {\"set_errno\", set_errno, METH_VARARGS},\n    {\"POINTER\", POINTER, METH_O },\n    {\"pointer\", pointer, METH_O },\n    {\"_unpickle\", unpickle, METH_VARARGS },\n    {\"buffer_info\", buffer_info, METH_O, \"Return buffer interface information\"},\n    {\"resize\", resize, METH_VARARGS, \"Resize the memory buffer of a ctypes instance\"},\n#ifdef MS_WIN32\n    {\"get_last_error\", get_last_error, METH_NOARGS},\n    {\"set_last_error\", set_last_error, METH_VARARGS},\n    {\"CopyComPointer\", copy_com_pointer, METH_VARARGS, copy_com_pointer_doc},\n    {\"FormatError\", format_error, METH_VARARGS, format_error_doc},\n    {\"LoadLibrary\", load_library, METH_VARARGS, load_library_doc},\n    {\"FreeLibrary\", free_library, METH_VARARGS, free_library_doc},\n    {\"_check_HRESULT\", check_hresult, METH_VARARGS},\n#else\n    {\"dlopen\", py_dl_open, METH_VARARGS,\n     \"dlopen(name, flag={RTLD_GLOBAL|RTLD_LOCAL}) open a shared library\"},\n    {\"dlclose\", py_dl_close, METH_VARARGS, \"dlclose a library\"},\n    {\"dlsym\", py_dl_sym, METH_VARARGS, \"find symbol in shared library\"},\n#endif\n    {\"alignment\", align_func, METH_O, alignment_doc},\n    {\"sizeof\", sizeof_func, METH_O, sizeof_doc},\n    {\"byref\", byref, METH_VARARGS, byref_doc},\n    {\"addressof\", addressof, METH_O, addressof_doc},\n    {\"call_function\", call_function, METH_VARARGS },\n    {\"call_cdeclfunction\", call_cdeclfunction, METH_VARARGS },\n    {\"PyObj_FromPtr\", My_PyObj_FromPtr, METH_VARARGS },\n    {\"Py_INCREF\", My_Py_INCREF, METH_O },\n    {\"Py_DECREF\", My_Py_DECREF, METH_O },\n    {NULL,      NULL}        /* Sentinel */\n};\n\n/*\n Local Variables:\n compile-command: \"cd .. && python setup.py -q build -g && python setup.py -q build install --home ~\"\n End:\n*/\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Modules/_ctypes/ctypes_dlfcn.h": "#ifndef _CTYPES_DLFCN_H_\n#define _CTYPES_DLFCN_H_\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif /* __cplusplus */\n\n#ifndef MS_WIN32\n\n#include <dlfcn.h>\n\n#ifndef CTYPES_DARWIN_DLFCN\n\n#define ctypes_dlsym dlsym\n#define ctypes_dlerror dlerror\n#define ctypes_dlopen dlopen\n#define ctypes_dlclose dlclose\n#define ctypes_dladdr dladdr\n\n#endif /* !CTYPES_DARWIN_DLFCN */\n\n#endif /* !MS_WIN32 */\n\n#ifdef __cplusplus\n}\n#endif /* __cplusplus */\n#endif /* _CTYPES_DLFCN_H_ */\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Modules/_ctypes/darwin/dlfcn.h": "/*\nCopyright (c) 2002 Jorge Acereda  <jacereda@users.sourceforge.net> &\n                   Peter O'Gorman <ogorman@users.sourceforge.net>\n                   \nPortions may be copyright others, see the AUTHORS file included with this\ndistribution.\n\nMaintained by Peter O'Gorman <ogorman@users.sourceforge.net>\n\nBug Reports and other queries should go to <ogorman@users.sourceforge.net>\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n#ifndef _DLFCN_H_\n#define _DLFCN_H_\n\n#include <AvailabilityMacros.h>\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n\n/*\n * Structure filled in by dladdr().\n */\n\ntypedef struct dl_info {\n        const char      *dli_fname;     /* Pathname of shared object */\n        void            *dli_fbase;     /* Base address of shared object */\n        const char      *dli_sname;     /* Name of nearest symbol */\n        void            *dli_saddr;     /* Address of nearest symbol */\n} Dl_info;\n\n\n#if MAC_OS_X_VERSION_MIN_REQUIRED <= MAC_OS_X_VERSION_10_2\n#warning CTYPES_DARWIN_DLFCN\n#define CTYPES_DARWIN_DLFCN\nextern void * (*ctypes_dlopen)(const char *path, int mode);\nextern void * (*ctypes_dlsym)(void * handle, const char *symbol);\nextern const char * (*ctypes_dlerror)(void);\nextern int (*ctypes_dlclose)(void * handle);\nextern int (*ctypes_dladdr)(const void *, Dl_info *);\n#else\nextern void * dlopen(const char *path, int mode);\nextern void * dlsym(void * handle, const char *symbol);\nextern const char * dlerror(void);\nextern int dlclose(void * handle);\nextern int dladdr(const void *, Dl_info *);\n#endif\n\n#define RTLD_LAZY\t0x1\n#define RTLD_NOW\t0x2\n#define RTLD_LOCAL\t0x4\n#define RTLD_GLOBAL\t0x8\n#define RTLD_NOLOAD\t0x10\n#define RTLD_NODELETE\t0x80\n\n/* These are from the Mac OS X 10.4 headers */\n#define RTLD_NEXT       ((void *) -1)   /* Search subsequent objects. */\n#define RTLD_DEFAULT    ((void *) -2)   /* Use default search algorithm. */\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif /* _DLFCN_H_ */\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Modules/_ctypes/darwin/dlfcn_simple.c": "/*\nCopyright (c) 2002 Peter O'Gorman <ogorman@users.sourceforge.net>\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n/* Just to prove that it isn't that hard to add Mac calls to your code :)\n   This works with pretty much everything, including kde3 xemacs and the gimp,\n   I'd guess that it'd work in at least 95% of cases, use this as your starting\n   point, rather than the mess that is dlfcn.c, assuming that your code does not\n   require ref counting or symbol lookups in dependent libraries\n*/\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <stdarg.h>\n#include <limits.h>\n#include <mach-o/dyld.h>\n#include <AvailabilityMacros.h>\n#include \"dlfcn.h\"\n\n#ifdef CTYPES_DARWIN_DLFCN\n\n#define ERR_STR_LEN 256\n\n#ifndef MAC_OS_X_VERSION_10_3\n#define MAC_OS_X_VERSION_10_3 1030\n#endif\n\n#if MAC_OS_X_VERSION_MAX_ALLOWED >= MAC_OS_X_VERSION_10_3\n#define DARWIN_HAS_DLOPEN\nextern void * dlopen(const char *path, int mode) __attribute__((weak_import));\nextern void * dlsym(void * handle, const char *symbol) __attribute__((weak_import));\nextern const char * dlerror(void) __attribute__((weak_import));\nextern int dlclose(void * handle) __attribute__((weak_import));\nextern int dladdr(const void *, Dl_info *) __attribute__((weak_import));\n#endif /* MAC_OS_X_VERSION_MAX_ALLOWED >= MAC_OS_X_VERSION_10_3 */\n\n#ifndef DARWIN_HAS_DLOPEN\n#define dlopen darwin_dlopen\n#define dlsym darwin_dlsym\n#define dlerror darwin_dlerror\n#define dlclose darwin_dlclose\n#define dladdr darwin_dladdr\n#endif\n\nvoid * (*ctypes_dlopen)(const char *path, int mode);\nvoid * (*ctypes_dlsym)(void * handle, const char *symbol);\nconst char * (*ctypes_dlerror)(void);\nint (*ctypes_dlclose)(void * handle);\nint (*ctypes_dladdr)(const void *, Dl_info *);\n\n#if MAC_OS_X_VERSION_MIN_REQUIRED < MAC_OS_X_VERSION_10_3\n/* Mac OS X 10.3+ has dlopen, so strip all this dead code to avoid warnings */\n\nstatic void *dlsymIntern(void *handle, const char *symbol);\n\nstatic const char *error(int setget, const char *str, ...);\n\n/* Set and get the error string for use by dlerror */\nstatic const char *error(int setget, const char *str, ...)\n{\n    static char errstr[ERR_STR_LEN];\n    static int err_filled = 0;\n    const char *retval;\n    va_list arg;\n    if (setget == 0)\n    {\n        va_start(arg, str);\n        strncpy(errstr, \"dlcompat: \", ERR_STR_LEN);\n        vsnprintf(errstr + 10, ERR_STR_LEN - 10, str, arg);\n        va_end(arg);\n        err_filled = 1;\n        retval = NULL;\n    }\n    else\n    {\n        if (!err_filled)\n            retval = NULL;\n        else\n            retval = errstr;\n        err_filled = 0;\n    }\n    return retval;\n}\n\n/* darwin_dlopen */\nstatic void *darwin_dlopen(const char *path, int mode)\n{\n    void *module = 0;\n    NSObjectFileImage ofi = 0;\n    NSObjectFileImageReturnCode ofirc;\n\n    /* If we got no path, the app wants the global namespace, use -1 as the marker\n       in this case */\n    if (!path)\n        return (void *)-1;\n\n    /* Create the object file image, works for things linked with the -bundle arg to ld */\n    ofirc = NSCreateObjectFileImageFromFile(path, &ofi);\n    switch (ofirc)\n    {\n        case NSObjectFileImageSuccess:\n            /* It was okay, so use NSLinkModule to link in the image */\n            module = NSLinkModule(ofi, path,\n                                                      NSLINKMODULE_OPTION_RETURN_ON_ERROR\n                                                      | (mode & RTLD_GLOBAL) ? 0 : NSLINKMODULE_OPTION_PRIVATE\n                                                      | (mode & RTLD_LAZY) ? 0 : NSLINKMODULE_OPTION_BINDNOW);\n            NSDestroyObjectFileImage(ofi);\n            break;\n        case NSObjectFileImageInappropriateFile:\n            /* It may have been a dynamic library rather than a bundle, try to load it */\n            module = (void *)NSAddImage(path, NSADDIMAGE_OPTION_RETURN_ON_ERROR);\n            break;\n        default:\n            /* God knows what we got */\n            error(0, \"Can not open \\\"%s\\\"\", path);\n            return 0;\n    }\n    if (!module)\n        error(0, \"Can not open \\\"%s\\\"\", path);\n    return module;\n\n}\n\n/* dlsymIntern is used by dlsym to find the symbol */\nstatic void *dlsymIntern(void *handle, const char *symbol)\n{\n    NSSymbol nssym = 0;\n    /* If the handle is -1, if is the app global context */\n    if (handle == (void *)-1)\n    {\n        /* Global context, use NSLookupAndBindSymbol */\n        if (NSIsSymbolNameDefined(symbol))\n        {\n            nssym = NSLookupAndBindSymbol(symbol);\n        }\n\n    }\n    /* Now see if the handle is a struch mach_header* or not, use NSLookupSymbol in image\n       for libraries, and NSLookupSymbolInModule for bundles */\n    else\n    {\n        /* Check for both possible magic numbers depending on x86/ppc byte order */\n        if ((((struct mach_header *)handle)->magic == MH_MAGIC) ||\n            (((struct mach_header *)handle)->magic == MH_CIGAM))\n        {\n            if (NSIsSymbolNameDefinedInImage((struct mach_header *)handle, symbol))\n            {\n                nssym = NSLookupSymbolInImage((struct mach_header *)handle,\n                                                                          symbol,\n                                                                          NSLOOKUPSYMBOLINIMAGE_OPTION_BIND\n                                                                          | NSLOOKUPSYMBOLINIMAGE_OPTION_RETURN_ON_ERROR);\n            }\n\n        }\n        else\n        {\n            nssym = NSLookupSymbolInModule(handle, symbol);\n        }\n    }\n    if (!nssym)\n    {\n        error(0, \"Symbol \\\"%s\\\" Not found\", symbol);\n        return NULL;\n    }\n    return NSAddressOfSymbol(nssym);\n}\n\nstatic const char *darwin_dlerror(void)\n{\n    return error(1, (char *)NULL);\n}\n\nstatic int darwin_dlclose(void *handle)\n{\n    if ((((struct mach_header *)handle)->magic == MH_MAGIC) ||\n        (((struct mach_header *)handle)->magic == MH_CIGAM))\n    {\n        error(0, \"Can't remove dynamic libraries on darwin\");\n        return 0;\n    }\n    if (!NSUnLinkModule(handle, 0))\n    {\n        error(0, \"unable to unlink module %s\", NSNameOfModule(handle));\n        return 1;\n    }\n    return 0;\n}\n\n\n/* dlsym, prepend the underscore and call dlsymIntern */\nstatic void *darwin_dlsym(void *handle, const char *symbol)\n{\n    static char undersym[257];          /* Saves calls to malloc(3) */\n    int sym_len = strlen(symbol);\n    void *value = NULL;\n    char *malloc_sym = NULL;\n\n    if (sym_len < 256)\n    {\n        snprintf(undersym, 256, \"_%s\", symbol);\n        value = dlsymIntern(handle, undersym);\n    }\n    else\n    {\n        malloc_sym = malloc(sym_len + 2);\n        if (malloc_sym)\n        {\n            sprintf(malloc_sym, \"_%s\", symbol);\n            value = dlsymIntern(handle, malloc_sym);\n            free(malloc_sym);\n        }\n        else\n        {\n            error(0, \"Unable to allocate memory\");\n        }\n    }\n    return value;\n}\n\nstatic int darwin_dladdr(const void *handle, Dl_info *info) {\n    return 0;\n}\n#endif /* MAC_OS_X_VERSION_MIN_REQUIRED < MAC_OS_X_VERSION_10_3 */\n\n#if __GNUC__ < 4\n#pragma CALL_ON_LOAD ctypes_dlfcn_init\n#else\nstatic void __attribute__ ((constructor)) ctypes_dlfcn_init(void);\nstatic\n#endif\nvoid ctypes_dlfcn_init(void) {\n    if (dlopen != NULL) {\n        ctypes_dlsym = dlsym;\n        ctypes_dlopen = dlopen;\n        ctypes_dlerror = dlerror;\n        ctypes_dlclose = dlclose;\n        ctypes_dladdr = dladdr;\n    } else {\n#if MAC_OS_X_VERSION_MIN_REQUIRED < MAC_OS_X_VERSION_10_3\n        ctypes_dlsym = darwin_dlsym;\n        ctypes_dlopen = darwin_dlopen;\n        ctypes_dlerror = darwin_dlerror;\n        ctypes_dlclose = darwin_dlclose;\n        ctypes_dladdr = darwin_dladdr;\n#endif /* MAC_OS_X_VERSION_MIN_REQUIRED < MAC_OS_X_VERSION_10_3 */\n    }\n}\n\n#endif /* CTYPES_DARWIN_DLFCN */\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/os.rst": ":mod:`os` --- Miscellaneous operating system interfaces\n=======================================================\n\n.. module:: os\n   :synopsis: Miscellaneous operating system interfaces.\n\n**Source code:** :source:`Lib/os.py`\n\n--------------\n\nThis module provides a portable way of using operating system dependent\nfunctionality.  If you just want to read or write a file see :func:`open`, if\nyou want to manipulate paths, see the :mod:`os.path` module, and if you want to\nread all the lines in all the files on the command line see the :mod:`fileinput`\nmodule.  For creating temporary files and directories see the :mod:`tempfile`\nmodule, and for high-level file and directory handling see the :mod:`shutil`\nmodule.\n\nNotes on the availability of these functions:\n\n* The design of all built-in operating system dependent modules of Python is\n  such that as long as the same functionality is available, it uses the same\n  interface; for example, the function ``os.stat(path)`` returns stat\n  information about *path* in the same format (which happens to have originated\n  with the POSIX interface).\n\n* Extensions peculiar to a particular operating system are also available\n  through the :mod:`os` module, but using them is of course a threat to\n  portability.\n\n* All functions accepting path or file names accept both bytes and string\n  objects, and result in an object of the same type, if a path or file name is\n  returned.\n\n* On VxWorks, os.fork, os.execv and os.spawn*p* are not supported.\n\n.. note::\n\n   All functions in this module raise :exc:`OSError` (or subclasses thereof) in\n   the case of invalid or inaccessible file names and paths, or other arguments\n   that have the correct type, but are not accepted by the operating system.\n\n.. exception:: error\n\n   An alias for the built-in :exc:`OSError` exception.\n\n\n.. data:: name\n\n   The name of the operating system dependent module imported.  The following\n   names have currently been registered: ``'posix'``, ``'nt'``,\n   ``'java'``.\n\n   .. seealso::\n      :attr:`sys.platform` has a finer granularity.  :func:`os.uname` gives\n      system-dependent version information.\n\n      The :mod:`platform` module provides detailed checks for the\n      system's identity.\n\n\n.. _os-filenames:\n.. _filesystem-encoding:\n\nFile Names, Command Line Arguments, and Environment Variables\n-------------------------------------------------------------\n\nIn Python, file names, command line arguments, and environment variables are\nrepresented using the string type. On some systems, decoding these strings to\nand from bytes is necessary before passing them to the operating system. Python\nuses the file system encoding to perform this conversion (see\n:func:`sys.getfilesystemencoding`).\n\n.. versionchanged:: 3.1\n   On some systems, conversion using the file system encoding may fail. In this\n   case, Python uses the :ref:`surrogateescape encoding error handler\n   <surrogateescape>`, which means that undecodable bytes are replaced by a\n   Unicode character U+DCxx on decoding, and these are again translated to the\n   original byte on encoding.\n\n\nThe file system encoding must guarantee to successfully decode all bytes\nbelow 128. If the file system encoding fails to provide this guarantee, API\nfunctions may raise UnicodeErrors.\n\n\n.. _os-procinfo:\n\nProcess Parameters\n------------------\n\nThese functions and data items provide information and operate on the current\nprocess and user.\n\n\n.. function:: ctermid()\n\n   Return the filename corresponding to the controlling terminal of the process.\n\n   .. availability:: Unix.\n\n\n.. data:: environ\n\n   A :term:`mapping` object representing the string environment. For example,\n   ``environ['HOME']`` is the pathname of your home directory (on some platforms),\n   and is equivalent to ``getenv(\"HOME\")`` in C.\n\n   This mapping is captured the first time the :mod:`os` module is imported,\n   typically during Python startup as part of processing :file:`site.py`.  Changes\n   to the environment made after this time are not reflected in ``os.environ``,\n   except for changes made by modifying ``os.environ`` directly.\n\n   If the platform supports the :func:`putenv` function, this mapping may be used\n   to modify the environment as well as query the environment.  :func:`putenv` will\n   be called automatically when the mapping is modified.\n\n   On Unix, keys and values use :func:`sys.getfilesystemencoding` and\n   ``'surrogateescape'`` error handler. Use :data:`environb` if you would like\n   to use a different encoding.\n\n   .. note::\n\n      Calling :func:`putenv` directly does not change ``os.environ``, so it's better\n      to modify ``os.environ``.\n\n   .. note::\n\n      On some platforms, including FreeBSD and Mac OS X, setting ``environ`` may\n      cause memory leaks.  Refer to the system documentation for\n      :c:func:`putenv`.\n\n   If :func:`putenv` is not provided, a modified copy of this mapping  may be\n   passed to the appropriate process-creation functions to cause  child processes\n   to use a modified environment.\n\n   If the platform supports the :func:`unsetenv` function, you can delete items in\n   this mapping to unset environment variables. :func:`unsetenv` will be called\n   automatically when an item is deleted from ``os.environ``, and when\n   one of the :meth:`pop` or :meth:`clear` methods is called.\n\n\n.. data:: environb\n\n   Bytes version of :data:`environ`: a :term:`mapping` object representing the\n   environment as byte strings. :data:`environ` and :data:`environb` are\n   synchronized (modify :data:`environb` updates :data:`environ`, and vice\n   versa).\n\n   :data:`environb` is only available if :data:`supports_bytes_environ` is\n   ``True``.\n\n   .. versionadded:: 3.2\n\n\n.. function:: chdir(path)\n              fchdir(fd)\n              getcwd()\n   :noindex:\n\n   These functions are described in :ref:`os-file-dir`.\n\n\n.. function:: fsencode(filename)\n\n   Encode :term:`path-like <path-like object>` *filename* to the filesystem\n   encoding with ``'surrogateescape'`` error handler, or ``'strict'`` on\n   Windows; return :class:`bytes` unchanged.\n\n   :func:`fsdecode` is the reverse function.\n\n   .. versionadded:: 3.2\n\n   .. versionchanged:: 3.6\n      Support added to accept objects implementing the :class:`os.PathLike`\n      interface.\n\n\n.. function:: fsdecode(filename)\n\n   Decode the :term:`path-like <path-like object>` *filename* from the\n   filesystem encoding with ``'surrogateescape'`` error handler, or ``'strict'``\n   on Windows; return :class:`str` unchanged.\n\n   :func:`fsencode` is the reverse function.\n\n   .. versionadded:: 3.2\n\n   .. versionchanged:: 3.6\n      Support added to accept objects implementing the :class:`os.PathLike`\n      interface.\n\n\n.. function:: fspath(path)\n\n   Return the file system representation of the path.\n\n   If :class:`str` or :class:`bytes` is passed in, it is returned unchanged.\n   Otherwise :meth:`~os.PathLike.__fspath__` is called and its value is\n   returned as long as it is a :class:`str` or :class:`bytes` object.\n   In all other cases, :exc:`TypeError` is raised.\n\n   .. versionadded:: 3.6\n\n\n.. class:: PathLike\n\n   An :term:`abstract base class` for objects representing a file system path,\n   e.g. :class:`pathlib.PurePath`.\n\n   .. versionadded:: 3.6\n\n   .. abstractmethod:: __fspath__()\n\n      Return the file system path representation of the object.\n\n      The method should only return a :class:`str` or :class:`bytes` object,\n      with the preference being for :class:`str`.\n\n\n.. function:: getenv(key, default=None)\n\n   Return the value of the environment variable *key* if it exists, or\n   *default* if it doesn't. *key*, *default* and the result are str.\n\n   On Unix, keys and values are decoded with :func:`sys.getfilesystemencoding`\n   and ``'surrogateescape'`` error handler. Use :func:`os.getenvb` if you\n   would like to use a different encoding.\n\n   .. availability:: most flavors of Unix, Windows.\n\n\n.. function:: getenvb(key, default=None)\n\n   Return the value of the environment variable *key* if it exists, or\n   *default* if it doesn't. *key*, *default* and the result are bytes.\n\n   :func:`getenvb` is only available if :data:`supports_bytes_environ`\n   is ``True``.\n\n   .. availability:: most flavors of Unix.\n\n   .. versionadded:: 3.2\n\n\n.. function:: get_exec_path(env=None)\n\n   Returns the list of directories that will be searched for a named\n   executable, similar to a shell, when launching a process.\n   *env*, when specified, should be an environment variable dictionary\n   to lookup the PATH in.\n   By default, when *env* is ``None``, :data:`environ` is used.\n\n   .. versionadded:: 3.2\n\n\n.. function:: getegid()\n\n   Return the effective group id of the current process.  This corresponds to the\n   \"set id\" bit on the file being executed in the current process.\n\n   .. availability:: Unix.\n\n\n.. function:: geteuid()\n\n   .. index:: single: user; effective id\n\n   Return the current process's effective user id.\n\n   .. availability:: Unix.\n\n\n.. function:: getgid()\n\n   .. index:: single: process; group\n\n   Return the real group id of the current process.\n\n   .. availability:: Unix.\n\n\n.. function:: getgrouplist(user, group)\n\n   Return list of group ids that *user* belongs to. If *group* is not in the\n   list, it is included; typically, *group* is specified as the group ID\n   field from the password record for *user*.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: getgroups()\n\n   Return list of supplemental group ids associated with the current process.\n\n   .. availability:: Unix.\n\n   .. note::\n\n      On Mac OS X, :func:`getgroups` behavior differs somewhat from\n      other Unix platforms. If the Python interpreter was built with a\n      deployment target of :const:`10.5` or earlier, :func:`getgroups` returns\n      the list of effective group ids associated with the current user process;\n      this list is limited to a system-defined number of entries, typically 16,\n      and may be modified by calls to :func:`setgroups` if suitably privileged.\n      If built with a deployment target greater than :const:`10.5`,\n      :func:`getgroups` returns the current group access list for the user\n      associated with the effective user id of the process; the group access\n      list may change over the lifetime of the process, it is not affected by\n      calls to :func:`setgroups`, and its length is not limited to 16.  The\n      deployment target value, :const:`MACOSX_DEPLOYMENT_TARGET`, can be\n      obtained with :func:`sysconfig.get_config_var`.\n\n\n.. function:: getlogin()\n\n   Return the name of the user logged in on the controlling terminal of the\n   process.  For most purposes, it is more useful to use\n   :func:`getpass.getuser` since the latter checks the environment variables\n   :envvar:`LOGNAME` or :envvar:`USERNAME` to find out who the user is, and\n   falls back to ``pwd.getpwuid(os.getuid())[0]`` to get the login name of the\n   current real user id.\n\n   .. availability:: Unix, Windows.\n\n\n.. function:: getpgid(pid)\n\n   Return the process group id of the process with process id *pid*. If *pid* is 0,\n   the process group id of the current process is returned.\n\n   .. availability:: Unix.\n\n.. function:: getpgrp()\n\n   .. index:: single: process; group\n\n   Return the id of the current process group.\n\n   .. availability:: Unix.\n\n\n.. function:: getpid()\n\n   .. index:: single: process; id\n\n   Return the current process id.\n\n\n.. function:: getppid()\n\n   .. index:: single: process; id of parent\n\n   Return the parent's process id.  When the parent process has exited, on Unix\n   the id returned is the one of the init process (1), on Windows it is still\n   the same id, which may be already reused by another process.\n\n   .. availability:: Unix, Windows.\n\n   .. versionchanged:: 3.2\n      Added support for Windows.\n\n\n.. function:: getpriority(which, who)\n\n   .. index:: single: process; scheduling priority\n\n   Get program scheduling priority.  The value *which* is one of\n   :const:`PRIO_PROCESS`, :const:`PRIO_PGRP`, or :const:`PRIO_USER`, and *who*\n   is interpreted relative to *which* (a process identifier for\n   :const:`PRIO_PROCESS`, process group identifier for :const:`PRIO_PGRP`, and a\n   user ID for :const:`PRIO_USER`).  A zero value for *who* denotes\n   (respectively) the calling process, the process group of the calling process,\n   or the real user ID of the calling process.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. data:: PRIO_PROCESS\n          PRIO_PGRP\n          PRIO_USER\n\n   Parameters for the :func:`getpriority` and :func:`setpriority` functions.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: getresuid()\n\n   Return a tuple (ruid, euid, suid) denoting the current process's\n   real, effective, and saved user ids.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.2\n\n\n.. function:: getresgid()\n\n   Return a tuple (rgid, egid, sgid) denoting the current process's\n   real, effective, and saved group ids.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.2\n\n\n.. function:: getuid()\n\n   .. index:: single: user; id\n\n   Return the current process's real user id.\n\n   .. availability:: Unix.\n\n\n.. function:: initgroups(username, gid)\n\n   Call the system initgroups() to initialize the group access list with all of\n   the groups of which the specified username is a member, plus the specified\n   group id.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.2\n\n\n.. function:: putenv(key, value)\n\n   .. index:: single: environment variables; setting\n\n   Set the environment variable named *key* to the string *value*.  Such\n   changes to the environment affect subprocesses started with :func:`os.system`,\n   :func:`popen` or :func:`fork` and :func:`execv`.\n\n   .. availability:: most flavors of Unix, Windows.\n\n   .. note::\n\n      On some platforms, including FreeBSD and Mac OS X, setting ``environ`` may\n      cause memory leaks. Refer to the system documentation for putenv.\n\n   When :func:`putenv` is supported, assignments to items in ``os.environ`` are\n   automatically translated into corresponding calls to :func:`putenv`; however,\n   calls to :func:`putenv` don't update ``os.environ``, so it is actually\n   preferable to assign to items of ``os.environ``.\n\n   .. audit-event:: os.putenv key,value os.putenv\n\n\n.. function:: setegid(egid)\n\n   Set the current process's effective group id.\n\n   .. availability:: Unix.\n\n\n.. function:: seteuid(euid)\n\n   Set the current process's effective user id.\n\n   .. availability:: Unix.\n\n\n.. function:: setgid(gid)\n\n   Set the current process' group id.\n\n   .. availability:: Unix.\n\n\n.. function:: setgroups(groups)\n\n   Set the list of supplemental group ids associated with the current process to\n   *groups*. *groups* must be a sequence, and each element must be an integer\n   identifying a group. This operation is typically available only to the superuser.\n\n   .. availability:: Unix.\n\n   .. note:: On Mac OS X, the length of *groups* may not exceed the\n      system-defined maximum number of effective group ids, typically 16.\n      See the documentation for :func:`getgroups` for cases where it may not\n      return the same group list set by calling setgroups().\n\n.. function:: setpgrp()\n\n   Call the system call :c:func:`setpgrp` or ``setpgrp(0, 0)`` depending on\n   which version is implemented (if any).  See the Unix manual for the semantics.\n\n   .. availability:: Unix.\n\n\n.. function:: setpgid(pid, pgrp)\n\n   Call the system call :c:func:`setpgid` to set the process group id of the\n   process with id *pid* to the process group with id *pgrp*.  See the Unix manual\n   for the semantics.\n\n   .. availability:: Unix.\n\n\n.. function:: setpriority(which, who, priority)\n\n   .. index:: single: process; scheduling priority\n\n   Set program scheduling priority. The value *which* is one of\n   :const:`PRIO_PROCESS`, :const:`PRIO_PGRP`, or :const:`PRIO_USER`, and *who*\n   is interpreted relative to *which* (a process identifier for\n   :const:`PRIO_PROCESS`, process group identifier for :const:`PRIO_PGRP`, and a\n   user ID for :const:`PRIO_USER`). A zero value for *who* denotes\n   (respectively) the calling process, the process group of the calling process,\n   or the real user ID of the calling process.\n   *priority* is a value in the range -20 to 19. The default priority is 0;\n   lower priorities cause more favorable scheduling.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: setregid(rgid, egid)\n\n   Set the current process's real and effective group ids.\n\n   .. availability:: Unix.\n\n\n.. function:: setresgid(rgid, egid, sgid)\n\n   Set the current process's real, effective, and saved group ids.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.2\n\n\n.. function:: setresuid(ruid, euid, suid)\n\n   Set the current process's real, effective, and saved user ids.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.2\n\n\n.. function:: setreuid(ruid, euid)\n\n   Set the current process's real and effective user ids.\n\n   .. availability:: Unix.\n\n\n.. function:: getsid(pid)\n\n   Call the system call :c:func:`getsid`.  See the Unix manual for the semantics.\n\n   .. availability:: Unix.\n\n\n.. function:: setsid()\n\n   Call the system call :c:func:`setsid`.  See the Unix manual for the semantics.\n\n   .. availability:: Unix.\n\n\n.. function:: setuid(uid)\n\n   .. index:: single: user; id, setting\n\n   Set the current process's user id.\n\n   .. availability:: Unix.\n\n\n.. placed in this section since it relates to errno.... a little weak\n.. function:: strerror(code)\n\n   Return the error message corresponding to the error code in *code*.\n   On platforms where :c:func:`strerror` returns ``NULL`` when given an unknown\n   error number, :exc:`ValueError` is raised.\n\n\n.. data:: supports_bytes_environ\n\n   ``True`` if the native OS type of the environment is bytes (eg. ``False`` on\n   Windows).\n\n   .. versionadded:: 3.2\n\n\n.. function:: umask(mask)\n\n   Set the current numeric umask and return the previous umask.\n\n\n.. function:: uname()\n\n   .. index::\n      single: gethostname() (in module socket)\n      single: gethostbyaddr() (in module socket)\n\n   Returns information identifying the current operating system.\n   The return value is an object with five attributes:\n\n   * :attr:`sysname` - operating system name\n   * :attr:`nodename` - name of machine on network (implementation-defined)\n   * :attr:`release` - operating system release\n   * :attr:`version` - operating system version\n   * :attr:`machine` - hardware identifier\n\n   For backwards compatibility, this object is also iterable, behaving\n   like a five-tuple containing :attr:`sysname`, :attr:`nodename`,\n   :attr:`release`, :attr:`version`, and :attr:`machine`\n   in that order.\n\n   Some systems truncate :attr:`nodename` to 8 characters or to the\n   leading component; a better way to get the hostname is\n   :func:`socket.gethostname`  or even\n   ``socket.gethostbyaddr(socket.gethostname())``.\n\n   .. availability:: recent flavors of Unix.\n\n   .. versionchanged:: 3.3\n      Return type changed from a tuple to a tuple-like object\n      with named attributes.\n\n\n.. function:: unsetenv(key)\n\n   .. index:: single: environment variables; deleting\n\n   Unset (delete) the environment variable named *key*. Such changes to the\n   environment affect subprocesses started with :func:`os.system`, :func:`popen` or\n   :func:`fork` and :func:`execv`.\n\n   When :func:`unsetenv` is supported, deletion of items in ``os.environ`` is\n   automatically translated into a corresponding call to :func:`unsetenv`; however,\n   calls to :func:`unsetenv` don't update ``os.environ``, so it is actually\n   preferable to delete items of ``os.environ``.\n\n   .. audit-event:: os.unsetenv key os.unsetenv\n\n   .. availability:: most flavors of Unix.\n\n\n.. _os-newstreams:\n\nFile Object Creation\n--------------------\n\nThese functions create new :term:`file objects <file object>`.  (See also\n:func:`~os.open` for opening file descriptors.)\n\n\n.. function:: fdopen(fd, *args, **kwargs)\n\n   Return an open file object connected to the file descriptor *fd*.  This is an\n   alias of the :func:`open` built-in function and accepts the same arguments.\n   The only difference is that the first argument of :func:`fdopen` must always\n   be an integer.\n\n\n.. _os-fd-ops:\n\nFile Descriptor Operations\n--------------------------\n\nThese functions operate on I/O streams referenced using file descriptors.\n\nFile descriptors are small integers corresponding to a file that has been opened\nby the current process.  For example, standard input is usually file descriptor\n0, standard output is 1, and standard error is 2.  Further files opened by a\nprocess will then be assigned 3, 4, 5, and so forth.  The name \"file descriptor\"\nis slightly deceptive; on Unix platforms, sockets and pipes are also referenced\nby file descriptors.\n\nThe :meth:`~io.IOBase.fileno` method can be used to obtain the file descriptor\nassociated with a :term:`file object` when required.  Note that using the file\ndescriptor directly will bypass the file object methods, ignoring aspects such\nas internal buffering of data.\n\n\n.. function:: close(fd)\n\n   Close file descriptor *fd*.\n\n   .. note::\n\n      This function is intended for low-level I/O and must be applied to a file\n      descriptor as returned by :func:`os.open` or :func:`pipe`.  To close a \"file\n      object\" returned by the built-in function :func:`open` or by :func:`popen` or\n      :func:`fdopen`, use its :meth:`~io.IOBase.close` method.\n\n\n.. function:: closerange(fd_low, fd_high)\n\n   Close all file descriptors from *fd_low* (inclusive) to *fd_high* (exclusive),\n   ignoring errors. Equivalent to (but much faster than)::\n\n      for fd in range(fd_low, fd_high):\n          try:\n              os.close(fd)\n          except OSError:\n              pass\n\n\n.. function:: copy_file_range(src, dst, count, offset_src=None, offset_dst=None)\n\n   Copy *count* bytes from file descriptor *src*, starting from offset\n   *offset_src*, to file descriptor *dst*, starting from offset *offset_dst*.\n   If *offset_src* is None, then *src* is read from the current position;\n   respectively for *offset_dst*. The files pointed by *src* and *dst*\n   must reside in the same filesystem, otherwise an :exc:`OSError` is\n   raised with :attr:`~OSError.errno` set to :data:`errno.EXDEV`.\n\n   This copy is done without the additional cost of transferring data\n   from the kernel to user space and then back into the kernel. Additionally,\n   some filesystems could implement extra optimizations. The copy is done as if\n   both files are opened as binary.\n\n   The return value is the amount of bytes copied. This could be less than the\n   amount requested.\n\n   .. availability:: Linux kernel >= 4.5 or glibc >= 2.27.\n\n   .. versionadded:: 3.8\n\n\n.. function:: device_encoding(fd)\n\n   Return a string describing the encoding of the device associated with *fd*\n   if it is connected to a terminal; else return :const:`None`.\n\n\n.. function:: dup(fd)\n\n   Return a duplicate of file descriptor *fd*. The new file descriptor is\n   :ref:`non-inheritable <fd_inheritance>`.\n\n   On Windows, when duplicating a standard stream (0: stdin, 1: stdout,\n   2: stderr), the new file descriptor is :ref:`inheritable\n   <fd_inheritance>`.\n\n   .. versionchanged:: 3.4\n      The new file descriptor is now non-inheritable.\n\n\n.. function:: dup2(fd, fd2, inheritable=True)\n\n   Duplicate file descriptor *fd* to *fd2*, closing the latter first if\n   necessary. Return *fd2*. The new file descriptor is :ref:`inheritable\n   <fd_inheritance>` by default or non-inheritable if *inheritable*\n   is ``False``.\n\n   .. versionchanged:: 3.4\n      Add the optional *inheritable* parameter.\n\n   .. versionchanged:: 3.7\n      Return *fd2* on success. Previously, ``None`` was always returned.\n\n\n.. function:: fchmod(fd, mode)\n\n   Change the mode of the file given by *fd* to the numeric *mode*.  See the\n   docs for :func:`chmod` for possible values of *mode*.  As of Python 3.3, this\n   is equivalent to ``os.chmod(fd, mode)``.\n\n   .. audit-event:: os.chmod path,mode,dir_fd os.fchmod\n\n   .. availability:: Unix.\n\n\n.. function:: fchown(fd, uid, gid)\n\n   Change the owner and group id of the file given by *fd* to the numeric *uid*\n   and *gid*.  To leave one of the ids unchanged, set it to -1.  See\n   :func:`chown`.  As of Python 3.3, this is equivalent to ``os.chown(fd, uid,\n   gid)``.\n\n   .. audit-event:: os.chown path,uid,gid,dir_fd os.fchown\n\n   .. availability:: Unix.\n\n\n.. function:: fdatasync(fd)\n\n   Force write of file with filedescriptor *fd* to disk. Does not force update of\n   metadata.\n\n   .. availability:: Unix.\n\n   .. note::\n      This function is not available on MacOS.\n\n\n.. function:: fpathconf(fd, name)\n\n   Return system configuration information relevant to an open file. *name*\n   specifies the configuration value to retrieve; it may be a string which is the\n   name of a defined system value; these names are specified in a number of\n   standards (POSIX.1, Unix 95, Unix 98, and others).  Some platforms define\n   additional names as well.  The names known to the host operating system are\n   given in the ``pathconf_names`` dictionary.  For configuration variables not\n   included in that mapping, passing an integer for *name* is also accepted.\n\n   If *name* is a string and is not known, :exc:`ValueError` is raised.  If a\n   specific value for *name* is not supported by the host system, even if it is\n   included in ``pathconf_names``, an :exc:`OSError` is raised with\n   :const:`errno.EINVAL` for the error number.\n\n   As of Python 3.3, this is equivalent to ``os.pathconf(fd, name)``.\n\n   .. availability:: Unix.\n\n\n.. function:: fstat(fd)\n\n   Get the status of the file descriptor *fd*. Return a :class:`stat_result`\n   object.\n\n   As of Python 3.3, this is equivalent to ``os.stat(fd)``.\n\n   .. seealso::\n\n      The :func:`.stat` function.\n\n\n.. function:: fstatvfs(fd)\n\n   Return information about the filesystem containing the file associated with\n   file descriptor *fd*, like :func:`statvfs`.  As of Python 3.3, this is\n   equivalent to ``os.statvfs(fd)``.\n\n   .. availability:: Unix.\n\n\n.. function:: fsync(fd)\n\n   Force write of file with filedescriptor *fd* to disk.  On Unix, this calls the\n   native :c:func:`fsync` function; on Windows, the MS :c:func:`_commit` function.\n\n   If you're starting with a buffered Python :term:`file object` *f*, first do\n   ``f.flush()``, and then do ``os.fsync(f.fileno())``, to ensure that all internal\n   buffers associated with *f* are written to disk.\n\n   .. availability:: Unix, Windows.\n\n\n.. function:: ftruncate(fd, length)\n\n   Truncate the file corresponding to file descriptor *fd*, so that it is at\n   most *length* bytes in size.  As of Python 3.3, this is equivalent to\n   ``os.truncate(fd, length)``.\n\n   .. audit-event:: os.truncate fd,length os.ftruncate\n\n   .. availability:: Unix, Windows.\n\n   .. versionchanged:: 3.5\n      Added support for Windows\n\n\n.. function:: get_blocking(fd)\n\n   Get the blocking mode of the file descriptor: ``False`` if the\n   :data:`O_NONBLOCK` flag is set, ``True`` if the flag is cleared.\n\n   See also :func:`set_blocking` and :meth:`socket.socket.setblocking`.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.5\n\n\n.. function:: isatty(fd)\n\n   Return ``True`` if the file descriptor *fd* is open and connected to a\n   tty(-like) device, else ``False``.\n\n\n.. function:: lockf(fd, cmd, len)\n\n   Apply, test or remove a POSIX lock on an open file descriptor.\n   *fd* is an open file descriptor.\n   *cmd* specifies the command to use - one of :data:`F_LOCK`, :data:`F_TLOCK`,\n   :data:`F_ULOCK` or :data:`F_TEST`.\n   *len* specifies the section of the file to lock.\n\n   .. audit-event:: os.lockf fd,cmd,len os.lockf\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. data:: F_LOCK\n          F_TLOCK\n          F_ULOCK\n          F_TEST\n\n   Flags that specify what action :func:`lockf` will take.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: lseek(fd, pos, how)\n\n   Set the current position of file descriptor *fd* to position *pos*, modified\n   by *how*: :const:`SEEK_SET` or ``0`` to set the position relative to the\n   beginning of the file; :const:`SEEK_CUR` or ``1`` to set it relative to the\n   current position; :const:`SEEK_END` or ``2`` to set it relative to the end of\n   the file. Return the new cursor position in bytes, starting from the beginning.\n\n\n.. data:: SEEK_SET\n          SEEK_CUR\n          SEEK_END\n\n   Parameters to the :func:`lseek` function. Their values are 0, 1, and 2,\n   respectively.\n\n   .. versionadded:: 3.3\n      Some operating systems could support additional values, like\n      :data:`os.SEEK_HOLE` or :data:`os.SEEK_DATA`.\n\n\n.. function:: open(path, flags, mode=0o777, *, dir_fd=None)\n\n   Open the file *path* and set various flags according to *flags* and possibly\n   its mode according to *mode*.  When computing *mode*, the current umask value\n   is first masked out.  Return the file descriptor for the newly opened file.\n   The new file descriptor is :ref:`non-inheritable <fd_inheritance>`.\n\n   For a description of the flag and mode values, see the C run-time documentation;\n   flag constants (like :const:`O_RDONLY` and :const:`O_WRONLY`) are defined in\n   the :mod:`os` module.  In particular, on Windows adding\n   :const:`O_BINARY` is needed to open files in binary mode.\n\n   This function can support :ref:`paths relative to directory descriptors\n   <dir_fd>` with the *dir_fd* parameter.\n\n   .. audit-event:: open path,mode,flags os.open\n\n   .. versionchanged:: 3.4\n      The new file descriptor is now non-inheritable.\n\n   .. note::\n\n      This function is intended for low-level I/O.  For normal usage, use the\n      built-in function :func:`open`, which returns a :term:`file object` with\n      :meth:`~file.read` and :meth:`~file.write` methods (and many more).  To\n      wrap a file descriptor in a file object, use :func:`fdopen`.\n\n   .. versionadded:: 3.3\n      The *dir_fd* argument.\n\n   .. versionchanged:: 3.5\n      If the system call is interrupted and the signal handler does not raise an\n      exception, the function now retries the system call instead of raising an\n      :exc:`InterruptedError` exception (see :pep:`475` for the rationale).\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\nThe following constants are options for the *flags* parameter to the\n:func:`~os.open` function.  They can be combined using the bitwise OR operator\n``|``.  Some of them are not available on all platforms.  For descriptions of\ntheir availability and use, consult the :manpage:`open(2)` manual page on Unix\nor `the MSDN <https://msdn.microsoft.com/en-us/library/z0kc8e3z.aspx>`_ on Windows.\n\n\n.. data:: O_RDONLY\n          O_WRONLY\n          O_RDWR\n          O_APPEND\n          O_CREAT\n          O_EXCL\n          O_TRUNC\n\n   The above constants are available on Unix and Windows.\n\n\n.. data:: O_DSYNC\n          O_RSYNC\n          O_SYNC\n          O_NDELAY\n          O_NONBLOCK\n          O_NOCTTY\n          O_CLOEXEC\n\n   The above constants are only available on Unix.\n\n   .. versionchanged:: 3.3\n      Add :data:`O_CLOEXEC` constant.\n\n.. data:: O_BINARY\n          O_NOINHERIT\n          O_SHORT_LIVED\n          O_TEMPORARY\n          O_RANDOM\n          O_SEQUENTIAL\n          O_TEXT\n\n   The above constants are only available on Windows.\n\n\n.. data:: O_ASYNC\n          O_DIRECT\n          O_DIRECTORY\n          O_NOFOLLOW\n          O_NOATIME\n          O_PATH\n          O_TMPFILE\n          O_SHLOCK\n          O_EXLOCK\n\n   The above constants are extensions and not present if they are not defined by\n   the C library.\n\n   .. versionchanged:: 3.4\n      Add :data:`O_PATH` on systems that support it.\n      Add :data:`O_TMPFILE`, only available on Linux Kernel 3.11\n        or newer.\n\n\n.. function:: openpty()\n\n   .. index:: module: pty\n\n   Open a new pseudo-terminal pair. Return a pair of file descriptors\n   ``(master, slave)`` for the pty and the tty, respectively. The new file\n   descriptors are :ref:`non-inheritable <fd_inheritance>`. For a (slightly) more\n   portable approach, use the :mod:`pty` module.\n\n   .. availability:: some flavors of Unix.\n\n   .. versionchanged:: 3.4\n      The new file descriptors are now non-inheritable.\n\n\n.. function:: pipe()\n\n   Create a pipe.  Return a pair of file descriptors ``(r, w)`` usable for\n   reading and writing, respectively. The new file descriptor is\n   :ref:`non-inheritable <fd_inheritance>`.\n\n   .. availability:: Unix, Windows.\n\n   .. versionchanged:: 3.4\n      The new file descriptors are now non-inheritable.\n\n\n.. function:: pipe2(flags)\n\n   Create a pipe with *flags* set atomically.\n   *flags* can be constructed by ORing together one or more of these values:\n   :data:`O_NONBLOCK`, :data:`O_CLOEXEC`.\n   Return a pair of file descriptors ``(r, w)`` usable for reading and writing,\n   respectively.\n\n   .. availability:: some flavors of Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: posix_fallocate(fd, offset, len)\n\n   Ensures that enough disk space is allocated for the file specified by *fd*\n   starting from *offset* and continuing for *len* bytes.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: posix_fadvise(fd, offset, len, advice)\n\n   Announces an intention to access data in a specific pattern thus allowing\n   the kernel to make optimizations.\n   The advice applies to the region of the file specified by *fd* starting at\n   *offset* and continuing for *len* bytes.\n   *advice* is one of :data:`POSIX_FADV_NORMAL`, :data:`POSIX_FADV_SEQUENTIAL`,\n   :data:`POSIX_FADV_RANDOM`, :data:`POSIX_FADV_NOREUSE`,\n   :data:`POSIX_FADV_WILLNEED` or :data:`POSIX_FADV_DONTNEED`.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. data:: POSIX_FADV_NORMAL\n          POSIX_FADV_SEQUENTIAL\n          POSIX_FADV_RANDOM\n          POSIX_FADV_NOREUSE\n          POSIX_FADV_WILLNEED\n          POSIX_FADV_DONTNEED\n\n   Flags that can be used in *advice* in :func:`posix_fadvise` that specify\n   the access pattern that is likely to be used.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: pread(fd, n, offset)\n\n   Read at most *n* bytes from file descriptor *fd* at a position of *offset*,\n   leaving the file offset unchanged.\n\n   Return a bytestring containing the bytes read. If the end of the file\n   referred to by *fd* has been reached, an empty bytes object is returned.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: preadv(fd, buffers, offset, flags=0)\n\n   Read from a file descriptor *fd* at a position of *offset* into mutable\n   :term:`bytes-like objects <bytes-like object>` *buffers*, leaving the file\n   offset unchanged.  Transfer data into each buffer until it is full and then\n   move on to the next buffer in the sequence to hold the rest of the data.\n\n   The flags argument contains a bitwise OR of zero or more of the following\n   flags:\n\n   - :data:`RWF_HIPRI`\n   - :data:`RWF_NOWAIT`\n\n   Return the total number of bytes actually read which can be less than the\n   total capacity of all the objects.\n\n   The operating system may set a limit (:func:`sysconf` value\n   ``'SC_IOV_MAX'``) on the number of buffers that can be used.\n\n   Combine the functionality of :func:`os.readv` and :func:`os.pread`.\n\n   .. availability:: Linux 2.6.30 and newer, FreeBSD 6.0 and newer,\n      OpenBSD 2.7 and newer. Using flags requires Linux 4.6 or newer.\n\n   .. versionadded:: 3.7\n\n\n.. data:: RWF_NOWAIT\n\n   Do not wait for data which is not immediately available. If this flag is\n   specified, the system call will return instantly if it would have to read\n   data from the backing storage or wait for a lock.\n\n   If some data was successfully read, it will return the number of bytes read.\n   If no bytes were read, it will return ``-1`` and set errno to\n   :data:`errno.EAGAIN`.\n\n   .. availability:: Linux 4.14 and newer.\n\n   .. versionadded:: 3.7\n\n\n.. data:: RWF_HIPRI\n\n   High priority read/write. Allows block-based filesystems to use polling\n   of the device, which provides lower latency, but may use additional\n   resources.\n\n   Currently, on Linux, this feature is usable only on a file descriptor opened\n   using the :data:`O_DIRECT` flag.\n\n   .. availability:: Linux 4.6 and newer.\n\n   .. versionadded:: 3.7\n\n\n.. function:: pwrite(fd, str, offset)\n\n   Write the bytestring in *str* to file descriptor *fd* at position of\n   *offset*, leaving the file offset unchanged.\n\n   Return the number of bytes actually written.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: pwritev(fd, buffers, offset, flags=0)\n\n   Write the *buffers* contents to file descriptor *fd* at a offset *offset*,\n   leaving the file offset unchanged.  *buffers* must be a sequence of\n   :term:`bytes-like objects <bytes-like object>`. Buffers are processed in\n   array order. Entire contents of the first buffer is written before\n   proceeding to the second, and so on.\n\n   The flags argument contains a bitwise OR of zero or more of the following\n   flags:\n\n   - :data:`RWF_DSYNC`\n   - :data:`RWF_SYNC`\n\n   Return the total number of bytes actually written.\n\n   The operating system may set a limit (:func:`sysconf` value\n   ``'SC_IOV_MAX'``) on the number of buffers that can be used.\n\n   Combine the functionality of :func:`os.writev` and :func:`os.pwrite`.\n\n   .. availability:: Linux 2.6.30 and newer, FreeBSD 6.0 and newer,\n      OpenBSD 2.7 and newer. Using flags requires Linux 4.7 or newer.\n\n   .. versionadded:: 3.7\n\n\n.. data:: RWF_DSYNC\n\n   Provide a per-write equivalent of the :data:`O_DSYNC` ``open(2)`` flag. This\n   flag effect applies only to the data range written by the system call.\n\n   .. availability:: Linux 4.7 and newer.\n\n   .. versionadded:: 3.7\n\n\n.. data:: RWF_SYNC\n\n   Provide a per-write equivalent of the :data:`O_SYNC` ``open(2)`` flag. This\n   flag effect applies only to the data range written by the system call.\n\n   .. availability:: Linux 4.7 and newer.\n\n   .. versionadded:: 3.7\n\n\n.. function:: read(fd, n)\n\n   Read at most *n* bytes from file descriptor *fd*.\n\n   Return a bytestring containing the bytes read. If the end of the file\n   referred to by *fd* has been reached, an empty bytes object is returned.\n\n   .. note::\n\n      This function is intended for low-level I/O and must be applied to a file\n      descriptor as returned by :func:`os.open` or :func:`pipe`.  To read a\n      \"file object\" returned by the built-in function :func:`open` or by\n      :func:`popen` or :func:`fdopen`, or :data:`sys.stdin`, use its\n      :meth:`~file.read` or :meth:`~file.readline` methods.\n\n   .. versionchanged:: 3.5\n      If the system call is interrupted and the signal handler does not raise an\n      exception, the function now retries the system call instead of raising an\n      :exc:`InterruptedError` exception (see :pep:`475` for the rationale).\n\n\n.. function:: sendfile(out, in, offset, count)\n              sendfile(out, in, offset, count, [headers], [trailers], flags=0)\n\n   Copy *count* bytes from file descriptor *in* to file descriptor *out*\n   starting at *offset*.\n   Return the number of bytes sent. When EOF is reached return 0.\n\n   The first function notation is supported by all platforms that define\n   :func:`sendfile`.\n\n   On Linux, if *offset* is given as ``None``, the bytes are read from the\n   current position of *in* and the position of *in* is updated.\n\n   The second case may be used on Mac OS X and FreeBSD where *headers* and\n   *trailers* are arbitrary sequences of buffers that are written before and\n   after the data from *in* is written. It returns the same as the first case.\n\n   On Mac OS X and FreeBSD, a value of 0 for *count* specifies to send until\n   the end of *in* is reached.\n\n   All platforms support sockets as *out* file descriptor, and some platforms\n   allow other types (e.g. regular file, pipe) as well.\n\n   Cross-platform applications should not use *headers*, *trailers* and *flags*\n   arguments.\n\n   .. availability:: Unix.\n\n   .. note::\n\n      For a higher-level wrapper of :func:`sendfile`, see\n      :meth:`socket.socket.sendfile`.\n\n   .. versionadded:: 3.3\n\n\n.. function:: set_blocking(fd, blocking)\n\n   Set the blocking mode of the specified file descriptor. Set the\n   :data:`O_NONBLOCK` flag if blocking is ``False``, clear the flag otherwise.\n\n   See also :func:`get_blocking` and :meth:`socket.socket.setblocking`.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.5\n\n\n.. data:: SF_NODISKIO\n          SF_MNOWAIT\n          SF_SYNC\n\n   Parameters to the :func:`sendfile` function, if the implementation supports\n   them.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: readv(fd, buffers)\n\n   Read from a file descriptor *fd* into a number of mutable :term:`bytes-like\n   objects <bytes-like object>` *buffers*. Transfer data into each buffer until\n   it is full and then move on to the next buffer in the sequence to hold the\n   rest of the data.\n\n   Return the total number of bytes actually read which can be less than the\n   total capacity of all the objects.\n\n   The operating system may set a limit (:func:`sysconf` value\n   ``'SC_IOV_MAX'``) on the number of buffers that can be used.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: tcgetpgrp(fd)\n\n   Return the process group associated with the terminal given by *fd* (an open\n   file descriptor as returned by :func:`os.open`).\n\n   .. availability:: Unix.\n\n\n.. function:: tcsetpgrp(fd, pg)\n\n   Set the process group associated with the terminal given by *fd* (an open file\n   descriptor as returned by :func:`os.open`) to *pg*.\n\n   .. availability:: Unix.\n\n\n.. function:: ttyname(fd)\n\n   Return a string which specifies the terminal device associated with\n   file descriptor *fd*.  If *fd* is not associated with a terminal device, an\n   exception is raised.\n\n   .. availability:: Unix.\n\n\n.. function:: write(fd, str)\n\n   Write the bytestring in *str* to file descriptor *fd*.\n\n   Return the number of bytes actually written.\n\n   .. note::\n\n      This function is intended for low-level I/O and must be applied to a file\n      descriptor as returned by :func:`os.open` or :func:`pipe`.  To write a \"file\n      object\" returned by the built-in function :func:`open` or by :func:`popen` or\n      :func:`fdopen`, or :data:`sys.stdout` or :data:`sys.stderr`, use its\n      :meth:`~file.write` method.\n\n   .. versionchanged:: 3.5\n      If the system call is interrupted and the signal handler does not raise an\n      exception, the function now retries the system call instead of raising an\n      :exc:`InterruptedError` exception (see :pep:`475` for the rationale).\n\n\n.. function:: writev(fd, buffers)\n\n   Write the contents of *buffers* to file descriptor *fd*. *buffers* must be\n   a sequence of :term:`bytes-like objects <bytes-like object>`. Buffers are\n   processed in array order. Entire contents of the first buffer is written\n   before proceeding to the second, and so on.\n\n   Returns the total number of bytes actually written.\n\n   The operating system may set a limit (:func:`sysconf` value\n   ``'SC_IOV_MAX'``) on the number of buffers that can be used.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. _terminal-size:\n\nQuerying the size of a terminal\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n.. versionadded:: 3.3\n\n.. function:: get_terminal_size(fd=STDOUT_FILENO)\n\n   Return the size of the terminal window as ``(columns, lines)``,\n   tuple of type :class:`terminal_size`.\n\n   The optional argument ``fd`` (default ``STDOUT_FILENO``, or standard\n   output) specifies which file descriptor should be queried.\n\n   If the file descriptor is not connected to a terminal, an :exc:`OSError`\n   is raised.\n\n   :func:`shutil.get_terminal_size` is the high-level function which\n   should normally be used, ``os.get_terminal_size`` is the low-level\n   implementation.\n\n   .. availability:: Unix, Windows.\n\n.. class:: terminal_size\n\n   A subclass of tuple, holding ``(columns, lines)`` of the terminal window size.\n\n   .. attribute:: columns\n\n      Width of the terminal window in characters.\n\n   .. attribute:: lines\n\n      Height of the terminal window in characters.\n\n\n.. _fd_inheritance:\n\nInheritance of File Descriptors\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n.. versionadded:: 3.4\n\nA file descriptor has an \"inheritable\" flag which indicates if the file descriptor\ncan be inherited by child processes.  Since Python 3.4, file descriptors\ncreated by Python are non-inheritable by default.\n\nOn UNIX, non-inheritable file descriptors are closed in child processes at the\nexecution of a new program, other file descriptors are inherited.\n\nOn Windows, non-inheritable handles and file descriptors are closed in child\nprocesses, except for standard streams (file descriptors 0, 1 and 2: stdin, stdout\nand stderr), which are always inherited.  Using :func:`spawn\\* <spawnl>` functions,\nall inheritable handles and all inheritable file descriptors are inherited.\nUsing the :mod:`subprocess` module, all file descriptors except standard\nstreams are closed, and inheritable handles are only inherited if the\n*close_fds* parameter is ``False``.\n\n.. function:: get_inheritable(fd)\n\n   Get the \"inheritable\" flag of the specified file descriptor (a boolean).\n\n.. function:: set_inheritable(fd, inheritable)\n\n   Set the \"inheritable\" flag of the specified file descriptor.\n\n.. function:: get_handle_inheritable(handle)\n\n   Get the \"inheritable\" flag of the specified handle (a boolean).\n\n   .. availability:: Windows.\n\n.. function:: set_handle_inheritable(handle, inheritable)\n\n   Set the \"inheritable\" flag of the specified handle.\n\n   .. availability:: Windows.\n\n\n.. _os-file-dir:\n\nFiles and Directories\n---------------------\n\nOn some Unix platforms, many of these functions support one or more of these\nfeatures:\n\n.. _path_fd:\n\n* **specifying a file descriptor:**\n  Normally the *path* argument provided to functions in the :mod:`os` module\n  must be a string specifying a file path.  However, some functions now\n  alternatively accept an open file descriptor for their *path* argument.\n  The function will then operate on the file referred to by the descriptor.\n  (For POSIX systems, Python will call the variant of the function prefixed\n  with ``f`` (e.g. call ``fchdir`` instead of ``chdir``).)\n\n  You can check whether or not *path* can be specified as a file descriptor\n  for a particular function on your platform using :data:`os.supports_fd`.\n  If this functionality is unavailable, using it will raise a\n  :exc:`NotImplementedError`.\n\n  If the function also supports *dir_fd* or *follow_symlinks* arguments, it's\n  an error to specify one of those when supplying *path* as a file descriptor.\n\n.. _dir_fd:\n\n* **paths relative to directory descriptors:** If *dir_fd* is not ``None``, it\n  should be a file descriptor referring to a directory, and the path to operate\n  on should be relative; path will then be relative to that directory.  If the\n  path is absolute, *dir_fd* is ignored.  (For POSIX systems, Python will call\n  the variant of the function with an ``at`` suffix and possibly prefixed with\n  ``f`` (e.g. call ``faccessat`` instead of ``access``).\n\n  You can check whether or not *dir_fd* is supported for a particular function\n  on your platform using :data:`os.supports_dir_fd`.  If it's unavailable,\n  using it will raise a :exc:`NotImplementedError`.\n\n.. _follow_symlinks:\n\n* **not following symlinks:** If *follow_symlinks* is\n  ``False``, and the last element of the path to operate on is a symbolic link,\n  the function will operate on the symbolic link itself rather than the file\n  pointed to by the link.  (For POSIX systems, Python will call the ``l...``\n  variant of the function.)\n\n  You can check whether or not *follow_symlinks* is supported for a particular\n  function on your platform using :data:`os.supports_follow_symlinks`.\n  If it's unavailable, using it will raise a :exc:`NotImplementedError`.\n\n\n\n.. function:: access(path, mode, *, dir_fd=None, effective_ids=False, follow_symlinks=True)\n\n   Use the real uid/gid to test for access to *path*.  Note that most operations\n   will use the effective uid/gid, therefore this routine can be used in a\n   suid/sgid environment to test if the invoking user has the specified access to\n   *path*.  *mode* should be :const:`F_OK` to test the existence of *path*, or it\n   can be the inclusive OR of one or more of :const:`R_OK`, :const:`W_OK`, and\n   :const:`X_OK` to test permissions.  Return :const:`True` if access is allowed,\n   :const:`False` if not. See the Unix man page :manpage:`access(2)` for more\n   information.\n\n   This function can support specifying :ref:`paths relative to directory\n   descriptors <dir_fd>` and :ref:`not following symlinks <follow_symlinks>`.\n\n   If *effective_ids* is ``True``, :func:`access` will perform its access\n   checks using the effective uid/gid instead of the real uid/gid.\n   *effective_ids* may not be supported on your platform; you can check whether\n   or not it is available using :data:`os.supports_effective_ids`.  If it is\n   unavailable, using it will raise a :exc:`NotImplementedError`.\n\n   .. note::\n\n      Using :func:`access` to check if a user is authorized to e.g. open a file\n      before actually doing so using :func:`open` creates a security hole,\n      because the user might exploit the short time interval between checking\n      and opening the file to manipulate it. It's preferable to use :term:`EAFP`\n      techniques. For example::\n\n         if os.access(\"myfile\", os.R_OK):\n             with open(\"myfile\") as fp:\n                 return fp.read()\n         return \"some default data\"\n\n      is better written as::\n\n         try:\n             fp = open(\"myfile\")\n         except PermissionError:\n             return \"some default data\"\n         else:\n             with fp:\n                 return fp.read()\n\n   .. note::\n\n      I/O operations may fail even when :func:`access` indicates that they would\n      succeed, particularly for operations on network filesystems which may have\n      permissions semantics beyond the usual POSIX permission-bit model.\n\n   .. versionchanged:: 3.3\n      Added the *dir_fd*, *effective_ids*, and *follow_symlinks* parameters.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. data:: F_OK\n          R_OK\n          W_OK\n          X_OK\n\n   Values to pass as the *mode* parameter of :func:`access` to test the\n   existence, readability, writability and executability of *path*,\n   respectively.\n\n\n.. function:: chdir(path)\n\n   .. index:: single: directory; changing\n\n   Change the current working directory to *path*.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>`.  The\n   descriptor must refer to an opened directory, not an open file.\n\n   This function can raise :exc:`OSError` and subclasses such as\n   :exc:`FileNotFoundError`, :exc:`PermissionError`, and :exc:`NotADirectoryError`.\n\n   .. audit-event:: os.chdir path os.chdir\n\n   .. versionadded:: 3.3\n      Added support for specifying *path* as a file descriptor\n      on some platforms.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: chflags(path, flags, *, follow_symlinks=True)\n\n   Set the flags of *path* to the numeric *flags*. *flags* may take a combination\n   (bitwise OR) of the following values (as defined in the :mod:`stat` module):\n\n   * :data:`stat.UF_NODUMP`\n   * :data:`stat.UF_IMMUTABLE`\n   * :data:`stat.UF_APPEND`\n   * :data:`stat.UF_OPAQUE`\n   * :data:`stat.UF_NOUNLINK`\n   * :data:`stat.UF_COMPRESSED`\n   * :data:`stat.UF_HIDDEN`\n   * :data:`stat.SF_ARCHIVED`\n   * :data:`stat.SF_IMMUTABLE`\n   * :data:`stat.SF_APPEND`\n   * :data:`stat.SF_NOUNLINK`\n   * :data:`stat.SF_SNAPSHOT`\n\n   This function can support :ref:`not following symlinks <follow_symlinks>`.\n\n   .. audit-event:: os.chflags path,flags os.chflags\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n      The *follow_symlinks* argument.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: chmod(path, mode, *, dir_fd=None, follow_symlinks=True)\n\n   Change the mode of *path* to the numeric *mode*. *mode* may take one of the\n   following values (as defined in the :mod:`stat` module) or bitwise ORed\n   combinations of them:\n\n   * :data:`stat.S_ISUID`\n   * :data:`stat.S_ISGID`\n   * :data:`stat.S_ENFMT`\n   * :data:`stat.S_ISVTX`\n   * :data:`stat.S_IREAD`\n   * :data:`stat.S_IWRITE`\n   * :data:`stat.S_IEXEC`\n   * :data:`stat.S_IRWXU`\n   * :data:`stat.S_IRUSR`\n   * :data:`stat.S_IWUSR`\n   * :data:`stat.S_IXUSR`\n   * :data:`stat.S_IRWXG`\n   * :data:`stat.S_IRGRP`\n   * :data:`stat.S_IWGRP`\n   * :data:`stat.S_IXGRP`\n   * :data:`stat.S_IRWXO`\n   * :data:`stat.S_IROTH`\n   * :data:`stat.S_IWOTH`\n   * :data:`stat.S_IXOTH`\n\n   This function can support :ref:`specifying a file descriptor <path_fd>`,\n   :ref:`paths relative to directory descriptors <dir_fd>` and :ref:`not\n   following symlinks <follow_symlinks>`.\n\n   .. note::\n\n      Although Windows supports :func:`chmod`, you can only set the file's\n      read-only flag with it (via the ``stat.S_IWRITE`` and ``stat.S_IREAD``\n      constants or a corresponding integer value).  All other bits are ignored.\n\n   .. audit-event:: os.chmod path,mode,dir_fd os.chmod\n\n   .. versionadded:: 3.3\n      Added support for specifying *path* as an open file descriptor,\n      and the *dir_fd* and *follow_symlinks* arguments.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: chown(path, uid, gid, *, dir_fd=None, follow_symlinks=True)\n\n   Change the owner and group id of *path* to the numeric *uid* and *gid*.  To\n   leave one of the ids unchanged, set it to -1.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>`,\n   :ref:`paths relative to directory descriptors <dir_fd>` and :ref:`not\n   following symlinks <follow_symlinks>`.\n\n   See :func:`shutil.chown` for a higher-level function that accepts names in\n   addition to numeric ids.\n\n   .. audit-event:: os.chown path,uid,gid,dir_fd os.chown\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n      Added support for specifying *path* as an open file descriptor,\n      and the *dir_fd* and *follow_symlinks* arguments.\n\n   .. versionchanged:: 3.6\n      Supports a :term:`path-like object`.\n\n\n.. function:: chroot(path)\n\n   Change the root directory of the current process to *path*.\n\n   .. availability:: Unix.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: fchdir(fd)\n\n   Change the current working directory to the directory represented by the file\n   descriptor *fd*.  The descriptor must refer to an opened directory, not an\n   open file.  As of Python 3.3, this is equivalent to ``os.chdir(fd)``.\n\n   .. audit-event:: os.chdir path os.fchdir\n\n   .. availability:: Unix.\n\n\n.. function:: getcwd()\n\n   Return a string representing the current working directory.\n\n\n.. function:: getcwdb()\n\n   Return a bytestring representing the current working directory.\n\n   .. versionchanged:: 3.8\n      The function now uses the UTF-8 encoding on Windows, rather than the ANSI\n      code page: see :pep:`529` for the rationale. The function is no longer\n      deprecated on Windows.\n\n\n.. function:: lchflags(path, flags)\n\n   Set the flags of *path* to the numeric *flags*, like :func:`chflags`, but do\n   not follow symbolic links.  As of Python 3.3, this is equivalent to\n   ``os.chflags(path, flags, follow_symlinks=False)``.\n\n   .. audit-event:: os.chflags path,flags os.lchflags\n\n   .. availability:: Unix.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: lchmod(path, mode)\n\n   Change the mode of *path* to the numeric *mode*. If path is a symlink, this\n   affects the symlink rather than the target.  See the docs for :func:`chmod`\n   for possible values of *mode*.  As of Python 3.3, this is equivalent to\n   ``os.chmod(path, mode, follow_symlinks=False)``.\n\n   .. audit-event:: os.chmod path,mode,dir_fd os.lchmod\n\n   .. availability:: Unix.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n.. function:: lchown(path, uid, gid)\n\n   Change the owner and group id of *path* to the numeric *uid* and *gid*.  This\n   function will not follow symbolic links.  As of Python 3.3, this is equivalent\n   to ``os.chown(path, uid, gid, follow_symlinks=False)``.\n\n   .. audit-event:: os.chown path,uid,gid,dir_fd os.lchown\n\n   .. availability:: Unix.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: link(src, dst, *, src_dir_fd=None, dst_dir_fd=None, follow_symlinks=True)\n\n   Create a hard link pointing to *src* named *dst*.\n\n   This function can support specifying *src_dir_fd* and/or *dst_dir_fd* to\n   supply :ref:`paths relative to directory descriptors <dir_fd>`, and :ref:`not\n   following symlinks <follow_symlinks>`.\n\n   .. audit-event:: os.link src,dst,src_dir_fd,dst_dir_fd os.link\n\n   .. availability:: Unix, Windows.\n\n   .. versionchanged:: 3.2\n      Added Windows support.\n\n   .. versionadded:: 3.3\n      Added the *src_dir_fd*, *dst_dir_fd*, and *follow_symlinks* arguments.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *src* and *dst*.\n\n\n.. function:: listdir(path='.')\n\n   Return a list containing the names of the entries in the directory given by\n   *path*.  The list is in arbitrary order, and does not include the special\n   entries ``'.'`` and ``'..'`` even if they are present in the directory.\n   If a file is removed from or added to the directory during the call of\n   this function, whether a name for that file be included is unspecified.\n\n   *path* may be a :term:`path-like object`.  If *path* is of type ``bytes``\n   (directly or indirectly through the :class:`PathLike` interface),\n   the filenames returned will also be of type ``bytes``;\n   in all other circumstances, they will be of type ``str``.\n\n   This function can also support :ref:`specifying a file descriptor\n   <path_fd>`; the file descriptor must refer to a directory.\n\n   .. audit-event:: os.listdir path os.listdir\n\n   .. note::\n      To encode ``str`` filenames to ``bytes``, use :func:`~os.fsencode`.\n\n   .. seealso::\n\n      The :func:`scandir` function returns directory entries along with\n      file attribute information, giving better performance for many\n      common use cases.\n\n   .. versionchanged:: 3.2\n      The *path* parameter became optional.\n\n   .. versionadded:: 3.3\n      Added support for specifying *path* as an open file descriptor.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: lstat(path, *, dir_fd=None)\n\n   Perform the equivalent of an :c:func:`lstat` system call on the given path.\n   Similar to :func:`~os.stat`, but does not follow symbolic links. Return a\n   :class:`stat_result` object.\n\n   On platforms that do not support symbolic links, this is an alias for\n   :func:`~os.stat`.\n\n   As of Python 3.3, this is equivalent to ``os.stat(path, dir_fd=dir_fd,\n   follow_symlinks=False)``.\n\n   This function can also support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   .. seealso::\n\n      The :func:`.stat` function.\n\n   .. versionchanged:: 3.2\n      Added support for Windows 6.0 (Vista) symbolic links.\n\n   .. versionchanged:: 3.3\n      Added the *dir_fd* parameter.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *src* and *dst*.\n\n   .. versionchanged:: 3.8\n      On Windows, now opens reparse points that represent another path\n      (name surrogates), including symbolic links and directory junctions.\n      Other kinds of reparse points are resolved by the operating system as\n      for :func:`~os.stat`.\n\n\n.. function:: mkdir(path, mode=0o777, *, dir_fd=None)\n\n   Create a directory named *path* with numeric mode *mode*.\n\n   If the directory already exists, :exc:`FileExistsError` is raised.\n\n   .. _mkdir_modebits:\n\n   On some systems, *mode* is ignored.  Where it is used, the current umask\n   value is first masked out.  If bits other than the last 9 (i.e. the last 3\n   digits of the octal representation of the *mode*) are set, their meaning is\n   platform-dependent.  On some platforms, they are ignored and you should call\n   :func:`chmod` explicitly to set them.\n\n   This function can also support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   It is also possible to create temporary directories; see the\n   :mod:`tempfile` module's :func:`tempfile.mkdtemp` function.\n\n   .. audit-event:: os.mkdir path,mode,dir_fd os.mkdir\n\n   .. versionadded:: 3.3\n      The *dir_fd* argument.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: makedirs(name, mode=0o777, exist_ok=False)\n\n   .. index::\n      single: directory; creating\n      single: UNC paths; and os.makedirs()\n\n   Recursive directory creation function.  Like :func:`mkdir`, but makes all\n   intermediate-level directories needed to contain the leaf directory.\n\n   The *mode* parameter is passed to :func:`mkdir` for creating the leaf\n   directory; see :ref:`the mkdir() description <mkdir_modebits>` for how it\n   is interpreted.  To set the file permission bits of any newly-created parent\n   directories you can set the umask before invoking :func:`makedirs`.  The\n   file permission bits of existing parent directories are not changed.\n\n   If *exist_ok* is ``False`` (the default), an :exc:`FileExistsError` is\n   raised if the target directory already exists.\n\n   .. note::\n\n      :func:`makedirs` will become confused if the path elements to create\n      include :data:`pardir` (eg. \"..\" on UNIX systems).\n\n   This function handles UNC paths correctly.\n\n   .. audit-event:: os.mkdir path,mode,dir_fd os.makedirs\n\n   .. versionadded:: 3.2\n      The *exist_ok* parameter.\n\n   .. versionchanged:: 3.4.1\n\n      Before Python 3.4.1, if *exist_ok* was ``True`` and the directory existed,\n      :func:`makedirs` would still raise an error if *mode* did not match the\n      mode of the existing directory. Since this behavior was impossible to\n      implement safely, it was removed in Python 3.4.1. See :issue:`21082`.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n   .. versionchanged:: 3.7\n      The *mode* argument no longer affects the file permission bits of\n      newly-created intermediate-level directories.\n\n\n.. function:: mkfifo(path, mode=0o666, *, dir_fd=None)\n\n   Create a FIFO (a named pipe) named *path* with numeric mode *mode*.\n   The current umask value is first masked out from the mode.\n\n   This function can also support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   FIFOs are pipes that can be accessed like regular files.  FIFOs exist until they\n   are deleted (for example with :func:`os.unlink`). Generally, FIFOs are used as\n   rendezvous between \"client\" and \"server\" type processes: the server opens the\n   FIFO for reading, and the client opens it for writing.  Note that :func:`mkfifo`\n   doesn't open the FIFO --- it just creates the rendezvous point.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n      The *dir_fd* argument.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: mknod(path, mode=0o600, device=0, *, dir_fd=None)\n\n   Create a filesystem node (file, device special file or named pipe) named\n   *path*. *mode* specifies both the permissions to use and the type of node\n   to be created, being combined (bitwise OR) with one of ``stat.S_IFREG``,\n   ``stat.S_IFCHR``, ``stat.S_IFBLK``, and ``stat.S_IFIFO`` (those constants are\n   available in :mod:`stat`).  For ``stat.S_IFCHR`` and ``stat.S_IFBLK``,\n   *device* defines the newly created device special file (probably using\n   :func:`os.makedev`), otherwise it is ignored.\n\n   This function can also support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n      The *dir_fd* argument.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: major(device)\n\n   Extract the device major number from a raw device number (usually the\n   :attr:`st_dev` or :attr:`st_rdev` field from :c:type:`stat`).\n\n\n.. function:: minor(device)\n\n   Extract the device minor number from a raw device number (usually the\n   :attr:`st_dev` or :attr:`st_rdev` field from :c:type:`stat`).\n\n\n.. function:: makedev(major, minor)\n\n   Compose a raw device number from the major and minor device numbers.\n\n\n.. function:: pathconf(path, name)\n\n   Return system configuration information relevant to a named file. *name*\n   specifies the configuration value to retrieve; it may be a string which is the\n   name of a defined system value; these names are specified in a number of\n   standards (POSIX.1, Unix 95, Unix 98, and others).  Some platforms define\n   additional names as well.  The names known to the host operating system are\n   given in the ``pathconf_names`` dictionary.  For configuration variables not\n   included in that mapping, passing an integer for *name* is also accepted.\n\n   If *name* is a string and is not known, :exc:`ValueError` is raised.  If a\n   specific value for *name* is not supported by the host system, even if it is\n   included in ``pathconf_names``, an :exc:`OSError` is raised with\n   :const:`errno.EINVAL` for the error number.\n\n   This function can support :ref:`specifying a file descriptor\n   <path_fd>`.\n\n   .. availability:: Unix.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. data:: pathconf_names\n\n   Dictionary mapping names accepted by :func:`pathconf` and :func:`fpathconf` to\n   the integer values defined for those names by the host operating system.  This\n   can be used to determine the set of names known to the system.\n\n   .. availability:: Unix.\n\n\n.. function:: readlink(path, *, dir_fd=None)\n\n   Return a string representing the path to which the symbolic link points.  The\n   result may be either an absolute or relative pathname; if it is relative, it\n   may be converted to an absolute pathname using\n   ``os.path.join(os.path.dirname(path), result)``.\n\n   If the *path* is a string object (directly or indirectly through a\n   :class:`PathLike` interface), the result will also be a string object,\n   and the call may raise a UnicodeDecodeError. If the *path* is a bytes\n   object (direct or indirectly), the result will be a bytes object.\n\n   This function can also support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   When trying to resolve a path that may contain links, use\n   :func:`~os.path.realpath` to properly handle recursion and platform\n   differences.\n\n   .. availability:: Unix, Windows.\n\n   .. versionchanged:: 3.2\n      Added support for Windows 6.0 (Vista) symbolic links.\n\n   .. versionadded:: 3.3\n      The *dir_fd* argument.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` on Unix.\n\n   .. versionchanged:: 3.8\n      Accepts a :term:`path-like object` and a bytes object on Windows.\n\n   .. versionchanged:: 3.8\n      Added support for directory junctions, and changed to return the\n      substitution path (which typically includes ``\\\\?\\`` prefix) rather\n      than the optional \"print name\" field that was previously returned.\n\n.. function:: remove(path, *, dir_fd=None)\n\n   Remove (delete) the file *path*.  If *path* is a directory, an\n   :exc:`IsADirectoryError` is raised.  Use :func:`rmdir` to remove directories.\n\n   This function can support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   On Windows, attempting to remove a file that is in use causes an exception to\n   be raised; on Unix, the directory entry is removed but the storage allocated\n   to the file is not made available until the original file is no longer in use.\n\n   This function is semantically identical to :func:`unlink`.\n\n   .. audit-event:: os.remove path,dir_fd os.remove\n\n   .. versionadded:: 3.3\n      The *dir_fd* argument.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: removedirs(name)\n\n   .. index:: single: directory; deleting\n\n   Remove directories recursively.  Works like :func:`rmdir` except that, if the\n   leaf directory is successfully removed, :func:`removedirs`  tries to\n   successively remove every parent directory mentioned in  *path* until an error\n   is raised (which is ignored, because it generally means that a parent directory\n   is not empty). For example, ``os.removedirs('foo/bar/baz')`` will first remove\n   the directory ``'foo/bar/baz'``, and then remove ``'foo/bar'`` and ``'foo'`` if\n   they are empty. Raises :exc:`OSError` if the leaf directory could not be\n   successfully removed.\n\n   .. audit-event:: os.remove path,dir_fd os.removedirs\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: rename(src, dst, *, src_dir_fd=None, dst_dir_fd=None)\n\n   Rename the file or directory *src* to *dst*. If *dst* exists, the operation\n   will fail with an :exc:`OSError` subclass in a number of cases:\n\n   On Windows, if *dst* exists a :exc:`FileExistsError` is always raised.\n\n   On Unix, if *src* is a file and *dst* is a directory or vice-versa, an\n   :exc:`IsADirectoryError` or a :exc:`NotADirectoryError` will be raised\n   respectively.  If both are directories and *dst* is empty, *dst* will be\n   silently replaced.  If *dst* is a non-empty directory, an :exc:`OSError`\n   is raised. If both are files, *dst* it will be replaced silently if the user\n   has permission.  The operation may fail on some Unix flavors if *src* and\n   *dst* are on different filesystems.  If successful, the renaming will be an\n   atomic operation (this is a POSIX requirement).\n\n   This function can support specifying *src_dir_fd* and/or *dst_dir_fd* to\n   supply :ref:`paths relative to directory descriptors <dir_fd>`.\n\n   If you want cross-platform overwriting of the destination, use :func:`replace`.\n\n   .. audit-event:: os.rename src,dst,src_dir_fd,dst_dir_fd os.rename\n\n   .. versionadded:: 3.3\n      The *src_dir_fd* and *dst_dir_fd* arguments.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *src* and *dst*.\n\n\n.. function:: renames(old, new)\n\n   Recursive directory or file renaming function. Works like :func:`rename`, except\n   creation of any intermediate directories needed to make the new pathname good is\n   attempted first. After the rename, directories corresponding to rightmost path\n   segments of the old name will be pruned away using :func:`removedirs`.\n\n   .. note::\n\n      This function can fail with the new directory structure made if you lack\n      permissions needed to remove the leaf directory or file.\n\n   .. audit-event:: os.rename src,dst,src_dir_fd,dst_dir_fd os.renames\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *old* and *new*.\n\n\n.. function:: replace(src, dst, *, src_dir_fd=None, dst_dir_fd=None)\n\n   Rename the file or directory *src* to *dst*.  If *dst* is a directory,\n   :exc:`OSError` will be raised.  If *dst* exists and is a file, it will\n   be replaced silently if the user has permission.  The operation may fail\n   if *src* and *dst* are on different filesystems.  If successful,\n   the renaming will be an atomic operation (this is a POSIX requirement).\n\n   This function can support specifying *src_dir_fd* and/or *dst_dir_fd* to\n   supply :ref:`paths relative to directory descriptors <dir_fd>`.\n\n   .. audit-event:: os.rename src,dst,src_dir_fd,dst_dir_fd os.replace\n\n   .. versionadded:: 3.3\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *src* and *dst*.\n\n\n.. function:: rmdir(path, *, dir_fd=None)\n\n   Remove (delete) the directory *path*.  If the directory does not exist or is\n   not empty, an :exc:`FileNotFoundError` or an :exc:`OSError` is raised\n   respectively.  In order to remove whole directory trees,\n   :func:`shutil.rmtree` can be used.\n\n   This function can support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   .. audit-event:: os.rmdir path,dir_fd os.rmdir\n\n   .. versionadded:: 3.3\n      The *dir_fd* parameter.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: scandir(path='.')\n\n   Return an iterator of :class:`os.DirEntry` objects corresponding to the\n   entries in the directory given by *path*. The entries are yielded in\n   arbitrary order, and the special entries ``'.'`` and ``'..'`` are not\n   included.  If a file is removed from or added to the directory after\n   creating the iterator, whether an entry for that file be included is\n   unspecified.\n\n   Using :func:`scandir` instead of :func:`listdir` can significantly\n   increase the performance of code that also needs file type or file\n   attribute information, because :class:`os.DirEntry` objects expose this\n   information if the operating system provides it when scanning a directory.\n   All :class:`os.DirEntry` methods may perform a system call, but\n   :func:`~os.DirEntry.is_dir` and :func:`~os.DirEntry.is_file` usually only\n   require a system call for symbolic links; :func:`os.DirEntry.stat`\n   always requires a system call on Unix but only requires one for\n   symbolic links on Windows.\n\n   *path* may be a :term:`path-like object`.  If *path* is of type ``bytes``\n   (directly or indirectly through the :class:`PathLike` interface),\n   the type of the :attr:`~os.DirEntry.name` and :attr:`~os.DirEntry.path`\n   attributes of each :class:`os.DirEntry` will be ``bytes``; in all other\n   circumstances, they will be of type ``str``.\n\n   This function can also support :ref:`specifying a file descriptor\n   <path_fd>`; the file descriptor must refer to a directory.\n\n   .. audit-event:: os.scandir path os.scandir\n\n   The :func:`scandir` iterator supports the :term:`context manager` protocol\n   and has the following method:\n\n   .. method:: scandir.close()\n\n      Close the iterator and free acquired resources.\n\n      This is called automatically when the iterator is exhausted or garbage\n      collected, or when an error happens during iterating.  However it\n      is advisable to call it explicitly or use the :keyword:`with`\n      statement.\n\n      .. versionadded:: 3.6\n\n   The following example shows a simple use of :func:`scandir` to display all\n   the files (excluding directories) in the given *path* that don't start with\n   ``'.'``. The ``entry.is_file()`` call will generally not make an additional\n   system call::\n\n      with os.scandir(path) as it:\n          for entry in it:\n              if not entry.name.startswith('.') and entry.is_file():\n                  print(entry.name)\n\n   .. note::\n\n      On Unix-based systems, :func:`scandir` uses the system's\n      `opendir() <http://pubs.opengroup.org/onlinepubs/009695399/functions/opendir.html>`_\n      and\n      `readdir() <http://pubs.opengroup.org/onlinepubs/009695399/functions/readdir_r.html>`_\n      functions. On Windows, it uses the Win32\n      `FindFirstFileW <https://msdn.microsoft.com/en-us/library/windows/desktop/aa364418(v=vs.85).aspx>`_\n      and\n      `FindNextFileW <https://msdn.microsoft.com/en-us/library/windows/desktop/aa364428(v=vs.85).aspx>`_\n      functions.\n\n   .. versionadded:: 3.5\n\n   .. versionadded:: 3.6\n      Added support for the :term:`context manager` protocol and the\n      :func:`~scandir.close()` method.  If a :func:`scandir` iterator is neither\n      exhausted nor explicitly closed a :exc:`ResourceWarning` will be emitted\n      in its destructor.\n\n      The function accepts a :term:`path-like object`.\n\n   .. versionchanged:: 3.7\n      Added support for :ref:`file descriptors <path_fd>` on Unix.\n\n\n.. class:: DirEntry\n\n   Object yielded by :func:`scandir` to expose the file path and other file\n   attributes of a directory entry.\n\n   :func:`scandir` will provide as much of this information as possible without\n   making additional system calls. When a ``stat()`` or ``lstat()`` system call\n   is made, the ``os.DirEntry`` object will cache the result.\n\n   ``os.DirEntry`` instances are not intended to be stored in long-lived data\n   structures; if you know the file metadata has changed or if a long time has\n   elapsed since calling :func:`scandir`, call ``os.stat(entry.path)`` to fetch\n   up-to-date information.\n\n   Because the ``os.DirEntry`` methods can make operating system calls, they may\n   also raise :exc:`OSError`. If you need very fine-grained\n   control over errors, you can catch :exc:`OSError` when calling one of the\n   ``os.DirEntry`` methods and handle as appropriate.\n\n   To be directly usable as a :term:`path-like object`, ``os.DirEntry``\n   implements the :class:`PathLike` interface.\n\n   Attributes and methods on a ``os.DirEntry`` instance are as follows:\n\n   .. attribute:: name\n\n      The entry's base filename, relative to the :func:`scandir` *path*\n      argument.\n\n      The :attr:`name` attribute will be ``bytes`` if the :func:`scandir`\n      *path* argument is of type ``bytes`` and ``str`` otherwise.  Use\n      :func:`~os.fsdecode` to decode byte filenames.\n\n   .. attribute:: path\n\n      The entry's full path name: equivalent to ``os.path.join(scandir_path,\n      entry.name)`` where *scandir_path* is the :func:`scandir` *path*\n      argument.  The path is only absolute if the :func:`scandir` *path*\n      argument was absolute.  If the :func:`scandir` *path*\n      argument was a :ref:`file descriptor <path_fd>`, the :attr:`path`\n      attribute is the same as the :attr:`name` attribute.\n\n      The :attr:`path` attribute will be ``bytes`` if the :func:`scandir`\n      *path* argument is of type ``bytes`` and ``str`` otherwise.  Use\n      :func:`~os.fsdecode` to decode byte filenames.\n\n   .. method:: inode()\n\n      Return the inode number of the entry.\n\n      The result is cached on the ``os.DirEntry`` object. Use\n      ``os.stat(entry.path, follow_symlinks=False).st_ino`` to fetch up-to-date\n      information.\n\n      On the first, uncached call, a system call is required on Windows but\n      not on Unix.\n\n   .. method:: is_dir(*, follow_symlinks=True)\n\n      Return ``True`` if this entry is a directory or a symbolic link pointing\n      to a directory; return ``False`` if the entry is or points to any other\n      kind of file, or if it doesn't exist anymore.\n\n      If *follow_symlinks* is ``False``, return ``True`` only if this entry\n      is a directory (without following symlinks); return ``False`` if the\n      entry is any other kind of file or if it doesn't exist anymore.\n\n      The result is cached on the ``os.DirEntry`` object, with a separate cache\n      for *follow_symlinks* ``True`` and ``False``. Call :func:`os.stat` along\n      with :func:`stat.S_ISDIR` to fetch up-to-date information.\n\n      On the first, uncached call, no system call is required in most cases.\n      Specifically, for non-symlinks, neither Windows or Unix require a system\n      call, except on certain Unix file systems, such as network file systems,\n      that return ``dirent.d_type == DT_UNKNOWN``. If the entry is a symlink,\n      a system call will be required to follow the symlink unless\n      *follow_symlinks* is ``False``.\n\n      This method can raise :exc:`OSError`, such as :exc:`PermissionError`,\n      but :exc:`FileNotFoundError` is caught and not raised.\n\n   .. method:: is_file(*, follow_symlinks=True)\n\n      Return ``True`` if this entry is a file or a symbolic link pointing to a\n      file; return ``False`` if the entry is or points to a directory or other\n      non-file entry, or if it doesn't exist anymore.\n\n      If *follow_symlinks* is ``False``, return ``True`` only if this entry\n      is a file (without following symlinks); return ``False`` if the entry is\n      a directory or other non-file entry, or if it doesn't exist anymore.\n\n      The result is cached on the ``os.DirEntry`` object. Caching, system calls\n      made, and exceptions raised are as per :func:`~os.DirEntry.is_dir`.\n\n   .. method:: is_symlink()\n\n      Return ``True`` if this entry is a symbolic link (even if broken);\n      return ``False`` if the entry points to a directory or any kind of file,\n      or if it doesn't exist anymore.\n\n      The result is cached on the ``os.DirEntry`` object. Call\n      :func:`os.path.islink` to fetch up-to-date information.\n\n      On the first, uncached call, no system call is required in most cases.\n      Specifically, neither Windows or Unix require a system call, except on\n      certain Unix file systems, such as network file systems, that return\n      ``dirent.d_type == DT_UNKNOWN``.\n\n      This method can raise :exc:`OSError`, such as :exc:`PermissionError`,\n      but :exc:`FileNotFoundError` is caught and not raised.\n\n   .. method:: stat(*, follow_symlinks=True)\n\n      Return a :class:`stat_result` object for this entry. This method\n      follows symbolic links by default; to stat a symbolic link add the\n      ``follow_symlinks=False`` argument.\n\n      On Unix, this method always requires a system call. On Windows, it\n      only requires a system call if *follow_symlinks* is ``True`` and the\n      entry is a reparse point (for example, a symbolic link or directory\n      junction).\n\n      On Windows, the ``st_ino``, ``st_dev`` and ``st_nlink`` attributes of the\n      :class:`stat_result` are always set to zero. Call :func:`os.stat` to\n      get these attributes.\n\n      The result is cached on the ``os.DirEntry`` object, with a separate cache\n      for *follow_symlinks* ``True`` and ``False``. Call :func:`os.stat` to\n      fetch up-to-date information.\n\n   Note that there is a nice correspondence between several attributes\n   and methods of ``os.DirEntry`` and of :class:`pathlib.Path`.  In\n   particular, the ``name`` attribute has the same\n   meaning, as do the ``is_dir()``, ``is_file()``, ``is_symlink()``\n   and ``stat()`` methods.\n\n   .. versionadded:: 3.5\n\n   .. versionchanged:: 3.6\n      Added support for the :class:`~os.PathLike` interface.  Added support\n      for :class:`bytes` paths on Windows.\n\n\n.. function:: stat(path, *, dir_fd=None, follow_symlinks=True)\n\n   Get the status of a file or a file descriptor. Perform the equivalent of a\n   :c:func:`stat` system call on the given path. *path* may be specified as\n   either a string or bytes -- directly or indirectly through the :class:`PathLike`\n   interface -- or as an open file descriptor. Return a :class:`stat_result`\n   object.\n\n   This function normally follows symlinks; to stat a symlink add the argument\n   ``follow_symlinks=False``, or use :func:`lstat`.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>` and\n   :ref:`not following symlinks <follow_symlinks>`.\n\n   On Windows, passing ``follow_symlinks=False`` will disable following all\n   name-surrogate reparse points, which includes symlinks and directory\n   junctions. Other types of reparse points that do not resemble links or that\n   the operating system is unable to follow will be opened directly. When\n   following a chain of multiple links, this may result in the original link\n   being returned instead of the non-link that prevented full traversal. To\n   obtain stat results for the final path in this case, use the\n   :func:`os.path.realpath` function to resolve the path name as far as\n   possible and call :func:`lstat` on the result. This does not apply to\n   dangling symlinks or junction points, which will raise the usual exceptions.\n\n   .. index:: module: stat\n\n   Example::\n\n      >>> import os\n      >>> statinfo = os.stat('somefile.txt')\n      >>> statinfo\n      os.stat_result(st_mode=33188, st_ino=7876932, st_dev=234881026,\n      st_nlink=1, st_uid=501, st_gid=501, st_size=264, st_atime=1297230295,\n      st_mtime=1297230027, st_ctime=1297230027)\n      >>> statinfo.st_size\n      264\n\n   .. seealso::\n\n      :func:`fstat` and :func:`lstat` functions.\n\n   .. versionadded:: 3.3\n      Added the *dir_fd* and *follow_symlinks* arguments, specifying a file\n      descriptor instead of a path.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n   .. versionchanged:: 3.8\n      On Windows, all reparse points that can be resolved by the operating\n      system are now followed, and passing ``follow_symlinks=False``\n      disables following all name surrogate reparse points. If the operating\n      system reaches a reparse point that it is not able to follow, *stat* now\n      returns the information for the original path as if\n      ``follow_symlinks=False`` had been specified instead of raising an error.\n\n\n.. class:: stat_result\n\n   Object whose attributes correspond roughly to the members of the\n   :c:type:`stat` structure. It is used for the result of :func:`os.stat`,\n   :func:`os.fstat` and :func:`os.lstat`.\n\n   Attributes:\n\n   .. attribute:: st_mode\n\n      File mode: file type and file mode bits (permissions).\n\n   .. attribute:: st_ino\n\n      Platform dependent, but if non-zero, uniquely identifies the\n      file for a given value of ``st_dev``. Typically:\n\n      * the inode number on Unix,\n      * the `file index\n        <https://msdn.microsoft.com/en-us/library/aa363788>`_ on\n        Windows\n\n   .. attribute:: st_dev\n\n      Identifier of the device on which this file resides.\n\n   .. attribute:: st_nlink\n\n      Number of hard links.\n\n   .. attribute:: st_uid\n\n      User identifier of the file owner.\n\n   .. attribute:: st_gid\n\n      Group identifier of the file owner.\n\n   .. attribute:: st_size\n\n      Size of the file in bytes, if it is a regular file or a symbolic link.\n      The size of a symbolic link is the length of the pathname it contains,\n      without a terminating null byte.\n\n   Timestamps:\n\n   .. attribute:: st_atime\n\n      Time of most recent access expressed in seconds.\n\n   .. attribute:: st_mtime\n\n      Time of most recent content modification expressed in seconds.\n\n   .. attribute:: st_ctime\n\n      Platform dependent:\n\n      * the time of most recent metadata change on Unix,\n      * the time of creation on Windows, expressed in seconds.\n\n   .. attribute:: st_atime_ns\n\n      Time of most recent access expressed in nanoseconds as an integer.\n\n   .. attribute:: st_mtime_ns\n\n      Time of most recent content modification expressed in nanoseconds as an\n      integer.\n\n   .. attribute:: st_ctime_ns\n\n      Platform dependent:\n\n      * the time of most recent metadata change on Unix,\n      * the time of creation on Windows, expressed in nanoseconds as an\n        integer.\n\n   .. note::\n\n      The exact meaning and resolution of the :attr:`st_atime`,\n      :attr:`st_mtime`, and :attr:`st_ctime` attributes depend on the operating\n      system and the file system. For example, on Windows systems using the FAT\n      or FAT32 file systems, :attr:`st_mtime` has 2-second resolution, and\n      :attr:`st_atime` has only 1-day resolution.  See your operating system\n      documentation for details.\n\n      Similarly, although :attr:`st_atime_ns`, :attr:`st_mtime_ns`,\n      and :attr:`st_ctime_ns` are always expressed in nanoseconds, many\n      systems do not provide nanosecond precision.  On systems that do\n      provide nanosecond precision, the floating-point object used to\n      store :attr:`st_atime`, :attr:`st_mtime`, and :attr:`st_ctime`\n      cannot preserve all of it, and as such will be slightly inexact.\n      If you need the exact timestamps you should always use\n      :attr:`st_atime_ns`, :attr:`st_mtime_ns`, and :attr:`st_ctime_ns`.\n\n   On some Unix systems (such as Linux), the following attributes may also be\n   available:\n\n   .. attribute:: st_blocks\n\n      Number of 512-byte blocks allocated for file.\n      This may be smaller than :attr:`st_size`/512 when the file has holes.\n\n   .. attribute:: st_blksize\n\n      \"Preferred\" blocksize for efficient file system I/O. Writing to a file in\n      smaller chunks may cause an inefficient read-modify-rewrite.\n\n   .. attribute:: st_rdev\n\n      Type of device if an inode device.\n\n   .. attribute:: st_flags\n\n      User defined flags for file.\n\n   On other Unix systems (such as FreeBSD), the following attributes may be\n   available (but may be only filled out if root tries to use them):\n\n   .. attribute:: st_gen\n\n      File generation number.\n\n   .. attribute:: st_birthtime\n\n      Time of file creation.\n\n   On Solaris and derivatives, the following attributes may also be\n   available:\n\n   .. attribute:: st_fstype\n\n      String that uniquely identifies the type of the filesystem that\n      contains the file.\n\n   On Mac OS systems, the following attributes may also be available:\n\n   .. attribute:: st_rsize\n\n      Real size of the file.\n\n   .. attribute:: st_creator\n\n      Creator of the file.\n\n   .. attribute:: st_type\n\n      File type.\n\n   On Windows systems, the following attributes are also available:\n\n   .. attribute:: st_file_attributes\n\n      Windows file attributes: ``dwFileAttributes`` member of the\n      ``BY_HANDLE_FILE_INFORMATION`` structure returned by\n      :c:func:`GetFileInformationByHandle`. See the ``FILE_ATTRIBUTE_*``\n      constants in the :mod:`stat` module.\n\n   .. attribute:: st_reparse_tag\n\n      When :attr:`st_file_attributes` has the ``FILE_ATTRIBUTE_REPARSE_POINT``\n      set, this field contains the tag identifying the type of reparse point.\n      See the ``IO_REPARSE_TAG_*`` constants in the :mod:`stat` module.\n\n   The standard module :mod:`stat` defines functions and constants that are\n   useful for extracting information from a :c:type:`stat` structure. (On\n   Windows, some items are filled with dummy values.)\n\n   For backward compatibility, a :class:`stat_result` instance is also\n   accessible as a tuple of at least 10 integers giving the most important (and\n   portable) members of the :c:type:`stat` structure, in the order\n   :attr:`st_mode`, :attr:`st_ino`, :attr:`st_dev`, :attr:`st_nlink`,\n   :attr:`st_uid`, :attr:`st_gid`, :attr:`st_size`, :attr:`st_atime`,\n   :attr:`st_mtime`, :attr:`st_ctime`. More items may be added at the end by\n   some implementations. For compatibility with older Python versions,\n   accessing :class:`stat_result` as a tuple always returns integers.\n\n   .. versionadded:: 3.3\n      Added the :attr:`st_atime_ns`, :attr:`st_mtime_ns`, and\n      :attr:`st_ctime_ns` members.\n\n   .. versionadded:: 3.5\n      Added the :attr:`st_file_attributes` member on Windows.\n\n   .. versionchanged:: 3.5\n      Windows now returns the file index as :attr:`st_ino` when\n      available.\n\n   .. versionadded:: 3.7\n      Added the :attr:`st_fstype` member to Solaris/derivatives.\n\n   .. versionadded:: 3.8\n      Added the :attr:`st_reparse_tag` member on Windows.\n\n   .. versionchanged:: 3.8\n      On Windows, the :attr:`st_mode` member now identifies special\n      files as :const:`S_IFCHR`, :const:`S_IFIFO` or :const:`S_IFBLK`\n      as appropriate.\n\n.. function:: statvfs(path)\n\n   Perform a :c:func:`statvfs` system call on the given path.  The return value is\n   an object whose attributes describe the filesystem on the given path, and\n   correspond to the members of the :c:type:`statvfs` structure, namely:\n   :attr:`f_bsize`, :attr:`f_frsize`, :attr:`f_blocks`, :attr:`f_bfree`,\n   :attr:`f_bavail`, :attr:`f_files`, :attr:`f_ffree`, :attr:`f_favail`,\n   :attr:`f_flag`, :attr:`f_namemax`, :attr:`f_fsid`.\n\n   Two module-level constants are defined for the :attr:`f_flag` attribute's\n   bit-flags: if :const:`ST_RDONLY` is set, the filesystem is mounted\n   read-only, and if :const:`ST_NOSUID` is set, the semantics of\n   setuid/setgid bits are disabled or not supported.\n\n   Additional module-level constants are defined for GNU/glibc based systems.\n   These are :const:`ST_NODEV` (disallow access to device special files),\n   :const:`ST_NOEXEC` (disallow program execution), :const:`ST_SYNCHRONOUS`\n   (writes are synced at once), :const:`ST_MANDLOCK` (allow mandatory locks on an FS),\n   :const:`ST_WRITE` (write on file/directory/symlink), :const:`ST_APPEND`\n   (append-only file), :const:`ST_IMMUTABLE` (immutable file), :const:`ST_NOATIME`\n   (do not update access times), :const:`ST_NODIRATIME` (do not update directory access\n   times), :const:`ST_RELATIME` (update atime relative to mtime/ctime).\n\n   This function can support :ref:`specifying a file descriptor <path_fd>`.\n\n   .. availability:: Unix.\n\n   .. versionchanged:: 3.2\n      The :const:`ST_RDONLY` and :const:`ST_NOSUID` constants were added.\n\n   .. versionadded:: 3.3\n      Added support for specifying *path* as an open file descriptor.\n\n   .. versionchanged:: 3.4\n      The :const:`ST_NODEV`, :const:`ST_NOEXEC`, :const:`ST_SYNCHRONOUS`,\n      :const:`ST_MANDLOCK`, :const:`ST_WRITE`, :const:`ST_APPEND`,\n      :const:`ST_IMMUTABLE`, :const:`ST_NOATIME`, :const:`ST_NODIRATIME`,\n      and :const:`ST_RELATIME` constants were added.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n   .. versionadded:: 3.7\n      Added :attr:`f_fsid`.\n\n\n.. data:: supports_dir_fd\n\n   A :class:`set` object indicating which functions in the :mod:`os`\n   module accept an open file descriptor for their *dir_fd* parameter.\n   Different platforms provide different features, and the underlying\n   functionality Python uses to implement the *dir_fd* parameter is not\n   available on all platforms Python supports.  For consistency's sake,\n   functions that may support *dir_fd* always allow specifying the\n   parameter, but will throw an exception if the functionality is used\n   when it's not locally available. (Specifying ``None`` for *dir_fd*\n   is always supported on all platforms.)\n\n   To check whether a particular function accepts an open file descriptor\n   for its *dir_fd* parameter, use the ``in`` operator on ``supports_dir_fd``.\n   As an example, this expression evaluates to ``True`` if :func:`os.stat`\n   accepts open file descriptors for *dir_fd* on the local platform::\n\n       os.stat in os.supports_dir_fd\n\n   Currently *dir_fd* parameters only work on Unix platforms;\n   none of them work on Windows.\n\n   .. versionadded:: 3.3\n\n\n.. data:: supports_effective_ids\n\n   A :class:`set` object indicating whether :func:`os.access` permits\n   specifying ``True`` for its *effective_ids* parameter on the local platform.\n   (Specifying ``False`` for *effective_ids* is always supported on all\n   platforms.)  If the local platform supports it, the collection will contain\n   :func:`os.access`; otherwise it will be empty.\n\n   This expression evaluates to ``True`` if :func:`os.access` supports\n   ``effective_ids=True`` on the local platform::\n\n       os.access in os.supports_effective_ids\n\n   Currently *effective_ids* is only supported on Unix platforms;\n   it does not work on Windows.\n\n   .. versionadded:: 3.3\n\n\n.. data:: supports_fd\n\n   A :class:`set` object indicating which functions in the\n   :mod:`os` module permit specifying their *path* parameter as an open file\n   descriptor on the local platform.  Different platforms provide different\n   features, and the underlying functionality Python uses to accept open file\n   descriptors as *path* arguments is not available on all platforms Python\n   supports.\n\n   To determine whether a particular function permits specifying an open file\n   descriptor for its *path* parameter, use the ``in`` operator on\n   ``supports_fd``. As an example, this expression evaluates to ``True`` if\n   :func:`os.chdir` accepts open file descriptors for *path* on your local\n   platform::\n\n       os.chdir in os.supports_fd\n\n   .. versionadded:: 3.3\n\n\n.. data:: supports_follow_symlinks\n\n   A :class:`set` object indicating which functions in the :mod:`os` module\n   accept ``False`` for their *follow_symlinks* parameter on the local platform.\n   Different platforms provide different features, and the underlying\n   functionality Python uses to implement *follow_symlinks* is not available\n   on all platforms Python supports.  For consistency's sake, functions that\n   may support *follow_symlinks* always allow specifying the parameter, but\n   will throw an exception if the functionality is used when it's not locally\n   available.  (Specifying ``True`` for *follow_symlinks* is always supported\n   on all platforms.)\n\n   To check whether a particular function accepts ``False`` for its\n   *follow_symlinks* parameter, use the ``in`` operator on\n   ``supports_follow_symlinks``.  As an example, this expression evaluates\n   to ``True`` if you may specify ``follow_symlinks=False`` when calling\n   :func:`os.stat` on the local platform::\n\n       os.stat in os.supports_follow_symlinks\n\n   .. versionadded:: 3.3\n\n\n.. function:: symlink(src, dst, target_is_directory=False, *, dir_fd=None)\n\n   Create a symbolic link pointing to *src* named *dst*.\n\n   On Windows, a symlink represents either a file or a directory, and does not\n   morph to the target dynamically.  If the target is present, the type of the\n   symlink will be created to match. Otherwise, the symlink will be created\n   as a directory if *target_is_directory* is ``True`` or a file symlink (the\n   default) otherwise.  On non-Windows platforms, *target_is_directory* is ignored.\n\n   This function can support :ref:`paths relative to directory descriptors\n   <dir_fd>`.\n\n   .. note::\n\n      On newer versions of Windows 10, unprivileged accounts can create symlinks\n      if Developer Mode is enabled. When Developer Mode is not available/enabled,\n      the *SeCreateSymbolicLinkPrivilege* privilege is required, or the process\n      must be run as an administrator.\n\n\n      :exc:`OSError` is raised when the function is called by an unprivileged\n      user.\n\n   .. audit-event:: os.symlink src,dst,dir_fd os.symlink\n\n   .. availability:: Unix, Windows.\n\n   .. versionchanged:: 3.2\n      Added support for Windows 6.0 (Vista) symbolic links.\n\n   .. versionadded:: 3.3\n      Added the *dir_fd* argument, and now allow *target_is_directory*\n      on non-Windows platforms.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *src* and *dst*.\n\n   .. versionchanged:: 3.8\n      Added support for unelevated symlinks on Windows with Developer Mode.\n\n\n.. function:: sync()\n\n   Force write of everything to disk.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: truncate(path, length)\n\n   Truncate the file corresponding to *path*, so that it is at most\n   *length* bytes in size.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>`.\n\n   .. audit-event:: os.truncate path,length os.truncate\n\n   .. availability:: Unix, Windows.\n\n   .. versionadded:: 3.3\n\n   .. versionchanged:: 3.5\n      Added support for Windows\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: unlink(path, *, dir_fd=None)\n\n   Remove (delete) the file *path*.  This function is semantically\n   identical to :func:`remove`; the ``unlink`` name is its\n   traditional Unix name.  Please see the documentation for\n   :func:`remove` for further information.\n\n   .. audit-event:: os.remove path,dir_fd os.unlink\n\n   .. versionadded:: 3.3\n      The *dir_fd* parameter.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: utime(path, times=None, *[, ns], dir_fd=None, follow_symlinks=True)\n\n   Set the access and modified times of the file specified by *path*.\n\n   :func:`utime` takes two optional parameters, *times* and *ns*.\n   These specify the times set on *path* and are used as follows:\n\n   - If *ns* is specified,\n     it must be a 2-tuple of the form ``(atime_ns, mtime_ns)``\n     where each member is an int expressing nanoseconds.\n   - If *times* is not ``None``,\n     it must be a 2-tuple of the form ``(atime, mtime)``\n     where each member is an int or float expressing seconds.\n   - If *times* is ``None`` and *ns* is unspecified,\n     this is equivalent to specifying ``ns=(atime_ns, mtime_ns)``\n     where both times are the current time.\n\n   It is an error to specify tuples for both *times* and *ns*.\n\n   Note that the exact times you set here may not be returned by a subsequent\n   :func:`~os.stat` call, depending on the resolution with which your operating\n   system records access and modification times; see :func:`~os.stat`. The best\n   way to preserve exact times is to use the *st_atime_ns* and *st_mtime_ns*\n   fields from the :func:`os.stat` result object with the *ns* parameter to\n   `utime`.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>`,\n   :ref:`paths relative to directory descriptors <dir_fd>` and :ref:`not\n   following symlinks <follow_symlinks>`.\n\n   .. audit-event:: os.utime path,times,ns,dir_fd os.utime\n\n   .. versionadded:: 3.3\n      Added support for specifying *path* as an open file descriptor,\n      and the *dir_fd*, *follow_symlinks*, and *ns* parameters.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: walk(top, topdown=True, onerror=None, followlinks=False)\n\n   .. index::\n      single: directory; walking\n      single: directory; traversal\n\n   Generate the file names in a directory tree by walking the tree\n   either top-down or bottom-up. For each directory in the tree rooted at directory\n   *top* (including *top* itself), it yields a 3-tuple ``(dirpath, dirnames,\n   filenames)``.\n\n   *dirpath* is a string, the path to the directory.  *dirnames* is a list of the\n   names of the subdirectories in *dirpath* (excluding ``'.'`` and ``'..'``).\n   *filenames* is a list of the names of the non-directory files in *dirpath*.\n   Note that the names in the lists contain no path components.  To get a full path\n   (which begins with *top*) to a file or directory in *dirpath*, do\n   ``os.path.join(dirpath, name)``.  Whether or not the lists are sorted\n   depends on the file system.  If a file is removed from or added to the\n   *dirpath* directory during generating the lists, whether a name for that\n   file be included is unspecified.\n\n   If optional argument *topdown* is ``True`` or not specified, the triple for a\n   directory is generated before the triples for any of its subdirectories\n   (directories are generated top-down).  If *topdown* is ``False``, the triple\n   for a directory is generated after the triples for all of its subdirectories\n   (directories are generated bottom-up). No matter the value of *topdown*, the\n   list of subdirectories is retrieved before the tuples for the directory and\n   its subdirectories are generated.\n\n   When *topdown* is ``True``, the caller can modify the *dirnames* list in-place\n   (perhaps using :keyword:`del` or slice assignment), and :func:`walk` will only\n   recurse into the subdirectories whose names remain in *dirnames*; this can be\n   used to prune the search, impose a specific order of visiting, or even to inform\n   :func:`walk` about directories the caller creates or renames before it resumes\n   :func:`walk` again.  Modifying *dirnames* when *topdown* is ``False`` has\n   no effect on the behavior of the walk, because in bottom-up mode the directories\n   in *dirnames* are generated before *dirpath* itself is generated.\n\n   By default, errors from the :func:`scandir` call are ignored.  If optional\n   argument *onerror* is specified, it should be a function; it will be called with\n   one argument, an :exc:`OSError` instance.  It can report the error to continue\n   with the walk, or raise the exception to abort the walk.  Note that the filename\n   is available as the ``filename`` attribute of the exception object.\n\n   By default, :func:`walk` will not walk down into symbolic links that resolve to\n   directories. Set *followlinks* to ``True`` to visit directories pointed to by\n   symlinks, on systems that support them.\n\n   .. note::\n\n      Be aware that setting *followlinks* to ``True`` can lead to infinite\n      recursion if a link points to a parent directory of itself. :func:`walk`\n      does not keep track of the directories it visited already.\n\n   .. note::\n\n      If you pass a relative pathname, don't change the current working directory\n      between resumptions of :func:`walk`.  :func:`walk` never changes the current\n      directory, and assumes that its caller doesn't either.\n\n   This example displays the number of bytes taken by non-directory files in each\n   directory under the starting directory, except that it doesn't look under any\n   CVS subdirectory::\n\n      import os\n      from os.path import join, getsize\n      for root, dirs, files in os.walk('python/Lib/email'):\n          print(root, \"consumes\", end=\" \")\n          print(sum(getsize(join(root, name)) for name in files), end=\" \")\n          print(\"bytes in\", len(files), \"non-directory files\")\n          if 'CVS' in dirs:\n              dirs.remove('CVS')  # don't visit CVS directories\n\n   In the next example (simple implementation of :func:`shutil.rmtree`),\n   walking the tree bottom-up is essential, :func:`rmdir` doesn't allow\n   deleting a directory before the directory is empty::\n\n      # Delete everything reachable from the directory named in \"top\",\n      # assuming there are no symbolic links.\n      # CAUTION:  This is dangerous!  For example, if top == '/', it\n      # could delete all your disk files.\n      import os\n      for root, dirs, files in os.walk(top, topdown=False):\n          for name in files:\n              os.remove(os.path.join(root, name))\n          for name in dirs:\n              os.rmdir(os.path.join(root, name))\n\n   .. versionchanged:: 3.5\n      This function now calls :func:`os.scandir` instead of :func:`os.listdir`,\n      making it faster by reducing the number of calls to :func:`os.stat`.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: fwalk(top='.', topdown=True, onerror=None, *, follow_symlinks=False, dir_fd=None)\n\n   .. index::\n      single: directory; walking\n      single: directory; traversal\n\n   This behaves exactly like :func:`walk`, except that it yields a 4-tuple\n   ``(dirpath, dirnames, filenames, dirfd)``, and it supports ``dir_fd``.\n\n   *dirpath*, *dirnames* and *filenames* are identical to :func:`walk` output,\n   and *dirfd* is a file descriptor referring to the directory *dirpath*.\n\n   This function always supports :ref:`paths relative to directory descriptors\n   <dir_fd>` and :ref:`not following symlinks <follow_symlinks>`.  Note however\n   that, unlike other functions, the :func:`fwalk` default value for\n   *follow_symlinks* is ``False``.\n\n   .. note::\n\n      Since :func:`fwalk` yields file descriptors, those are only valid until\n      the next iteration step, so you should duplicate them (e.g. with\n      :func:`dup`) if you want to keep them longer.\n\n   This example displays the number of bytes taken by non-directory files in each\n   directory under the starting directory, except that it doesn't look under any\n   CVS subdirectory::\n\n      import os\n      for root, dirs, files, rootfd in os.fwalk('python/Lib/email'):\n          print(root, \"consumes\", end=\"\")\n          print(sum([os.stat(name, dir_fd=rootfd).st_size for name in files]),\n                end=\"\")\n          print(\"bytes in\", len(files), \"non-directory files\")\n          if 'CVS' in dirs:\n              dirs.remove('CVS')  # don't visit CVS directories\n\n   In the next example, walking the tree bottom-up is essential:\n   :func:`rmdir` doesn't allow deleting a directory before the directory is\n   empty::\n\n      # Delete everything reachable from the directory named in \"top\",\n      # assuming there are no symbolic links.\n      # CAUTION:  This is dangerous!  For example, if top == '/', it\n      # could delete all your disk files.\n      import os\n      for root, dirs, files, rootfd in os.fwalk(top, topdown=False):\n          for name in files:\n              os.unlink(name, dir_fd=rootfd)\n          for name in dirs:\n              os.rmdir(name, dir_fd=rootfd)\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n   .. versionchanged:: 3.7\n      Added support for :class:`bytes` paths.\n\n\n.. function:: memfd_create(name[, flags=os.MFD_CLOEXEC])\n\n   Create an anonymous file and return a file descriptor that refers to it.\n   *flags* must be one of the ``os.MFD_*`` constants available on the system\n   (or a bitwise ORed combination of them).  By default, the new file\n   descriptor is :ref:`non-inheritable <fd_inheritance>`.\n\n   The name supplied in *name* is used as a filename and will be displayed as\n   the target of the corresponding symbolic link in the directory\n   ``/proc/self/fd/``. The displayed name is always prefixed with ``memfd:``\n   and serves only for debugging purposes. Names do not affect the behavior of\n   the file descriptor, and as such multiple files can have the same name\n   without any side effects.\n\n   .. availability:: Linux 3.17 or newer with glibc 2.27 or newer.\n\n   .. versionadded:: 3.8\n\n\n.. data:: MFD_CLOEXEC\n          MFD_ALLOW_SEALING\n          MFD_HUGETLB\n          MFD_HUGE_SHIFT\n          MFD_HUGE_MASK\n          MFD_HUGE_64KB\n          MFD_HUGE_512KB\n          MFD_HUGE_1MB\n          MFD_HUGE_2MB\n          MFD_HUGE_8MB\n          MFD_HUGE_16MB\n          MFD_HUGE_32MB\n          MFD_HUGE_256MB\n          MFD_HUGE_512MB\n          MFD_HUGE_1GB\n          MFD_HUGE_2GB\n          MFD_HUGE_16GB\n\n   These flags can be passed to :func:`memfd_create`.\n\n   .. availability:: Linux 3.17 or newer with glibc 2.27 or newer.  The\n      ``MFD_HUGE*`` flags are only available since Linux 4.14.\n\n   .. versionadded:: 3.8\n\n\nLinux extended attributes\n~~~~~~~~~~~~~~~~~~~~~~~~~\n\n.. versionadded:: 3.3\n\nThese functions are all available on Linux only.\n\n.. function:: getxattr(path, attribute, *, follow_symlinks=True)\n\n   Return the value of the extended filesystem attribute *attribute* for\n   *path*. *attribute* can be bytes or str (directly or indirectly through the\n   :class:`PathLike` interface). If it is str, it is encoded with the filesystem\n   encoding.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>` and\n   :ref:`not following symlinks <follow_symlinks>`.\n\n   .. audit-event:: os.getxattr path,attribute os.getxattr\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *path* and *attribute*.\n\n\n.. function:: listxattr(path=None, *, follow_symlinks=True)\n\n   Return a list of the extended filesystem attributes on *path*.  The\n   attributes in the list are represented as strings decoded with the filesystem\n   encoding.  If *path* is ``None``, :func:`listxattr` will examine the current\n   directory.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>` and\n   :ref:`not following symlinks <follow_symlinks>`.\n\n   .. audit-event:: os.listxattr path os.listxattr\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. function:: removexattr(path, attribute, *, follow_symlinks=True)\n\n   Removes the extended filesystem attribute *attribute* from *path*.\n   *attribute* should be bytes or str (directly or indirectly through the\n   :class:`PathLike` interface). If it is a string, it is encoded\n   with the filesystem encoding.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>` and\n   :ref:`not following symlinks <follow_symlinks>`.\n\n   .. audit-event:: os.removexattr path,attribute os.removexattr\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *path* and *attribute*.\n\n\n.. function:: setxattr(path, attribute, value, flags=0, *, follow_symlinks=True)\n\n   Set the extended filesystem attribute *attribute* on *path* to *value*.\n   *attribute* must be a bytes or str with no embedded NULs (directly or\n   indirectly through the :class:`PathLike` interface). If it is a str,\n   it is encoded with the filesystem encoding.  *flags* may be\n   :data:`XATTR_REPLACE` or :data:`XATTR_CREATE`. If :data:`XATTR_REPLACE` is\n   given and the attribute does not exist, ``EEXISTS`` will be raised.\n   If :data:`XATTR_CREATE` is given and the attribute already exists, the\n   attribute will not be created and ``ENODATA`` will be raised.\n\n   This function can support :ref:`specifying a file descriptor <path_fd>` and\n   :ref:`not following symlinks <follow_symlinks>`.\n\n   .. note::\n\n      A bug in Linux kernel versions less than 2.6.39 caused the flags argument\n      to be ignored on some filesystems.\n\n   .. audit-event:: os.setxattr path,attribute,value,flags os.setxattr\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object` for *path* and *attribute*.\n\n\n.. data:: XATTR_SIZE_MAX\n\n   The maximum size the value of an extended attribute can be. Currently, this\n   is 64 KiB on Linux.\n\n\n.. data:: XATTR_CREATE\n\n   This is a possible value for the flags argument in :func:`setxattr`. It\n   indicates the operation must create an attribute.\n\n\n.. data:: XATTR_REPLACE\n\n   This is a possible value for the flags argument in :func:`setxattr`. It\n   indicates the operation must replace an existing attribute.\n\n\n.. _os-process:\n\nProcess Management\n------------------\n\nThese functions may be used to create and manage processes.\n\nThe various :func:`exec\\* <execl>` functions take a list of arguments for the new\nprogram loaded into the process.  In each case, the first of these arguments is\npassed to the new program as its own name rather than as an argument a user may\nhave typed on a command line.  For the C programmer, this is the ``argv[0]``\npassed to a program's :c:func:`main`.  For example, ``os.execv('/bin/echo',\n['foo', 'bar'])`` will only print ``bar`` on standard output; ``foo`` will seem\nto be ignored.\n\n\n.. function:: abort()\n\n   Generate a :const:`SIGABRT` signal to the current process.  On Unix, the default\n   behavior is to produce a core dump; on Windows, the process immediately returns\n   an exit code of ``3``.  Be aware that calling this function will not call the\n   Python signal handler registered for :const:`SIGABRT` with\n   :func:`signal.signal`.\n\n\n.. function:: add_dll_directory(path)\n\n   Add a path to the DLL search path.\n\n   This search path is used when resolving dependencies for imported\n   extension modules (the module itself is resolved through sys.path),\n   and also by :mod:`ctypes`.\n\n   Remove the directory by calling **close()** on the returned object\n   or using it in a :keyword:`with` statement.\n\n   See the `Microsoft documentation\n   <https://msdn.microsoft.com/44228cf2-6306-466c-8f16-f513cd3ba8b5>`_\n   for more information about how DLLs are loaded.\n\n   .. audit-event:: os.add_dll_directory path os.add_dll_directory\n\n   .. availability:: Windows.\n\n   .. versionadded:: 3.8\n      Previous versions of CPython would resolve DLLs using the default\n      behavior for the current process. This led to inconsistencies,\n      such as only sometimes searching :envvar:`PATH` or the current\n      working directory, and OS functions such as ``AddDllDirectory``\n      having no effect.\n\n      In 3.8, the two primary ways DLLs are loaded now explicitly\n      override the process-wide behavior to ensure consistency. See the\n      :ref:`porting notes <bpo-36085-whatsnew>` for information on\n      updating libraries.\n\n\n.. function:: execl(path, arg0, arg1, ...)\n              execle(path, arg0, arg1, ..., env)\n              execlp(file, arg0, arg1, ...)\n              execlpe(file, arg0, arg1, ..., env)\n              execv(path, args)\n              execve(path, args, env)\n              execvp(file, args)\n              execvpe(file, args, env)\n\n   These functions all execute a new program, replacing the current process; they\n   do not return.  On Unix, the new executable is loaded into the current process,\n   and will have the same process id as the caller.  Errors will be reported as\n   :exc:`OSError` exceptions.\n\n   The current process is replaced immediately. Open file objects and\n   descriptors are not flushed, so if there may be data buffered\n   on these open files, you should flush them using\n   :func:`sys.stdout.flush` or :func:`os.fsync` before calling an\n   :func:`exec\\* <execl>` function.\n\n   The \"l\" and \"v\" variants of the :func:`exec\\* <execl>` functions differ in how\n   command-line arguments are passed.  The \"l\" variants are perhaps the easiest\n   to work with if the number of parameters is fixed when the code is written; the\n   individual parameters simply become additional parameters to the :func:`execl\\*`\n   functions.  The \"v\" variants are good when the number of parameters is\n   variable, with the arguments being passed in a list or tuple as the *args*\n   parameter.  In either case, the arguments to the child process should start with\n   the name of the command being run, but this is not enforced.\n\n   The variants which include a \"p\" near the end (:func:`execlp`,\n   :func:`execlpe`, :func:`execvp`, and :func:`execvpe`) will use the\n   :envvar:`PATH` environment variable to locate the program *file*.  When the\n   environment is being replaced (using one of the :func:`exec\\*e <execl>` variants,\n   discussed in the next paragraph), the new environment is used as the source of\n   the :envvar:`PATH` variable. The other variants, :func:`execl`, :func:`execle`,\n   :func:`execv`, and :func:`execve`, will not use the :envvar:`PATH` variable to\n   locate the executable; *path* must contain an appropriate absolute or relative\n   path.\n\n   For :func:`execle`, :func:`execlpe`, :func:`execve`, and :func:`execvpe` (note\n   that these all end in \"e\"), the *env* parameter must be a mapping which is\n   used to define the environment variables for the new process (these are used\n   instead of the current process' environment); the functions :func:`execl`,\n   :func:`execlp`, :func:`execv`, and :func:`execvp` all cause the new process to\n   inherit the environment of the current process.\n\n   For :func:`execve` on some platforms, *path* may also be specified as an open\n   file descriptor.  This functionality may not be supported on your platform;\n   you can check whether or not it is available using :data:`os.supports_fd`.\n   If it is unavailable, using it will raise a :exc:`NotImplementedError`.\n\n   .. audit-event:: os.exec path,args,env os.execl\n\n   .. availability:: Unix, Windows.\n\n   .. versionadded:: 3.3\n      Added support for specifying *path* as an open file descriptor\n      for :func:`execve`.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n.. function:: _exit(n)\n\n   Exit the process with status *n*, without calling cleanup handlers, flushing\n   stdio buffers, etc.\n\n   .. note::\n\n      The standard way to exit is ``sys.exit(n)``.  :func:`_exit` should\n      normally only be used in the child process after a :func:`fork`.\n\nThe following exit codes are defined and can be used with :func:`_exit`,\nalthough they are not required.  These are typically used for system programs\nwritten in Python, such as a mail server's external command delivery program.\n\n.. note::\n\n   Some of these may not be available on all Unix platforms, since there is some\n   variation.  These constants are defined where they are defined by the underlying\n   platform.\n\n\n.. data:: EX_OK\n\n   Exit code that means no error occurred.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_USAGE\n\n   Exit code that means the command was used incorrectly, such as when the wrong\n   number of arguments are given.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_DATAERR\n\n   Exit code that means the input data was incorrect.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_NOINPUT\n\n   Exit code that means an input file did not exist or was not readable.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_NOUSER\n\n   Exit code that means a specified user did not exist.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_NOHOST\n\n   Exit code that means a specified host did not exist.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_UNAVAILABLE\n\n   Exit code that means that a required service is unavailable.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_SOFTWARE\n\n   Exit code that means an internal software error was detected.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_OSERR\n\n   Exit code that means an operating system error was detected, such as the\n   inability to fork or create a pipe.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_OSFILE\n\n   Exit code that means some system file did not exist, could not be opened, or had\n   some other kind of error.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_CANTCREAT\n\n   Exit code that means a user specified output file could not be created.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_IOERR\n\n   Exit code that means that an error occurred while doing I/O on some file.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_TEMPFAIL\n\n   Exit code that means a temporary failure occurred.  This indicates something\n   that may not really be an error, such as a network connection that couldn't be\n   made during a retryable operation.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_PROTOCOL\n\n   Exit code that means that a protocol exchange was illegal, invalid, or not\n   understood.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_NOPERM\n\n   Exit code that means that there were insufficient permissions to perform the\n   operation (but not intended for file system problems).\n\n   .. availability:: Unix.\n\n\n.. data:: EX_CONFIG\n\n   Exit code that means that some kind of configuration error occurred.\n\n   .. availability:: Unix.\n\n\n.. data:: EX_NOTFOUND\n\n   Exit code that means something like \"an entry was not found\".\n\n   .. availability:: Unix.\n\n\n.. function:: fork()\n\n   Fork a child process.  Return ``0`` in the child and the child's process id in the\n   parent.  If an error occurs :exc:`OSError` is raised.\n\n   Note that some platforms including FreeBSD <= 6.3 and Cygwin have\n   known issues when using ``fork()`` from a thread.\n\n   .. audit-event:: os.fork \"\" os.fork\n\n   .. versionchanged:: 3.8\n      Calling ``fork()`` in a subinterpreter is no longer supported\n      (:exc:`RuntimeError` is raised).\n\n   .. warning::\n\n      See :mod:`ssl` for applications that use the SSL module with fork().\n\n   .. availability:: Unix.\n\n\n.. function:: forkpty()\n\n   Fork a child process, using a new pseudo-terminal as the child's controlling\n   terminal. Return a pair of ``(pid, fd)``, where *pid* is ``0`` in the child, the\n   new child's process id in the parent, and *fd* is the file descriptor of the\n   master end of the pseudo-terminal.  For a more portable approach, use the\n   :mod:`pty` module.  If an error occurs :exc:`OSError` is raised.\n\n   .. audit-event:: os.forkpty \"\" os.forkpty\n\n   .. versionchanged:: 3.8\n      Calling ``forkpty()`` in a subinterpreter is no longer supported\n      (:exc:`RuntimeError` is raised).\n\n   .. availability:: some flavors of Unix.\n\n\n.. function:: kill(pid, sig)\n\n   .. index::\n      single: process; killing\n      single: process; signalling\n\n   Send signal *sig* to the process *pid*.  Constants for the specific signals\n   available on the host platform are defined in the :mod:`signal` module.\n\n   Windows: The :data:`signal.CTRL_C_EVENT` and\n   :data:`signal.CTRL_BREAK_EVENT` signals are special signals which can\n   only be sent to console processes which share a common console window,\n   e.g., some subprocesses. Any other value for *sig* will cause the process\n   to be unconditionally killed by the TerminateProcess API, and the exit code\n   will be set to *sig*. The Windows version of :func:`kill` additionally takes\n   process handles to be killed.\n\n   See also :func:`signal.pthread_kill`.\n\n   .. audit-event:: os.kill pid,sig os.kill\n\n   .. versionadded:: 3.2\n      Windows support.\n\n\n.. function:: killpg(pgid, sig)\n\n   .. index::\n      single: process; killing\n      single: process; signalling\n\n   Send the signal *sig* to the process group *pgid*.\n\n   .. audit-event:: os.killpg pgid,sig os.killpg\n\n   .. availability:: Unix.\n\n\n.. function:: nice(increment)\n\n   Add *increment* to the process's \"niceness\".  Return the new niceness.\n\n   .. availability:: Unix.\n\n\n.. function:: plock(op)\n\n   Lock program segments into memory.  The value of *op* (defined in\n   ``<sys/lock.h>``) determines which segments are locked.\n\n   .. availability:: Unix.\n\n\n.. function:: popen(cmd, mode='r', buffering=-1)\n\n   Open a pipe to or from command *cmd*.\n   The return value is an open file object\n   connected to the pipe, which can be read or written depending on whether *mode*\n   is ``'r'`` (default) or ``'w'``. The *buffering* argument has the same meaning as\n   the corresponding argument to the built-in :func:`open` function. The\n   returned file object reads or writes text strings rather than bytes.\n\n   The ``close`` method returns :const:`None` if the subprocess exited\n   successfully, or the subprocess's return code if there was an\n   error. On POSIX systems, if the return code is positive it\n   represents the return value of the process left-shifted by one\n   byte.  If the return code is negative, the process was terminated\n   by the signal given by the negated value of the return code.  (For\n   example, the return value might be ``- signal.SIGKILL`` if the\n   subprocess was killed.)  On Windows systems, the return value\n   contains the signed integer return code from the child process.\n\n   This is implemented using :class:`subprocess.Popen`; see that class's\n   documentation for more powerful ways to manage and communicate with\n   subprocesses.\n\n\n.. function:: posix_spawn(path, argv, env, *, file_actions=None, \\\n                          setpgroup=None, resetids=False, setsid=False, setsigmask=(), \\\n                          setsigdef=(), scheduler=None)\n\n   Wraps the :c:func:`posix_spawn` C library API for use from Python.\n\n   Most users should use :func:`subprocess.run` instead of :func:`posix_spawn`.\n\n   The positional-only arguments *path*, *args*, and *env* are similar to\n   :func:`execve`.\n\n   The *path* parameter is the path to the executable file.  The *path* should\n   contain a directory.  Use :func:`posix_spawnp` to pass an executable file\n   without directory.\n\n   The *file_actions* argument may be a sequence of tuples describing actions\n   to take on specific file descriptors in the child process between the C\n   library implementation's :c:func:`fork` and :c:func:`exec` steps.\n   The first item in each tuple must be one of the three type indicator\n   listed below describing the remaining tuple elements:\n\n   .. data:: POSIX_SPAWN_OPEN\n\n      (``os.POSIX_SPAWN_OPEN``, *fd*, *path*, *flags*, *mode*)\n\n      Performs ``os.dup2(os.open(path, flags, mode), fd)``.\n\n   .. data:: POSIX_SPAWN_CLOSE\n\n      (``os.POSIX_SPAWN_CLOSE``, *fd*)\n\n      Performs ``os.close(fd)``.\n\n   .. data:: POSIX_SPAWN_DUP2\n\n      (``os.POSIX_SPAWN_DUP2``, *fd*, *new_fd*)\n\n      Performs ``os.dup2(fd, new_fd)``.\n\n   These tuples correspond to the C library\n   :c:func:`posix_spawn_file_actions_addopen`,\n   :c:func:`posix_spawn_file_actions_addclose`, and\n   :c:func:`posix_spawn_file_actions_adddup2` API calls used to prepare\n   for the :c:func:`posix_spawn` call itself.\n\n   The *setpgroup* argument will set the process group of the child to the value\n   specified. If the value specified is 0, the child's process group ID will be\n   made the same as its process ID. If the value of *setpgroup* is not set, the\n   child will inherit the parent's process group ID. This argument corresponds\n   to the C library :c:data:`POSIX_SPAWN_SETPGROUP` flag.\n\n   If the *resetids* argument is ``True`` it will reset the effective UID and\n   GID of the child to the real UID and GID of the parent process. If the\n   argument is ``False``, then the child retains the effective UID and GID of\n   the parent. In either case, if the set-user-ID and set-group-ID permission\n   bits are enabled on the executable file, their effect will override the\n   setting of the effective UID and GID. This argument corresponds to the C\n   library :c:data:`POSIX_SPAWN_RESETIDS` flag.\n\n   If the *setsid* argument is ``True``, it will create a new session ID\n   for `posix_spawn`. *setsid* requires :c:data:`POSIX_SPAWN_SETSID`\n   or :c:data:`POSIX_SPAWN_SETSID_NP` flag. Otherwise, :exc:`NotImplementedError`\n   is raised.\n\n   The *setsigmask* argument will set the signal mask to the signal set\n   specified. If the parameter is not used, then the child inherits the\n   parent's signal mask. This argument corresponds to the C library\n   :c:data:`POSIX_SPAWN_SETSIGMASK` flag.\n\n   The *sigdef* argument will reset the disposition of all signals in the set\n   specified. This argument corresponds to the C library\n   :c:data:`POSIX_SPAWN_SETSIGDEF` flag.\n\n   The *scheduler* argument must be a tuple containing the (optional) scheduler\n   policy and an instance of :class:`sched_param` with the scheduler parameters.\n   A value of ``None`` in the place of the scheduler policy indicates that is\n   not being provided. This argument is a combination of the C library\n   :c:data:`POSIX_SPAWN_SETSCHEDPARAM` and :c:data:`POSIX_SPAWN_SETSCHEDULER`\n   flags.\n\n   .. audit-event:: os.posix_spawn path,argv,env os.posix_spawn\n\n   .. versionadded:: 3.8\n\n   .. availability:: Unix.\n\n.. function:: posix_spawnp(path, argv, env, *, file_actions=None, \\\n                          setpgroup=None, resetids=False, setsid=False, setsigmask=(), \\\n                          setsigdef=(), scheduler=None)\n\n   Wraps the :c:func:`posix_spawnp` C library API for use from Python.\n\n   Similar to :func:`posix_spawn` except that the system searches\n   for the *executable* file in the list of directories specified by the\n   :envvar:`PATH` environment variable (in the same way as for ``execvp(3)``).\n\n   .. audit-event:: os.posix_spawn path,argv,env os.posix_spawnp\n\n   .. versionadded:: 3.8\n\n   .. availability:: See :func:`posix_spawn` documentation.\n\n\n.. function:: register_at_fork(*, before=None, after_in_parent=None, \\\n                               after_in_child=None)\n\n   Register callables to be executed when a new child process is forked\n   using :func:`os.fork` or similar process cloning APIs.\n   The parameters are optional and keyword-only.\n   Each specifies a different call point.\n\n   * *before* is a function called before forking a child process.\n   * *after_in_parent* is a function called from the parent process\n     after forking a child process.\n   * *after_in_child* is a function called from the child process.\n\n   These calls are only made if control is expected to return to the\n   Python interpreter.  A typical :mod:`subprocess` launch will not\n   trigger them as the child is not going to re-enter the interpreter.\n\n   Functions registered for execution before forking are called in\n   reverse registration order.  Functions registered for execution\n   after forking (either in the parent or in the child) are called\n   in registration order.\n\n   Note that :c:func:`fork` calls made by third-party C code may not\n   call those functions, unless it explicitly calls :c:func:`PyOS_BeforeFork`,\n   :c:func:`PyOS_AfterFork_Parent` and :c:func:`PyOS_AfterFork_Child`.\n\n   There is no way to unregister a function.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.7\n\n\n.. function:: spawnl(mode, path, ...)\n              spawnle(mode, path, ..., env)\n              spawnlp(mode, file, ...)\n              spawnlpe(mode, file, ..., env)\n              spawnv(mode, path, args)\n              spawnve(mode, path, args, env)\n              spawnvp(mode, file, args)\n              spawnvpe(mode, file, args, env)\n\n   Execute the program *path* in a new process.\n\n   (Note that the :mod:`subprocess` module provides more powerful facilities for\n   spawning new processes and retrieving their results; using that module is\n   preferable to using these functions.  Check especially the\n   :ref:`subprocess-replacements` section.)\n\n   If *mode* is :const:`P_NOWAIT`, this function returns the process id of the new\n   process; if *mode* is :const:`P_WAIT`, returns the process's exit code if it\n   exits normally, or ``-signal``, where *signal* is the signal that killed the\n   process.  On Windows, the process id will actually be the process handle, so can\n   be used with the :func:`waitpid` function.\n\n   Note on VxWorks, this function doesn't return ``-signal`` when the new process is\n   killed. Instead it raises OSError exception.\n\n   The \"l\" and \"v\" variants of the :func:`spawn\\* <spawnl>` functions differ in how\n   command-line arguments are passed.  The \"l\" variants are perhaps the easiest\n   to work with if the number of parameters is fixed when the code is written; the\n   individual parameters simply become additional parameters to the\n   :func:`spawnl\\*` functions.  The \"v\" variants are good when the number of\n   parameters is variable, with the arguments being passed in a list or tuple as\n   the *args* parameter.  In either case, the arguments to the child process must\n   start with the name of the command being run.\n\n   The variants which include a second \"p\" near the end (:func:`spawnlp`,\n   :func:`spawnlpe`, :func:`spawnvp`, and :func:`spawnvpe`) will use the\n   :envvar:`PATH` environment variable to locate the program *file*.  When the\n   environment is being replaced (using one of the :func:`spawn\\*e <spawnl>` variants,\n   discussed in the next paragraph), the new environment is used as the source of\n   the :envvar:`PATH` variable.  The other variants, :func:`spawnl`,\n   :func:`spawnle`, :func:`spawnv`, and :func:`spawnve`, will not use the\n   :envvar:`PATH` variable to locate the executable; *path* must contain an\n   appropriate absolute or relative path.\n\n   For :func:`spawnle`, :func:`spawnlpe`, :func:`spawnve`, and :func:`spawnvpe`\n   (note that these all end in \"e\"), the *env* parameter must be a mapping\n   which is used to define the environment variables for the new process (they are\n   used instead of the current process' environment); the functions\n   :func:`spawnl`, :func:`spawnlp`, :func:`spawnv`, and :func:`spawnvp` all cause\n   the new process to inherit the environment of the current process.  Note that\n   keys and values in the *env* dictionary must be strings; invalid keys or\n   values will cause the function to fail, with a return value of ``127``.\n\n   As an example, the following calls to :func:`spawnlp` and :func:`spawnvpe` are\n   equivalent::\n\n      import os\n      os.spawnlp(os.P_WAIT, 'cp', 'cp', 'index.html', '/dev/null')\n\n      L = ['cp', 'index.html', '/dev/null']\n      os.spawnvpe(os.P_WAIT, 'cp', L, os.environ)\n\n   .. audit-event:: os.spawn mode,path,args,env os.spawnl\n\n   .. availability:: Unix, Windows.  :func:`spawnlp`, :func:`spawnlpe`, :func:`spawnvp`\n      and :func:`spawnvpe` are not available on Windows.  :func:`spawnle` and\n      :func:`spawnve` are not thread-safe on Windows; we advise you to use the\n      :mod:`subprocess` module instead.\n\n   .. versionchanged:: 3.6\n      Accepts a :term:`path-like object`.\n\n\n.. data:: P_NOWAIT\n          P_NOWAITO\n\n   Possible values for the *mode* parameter to the :func:`spawn\\* <spawnl>` family of\n   functions.  If either of these values is given, the :func:`spawn\\*` functions\n   will return as soon as the new process has been created, with the process id as\n   the return value.\n\n   .. availability:: Unix, Windows.\n\n\n.. data:: P_WAIT\n\n   Possible value for the *mode* parameter to the :func:`spawn\\* <spawnl>` family of\n   functions.  If this is given as *mode*, the :func:`spawn\\*` functions will not\n   return until the new process has run to completion and will return the exit code\n   of the process the run is successful, or ``-signal`` if a signal kills the\n   process.\n\n   .. availability:: Unix, Windows.\n\n\n.. data:: P_DETACH\n          P_OVERLAY\n\n   Possible values for the *mode* parameter to the :func:`spawn\\* <spawnl>` family of\n   functions.  These are less portable than those listed above. :const:`P_DETACH`\n   is similar to :const:`P_NOWAIT`, but the new process is detached from the\n   console of the calling process. If :const:`P_OVERLAY` is used, the current\n   process will be replaced; the :func:`spawn\\* <spawnl>` function will not return.\n\n   .. availability:: Windows.\n\n\n.. function:: startfile(path[, operation])\n\n   Start a file with its associated application.\n\n   When *operation* is not specified or ``'open'``, this acts like double-clicking\n   the file in Windows Explorer, or giving the file name as an argument to the\n   :program:`start` command from the interactive command shell: the file is opened\n   with whatever application (if any) its extension is associated.\n\n   When another *operation* is given, it must be a \"command verb\" that specifies\n   what should be done with the file. Common verbs documented by Microsoft are\n   ``'print'`` and  ``'edit'`` (to be used on files) as well as ``'explore'`` and\n   ``'find'`` (to be used on directories).\n\n   :func:`startfile` returns as soon as the associated application is launched.\n   There is no option to wait for the application to close, and no way to retrieve\n   the application's exit status.  The *path* parameter is relative to the current\n   directory.  If you want to use an absolute path, make sure the first character\n   is not a slash (``'/'``); the underlying Win32 :c:func:`ShellExecute` function\n   doesn't work if it is.  Use the :func:`os.path.normpath` function to ensure that\n   the path is properly encoded for Win32.\n\n   To reduce interpreter startup overhead, the Win32 :c:func:`ShellExecute`\n   function is not resolved until this function is first called.  If the function\n   cannot be resolved, :exc:`NotImplementedError` will be raised.\n\n   .. audit-event:: os.startfile path,operation os.startfile\n\n   .. availability:: Windows.\n\n\n.. function:: system(command)\n\n   Execute the command (a string) in a subshell.  This is implemented by calling\n   the Standard C function :c:func:`system`, and has the same limitations.\n   Changes to :data:`sys.stdin`, etc. are not reflected in the environment of\n   the executed command. If *command* generates any output, it will be sent to\n   the interpreter standard output stream.\n\n   On Unix, the return value is the exit status of the process encoded in the\n   format specified for :func:`wait`.  Note that POSIX does not specify the\n   meaning of the return value of the C :c:func:`system` function, so the return\n   value of the Python function is system-dependent.\n\n   On Windows, the return value is that returned by the system shell after\n   running *command*.  The shell is given by the Windows environment variable\n   :envvar:`COMSPEC`: it is usually :program:`cmd.exe`, which returns the exit\n   status of the command run; on systems using a non-native shell, consult your\n   shell documentation.\n\n   The :mod:`subprocess` module provides more powerful facilities for spawning\n   new processes and retrieving their results; using that module is preferable\n   to using this function.  See the :ref:`subprocess-replacements` section in\n   the :mod:`subprocess` documentation for some helpful recipes.\n\n   .. audit-event:: os.system command os.system\n\n   .. availability:: Unix, Windows.\n\n\n.. function:: times()\n\n   Returns the current global process times.\n   The return value is an object with five attributes:\n\n   * :attr:`user` - user time\n   * :attr:`system` - system time\n   * :attr:`children_user` - user time of all child processes\n   * :attr:`children_system` - system time of all child processes\n   * :attr:`elapsed` - elapsed real time since a fixed point in the past\n\n   For backwards compatibility, this object also behaves like a five-tuple\n   containing :attr:`user`, :attr:`system`, :attr:`children_user`,\n   :attr:`children_system`, and :attr:`elapsed` in that order.\n\n   See the Unix manual page\n   :manpage:`times(2)` and :manpage:`times(3)` manual page on Unix or `the GetProcessTimes MSDN\n   <https://docs.microsoft.com/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocesstimes>`_\n   on Windows. On Windows, only :attr:`user` and :attr:`system` are known; the other attributes are zero.\n\n   .. availability:: Unix, Windows.\n\n   .. versionchanged:: 3.3\n      Return type changed from a tuple to a tuple-like object\n      with named attributes.\n\n\n.. function:: wait()\n\n   Wait for completion of a child process, and return a tuple containing its pid\n   and exit status indication: a 16-bit number, whose low byte is the signal number\n   that killed the process, and whose high byte is the exit status (if the signal\n   number is zero); the high bit of the low byte is set if a core file was\n   produced.\n\n   .. availability:: Unix.\n\n.. function:: waitid(idtype, id, options)\n\n   Wait for the completion of one or more child processes.\n   *idtype* can be :data:`P_PID`, :data:`P_PGID` or :data:`P_ALL`.\n   *id* specifies the pid to wait on.\n   *options* is constructed from the ORing of one or more of :data:`WEXITED`,\n   :data:`WSTOPPED` or :data:`WCONTINUED` and additionally may be ORed with\n   :data:`WNOHANG` or :data:`WNOWAIT`. The return value is an object\n   representing the data contained in the :c:type:`siginfo_t` structure, namely:\n   :attr:`si_pid`, :attr:`si_uid`, :attr:`si_signo`, :attr:`si_status`,\n   :attr:`si_code` or ``None`` if :data:`WNOHANG` is specified and there are no\n   children in a waitable state.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n.. data:: P_PID\n          P_PGID\n          P_ALL\n\n   These are the possible values for *idtype* in :func:`waitid`. They affect\n   how *id* is interpreted.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n.. data:: WEXITED\n          WSTOPPED\n          WNOWAIT\n\n   Flags that can be used in *options* in :func:`waitid` that specify what\n   child signal to wait for.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. data:: CLD_EXITED\n          CLD_DUMPED\n          CLD_TRAPPED\n          CLD_CONTINUED\n\n   These are the possible values for :attr:`si_code` in the result returned by\n   :func:`waitid`.\n\n   .. availability:: Unix.\n\n   .. versionadded:: 3.3\n\n\n.. function:: waitpid(pid, options)\n\n   The details of this function differ on Unix and Windows.\n\n   On Unix: Wait for completion of a child process given by process id *pid*, and\n   return a tuple containing its process id and exit status indication (encoded as\n   for :func:`wait`).  The semantics of the call are affected by the value of the\n   integer *options*, which should be ``0`` for normal operation.\n\n   If *pid* is greater than ``0``, :func:`waitpid` requests status information for\n   that specific process.  If *pid* is ``0``, the request is for the status of any\n   child in the process group of the current process.  If *pid* is ``-1``, the\n   request pertains to any child of the current process.  If *pid* is less than\n   ``-1``, status is requested for any process in the process group ``-pid`` (the\n   absolute value of *pid*).\n\n   An :exc:`OSError` is raised with the value of errno when the syscall\n   returns -1.\n\n   On Windows: Wait for completion of a process given by process handle *pid*, and\n   return a tuple containing *pid*, and its exit status shifted left by 8 bits\n   (shifting makes cross-platform use of the function easier). A *pid* less than or\n   equal to ``0`` has no special meaning on Windows, and raises an exception. The\n   value of integer *options* has no effect. *pid* can refer to any process whose\n   id is known, not necessarily a child process. The :func:`spawn\\* <spawnl>`\n   functions called with :const:`P_NOWAIT` return suitable process handles.\n\n   .. versionchanged:: 3.5\n      If the system call is interrupted and the signal handler does not raise an\n      exception, the function now retries the system call instead of raising an\n      :exc:`InterruptedError` exception (see :pep:`475` for the rationale).\n\n\n.. function:: wait3(options)\n\n   Similar to :func:`waitpid`, except no process id argument is given and a\n   3-element tuple containing the child's process id, exit status indication,\n   and resource usage information is returned.  Refer to\n   :mod:`resource`.\\ :func:`~resource.getrusage` for details on resource usage\n   information.  The option argument is the same as that provided to\n   :func:`waitpid` and :func:`wait4`.\n\n   .. availability:: Unix.\n\n\n.. function:: wait4(pid, options)\n\n   Similar to :func:`waitpid`, except a 3-element tuple, containing the child's\n   process id, exit status indication, and resource usage information is returned.\n   Refer to :mod:`resource`.\\ :func:`~resource.getrusage` for details on\n   resource usage information.  The arguments to :func:`wait4` are the same\n   as those provided to :func:`waitpid`.\n\n   .. availability:: Unix.\n\n\n.. data:: WNOHANG\n\n   The option for :func:`waitpid` to return immediately if no child process status\n   is available immediately. The function returns ``(0, 0)`` in this case.\n\n   .. availability:: Unix.\n\n\n.. data:: WCONTINUED\n\n   This option causes child processes to be reported if they have been continued\n   from a job control stop since their status was last reported.\n\n   .. availability:: some Unix systems.\n\n\n.. data:: WUNTRACED\n\n   This option causes child processes to be reported if they have been stopped but\n   their current state has not been reported since they were stopped.\n\n   .. availability:: Unix.\n\n\nThe following functions take a process status code as returned by\n:func:`system`, :func:`wait`, or :func:`waitpid` as a parameter.  They may be\nused to determine the disposition of a process.\n\n.. function:: WCOREDUMP(status)\n\n   Return ``True`` if a core dump was generated for the process, otherwise\n   return ``False``.\n\n   This function should be employed only if :func:`WIFSIGNALED` is true.\n\n   .. availability:: Unix.\n\n\n.. function:: WIFCONTINUED(status)\n\n   Return ``True`` if a stopped child has been resumed by delivery of\n   :data:`~signal.SIGCONT` (if the process has been continued from a job\n   control stop), otherwise return ``False``.\n\n   See :data:`WCONTINUED` option.\n\n   .. availability:: Unix.\n\n\n.. function:: WIFSTOPPED(status)\n\n   Return ``True`` if the process was stopped by delivery of a signal,\n   otherwise return ``False``.\n\n   :func:`WIFSTOPPED` only returns ``True`` if the :func:`waitpid` call was\n   done using :data:`WUNTRACED` option or when the process is being traced (see\n   :manpage:`ptrace(2)`).\n\n   .. availability:: Unix.\n\n.. function:: WIFSIGNALED(status)\n\n   Return ``True`` if the process was terminated by a signal, otherwise return\n   ``False``.\n\n   .. availability:: Unix.\n\n\n.. function:: WIFEXITED(status)\n\n   Return ``True`` if the process exited terminated normally, that is,\n   by calling ``exit()`` or ``_exit()``, or by returning from ``main()``;\n   otherwise return ``False``.\n\n   .. availability:: Unix.\n\n\n.. function:: WEXITSTATUS(status)\n\n   Return the process exit status.\n\n   This function should be employed only if :func:`WIFEXITED` is true.\n\n   .. availability:: Unix.\n\n\n.. function:: WSTOPSIG(status)\n\n   Return the signal which caused the process to stop.\n\n   This function should be employed only if :func:`WIFSTOPPED` is true.\n\n   .. availability:: Unix.\n\n\n.. function:: WTERMSIG(status)\n\n   Return the number of the signal that caused the process to terminate.\n\n   This function should be employed only if :func:`WIFSIGNALED` is true.\n\n   .. availability:: Unix.\n\n\nInterface to the scheduler\n--------------------------\n\nThese functions control how a process is allocated CPU time by the operating\nsystem. They are only available on some Unix platforms. For more detailed\ninformation, consult your Unix manpages.\n\n.. versionadded:: 3.3\n\nThe following scheduling policies are exposed if they are supported by the\noperating system.\n\n.. data:: SCHED_OTHER\n\n   The default scheduling policy.\n\n.. data:: SCHED_BATCH\n\n   Scheduling policy for CPU-intensive processes that tries to preserve\n   interactivity on the rest of the computer.\n\n.. data:: SCHED_IDLE\n\n   Scheduling policy for extremely low priority background tasks.\n\n.. data:: SCHED_SPORADIC\n\n   Scheduling policy for sporadic server programs.\n\n.. data:: SCHED_FIFO\n\n   A First In First Out scheduling policy.\n\n.. data:: SCHED_RR\n\n   A round-robin scheduling policy.\n\n.. data:: SCHED_RESET_ON_FORK\n\n   This flag can be OR'ed with any other scheduling policy. When a process with\n   this flag set forks, its child's scheduling policy and priority are reset to\n   the default.\n\n\n.. class:: sched_param(sched_priority)\n\n   This class represents tunable scheduling parameters used in\n   :func:`sched_setparam`, :func:`sched_setscheduler`, and\n   :func:`sched_getparam`. It is immutable.\n\n   At the moment, there is only one possible parameter:\n\n   .. attribute:: sched_priority\n\n      The scheduling priority for a scheduling policy.\n\n\n.. function:: sched_get_priority_min(policy)\n\n   Get the minimum priority value for *policy*. *policy* is one of the\n   scheduling policy constants above.\n\n\n.. function:: sched_get_priority_max(policy)\n\n   Get the maximum priority value for *policy*. *policy* is one of the\n   scheduling policy constants above.\n\n\n.. function:: sched_setscheduler(pid, policy, param)\n\n   Set the scheduling policy for the process with PID *pid*. A *pid* of 0 means\n   the calling process. *policy* is one of the scheduling policy constants\n   above. *param* is a :class:`sched_param` instance.\n\n\n.. function:: sched_getscheduler(pid)\n\n   Return the scheduling policy for the process with PID *pid*. A *pid* of 0\n   means the calling process. The result is one of the scheduling policy\n   constants above.\n\n\n.. function:: sched_setparam(pid, param)\n\n   Set a scheduling parameters for the process with PID *pid*. A *pid* of 0 means\n   the calling process. *param* is a :class:`sched_param` instance.\n\n\n.. function:: sched_getparam(pid)\n\n   Return the scheduling parameters as a :class:`sched_param` instance for the\n   process with PID *pid*. A *pid* of 0 means the calling process.\n\n\n.. function:: sched_rr_get_interval(pid)\n\n   Return the round-robin quantum in seconds for the process with PID *pid*. A\n   *pid* of 0 means the calling process.\n\n\n.. function:: sched_yield()\n\n   Voluntarily relinquish the CPU.\n\n\n.. function:: sched_setaffinity(pid, mask)\n\n   Restrict the process with PID *pid* (or the current process if zero) to a\n   set of CPUs.  *mask* is an iterable of integers representing the set of\n   CPUs to which the process should be restricted.\n\n\n.. function:: sched_getaffinity(pid)\n\n   Return the set of CPUs the process with PID *pid* (or the current process\n   if zero) is restricted to.\n\n\n.. _os-path:\n\nMiscellaneous System Information\n--------------------------------\n\n\n.. function:: confstr(name)\n\n   Return string-valued system configuration values. *name* specifies the\n   configuration value to retrieve; it may be a string which is the name of a\n   defined system value; these names are specified in a number of standards (POSIX,\n   Unix 95, Unix 98, and others).  Some platforms define additional names as well.\n   The names known to the host operating system are given as the keys of the\n   ``confstr_names`` dictionary.  For configuration variables not included in that\n   mapping, passing an integer for *name* is also accepted.\n\n   If the configuration value specified by *name* isn't defined, ``None`` is\n   returned.\n\n   If *name* is a string and is not known, :exc:`ValueError` is raised.  If a\n   specific value for *name* is not supported by the host system, even if it is\n   included in ``confstr_names``, an :exc:`OSError` is raised with\n   :const:`errno.EINVAL` for the error number.\n\n   .. availability:: Unix.\n\n\n.. data:: confstr_names\n\n   Dictionary mapping names accepted by :func:`confstr` to the integer values\n   defined for those names by the host operating system. This can be used to\n   determine the set of names known to the system.\n\n   .. availability:: Unix.\n\n\n.. function:: cpu_count()\n\n   Return the number of CPUs in the system. Returns ``None`` if undetermined.\n\n   This number is not equivalent to the number of CPUs the current process can\n   use.  The number of usable CPUs can be obtained with\n   ``len(os.sched_getaffinity(0))``\n\n\n   .. versionadded:: 3.4\n\n\n.. function:: getloadavg()\n\n   Return the number of processes in the system run queue averaged over the last\n   1, 5, and 15 minutes or raises :exc:`OSError` if the load average was\n   unobtainable.\n\n   .. availability:: Unix.\n\n\n.. function:: sysconf(name)\n\n   Return integer-valued system configuration values. If the configuration value\n   specified by *name* isn't defined, ``-1`` is returned.  The comments regarding\n   the *name* parameter for :func:`confstr` apply here as well; the dictionary that\n   provides information on the known names is given by ``sysconf_names``.\n\n   .. availability:: Unix.\n\n\n.. data:: sysconf_names\n\n   Dictionary mapping names accepted by :func:`sysconf` to the integer values\n   defined for those names by the host operating system. This can be used to\n   determine the set of names known to the system.\n\n   .. availability:: Unix.\n\nThe following data values are used to support path manipulation operations.  These\nare defined for all platforms.\n\nHigher-level operations on pathnames are defined in the :mod:`os.path` module.\n\n\n.. index:: single: . (dot); in pathnames\n.. data:: curdir\n\n   The constant string used by the operating system to refer to the current\n   directory. This is ``'.'`` for Windows and POSIX. Also available via\n   :mod:`os.path`.\n\n\n.. index:: single: ..; in pathnames\n.. data:: pardir\n\n   The constant string used by the operating system to refer to the parent\n   directory. This is ``'..'`` for Windows and POSIX. Also available via\n   :mod:`os.path`.\n\n\n.. index:: single: / (slash); in pathnames\n.. index:: single: \\ (backslash); in pathnames (Windows)\n.. data:: sep\n\n   The character used by the operating system to separate pathname components.\n   This is ``'/'`` for POSIX and ``'\\\\'`` for Windows.  Note that knowing this\n   is not sufficient to be able to parse or concatenate pathnames --- use\n   :func:`os.path.split` and :func:`os.path.join` --- but it is occasionally\n   useful. Also available via :mod:`os.path`.\n\n\n.. index:: single: / (slash); in pathnames\n.. data:: altsep\n\n   An alternative character used by the operating system to separate pathname\n   components, or ``None`` if only one separator character exists.  This is set to\n   ``'/'`` on Windows systems where ``sep`` is a backslash. Also available via\n   :mod:`os.path`.\n\n\n.. index:: single: . (dot); in pathnames\n.. data:: extsep\n\n   The character which separates the base filename from the extension; for example,\n   the ``'.'`` in :file:`os.py`. Also available via :mod:`os.path`.\n\n\n.. index:: single: : (colon); path separator (POSIX)\n   single: ; (semicolon)\n.. data:: pathsep\n\n   The character conventionally used by the operating system to separate search\n   path components (as in :envvar:`PATH`), such as ``':'`` for POSIX or ``';'`` for\n   Windows. Also available via :mod:`os.path`.\n\n\n.. data:: defpath\n\n   The default search path used by :func:`exec\\*p\\* <execl>` and\n   :func:`spawn\\*p\\* <spawnl>` if the environment doesn't have a ``'PATH'``\n   key. Also available via :mod:`os.path`.\n\n\n.. data:: linesep\n\n   The string used to separate (or, rather, terminate) lines on the current\n   platform.  This may be a single character, such as ``'\\n'`` for POSIX, or\n   multiple characters, for example, ``'\\r\\n'`` for Windows. Do not use\n   *os.linesep* as a line terminator when writing files opened in text mode (the\n   default); use a single ``'\\n'`` instead, on all platforms.\n\n\n.. data:: devnull\n\n   The file path of the null device. For example: ``'/dev/null'`` for\n   POSIX, ``'nul'`` for Windows.  Also available via :mod:`os.path`.\n\n.. data:: RTLD_LAZY\n          RTLD_NOW\n          RTLD_GLOBAL\n          RTLD_LOCAL\n          RTLD_NODELETE\n          RTLD_NOLOAD\n          RTLD_DEEPBIND\n\n   Flags for use with the :func:`~sys.setdlopenflags` and\n   :func:`~sys.getdlopenflags` functions.  See the Unix manual page\n   :manpage:`dlopen(3)` for what the different flags mean.\n\n   .. versionadded:: 3.3\n\n\nRandom numbers\n--------------\n\n\n.. function:: getrandom(size, flags=0)\n\n   Get up to *size* random bytes. The function can return less bytes than\n   requested.\n\n   These bytes can be used to seed user-space random number generators or for\n   cryptographic purposes.\n\n   ``getrandom()`` relies on entropy gathered from device drivers and other\n   sources of environmental noise. Unnecessarily reading large quantities of\n   data will have a negative impact on  other users  of the ``/dev/random`` and\n   ``/dev/urandom`` devices.\n\n   The flags argument is a bit mask that can contain zero or more of the\n   following values ORed together: :py:data:`os.GRND_RANDOM` and\n   :py:data:`GRND_NONBLOCK`.\n\n   See also the `Linux getrandom() manual page\n   <http://man7.org/linux/man-pages/man2/getrandom.2.html>`_.\n\n   .. availability:: Linux 3.17 and newer.\n\n   .. versionadded:: 3.6\n\n.. function:: urandom(size)\n\n   Return a string of *size* random bytes suitable for cryptographic use.\n\n   This function returns random bytes from an OS-specific randomness source.  The\n   returned data should be unpredictable enough for cryptographic applications,\n   though its exact quality depends on the OS implementation.\n\n   On Linux, if the ``getrandom()`` syscall is available, it is used in\n   blocking mode: block until the system urandom entropy pool is initialized\n   (128 bits of entropy are collected by the kernel). See the :pep:`524` for\n   the rationale. On Linux, the :func:`getrandom` function can be used to get\n   random bytes in non-blocking mode (using the :data:`GRND_NONBLOCK` flag) or\n   to poll until the system urandom entropy pool is initialized.\n\n   On a Unix-like system, random bytes are read from the ``/dev/urandom``\n   device. If the ``/dev/urandom`` device is not available or not readable, the\n   :exc:`NotImplementedError` exception is raised.\n\n   On Windows, it will use ``CryptGenRandom()``.\n\n   .. seealso::\n      The :mod:`secrets` module provides higher level functions. For an\n      easy-to-use interface to the random number generator provided by your\n      platform, please see :class:`random.SystemRandom`.\n\n   .. versionchanged:: 3.6.0\n      On Linux, ``getrandom()`` is now used in blocking mode to increase the\n      security.\n\n   .. versionchanged:: 3.5.2\n      On Linux, if the ``getrandom()`` syscall blocks (the urandom entropy pool\n      is not initialized yet), fall back on reading ``/dev/urandom``.\n\n   .. versionchanged:: 3.5\n      On Linux 3.17 and newer, the ``getrandom()`` syscall is now used\n      when available.  On OpenBSD 5.6 and newer, the C ``getentropy()``\n      function is now used. These functions avoid the usage of an internal file\n      descriptor.\n\n.. data:: GRND_NONBLOCK\n\n   By  default, when reading from ``/dev/random``, :func:`getrandom` blocks if\n   no random bytes are available, and when reading from ``/dev/urandom``, it blocks\n   if the entropy pool has not yet been initialized.\n\n   If the :py:data:`GRND_NONBLOCK` flag is set, then :func:`getrandom` does not\n   block in these cases, but instead immediately raises :exc:`BlockingIOError`.\n\n   .. versionadded:: 3.6\n\n.. data:: GRND_RANDOM\n\n   If  this  bit  is  set,  then  random bytes are drawn from the\n   ``/dev/random`` pool instead of the ``/dev/urandom`` pool.\n\n   .. versionadded:: 3.6\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/sys.rst": ":mod:`sys` --- System-specific parameters and functions\n=======================================================\n\n.. module:: sys\n   :synopsis: Access system-specific parameters and functions.\n\n--------------\n\nThis module provides access to some variables used or maintained by the\ninterpreter and to functions that interact strongly with the interpreter. It is\nalways available.\n\n\n.. data:: abiflags\n\n   On POSIX systems where Python was built with the standard ``configure``\n   script, this contains the ABI flags as specified by :pep:`3149`.\n\n   .. versionchanged:: 3.8\n      Default flags became an empty string (``m`` flag for pymalloc has been\n      removed).\n\n   .. versionadded:: 3.2\n\n\n.. function:: addaudithook(hook)\n\n   Append the callable *hook* to the list of active auditing hooks for the\n   current interpreter.\n\n   When an auditing event is raised through the :func:`sys.audit` function, each\n   hook will be called in the order it was added with the event name and the\n   tuple of arguments. Native hooks added by :c:func:`PySys_AddAuditHook` are\n   called first, followed by hooks added in the current interpreter.  Hooks\n   can then log the event, raise an exception to abort the operation,\n   or terminate the process entirely.\n\n   .. audit-event:: sys.addaudithook \"\" sys.addaudithook\n\n      Calling :func:`sys.addaudithook` will itself raise an auditing event\n      named ``sys.addaudithook`` with no arguments. If any\n      existing hooks raise an exception derived from :class:`RuntimeError`, the\n      new hook will not be added and the exception suppressed. As a result,\n      callers cannot assume that their hook has been added unless they control\n      all existing hooks.\n\n   See the :ref:`audit events table <audit-events>` for all events raised by\n   CPython, and :pep:`578` for the original design discussion.\n\n   .. versionadded:: 3.8\n\n   .. versionchanged:: 3.8.1\n\n      Exceptions derived from :class:`Exception` but not :class:`RuntimeError`\n      are no longer suppressed.\n\n   .. impl-detail::\n\n      When tracing is enabled (see :func:`settrace`), Python hooks are only\n      traced if the callable has a ``__cantrace__`` member that is set to a\n      true value. Otherwise, trace functions will skip the hook.\n\n\n.. data:: argv\n\n   The list of command line arguments passed to a Python script. ``argv[0]`` is the\n   script name (it is operating system dependent whether this is a full pathname or\n   not).  If the command was executed using the :option:`-c` command line option to\n   the interpreter, ``argv[0]`` is set to the string ``'-c'``.  If no script name\n   was passed to the Python interpreter, ``argv[0]`` is the empty string.\n\n   To loop over the standard input, or the list of files given on the\n   command line, see the :mod:`fileinput` module.\n\n   .. note::\n      On Unix, command line arguments are passed by bytes from OS.  Python decodes\n      them with filesystem encoding and \"surrogateescape\" error handler.\n      When you need original bytes, you can get it by\n      ``[os.fsencode(arg) for arg in sys.argv]``.\n\n\n.. _auditing:\n\n.. function:: audit(event, *args)\n\n   .. index:: single: auditing\n\n   Raise an auditing event and trigger any active auditing hooks.\n   *event* is a string identifying the event, and *args* may contain\n   optional arguments with more information about the event.  The\n   number and types of arguments for a given event are considered a\n   public and stable API and should not be modified between releases.\n\n   For example, one auditing event is named ``os.chdir``. This event has\n   one argument called *path* that will contain the requested new\n   working directory.\n\n   :func:`sys.audit` will call the existing auditing hooks, passing\n   the event name and arguments, and will re-raise the first exception\n   from any hook. In general, if an exception is raised, it should not\n   be handled and the process should be terminated as quickly as\n   possible. This allows hook implementations to decide how to respond\n   to particular events: they can merely log the event or abort the\n   operation by raising an exception.\n\n   Hooks are added using the :func:`sys.addaudithook` or\n   :c:func:`PySys_AddAuditHook` functions.\n\n   The native equivalent of this function is :c:func:`PySys_Audit`. Using the\n   native function is preferred when possible.\n\n   See the :ref:`audit events table <audit-events>` for all events raised by\n   CPython.\n\n   .. versionadded:: 3.8\n\n\n.. data:: base_exec_prefix\n\n   Set during Python startup, before ``site.py`` is run, to the same value as\n   :data:`exec_prefix`. If not running in a\n   :ref:`virtual environment <venv-def>`, the values will stay the same; if\n   ``site.py`` finds that a virtual environment is in use, the values of\n   :data:`prefix` and :data:`exec_prefix` will be changed to point to the\n   virtual environment, whereas :data:`base_prefix` and\n   :data:`base_exec_prefix` will remain pointing to the base Python\n   installation (the one which the virtual environment was created from).\n\n   .. versionadded:: 3.3\n\n\n.. data:: base_prefix\n\n   Set during Python startup, before ``site.py`` is run, to the same value as\n   :data:`prefix`. If not running in a :ref:`virtual environment <venv-def>`, the values\n   will stay the same; if ``site.py`` finds that a virtual environment is in\n   use, the values of :data:`prefix` and :data:`exec_prefix` will be changed to\n   point to the virtual environment, whereas :data:`base_prefix` and\n   :data:`base_exec_prefix` will remain pointing to the base Python\n   installation (the one which the virtual environment was created from).\n\n   .. versionadded:: 3.3\n\n\n.. data:: byteorder\n\n   An indicator of the native byte order.  This will have the value ``'big'`` on\n   big-endian (most-significant byte first) platforms, and ``'little'`` on\n   little-endian (least-significant byte first) platforms.\n\n\n.. data:: builtin_module_names\n\n   A tuple of strings giving the names of all modules that are compiled into this\n   Python interpreter.  (This information is not available in any other way ---\n   ``modules.keys()`` only lists the imported modules.)\n\n\n.. function:: call_tracing(func, args)\n\n   Call ``func(*args)``, while tracing is enabled.  The tracing state is saved,\n   and restored afterwards.  This is intended to be called from a debugger from\n   a checkpoint, to recursively debug some other code.\n\n\n.. data:: copyright\n\n   A string containing the copyright pertaining to the Python interpreter.\n\n\n.. function:: _clear_type_cache()\n\n   Clear the internal type cache. The type cache is used to speed up attribute\n   and method lookups. Use the function *only* to drop unnecessary references\n   during reference leak debugging.\n\n   This function should be used for internal and specialized purposes only.\n\n\n.. function:: _current_frames()\n\n   Return a dictionary mapping each thread's identifier to the topmost stack frame\n   currently active in that thread at the time the function is called. Note that\n   functions in the :mod:`traceback` module can build the call stack given such a\n   frame.\n\n   This is most useful for debugging deadlock:  this function does not require the\n   deadlocked threads' cooperation, and such threads' call stacks are frozen for as\n   long as they remain deadlocked.  The frame returned for a non-deadlocked thread\n   may bear no relationship to that thread's current activity by the time calling\n   code examines the frame.\n\n   This function should be used for internal and specialized purposes only.\n\n   .. audit-event:: sys._current_frames \"\" sys._current_frames\n\n\n.. function:: breakpointhook()\n\n   This hook function is called by built-in :func:`breakpoint`.  By default,\n   it drops you into the :mod:`pdb` debugger, but it can be set to any other\n   function so that you can choose which debugger gets used.\n\n   The signature of this function is dependent on what it calls.  For example,\n   the default binding (e.g. ``pdb.set_trace()``) expects no arguments, but\n   you might bind it to a function that expects additional arguments\n   (positional and/or keyword).  The built-in ``breakpoint()`` function passes\n   its ``*args`` and ``**kws`` straight through.  Whatever\n   ``breakpointhooks()`` returns is returned from ``breakpoint()``.\n\n   The default implementation first consults the environment variable\n   :envvar:`PYTHONBREAKPOINT`.  If that is set to ``\"0\"`` then this function\n   returns immediately; i.e. it is a no-op.  If the environment variable is\n   not set, or is set to the empty string, ``pdb.set_trace()`` is called.\n   Otherwise this variable should name a function to run, using Python's\n   dotted-import nomenclature, e.g. ``package.subpackage.module.function``.\n   In this case, ``package.subpackage.module`` would be imported and the\n   resulting module must have a callable named ``function()``.  This is run,\n   passing in ``*args`` and ``**kws``, and whatever ``function()`` returns,\n   ``sys.breakpointhook()`` returns to the built-in :func:`breakpoint`\n   function.\n\n   Note that if anything goes wrong while importing the callable named by\n   :envvar:`PYTHONBREAKPOINT`, a :exc:`RuntimeWarning` is reported and the\n   breakpoint is ignored.\n\n   Also note that if ``sys.breakpointhook()`` is overridden programmatically,\n   :envvar:`PYTHONBREAKPOINT` is *not* consulted.\n\n   .. versionadded:: 3.7\n\n.. function:: _debugmallocstats()\n\n   Print low-level information to stderr about the state of CPython's memory\n   allocator.\n\n   If Python is configured --with-pydebug, it also performs some expensive\n   internal consistency checks.\n\n   .. versionadded:: 3.3\n\n   .. impl-detail::\n\n      This function is specific to CPython.  The exact output format is not\n      defined here, and may change.\n\n\n.. data:: dllhandle\n\n   Integer specifying the handle of the Python DLL.\n\n   .. availability:: Windows.\n\n\n.. function:: displayhook(value)\n\n   If *value* is not ``None``, this function prints ``repr(value)`` to\n   ``sys.stdout``, and saves *value* in ``builtins._``. If ``repr(value)`` is\n   not encodable to ``sys.stdout.encoding`` with ``sys.stdout.errors`` error\n   handler (which is probably ``'strict'``), encode it to\n   ``sys.stdout.encoding`` with ``'backslashreplace'`` error handler.\n\n   ``sys.displayhook`` is called on the result of evaluating an :term:`expression`\n   entered in an interactive Python session.  The display of these values can be\n   customized by assigning another one-argument function to ``sys.displayhook``.\n\n   Pseudo-code::\n\n       def displayhook(value):\n           if value is None:\n               return\n           # Set '_' to None to avoid recursion\n           builtins._ = None\n           text = repr(value)\n           try:\n               sys.stdout.write(text)\n           except UnicodeEncodeError:\n               bytes = text.encode(sys.stdout.encoding, 'backslashreplace')\n               if hasattr(sys.stdout, 'buffer'):\n                   sys.stdout.buffer.write(bytes)\n               else:\n                   text = bytes.decode(sys.stdout.encoding, 'strict')\n                   sys.stdout.write(text)\n           sys.stdout.write(\"\\n\")\n           builtins._ = value\n\n   .. versionchanged:: 3.2\n      Use ``'backslashreplace'`` error handler on :exc:`UnicodeEncodeError`.\n\n\n.. data:: dont_write_bytecode\n\n   If this is true, Python won't try to write ``.pyc`` files on the\n   import of source modules.  This value is initially set to ``True`` or\n   ``False`` depending on the :option:`-B` command line option and the\n   :envvar:`PYTHONDONTWRITEBYTECODE` environment variable, but you can set it\n   yourself to control bytecode file generation.\n\n\n.. data:: pycache_prefix\n\n   If this is set (not ``None``), Python will write bytecode-cache ``.pyc``\n   files to (and read them from) a parallel directory tree rooted at this\n   directory, rather than from ``__pycache__`` directories in the source code\n   tree. Any ``__pycache__`` directories in the source code tree will be ignored\n   and new `.pyc` files written within the pycache prefix. Thus if you use\n   :mod:`compileall` as a pre-build step, you must ensure you run it with the\n   same pycache prefix (if any) that you will use at runtime.\n\n   A relative path is interpreted relative to the current working directory.\n\n   This value is initially set based on the value of the :option:`-X`\n   ``pycache_prefix=PATH`` command-line option or the\n   :envvar:`PYTHONPYCACHEPREFIX` environment variable (command-line takes\n   precedence). If neither are set, it is ``None``.\n\n   .. versionadded:: 3.8\n\n\n.. function:: excepthook(type, value, traceback)\n\n   This function prints out a given traceback and exception to ``sys.stderr``.\n\n   When an exception is raised and uncaught, the interpreter calls\n   ``sys.excepthook`` with three arguments, the exception class, exception\n   instance, and a traceback object.  In an interactive session this happens just\n   before control is returned to the prompt; in a Python program this happens just\n   before the program exits.  The handling of such top-level exceptions can be\n   customized by assigning another three-argument function to ``sys.excepthook``.\n\n   .. audit-event:: sys.excepthook hook,type,value,traceback sys.excepthook\n\n      Raise an auditing event ``sys.excepthook`` with arguments ``hook``,\n      ``type``, ``value``, ``traceback`` when an uncaught exception occurs.\n      If no hook has been set, ``hook`` may be ``None``. If any hook raises\n      an exception derived from :class:`RuntimeError` the call to the hook will\n      be suppressed. Otherwise, the audit hook exception will be reported as\n      unraisable and ``sys.excepthook`` will be called.\n\n   .. seealso::\n\n      The :func:`sys.unraisablehook` function handles unraisable exceptions\n      and the :func:`threading.excepthook` function handles exception raised\n      by :func:`threading.Thread.run`.\n\n\n.. data:: __breakpointhook__\n          __displayhook__\n          __excepthook__\n          __unraisablehook__\n\n   These objects contain the original values of ``breakpointhook``,\n   ``displayhook``, ``excepthook``, and ``unraisablehook`` at the start of the\n   program.  They are saved so that ``breakpointhook``, ``displayhook`` and\n   ``excepthook``, ``unraisablehook`` can be restored in case they happen to\n   get replaced with broken or alternative objects.\n\n   .. versionadded:: 3.7\n      __breakpointhook__\n\n   .. versionadded:: 3.8\n      __unraisablehook__\n\n.. function:: exc_info()\n\n   This function returns a tuple of three values that give information about the\n   exception that is currently being handled.  The information returned is specific\n   both to the current thread and to the current stack frame.  If the current stack\n   frame is not handling an exception, the information is taken from the calling\n   stack frame, or its caller, and so on until a stack frame is found that is\n   handling an exception.  Here, \"handling an exception\" is defined as \"executing\n   an except clause.\"  For any stack frame, only information about the exception\n   being currently handled is accessible.\n\n   .. index:: object: traceback\n\n   If no exception is being handled anywhere on the stack, a tuple containing\n   three ``None`` values is returned.  Otherwise, the values returned are\n   ``(type, value, traceback)``.  Their meaning is: *type* gets the type of the\n   exception being handled (a subclass of :exc:`BaseException`); *value* gets\n   the exception instance (an instance of the exception type); *traceback* gets\n   a :ref:`traceback object <traceback-objects>` which encapsulates the call\n   stack at the point where the exception originally occurred.\n\n\n.. data:: exec_prefix\n\n   A string giving the site-specific directory prefix where the platform-dependent\n   Python files are installed; by default, this is also ``'/usr/local'``.  This can\n   be set at build time with the ``--exec-prefix`` argument to the\n   :program:`configure` script.  Specifically, all configuration files (e.g. the\n   :file:`pyconfig.h` header file) are installed in the directory\n   :file:`{exec_prefix}/lib/python{X.Y}/config`, and shared library modules are\n   installed in :file:`{exec_prefix}/lib/python{X.Y}/lib-dynload`, where *X.Y*\n   is the version number of Python, for example ``3.2``.\n\n   .. note::\n\n      If a :ref:`virtual environment <venv-def>` is in effect, this\n      value will be changed in ``site.py`` to point to the virtual environment.\n      The value for the Python installation will still be available, via\n      :data:`base_exec_prefix`.\n\n\n.. data:: executable\n\n   A string giving the absolute path of the executable binary for the Python\n   interpreter, on systems where this makes sense. If Python is unable to retrieve\n   the real path to its executable, :data:`sys.executable` will be an empty string\n   or ``None``.\n\n\n.. function:: exit([arg])\n\n   Exit from Python.  This is implemented by raising the :exc:`SystemExit`\n   exception, so cleanup actions specified by finally clauses of :keyword:`try`\n   statements are honored, and it is possible to intercept the exit attempt at\n   an outer level.\n\n   The optional argument *arg* can be an integer giving the exit status\n   (defaulting to zero), or another type of object.  If it is an integer, zero\n   is considered \"successful termination\" and any nonzero value is considered\n   \"abnormal termination\" by shells and the like.  Most systems require it to be\n   in the range 0--127, and produce undefined results otherwise.  Some systems\n   have a convention for assigning specific meanings to specific exit codes, but\n   these are generally underdeveloped; Unix programs generally use 2 for command\n   line syntax errors and 1 for all other kind of errors.  If another type of\n   object is passed, ``None`` is equivalent to passing zero, and any other\n   object is printed to :data:`stderr` and results in an exit code of 1.  In\n   particular, ``sys.exit(\"some error message\")`` is a quick way to exit a\n   program when an error occurs.\n\n   Since :func:`exit` ultimately \"only\" raises an exception, it will only exit\n   the process when called from the main thread, and the exception is not\n   intercepted.\n\n   .. versionchanged:: 3.6\n      If an error occurs in the cleanup after the Python interpreter\n      has caught :exc:`SystemExit` (such as an error flushing buffered data\n      in the standard streams), the exit status is changed to 120.\n\n\n.. data:: flags\n\n   The :term:`named tuple` *flags* exposes the status of command line\n   flags. The attributes are read only.\n\n   ============================= =============================\n   attribute                     flag\n   ============================= =============================\n   :const:`debug`                :option:`-d`\n   :const:`inspect`              :option:`-i`\n   :const:`interactive`          :option:`-i`\n   :const:`isolated`             :option:`-I`\n   :const:`optimize`             :option:`-O` or :option:`-OO`\n   :const:`dont_write_bytecode`  :option:`-B`\n   :const:`no_user_site`         :option:`-s`\n   :const:`no_site`              :option:`-S`\n   :const:`ignore_environment`   :option:`-E`\n   :const:`verbose`              :option:`-v`\n   :const:`bytes_warning`        :option:`-b`\n   :const:`quiet`                :option:`-q`\n   :const:`hash_randomization`   :option:`-R`\n   :const:`dev_mode`             :option:`-X` ``dev``\n   :const:`utf8_mode`            :option:`-X` ``utf8``\n   ============================= =============================\n\n   .. versionchanged:: 3.2\n      Added ``quiet`` attribute for the new :option:`-q` flag.\n\n   .. versionadded:: 3.2.3\n      The ``hash_randomization`` attribute.\n\n   .. versionchanged:: 3.3\n      Removed obsolete ``division_warning`` attribute.\n\n   .. versionchanged:: 3.4\n      Added ``isolated`` attribute for :option:`-I` ``isolated`` flag.\n\n   .. versionchanged:: 3.7\n      Added ``dev_mode`` attribute for the new :option:`-X` ``dev`` flag\n      and ``utf8_mode`` attribute for the new  :option:`-X` ``utf8`` flag.\n\n\n.. data:: float_info\n\n   A :term:`named tuple` holding information about the float type. It\n   contains low level information about the precision and internal\n   representation.  The values correspond to the various floating-point\n   constants defined in the standard header file :file:`float.h` for the 'C'\n   programming language; see section 5.2.4.2.2 of the 1999 ISO/IEC C standard\n   [C99]_, 'Characteristics of floating types', for details.\n\n   .. tabularcolumns:: |l|l|L|\n\n   +---------------------+----------------+--------------------------------------------------+\n   | attribute           | float.h macro  | explanation                                      |\n   +=====================+================+==================================================+\n   | :const:`epsilon`    | DBL_EPSILON    | difference between 1.0 and the least value       |\n   |                     |                | greater than 1.0 that is representable as a float|\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`dig`        | DBL_DIG        | maximum number of decimal digits that can be     |\n   |                     |                | faithfully represented in a float;  see below    |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`mant_dig`   | DBL_MANT_DIG   | float precision: the number of base-``radix``    |\n   |                     |                | digits in the significand of a float             |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`max`        | DBL_MAX        | maximum representable positive finite float      |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`max_exp`    | DBL_MAX_EXP    | maximum integer *e* such that ``radix**(e-1)`` is|\n   |                     |                | a representable finite float                     |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`max_10_exp` | DBL_MAX_10_EXP | maximum integer *e* such that ``10**e`` is in the|\n   |                     |                | range of representable finite floats             |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`min`        | DBL_MIN        | minimum representable positive *normalized* float|\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`min_exp`    | DBL_MIN_EXP    | minimum integer *e* such that ``radix**(e-1)`` is|\n   |                     |                | a normalized float                               |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`min_10_exp` | DBL_MIN_10_EXP | minimum integer *e* such that ``10**e`` is a     |\n   |                     |                | normalized float                                 |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`radix`      | FLT_RADIX      | radix of exponent representation                 |\n   +---------------------+----------------+--------------------------------------------------+\n   | :const:`rounds`     | FLT_ROUNDS     | integer constant representing the rounding mode  |\n   |                     |                | used for arithmetic operations.  This reflects   |\n   |                     |                | the value of the system FLT_ROUNDS macro at      |\n   |                     |                | interpreter startup time.  See section 5.2.4.2.2 |\n   |                     |                | of the C99 standard for an explanation of the    |\n   |                     |                | possible values and their meanings.              |\n   +---------------------+----------------+--------------------------------------------------+\n\n   The attribute :attr:`sys.float_info.dig` needs further explanation.  If\n   ``s`` is any string representing a decimal number with at most\n   :attr:`sys.float_info.dig` significant digits, then converting ``s`` to a\n   float and back again will recover a string representing the same decimal\n   value::\n\n      >>> import sys\n      >>> sys.float_info.dig\n      15\n      >>> s = '3.14159265358979'    # decimal string with 15 significant digits\n      >>> format(float(s), '.15g')  # convert to float and back -> same value\n      '3.14159265358979'\n\n   But for strings with more than :attr:`sys.float_info.dig` significant digits,\n   this isn't always true::\n\n      >>> s = '9876543211234567'    # 16 significant digits is too many!\n      >>> format(float(s), '.16g')  # conversion changes value\n      '9876543211234568'\n\n.. data:: float_repr_style\n\n   A string indicating how the :func:`repr` function behaves for\n   floats.  If the string has value ``'short'`` then for a finite\n   float ``x``, ``repr(x)`` aims to produce a short string with the\n   property that ``float(repr(x)) == x``.  This is the usual behaviour\n   in Python 3.1 and later.  Otherwise, ``float_repr_style`` has value\n   ``'legacy'`` and ``repr(x)`` behaves in the same way as it did in\n   versions of Python prior to 3.1.\n\n   .. versionadded:: 3.1\n\n\n.. function:: getallocatedblocks()\n\n   Return the number of memory blocks currently allocated by the interpreter,\n   regardless of their size.  This function is mainly useful for tracking\n   and debugging memory leaks.  Because of the interpreter's internal\n   caches, the result can vary from call to call; you may have to call\n   :func:`_clear_type_cache()` and :func:`gc.collect()` to get more\n   predictable results.\n\n   If a Python build or implementation cannot reasonably compute this\n   information, :func:`getallocatedblocks()` is allowed to return 0 instead.\n\n   .. versionadded:: 3.4\n\n\n.. function:: getandroidapilevel()\n\n   Return the build time API version of Android as an integer.\n\n   .. availability:: Android.\n\n   .. versionadded:: 3.7\n\n\n.. function:: getcheckinterval()\n\n   Return the interpreter's \"check interval\"; see :func:`setcheckinterval`.\n\n   .. deprecated:: 3.2\n      Use :func:`getswitchinterval` instead.\n\n\n.. function:: getdefaultencoding()\n\n   Return the name of the current default string encoding used by the Unicode\n   implementation.\n\n\n.. function:: getdlopenflags()\n\n   Return the current value of the flags that are used for\n   :c:func:`dlopen` calls.  Symbolic names for the flag values can be\n   found in the :mod:`os` module (``RTLD_xxx`` constants, e.g.\n   :data:`os.RTLD_LAZY`).\n\n   .. availability:: Unix.\n\n\n.. function:: getfilesystemencoding()\n\n   Return the name of the encoding used to convert between Unicode\n   filenames and bytes filenames. For best compatibility, str should be\n   used for filenames in all cases, although representing filenames as bytes\n   is also supported. Functions accepting or returning filenames should support\n   either str or bytes and internally convert to the system's preferred\n   representation.\n\n   This encoding is always ASCII-compatible.\n\n   :func:`os.fsencode` and :func:`os.fsdecode` should be used to ensure that\n   the correct encoding and errors mode are used.\n\n   * In the UTF-8 mode, the encoding is ``utf-8`` on any platform.\n\n   * On macOS, the encoding is ``'utf-8'``.\n\n   * On Unix, the encoding is the locale encoding.\n\n   * On Windows, the encoding may be ``'utf-8'`` or ``'mbcs'``, depending\n     on user configuration.\n\n   * On Android, the encoding is ``'utf-8'``.\n\n   * On VxWorks, the encoding is ``'utf-8'``.\n\n   .. versionchanged:: 3.2\n      :func:`getfilesystemencoding` result cannot be ``None`` anymore.\n\n   .. versionchanged:: 3.6\n      Windows is no longer guaranteed to return ``'mbcs'``. See :pep:`529`\n      and :func:`_enablelegacywindowsfsencoding` for more information.\n\n   .. versionchanged:: 3.7\n      Return 'utf-8' in the UTF-8 mode.\n\n\n.. function:: getfilesystemencodeerrors()\n\n   Return the name of the error mode used to convert between Unicode filenames\n   and bytes filenames. The encoding name is returned from\n   :func:`getfilesystemencoding`.\n\n   :func:`os.fsencode` and :func:`os.fsdecode` should be used to ensure that\n   the correct encoding and errors mode are used.\n\n   .. versionadded:: 3.6\n\n.. function:: getrefcount(object)\n\n   Return the reference count of the *object*.  The count returned is generally one\n   higher than you might expect, because it includes the (temporary) reference as\n   an argument to :func:`getrefcount`.\n\n\n.. function:: getrecursionlimit()\n\n   Return the current value of the recursion limit, the maximum depth of the Python\n   interpreter stack.  This limit prevents infinite recursion from causing an\n   overflow of the C stack and crashing Python.  It can be set by\n   :func:`setrecursionlimit`.\n\n\n.. function:: getsizeof(object[, default])\n\n   Return the size of an object in bytes. The object can be any type of\n   object. All built-in objects will return correct results, but this\n   does not have to hold true for third-party extensions as it is implementation\n   specific.\n\n   Only the memory consumption directly attributed to the object is\n   accounted for, not the memory consumption of objects it refers to.\n\n   If given, *default* will be returned if the object does not provide means to\n   retrieve the size.  Otherwise a :exc:`TypeError` will be raised.\n\n   :func:`getsizeof` calls the object's ``__sizeof__`` method and adds an\n   additional garbage collector overhead if the object is managed by the garbage\n   collector.\n\n   See `recursive sizeof recipe <https://code.activestate.com/recipes/577504>`_\n   for an example of using :func:`getsizeof` recursively to find the size of\n   containers and all their contents.\n\n.. function:: getswitchinterval()\n\n   Return the interpreter's \"thread switch interval\"; see\n   :func:`setswitchinterval`.\n\n   .. versionadded:: 3.2\n\n\n.. function:: _getframe([depth])\n\n   Return a frame object from the call stack.  If optional integer *depth* is\n   given, return the frame object that many calls below the top of the stack.  If\n   that is deeper than the call stack, :exc:`ValueError` is raised.  The default\n   for *depth* is zero, returning the frame at the top of the call stack.\n\n   .. audit-event:: sys._getframe \"\" sys._getframe\n\n   .. impl-detail::\n\n      This function should be used for internal and specialized purposes only.\n      It is not guaranteed to exist in all implementations of Python.\n\n\n.. function:: getprofile()\n\n   .. index::\n      single: profile function\n      single: profiler\n\n   Get the profiler function as set by :func:`setprofile`.\n\n\n.. function:: gettrace()\n\n   .. index::\n      single: trace function\n      single: debugger\n\n   Get the trace function as set by :func:`settrace`.\n\n   .. impl-detail::\n\n      The :func:`gettrace` function is intended only for implementing debuggers,\n      profilers, coverage tools and the like.  Its behavior is part of the\n      implementation platform, rather than part of the language definition, and\n      thus may not be available in all Python implementations.\n\n\n.. function:: getwindowsversion()\n\n   Return a named tuple describing the Windows version\n   currently running.  The named elements are *major*, *minor*,\n   *build*, *platform*, *service_pack*, *service_pack_minor*,\n   *service_pack_major*, *suite_mask*, *product_type* and\n   *platform_version*. *service_pack* contains a string,\n   *platform_version* a 3-tuple and all other values are\n   integers. The components can also be accessed by name, so\n   ``sys.getwindowsversion()[0]`` is equivalent to\n   ``sys.getwindowsversion().major``. For compatibility with prior\n   versions, only the first 5 elements are retrievable by indexing.\n\n   *platform* will be :const:`2 (VER_PLATFORM_WIN32_NT)`.\n\n   *product_type* may be one of the following values:\n\n   +---------------------------------------+---------------------------------+\n   | Constant                              | Meaning                         |\n   +=======================================+=================================+\n   | :const:`1 (VER_NT_WORKSTATION)`       | The system is a workstation.    |\n   +---------------------------------------+---------------------------------+\n   | :const:`2 (VER_NT_DOMAIN_CONTROLLER)` | The system is a domain          |\n   |                                       | controller.                     |\n   +---------------------------------------+---------------------------------+\n   | :const:`3 (VER_NT_SERVER)`            | The system is a server, but not |\n   |                                       | a domain controller.            |\n   +---------------------------------------+---------------------------------+\n\n   This function wraps the Win32 :c:func:`GetVersionEx` function; see the\n   Microsoft documentation on :c:func:`OSVERSIONINFOEX` for more information\n   about these fields.\n\n   *platform_version* returns the accurate major version, minor version and\n   build number of the current operating system, rather than the version that\n   is being emulated for the process. It is intended for use in logging rather\n   than for feature detection.\n\n   .. availability:: Windows.\n\n   .. versionchanged:: 3.2\n      Changed to a named tuple and added *service_pack_minor*,\n      *service_pack_major*, *suite_mask*, and *product_type*.\n\n   .. versionchanged:: 3.6\n      Added *platform_version*\n\n\n.. function:: get_asyncgen_hooks()\n\n   Returns an *asyncgen_hooks* object, which is similar to a\n   :class:`~collections.namedtuple` of the form `(firstiter, finalizer)`,\n   where *firstiter* and *finalizer* are expected to be either ``None`` or\n   functions which take an :term:`asynchronous generator iterator` as an\n   argument, and are used to schedule finalization of an asynchronous\n   generator by an event loop.\n\n   .. versionadded:: 3.6\n      See :pep:`525` for more details.\n\n   .. note::\n      This function has been added on a provisional basis (see :pep:`411`\n      for details.)\n\n\n.. function:: get_coroutine_origin_tracking_depth()\n\n   Get the current coroutine origin tracking depth, as set by\n   :func:`set_coroutine_origin_tracking_depth`.\n\n   .. versionadded:: 3.7\n\n   .. note::\n      This function has been added on a provisional basis (see :pep:`411`\n      for details.)  Use it only for debugging purposes.\n\n\n.. data:: hash_info\n\n   A :term:`named tuple` giving parameters of the numeric hash\n   implementation.  For more details about hashing of numeric types, see\n   :ref:`numeric-hash`.\n\n   +---------------------+--------------------------------------------------+\n   | attribute           | explanation                                      |\n   +=====================+==================================================+\n   | :const:`width`      | width in bits used for hash values               |\n   +---------------------+--------------------------------------------------+\n   | :const:`modulus`    | prime modulus P used for numeric hash scheme     |\n   +---------------------+--------------------------------------------------+\n   | :const:`inf`        | hash value returned for a positive infinity      |\n   +---------------------+--------------------------------------------------+\n   | :const:`nan`        | hash value returned for a nan                    |\n   +---------------------+--------------------------------------------------+\n   | :const:`imag`       | multiplier used for the imaginary part of a      |\n   |                     | complex number                                   |\n   +---------------------+--------------------------------------------------+\n   | :const:`algorithm`  | name of the algorithm for hashing of str, bytes, |\n   |                     | and memoryview                                   |\n   +---------------------+--------------------------------------------------+\n   | :const:`hash_bits`  | internal output size of the hash algorithm       |\n   +---------------------+--------------------------------------------------+\n   | :const:`seed_bits`  | size of the seed key of the hash algorithm       |\n   +---------------------+--------------------------------------------------+\n\n\n   .. versionadded:: 3.2\n\n   .. versionchanged:: 3.4\n      Added *algorithm*, *hash_bits* and *seed_bits*\n\n\n.. data:: hexversion\n\n   The version number encoded as a single integer.  This is guaranteed to increase\n   with each version, including proper support for non-production releases.  For\n   example, to test that the Python interpreter is at least version 1.5.2, use::\n\n      if sys.hexversion >= 0x010502F0:\n          # use some advanced feature\n          ...\n      else:\n          # use an alternative implementation or warn the user\n          ...\n\n   This is called ``hexversion`` since it only really looks meaningful when viewed\n   as the result of passing it to the built-in :func:`hex` function.  The\n   :term:`named tuple`  :data:`sys.version_info` may be used for a more\n   human-friendly encoding of the same information.\n\n   More details of ``hexversion`` can be found at :ref:`apiabiversion`.\n\n\n.. data:: implementation\n\n   An object containing information about the implementation of the\n   currently running Python interpreter.  The following attributes are\n   required to exist in all Python implementations.\n\n   *name* is the implementation's identifier, e.g. ``'cpython'``.  The actual\n   string is defined by the Python implementation, but it is guaranteed to be\n   lower case.\n\n   *version* is a named tuple, in the same format as\n   :data:`sys.version_info`.  It represents the version of the Python\n   *implementation*.  This has a distinct meaning from the specific\n   version of the Python *language* to which the currently running\n   interpreter conforms, which ``sys.version_info`` represents.  For\n   example, for PyPy 1.8 ``sys.implementation.version`` might be\n   ``sys.version_info(1, 8, 0, 'final', 0)``, whereas ``sys.version_info``\n   would be ``sys.version_info(2, 7, 2, 'final', 0)``.  For CPython they\n   are the same value, since it is the reference implementation.\n\n   *hexversion* is the implementation version in hexadecimal format, like\n   :data:`sys.hexversion`.\n\n   *cache_tag* is the tag used by the import machinery in the filenames of\n   cached modules.  By convention, it would be a composite of the\n   implementation's name and version, like ``'cpython-33'``.  However, a\n   Python implementation may use some other value if appropriate.  If\n   ``cache_tag`` is set to ``None``, it indicates that module caching should\n   be disabled.\n\n   :data:`sys.implementation` may contain additional attributes specific to\n   the Python implementation.  These non-standard attributes must start with\n   an underscore, and are not described here.  Regardless of its contents,\n   :data:`sys.implementation` will not change during a run of the interpreter,\n   nor between implementation versions.  (It may change between Python\n   language versions, however.)  See :pep:`421` for more information.\n\n   .. versionadded:: 3.3\n\n   .. note::\n\n      The addition of new required attributes must go through the normal PEP\n      process. See :pep:`421` for more information.\n\n.. data:: int_info\n\n   A :term:`named tuple` that holds information about Python's internal\n   representation of integers.  The attributes are read only.\n\n   .. tabularcolumns:: |l|L|\n\n   +-------------------------+----------------------------------------------+\n   | Attribute               | Explanation                                  |\n   +=========================+==============================================+\n   | :const:`bits_per_digit` | number of bits held in each digit.  Python   |\n   |                         | integers are stored internally in base       |\n   |                         | ``2**int_info.bits_per_digit``               |\n   +-------------------------+----------------------------------------------+\n   | :const:`sizeof_digit`   | size in bytes of the C type used to          |\n   |                         | represent a digit                            |\n   +-------------------------+----------------------------------------------+\n\n   .. versionadded:: 3.1\n\n\n.. data:: __interactivehook__\n\n   When this attribute exists, its value is automatically called (with no\n   arguments) when the interpreter is launched in :ref:`interactive mode\n   <tut-interactive>`.  This is done after the :envvar:`PYTHONSTARTUP` file is\n   read, so that you can set this hook there.  The :mod:`site` module\n   :ref:`sets this <rlcompleter-config>`.\n\n   .. audit-event:: cpython.run_interactivehook hook sys.__interactivehook__\n\n      Raises an :ref:`auditing event <auditing>`\n      ``cpython.run_interactivehook`` with the hook object as the argument when\n      the hook is called on startup.\n\n   .. versionadded:: 3.4\n\n\n.. function:: intern(string)\n\n   Enter *string* in the table of \"interned\" strings and return the interned string\n   -- which is *string* itself or a copy. Interning strings is useful to gain a\n   little performance on dictionary lookup -- if the keys in a dictionary are\n   interned, and the lookup key is interned, the key comparisons (after hashing)\n   can be done by a pointer compare instead of a string compare.  Normally, the\n   names used in Python programs are automatically interned, and the dictionaries\n   used to hold module, class or instance attributes have interned keys.\n\n   Interned strings are not immortal; you must keep a reference to the return\n   value of :func:`intern` around to benefit from it.\n\n\n.. function:: is_finalizing()\n\n   Return :const:`True` if the Python interpreter is\n   :term:`shutting down <interpreter shutdown>`, :const:`False` otherwise.\n\n   .. versionadded:: 3.5\n\n\n.. data:: last_type\n          last_value\n          last_traceback\n\n   These three variables are not always defined; they are set when an exception is\n   not handled and the interpreter prints an error message and a stack traceback.\n   Their intended use is to allow an interactive user to import a debugger module\n   and engage in post-mortem debugging without having to re-execute the command\n   that caused the error.  (Typical use is ``import pdb; pdb.pm()`` to enter the\n   post-mortem debugger; see :mod:`pdb` module for\n   more information.)\n\n   The meaning of the variables is the same as that of the return values from\n   :func:`exc_info` above.\n\n\n.. data:: maxsize\n\n   An integer giving the maximum value a variable of type :c:type:`Py_ssize_t` can\n   take.  It's usually ``2**31 - 1`` on a 32-bit platform and ``2**63 - 1`` on a\n   64-bit platform.\n\n\n.. data:: maxunicode\n\n   An integer giving the value of the largest Unicode code point,\n   i.e. ``1114111`` (``0x10FFFF`` in hexadecimal).\n\n   .. versionchanged:: 3.3\n      Before :pep:`393`, ``sys.maxunicode`` used to be either ``0xFFFF``\n      or ``0x10FFFF``, depending on the configuration option that specified\n      whether Unicode characters were stored as UCS-2 or UCS-4.\n\n\n.. data:: meta_path\n\n    A list of :term:`meta path finder` objects that have their\n    :meth:`~importlib.abc.MetaPathFinder.find_spec` methods called to see if one\n    of the objects can find the module to be imported. The\n    :meth:`~importlib.abc.MetaPathFinder.find_spec` method is called with at\n    least the absolute name of the module being imported. If the module to be\n    imported is contained in a package, then the parent package's :attr:`__path__`\n    attribute is passed in as a second argument. The method returns a\n    :term:`module spec`, or ``None`` if the module cannot be found.\n\n    .. seealso::\n\n        :class:`importlib.abc.MetaPathFinder`\n          The abstract base class defining the interface of finder objects on\n          :data:`meta_path`.\n        :class:`importlib.machinery.ModuleSpec`\n          The concrete class which\n          :meth:`~importlib.abc.MetaPathFinder.find_spec` should return\n          instances of.\n\n    .. versionchanged:: 3.4\n\n        :term:`Module specs <module spec>` were introduced in Python 3.4, by\n        :pep:`451`. Earlier versions of Python looked for a method called\n        :meth:`~importlib.abc.MetaPathFinder.find_module`.\n        This is still called as a fallback if a :data:`meta_path` entry doesn't\n        have a :meth:`~importlib.abc.MetaPathFinder.find_spec` method.\n\n.. data:: modules\n\n   This is a dictionary that maps module names to modules which have already been\n   loaded.  This can be manipulated to force reloading of modules and other tricks.\n   However, replacing the dictionary will not necessarily work as expected and\n   deleting essential items from the dictionary may cause Python to fail.\n\n\n.. data:: path\n\n   .. index:: triple: module; search; path\n\n   A list of strings that specifies the search path for modules. Initialized from\n   the environment variable :envvar:`PYTHONPATH`, plus an installation-dependent\n   default.\n\n   As initialized upon program startup, the first item of this list, ``path[0]``,\n   is the directory containing the script that was used to invoke the Python\n   interpreter.  If the script directory is not available (e.g.  if the interpreter\n   is invoked interactively or if the script is read from standard input),\n   ``path[0]`` is the empty string, which directs Python to search modules in the\n   current directory first.  Notice that the script directory is inserted *before*\n   the entries inserted as a result of :envvar:`PYTHONPATH`.\n\n   A program is free to modify this list for its own purposes.  Only strings\n   and bytes should be added to :data:`sys.path`; all other data types are\n   ignored during import.\n\n\n   .. seealso::\n      Module :mod:`site` This describes how to use .pth files to extend\n      :data:`sys.path`.\n\n\n.. data:: path_hooks\n\n    A list of callables that take a path argument to try to create a\n    :term:`finder` for the path. If a finder can be created, it is to be\n    returned by the callable, else raise :exc:`ImportError`.\n\n    Originally specified in :pep:`302`.\n\n\n.. data:: path_importer_cache\n\n    A dictionary acting as a cache for :term:`finder` objects. The keys are\n    paths that have been passed to :data:`sys.path_hooks` and the values are\n    the finders that are found. If a path is a valid file system path but no\n    finder is found on :data:`sys.path_hooks` then ``None`` is\n    stored.\n\n    Originally specified in :pep:`302`.\n\n    .. versionchanged:: 3.3\n       ``None`` is stored instead of :class:`imp.NullImporter` when no finder\n       is found.\n\n\n.. data:: platform\n\n   This string contains a platform identifier that can be used to append\n   platform-specific components to :data:`sys.path`, for instance.\n\n   For Unix systems, except on Linux and AIX, this is the lowercased OS name as\n   returned by ``uname -s`` with the first part of the version as returned by\n   ``uname -r`` appended, e.g. ``'sunos5'`` or ``'freebsd8'``, *at the time\n   when Python was built*.  Unless you want to test for a specific system\n   version, it is therefore recommended to use the following idiom::\n\n      if sys.platform.startswith('freebsd'):\n          # FreeBSD-specific code here...\n      elif sys.platform.startswith('linux'):\n          # Linux-specific code here...\n      elif sys.platform.startswith('aix'):\n          # AIX-specific code here...\n\n   For other systems, the values are:\n\n   ================ ===========================\n   System           ``platform`` value\n   ================ ===========================\n   AIX              ``'aix'``\n   Linux            ``'linux'``\n   Windows          ``'win32'``\n   Windows/Cygwin   ``'cygwin'``\n   macOS            ``'darwin'``\n   ================ ===========================\n\n   .. versionchanged:: 3.3\n      On Linux, :attr:`sys.platform` doesn't contain the major version anymore.\n      It is always ``'linux'``, instead of ``'linux2'`` or ``'linux3'``.  Since\n      older Python versions include the version number, it is recommended to\n      always use the ``startswith`` idiom presented above.\n\n   .. versionchanged:: 3.8\n      On AIX, :attr:`sys.platform` doesn't contain the major version anymore.\n      It is always ``'aix'``, instead of ``'aix5'`` or ``'aix7'``.  Since\n      older Python versions include the version number, it is recommended to\n      always use the ``startswith`` idiom presented above.\n\n   .. seealso::\n\n      :attr:`os.name` has a coarser granularity.  :func:`os.uname` gives\n      system-dependent version information.\n\n      The :mod:`platform` module provides detailed checks for the\n      system's identity.\n\n\n.. data:: prefix\n\n   A string giving the site-specific directory prefix where the platform\n   independent Python files are installed; by default, this is the string\n   ``'/usr/local'``.  This can be set at build time with the ``--prefix``\n   argument to the :program:`configure` script.  The main collection of Python\n   library modules is installed in the directory :file:`{prefix}/lib/python{X.Y}`\n   while the platform independent header files (all except :file:`pyconfig.h`) are\n   stored in :file:`{prefix}/include/python{X.Y}`, where *X.Y* is the version\n   number of Python, for example ``3.2``.\n\n   .. note:: If a :ref:`virtual environment <venv-def>` is in effect, this\n      value will be changed in ``site.py`` to point to the virtual\n      environment. The value for the Python installation will still be\n      available, via :data:`base_prefix`.\n\n\n.. data:: ps1\n          ps2\n\n   .. index::\n      single: interpreter prompts\n      single: prompts, interpreter\n      single: >>>; interpreter prompt\n      single: ...; interpreter prompt\n\n   Strings specifying the primary and secondary prompt of the interpreter.  These\n   are only defined if the interpreter is in interactive mode.  Their initial\n   values in this case are ``'>>> '`` and ``'... '``.  If a non-string object is\n   assigned to either variable, its :func:`str` is re-evaluated each time the\n   interpreter prepares to read a new interactive command; this can be used to\n   implement a dynamic prompt.\n\n\n.. function:: setcheckinterval(interval)\n\n   Set the interpreter's \"check interval\".  This integer value determines how often\n   the interpreter checks for periodic things such as thread switches and signal\n   handlers.  The default is ``100``, meaning the check is performed every 100\n   Python virtual instructions. Setting it to a larger value may increase\n   performance for programs using threads.  Setting it to a value ``<=`` 0 checks\n   every virtual instruction, maximizing responsiveness as well as overhead.\n\n   .. deprecated:: 3.2\n      This function doesn't have an effect anymore, as the internal logic for\n      thread switching and asynchronous tasks has been rewritten.  Use\n      :func:`setswitchinterval` instead.\n\n\n.. function:: setdlopenflags(n)\n\n   Set the flags used by the interpreter for :c:func:`dlopen` calls, such as when\n   the interpreter loads extension modules.  Among other things, this will enable a\n   lazy resolving of symbols when importing a module, if called as\n   ``sys.setdlopenflags(0)``.  To share symbols across extension modules, call as\n   ``sys.setdlopenflags(os.RTLD_GLOBAL)``.  Symbolic names for the flag values\n   can be found in the :mod:`os` module (``RTLD_xxx`` constants, e.g.\n   :data:`os.RTLD_LAZY`).\n\n   .. availability:: Unix.\n\n.. function:: setprofile(profilefunc)\n\n   .. index::\n      single: profile function\n      single: profiler\n\n   Set the system's profile function, which allows you to implement a Python source\n   code profiler in Python.  See chapter :ref:`profile` for more information on the\n   Python profiler.  The system's profile function is called similarly to the\n   system's trace function (see :func:`settrace`), but it is called with different events,\n   for example it isn't called for each executed line of code (only on call and return,\n   but the return event is reported even when an exception has been set). The function is\n   thread-specific, but there is no way for the profiler to know about context switches between\n   threads, so it does not make sense to use this in the presence of multiple threads. Also,\n   its return value is not used, so it can simply return ``None``.  Error in the profile\n   function will cause itself unset.\n\n   Profile functions should have three arguments: *frame*, *event*, and\n   *arg*. *frame* is the current stack frame.  *event* is a string: ``'call'``,\n   ``'return'``, ``'c_call'``, ``'c_return'``, or ``'c_exception'``. *arg* depends\n   on the event type.\n\n   .. audit-event:: sys.setprofile \"\" sys.setprofile\n\n   The events have the following meaning:\n\n   ``'call'``\n      A function is called (or some other code block entered).  The\n      profile function is called; *arg* is ``None``.\n\n   ``'return'``\n      A function (or other code block) is about to return.  The profile\n      function is called; *arg* is the value that will be returned, or ``None``\n      if the event is caused by an exception being raised.\n\n   ``'c_call'``\n      A C function is about to be called.  This may be an extension function or\n      a built-in.  *arg* is the C function object.\n\n   ``'c_return'``\n      A C function has returned. *arg* is the C function object.\n\n   ``'c_exception'``\n      A C function has raised an exception.  *arg* is the C function object.\n\n.. function:: setrecursionlimit(limit)\n\n   Set the maximum depth of the Python interpreter stack to *limit*.  This limit\n   prevents infinite recursion from causing an overflow of the C stack and crashing\n   Python.\n\n   The highest possible limit is platform-dependent.  A user may need to set the\n   limit higher when they have a program that requires deep recursion and a platform\n   that supports a higher limit.  This should be done with care, because a too-high\n   limit can lead to a crash.\n\n   If the new limit is too low at the current recursion depth, a\n   :exc:`RecursionError` exception is raised.\n\n   .. versionchanged:: 3.5.1\n      A :exc:`RecursionError` exception is now raised if the new limit is too\n      low at the current recursion depth.\n\n\n.. function:: setswitchinterval(interval)\n\n   Set the interpreter's thread switch interval (in seconds).  This floating-point\n   value determines the ideal duration of the \"timeslices\" allocated to\n   concurrently running Python threads.  Please note that the actual value\n   can be higher, especially if long-running internal functions or methods\n   are used.  Also, which thread becomes scheduled at the end of the interval\n   is the operating system's decision.  The interpreter doesn't have its\n   own scheduler.\n\n   .. versionadded:: 3.2\n\n\n.. function:: settrace(tracefunc)\n\n   .. index::\n      single: trace function\n      single: debugger\n\n   Set the system's trace function, which allows you to implement a Python\n   source code debugger in Python.  The function is thread-specific; for a\n   debugger to support multiple threads, it must register a trace function using\n   :func:`settrace` for each thread being debugged or use :func:`threading.settrace`.\n\n   Trace functions should have three arguments: *frame*, *event*, and\n   *arg*. *frame* is the current stack frame.  *event* is a string: ``'call'``,\n   ``'line'``, ``'return'``, ``'exception'`` or ``'opcode'``.  *arg* depends on\n   the event type.\n\n   The trace function is invoked (with *event* set to ``'call'``) whenever a new\n   local scope is entered; it should return a reference to a local trace\n   function to be used for the new scope, or ``None`` if the scope shouldn't be\n   traced.\n\n   The local trace function should return a reference to itself (or to another\n   function for further tracing in that scope), or ``None`` to turn off tracing\n   in that scope.\n\n   If there is any error occurred in the trace function, it will be unset, just\n   like ``settrace(None)`` is called.\n\n   The events have the following meaning:\n\n   ``'call'``\n      A function is called (or some other code block entered).  The\n      global trace function is called; *arg* is ``None``; the return value\n      specifies the local trace function.\n\n   ``'line'``\n      The interpreter is about to execute a new line of code or re-execute the\n      condition of a loop.  The local trace function is called; *arg* is\n      ``None``; the return value specifies the new local trace function.  See\n      :file:`Objects/lnotab_notes.txt` for a detailed explanation of how this\n      works.\n      Per-line events may be disabled for a frame by setting\n      :attr:`f_trace_lines` to :const:`False` on that frame.\n\n   ``'return'``\n      A function (or other code block) is about to return.  The local trace\n      function is called; *arg* is the value that will be returned, or ``None``\n      if the event is caused by an exception being raised.  The trace function's\n      return value is ignored.\n\n   ``'exception'``\n      An exception has occurred.  The local trace function is called; *arg* is a\n      tuple ``(exception, value, traceback)``; the return value specifies the\n      new local trace function.\n\n   ``'opcode'``\n      The interpreter is about to execute a new opcode (see :mod:`dis` for\n      opcode details).  The local trace function is called; *arg* is\n      ``None``; the return value specifies the new local trace function.\n      Per-opcode events are not emitted by default: they must be explicitly\n      requested by setting :attr:`f_trace_opcodes` to :const:`True` on the\n      frame.\n\n   Note that as an exception is propagated down the chain of callers, an\n   ``'exception'`` event is generated at each level.\n\n   For more fine-grained usage, it's possible to set a trace function by\n   assigning ``frame.f_trace = tracefunc`` explicitly, rather than relying on\n   it being set indirectly via the return value from an already installed\n   trace function. This is also required for activating the trace function on\n   the current frame, which :func:`settrace` doesn't do. Note that in order\n   for this to work, a global tracing function must have been installed\n   with :func:`settrace` in order to enable the runtime tracing machinery,\n   but it doesn't need to be the same tracing function (e.g. it could be a\n   low overhead tracing function that simply returns ``None`` to disable\n   itself immediately on each frame).\n\n   For more information on code and frame objects, refer to :ref:`types`.\n\n   .. audit-event:: sys.settrace \"\" sys.settrace\n\n   .. impl-detail::\n\n      The :func:`settrace` function is intended only for implementing debuggers,\n      profilers, coverage tools and the like.  Its behavior is part of the\n      implementation platform, rather than part of the language definition, and\n      thus may not be available in all Python implementations.\n\n   .. versionchanged:: 3.7\n\n      ``'opcode'`` event type added; :attr:`f_trace_lines` and\n      :attr:`f_trace_opcodes` attributes added to frames\n\n.. function:: set_asyncgen_hooks(firstiter, finalizer)\n\n   Accepts two optional keyword arguments which are callables that accept an\n   :term:`asynchronous generator iterator` as an argument. The *firstiter*\n   callable will be called when an asynchronous generator is iterated for the\n   first time. The *finalizer* will be called when an asynchronous generator\n   is about to be garbage collected.\n\n   .. audit-event:: sys.set_asyncgen_hooks_firstiter \"\" sys.set_asyncgen_hooks\n\n   .. audit-event:: sys.set_asyncgen_hooks_finalizer \"\" sys.set_asyncgen_hooks\n\n   Two auditing events are raised because the underlying API consists of two\n   calls, each of which must raise its own event.\n\n   .. versionadded:: 3.6\n      See :pep:`525` for more details, and for a reference example of a\n      *finalizer* method see the implementation of\n      ``asyncio.Loop.shutdown_asyncgens`` in\n      :source:`Lib/asyncio/base_events.py`\n\n   .. note::\n      This function has been added on a provisional basis (see :pep:`411`\n      for details.)\n\n.. function:: set_coroutine_origin_tracking_depth(depth)\n\n   Allows enabling or disabling coroutine origin tracking. When\n   enabled, the ``cr_origin`` attribute on coroutine objects will\n   contain a tuple of (filename, line number, function name) tuples\n   describing the traceback where the coroutine object was created,\n   with the most recent call first. When disabled, ``cr_origin`` will\n   be None.\n\n   To enable, pass a *depth* value greater than zero; this sets the\n   number of frames whose information will be captured. To disable,\n   pass set *depth* to zero.\n\n   This setting is thread-specific.\n\n   .. versionadded:: 3.7\n\n   .. note::\n      This function has been added on a provisional basis (see :pep:`411`\n      for details.)  Use it only for debugging purposes.\n\n.. function:: _enablelegacywindowsfsencoding()\n\n   Changes the default filesystem encoding and errors mode to 'mbcs' and\n   'replace' respectively, for consistency with versions of Python prior to 3.6.\n\n   This is equivalent to defining the :envvar:`PYTHONLEGACYWINDOWSFSENCODING`\n   environment variable before launching Python.\n\n   .. availability:: Windows.\n\n   .. versionadded:: 3.6\n      See :pep:`529` for more details.\n\n.. data:: stdin\n          stdout\n          stderr\n\n   :term:`File objects <file object>` used by the interpreter for standard\n   input, output and errors:\n\n   * ``stdin`` is used for all interactive input (including calls to\n     :func:`input`);\n   * ``stdout`` is used for the output of :func:`print` and :term:`expression`\n     statements and for the prompts of :func:`input`;\n   * The interpreter's own prompts and its error messages go to ``stderr``.\n\n   These streams are regular :term:`text files <text file>` like those\n   returned by the :func:`open` function.  Their parameters are chosen as\n   follows:\n\n   * The character encoding is platform-dependent.  Non-Windows\n     platforms use the locale encoding (see\n     :meth:`locale.getpreferredencoding()`).\n\n     On Windows, UTF-8 is used for the console device.  Non-character\n     devices such as disk files and pipes use the system locale\n     encoding (i.e. the ANSI codepage).  Non-console character\n     devices such as NUL (i.e. where ``isatty()`` returns ``True``) use the\n     value of the console input and output codepages at startup,\n     respectively for stdin and stdout/stderr. This defaults to the\n     system locale encoding if the process is not initially attached\n     to a console.\n\n     The special behaviour of the console can be overridden\n     by setting the environment variable PYTHONLEGACYWINDOWSSTDIO\n     before starting Python. In that case, the console codepages are\n     used as for any other character device.\n\n     Under all platforms, you can override the character encoding by\n     setting the :envvar:`PYTHONIOENCODING` environment variable before\n     starting Python or by using the new :option:`-X` ``utf8`` command\n     line option and :envvar:`PYTHONUTF8` environment variable.  However,\n     for the Windows console, this only applies when\n     :envvar:`PYTHONLEGACYWINDOWSSTDIO` is also set.\n\n   * When interactive, ``stdout`` and ``stderr`` streams are line-buffered.\n     Otherwise, they are block-buffered like regular text files.  You can\n     override this value with the :option:`-u` command-line option.\n\n   .. note::\n\n      To write or read binary data from/to the standard streams, use the\n      underlying binary :data:`~io.TextIOBase.buffer` object.  For example, to\n      write bytes to :data:`stdout`, use ``sys.stdout.buffer.write(b'abc')``.\n\n      However, if you are writing a library (and do not control in which\n      context its code will be executed), be aware that the standard streams\n      may be replaced with file-like objects like :class:`io.StringIO` which\n      do not support the :attr:`~io.BufferedIOBase.buffer` attribute.\n\n\n.. data:: __stdin__\n          __stdout__\n          __stderr__\n\n   These objects contain the original values of ``stdin``, ``stderr`` and\n   ``stdout`` at the start of the program.  They are used during finalization,\n   and could be useful to print to the actual standard stream no matter if the\n   ``sys.std*`` object has been redirected.\n\n   It can also be used to restore the actual files to known working file objects\n   in case they have been overwritten with a broken object.  However, the\n   preferred way to do this is to explicitly save the previous stream before\n   replacing it, and restore the saved object.\n\n   .. note::\n       Under some conditions ``stdin``, ``stdout`` and ``stderr`` as well as the\n       original values ``__stdin__``, ``__stdout__`` and ``__stderr__`` can be\n       ``None``. It is usually the case for Windows GUI apps that aren't connected\n       to a console and Python apps started with :program:`pythonw`.\n\n\n.. data:: thread_info\n\n   A :term:`named tuple` holding information about the thread\n   implementation.\n\n   .. tabularcolumns:: |l|p{0.7\\linewidth}|\n\n   +------------------+---------------------------------------------------------+\n   | Attribute        | Explanation                                             |\n   +==================+=========================================================+\n   | :const:`name`    | Name of the thread implementation:                      |\n   |                  |                                                         |\n   |                  |  * ``'nt'``: Windows threads                            |\n   |                  |  * ``'pthread'``: POSIX threads                         |\n   |                  |  * ``'solaris'``: Solaris threads                       |\n   +------------------+---------------------------------------------------------+\n   | :const:`lock`    | Name of the lock implementation:                        |\n   |                  |                                                         |\n   |                  |  * ``'semaphore'``: a lock uses a semaphore             |\n   |                  |  * ``'mutex+cond'``: a lock uses a mutex                |\n   |                  |    and a condition variable                             |\n   |                  |  * ``None`` if this information is unknown              |\n   +------------------+---------------------------------------------------------+\n   | :const:`version` | Name and version of the thread library. It is a string, |\n   |                  | or ``None`` if this information is unknown.             |\n   +------------------+---------------------------------------------------------+\n\n   .. versionadded:: 3.3\n\n\n.. data:: tracebacklimit\n\n   When this variable is set to an integer value, it determines the maximum number\n   of levels of traceback information printed when an unhandled exception occurs.\n   The default is ``1000``.  When set to ``0`` or less, all traceback information\n   is suppressed and only the exception type and value are printed.\n\n\n.. function:: unraisablehook(unraisable, /)\n\n   Handle an unraisable exception.\n\n   Called when an exception has occurred but there is no way for Python to\n   handle it. For example, when a destructor raises an exception or during\n   garbage collection (:func:`gc.collect`).\n\n   The *unraisable* argument has the following attributes:\n\n   * *exc_type*: Exception type.\n   * *exc_value*: Exception value, can be ``None``.\n   * *exc_traceback*: Exception traceback, can be ``None``.\n   * *err_msg*: Error message, can be ``None``.\n   * *object*: Object causing the exception, can be ``None``.\n\n   The default hook formats *err_msg* and *object* as:\n   ``f'{err_msg}: {object!r}'``; use \"Exception ignored in\" error message\n   if *err_msg* is ``None``.\n\n   :func:`sys.unraisablehook` can be overridden to control how unraisable\n   exceptions are handled.\n\n   Storing *exc_value* using a custom hook can create a reference cycle. It\n   should be cleared explicitly to break the reference cycle when the\n   exception is no longer needed.\n\n   Storing *object* using a custom hook can resurrect it if it is set to an\n   object which is being finalized. Avoid storing *object* after the custom\n   hook completes to avoid resurrecting objects.\n\n   See also :func:`excepthook` which handles uncaught exceptions.\n\n   .. audit-event:: sys.unraisablehook hook,unraisable sys.unraisablehook\n\n      Raise an auditing event ``sys.unraisablehook`` with arguments\n      ``hook``, ``unraisable`` when an exception that cannot be handled occurs.\n      The ``unraisable`` object is the same as what will be passed to the hook.\n      If no hook has been set, ``hook`` may be ``None``.\n\n   .. versionadded:: 3.8\n\n.. data:: version\n\n   A string containing the version number of the Python interpreter plus additional\n   information on the build number and compiler used.  This string is displayed\n   when the interactive interpreter is started.  Do not extract version information\n   out of it, rather, use :data:`version_info` and the functions provided by the\n   :mod:`platform` module.\n\n\n.. data:: api_version\n\n   The C API version for this interpreter.  Programmers may find this useful when\n   debugging version conflicts between Python and extension modules.\n\n\n.. data:: version_info\n\n   A tuple containing the five components of the version number: *major*, *minor*,\n   *micro*, *releaselevel*, and *serial*.  All values except *releaselevel* are\n   integers; the release level is ``'alpha'``, ``'beta'``, ``'candidate'``, or\n   ``'final'``.  The ``version_info`` value corresponding to the Python version 2.0\n   is ``(2, 0, 0, 'final', 0)``.  The components can also be accessed by name,\n   so ``sys.version_info[0]`` is equivalent to ``sys.version_info.major``\n   and so on.\n\n   .. versionchanged:: 3.1\n      Added named component attributes.\n\n.. data:: warnoptions\n\n   This is an implementation detail of the warnings framework; do not modify this\n   value.  Refer to the :mod:`warnings` module for more information on the warnings\n   framework.\n\n\n.. data:: winver\n\n   The version number used to form registry keys on Windows platforms. This is\n   stored as string resource 1000 in the Python DLL.  The value is normally the\n   first three characters of :const:`version`.  It is provided in the :mod:`sys`\n   module for informational purposes; modifying this value has no effect on the\n   registry keys used by Python.\n\n   .. availability:: Windows.\n\n\n.. data:: _xoptions\n\n   A dictionary of the various implementation-specific flags passed through\n   the :option:`-X` command-line option.  Option names are either mapped to\n   their values, if given explicitly, or to :const:`True`.  Example:\n\n   .. code-block:: shell-session\n\n      $ ./python -Xa=b -Xc\n      Python 3.2a3+ (py3k, Oct 16 2010, 20:14:50)\n      [GCC 4.4.3] on linux2\n      Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n      >>> import sys\n      >>> sys._xoptions\n      {'a': 'b', 'c': True}\n\n   .. impl-detail::\n\n      This is a CPython-specific way of accessing options passed through\n      :option:`-X`.  Other implementations may export them through other\n      means, or not at all.\n\n   .. versionadded:: 3.2\n\n\n.. rubric:: Citations\n\n.. [C99] ISO/IEC 9899:1999.  \"Programming languages -- C.\"  A public draft of this standard is available at http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\\ .\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/ctypes.rst": ":mod:`ctypes` --- A foreign function library for Python\n=======================================================\n\n.. module:: ctypes\n   :synopsis: A foreign function library for Python.\n\n.. moduleauthor:: Thomas Heller <theller@python.net>\n\n--------------\n\n:mod:`ctypes` is a foreign function library for Python.  It provides C compatible\ndata types, and allows calling functions in DLLs or shared libraries.  It can be\nused to wrap these libraries in pure Python.\n\n\n.. _ctypes-ctypes-tutorial:\n\nctypes tutorial\n---------------\n\nNote: The code samples in this tutorial use :mod:`doctest` to make sure that\nthey actually work.  Since some code samples behave differently under Linux,\nWindows, or Mac OS X, they contain doctest directives in comments.\n\nNote: Some code samples reference the ctypes :class:`c_int` type.  On platforms\nwhere ``sizeof(long) == sizeof(int)`` it is an alias to :class:`c_long`.\nSo, you should not be confused if :class:`c_long` is printed if you would expect\n:class:`c_int` --- they are actually the same type.\n\n.. _ctypes-loading-dynamic-link-libraries:\n\nLoading dynamic link libraries\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n:mod:`ctypes` exports the *cdll*, and on Windows *windll* and *oledll*\nobjects, for loading dynamic link libraries.\n\nYou load libraries by accessing them as attributes of these objects. *cdll*\nloads libraries which export functions using the standard ``cdecl`` calling\nconvention, while *windll* libraries call functions using the ``stdcall``\ncalling convention. *oledll* also uses the ``stdcall`` calling convention, and\nassumes the functions return a Windows :c:type:`HRESULT` error code. The error\ncode is used to automatically raise an :class:`OSError` exception when the\nfunction call fails.\n\n.. versionchanged:: 3.3\n   Windows errors used to raise :exc:`WindowsError`, which is now an alias\n   of :exc:`OSError`.\n\n\nHere are some examples for Windows. Note that ``msvcrt`` is the MS standard C\nlibrary containing most standard C functions, and uses the cdecl calling\nconvention::\n\n   >>> from ctypes import *\n   >>> print(windll.kernel32)  # doctest: +WINDOWS\n   <WinDLL 'kernel32', handle ... at ...>\n   >>> print(cdll.msvcrt)      # doctest: +WINDOWS\n   <CDLL 'msvcrt', handle ... at ...>\n   >>> libc = cdll.msvcrt      # doctest: +WINDOWS\n   >>>\n\nWindows appends the usual ``.dll`` file suffix automatically.\n\n.. note::\n    Accessing the standard C library through ``cdll.msvcrt`` will use an\n    outdated version of the library that may be incompatible with the one\n    being used by Python. Where possible, use native Python functionality,\n    or else import and use the ``msvcrt`` module.\n\nOn Linux, it is required to specify the filename *including* the extension to\nload a library, so attribute access can not be used to load libraries. Either the\n:meth:`LoadLibrary` method of the dll loaders should be used, or you should load\nthe library by creating an instance of CDLL by calling the constructor::\n\n   >>> cdll.LoadLibrary(\"libc.so.6\")  # doctest: +LINUX\n   <CDLL 'libc.so.6', handle ... at ...>\n   >>> libc = CDLL(\"libc.so.6\")       # doctest: +LINUX\n   >>> libc                           # doctest: +LINUX\n   <CDLL 'libc.so.6', handle ... at ...>\n   >>>\n\n.. XXX Add section for Mac OS X.\n\n\n.. _ctypes-accessing-functions-from-loaded-dlls:\n\nAccessing functions from loaded dlls\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nFunctions are accessed as attributes of dll objects::\n\n   >>> from ctypes import *\n   >>> libc.printf\n   <_FuncPtr object at 0x...>\n   >>> print(windll.kernel32.GetModuleHandleA)  # doctest: +WINDOWS\n   <_FuncPtr object at 0x...>\n   >>> print(windll.kernel32.MyOwnFunction)     # doctest: +WINDOWS\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n     File \"ctypes.py\", line 239, in __getattr__\n       func = _StdcallFuncPtr(name, self)\n   AttributeError: function 'MyOwnFunction' not found\n   >>>\n\nNote that win32 system dlls like ``kernel32`` and ``user32`` often export ANSI\nas well as UNICODE versions of a function. The UNICODE version is exported with\nan ``W`` appended to the name, while the ANSI version is exported with an ``A``\nappended to the name. The win32 ``GetModuleHandle`` function, which returns a\n*module handle* for a given module name, has the following C prototype, and a\nmacro is used to expose one of them as ``GetModuleHandle`` depending on whether\nUNICODE is defined or not::\n\n   /* ANSI version */\n   HMODULE GetModuleHandleA(LPCSTR lpModuleName);\n   /* UNICODE version */\n   HMODULE GetModuleHandleW(LPCWSTR lpModuleName);\n\n*windll* does not try to select one of them by magic, you must access the\nversion you need by specifying ``GetModuleHandleA`` or ``GetModuleHandleW``\nexplicitly, and then call it with bytes or string objects respectively.\n\nSometimes, dlls export functions with names which aren't valid Python\nidentifiers, like ``\"??2@YAPAXI@Z\"``. In this case you have to use\n:func:`getattr` to retrieve the function::\n\n   >>> getattr(cdll.msvcrt, \"??2@YAPAXI@Z\")  # doctest: +WINDOWS\n   <_FuncPtr object at 0x...>\n   >>>\n\nOn Windows, some dlls export functions not by name but by ordinal. These\nfunctions can be accessed by indexing the dll object with the ordinal number::\n\n   >>> cdll.kernel32[1]  # doctest: +WINDOWS\n   <_FuncPtr object at 0x...>\n   >>> cdll.kernel32[0]  # doctest: +WINDOWS\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n     File \"ctypes.py\", line 310, in __getitem__\n       func = _StdcallFuncPtr(name, self)\n   AttributeError: function ordinal 0 not found\n   >>>\n\n\n.. _ctypes-calling-functions:\n\nCalling functions\n^^^^^^^^^^^^^^^^^\n\nYou can call these functions like any other Python callable. This example uses\nthe ``time()`` function, which returns system time in seconds since the Unix\nepoch, and the ``GetModuleHandleA()`` function, which returns a win32 module\nhandle.\n\nThis example calls both functions with a ``NULL`` pointer (``None`` should be used\nas the ``NULL`` pointer)::\n\n   >>> print(libc.time(None))  # doctest: +SKIP\n   1150640792\n   >>> print(hex(windll.kernel32.GetModuleHandleA(None)))  # doctest: +WINDOWS\n   0x1d000000\n   >>>\n\n:exc:`ValueError` is raised when you call an ``stdcall`` function with the\n``cdecl`` calling convention, or vice versa::\n\n   >>> cdll.kernel32.GetModuleHandleA(None)  # doctest: +WINDOWS\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   ValueError: Procedure probably called with not enough arguments (4 bytes missing)\n   >>>\n\n   >>> windll.msvcrt.printf(b\"spam\")  # doctest: +WINDOWS\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   ValueError: Procedure probably called with too many arguments (4 bytes in excess)\n   >>>\n\nTo find out the correct calling convention you have to look into the C header\nfile or the documentation for the function you want to call.\n\nOn Windows, :mod:`ctypes` uses win32 structured exception handling to prevent\ncrashes from general protection faults when functions are called with invalid\nargument values::\n\n   >>> windll.kernel32.GetModuleHandleA(32)  # doctest: +WINDOWS\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   OSError: exception: access violation reading 0x00000020\n   >>>\n\nThere are, however, enough ways to crash Python with :mod:`ctypes`, so you\nshould be careful anyway.  The :mod:`faulthandler` module can be helpful in\ndebugging crashes (e.g. from segmentation faults produced by erroneous C library\ncalls).\n\n``None``, integers, bytes objects and (unicode) strings are the only native\nPython objects that can directly be used as parameters in these function calls.\n``None`` is passed as a C ``NULL`` pointer, bytes objects and strings are passed\nas pointer to the memory block that contains their data (:c:type:`char *` or\n:c:type:`wchar_t *`).  Python integers are passed as the platforms default C\n:c:type:`int` type, their value is masked to fit into the C type.\n\nBefore we move on calling functions with other parameter types, we have to learn\nmore about :mod:`ctypes` data types.\n\n\n.. _ctypes-fundamental-data-types:\n\nFundamental data types\n^^^^^^^^^^^^^^^^^^^^^^\n\n:mod:`ctypes` defines a number of primitive C compatible data types:\n\n+----------------------+------------------------------------------+----------------------------+\n| ctypes type          | C type                                   | Python type                |\n+======================+==========================================+============================+\n| :class:`c_bool`      | :c:type:`_Bool`                          | bool (1)                   |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_char`      | :c:type:`char`                           | 1-character bytes object   |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_wchar`     | :c:type:`wchar_t`                        | 1-character string         |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_byte`      | :c:type:`char`                           | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_ubyte`     | :c:type:`unsigned char`                  | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_short`     | :c:type:`short`                          | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_ushort`    | :c:type:`unsigned short`                 | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_int`       | :c:type:`int`                            | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_uint`      | :c:type:`unsigned int`                   | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_long`      | :c:type:`long`                           | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_ulong`     | :c:type:`unsigned long`                  | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_longlong`  | :c:type:`__int64` or :c:type:`long long` | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_ulonglong` | :c:type:`unsigned __int64` or            | int                        |\n|                      | :c:type:`unsigned long long`             |                            |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_size_t`    | :c:type:`size_t`                         | int                        |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_ssize_t`   | :c:type:`ssize_t` or                     | int                        |\n|                      | :c:type:`Py_ssize_t`                     |                            |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_float`     | :c:type:`float`                          | float                      |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_double`    | :c:type:`double`                         | float                      |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_longdouble`| :c:type:`long double`                    | float                      |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_char_p`    | :c:type:`char *` (NUL terminated)        | bytes object or ``None``   |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_wchar_p`   | :c:type:`wchar_t *` (NUL terminated)     | string or ``None``         |\n+----------------------+------------------------------------------+----------------------------+\n| :class:`c_void_p`    | :c:type:`void *`                         | int or ``None``            |\n+----------------------+------------------------------------------+----------------------------+\n\n(1)\n   The constructor accepts any object with a truth value.\n\nAll these types can be created by calling them with an optional initializer of\nthe correct type and value::\n\n   >>> c_int()\n   c_long(0)\n   >>> c_wchar_p(\"Hello, World\")\n   c_wchar_p(140018365411392)\n   >>> c_ushort(-3)\n   c_ushort(65533)\n   >>>\n\nSince these types are mutable, their value can also be changed afterwards::\n\n   >>> i = c_int(42)\n   >>> print(i)\n   c_long(42)\n   >>> print(i.value)\n   42\n   >>> i.value = -99\n   >>> print(i.value)\n   -99\n   >>>\n\nAssigning a new value to instances of the pointer types :class:`c_char_p`,\n:class:`c_wchar_p`, and :class:`c_void_p` changes the *memory location* they\npoint to, *not the contents* of the memory block (of course not, because Python\nbytes objects are immutable)::\n\n   >>> s = \"Hello, World\"\n   >>> c_s = c_wchar_p(s)\n   >>> print(c_s)\n   c_wchar_p(139966785747344)\n   >>> print(c_s.value)\n   Hello World\n   >>> c_s.value = \"Hi, there\"\n   >>> print(c_s)              # the memory location has changed\n   c_wchar_p(139966783348904)\n   >>> print(c_s.value)\n   Hi, there\n   >>> print(s)                # first object is unchanged\n   Hello, World\n   >>>\n\nYou should be careful, however, not to pass them to functions expecting pointers\nto mutable memory. If you need mutable memory blocks, ctypes has a\n:func:`create_string_buffer` function which creates these in various ways.  The\ncurrent memory block contents can be accessed (or changed) with the ``raw``\nproperty; if you want to access it as NUL terminated string, use the ``value``\nproperty::\n\n   >>> from ctypes import *\n   >>> p = create_string_buffer(3)            # create a 3 byte buffer, initialized to NUL bytes\n   >>> print(sizeof(p), repr(p.raw))\n   3 b'\\x00\\x00\\x00'\n   >>> p = create_string_buffer(b\"Hello\")     # create a buffer containing a NUL terminated string\n   >>> print(sizeof(p), repr(p.raw))\n   6 b'Hello\\x00'\n   >>> print(repr(p.value))\n   b'Hello'\n   >>> p = create_string_buffer(b\"Hello\", 10) # create a 10 byte buffer\n   >>> print(sizeof(p), repr(p.raw))\n   10 b'Hello\\x00\\x00\\x00\\x00\\x00'\n   >>> p.value = b\"Hi\"\n   >>> print(sizeof(p), repr(p.raw))\n   10 b'Hi\\x00lo\\x00\\x00\\x00\\x00\\x00'\n   >>>\n\nThe :func:`create_string_buffer` function replaces the :func:`c_buffer` function\n(which is still available as an alias), as well as the :func:`c_string` function\nfrom earlier ctypes releases.  To create a mutable memory block containing\nunicode characters of the C type :c:type:`wchar_t` use the\n:func:`create_unicode_buffer` function.\n\n\n.. _ctypes-calling-functions-continued:\n\nCalling functions, continued\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nNote that printf prints to the real standard output channel, *not* to\n:data:`sys.stdout`, so these examples will only work at the console prompt, not\nfrom within *IDLE* or *PythonWin*::\n\n   >>> printf = libc.printf\n   >>> printf(b\"Hello, %s\\n\", b\"World!\")\n   Hello, World!\n   14\n   >>> printf(b\"Hello, %S\\n\", \"World!\")\n   Hello, World!\n   14\n   >>> printf(b\"%d bottles of beer\\n\", 42)\n   42 bottles of beer\n   19\n   >>> printf(b\"%f bottles of beer\\n\", 42.5)\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   ArgumentError: argument 2: exceptions.TypeError: Don't know how to convert parameter 2\n   >>>\n\nAs has been mentioned before, all Python types except integers, strings, and\nbytes objects have to be wrapped in their corresponding :mod:`ctypes` type, so\nthat they can be converted to the required C data type::\n\n   >>> printf(b\"An int %d, a double %f\\n\", 1234, c_double(3.14))\n   An int 1234, a double 3.140000\n   31\n   >>>\n\n\n.. _ctypes-calling-functions-with-own-custom-data-types:\n\nCalling functions with your own custom data types\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nYou can also customize :mod:`ctypes` argument conversion to allow instances of\nyour own classes be used as function arguments.  :mod:`ctypes` looks for an\n:attr:`_as_parameter_` attribute and uses this as the function argument.  Of\ncourse, it must be one of integer, string, or bytes::\n\n   >>> class Bottles:\n   ...     def __init__(self, number):\n   ...         self._as_parameter_ = number\n   ...\n   >>> bottles = Bottles(42)\n   >>> printf(b\"%d bottles of beer\\n\", bottles)\n   42 bottles of beer\n   19\n   >>>\n\nIf you don't want to store the instance's data in the :attr:`_as_parameter_`\ninstance variable, you could define a :class:`property` which makes the\nattribute available on request.\n\n\n.. _ctypes-specifying-required-argument-types:\n\nSpecifying the required argument types (function prototypes)\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nIt is possible to specify the required argument types of functions exported from\nDLLs by setting the :attr:`argtypes` attribute.\n\n:attr:`argtypes` must be a sequence of C data types (the ``printf`` function is\nprobably not a good example here, because it takes a variable number and\ndifferent types of parameters depending on the format string, on the other hand\nthis is quite handy to experiment with this feature)::\n\n   >>> printf.argtypes = [c_char_p, c_char_p, c_int, c_double]\n   >>> printf(b\"String '%s', Int %d, Double %f\\n\", b\"Hi\", 10, 2.2)\n   String 'Hi', Int 10, Double 2.200000\n   37\n   >>>\n\nSpecifying a format protects against incompatible argument types (just as a\nprototype for a C function), and tries to convert the arguments to valid types::\n\n   >>> printf(b\"%d %d %d\", 1, 2, 3)\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   ArgumentError: argument 2: exceptions.TypeError: wrong type\n   >>> printf(b\"%s %d %f\\n\", b\"X\", 2, 3)\n   X 2 3.000000\n   13\n   >>>\n\nIf you have defined your own classes which you pass to function calls, you have\nto implement a :meth:`from_param` class method for them to be able to use them\nin the :attr:`argtypes` sequence. The :meth:`from_param` class method receives\nthe Python object passed to the function call, it should do a typecheck or\nwhatever is needed to make sure this object is acceptable, and then return the\nobject itself, its :attr:`_as_parameter_` attribute, or whatever you want to\npass as the C function argument in this case. Again, the result should be an\ninteger, string, bytes, a :mod:`ctypes` instance, or an object with an\n:attr:`_as_parameter_` attribute.\n\n\n.. _ctypes-return-types:\n\nReturn types\n^^^^^^^^^^^^\n\nBy default functions are assumed to return the C :c:type:`int` type.  Other\nreturn types can be specified by setting the :attr:`restype` attribute of the\nfunction object.\n\nHere is a more advanced example, it uses the ``strchr`` function, which expects\na string pointer and a char, and returns a pointer to a string::\n\n   >>> strchr = libc.strchr\n   >>> strchr(b\"abcdef\", ord(\"d\"))  # doctest: +SKIP\n   8059983\n   >>> strchr.restype = c_char_p    # c_char_p is a pointer to a string\n   >>> strchr(b\"abcdef\", ord(\"d\"))\n   b'def'\n   >>> print(strchr(b\"abcdef\", ord(\"x\")))\n   None\n   >>>\n\nIf you want to avoid the ``ord(\"x\")`` calls above, you can set the\n:attr:`argtypes` attribute, and the second argument will be converted from a\nsingle character Python bytes object into a C char::\n\n   >>> strchr.restype = c_char_p\n   >>> strchr.argtypes = [c_char_p, c_char]\n   >>> strchr(b\"abcdef\", b\"d\")\n   'def'\n   >>> strchr(b\"abcdef\", b\"def\")\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   ArgumentError: argument 2: exceptions.TypeError: one character string expected\n   >>> print(strchr(b\"abcdef\", b\"x\"))\n   None\n   >>> strchr(b\"abcdef\", b\"d\")\n   'def'\n   >>>\n\nYou can also use a callable Python object (a function or a class for example) as\nthe :attr:`restype` attribute, if the foreign function returns an integer.  The\ncallable will be called with the *integer* the C function returns, and the\nresult of this call will be used as the result of your function call. This is\nuseful to check for error return values and automatically raise an exception::\n\n   >>> GetModuleHandle = windll.kernel32.GetModuleHandleA  # doctest: +WINDOWS\n   >>> def ValidHandle(value):\n   ...     if value == 0:\n   ...         raise WinError()\n   ...     return value\n   ...\n   >>>\n   >>> GetModuleHandle.restype = ValidHandle  # doctest: +WINDOWS\n   >>> GetModuleHandle(None)  # doctest: +WINDOWS\n   486539264\n   >>> GetModuleHandle(\"something silly\")  # doctest: +WINDOWS\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n     File \"<stdin>\", line 3, in ValidHandle\n   OSError: [Errno 126] The specified module could not be found.\n   >>>\n\n``WinError`` is a function which will call Windows ``FormatMessage()`` api to\nget the string representation of an error code, and *returns* an exception.\n``WinError`` takes an optional error code parameter, if no one is used, it calls\n:func:`GetLastError` to retrieve it.\n\nPlease note that a much more powerful error checking mechanism is available\nthrough the :attr:`errcheck` attribute; see the reference manual for details.\n\n\n.. _ctypes-passing-pointers:\n\nPassing pointers (or: passing parameters by reference)\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nSometimes a C api function expects a *pointer* to a data type as parameter,\nprobably to write into the corresponding location, or if the data is too large\nto be passed by value. This is also known as *passing parameters by reference*.\n\n:mod:`ctypes` exports the :func:`byref` function which is used to pass parameters\nby reference.  The same effect can be achieved with the :func:`pointer` function,\nalthough :func:`pointer` does a lot more work since it constructs a real pointer\nobject, so it is faster to use :func:`byref` if you don't need the pointer\nobject in Python itself::\n\n   >>> i = c_int()\n   >>> f = c_float()\n   >>> s = create_string_buffer(b'\\000' * 32)\n   >>> print(i.value, f.value, repr(s.value))\n   0 0.0 b''\n   >>> libc.sscanf(b\"1 3.14 Hello\", b\"%d %f %s\",\n   ...             byref(i), byref(f), s)\n   3\n   >>> print(i.value, f.value, repr(s.value))\n   1 3.1400001049 b'Hello'\n   >>>\n\n\n.. _ctypes-structures-unions:\n\nStructures and unions\n^^^^^^^^^^^^^^^^^^^^^\n\nStructures and unions must derive from the :class:`Structure` and :class:`Union`\nbase classes which are defined in the :mod:`ctypes` module. Each subclass must\ndefine a :attr:`_fields_` attribute.  :attr:`_fields_` must be a list of\n*2-tuples*, containing a *field name* and a *field type*.\n\nThe field type must be a :mod:`ctypes` type like :class:`c_int`, or any other\nderived :mod:`ctypes` type: structure, union, array, pointer.\n\nHere is a simple example of a POINT structure, which contains two integers named\n*x* and *y*, and also shows how to initialize a structure in the constructor::\n\n   >>> from ctypes import *\n   >>> class POINT(Structure):\n   ...     _fields_ = [(\"x\", c_int),\n   ...                 (\"y\", c_int)]\n   ...\n   >>> point = POINT(10, 20)\n   >>> print(point.x, point.y)\n   10 20\n   >>> point = POINT(y=5)\n   >>> print(point.x, point.y)\n   0 5\n   >>> POINT(1, 2, 3)\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   TypeError: too many initializers\n   >>>\n\nYou can, however, build much more complicated structures.  A structure can\nitself contain other structures by using a structure as a field type.\n\nHere is a RECT structure which contains two POINTs named *upperleft* and\n*lowerright*::\n\n   >>> class RECT(Structure):\n   ...     _fields_ = [(\"upperleft\", POINT),\n   ...                 (\"lowerright\", POINT)]\n   ...\n   >>> rc = RECT(point)\n   >>> print(rc.upperleft.x, rc.upperleft.y)\n   0 5\n   >>> print(rc.lowerright.x, rc.lowerright.y)\n   0 0\n   >>>\n\nNested structures can also be initialized in the constructor in several ways::\n\n   >>> r = RECT(POINT(1, 2), POINT(3, 4))\n   >>> r = RECT((1, 2), (3, 4))\n\nField :term:`descriptor`\\s can be retrieved from the *class*, they are useful\nfor debugging because they can provide useful information::\n\n   >>> print(POINT.x)\n   <Field type=c_long, ofs=0, size=4>\n   >>> print(POINT.y)\n   <Field type=c_long, ofs=4, size=4>\n   >>>\n\n\n.. _ctypes-structureunion-alignment-byte-order:\n\n.. warning::\n\n   :mod:`ctypes` does not support passing unions or structures with bit-fields\n   to functions by value.  While this may work on 32-bit x86, it's not\n   guaranteed by the library to work in the general case.  Unions and\n   structures with bit-fields should always be passed to functions by pointer.\n\nStructure/union alignment and byte order\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nBy default, Structure and Union fields are aligned in the same way the C\ncompiler does it. It is possible to override this behavior by specifying a\n:attr:`_pack_` class attribute in the subclass definition. This must be set to a\npositive integer and specifies the maximum alignment for the fields. This is\nwhat ``#pragma pack(n)`` also does in MSVC.\n\n:mod:`ctypes` uses the native byte order for Structures and Unions.  To build\nstructures with non-native byte order, you can use one of the\n:class:`BigEndianStructure`, :class:`LittleEndianStructure`,\n:class:`BigEndianUnion`, and :class:`LittleEndianUnion` base classes.  These\nclasses cannot contain pointer fields.\n\n\n.. _ctypes-bit-fields-in-structures-unions:\n\nBit fields in structures and unions\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nIt is possible to create structures and unions containing bit fields. Bit fields\nare only possible for integer fields, the bit width is specified as the third\nitem in the :attr:`_fields_` tuples::\n\n   >>> class Int(Structure):\n   ...     _fields_ = [(\"first_16\", c_int, 16),\n   ...                 (\"second_16\", c_int, 16)]\n   ...\n   >>> print(Int.first_16)\n   <Field type=c_long, ofs=0:0, bits=16>\n   >>> print(Int.second_16)\n   <Field type=c_long, ofs=0:16, bits=16>\n   >>>\n\n\n.. _ctypes-arrays:\n\nArrays\n^^^^^^\n\nArrays are sequences, containing a fixed number of instances of the same type.\n\nThe recommended way to create array types is by multiplying a data type with a\npositive integer::\n\n   TenPointsArrayType = POINT * 10\n\nHere is an example of a somewhat artificial data type, a structure containing 4\nPOINTs among other stuff::\n\n   >>> from ctypes import *\n   >>> class POINT(Structure):\n   ...     _fields_ = (\"x\", c_int), (\"y\", c_int)\n   ...\n   >>> class MyStruct(Structure):\n   ...     _fields_ = [(\"a\", c_int),\n   ...                 (\"b\", c_float),\n   ...                 (\"point_array\", POINT * 4)]\n   >>>\n   >>> print(len(MyStruct().point_array))\n   4\n   >>>\n\nInstances are created in the usual way, by calling the class::\n\n   arr = TenPointsArrayType()\n   for pt in arr:\n       print(pt.x, pt.y)\n\nThe above code print a series of ``0 0`` lines, because the array contents is\ninitialized to zeros.\n\nInitializers of the correct type can also be specified::\n\n   >>> from ctypes import *\n   >>> TenIntegers = c_int * 10\n   >>> ii = TenIntegers(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\n   >>> print(ii)\n   <c_long_Array_10 object at 0x...>\n   >>> for i in ii: print(i, end=\" \")\n   ...\n   1 2 3 4 5 6 7 8 9 10\n   >>>\n\n\n.. _ctypes-pointers:\n\nPointers\n^^^^^^^^\n\nPointer instances are created by calling the :func:`pointer` function on a\n:mod:`ctypes` type::\n\n   >>> from ctypes import *\n   >>> i = c_int(42)\n   >>> pi = pointer(i)\n   >>>\n\nPointer instances have a :attr:`~_Pointer.contents` attribute which\nreturns the object to which the pointer points, the ``i`` object above::\n\n   >>> pi.contents\n   c_long(42)\n   >>>\n\nNote that :mod:`ctypes` does not have OOR (original object return), it constructs a\nnew, equivalent object each time you retrieve an attribute::\n\n   >>> pi.contents is i\n   False\n   >>> pi.contents is pi.contents\n   False\n   >>>\n\nAssigning another :class:`c_int` instance to the pointer's contents attribute\nwould cause the pointer to point to the memory location where this is stored::\n\n   >>> i = c_int(99)\n   >>> pi.contents = i\n   >>> pi.contents\n   c_long(99)\n   >>>\n\n.. XXX Document dereferencing pointers, and that it is preferred over the\n   .contents attribute.\n\nPointer instances can also be indexed with integers::\n\n   >>> pi[0]\n   99\n   >>>\n\nAssigning to an integer index changes the pointed to value::\n\n   >>> print(i)\n   c_long(99)\n   >>> pi[0] = 22\n   >>> print(i)\n   c_long(22)\n   >>>\n\nIt is also possible to use indexes different from 0, but you must know what\nyou're doing, just as in C: You can access or change arbitrary memory locations.\nGenerally you only use this feature if you receive a pointer from a C function,\nand you *know* that the pointer actually points to an array instead of a single\nitem.\n\nBehind the scenes, the :func:`pointer` function does more than simply create\npointer instances, it has to create pointer *types* first. This is done with the\n:func:`POINTER` function, which accepts any :mod:`ctypes` type, and returns a\nnew type::\n\n   >>> PI = POINTER(c_int)\n   >>> PI\n   <class 'ctypes.LP_c_long'>\n   >>> PI(42)\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   TypeError: expected c_long instead of int\n   >>> PI(c_int(42))\n   <ctypes.LP_c_long object at 0x...>\n   >>>\n\nCalling the pointer type without an argument creates a ``NULL`` pointer.\n``NULL`` pointers have a ``False`` boolean value::\n\n   >>> null_ptr = POINTER(c_int)()\n   >>> print(bool(null_ptr))\n   False\n   >>>\n\n:mod:`ctypes` checks for ``NULL`` when dereferencing pointers (but dereferencing\ninvalid non-\\ ``NULL`` pointers would crash Python)::\n\n   >>> null_ptr[0]\n   Traceback (most recent call last):\n       ....\n   ValueError: NULL pointer access\n   >>>\n\n   >>> null_ptr[0] = 1234\n   Traceback (most recent call last):\n       ....\n   ValueError: NULL pointer access\n   >>>\n\n\n.. _ctypes-type-conversions:\n\nType conversions\n^^^^^^^^^^^^^^^^\n\nUsually, ctypes does strict type checking.  This means, if you have\n``POINTER(c_int)`` in the :attr:`argtypes` list of a function or as the type of\na member field in a structure definition, only instances of exactly the same\ntype are accepted.  There are some exceptions to this rule, where ctypes accepts\nother objects.  For example, you can pass compatible array instances instead of\npointer types.  So, for ``POINTER(c_int)``, ctypes accepts an array of c_int::\n\n   >>> class Bar(Structure):\n   ...     _fields_ = [(\"count\", c_int), (\"values\", POINTER(c_int))]\n   ...\n   >>> bar = Bar()\n   >>> bar.values = (c_int * 3)(1, 2, 3)\n   >>> bar.count = 3\n   >>> for i in range(bar.count):\n   ...     print(bar.values[i])\n   ...\n   1\n   2\n   3\n   >>>\n\nIn addition, if a function argument is explicitly declared to be a pointer type\n(such as ``POINTER(c_int)``) in :attr:`argtypes`, an object of the pointed\ntype (``c_int`` in this case) can be passed to the function.  ctypes will apply\nthe required :func:`byref` conversion in this case automatically.\n\nTo set a POINTER type field to ``NULL``, you can assign ``None``::\n\n   >>> bar.values = None\n   >>>\n\n.. XXX list other conversions...\n\nSometimes you have instances of incompatible types.  In C, you can cast one type\ninto another type.  :mod:`ctypes` provides a :func:`cast` function which can be\nused in the same way.  The ``Bar`` structure defined above accepts\n``POINTER(c_int)`` pointers or :class:`c_int` arrays for its ``values`` field,\nbut not instances of other types::\n\n   >>> bar.values = (c_byte * 4)()\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n   TypeError: incompatible types, c_byte_Array_4 instance instead of LP_c_long instance\n   >>>\n\nFor these cases, the :func:`cast` function is handy.\n\nThe :func:`cast` function can be used to cast a ctypes instance into a pointer\nto a different ctypes data type.  :func:`cast` takes two parameters, a ctypes\nobject that is or can be converted to a pointer of some kind, and a ctypes\npointer type.  It returns an instance of the second argument, which references\nthe same memory block as the first argument::\n\n   >>> a = (c_byte * 4)()\n   >>> cast(a, POINTER(c_int))\n   <ctypes.LP_c_long object at ...>\n   >>>\n\nSo, :func:`cast` can be used to assign to the ``values`` field of ``Bar`` the\nstructure::\n\n   >>> bar = Bar()\n   >>> bar.values = cast((c_byte * 4)(), POINTER(c_int))\n   >>> print(bar.values[0])\n   0\n   >>>\n\n\n.. _ctypes-incomplete-types:\n\nIncomplete Types\n^^^^^^^^^^^^^^^^\n\n*Incomplete Types* are structures, unions or arrays whose members are not yet\nspecified. In C, they are specified by forward declarations, which are defined\nlater::\n\n   struct cell; /* forward declaration */\n\n   struct cell {\n       char *name;\n       struct cell *next;\n   };\n\nThe straightforward translation into ctypes code would be this, but it does not\nwork::\n\n   >>> class cell(Structure):\n   ...     _fields_ = [(\"name\", c_char_p),\n   ...                 (\"next\", POINTER(cell))]\n   ...\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in <module>\n     File \"<stdin>\", line 2, in cell\n   NameError: name 'cell' is not defined\n   >>>\n\nbecause the new ``class cell`` is not available in the class statement itself.\nIn :mod:`ctypes`, we can define the ``cell`` class and set the :attr:`_fields_`\nattribute later, after the class statement::\n\n   >>> from ctypes import *\n   >>> class cell(Structure):\n   ...     pass\n   ...\n   >>> cell._fields_ = [(\"name\", c_char_p),\n   ...                  (\"next\", POINTER(cell))]\n   >>>\n\nLet's try it. We create two instances of ``cell``, and let them point to each\nother, and finally follow the pointer chain a few times::\n\n   >>> c1 = cell()\n   >>> c1.name = \"foo\"\n   >>> c2 = cell()\n   >>> c2.name = \"bar\"\n   >>> c1.next = pointer(c2)\n   >>> c2.next = pointer(c1)\n   >>> p = c1\n   >>> for i in range(8):\n   ...     print(p.name, end=\" \")\n   ...     p = p.next[0]\n   ...\n   foo bar foo bar foo bar foo bar\n   >>>\n\n\n.. _ctypes-callback-functions:\n\nCallback functions\n^^^^^^^^^^^^^^^^^^\n\n:mod:`ctypes` allows creating C callable function pointers from Python callables.\nThese are sometimes called *callback functions*.\n\nFirst, you must create a class for the callback function. The class knows the\ncalling convention, the return type, and the number and types of arguments this\nfunction will receive.\n\nThe :func:`CFUNCTYPE` factory function creates types for callback functions\nusing the ``cdecl`` calling convention. On Windows, the :func:`WINFUNCTYPE`\nfactory function creates types for callback functions using the ``stdcall``\ncalling convention.\n\nBoth of these factory functions are called with the result type as first\nargument, and the callback functions expected argument types as the remaining\narguments.\n\nI will present an example here which uses the standard C library's\n:c:func:`qsort` function, that is used to sort items with the help of a callback\nfunction.  :c:func:`qsort` will be used to sort an array of integers::\n\n   >>> IntArray5 = c_int * 5\n   >>> ia = IntArray5(5, 1, 7, 33, 99)\n   >>> qsort = libc.qsort\n   >>> qsort.restype = None\n   >>>\n\n:func:`qsort` must be called with a pointer to the data to sort, the number of\nitems in the data array, the size of one item, and a pointer to the comparison\nfunction, the callback. The callback will then be called with two pointers to\nitems, and it must return a negative integer if the first item is smaller than\nthe second, a zero if they are equal, and a positive integer otherwise.\n\nSo our callback function receives pointers to integers, and must return an\ninteger. First we create the ``type`` for the callback function::\n\n   >>> CMPFUNC = CFUNCTYPE(c_int, POINTER(c_int), POINTER(c_int))\n   >>>\n\nTo get started, here is a simple callback that shows the values it gets\npassed::\n\n   >>> def py_cmp_func(a, b):\n   ...     print(\"py_cmp_func\", a[0], b[0])\n   ...     return 0\n   ...\n   >>> cmp_func = CMPFUNC(py_cmp_func)\n   >>>\n\nThe result::\n\n   >>> qsort(ia, len(ia), sizeof(c_int), cmp_func)  # doctest: +LINUX\n   py_cmp_func 5 1\n   py_cmp_func 33 99\n   py_cmp_func 7 33\n   py_cmp_func 5 7\n   py_cmp_func 1 7\n   >>>\n\nNow we can actually compare the two items and return a useful result::\n\n   >>> def py_cmp_func(a, b):\n   ...     print(\"py_cmp_func\", a[0], b[0])\n   ...     return a[0] - b[0]\n   ...\n   >>>\n   >>> qsort(ia, len(ia), sizeof(c_int), CMPFUNC(py_cmp_func)) # doctest: +LINUX\n   py_cmp_func 5 1\n   py_cmp_func 33 99\n   py_cmp_func 7 33\n   py_cmp_func 1 7\n   py_cmp_func 5 7\n   >>>\n\nAs we can easily check, our array is sorted now::\n\n   >>> for i in ia: print(i, end=\" \")\n   ...\n   1 5 7 33 99\n   >>>\n\nThe function factories can be used as decorator factories, so we may as well\nwrite::\n\n   >>> @CFUNCTYPE(c_int, POINTER(c_int), POINTER(c_int))\n   ... def py_cmp_func(a, b):\n   ...     print(\"py_cmp_func\", a[0], b[0])\n   ...     return a[0] - b[0]\n   ...\n   >>> qsort(ia, len(ia), sizeof(c_int), py_cmp_func)\n   py_cmp_func 5 1\n   py_cmp_func 33 99\n   py_cmp_func 7 33\n   py_cmp_func 1 7\n   py_cmp_func 5 7\n   >>>\n\n.. note::\n\n   Make sure you keep references to :func:`CFUNCTYPE` objects as long as they\n   are used from C code. :mod:`ctypes` doesn't, and if you don't, they may be\n   garbage collected, crashing your program when a callback is made.\n\n   Also, note that if the callback function is called in a thread created\n   outside of Python's control (e.g. by the foreign code that calls the\n   callback), ctypes creates a new dummy Python thread on every invocation. This\n   behavior is correct for most purposes, but it means that values stored with\n   :class:`threading.local` will *not* survive across different callbacks, even when\n   those calls are made from the same C thread.\n\n.. _ctypes-accessing-values-exported-from-dlls:\n\nAccessing values exported from dlls\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nSome shared libraries not only export functions, they also export variables. An\nexample in the Python library itself is the :c:data:`Py_OptimizeFlag`, an integer\nset to 0, 1, or 2, depending on the :option:`-O` or :option:`-OO` flag given on\nstartup.\n\n:mod:`ctypes` can access values like this with the :meth:`in_dll` class methods of\nthe type.  *pythonapi* is a predefined symbol giving access to the Python C\napi::\n\n   >>> opt_flag = c_int.in_dll(pythonapi, \"Py_OptimizeFlag\")\n   >>> print(opt_flag)\n   c_long(0)\n   >>>\n\nIf the interpreter would have been started with :option:`-O`, the sample would\nhave printed ``c_long(1)``, or ``c_long(2)`` if :option:`-OO` would have been\nspecified.\n\nAn extended example which also demonstrates the use of pointers accesses the\n:c:data:`PyImport_FrozenModules` pointer exported by Python.\n\nQuoting the docs for that value:\n\n   This pointer is initialized to point to an array of :c:type:`struct _frozen`\n   records, terminated by one whose members are all ``NULL`` or zero.  When a frozen\n   module is imported, it is searched in this table.  Third-party code could play\n   tricks with this to provide a dynamically created collection of frozen modules.\n\nSo manipulating this pointer could even prove useful. To restrict the example\nsize, we show only how this table can be read with :mod:`ctypes`::\n\n   >>> from ctypes import *\n   >>>\n   >>> class struct_frozen(Structure):\n   ...     _fields_ = [(\"name\", c_char_p),\n   ...                 (\"code\", POINTER(c_ubyte)),\n   ...                 (\"size\", c_int)]\n   ...\n   >>>\n\nWe have defined the :c:type:`struct _frozen` data type, so we can get the pointer\nto the table::\n\n   >>> FrozenTable = POINTER(struct_frozen)\n   >>> table = FrozenTable.in_dll(pythonapi, \"PyImport_FrozenModules\")\n   >>>\n\nSince ``table`` is a ``pointer`` to the array of ``struct_frozen`` records, we\ncan iterate over it, but we just have to make sure that our loop terminates,\nbecause pointers have no size. Sooner or later it would probably crash with an\naccess violation or whatever, so it's better to break out of the loop when we\nhit the ``NULL`` entry::\n\n   >>> for item in table:\n   ...     if item.name is None:\n   ...         break\n   ...     print(item.name.decode(\"ascii\"), item.size)\n   ...\n   _frozen_importlib 31764\n   _frozen_importlib_external 41499\n   __hello__ 161\n   __phello__ -161\n   __phello__.spam 161\n   >>>\n\nThe fact that standard Python has a frozen module and a frozen package\n(indicated by the negative ``size`` member) is not well known, it is only used\nfor testing. Try it out with ``import __hello__`` for example.\n\n\n.. _ctypes-surprises:\n\nSurprises\n^^^^^^^^^\n\nThere are some edges in :mod:`ctypes` where you might expect something other\nthan what actually happens.\n\nConsider the following example::\n\n   >>> from ctypes import *\n   >>> class POINT(Structure):\n   ...     _fields_ = (\"x\", c_int), (\"y\", c_int)\n   ...\n   >>> class RECT(Structure):\n   ...     _fields_ = (\"a\", POINT), (\"b\", POINT)\n   ...\n   >>> p1 = POINT(1, 2)\n   >>> p2 = POINT(3, 4)\n   >>> rc = RECT(p1, p2)\n   >>> print(rc.a.x, rc.a.y, rc.b.x, rc.b.y)\n   1 2 3 4\n   >>> # now swap the two points\n   >>> rc.a, rc.b = rc.b, rc.a\n   >>> print(rc.a.x, rc.a.y, rc.b.x, rc.b.y)\n   3 4 3 4\n   >>>\n\nHm. We certainly expected the last statement to print ``3 4 1 2``. What\nhappened? Here are the steps of the ``rc.a, rc.b = rc.b, rc.a`` line above::\n\n   >>> temp0, temp1 = rc.b, rc.a\n   >>> rc.a = temp0\n   >>> rc.b = temp1\n   >>>\n\nNote that ``temp0`` and ``temp1`` are objects still using the internal buffer of\nthe ``rc`` object above. So executing ``rc.a = temp0`` copies the buffer\ncontents of ``temp0`` into ``rc`` 's buffer.  This, in turn, changes the\ncontents of ``temp1``. So, the last assignment ``rc.b = temp1``, doesn't have\nthe expected effect.\n\nKeep in mind that retrieving sub-objects from Structure, Unions, and Arrays\ndoesn't *copy* the sub-object, instead it retrieves a wrapper object accessing\nthe root-object's underlying buffer.\n\nAnother example that may behave differently from what one would expect is this::\n\n   >>> s = c_char_p()\n   >>> s.value = b\"abc def ghi\"\n   >>> s.value\n   b'abc def ghi'\n   >>> s.value is s.value\n   False\n   >>>\n\n.. note::\n\n   Objects instantiated from :class:`c_char_p` can only have their value set to bytes\n   or integers.\n\nWhy is it printing ``False``?  ctypes instances are objects containing a memory\nblock plus some :term:`descriptor`\\s accessing the contents of the memory.\nStoring a Python object in the memory block does not store the object itself,\ninstead the ``contents`` of the object is stored.  Accessing the contents again\nconstructs a new Python object each time!\n\n\n.. _ctypes-variable-sized-data-types:\n\nVariable-sized data types\n^^^^^^^^^^^^^^^^^^^^^^^^^\n\n:mod:`ctypes` provides some support for variable-sized arrays and structures.\n\nThe :func:`resize` function can be used to resize the memory buffer of an\nexisting ctypes object.  The function takes the object as first argument, and\nthe requested size in bytes as the second argument.  The memory block cannot be\nmade smaller than the natural memory block specified by the objects type, a\n:exc:`ValueError` is raised if this is tried::\n\n   >>> short_array = (c_short * 4)()\n   >>> print(sizeof(short_array))\n   8\n   >>> resize(short_array, 4)\n   Traceback (most recent call last):\n       ...\n   ValueError: minimum size is 8\n   >>> resize(short_array, 32)\n   >>> sizeof(short_array)\n   32\n   >>> sizeof(type(short_array))\n   8\n   >>>\n\nThis is nice and fine, but how would one access the additional elements\ncontained in this array?  Since the type still only knows about 4 elements, we\nget errors accessing other elements::\n\n   >>> short_array[:]\n   [0, 0, 0, 0]\n   >>> short_array[7]\n   Traceback (most recent call last):\n       ...\n   IndexError: invalid index\n   >>>\n\nAnother way to use variable-sized data types with :mod:`ctypes` is to use the\ndynamic nature of Python, and (re-)define the data type after the required size\nis already known, on a case by case basis.\n\n\n.. _ctypes-ctypes-reference:\n\nctypes reference\n----------------\n\n\n.. _ctypes-finding-shared-libraries:\n\nFinding shared libraries\n^^^^^^^^^^^^^^^^^^^^^^^^\n\nWhen programming in a compiled language, shared libraries are accessed when\ncompiling/linking a program, and when the program is run.\n\nThe purpose of the :func:`find_library` function is to locate a library in a way\nsimilar to what the compiler or runtime loader does (on platforms with several\nversions of a shared library the most recent should be loaded), while the ctypes\nlibrary loaders act like when a program is run, and call the runtime loader\ndirectly.\n\nThe :mod:`ctypes.util` module provides a function which can help to determine\nthe library to load.\n\n\n.. data:: find_library(name)\n   :module: ctypes.util\n   :noindex:\n\n   Try to find a library and return a pathname.  *name* is the library name without\n   any prefix like *lib*, suffix like ``.so``, ``.dylib`` or version number (this\n   is the form used for the posix linker option :option:`!-l`).  If no library can\n   be found, returns ``None``.\n\nThe exact functionality is system dependent.\n\nOn Linux, :func:`find_library` tries to run external programs\n(``/sbin/ldconfig``, ``gcc``, ``objdump`` and ``ld``) to find the library file.\nIt returns the filename of the library file.\n\n.. versionchanged:: 3.6\n   On Linux, the value of the environment variable ``LD_LIBRARY_PATH`` is used\n   when searching for libraries, if a library cannot be found by any other means.\n\nHere are some examples::\n\n   >>> from ctypes.util import find_library\n   >>> find_library(\"m\")\n   'libm.so.6'\n   >>> find_library(\"c\")\n   'libc.so.6'\n   >>> find_library(\"bz2\")\n   'libbz2.so.1.0'\n   >>>\n\nOn OS X, :func:`find_library` tries several predefined naming schemes and paths\nto locate the library, and returns a full pathname if successful::\n\n   >>> from ctypes.util import find_library\n   >>> find_library(\"c\")\n   '/usr/lib/libc.dylib'\n   >>> find_library(\"m\")\n   '/usr/lib/libm.dylib'\n   >>> find_library(\"bz2\")\n   '/usr/lib/libbz2.dylib'\n   >>> find_library(\"AGL\")\n   '/System/Library/Frameworks/AGL.framework/AGL'\n   >>>\n\nOn Windows, :func:`find_library` searches along the system search path, and\nreturns the full pathname, but since there is no predefined naming scheme a call\nlike ``find_library(\"c\")`` will fail and return ``None``.\n\nIf wrapping a shared library with :mod:`ctypes`, it *may* be better to determine\nthe shared library name at development time, and hardcode that into the wrapper\nmodule instead of using :func:`find_library` to locate the library at runtime.\n\n\n.. _ctypes-loading-shared-libraries:\n\nLoading shared libraries\n^^^^^^^^^^^^^^^^^^^^^^^^\n\nThere are several ways to load shared libraries into the Python process.  One\nway is to instantiate one of the following classes:\n\n\n.. class:: CDLL(name, mode=DEFAULT_MODE, handle=None, use_errno=False, use_last_error=False, winmode=0)\n\n   Instances of this class represent loaded shared libraries. Functions in these\n   libraries use the standard C calling convention, and are assumed to return\n   :c:type:`int`.\n\n   On Windows creating a :class:`CDLL` instance may fail even if the DLL name\n   exists. When a dependent DLL of the loaded DLL is not found, a\n   :exc:`OSError` error is raised with the message *\"[WinError 126] The\n   specified module could not be found\".* This error message does not contain\n   the name of the missing DLL because the Windows API does not return this\n   information making this error hard to diagnose. To resolve this error and\n   determine which DLL is not found, you need to find the list of dependent\n   DLLs and determine which one is not found using Windows debugging and\n   tracing tools.\n\n.. seealso::\n\n    `Microsoft DUMPBIN tool <https://docs.microsoft.com/cpp/build/reference/dependents>`_\n    -- A tool to find DLL dependents.\n\n\n.. class:: OleDLL(name, mode=DEFAULT_MODE, handle=None, use_errno=False, use_last_error=False, winmode=0)\n\n   Windows only: Instances of this class represent loaded shared libraries,\n   functions in these libraries use the ``stdcall`` calling convention, and are\n   assumed to return the windows specific :class:`HRESULT` code.  :class:`HRESULT`\n   values contain information specifying whether the function call failed or\n   succeeded, together with additional error code.  If the return value signals a\n   failure, an :class:`OSError` is automatically raised.\n\n   .. versionchanged:: 3.3\n      :exc:`WindowsError` used to be raised.\n\n\n.. class:: WinDLL(name, mode=DEFAULT_MODE, handle=None, use_errno=False, use_last_error=False, winmode=0)\n\n   Windows only: Instances of this class represent loaded shared libraries,\n   functions in these libraries use the ``stdcall`` calling convention, and are\n   assumed to return :c:type:`int` by default.\n\n   On Windows CE only the standard calling convention is used, for convenience the\n   :class:`WinDLL` and :class:`OleDLL` use the standard calling convention on this\n   platform.\n\nThe Python :term:`global interpreter lock` is released before calling any\nfunction exported by these libraries, and reacquired afterwards.\n\n\n.. class:: PyDLL(name, mode=DEFAULT_MODE, handle=None)\n\n   Instances of this class behave like :class:`CDLL` instances, except that the\n   Python GIL is *not* released during the function call, and after the function\n   execution the Python error flag is checked. If the error flag is set, a Python\n   exception is raised.\n\n   Thus, this is only useful to call Python C api functions directly.\n\nAll these classes can be instantiated by calling them with at least one\nargument, the pathname of the shared library.  If you have an existing handle to\nan already loaded shared library, it can be passed as the ``handle`` named\nparameter, otherwise the underlying platforms ``dlopen`` or ``LoadLibrary``\nfunction is used to load the library into the process, and to get a handle to\nit.\n\nThe *mode* parameter can be used to specify how the library is loaded.  For\ndetails, consult the :manpage:`dlopen(3)` manpage.  On Windows, *mode* is\nignored.  On posix systems, RTLD_NOW is always added, and is not\nconfigurable.\n\nThe *use_errno* parameter, when set to true, enables a ctypes mechanism that\nallows accessing the system :data:`errno` error number in a safe way.\n:mod:`ctypes` maintains a thread-local copy of the systems :data:`errno`\nvariable; if you call foreign functions created with ``use_errno=True`` then the\n:data:`errno` value before the function call is swapped with the ctypes private\ncopy, the same happens immediately after the function call.\n\nThe function :func:`ctypes.get_errno` returns the value of the ctypes private\ncopy, and the function :func:`ctypes.set_errno` changes the ctypes private copy\nto a new value and returns the former value.\n\nThe *use_last_error* parameter, when set to true, enables the same mechanism for\nthe Windows error code which is managed by the :func:`GetLastError` and\n:func:`SetLastError` Windows API functions; :func:`ctypes.get_last_error` and\n:func:`ctypes.set_last_error` are used to request and change the ctypes private\ncopy of the windows error code.\n\nThe *winmode* parameter is used on Windows to specify how the library is loaded\n(since *mode* is ignored). It takes any value that is valid for the Win32 API\n``LoadLibraryEx`` flags parameter. When omitted, the default is to use the flags\nthat result in the most secure DLL load to avoiding issues such as DLL\nhijacking. Passing the full path to the DLL is the safest way to ensure the\ncorrect library and dependencies are loaded.\n\n.. versionchanged:: 3.8\n   Added *winmode* parameter.\n\n\n.. data:: RTLD_GLOBAL\n   :noindex:\n\n   Flag to use as *mode* parameter.  On platforms where this flag is not available,\n   it is defined as the integer zero.\n\n\n.. data:: RTLD_LOCAL\n   :noindex:\n\n   Flag to use as *mode* parameter.  On platforms where this is not available, it\n   is the same as *RTLD_GLOBAL*.\n\n\n.. data:: DEFAULT_MODE\n   :noindex:\n\n   The default mode which is used to load shared libraries.  On OSX 10.3, this is\n   *RTLD_GLOBAL*, otherwise it is the same as *RTLD_LOCAL*.\n\nInstances of these classes have no public methods.  Functions exported by the\nshared library can be accessed as attributes or by index.  Please note that\naccessing the function through an attribute caches the result and therefore\naccessing it repeatedly returns the same object each time.  On the other hand,\naccessing it through an index returns a new object each time::\n\n   >>> from ctypes import CDLL\n   >>> libc = CDLL(\"libc.so.6\")  # On Linux\n   >>> libc.time == libc.time\n   True\n   >>> libc['time'] == libc['time']\n   False\n\nThe following public attributes are available, their name starts with an\nunderscore to not clash with exported function names:\n\n\n.. attribute:: PyDLL._handle\n\n   The system handle used to access the library.\n\n\n.. attribute:: PyDLL._name\n\n   The name of the library passed in the constructor.\n\nShared libraries can also be loaded by using one of the prefabricated objects,\nwhich are instances of the :class:`LibraryLoader` class, either by calling the\n:meth:`LoadLibrary` method, or by retrieving the library as attribute of the\nloader instance.\n\n\n.. class:: LibraryLoader(dlltype)\n\n   Class which loads shared libraries.  *dlltype* should be one of the\n   :class:`CDLL`, :class:`PyDLL`, :class:`WinDLL`, or :class:`OleDLL` types.\n\n   :meth:`__getattr__` has special behavior: It allows loading a shared library by\n   accessing it as attribute of a library loader instance.  The result is cached,\n   so repeated attribute accesses return the same library each time.\n\n   .. method:: LoadLibrary(name)\n\n      Load a shared library into the process and return it.  This method always\n      returns a new instance of the library.\n\n\nThese prefabricated library loaders are available:\n\n.. data:: cdll\n   :noindex:\n\n   Creates :class:`CDLL` instances.\n\n\n.. data:: windll\n   :noindex:\n\n   Windows only: Creates :class:`WinDLL` instances.\n\n\n.. data:: oledll\n   :noindex:\n\n   Windows only: Creates :class:`OleDLL` instances.\n\n\n.. data:: pydll\n   :noindex:\n\n   Creates :class:`PyDLL` instances.\n\n\nFor accessing the C Python api directly, a ready-to-use Python shared library\nobject is available:\n\n.. data:: pythonapi\n   :noindex:\n\n   An instance of :class:`PyDLL` that exposes Python C API functions as\n   attributes.  Note that all these functions are assumed to return C\n   :c:type:`int`, which is of course not always the truth, so you have to assign\n   the correct :attr:`restype` attribute to use these functions.\n\n.. audit-event:: ctypes.dlopen name ctypes.LibraryLoader\n\n   Loading a library through any of these objects raises an\n   :ref:`auditing event <auditing>` ``ctypes.dlopen`` with string argument\n   ``name``, the name used to load the library.\n\n.. audit-event:: ctypes.dlsym library,name ctypes.LibraryLoader\n\n   Accessing a function on a loaded library raises an auditing event\n   ``ctypes.dlsym`` with arguments ``library`` (the library object) and ``name``\n   (the symbol's name as a string or integer).\n\n.. audit-event:: ctypes.dlsym/handle handle,name ctypes.LibraryLoader\n\n   In cases when only the library handle is available rather than the object,\n   accessing a function raises an auditing event ``ctypes.dlsym/handle`` with\n   arguments ``handle`` (the raw library handle) and ``name``.\n\n.. _ctypes-foreign-functions:\n\nForeign functions\n^^^^^^^^^^^^^^^^^\n\nAs explained in the previous section, foreign functions can be accessed as\nattributes of loaded shared libraries.  The function objects created in this way\nby default accept any number of arguments, accept any ctypes data instances as\narguments, and return the default result type specified by the library loader.\nThey are instances of a private class:\n\n\n.. class:: _FuncPtr\n\n   Base class for C callable foreign functions.\n\n   Instances of foreign functions are also C compatible data types; they\n   represent C function pointers.\n\n   This behavior can be customized by assigning to special attributes of the\n   foreign function object.\n\n   .. attribute:: restype\n\n      Assign a ctypes type to specify the result type of the foreign function.\n      Use ``None`` for :c:type:`void`, a function not returning anything.\n\n      It is possible to assign a callable Python object that is not a ctypes\n      type, in this case the function is assumed to return a C :c:type:`int`, and\n      the callable will be called with this integer, allowing further\n      processing or error checking.  Using this is deprecated, for more flexible\n      post processing or error checking use a ctypes data type as\n      :attr:`restype` and assign a callable to the :attr:`errcheck` attribute.\n\n   .. attribute:: argtypes\n\n      Assign a tuple of ctypes types to specify the argument types that the\n      function accepts.  Functions using the ``stdcall`` calling convention can\n      only be called with the same number of arguments as the length of this\n      tuple; functions using the C calling convention accept additional,\n      unspecified arguments as well.\n\n      When a foreign function is called, each actual argument is passed to the\n      :meth:`from_param` class method of the items in the :attr:`argtypes`\n      tuple, this method allows adapting the actual argument to an object that\n      the foreign function accepts.  For example, a :class:`c_char_p` item in\n      the :attr:`argtypes` tuple will convert a string passed as argument into\n      a bytes object using ctypes conversion rules.\n\n      New: It is now possible to put items in argtypes which are not ctypes\n      types, but each item must have a :meth:`from_param` method which returns a\n      value usable as argument (integer, string, ctypes instance).  This allows\n      defining adapters that can adapt custom objects as function parameters.\n\n   .. attribute:: errcheck\n\n      Assign a Python function or another callable to this attribute. The\n      callable will be called with three or more arguments:\n\n      .. function:: callable(result, func, arguments)\n         :noindex:\n         :module:\n\n         *result* is what the foreign function returns, as specified by the\n         :attr:`restype` attribute.\n\n         *func* is the foreign function object itself, this allows reusing the\n         same callable object to check or post process the results of several\n         functions.\n\n         *arguments* is a tuple containing the parameters originally passed to\n         the function call, this allows specializing the behavior on the\n         arguments used.\n\n      The object that this function returns will be returned from the\n      foreign function call, but it can also check the result value\n      and raise an exception if the foreign function call failed.\n\n\n.. exception:: ArgumentError\n\n   This exception is raised when a foreign function call cannot convert one of the\n   passed arguments.\n\n\n.. audit-event:: ctypes.seh_exception code foreign-functions\n\n   On Windows, when a foreign function call raises a system exception (for\n   example, due to an access violation), it will be captured and replaced with\n   a suitable Python exception. Further, an auditing event\n   ``ctypes.seh_exception`` with argument ``code`` will be raised, allowing an\n   audit hook to replace the exception with its own.\n\n.. audit-event:: ctypes.call_function func_pointer,arguments foreign-functions\n\n   Some ways to invoke foreign function calls may raise an auditing event\n   ``ctypes.call_function`` with arguments ``function pointer`` and ``arguments``.\n\n.. _ctypes-function-prototypes:\n\nFunction prototypes\n^^^^^^^^^^^^^^^^^^^\n\nForeign functions can also be created by instantiating function prototypes.\nFunction prototypes are similar to function prototypes in C; they describe a\nfunction (return type, argument types, calling convention) without defining an\nimplementation.  The factory functions must be called with the desired result\ntype and the argument types of the function, and can be used as decorator\nfactories, and as such, be applied to functions through the ``@wrapper`` syntax.\nSee :ref:`ctypes-callback-functions` for examples.\n\n\n.. function:: CFUNCTYPE(restype, *argtypes, use_errno=False, use_last_error=False)\n\n   The returned function prototype creates functions that use the standard C\n   calling convention.  The function will release the GIL during the call.  If\n   *use_errno* is set to true, the ctypes private copy of the system\n   :data:`errno` variable is exchanged with the real :data:`errno` value before\n   and after the call; *use_last_error* does the same for the Windows error\n   code.\n\n\n.. function:: WINFUNCTYPE(restype, *argtypes, use_errno=False, use_last_error=False)\n\n   Windows only: The returned function prototype creates functions that use the\n   ``stdcall`` calling convention, except on Windows CE where\n   :func:`WINFUNCTYPE` is the same as :func:`CFUNCTYPE`.  The function will\n   release the GIL during the call.  *use_errno* and *use_last_error* have the\n   same meaning as above.\n\n\n.. function:: PYFUNCTYPE(restype, *argtypes)\n\n   The returned function prototype creates functions that use the Python calling\n   convention.  The function will *not* release the GIL during the call.\n\nFunction prototypes created by these factory functions can be instantiated in\ndifferent ways, depending on the type and number of the parameters in the call:\n\n\n   .. function:: prototype(address)\n      :noindex:\n      :module:\n\n      Returns a foreign function at the specified address which must be an integer.\n\n\n   .. function:: prototype(callable)\n      :noindex:\n      :module:\n\n      Create a C callable function (a callback function) from a Python *callable*.\n\n\n   .. function:: prototype(func_spec[, paramflags])\n      :noindex:\n      :module:\n\n      Returns a foreign function exported by a shared library. *func_spec* must\n      be a 2-tuple ``(name_or_ordinal, library)``. The first item is the name of\n      the exported function as string, or the ordinal of the exported function\n      as small integer.  The second item is the shared library instance.\n\n\n   .. function:: prototype(vtbl_index, name[, paramflags[, iid]])\n      :noindex:\n      :module:\n\n      Returns a foreign function that will call a COM method. *vtbl_index* is\n      the index into the virtual function table, a small non-negative\n      integer. *name* is name of the COM method. *iid* is an optional pointer to\n      the interface identifier which is used in extended error reporting.\n\n      COM methods use a special calling convention: They require a pointer to\n      the COM interface as first argument, in addition to those parameters that\n      are specified in the :attr:`argtypes` tuple.\n\n   The optional *paramflags* parameter creates foreign function wrappers with much\n   more functionality than the features described above.\n\n   *paramflags* must be a tuple of the same length as :attr:`argtypes`.\n\n   Each item in this tuple contains further information about a parameter, it must\n   be a tuple containing one, two, or three items.\n\n   The first item is an integer containing a combination of direction\n   flags for the parameter:\n\n      1\n         Specifies an input parameter to the function.\n\n      2\n         Output parameter.  The foreign function fills in a value.\n\n      4\n         Input parameter which defaults to the integer zero.\n\n   The optional second item is the parameter name as string.  If this is specified,\n   the foreign function can be called with named parameters.\n\n   The optional third item is the default value for this parameter.\n\nThis example demonstrates how to wrap the Windows ``MessageBoxW`` function so\nthat it supports default parameters and named arguments. The C declaration from\nthe windows header file is this::\n\n   WINUSERAPI int WINAPI\n   MessageBoxW(\n       HWND hWnd,\n       LPCWSTR lpText,\n       LPCWSTR lpCaption,\n       UINT uType);\n\nHere is the wrapping with :mod:`ctypes`::\n\n   >>> from ctypes import c_int, WINFUNCTYPE, windll\n   >>> from ctypes.wintypes import HWND, LPCWSTR, UINT\n   >>> prototype = WINFUNCTYPE(c_int, HWND, LPCWSTR, LPCWSTR, UINT)\n   >>> paramflags = (1, \"hwnd\", 0), (1, \"text\", \"Hi\"), (1, \"caption\", \"Hello from ctypes\"), (1, \"flags\", 0)\n   >>> MessageBox = prototype((\"MessageBoxW\", windll.user32), paramflags)\n\nThe ``MessageBox`` foreign function can now be called in these ways::\n\n   >>> MessageBox()\n   >>> MessageBox(text=\"Spam, spam, spam\")\n   >>> MessageBox(flags=2, text=\"foo bar\")\n\nA second example demonstrates output parameters.  The win32 ``GetWindowRect``\nfunction retrieves the dimensions of a specified window by copying them into\n``RECT`` structure that the caller has to supply.  Here is the C declaration::\n\n   WINUSERAPI BOOL WINAPI\n   GetWindowRect(\n        HWND hWnd,\n        LPRECT lpRect);\n\nHere is the wrapping with :mod:`ctypes`::\n\n   >>> from ctypes import POINTER, WINFUNCTYPE, windll, WinError\n   >>> from ctypes.wintypes import BOOL, HWND, RECT\n   >>> prototype = WINFUNCTYPE(BOOL, HWND, POINTER(RECT))\n   >>> paramflags = (1, \"hwnd\"), (2, \"lprect\")\n   >>> GetWindowRect = prototype((\"GetWindowRect\", windll.user32), paramflags)\n   >>>\n\nFunctions with output parameters will automatically return the output parameter\nvalue if there is a single one, or a tuple containing the output parameter\nvalues when there are more than one, so the GetWindowRect function now returns a\nRECT instance, when called.\n\nOutput parameters can be combined with the :attr:`errcheck` protocol to do\nfurther output processing and error checking.  The win32 ``GetWindowRect`` api\nfunction returns a ``BOOL`` to signal success or failure, so this function could\ndo the error checking, and raises an exception when the api call failed::\n\n   >>> def errcheck(result, func, args):\n   ...     if not result:\n   ...         raise WinError()\n   ...     return args\n   ...\n   >>> GetWindowRect.errcheck = errcheck\n   >>>\n\nIf the :attr:`errcheck` function returns the argument tuple it receives\nunchanged, :mod:`ctypes` continues the normal processing it does on the output\nparameters.  If you want to return a tuple of window coordinates instead of a\n``RECT`` instance, you can retrieve the fields in the function and return them\ninstead, the normal processing will no longer take place::\n\n   >>> def errcheck(result, func, args):\n   ...     if not result:\n   ...         raise WinError()\n   ...     rc = args[1]\n   ...     return rc.left, rc.top, rc.bottom, rc.right\n   ...\n   >>> GetWindowRect.errcheck = errcheck\n   >>>\n\n\n.. _ctypes-utility-functions:\n\nUtility functions\n^^^^^^^^^^^^^^^^^\n\n.. function:: addressof(obj)\n\n   Returns the address of the memory buffer as integer.  *obj* must be an\n   instance of a ctypes type.\n\n   .. audit-event:: ctypes.addressof obj ctypes.addressof\n\n\n.. function:: alignment(obj_or_type)\n\n   Returns the alignment requirements of a ctypes type. *obj_or_type* must be a\n   ctypes type or instance.\n\n\n.. function:: byref(obj[, offset])\n\n   Returns a light-weight pointer to *obj*, which must be an instance of a\n   ctypes type.  *offset* defaults to zero, and must be an integer that will be\n   added to the internal pointer value.\n\n   ``byref(obj, offset)`` corresponds to this C code::\n\n      (((char *)&obj) + offset)\n\n   The returned object can only be used as a foreign function call parameter.\n   It behaves similar to ``pointer(obj)``, but the construction is a lot faster.\n\n\n.. function:: cast(obj, type)\n\n   This function is similar to the cast operator in C. It returns a new instance\n   of *type* which points to the same memory block as *obj*.  *type* must be a\n   pointer type, and *obj* must be an object that can be interpreted as a\n   pointer.\n\n\n.. function:: create_string_buffer(init_or_size, size=None)\n\n   This function creates a mutable character buffer. The returned object is a\n   ctypes array of :class:`c_char`.\n\n   *init_or_size* must be an integer which specifies the size of the array, or a\n   bytes object which will be used to initialize the array items.\n\n   If a bytes object is specified as first argument, the buffer is made one item\n   larger than its length so that the last element in the array is a NUL\n   termination character. An integer can be passed as second argument which allows\n   specifying the size of the array if the length of the bytes should not be used.\n\n   .. audit-event:: ctypes.create_string_buffer init,size ctypes.create_string_buffer\n\n\n.. function:: create_unicode_buffer(init_or_size, size=None)\n\n   This function creates a mutable unicode character buffer. The returned object is\n   a ctypes array of :class:`c_wchar`.\n\n   *init_or_size* must be an integer which specifies the size of the array, or a\n   string which will be used to initialize the array items.\n\n   If a string is specified as first argument, the buffer is made one item\n   larger than the length of the string so that the last element in the array is a\n   NUL termination character. An integer can be passed as second argument which\n   allows specifying the size of the array if the length of the string should not\n   be used.\n\n   .. audit-event:: ctypes.create_unicode_buffer init,size ctypes.create_unicode_buffer\n\n\n.. function:: DllCanUnloadNow()\n\n   Windows only: This function is a hook which allows implementing in-process\n   COM servers with ctypes.  It is called from the DllCanUnloadNow function that\n   the _ctypes extension dll exports.\n\n\n.. function:: DllGetClassObject()\n\n   Windows only: This function is a hook which allows implementing in-process\n   COM servers with ctypes.  It is called from the DllGetClassObject function\n   that the ``_ctypes`` extension dll exports.\n\n\n.. function:: find_library(name)\n   :module: ctypes.util\n\n   Try to find a library and return a pathname.  *name* is the library name\n   without any prefix like ``lib``, suffix like ``.so``, ``.dylib`` or version\n   number (this is the form used for the posix linker option :option:`!-l`).  If\n   no library can be found, returns ``None``.\n\n   The exact functionality is system dependent.\n\n\n.. function:: find_msvcrt()\n   :module: ctypes.util\n\n   Windows only: return the filename of the VC runtime library used by Python,\n   and by the extension modules.  If the name of the library cannot be\n   determined, ``None`` is returned.\n\n   If you need to free memory, for example, allocated by an extension module\n   with a call to the ``free(void *)``, it is important that you use the\n   function in the same library that allocated the memory.\n\n\n.. function:: FormatError([code])\n\n   Windows only: Returns a textual description of the error code *code*.  If no\n   error code is specified, the last error code is used by calling the Windows\n   api function GetLastError.\n\n\n.. function:: GetLastError()\n\n   Windows only: Returns the last error code set by Windows in the calling thread.\n   This function calls the Windows `GetLastError()` function directly,\n   it does not return the ctypes-private copy of the error code.\n\n.. function:: get_errno()\n\n   Returns the current value of the ctypes-private copy of the system\n   :data:`errno` variable in the calling thread.\n\n   .. audit-event:: ctypes.get_errno \"\" ctypes.get_errno\n\n.. function:: get_last_error()\n\n   Windows only: returns the current value of the ctypes-private copy of the system\n   :data:`LastError` variable in the calling thread.\n\n   .. audit-event:: ctypes.get_last_error \"\" ctypes.get_last_error\n\n.. function:: memmove(dst, src, count)\n\n   Same as the standard C memmove library function: copies *count* bytes from\n   *src* to *dst*. *dst* and *src* must be integers or ctypes instances that can\n   be converted to pointers.\n\n\n.. function:: memset(dst, c, count)\n\n   Same as the standard C memset library function: fills the memory block at\n   address *dst* with *count* bytes of value *c*. *dst* must be an integer\n   specifying an address, or a ctypes instance.\n\n\n.. function:: POINTER(type)\n\n   This factory function creates and returns a new ctypes pointer type. Pointer\n   types are cached and reused internally, so calling this function repeatedly is\n   cheap. *type* must be a ctypes type.\n\n\n.. function:: pointer(obj)\n\n   This function creates a new pointer instance, pointing to *obj*. The returned\n   object is of the type ``POINTER(type(obj))``.\n\n   Note: If you just want to pass a pointer to an object to a foreign function\n   call, you should use ``byref(obj)`` which is much faster.\n\n\n.. function:: resize(obj, size)\n\n   This function resizes the internal memory buffer of *obj*, which must be an\n   instance of a ctypes type.  It is not possible to make the buffer smaller\n   than the native size of the objects type, as given by ``sizeof(type(obj))``,\n   but it is possible to enlarge the buffer.\n\n\n.. function:: set_errno(value)\n\n   Set the current value of the ctypes-private copy of the system :data:`errno`\n   variable in the calling thread to *value* and return the previous value.\n\n   .. audit-event:: ctypes.set_errno errno ctypes.set_errno\n\n\n.. function:: set_last_error(value)\n\n   Windows only: set the current value of the ctypes-private copy of the system\n   :data:`LastError` variable in the calling thread to *value* and return the\n   previous value.\n\n   .. audit-event:: ctypes.set_last_error error ctypes.set_last_error\n\n\n.. function:: sizeof(obj_or_type)\n\n   Returns the size in bytes of a ctypes type or instance memory buffer.\n   Does the same as the C ``sizeof`` operator.\n\n\n.. function:: string_at(address, size=-1)\n\n   This function returns the C string starting at memory address *address* as a bytes\n   object. If size is specified, it is used as size, otherwise the string is assumed\n   to be zero-terminated.\n\n   .. audit-event:: ctypes.string_at address,size ctypes.string_at\n\n\n.. function:: WinError(code=None, descr=None)\n\n   Windows only: this function is probably the worst-named thing in ctypes. It\n   creates an instance of OSError.  If *code* is not specified,\n   ``GetLastError`` is called to determine the error code. If *descr* is not\n   specified, :func:`FormatError` is called to get a textual description of the\n   error.\n\n   .. versionchanged:: 3.3\n      An instance of :exc:`WindowsError` used to be created.\n\n\n.. function:: wstring_at(address, size=-1)\n\n   This function returns the wide character string starting at memory address\n   *address* as a string.  If *size* is specified, it is used as the number of\n   characters of the string, otherwise the string is assumed to be\n   zero-terminated.\n\n   .. audit-event:: ctypes.wstring_at address,size ctypes.wstring_at\n\n\n.. _ctypes-data-types:\n\nData types\n^^^^^^^^^^\n\n\n.. class:: _CData\n\n   This non-public class is the common base class of all ctypes data types.\n   Among other things, all ctypes type instances contain a memory block that\n   hold C compatible data; the address of the memory block is returned by the\n   :func:`addressof` helper function. Another instance variable is exposed as\n   :attr:`_objects`; this contains other Python objects that need to be kept\n   alive in case the memory block contains pointers.\n\n   Common methods of ctypes data types, these are all class methods (to be\n   exact, they are methods of the :term:`metaclass`):\n\n   .. method:: _CData.from_buffer(source[, offset])\n\n      This method returns a ctypes instance that shares the buffer of the\n      *source* object.  The *source* object must support the writeable buffer\n      interface.  The optional *offset* parameter specifies an offset into the\n      source buffer in bytes; the default is zero.  If the source buffer is not\n      large enough a :exc:`ValueError` is raised.\n\n      .. audit-event:: ctypes.cdata/buffer pointer,size,offset ctypes._CData.from_buffer\n\n   .. method:: _CData.from_buffer_copy(source[, offset])\n\n      This method creates a ctypes instance, copying the buffer from the\n      *source* object buffer which must be readable.  The optional *offset*\n      parameter specifies an offset into the source buffer in bytes; the default\n      is zero.  If the source buffer is not large enough a :exc:`ValueError` is\n      raised.\n\n      .. audit-event:: ctypes.cdata/buffer pointer,size,offset ctypes._CData.from_buffer_copy\n\n   .. method:: from_address(address)\n\n      This method returns a ctypes type instance using the memory specified by\n      *address* which must be an integer.\n\n      .. audit-event:: ctypes.cdata address ctypes._CData.from_address\n\n         This method, and others that indirectly call this method, raises an\n         :ref:`auditing event <auditing>` ``ctypes.cdata`` with argument\n         ``address``.\n\n   .. method:: from_param(obj)\n\n      This method adapts *obj* to a ctypes type.  It is called with the actual\n      object used in a foreign function call when the type is present in the\n      foreign function's :attr:`argtypes` tuple; it must return an object that\n      can be used as a function call parameter.\n\n      All ctypes data types have a default implementation of this classmethod\n      that normally returns *obj* if that is an instance of the type.  Some\n      types accept other objects as well.\n\n   .. method:: in_dll(library, name)\n\n      This method returns a ctypes type instance exported by a shared\n      library. *name* is the name of the symbol that exports the data, *library*\n      is the loaded shared library.\n\n   Common instance variables of ctypes data types:\n\n   .. attribute:: _b_base_\n\n      Sometimes ctypes data instances do not own the memory block they contain,\n      instead they share part of the memory block of a base object.  The\n      :attr:`_b_base_` read-only member is the root ctypes object that owns the\n      memory block.\n\n   .. attribute:: _b_needsfree_\n\n      This read-only variable is true when the ctypes data instance has\n      allocated the memory block itself, false otherwise.\n\n   .. attribute:: _objects\n\n      This member is either ``None`` or a dictionary containing Python objects\n      that need to be kept alive so that the memory block contents is kept\n      valid.  This object is only exposed for debugging; never modify the\n      contents of this dictionary.\n\n\n.. _ctypes-fundamental-data-types-2:\n\nFundamental data types\n^^^^^^^^^^^^^^^^^^^^^^\n\n.. class:: _SimpleCData\n\n   This non-public class is the base class of all fundamental ctypes data\n   types. It is mentioned here because it contains the common attributes of the\n   fundamental ctypes data types.  :class:`_SimpleCData` is a subclass of\n   :class:`_CData`, so it inherits their methods and attributes. ctypes data\n   types that are not and do not contain pointers can now be pickled.\n\n   Instances have a single attribute:\n\n   .. attribute:: value\n\n      This attribute contains the actual value of the instance. For integer and\n      pointer types, it is an integer, for character types, it is a single\n      character bytes object or string, for character pointer types it is a\n      Python bytes object or string.\n\n      When the ``value`` attribute is retrieved from a ctypes instance, usually\n      a new object is returned each time.  :mod:`ctypes` does *not* implement\n      original object return, always a new object is constructed.  The same is\n      true for all other ctypes object instances.\n\n\nFundamental data types, when returned as foreign function call results, or, for\nexample, by retrieving structure field members or array items, are transparently\nconverted to native Python types.  In other words, if a foreign function has a\n:attr:`restype` of :class:`c_char_p`, you will always receive a Python bytes\nobject, *not* a :class:`c_char_p` instance.\n\n.. XXX above is false, it actually returns a Unicode string\n\nSubclasses of fundamental data types do *not* inherit this behavior. So, if a\nforeign functions :attr:`restype` is a subclass of :class:`c_void_p`, you will\nreceive an instance of this subclass from the function call. Of course, you can\nget the value of the pointer by accessing the ``value`` attribute.\n\nThese are the fundamental ctypes data types:\n\n.. class:: c_byte\n\n   Represents the C :c:type:`signed char` datatype, and interprets the value as\n   small integer.  The constructor accepts an optional integer initializer; no\n   overflow checking is done.\n\n\n.. class:: c_char\n\n   Represents the C :c:type:`char` datatype, and interprets the value as a single\n   character.  The constructor accepts an optional string initializer, the\n   length of the string must be exactly one character.\n\n\n.. class:: c_char_p\n\n   Represents the C :c:type:`char *` datatype when it points to a zero-terminated\n   string.  For a general character pointer that may also point to binary data,\n   ``POINTER(c_char)`` must be used.  The constructor accepts an integer\n   address, or a bytes object.\n\n\n.. class:: c_double\n\n   Represents the C :c:type:`double` datatype.  The constructor accepts an\n   optional float initializer.\n\n\n.. class:: c_longdouble\n\n   Represents the C :c:type:`long double` datatype.  The constructor accepts an\n   optional float initializer.  On platforms where ``sizeof(long double) ==\n   sizeof(double)`` it is an alias to :class:`c_double`.\n\n.. class:: c_float\n\n   Represents the C :c:type:`float` datatype.  The constructor accepts an\n   optional float initializer.\n\n\n.. class:: c_int\n\n   Represents the C :c:type:`signed int` datatype.  The constructor accepts an\n   optional integer initializer; no overflow checking is done.  On platforms\n   where ``sizeof(int) == sizeof(long)`` it is an alias to :class:`c_long`.\n\n\n.. class:: c_int8\n\n   Represents the C 8-bit :c:type:`signed int` datatype.  Usually an alias for\n   :class:`c_byte`.\n\n\n.. class:: c_int16\n\n   Represents the C 16-bit :c:type:`signed int` datatype.  Usually an alias for\n   :class:`c_short`.\n\n\n.. class:: c_int32\n\n   Represents the C 32-bit :c:type:`signed int` datatype.  Usually an alias for\n   :class:`c_int`.\n\n\n.. class:: c_int64\n\n   Represents the C 64-bit :c:type:`signed int` datatype.  Usually an alias for\n   :class:`c_longlong`.\n\n\n.. class:: c_long\n\n   Represents the C :c:type:`signed long` datatype.  The constructor accepts an\n   optional integer initializer; no overflow checking is done.\n\n\n.. class:: c_longlong\n\n   Represents the C :c:type:`signed long long` datatype.  The constructor accepts\n   an optional integer initializer; no overflow checking is done.\n\n\n.. class:: c_short\n\n   Represents the C :c:type:`signed short` datatype.  The constructor accepts an\n   optional integer initializer; no overflow checking is done.\n\n\n.. class:: c_size_t\n\n   Represents the C :c:type:`size_t` datatype.\n\n\n.. class:: c_ssize_t\n\n   Represents the C :c:type:`ssize_t` datatype.\n\n   .. versionadded:: 3.2\n\n\n.. class:: c_ubyte\n\n   Represents the C :c:type:`unsigned char` datatype, it interprets the value as\n   small integer.  The constructor accepts an optional integer initializer; no\n   overflow checking is done.\n\n\n.. class:: c_uint\n\n   Represents the C :c:type:`unsigned int` datatype.  The constructor accepts an\n   optional integer initializer; no overflow checking is done.  On platforms\n   where ``sizeof(int) == sizeof(long)`` it is an alias for :class:`c_ulong`.\n\n\n.. class:: c_uint8\n\n   Represents the C 8-bit :c:type:`unsigned int` datatype.  Usually an alias for\n   :class:`c_ubyte`.\n\n\n.. class:: c_uint16\n\n   Represents the C 16-bit :c:type:`unsigned int` datatype.  Usually an alias for\n   :class:`c_ushort`.\n\n\n.. class:: c_uint32\n\n   Represents the C 32-bit :c:type:`unsigned int` datatype.  Usually an alias for\n   :class:`c_uint`.\n\n\n.. class:: c_uint64\n\n   Represents the C 64-bit :c:type:`unsigned int` datatype.  Usually an alias for\n   :class:`c_ulonglong`.\n\n\n.. class:: c_ulong\n\n   Represents the C :c:type:`unsigned long` datatype.  The constructor accepts an\n   optional integer initializer; no overflow checking is done.\n\n\n.. class:: c_ulonglong\n\n   Represents the C :c:type:`unsigned long long` datatype.  The constructor\n   accepts an optional integer initializer; no overflow checking is done.\n\n\n.. class:: c_ushort\n\n   Represents the C :c:type:`unsigned short` datatype.  The constructor accepts\n   an optional integer initializer; no overflow checking is done.\n\n\n.. class:: c_void_p\n\n   Represents the C :c:type:`void *` type.  The value is represented as integer.\n   The constructor accepts an optional integer initializer.\n\n\n.. class:: c_wchar\n\n   Represents the C :c:type:`wchar_t` datatype, and interprets the value as a\n   single character unicode string.  The constructor accepts an optional string\n   initializer, the length of the string must be exactly one character.\n\n\n.. class:: c_wchar_p\n\n   Represents the C :c:type:`wchar_t *` datatype, which must be a pointer to a\n   zero-terminated wide character string.  The constructor accepts an integer\n   address, or a string.\n\n\n.. class:: c_bool\n\n   Represent the C :c:type:`bool` datatype (more accurately, :c:type:`_Bool` from\n   C99).  Its value can be ``True`` or ``False``, and the constructor accepts any object\n   that has a truth value.\n\n\n.. class:: HRESULT\n\n   Windows only: Represents a :c:type:`HRESULT` value, which contains success or\n   error information for a function or method call.\n\n\n.. class:: py_object\n\n   Represents the C :c:type:`PyObject *` datatype.  Calling this without an\n   argument creates a ``NULL`` :c:type:`PyObject *` pointer.\n\nThe :mod:`ctypes.wintypes` module provides quite some other Windows specific\ndata types, for example :c:type:`HWND`, :c:type:`WPARAM`, or :c:type:`DWORD`.  Some\nuseful structures like :c:type:`MSG` or :c:type:`RECT` are also defined.\n\n\n.. _ctypes-structured-data-types:\n\nStructured data types\n^^^^^^^^^^^^^^^^^^^^^\n\n\n.. class:: Union(*args, **kw)\n\n   Abstract base class for unions in native byte order.\n\n\n.. class:: BigEndianStructure(*args, **kw)\n\n   Abstract base class for structures in *big endian* byte order.\n\n\n.. class:: LittleEndianStructure(*args, **kw)\n\n   Abstract base class for structures in *little endian* byte order.\n\nStructures with non-native byte order cannot contain pointer type fields, or any\nother data types containing pointer type fields.\n\n\n.. class:: Structure(*args, **kw)\n\n   Abstract base class for structures in *native* byte order.\n\n   Concrete structure and union types must be created by subclassing one of these\n   types, and at least define a :attr:`_fields_` class variable. :mod:`ctypes` will\n   create :term:`descriptor`\\s which allow reading and writing the fields by direct\n   attribute accesses.  These are the\n\n\n   .. attribute:: _fields_\n\n      A sequence defining the structure fields.  The items must be 2-tuples or\n      3-tuples.  The first item is the name of the field, the second item\n      specifies the type of the field; it can be any ctypes data type.\n\n      For integer type fields like :class:`c_int`, a third optional item can be\n      given.  It must be a small positive integer defining the bit width of the\n      field.\n\n      Field names must be unique within one structure or union.  This is not\n      checked, only one field can be accessed when names are repeated.\n\n      It is possible to define the :attr:`_fields_` class variable *after* the\n      class statement that defines the Structure subclass, this allows creating\n      data types that directly or indirectly reference themselves::\n\n         class List(Structure):\n             pass\n         List._fields_ = [(\"pnext\", POINTER(List)),\n                          ...\n                         ]\n\n      The :attr:`_fields_` class variable must, however, be defined before the\n      type is first used (an instance is created, :func:`sizeof` is called on it,\n      and so on).  Later assignments to the :attr:`_fields_` class variable will\n      raise an AttributeError.\n\n      It is possible to define sub-subclasses of structure types, they inherit\n      the fields of the base class plus the :attr:`_fields_` defined in the\n      sub-subclass, if any.\n\n\n   .. attribute:: _pack_\n\n      An optional small integer that allows overriding the alignment of\n      structure fields in the instance.  :attr:`_pack_` must already be defined\n      when :attr:`_fields_` is assigned, otherwise it will have no effect.\n\n\n   .. attribute:: _anonymous_\n\n      An optional sequence that lists the names of unnamed (anonymous) fields.\n      :attr:`_anonymous_` must be already defined when :attr:`_fields_` is\n      assigned, otherwise it will have no effect.\n\n      The fields listed in this variable must be structure or union type fields.\n      :mod:`ctypes` will create descriptors in the structure type that allows\n      accessing the nested fields directly, without the need to create the\n      structure or union field.\n\n      Here is an example type (Windows)::\n\n         class _U(Union):\n             _fields_ = [(\"lptdesc\", POINTER(TYPEDESC)),\n                         (\"lpadesc\", POINTER(ARRAYDESC)),\n                         (\"hreftype\", HREFTYPE)]\n\n         class TYPEDESC(Structure):\n             _anonymous_ = (\"u\",)\n             _fields_ = [(\"u\", _U),\n                         (\"vt\", VARTYPE)]\n\n\n      The ``TYPEDESC`` structure describes a COM data type, the ``vt`` field\n      specifies which one of the union fields is valid.  Since the ``u`` field\n      is defined as anonymous field, it is now possible to access the members\n      directly off the TYPEDESC instance. ``td.lptdesc`` and ``td.u.lptdesc``\n      are equivalent, but the former is faster since it does not need to create\n      a temporary union instance::\n\n         td = TYPEDESC()\n         td.vt = VT_PTR\n         td.lptdesc = POINTER(some_type)\n         td.u.lptdesc = POINTER(some_type)\n\n   It is possible to define sub-subclasses of structures, they inherit the\n   fields of the base class.  If the subclass definition has a separate\n   :attr:`_fields_` variable, the fields specified in this are appended to the\n   fields of the base class.\n\n   Structure and union constructors accept both positional and keyword\n   arguments.  Positional arguments are used to initialize member fields in the\n   same order as they are appear in :attr:`_fields_`.  Keyword arguments in the\n   constructor are interpreted as attribute assignments, so they will initialize\n   :attr:`_fields_` with the same name, or create new attributes for names not\n   present in :attr:`_fields_`.\n\n\n.. _ctypes-arrays-pointers:\n\nArrays and pointers\n^^^^^^^^^^^^^^^^^^^\n\n.. class:: Array(*args)\n\n   Abstract base class for arrays.\n\n   The recommended way to create concrete array types is by multiplying any\n   :mod:`ctypes` data type with a positive integer.  Alternatively, you can subclass\n   this type and define :attr:`_length_` and :attr:`_type_` class variables.\n   Array elements can be read and written using standard\n   subscript and slice accesses; for slice reads, the resulting object is\n   *not* itself an :class:`Array`.\n\n\n   .. attribute:: _length_\n\n        A positive integer specifying the number of elements in the array.\n        Out-of-range subscripts result in an :exc:`IndexError`. Will be\n        returned by :func:`len`.\n\n\n   .. attribute:: _type_\n\n        Specifies the type of each element in the array.\n\n\n   Array subclass constructors accept positional arguments, used to\n   initialize the elements in order.\n\n\n.. class:: _Pointer\n\n   Private, abstract base class for pointers.\n\n   Concrete pointer types are created by calling :func:`POINTER` with the\n   type that will be pointed to; this is done automatically by\n   :func:`pointer`.\n\n   If a pointer points to an array, its elements can be read and\n   written using standard subscript and slice accesses.  Pointer objects\n   have no size, so :func:`len` will raise :exc:`TypeError`.  Negative\n   subscripts will read from the memory *before* the pointer (as in C), and\n   out-of-range subscripts will probably crash with an access violation (if\n   you're lucky).\n\n\n   .. attribute:: _type_\n\n        Specifies the type pointed to.\n\n   .. attribute:: contents\n\n        Returns the object to which to pointer points.  Assigning to this\n        attribute changes the pointer to point to the assigned object.\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/tutorial/modules.rst": ".. _tut-modules:\n\n*******\nModules\n*******\n\nIf you quit from the Python interpreter and enter it again, the definitions you\nhave made (functions and variables) are lost. Therefore, if you want to write a\nsomewhat longer program, you are better off using a text editor to prepare the\ninput for the interpreter and running it with that file as input instead.  This\nis known as creating a *script*.  As your program gets longer, you may want to\nsplit it into several files for easier maintenance.  You may also want to use a\nhandy function that you've written in several programs without copying its\ndefinition into each program.\n\nTo support this, Python has a way to put definitions in a file and use them in a\nscript or in an interactive instance of the interpreter. Such a file is called a\n*module*; definitions from a module can be *imported* into other modules or into\nthe *main* module (the collection of variables that you have access to in a\nscript executed at the top level and in calculator mode).\n\nA module is a file containing Python definitions and statements.  The file name\nis the module name with the suffix :file:`.py` appended.  Within a module, the\nmodule's name (as a string) is available as the value of the global variable\n``__name__``.  For instance, use your favorite text editor to create a file\ncalled :file:`fibo.py` in the current directory with the following contents::\n\n   # Fibonacci numbers module\n\n   def fib(n):    # write Fibonacci series up to n\n       a, b = 0, 1\n       while a < n:\n           print(a, end=' ')\n           a, b = b, a+b\n       print()\n\n   def fib2(n):   # return Fibonacci series up to n\n       result = []\n       a, b = 0, 1\n       while a < n:\n           result.append(a)\n           a, b = b, a+b\n       return result\n\nNow enter the Python interpreter and import this module with the following\ncommand::\n\n   >>> import fibo\n\nThis does not enter the names of the functions defined in ``fibo``  directly in\nthe current symbol table; it only enters the module name ``fibo`` there. Using\nthe module name you can access the functions::\n\n   >>> fibo.fib(1000)\n   0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987\n   >>> fibo.fib2(100)\n   [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]\n   >>> fibo.__name__\n   'fibo'\n\nIf you intend to use a function often you can assign it to a local name::\n\n   >>> fib = fibo.fib\n   >>> fib(500)\n   0 1 1 2 3 5 8 13 21 34 55 89 144 233 377\n\n\n.. _tut-moremodules:\n\nMore on Modules\n===============\n\nA module can contain executable statements as well as function definitions.\nThese statements are intended to initialize the module. They are executed only\nthe *first* time the module name is encountered in an import statement. [#]_\n(They are also run if the file is executed as a script.)\n\nEach module has its own private symbol table, which is used as the global symbol\ntable by all functions defined in the module. Thus, the author of a module can\nuse global variables in the module without worrying about accidental clashes\nwith a user's global variables. On the other hand, if you know what you are\ndoing you can touch a module's global variables with the same notation used to\nrefer to its functions, ``modname.itemname``.\n\nModules can import other modules.  It is customary but not required to place all\n:keyword:`import` statements at the beginning of a module (or script, for that\nmatter).  The imported module names are placed in the importing module's global\nsymbol table.\n\nThere is a variant of the :keyword:`import` statement that imports names from a\nmodule directly into the importing module's symbol table.  For example::\n\n   >>> from fibo import fib, fib2\n   >>> fib(500)\n   0 1 1 2 3 5 8 13 21 34 55 89 144 233 377\n\nThis does not introduce the module name from which the imports are taken in the\nlocal symbol table (so in the example, ``fibo`` is not defined).\n\nThere is even a variant to import all names that a module defines::\n\n   >>> from fibo import *\n   >>> fib(500)\n   0 1 1 2 3 5 8 13 21 34 55 89 144 233 377\n\nThis imports all names except those beginning with an underscore (``_``).\nIn most cases Python programmers do not use this facility since it introduces\nan unknown set of names into the interpreter, possibly hiding some things\nyou have already defined.\n\nNote that in general the practice of importing ``*`` from a module or package is\nfrowned upon, since it often causes poorly readable code. However, it is okay to\nuse it to save typing in interactive sessions.\n\nIf the module name is followed by :keyword:`!as`, then the name\nfollowing :keyword:`!as` is bound directly to the imported module.\n\n::\n\n   >>> import fibo as fib\n   >>> fib.fib(500)\n   0 1 1 2 3 5 8 13 21 34 55 89 144 233 377\n\nThis is effectively importing the module in the same way that ``import fibo``\nwill do, with the only difference of it being available as ``fib``.\n\nIt can also be used when utilising :keyword:`from` with similar effects::\n\n   >>> from fibo import fib as fibonacci\n   >>> fibonacci(500)\n   0 1 1 2 3 5 8 13 21 34 55 89 144 233 377\n\n\n.. note::\n\n   For efficiency reasons, each module is only imported once per interpreter\n   session.  Therefore, if you change your modules, you must restart the\n   interpreter -- or, if it's just one module you want to test interactively,\n   use :func:`importlib.reload`, e.g. ``import importlib;\n   importlib.reload(modulename)``.\n\n\n.. _tut-modulesasscripts:\n\nExecuting modules as scripts\n----------------------------\n\nWhen you run a Python module with ::\n\n   python fibo.py <arguments>\n\nthe code in the module will be executed, just as if you imported it, but with\nthe ``__name__`` set to ``\"__main__\"``.  That means that by adding this code at\nthe end of your module::\n\n   if __name__ == \"__main__\":\n       import sys\n       fib(int(sys.argv[1]))\n\nyou can make the file usable as a script as well as an importable module,\nbecause the code that parses the command line only runs if the module is\nexecuted as the \"main\" file:\n\n.. code-block:: shell-session\n\n   $ python fibo.py 50\n   0 1 1 2 3 5 8 13 21 34\n\nIf the module is imported, the code is not run::\n\n   >>> import fibo\n   >>>\n\nThis is often used either to provide a convenient user interface to a module, or\nfor testing purposes (running the module as a script executes a test suite).\n\n\n.. _tut-searchpath:\n\nThe Module Search Path\n----------------------\n\n.. index:: triple: module; search; path\n\nWhen a module named :mod:`spam` is imported, the interpreter first searches for\na built-in module with that name. If not found, it then searches for a file\nnamed :file:`spam.py` in a list of directories given by the variable\n:data:`sys.path`.  :data:`sys.path` is initialized from these locations:\n\n* The directory containing the input script (or the current directory when no\n  file is specified).\n* :envvar:`PYTHONPATH` (a list of directory names, with the same syntax as the\n  shell variable :envvar:`PATH`).\n* The installation-dependent default.\n\n.. note::\n   On file systems which support symlinks, the directory containing the input\n   script is calculated after the symlink is followed. In other words the\n   directory containing the symlink is **not** added to the module search path.\n\nAfter initialization, Python programs can modify :data:`sys.path`.  The\ndirectory containing the script being run is placed at the beginning of the\nsearch path, ahead of the standard library path. This means that scripts in that\ndirectory will be loaded instead of modules of the same name in the library\ndirectory. This is an error unless the replacement is intended.  See section\n:ref:`tut-standardmodules` for more information.\n\n.. %\n    Do we need stuff on zip files etc. ? DUBOIS\n\n\"Compiled\" Python files\n-----------------------\n\nTo speed up loading modules, Python caches the compiled version of each module\nin the ``__pycache__`` directory under the name :file:`module.{version}.pyc`,\nwhere the version encodes the format of the compiled file; it generally contains\nthe Python version number.  For example, in CPython release 3.3 the compiled\nversion of spam.py would be cached as ``__pycache__/spam.cpython-33.pyc``.  This\nnaming convention allows compiled modules from different releases and different\nversions of Python to coexist.\n\nPython checks the modification date of the source against the compiled version\nto see if it's out of date and needs to be recompiled.  This is a completely\nautomatic process.  Also, the compiled modules are platform-independent, so the\nsame library can be shared among systems with different architectures.\n\nPython does not check the cache in two circumstances.  First, it always\nrecompiles and does not store the result for the module that's loaded directly\nfrom the command line.  Second, it does not check the cache if there is no\nsource module.  To support a non-source (compiled only) distribution, the\ncompiled module must be in the source directory, and there must not be a source\nmodule.\n\nSome tips for experts:\n\n* You can use the :option:`-O` or :option:`-OO` switches on the Python command\n  to reduce the size of a compiled module.  The ``-O`` switch removes assert\n  statements, the ``-OO`` switch removes both assert statements and __doc__\n  strings.  Since some programs may rely on having these available, you should\n  only use this option if you know what you're doing.  \"Optimized\" modules have\n  an ``opt-`` tag and are usually smaller.  Future releases may\n  change the effects of optimization.\n\n* A program doesn't run any faster when it is read from a ``.pyc``\n  file than when it is read from a ``.py`` file; the only thing that's faster\n  about ``.pyc`` files is the speed with which they are loaded.\n\n* The module :mod:`compileall` can create .pyc files for all modules in a\n  directory.\n\n* There is more detail on this process, including a flow chart of the\n  decisions, in :pep:`3147`.\n\n\n.. _tut-standardmodules:\n\nStandard Modules\n================\n\n.. index:: module: sys\n\nPython comes with a library of standard modules, described in a separate\ndocument, the Python Library Reference (\"Library Reference\" hereafter).  Some\nmodules are built into the interpreter; these provide access to operations that\nare not part of the core of the language but are nevertheless built in, either\nfor efficiency or to provide access to operating system primitives such as\nsystem calls.  The set of such modules is a configuration option which also\ndepends on the underlying platform.  For example, the :mod:`winreg` module is only\nprovided on Windows systems. One particular module deserves some attention:\n:mod:`sys`, which is built into every Python interpreter.  The variables\n``sys.ps1`` and ``sys.ps2`` define the strings used as primary and secondary\nprompts::\n\n   >>> import sys\n   >>> sys.ps1\n   '>>> '\n   >>> sys.ps2\n   '... '\n   >>> sys.ps1 = 'C> '\n   C> print('Yuck!')\n   Yuck!\n   C>\n\n\nThese two variables are only defined if the interpreter is in interactive mode.\n\nThe variable ``sys.path`` is a list of strings that determines the interpreter's\nsearch path for modules. It is initialized to a default path taken from the\nenvironment variable :envvar:`PYTHONPATH`, or from a built-in default if\n:envvar:`PYTHONPATH` is not set.  You can modify it using standard list\noperations::\n\n   >>> import sys\n   >>> sys.path.append('/ufs/guido/lib/python')\n\n\n.. _tut-dir:\n\nThe :func:`dir` Function\n========================\n\nThe built-in function :func:`dir` is used to find out which names a module\ndefines.  It returns a sorted list of strings::\n\n   >>> import fibo, sys\n   >>> dir(fibo)\n   ['__name__', 'fib', 'fib2']\n   >>> dir(sys)  # doctest: +NORMALIZE_WHITESPACE\n   ['__displayhook__', '__doc__', '__excepthook__', '__loader__', '__name__',\n    '__package__', '__stderr__', '__stdin__', '__stdout__',\n    '_clear_type_cache', '_current_frames', '_debugmallocstats', '_getframe',\n    '_home', '_mercurial', '_xoptions', 'abiflags', 'api_version', 'argv',\n    'base_exec_prefix', 'base_prefix', 'builtin_module_names', 'byteorder',\n    'call_tracing', 'callstats', 'copyright', 'displayhook',\n    'dont_write_bytecode', 'exc_info', 'excepthook', 'exec_prefix',\n    'executable', 'exit', 'flags', 'float_info', 'float_repr_style',\n    'getcheckinterval', 'getdefaultencoding', 'getdlopenflags',\n    'getfilesystemencoding', 'getobjects', 'getprofile', 'getrecursionlimit',\n    'getrefcount', 'getsizeof', 'getswitchinterval', 'gettotalrefcount',\n    'gettrace', 'hash_info', 'hexversion', 'implementation', 'int_info',\n    'intern', 'maxsize', 'maxunicode', 'meta_path', 'modules', 'path',\n    'path_hooks', 'path_importer_cache', 'platform', 'prefix', 'ps1',\n    'setcheckinterval', 'setdlopenflags', 'setprofile', 'setrecursionlimit',\n    'setswitchinterval', 'settrace', 'stderr', 'stdin', 'stdout',\n    'thread_info', 'version', 'version_info', 'warnoptions']\n\nWithout arguments, :func:`dir` lists the names you have defined currently::\n\n   >>> a = [1, 2, 3, 4, 5]\n   >>> import fibo\n   >>> fib = fibo.fib\n   >>> dir()\n   ['__builtins__', '__name__', 'a', 'fib', 'fibo', 'sys']\n\nNote that it lists all types of names: variables, modules, functions, etc.\n\n.. index:: module: builtins\n\n:func:`dir` does not list the names of built-in functions and variables.  If you\nwant a list of those, they are defined in the standard module\n:mod:`builtins`::\n\n   >>> import builtins\n   >>> dir(builtins)  # doctest: +NORMALIZE_WHITESPACE\n   ['ArithmeticError', 'AssertionError', 'AttributeError', 'BaseException',\n    'BlockingIOError', 'BrokenPipeError', 'BufferError', 'BytesWarning',\n    'ChildProcessError', 'ConnectionAbortedError', 'ConnectionError',\n    'ConnectionRefusedError', 'ConnectionResetError', 'DeprecationWarning',\n    'EOFError', 'Ellipsis', 'EnvironmentError', 'Exception', 'False',\n    'FileExistsError', 'FileNotFoundError', 'FloatingPointError',\n    'FutureWarning', 'GeneratorExit', 'IOError', 'ImportError',\n    'ImportWarning', 'IndentationError', 'IndexError', 'InterruptedError',\n    'IsADirectoryError', 'KeyError', 'KeyboardInterrupt', 'LookupError',\n    'MemoryError', 'NameError', 'None', 'NotADirectoryError', 'NotImplemented',\n    'NotImplementedError', 'OSError', 'OverflowError',\n    'PendingDeprecationWarning', 'PermissionError', 'ProcessLookupError',\n    'ReferenceError', 'ResourceWarning', 'RuntimeError', 'RuntimeWarning',\n    'StopIteration', 'SyntaxError', 'SyntaxWarning', 'SystemError',\n    'SystemExit', 'TabError', 'TimeoutError', 'True', 'TypeError',\n    'UnboundLocalError', 'UnicodeDecodeError', 'UnicodeEncodeError',\n    'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning', 'UserWarning',\n    'ValueError', 'Warning', 'ZeroDivisionError', '_', '__build_class__',\n    '__debug__', '__doc__', '__import__', '__name__', '__package__', 'abs',\n    'all', 'any', 'ascii', 'bin', 'bool', 'bytearray', 'bytes', 'callable',\n    'chr', 'classmethod', 'compile', 'complex', 'copyright', 'credits',\n    'delattr', 'dict', 'dir', 'divmod', 'enumerate', 'eval', 'exec', 'exit',\n    'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr',\n    'hash', 'help', 'hex', 'id', 'input', 'int', 'isinstance', 'issubclass',\n    'iter', 'len', 'license', 'list', 'locals', 'map', 'max', 'memoryview',\n    'min', 'next', 'object', 'oct', 'open', 'ord', 'pow', 'print', 'property',\n    'quit', 'range', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice',\n    'sorted', 'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'vars',\n    'zip']\n\n.. _tut-packages:\n\nPackages\n========\n\nPackages are a way of structuring Python's module namespace by using \"dotted\nmodule names\".  For example, the module name :mod:`A.B` designates a submodule\nnamed ``B`` in a package named ``A``.  Just like the use of modules saves the\nauthors of different modules from having to worry about each other's global\nvariable names, the use of dotted module names saves the authors of multi-module\npackages like NumPy or Pillow from having to worry about\neach other's module names.\n\nSuppose you want to design a collection of modules (a \"package\") for the uniform\nhandling of sound files and sound data.  There are many different sound file\nformats (usually recognized by their extension, for example: :file:`.wav`,\n:file:`.aiff`, :file:`.au`), so you may need to create and maintain a growing\ncollection of modules for the conversion between the various file formats.\nThere are also many different operations you might want to perform on sound data\n(such as mixing, adding echo, applying an equalizer function, creating an\nartificial stereo effect), so in addition you will be writing a never-ending\nstream of modules to perform these operations.  Here's a possible structure for\nyour package (expressed in terms of a hierarchical filesystem):\n\n.. code-block:: text\n\n   sound/                          Top-level package\n         __init__.py               Initialize the sound package\n         formats/                  Subpackage for file format conversions\n                 __init__.py\n                 wavread.py\n                 wavwrite.py\n                 aiffread.py\n                 aiffwrite.py\n                 auread.py\n                 auwrite.py\n                 ...\n         effects/                  Subpackage for sound effects\n                 __init__.py\n                 echo.py\n                 surround.py\n                 reverse.py\n                 ...\n         filters/                  Subpackage for filters\n                 __init__.py\n                 equalizer.py\n                 vocoder.py\n                 karaoke.py\n                 ...\n\nWhen importing the package, Python searches through the directories on\n``sys.path`` looking for the package subdirectory.\n\nThe :file:`__init__.py` files are required to make Python treat directories\ncontaining the file as packages.  This prevents directories with a common name,\nsuch as ``string``, unintentionally hiding valid modules that occur later\non the module search path. In the simplest case, :file:`__init__.py` can just be\nan empty file, but it can also execute initialization code for the package or\nset the ``__all__`` variable, described later.\n\nUsers of the package can import individual modules from the package, for\nexample::\n\n   import sound.effects.echo\n\nThis loads the submodule :mod:`sound.effects.echo`.  It must be referenced with\nits full name. ::\n\n   sound.effects.echo.echofilter(input, output, delay=0.7, atten=4)\n\nAn alternative way of importing the submodule is::\n\n   from sound.effects import echo\n\nThis also loads the submodule :mod:`echo`, and makes it available without its\npackage prefix, so it can be used as follows::\n\n   echo.echofilter(input, output, delay=0.7, atten=4)\n\nYet another variation is to import the desired function or variable directly::\n\n   from sound.effects.echo import echofilter\n\nAgain, this loads the submodule :mod:`echo`, but this makes its function\n:func:`echofilter` directly available::\n\n   echofilter(input, output, delay=0.7, atten=4)\n\nNote that when using ``from package import item``, the item can be either a\nsubmodule (or subpackage) of the package, or some  other name defined in the\npackage, like a function, class or variable.  The ``import`` statement first\ntests whether the item is defined in the package; if not, it assumes it is a\nmodule and attempts to load it.  If it fails to find it, an :exc:`ImportError`\nexception is raised.\n\nContrarily, when using syntax like ``import item.subitem.subsubitem``, each item\nexcept for the last must be a package; the last item can be a module or a\npackage but can't be a class or function or variable defined in the previous\nitem.\n\n\n.. _tut-pkg-import-star:\n\nImporting \\* From a Package\n---------------------------\n\n.. index:: single: __all__\n\nNow what happens when the user writes ``from sound.effects import *``?  Ideally,\none would hope that this somehow goes out to the filesystem, finds which\nsubmodules are present in the package, and imports them all.  This could take a\nlong time and importing sub-modules might have unwanted side-effects that should\nonly happen when the sub-module is explicitly imported.\n\nThe only solution is for the package author to provide an explicit index of the\npackage.  The :keyword:`import` statement uses the following convention: if a package's\n:file:`__init__.py` code defines a list named ``__all__``, it is taken to be the\nlist of module names that should be imported when ``from package import *`` is\nencountered.  It is up to the package author to keep this list up-to-date when a\nnew version of the package is released.  Package authors may also decide not to\nsupport it, if they don't see a use for importing \\* from their package.  For\nexample, the file :file:`sound/effects/__init__.py` could contain the following\ncode::\n\n   __all__ = [\"echo\", \"surround\", \"reverse\"]\n\nThis would mean that ``from sound.effects import *`` would import the three\nnamed submodules of the :mod:`sound` package.\n\nIf ``__all__`` is not defined, the statement ``from sound.effects import *``\ndoes *not* import all submodules from the package :mod:`sound.effects` into the\ncurrent namespace; it only ensures that the package :mod:`sound.effects` has\nbeen imported (possibly running any initialization code in :file:`__init__.py`)\nand then imports whatever names are defined in the package.  This includes any\nnames defined (and submodules explicitly loaded) by :file:`__init__.py`.  It\nalso includes any submodules of the package that were explicitly loaded by\nprevious :keyword:`import` statements.  Consider this code::\n\n   import sound.effects.echo\n   import sound.effects.surround\n   from sound.effects import *\n\nIn this example, the :mod:`echo` and :mod:`surround` modules are imported in the\ncurrent namespace because they are defined in the :mod:`sound.effects` package\nwhen the ``from...import`` statement is executed.  (This also works when\n``__all__`` is defined.)\n\nAlthough certain modules are designed to export only names that follow certain\npatterns when you use ``import *``, it is still considered bad practice in\nproduction code.\n\nRemember, there is nothing wrong with using ``from package import\nspecific_submodule``!  In fact, this is the recommended notation unless the\nimporting module needs to use submodules with the same name from different\npackages.\n\n\nIntra-package References\n------------------------\n\nWhen packages are structured into subpackages (as with the :mod:`sound` package\nin the example), you can use absolute imports to refer to submodules of siblings\npackages.  For example, if the module :mod:`sound.filters.vocoder` needs to use\nthe :mod:`echo` module in the :mod:`sound.effects` package, it can use ``from\nsound.effects import echo``.\n\nYou can also write relative imports, with the ``from module import name`` form\nof import statement.  These imports use leading dots to indicate the current and\nparent packages involved in the relative import.  From the :mod:`surround`\nmodule for example, you might use::\n\n   from . import echo\n   from .. import formats\n   from ..filters import equalizer\n\nNote that relative imports are based on the name of the current module.  Since\nthe name of the main module is always ``\"__main__\"``, modules intended for use\nas the main module of a Python application must always use absolute imports.\n\n\nPackages in Multiple Directories\n--------------------------------\n\nPackages support one more special attribute, :attr:`__path__`.  This is\ninitialized to be a list containing the name of the directory holding the\npackage's :file:`__init__.py` before the code in that file is executed.  This\nvariable can be modified; doing so affects future searches for modules and\nsubpackages contained in the package.\n\nWhile this feature is not often needed, it can be used to extend the set of\nmodules found in a package.\n\n\n.. rubric:: Footnotes\n\n.. [#] In fact function definitions are also 'statements' that are 'executed'; the\n   execution of a module-level function definition enters the function name in\n   the module's global symbol table.\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/whatsnew/2.5.rst": "****************************\n  What's New in Python 2.5\n****************************\n\n:Author: A.M. Kuchling\n\n.. |release| replace:: 1.01\n\n.. $Id: whatsnew25.tex 56611 2007-07-29 08:26:10Z georg.brandl $\n.. Fix XXX comments\n\nThis article explains the new features in Python 2.5.  The final release of\nPython 2.5 is scheduled for August 2006; :pep:`356` describes the planned\nrelease schedule.\n\nThe changes in Python 2.5 are an interesting mix of language and library\nimprovements. The library enhancements will be more important to Python's user\ncommunity, I think, because several widely-useful packages were added.  New\nmodules include ElementTree for XML processing (:mod:`xml.etree`),\nthe SQLite database module (:mod:`sqlite`), and the :mod:`ctypes`\nmodule for calling C functions.\n\nThe language changes are of middling significance.  Some pleasant new features\nwere added, but most of them aren't features that you'll use every day.\nConditional expressions were finally added to the language using a novel syntax;\nsee section :ref:`pep-308`.  The new ':keyword:`with`' statement will make\nwriting cleanup code easier (section :ref:`pep-343`).  Values can now be passed\ninto generators (section :ref:`pep-342`).  Imports are now visible as either\nabsolute or relative (section :ref:`pep-328`).  Some corner cases of exception\nhandling are handled better (section :ref:`pep-341`).  All these improvements\nare worthwhile, but they're improvements to one specific language feature or\nanother; none of them are broad modifications to Python's semantics.\n\nAs well as the language and library additions, other improvements and bugfixes\nwere made throughout the source tree.  A search through the SVN change logs\nfinds there were 353 patches applied and 458 bugs fixed between Python 2.4 and\n2.5.  (Both figures are likely to be underestimates.)\n\nThis article doesn't try to be a complete specification of the new features;\ninstead changes are briefly introduced using helpful examples.  For full\ndetails, you should always refer to the documentation for Python 2.5 at\nhttps://docs.python.org. If you want to understand the complete implementation\nand design rationale, refer to the PEP for a particular new feature.\n\nComments, suggestions, and error reports for this document are welcome; please\ne-mail them to the author or open a bug in the Python bug tracker.\n\n.. ======================================================================\n\n\n.. _pep-308:\n\nPEP 308: Conditional Expressions\n================================\n\nFor a long time, people have been requesting a way to write conditional\nexpressions, which are expressions that return value A or value B depending on\nwhether a Boolean value is true or false.  A conditional expression lets you\nwrite a single assignment statement that has the same effect as the following::\n\n   if condition:\n       x = true_value\n   else:\n       x = false_value\n\nThere have been endless tedious discussions of syntax on both python-dev and\ncomp.lang.python.  A vote was even held that found the majority of voters wanted\nconditional expressions in some form, but there was no syntax that was preferred\nby a clear majority. Candidates included C's ``cond ? true_v : false_v``, ``if\ncond then true_v else false_v``, and 16 other variations.\n\nGuido van Rossum eventually chose a surprising syntax::\n\n   x = true_value if condition else false_value\n\nEvaluation is still lazy as in existing Boolean expressions, so the order of\nevaluation jumps around a bit.  The *condition* expression in the middle is\nevaluated first, and the *true_value* expression is evaluated only if the\ncondition was true.  Similarly, the *false_value* expression is only evaluated\nwhen the condition is false.\n\nThis syntax may seem strange and backwards; why does the condition go in the\n*middle* of the expression, and not in the front as in C's ``c ? x : y``?  The\ndecision was checked by applying the new syntax to the modules in the standard\nlibrary and seeing how the resulting code read.  In many cases where a\nconditional expression is used, one value seems to be the 'common case' and one\nvalue is an 'exceptional case', used only on rarer occasions when the condition\nisn't met.  The conditional syntax makes this pattern a bit more obvious::\n\n   contents = ((doc + '\\n') if doc else '')\n\nI read the above statement as meaning \"here *contents* is  usually assigned a\nvalue of ``doc+'\\n'``; sometimes  *doc* is empty, in which special case an empty\nstring is returned.\"   I doubt I will use conditional expressions very often\nwhere there  isn't a clear common and uncommon case.\n\nThere was some discussion of whether the language should require surrounding\nconditional expressions with parentheses.  The decision was made to *not*\nrequire parentheses in the Python language's grammar, but as a matter of style I\nthink you should always use them. Consider these two statements::\n\n   # First version -- no parens\n   level = 1 if logging else 0\n\n   # Second version -- with parens\n   level = (1 if logging else 0)\n\nIn the first version, I think a reader's eye might group the statement into\n'level = 1', 'if logging', 'else 0', and think that the condition decides\nwhether the assignment to *level* is performed.  The second version reads\nbetter, in my opinion, because it makes it clear that the assignment is always\nperformed and the choice is being made between two values.\n\nAnother reason for including the brackets: a few odd combinations of list\ncomprehensions and lambdas could look like incorrect conditional expressions.\nSee :pep:`308` for some examples.  If you put parentheses around your\nconditional expressions, you won't run into this case.\n\n\n.. seealso::\n\n   :pep:`308` - Conditional Expressions\n      PEP written by Guido van Rossum and Raymond D. Hettinger; implemented by Thomas\n      Wouters.\n\n.. ======================================================================\n\n\n.. _pep-309:\n\nPEP 309: Partial Function Application\n=====================================\n\nThe :mod:`functools` module is intended to contain tools for functional-style\nprogramming.\n\nOne useful tool in this module is the :func:`partial` function. For programs\nwritten in a functional style, you'll sometimes want to construct variants of\nexisting functions that have some of the parameters filled in.  Consider a\nPython function ``f(a, b, c)``; you could create a new function ``g(b, c)`` that\nwas equivalent to ``f(1, b, c)``.  This is called \"partial function\napplication\".\n\n:func:`partial` takes the arguments ``(function, arg1, arg2, ... kwarg1=value1,\nkwarg2=value2)``.  The resulting object is callable, so you can just call it to\ninvoke *function* with the filled-in arguments.\n\nHere's a small but realistic example::\n\n   import functools\n\n   def log (message, subsystem):\n       \"Write the contents of 'message' to the specified subsystem.\"\n       print '%s: %s' % (subsystem, message)\n       ...\n\n   server_log = functools.partial(log, subsystem='server')\n   server_log('Unable to open socket')\n\nHere's another example, from a program that uses PyGTK.  Here a context-sensitive\npop-up menu is being constructed dynamically.  The callback provided\nfor the menu option is a partially applied version of the :meth:`open_item`\nmethod, where the first argument has been provided. ::\n\n   ...\n   class Application:\n       def open_item(self, path):\n          ...\n       def init (self):\n           open_func = functools.partial(self.open_item, item_path)\n           popup_menu.append( (\"Open\", open_func, 1) )\n\nAnother function in the :mod:`functools` module is the\n``update_wrapper(wrapper, wrapped)`` function that helps you write\nwell-behaved decorators.  :func:`update_wrapper` copies the name, module, and\ndocstring attribute to a wrapper function so that tracebacks inside the wrapped\nfunction are easier to understand.  For example, you might write::\n\n   def my_decorator(f):\n       def wrapper(*args, **kwds):\n           print 'Calling decorated function'\n           return f(*args, **kwds)\n       functools.update_wrapper(wrapper, f)\n       return wrapper\n\n:func:`wraps` is a decorator that can be used inside your own decorators to copy\nthe wrapped function's information.  An alternate  version of the previous\nexample would be::\n\n   def my_decorator(f):\n       @functools.wraps(f)\n       def wrapper(*args, **kwds):\n           print 'Calling decorated function'\n           return f(*args, **kwds)\n       return wrapper\n\n\n.. seealso::\n\n   :pep:`309` - Partial Function Application\n      PEP proposed and written by Peter Harris; implemented by Hye-Shik Chang and Nick\n      Coghlan, with adaptations by Raymond Hettinger.\n\n.. ======================================================================\n\n\n.. _pep-314:\n\nPEP 314: Metadata for Python Software Packages v1.1\n===================================================\n\nSome simple dependency support was added to Distutils.  The :func:`setup`\nfunction now has ``requires``, ``provides``, and ``obsoletes`` keyword\nparameters.  When you build a source distribution using the ``sdist`` command,\nthe dependency information will be recorded in the :file:`PKG-INFO` file.\n\nAnother new keyword parameter is ``download_url``, which should be set to a URL\nfor the package's source code.  This means it's now possible to look up an entry\nin the package index, determine the dependencies for a package, and download the\nrequired packages. ::\n\n   VERSION = '1.0'\n   setup(name='PyPackage',\n         version=VERSION,\n         requires=['numarray', 'zlib (>=1.1.4)'],\n         obsoletes=['OldPackage']\n         download_url=('http://www.example.com/pypackage/dist/pkg-%s.tar.gz'\n                       % VERSION),\n        )\n\nAnother new enhancement to the Python package index at\nhttps://pypi.org is storing source and binary archives for a\npackage.  The new :command:`upload` Distutils command will upload a package to\nthe repository.\n\nBefore a package can be uploaded, you must be able to build a distribution using\nthe :command:`sdist` Distutils command.  Once that works, you can run ``python\nsetup.py upload`` to add your package to the PyPI archive.  Optionally you can\nGPG-sign the package by supplying the :option:`!--sign` and :option:`!--identity`\noptions.\n\nPackage uploading was implemented by Martin von L\u00f6wis and Richard Jones.\n\n\n.. seealso::\n\n   :pep:`314` - Metadata for Python Software Packages v1.1\n      PEP proposed and written by A.M. Kuchling, Richard Jones, and Fred Drake;\n      implemented by Richard Jones and Fred Drake.\n\n.. ======================================================================\n\n\n.. _pep-328:\n\nPEP 328: Absolute and Relative Imports\n======================================\n\nThe simpler part of :pep:`328` was implemented in Python 2.4: parentheses could now\nbe used to enclose the names imported from a module using the ``from ... import\n...`` statement, making it easier to import many different names.\n\nThe more complicated part has been implemented in Python 2.5: importing a module\ncan be specified to use absolute or package-relative imports.  The plan is to\nmove toward making absolute imports the default in future versions of Python.\n\nLet's say you have a package directory like this::\n\n   pkg/\n   pkg/__init__.py\n   pkg/main.py\n   pkg/string.py\n\nThis defines a package named :mod:`pkg` containing the :mod:`pkg.main` and\n:mod:`pkg.string` submodules.\n\nConsider the code in the :file:`main.py` module.  What happens if it executes\nthe statement ``import string``?  In Python 2.4 and earlier, it will first look\nin the package's directory to perform a relative import, finds\n:file:`pkg/string.py`, imports the contents of that file as the\n:mod:`pkg.string` module, and that module is bound to the name ``string`` in the\n:mod:`pkg.main` module's namespace.\n\nThat's fine if :mod:`pkg.string` was what you wanted.  But what if you wanted\nPython's standard :mod:`string` module?  There's no clean way to ignore\n:mod:`pkg.string` and look for the standard module; generally you had to look at\nthe contents of ``sys.modules``, which is slightly unclean.    Holger Krekel's\n:mod:`py.std` package provides a tidier way to perform imports from the standard\nlibrary, ``import py; py.std.string.join()``, but that package isn't available\non all Python installations.\n\nReading code which relies on relative imports is also less clear, because a\nreader may be confused about which module, :mod:`string` or :mod:`pkg.string`,\nis intended to be used.  Python users soon learned not to duplicate the names of\nstandard library modules in the names of their packages' submodules, but you\ncan't protect against having your submodule's name being used for a new module\nadded in a future version of Python.\n\nIn Python 2.5, you can switch :keyword:`import`'s behaviour to  absolute imports\nusing a ``from __future__ import absolute_import`` directive.  This absolute-import\nbehaviour will become the default in a future version (probably Python\n2.7).  Once absolute imports  are the default, ``import string`` will always\nfind the standard library's version. It's suggested that users should begin\nusing absolute imports as much as possible, so it's preferable to begin writing\n``from pkg import string`` in your code.\n\nRelative imports are still possible by adding a leading period  to the module\nname when using the ``from ... import`` form::\n\n   # Import names from pkg.string\n   from .string import name1, name2\n   # Import pkg.string\n   from . import string\n\nThis imports the :mod:`string` module relative to the current package, so in\n:mod:`pkg.main` this will import *name1* and *name2* from :mod:`pkg.string`.\nAdditional leading periods perform the relative import starting from the parent\nof the current package.  For example, code in the :mod:`A.B.C` module can do::\n\n   from . import D                 # Imports A.B.D\n   from .. import E                # Imports A.E\n   from ..F import G               # Imports A.F.G\n\nLeading periods cannot be used with the ``import modname``  form of the import\nstatement, only the ``from ... import`` form.\n\n\n.. seealso::\n\n   :pep:`328` - Imports: Multi-Line and Absolute/Relative\n      PEP written by Aahz; implemented by Thomas Wouters.\n\n   https://pylib.readthedocs.io/\n      The py library by Holger Krekel, which contains the :mod:`py.std` package.\n\n.. ======================================================================\n\n\n.. _pep-338:\n\nPEP 338: Executing Modules as Scripts\n=====================================\n\nThe :option:`-m` switch added in Python 2.4 to execute a module as a script\ngained a few more abilities.  Instead of being implemented in C code inside the\nPython interpreter, the switch now uses an implementation in a new module,\n:mod:`runpy`.\n\nThe :mod:`runpy` module implements a more sophisticated import mechanism so that\nit's now possible to run modules in a package such as :mod:`pychecker.checker`.\nThe module also supports alternative import mechanisms such as the\n:mod:`zipimport` module.  This means you can add a .zip archive's path to\n``sys.path`` and then use the :option:`-m` switch to execute code from the\narchive.\n\n\n.. seealso::\n\n   :pep:`338` - Executing modules as scripts\n      PEP written and  implemented by Nick Coghlan.\n\n.. ======================================================================\n\n\n.. _pep-341:\n\nPEP 341: Unified try/except/finally\n===================================\n\nUntil Python 2.5, the :keyword:`try` statement came in two flavours. You could\nuse a :keyword:`finally` block to ensure that code is always executed, or one or\nmore :keyword:`except` blocks to catch  specific exceptions.  You couldn't\ncombine both :keyword:`!except` blocks and a :keyword:`!finally` block, because\ngenerating the right bytecode for the combined version was complicated and it\nwasn't clear what the semantics of the combined statement should be.\n\nGuido van Rossum spent some time working with Java, which does support the\nequivalent of combining :keyword:`except` blocks and a :keyword:`finally` block,\nand this clarified what the statement should mean.  In Python 2.5, you can now\nwrite::\n\n   try:\n       block-1 ...\n   except Exception1:\n       handler-1 ...\n   except Exception2:\n       handler-2 ...\n   else:\n       else-block\n   finally:\n       final-block\n\nThe code in *block-1* is executed.  If the code raises an exception, the various\n:keyword:`except` blocks are tested: if the exception is of class\n:class:`Exception1`, *handler-1* is executed; otherwise if it's of class\n:class:`Exception2`, *handler-2* is executed, and so forth.  If no exception is\nraised, the *else-block* is executed.\n\nNo matter what happened previously, the *final-block* is executed once the code\nblock is complete and any raised exceptions handled. Even if there's an error in\nan exception handler or the *else-block* and a new exception is raised, the code\nin the *final-block* is still run.\n\n\n.. seealso::\n\n   :pep:`341` - Unifying try-except and try-finally\n      PEP written by Georg Brandl;  implementation by Thomas Lee.\n\n.. ======================================================================\n\n\n.. _pep-342:\n\nPEP 342: New Generator Features\n===============================\n\nPython 2.5 adds a simple way to pass values *into* a generator. As introduced in\nPython 2.3, generators only produce output; once a generator's code was invoked\nto create an iterator, there was no way to pass any new information into the\nfunction when its execution is resumed.  Sometimes the ability to pass in some\ninformation would be useful.  Hackish solutions to this include making the\ngenerator's code look at a global variable and then changing the global\nvariable's value, or passing in some mutable object that callers then modify.\n\nTo refresh your memory of basic generators, here's a simple example::\n\n   def counter (maximum):\n       i = 0\n       while i < maximum:\n           yield i\n           i += 1\n\nWhen you call ``counter(10)``, the result is an iterator that returns the values\nfrom 0 up to 9.  On encountering the :keyword:`yield` statement, the iterator\nreturns the provided value and suspends the function's execution, preserving the\nlocal variables. Execution resumes on the following call to the iterator's\n:meth:`next` method, picking up after the :keyword:`!yield` statement.\n\nIn Python 2.3, :keyword:`yield` was a statement; it didn't return any value.  In\n2.5, :keyword:`!yield` is now an expression, returning a value that can be\nassigned to a variable or otherwise operated on::\n\n   val = (yield i)\n\nI recommend that you always put parentheses around a :keyword:`yield` expression\nwhen you're doing something with the returned value, as in the above example.\nThe parentheses aren't always necessary, but it's easier to always add them\ninstead of having to remember when they're needed.\n\n(:pep:`342` explains the exact rules, which are that a\n:keyword:`yield`\\ -expression must always be parenthesized except when it\noccurs at the top-level\nexpression on the right-hand side of an assignment.  This means you can write\n``val = yield i`` but have to use parentheses when there's an operation, as in\n``val = (yield i) + 12``.)\n\nValues are sent into a generator by calling its ``send(value)`` method.  The\ngenerator's code is then resumed and the :keyword:`yield` expression returns the\nspecified *value*.  If the regular :meth:`next` method is called, the\n:keyword:`!yield` returns :const:`None`.\n\nHere's the previous example, modified to allow changing the value of the\ninternal counter. ::\n\n   def counter (maximum):\n       i = 0\n       while i < maximum:\n           val = (yield i)\n           # If value provided, change counter\n           if val is not None:\n               i = val\n           else:\n               i += 1\n\nAnd here's an example of changing the counter::\n\n   >>> it = counter(10)\n   >>> print it.next()\n   0\n   >>> print it.next()\n   1\n   >>> print it.send(8)\n   8\n   >>> print it.next()\n   9\n   >>> print it.next()\n   Traceback (most recent call last):\n     File \"t.py\", line 15, in ?\n       print it.next()\n   StopIteration\n\n:keyword:`yield` will usually return :const:`None`, so you should always check\nfor this case.  Don't just use its value in expressions unless you're sure that\nthe :meth:`send` method will be the only method used to resume your generator\nfunction.\n\nIn addition to :meth:`send`, there are two other new methods on generators:\n\n* ``throw(type, value=None, traceback=None)`` is used to raise an exception\n  inside the generator; the exception is raised by the :keyword:`yield` expression\n  where the generator's execution is paused.\n\n* :meth:`close` raises a new :exc:`GeneratorExit` exception inside the generator\n  to terminate the iteration.  On receiving this exception, the generator's code\n  must either raise :exc:`GeneratorExit` or :exc:`StopIteration`.  Catching the\n  :exc:`GeneratorExit` exception and returning a value is illegal and will trigger\n  a :exc:`RuntimeError`; if the function raises some other exception, that\n  exception is propagated to the caller.  :meth:`close` will also be called by\n  Python's garbage collector when the generator is garbage-collected.\n\n  If you need to run cleanup code when a :exc:`GeneratorExit` occurs, I suggest\n  using a ``try: ... finally:`` suite instead of  catching :exc:`GeneratorExit`.\n\nThe cumulative effect of these changes is to turn generators from one-way\nproducers of information into both producers and consumers.\n\nGenerators also become *coroutines*, a more generalized form of subroutines.\nSubroutines are entered at one point and exited at another point (the top of the\nfunction, and a :keyword:`return` statement), but coroutines can be entered,\nexited, and resumed at many different points (the :keyword:`yield` statements).\nWe'll have to figure out patterns for using coroutines effectively in Python.\n\nThe addition of the :meth:`close` method has one side effect that isn't obvious.\n:meth:`close` is called when a generator is garbage-collected, so this means the\ngenerator's code gets one last chance to run before the generator is destroyed.\nThis last chance means that ``try...finally`` statements in generators can now\nbe guaranteed to work; the :keyword:`finally` clause will now always get a\nchance to run.  The syntactic restriction that you couldn't mix :keyword:`yield`\nstatements with a ``try...finally`` suite has therefore been removed.  This\nseems like a minor bit of language trivia, but using generators and\n``try...finally`` is actually necessary in order to implement the\n:keyword:`with` statement described by :pep:`343`.  I'll look at this new statement\nin the following  section.\n\nAnother even more esoteric effect of this change: previously, the\n:attr:`gi_frame` attribute of a generator was always a frame object. It's now\npossible for :attr:`gi_frame` to be ``None`` once the generator has been\nexhausted.\n\n\n.. seealso::\n\n   :pep:`342` - Coroutines via Enhanced Generators\n      PEP written by  Guido van Rossum and Phillip J. Eby; implemented by Phillip J.\n      Eby.  Includes examples of  some fancier uses of generators as coroutines.\n\n      Earlier versions of these features were proposed in  :pep:`288` by Raymond\n      Hettinger and :pep:`325` by Samuele Pedroni.\n\n   https://en.wikipedia.org/wiki/Coroutine\n      The Wikipedia entry for  coroutines.\n\n   http://www.sidhe.org/~dan/blog/archives/000178.html\n      An explanation of coroutines from a Perl point of view, written by Dan Sugalski.\n\n.. ======================================================================\n\n\n.. _pep-343:\n\nPEP 343: The 'with' statement\n=============================\n\nThe ':keyword:`with`' statement clarifies code that previously would use\n``try...finally`` blocks to ensure that clean-up code is executed.  In this\nsection, I'll discuss the statement as it will commonly be used.  In the next\nsection, I'll examine the implementation details and show how to write objects\nfor use with this statement.\n\nThe ':keyword:`with`' statement is a new control-flow structure whose basic\nstructure is::\n\n   with expression [as variable]:\n       with-block\n\nThe expression is evaluated, and it should result in an object that supports the\ncontext management protocol (that is, has :meth:`__enter__` and :meth:`__exit__`\nmethods.\n\nThe object's :meth:`__enter__` is called before *with-block* is executed and\ntherefore can run set-up code. It also may return a value that is bound to the\nname *variable*, if given.  (Note carefully that *variable* is *not* assigned\nthe result of *expression*.)\n\nAfter execution of the *with-block* is finished, the object's :meth:`__exit__`\nmethod is called, even if the block raised an exception, and can therefore run\nclean-up code.\n\nTo enable the statement in Python 2.5, you need to add the following directive\nto your module::\n\n   from __future__ import with_statement\n\nThe statement will always be enabled in Python 2.6.\n\nSome standard Python objects now support the context management protocol and can\nbe used with the ':keyword:`with`' statement. File objects are one example::\n\n   with open('/etc/passwd', 'r') as f:\n       for line in f:\n           print line\n           ... more processing code ...\n\nAfter this statement has executed, the file object in *f* will have been\nautomatically closed, even if the :keyword:`for` loop raised an exception\npart-way through the block.\n\n.. note::\n\n   In this case, *f* is the same object created by :func:`open`, because\n   :meth:`file.__enter__` returns *self*.\n\nThe :mod:`threading` module's locks and condition variables  also support the\n':keyword:`with`' statement::\n\n   lock = threading.Lock()\n   with lock:\n       # Critical section of code\n       ...\n\nThe lock is acquired before the block is executed and always released once  the\nblock is complete.\n\nThe new :func:`localcontext` function in the :mod:`decimal` module makes it easy\nto save and restore the current decimal context, which encapsulates the desired\nprecision and rounding characteristics for computations::\n\n   from decimal import Decimal, Context, localcontext\n\n   # Displays with default precision of 28 digits\n   v = Decimal('578')\n   print v.sqrt()\n\n   with localcontext(Context(prec=16)):\n       # All code in this block uses a precision of 16 digits.\n       # The original context is restored on exiting the block.\n       print v.sqrt()\n\n\n.. _new-25-context-managers:\n\nWriting Context Managers\n------------------------\n\nUnder the hood, the ':keyword:`with`' statement is fairly complicated. Most\npeople will only use ':keyword:`!with`' in company with existing objects and\ndon't need to know these details, so you can skip the rest of this section if\nyou like.  Authors of new objects will need to understand the details of the\nunderlying implementation and should keep reading.\n\nA high-level explanation of the context management protocol is:\n\n* The expression is evaluated and should result in an object called a \"context\n  manager\".  The context manager must have :meth:`__enter__` and :meth:`__exit__`\n  methods.\n\n* The context manager's :meth:`__enter__` method is called.  The value returned\n  is assigned to *VAR*.  If no ``'as VAR'`` clause is present, the value is simply\n  discarded.\n\n* The code in *BLOCK* is executed.\n\n* If *BLOCK* raises an exception, the ``__exit__(type, value, traceback)``\n  is called with the exception details, the same values returned by\n  :func:`sys.exc_info`.  The method's return value controls whether the exception\n  is re-raised: any false value re-raises the exception, and ``True`` will result\n  in suppressing it.  You'll only rarely want to suppress the exception, because\n  if you do the author of the code containing the ':keyword:`with`' statement will\n  never realize anything went wrong.\n\n* If *BLOCK* didn't raise an exception,  the :meth:`__exit__` method is still\n  called, but *type*, *value*, and *traceback* are all ``None``.\n\nLet's think through an example.  I won't present detailed code but will only\nsketch the methods necessary for a database that supports transactions.\n\n(For people unfamiliar with database terminology: a set of changes to the\ndatabase are grouped into a transaction.  Transactions can be either committed,\nmeaning that all the changes are written into the database, or rolled back,\nmeaning that the changes are all discarded and the database is unchanged.  See\nany database textbook for more information.)\n\nLet's assume there's an object representing a database connection. Our goal will\nbe to let the user write code like this::\n\n   db_connection = DatabaseConnection()\n   with db_connection as cursor:\n       cursor.execute('insert into ...')\n       cursor.execute('delete from ...')\n       # ... more operations ...\n\nThe transaction should be committed if the code in the block runs flawlessly or\nrolled back if there's an exception. Here's the basic interface for\n:class:`DatabaseConnection` that I'll assume::\n\n   class DatabaseConnection:\n       # Database interface\n       def cursor (self):\n           \"Returns a cursor object and starts a new transaction\"\n       def commit (self):\n           \"Commits current transaction\"\n       def rollback (self):\n           \"Rolls back current transaction\"\n\nThe :meth:`__enter__` method is pretty easy, having only to start a new\ntransaction.  For this application the resulting cursor object would be a useful\nresult, so the method will return it.  The user can then add ``as cursor`` to\ntheir ':keyword:`with`' statement to bind the cursor to a variable name. ::\n\n   class DatabaseConnection:\n       ...\n       def __enter__ (self):\n           # Code to start a new transaction\n           cursor = self.cursor()\n           return cursor\n\nThe :meth:`__exit__` method is the most complicated because it's where most of\nthe work has to be done.  The method has to check if an exception occurred.  If\nthere was no exception, the transaction is committed.  The transaction is rolled\nback if there was an exception.\n\nIn the code below, execution will just fall off the end of the function,\nreturning the default value of ``None``.  ``None`` is false, so the exception\nwill be re-raised automatically.  If you wished, you could be more explicit and\nadd a :keyword:`return` statement at the marked location. ::\n\n   class DatabaseConnection:\n       ...\n       def __exit__ (self, type, value, tb):\n           if tb is None:\n               # No exception, so commit\n               self.commit()\n           else:\n               # Exception occurred, so rollback.\n               self.rollback()\n               # return False\n\n\n.. _contextlibmod:\n\nThe contextlib module\n---------------------\n\nThe new :mod:`contextlib` module provides some functions and a decorator that\nare useful for writing objects for use with the ':keyword:`with`' statement.\n\nThe decorator is called :func:`contextmanager`, and lets you write a single\ngenerator function instead of defining a new class.  The generator should yield\nexactly one value.  The code up to the :keyword:`yield` will be executed as the\n:meth:`__enter__` method, and the value yielded will be the method's return\nvalue that will get bound to the variable in the ':keyword:`with`' statement's\n:keyword:`!as` clause, if any.  The code after the :keyword:`yield` will be\nexecuted in the :meth:`__exit__` method.  Any exception raised in the block will\nbe raised by the :keyword:`!yield` statement.\n\nOur database example from the previous section could be written  using this\ndecorator as::\n\n   from contextlib import contextmanager\n\n   @contextmanager\n   def db_transaction (connection):\n       cursor = connection.cursor()\n       try:\n           yield cursor\n       except:\n           connection.rollback()\n           raise\n       else:\n           connection.commit()\n\n   db = DatabaseConnection()\n   with db_transaction(db) as cursor:\n       ...\n\nThe :mod:`contextlib` module also has a ``nested(mgr1, mgr2, ...)`` function\nthat combines a number of context managers so you don't need to write nested\n':keyword:`with`' statements.  In this example, the single ':keyword:`!with`'\nstatement both starts a database transaction and acquires a thread lock::\n\n   lock = threading.Lock()\n   with nested (db_transaction(db), lock) as (cursor, locked):\n       ...\n\nFinally, the ``closing(object)`` function returns *object* so that it can be\nbound to a variable, and calls ``object.close`` at the end of the block. ::\n\n   import urllib, sys\n   from contextlib import closing\n\n   with closing(urllib.urlopen('http://www.yahoo.com')) as f:\n       for line in f:\n           sys.stdout.write(line)\n\n\n.. seealso::\n\n   :pep:`343` - The \"with\" statement\n      PEP written by Guido van Rossum and Nick Coghlan; implemented by Mike Bland,\n      Guido van Rossum, and Neal Norwitz.  The PEP shows the code generated for a\n      ':keyword:`with`' statement, which can be helpful in learning how the statement\n      works.\n\n   The documentation  for the :mod:`contextlib` module.\n\n.. ======================================================================\n\n\n.. _pep-352:\n\nPEP 352: Exceptions as New-Style Classes\n========================================\n\nException classes can now be new-style classes, not just classic classes, and\nthe built-in :exc:`Exception` class and all the standard built-in exceptions\n(:exc:`NameError`, :exc:`ValueError`, etc.) are now new-style classes.\n\nThe inheritance hierarchy for exceptions has been rearranged a bit. In 2.5, the\ninheritance relationships are::\n\n   BaseException       # New in Python 2.5\n   |- KeyboardInterrupt\n   |- SystemExit\n   |- Exception\n      |- (all other current built-in exceptions)\n\nThis rearrangement was done because people often want to catch all exceptions\nthat indicate program errors.  :exc:`KeyboardInterrupt` and :exc:`SystemExit`\naren't errors, though, and usually represent an explicit action such as the user\nhitting :kbd:`Control-C` or code calling :func:`sys.exit`.  A bare ``except:`` will\ncatch all exceptions, so you commonly need to list :exc:`KeyboardInterrupt` and\n:exc:`SystemExit` in order to re-raise them.  The usual pattern is::\n\n   try:\n       ...\n   except (KeyboardInterrupt, SystemExit):\n       raise\n   except:\n       # Log error...\n       # Continue running program...\n\nIn Python 2.5, you can now write ``except Exception`` to achieve the same\nresult, catching all the exceptions that usually indicate errors  but leaving\n:exc:`KeyboardInterrupt` and :exc:`SystemExit` alone.  As in previous versions,\na bare ``except:`` still catches all exceptions.\n\nThe goal for Python 3.0 is to require any class raised as an exception to derive\nfrom :exc:`BaseException` or some descendant of :exc:`BaseException`, and future\nreleases in the Python 2.x series may begin to enforce this constraint.\nTherefore, I suggest you begin making all your exception classes derive from\n:exc:`Exception` now.  It's been suggested that the bare ``except:`` form should\nbe removed in Python 3.0, but Guido van Rossum hasn't decided whether to do this\nor not.\n\nRaising of strings as exceptions, as in the statement ``raise \"Error\noccurred\"``, is deprecated in Python 2.5 and will trigger a warning.  The aim is\nto be able to remove the string-exception feature in a few releases.\n\n\n.. seealso::\n\n   :pep:`352` - Required Superclass for Exceptions\n      PEP written by  Brett Cannon and Guido van Rossum; implemented by Brett Cannon.\n\n.. ======================================================================\n\n\n.. _pep-353:\n\nPEP 353: Using ssize_t as the index type\n========================================\n\nA wide-ranging change to Python's C API, using a new  :c:type:`Py_ssize_t` type\ndefinition instead of :c:type:`int`,  will permit the interpreter to handle more\ndata on 64-bit platforms. This change doesn't affect Python's capacity on 32-bit\nplatforms.\n\nVarious pieces of the Python interpreter used C's :c:type:`int` type to store\nsizes or counts; for example, the number of items in a list or tuple were stored\nin an :c:type:`int`.  The C compilers for most 64-bit platforms still define\n:c:type:`int` as a 32-bit type, so that meant that lists could only hold up to\n``2**31 - 1`` = 2147483647 items. (There are actually a few different\nprogramming models that 64-bit C compilers can use -- see\nhttp://www.unix.org/version2/whatsnew/lp64_wp.html for a discussion -- but the\nmost commonly available model leaves :c:type:`int` as 32 bits.)\n\nA limit of 2147483647 items doesn't really matter on a 32-bit platform because\nyou'll run out of memory before hitting the length limit. Each list item\nrequires space for a pointer, which is 4 bytes, plus space for a\n:c:type:`PyObject` representing the item.  2147483647\\*4 is already more bytes\nthan a 32-bit address space can contain.\n\nIt's possible to address that much memory on a 64-bit platform, however.  The\npointers for a list that size would only require 16 GiB of space, so it's not\nunreasonable that Python programmers might construct lists that large.\nTherefore, the Python interpreter had to be changed to use some type other than\n:c:type:`int`, and this will be a 64-bit type on 64-bit platforms.  The change\nwill cause incompatibilities on 64-bit machines, so it was deemed worth making\nthe transition now, while the number of 64-bit users is still relatively small.\n(In 5 or 10 years, we may *all* be on 64-bit machines, and the transition would\nbe more painful then.)\n\nThis change most strongly affects authors of C extension modules.   Python\nstrings and container types such as lists and tuples  now use\n:c:type:`Py_ssize_t` to store their size.   Functions such as\n:c:func:`PyList_Size`  now return :c:type:`Py_ssize_t`.  Code in extension modules\nmay therefore need to have some variables changed to :c:type:`Py_ssize_t`.\n\nThe :c:func:`PyArg_ParseTuple` and :c:func:`Py_BuildValue` functions have a new\nconversion code, ``n``, for :c:type:`Py_ssize_t`.   :c:func:`PyArg_ParseTuple`'s\n``s#`` and ``t#`` still output :c:type:`int` by default, but you can define the\nmacro  :c:macro:`PY_SSIZE_T_CLEAN` before including :file:`Python.h`  to make\nthem return :c:type:`Py_ssize_t`.\n\n:pep:`353` has a section on conversion guidelines that  extension authors should\nread to learn about supporting 64-bit platforms.\n\n\n.. seealso::\n\n   :pep:`353` - Using ssize_t as the index type\n      PEP written and implemented by Martin von L\u00f6wis.\n\n.. ======================================================================\n\n\n.. _pep-357:\n\nPEP 357: The '__index__' method\n===============================\n\nThe NumPy developers had a problem that could only be solved by adding a new\nspecial method, :meth:`__index__`.  When using slice notation, as in\n``[start:stop:step]``, the values of the *start*, *stop*, and *step* indexes\nmust all be either integers or long integers.  NumPy defines a variety of\nspecialized integer types corresponding to unsigned and signed integers of 8,\n16, 32, and 64 bits, but there was no way to signal that these types could be\nused as slice indexes.\n\nSlicing can't just use the existing :meth:`__int__` method because that method\nis also used to implement coercion to integers.  If slicing used\n:meth:`__int__`, floating-point numbers would also become legal slice indexes\nand that's clearly an undesirable behaviour.\n\nInstead, a new special method called :meth:`__index__` was added.  It takes no\narguments and returns an integer giving the slice index to use.  For example::\n\n   class C:\n       def __index__ (self):\n           return self.value\n\nThe return value must be either a Python integer or long integer. The\ninterpreter will check that the type returned is correct, and raises a\n:exc:`TypeError` if this requirement isn't met.\n\nA corresponding :attr:`nb_index` slot was added to the C-level\n:c:type:`PyNumberMethods` structure to let C extensions implement this protocol.\n``PyNumber_Index(obj)`` can be used in extension code to call the\n:meth:`__index__` function and retrieve its result.\n\n\n.. seealso::\n\n   :pep:`357` - Allowing Any Object to be Used for Slicing\n      PEP written  and implemented by Travis Oliphant.\n\n.. ======================================================================\n\n\n.. _other-lang:\n\nOther Language Changes\n======================\n\nHere are all of the changes that Python 2.5 makes to the core Python language.\n\n* The :class:`dict` type has a new hook for letting subclasses provide a default\n  value when a key isn't contained in the dictionary. When a key isn't found, the\n  dictionary's ``__missing__(key)`` method will be called.  This hook is used\n  to implement the new :class:`defaultdict` class in the :mod:`collections`\n  module.  The following example defines a dictionary  that returns zero for any\n  missing key::\n\n     class zerodict (dict):\n         def __missing__ (self, key):\n             return 0\n\n     d = zerodict({1:1, 2:2})\n     print d[1], d[2]   # Prints 1, 2\n     print d[3], d[4]   # Prints 0, 0\n\n* Both 8-bit and Unicode strings have new ``partition(sep)``  and\n  ``rpartition(sep)`` methods that simplify a common use case.\n\n  The ``find(S)`` method is often used to get an index which is then used to\n  slice the string and obtain the pieces that are before and after the separator.\n  ``partition(sep)`` condenses this pattern into a single method call that\n  returns a 3-tuple containing the substring before the separator, the separator\n  itself, and the substring after the separator.  If the separator isn't found,\n  the first element of the tuple is the entire string and the other two elements\n  are empty.  ``rpartition(sep)`` also returns a 3-tuple but starts searching\n  from the end of the string; the ``r`` stands for 'reverse'.\n\n  Some examples::\n\n     >>> ('http://www.python.org').partition('://')\n     ('http', '://', 'www.python.org')\n     >>> ('file:/usr/share/doc/index.html').partition('://')\n     ('file:/usr/share/doc/index.html', '', '')\n     >>> (u'Subject: a quick question').partition(':')\n     (u'Subject', u':', u' a quick question')\n     >>> 'www.python.org'.rpartition('.')\n     ('www.python', '.', 'org')\n     >>> 'www.python.org'.rpartition(':')\n     ('', '', 'www.python.org')\n\n  (Implemented by Fredrik Lundh following a suggestion by Raymond Hettinger.)\n\n* The :meth:`startswith` and :meth:`endswith` methods of string types now accept\n  tuples of strings to check for. ::\n\n     def is_image_file (filename):\n         return filename.endswith(('.gif', '.jpg', '.tiff'))\n\n  (Implemented by Georg Brandl following a suggestion by Tom Lynn.)\n\n  .. RFE #1491485\n\n* The :func:`min` and :func:`max` built-in functions gained a ``key`` keyword\n  parameter analogous to the ``key`` argument for :meth:`sort`.  This parameter\n  supplies a function that takes a single argument and is called for every value\n  in the list; :func:`min`/:func:`max` will return the element with the\n  smallest/largest return value from this function. For example, to find the\n  longest string in a list, you can do::\n\n     L = ['medium', 'longest', 'short']\n     # Prints 'longest'\n     print max(L, key=len)\n     # Prints 'short', because lexicographically 'short' has the largest value\n     print max(L)\n\n  (Contributed by Steven Bethard and Raymond Hettinger.)\n\n* Two new built-in functions, :func:`any` and :func:`all`, evaluate whether an\n  iterator contains any true or false values.  :func:`any` returns :const:`True`\n  if any value returned by the iterator is true; otherwise it will return\n  :const:`False`.  :func:`all` returns :const:`True` only if all of the values\n  returned by the iterator evaluate as true. (Suggested by Guido van Rossum, and\n  implemented by Raymond Hettinger.)\n\n* The result of a class's :meth:`__hash__` method can now be either a long\n  integer or a regular integer.  If a long integer is returned, the hash of that\n  value is taken.  In earlier versions the hash value was required to be a\n  regular integer, but in 2.5 the :func:`id` built-in was changed to always\n  return non-negative numbers, and users often seem to use ``id(self)`` in\n  :meth:`__hash__` methods (though this is discouraged).\n\n  .. Bug #1536021\n\n* ASCII is now the default encoding for modules.  It's now  a syntax error if a\n  module contains string literals with 8-bit characters but doesn't have an\n  encoding declaration.  In Python 2.4 this triggered a warning, not a syntax\n  error.  See :pep:`263`  for how to declare a module's encoding; for example, you\n  might add  a line like this near the top of the source file::\n\n     # -*- coding: latin1 -*-\n\n* A new warning, :class:`UnicodeWarning`, is triggered when  you attempt to\n  compare a Unicode string and an 8-bit string  that can't be converted to Unicode\n  using the default ASCII encoding.   The result of the comparison is false::\n\n     >>> chr(128) == unichr(128)   # Can't convert chr(128) to Unicode\n     __main__:1: UnicodeWarning: Unicode equal comparison failed\n       to convert both arguments to Unicode - interpreting them\n       as being unequal\n     False\n     >>> chr(127) == unichr(127)   # chr(127) can be converted\n     True\n\n  Previously this would raise a :class:`UnicodeDecodeError` exception, but in 2.5\n  this could result in puzzling problems when accessing a dictionary.  If you\n  looked up ``unichr(128)`` and ``chr(128)`` was being used as a key, you'd get a\n  :class:`UnicodeDecodeError` exception.  Other changes in 2.5 resulted in this\n  exception being raised instead of suppressed by the code in :file:`dictobject.c`\n  that implements dictionaries.\n\n  Raising an exception for such a comparison is strictly correct, but the change\n  might have broken code, so instead  :class:`UnicodeWarning` was introduced.\n\n  (Implemented by Marc-Andr\u00e9 Lemburg.)\n\n* One error that Python programmers sometimes make is forgetting to include an\n  :file:`__init__.py` module in a package directory. Debugging this mistake can be\n  confusing, and usually requires running Python with the :option:`-v` switch to\n  log all the paths searched. In Python 2.5, a new :exc:`ImportWarning` warning is\n  triggered when an import would have picked up a directory as a package but no\n  :file:`__init__.py` was found.  This warning is silently ignored by default;\n  provide the :option:`-Wd <-W>` option when running the Python executable to display\n  the warning message. (Implemented by Thomas Wouters.)\n\n* The list of base classes in a class definition can now be empty.   As an\n  example, this is now legal::\n\n     class C():\n         pass\n\n  (Implemented by Brett Cannon.)\n\n.. ======================================================================\n\n\n.. _25interactive:\n\nInteractive Interpreter Changes\n-------------------------------\n\nIn the interactive interpreter, ``quit`` and ``exit``  have long been strings so\nthat new users get a somewhat helpful message when they try to quit::\n\n   >>> quit\n   'Use Ctrl-D (i.e. EOF) to exit.'\n\nIn Python 2.5, ``quit`` and ``exit`` are now objects that still produce string\nrepresentations of themselves, but are also callable. Newbies who try ``quit()``\nor ``exit()`` will now exit the interpreter as they expect.  (Implemented by\nGeorg Brandl.)\n\nThe Python executable now accepts the standard long options  :option:`--help`\nand :option:`--version`; on Windows,  it also accepts the :option:`/? <-?>` option\nfor displaying a help message. (Implemented by Georg Brandl.)\n\n.. ======================================================================\n\n\n.. _opts:\n\nOptimizations\n-------------\n\nSeveral of the optimizations were developed at the NeedForSpeed sprint, an event\nheld in Reykjavik, Iceland, from May 21--28 2006. The sprint focused on speed\nenhancements to the CPython implementation and was funded by EWT LLC with local\nsupport from CCP Games.  Those optimizations added at this sprint are specially\nmarked in the following list.\n\n* When they were introduced  in Python 2.4, the built-in :class:`set` and\n  :class:`frozenset` types were built on top of Python's dictionary type.   In 2.5\n  the internal data structure has been customized for implementing sets, and as a\n  result sets will use a third less memory and are somewhat faster. (Implemented\n  by Raymond Hettinger.)\n\n* The speed of some Unicode operations, such as finding substrings, string\n  splitting, and character map encoding and decoding, has been improved.\n  (Substring search and splitting improvements were added by Fredrik Lundh and\n  Andrew Dalke at the NeedForSpeed sprint. Character maps were improved by Walter\n  D\u00f6rwald and Martin von L\u00f6wis.)\n\n  .. Patch 1313939, 1359618\n\n* The ``long(str, base)`` function is now faster on long digit strings\n  because fewer intermediate results are calculated.  The peak is for strings of\n  around 800--1000 digits where  the function is 6 times faster. (Contributed by\n  Alan McIntyre and committed at the NeedForSpeed sprint.)\n\n  .. Patch 1442927\n\n* It's now illegal to mix iterating over a file  with ``for line in file`` and\n  calling  the file object's :meth:`read`/:meth:`readline`/:meth:`readlines`\n  methods.  Iteration uses an internal buffer and the  :meth:`read\\*` methods\n  don't use that buffer.   Instead they would return the data following the\n  buffer, causing the data to appear out of order.  Mixing iteration and these\n  methods will now trigger a :exc:`ValueError` from the :meth:`read\\*` method.\n  (Implemented by Thomas Wouters.)\n\n  .. Patch 1397960\n\n* The :mod:`struct` module now compiles structure format  strings into an\n  internal representation and caches this representation, yielding a 20% speedup.\n  (Contributed by Bob Ippolito at the NeedForSpeed sprint.)\n\n* The :mod:`re` module got a 1 or 2% speedup by switching to  Python's allocator\n  functions instead of the system's  :c:func:`malloc` and :c:func:`free`.\n  (Contributed by Jack Diederich at the NeedForSpeed sprint.)\n\n* The code generator's peephole optimizer now performs simple constant folding\n  in expressions.  If you write something like ``a = 2+3``, the code generator\n  will do the arithmetic and produce code corresponding to ``a = 5``.  (Proposed\n  and implemented  by Raymond Hettinger.)\n\n* Function calls are now faster because code objects now keep  the most recently\n  finished frame (a \"zombie frame\") in an internal field of the code object,\n  reusing it the next time the code object is invoked.  (Original patch by Michael\n  Hudson, modified by Armin Rigo and Richard Jones; committed at the NeedForSpeed\n  sprint.)  Frame objects are also slightly smaller, which may improve cache\n  locality and reduce memory usage a bit.  (Contributed by Neal Norwitz.)\n\n  .. Patch 876206\n  .. Patch 1337051\n\n* Python's built-in exceptions are now new-style classes, a change that speeds\n  up instantiation considerably.  Exception handling in Python 2.5 is therefore\n  about 30% faster than in 2.4. (Contributed by Richard Jones, Georg Brandl and\n  Sean Reifschneider at the NeedForSpeed sprint.)\n\n* Importing now caches the paths tried, recording whether  they exist or not so\n  that the interpreter makes fewer  :c:func:`open` and :c:func:`stat` calls on\n  startup. (Contributed by Martin von L\u00f6wis and Georg Brandl.)\n\n  .. Patch 921466\n\n.. ======================================================================\n\n\n.. _25modules:\n\nNew, Improved, and Removed Modules\n==================================\n\nThe standard library received many enhancements and bug fixes in Python 2.5.\nHere's a partial list of the most notable changes, sorted alphabetically by\nmodule name. Consult the :file:`Misc/NEWS` file in the source tree for a more\ncomplete list of changes, or look through the SVN logs for all the details.\n\n* The :mod:`audioop` module now supports the a-LAW encoding, and the code for\n  u-LAW encoding has been improved.  (Contributed by Lars Immisch.)\n\n* The :mod:`codecs` module gained support for incremental codecs.  The\n  :func:`codec.lookup` function now returns a :class:`CodecInfo` instance instead\n  of a tuple. :class:`CodecInfo` instances behave like a 4-tuple to preserve\n  backward compatibility but also have the attributes :attr:`encode`,\n  :attr:`decode`, :attr:`incrementalencoder`, :attr:`incrementaldecoder`,\n  :attr:`streamwriter`, and :attr:`streamreader`.  Incremental codecs  can receive\n  input and produce output in multiple chunks; the output is the same as if the\n  entire input was fed to the non-incremental codec. See the :mod:`codecs` module\n  documentation for details. (Designed and implemented by Walter D\u00f6rwald.)\n\n  .. Patch  1436130\n\n* The :mod:`collections` module gained a new type, :class:`defaultdict`, that\n  subclasses the standard :class:`dict` type.  The new type mostly behaves like a\n  dictionary but constructs a default value when a key isn't present,\n  automatically adding it to the dictionary for the requested key value.\n\n  The first argument to :class:`defaultdict`'s constructor is a factory function\n  that gets called whenever a key is requested but not found. This factory\n  function receives no arguments, so you can use built-in type constructors such\n  as :func:`list` or :func:`int`.  For example,  you can make an index of words\n  based on their initial letter like this::\n\n     words = \"\"\"Nel mezzo del cammin di nostra vita\n     mi ritrovai per una selva oscura\n     che la diritta via era smarrita\"\"\".lower().split()\n\n     index = defaultdict(list)\n\n     for w in words:\n         init_letter = w[0]\n         index[init_letter].append(w)\n\n  Printing ``index`` results in the following output::\n\n     defaultdict(<type 'list'>, {'c': ['cammin', 'che'], 'e': ['era'],\n             'd': ['del', 'di', 'diritta'], 'm': ['mezzo', 'mi'],\n             'l': ['la'], 'o': ['oscura'], 'n': ['nel', 'nostra'],\n             'p': ['per'], 's': ['selva', 'smarrita'],\n             'r': ['ritrovai'], 'u': ['una'], 'v': ['vita', 'via']}\n\n  (Contributed by Guido van Rossum.)\n\n* The :class:`deque` double-ended queue type supplied by the :mod:`collections`\n  module now has a ``remove(value)`` method that removes the first occurrence\n  of *value* in the queue, raising :exc:`ValueError` if the value isn't found.\n  (Contributed by Raymond Hettinger.)\n\n* New module: The :mod:`contextlib` module contains helper functions for use\n  with the new ':keyword:`with`' statement.  See section :ref:`contextlibmod`\n  for more about this module.\n\n* New module: The :mod:`cProfile` module is a C implementation of  the existing\n  :mod:`profile` module that has much lower overhead. The module's interface is\n  the same as :mod:`profile`: you run ``cProfile.run('main()')`` to profile a\n  function, can save profile data to a file, etc.  It's not yet known if the\n  Hotshot profiler, which is also written in C but doesn't match the\n  :mod:`profile` module's interface, will continue to be maintained in future\n  versions of Python.  (Contributed by Armin Rigo.)\n\n  Also, the :mod:`pstats` module for analyzing the data measured by the profiler\n  now supports directing the output to any file object by supplying a *stream*\n  argument to the :class:`Stats` constructor. (Contributed by Skip Montanaro.)\n\n* The :mod:`csv` module, which parses files in comma-separated value format,\n  received several enhancements and a number of bugfixes.  You can now set the\n  maximum size in bytes of a field by calling the\n  ``csv.field_size_limit(new_limit)`` function; omitting the *new_limit*\n  argument will return the currently-set limit.  The :class:`reader` class now has\n  a :attr:`line_num` attribute that counts the number of physical lines read from\n  the source; records can span multiple physical lines, so :attr:`line_num` is not\n  the same as the number of records read.\n\n  The CSV parser is now stricter about multi-line quoted fields. Previously, if a\n  line ended within a quoted field without a terminating newline character, a\n  newline would be inserted into the returned field. This behavior caused problems\n  when reading files that contained carriage return characters within fields, so\n  the code was changed to return the field without inserting newlines. As a\n  consequence, if newlines embedded within fields are important, the input should\n  be split into lines in a manner that preserves the newline characters.\n\n  (Contributed by Skip Montanaro and Andrew McNamara.)\n\n* The :class:`~datetime.datetime` class in the :mod:`datetime`  module now has a\n  ``strptime(string, format)``  method for parsing date strings, contributed\n  by Josh Spoerri. It uses the same format characters as :func:`time.strptime` and\n  :func:`time.strftime`::\n\n     from datetime import datetime\n\n     ts = datetime.strptime('10:13:15 2006-03-07',\n                            '%H:%M:%S %Y-%m-%d')\n\n* The :meth:`SequenceMatcher.get_matching_blocks` method in the :mod:`difflib`\n  module now guarantees to return a minimal list of blocks describing matching\n  subsequences.  Previously, the algorithm would occasionally break a block of\n  matching elements into two list entries. (Enhancement by Tim Peters.)\n\n* The :mod:`doctest` module gained a ``SKIP`` option that keeps an example from\n  being executed at all.  This is intended for code snippets that are usage\n  examples intended for the reader and aren't actually test cases.\n\n  An *encoding* parameter was added to the :func:`testfile` function and the\n  :class:`DocFileSuite` class to specify the file's encoding.  This makes it\n  easier to use non-ASCII characters in  tests contained within a docstring.\n  (Contributed by Bjorn Tillenius.)\n\n  .. Patch 1080727\n\n* The :mod:`email` package has been updated to version 4.0. (Contributed by\n  Barry Warsaw.)\n\n  .. XXX need to provide some more detail here\n\n  .. index::\n     single: universal newlines; What's new\n\n* The :mod:`fileinput` module was made more flexible. Unicode filenames are now\n  supported, and a *mode* parameter that defaults to ``\"r\"`` was added to the\n  :func:`input` function to allow opening files in binary or :term:`universal\n  newlines` mode.  Another new parameter, *openhook*, lets you use a function\n  other than :func:`open`  to open the input files.  Once you're iterating over\n  the set of files, the :class:`FileInput` object's new :meth:`fileno` returns\n  the file descriptor for the currently opened file. (Contributed by Georg\n  Brandl.)\n\n* In the :mod:`gc` module, the new :func:`get_count` function returns a 3-tuple\n  containing the current collection counts for the three GC generations.  This is\n  accounting information for the garbage collector; when these counts reach a\n  specified threshold, a garbage collection sweep will be made.  The existing\n  :func:`gc.collect` function now takes an optional *generation* argument of 0, 1,\n  or 2 to specify which generation to collect. (Contributed by Barry Warsaw.)\n\n* The :func:`nsmallest` and  :func:`nlargest` functions in the :mod:`heapq`\n  module  now support a ``key`` keyword parameter similar to the one provided by\n  the :func:`min`/:func:`max` functions and the :meth:`sort` methods.  For\n  example::\n\n     >>> import heapq\n     >>> L = [\"short\", 'medium', 'longest', 'longer still']\n     >>> heapq.nsmallest(2, L)  # Return two lowest elements, lexicographically\n     ['longer still', 'longest']\n     >>> heapq.nsmallest(2, L, key=len)   # Return two shortest elements\n     ['short', 'medium']\n\n  (Contributed by Raymond Hettinger.)\n\n* The :func:`itertools.islice` function now accepts ``None`` for the start and\n  step arguments.  This makes it more compatible with the attributes of slice\n  objects, so that you can now write the following::\n\n     s = slice(5)     # Create slice object\n     itertools.islice(iterable, s.start, s.stop, s.step)\n\n  (Contributed by Raymond Hettinger.)\n\n* The :func:`format` function in the :mod:`locale` module has been modified and\n  two new functions were added, :func:`format_string` and :func:`currency`.\n\n  The :func:`format` function's *val* parameter could previously be a string as\n  long as no more than one %char specifier appeared; now the parameter must be\n  exactly one %char specifier with no surrounding text.  An optional *monetary*\n  parameter was also added which, if ``True``, will use the locale's rules for\n  formatting currency in placing a separator between groups of three digits.\n\n  To format strings with multiple %char specifiers, use the new\n  :func:`format_string` function that works like :func:`format` but also supports\n  mixing %char specifiers with arbitrary text.\n\n  A new :func:`currency` function was also added that formats a number according\n  to the current locale's settings.\n\n  (Contributed by Georg Brandl.)\n\n  .. Patch 1180296\n\n* The :mod:`mailbox` module underwent a massive rewrite to add the capability to\n  modify mailboxes in addition to reading them.  A new set of classes that include\n  :class:`mbox`, :class:`MH`, and :class:`Maildir` are used to read mailboxes, and\n  have an ``add(message)`` method to add messages, ``remove(key)`` to\n  remove messages, and :meth:`lock`/:meth:`unlock` to lock/unlock the mailbox.\n  The following example converts a maildir-format mailbox into an mbox-format\n  one::\n\n     import mailbox\n\n     # 'factory=None' uses email.Message.Message as the class representing\n     # individual messages.\n     src = mailbox.Maildir('maildir', factory=None)\n     dest = mailbox.mbox('/tmp/mbox')\n\n     for msg in src:\n         dest.add(msg)\n\n  (Contributed by Gregory K. Johnson.  Funding was provided by Google's 2005\n  Summer of Code.)\n\n* New module: the :mod:`msilib` module allows creating Microsoft Installer\n  :file:`.msi` files and CAB files.  Some support for reading the :file:`.msi`\n  database is also included. (Contributed by Martin von L\u00f6wis.)\n\n* The :mod:`nis` module now supports accessing domains other than the system\n  default domain by supplying a *domain* argument to the :func:`nis.match` and\n  :func:`nis.maps` functions. (Contributed by Ben Bell.)\n\n* The :mod:`operator` module's :func:`itemgetter`  and :func:`attrgetter`\n  functions now support multiple fields.   A call such as\n  ``operator.attrgetter('a', 'b')`` will return a function  that retrieves the\n  :attr:`a` and :attr:`b` attributes.  Combining  this new feature with the\n  :meth:`sort` method's ``key`` parameter  lets you easily sort lists using\n  multiple fields. (Contributed by Raymond Hettinger.)\n\n* The :mod:`optparse` module was updated to version 1.5.1 of the Optik library.\n  The :class:`OptionParser` class gained an :attr:`epilog` attribute, a string\n  that will be printed after the help message, and a :meth:`destroy` method to\n  break reference cycles created by the object. (Contributed by Greg Ward.)\n\n* The :mod:`os` module underwent several changes.  The :attr:`stat_float_times`\n  variable now defaults to true, meaning that :func:`os.stat` will now return time\n  values as floats.  (This doesn't necessarily mean that :func:`os.stat` will\n  return times that are precise to fractions of a second; not all systems support\n  such precision.)\n\n  Constants named :attr:`os.SEEK_SET`, :attr:`os.SEEK_CUR`, and\n  :attr:`os.SEEK_END` have been added; these are the parameters to the\n  :func:`os.lseek` function.  Two new constants for locking are\n  :attr:`os.O_SHLOCK` and :attr:`os.O_EXLOCK`.\n\n  Two new functions, :func:`wait3` and :func:`wait4`, were added.  They're similar\n  the :func:`waitpid` function which waits for a child process to exit and returns\n  a tuple of the process ID and its exit status, but :func:`wait3` and\n  :func:`wait4` return additional information.  :func:`wait3` doesn't take a\n  process ID as input, so it waits for any child process to exit and returns a\n  3-tuple of *process-id*, *exit-status*, *resource-usage* as returned from the\n  :func:`resource.getrusage` function. ``wait4(pid)`` does take a process ID.\n  (Contributed by Chad J. Schroeder.)\n\n  On FreeBSD, the :func:`os.stat` function now returns  times with nanosecond\n  resolution, and the returned object now has :attr:`st_gen` and\n  :attr:`st_birthtime`. The :attr:`st_flags` attribute is also available, if the\n  platform supports it. (Contributed by Antti Louko and  Diego Petten\u00f2.)\n\n  .. (Patch 1180695, 1212117)\n\n* The Python debugger provided by the :mod:`pdb` module can now store lists of\n  commands to execute when a breakpoint is reached and execution stops.  Once\n  breakpoint #1 has been created, enter ``commands 1`` and enter a series of\n  commands to be executed, finishing the list with ``end``.  The command list can\n  include commands that resume execution, such as ``continue`` or ``next``.\n  (Contributed by Gr\u00e9goire Dooms.)\n\n  .. Patch 790710\n\n* The :mod:`pickle` and :mod:`cPickle` modules no longer accept a return value\n  of ``None`` from the :meth:`__reduce__` method; the method must return a tuple\n  of arguments instead.  The ability to return ``None`` was deprecated in Python\n  2.4, so this completes the removal of the feature.\n\n* The :mod:`pkgutil` module, containing various utility functions for finding\n  packages, was enhanced to support :pep:`302`'s import hooks and now also works for\n  packages stored in ZIP-format archives. (Contributed by Phillip J. Eby.)\n\n* The pybench benchmark suite by Marc-Andr\u00e9 Lemburg is now included in the\n  :file:`Tools/pybench` directory.  The pybench suite is an improvement on the\n  commonly used :file:`pystone.py` program because pybench provides a more\n  detailed measurement of the interpreter's speed.  It times particular operations\n  such as function calls, tuple slicing, method lookups, and numeric operations,\n  instead of performing many different operations and reducing the result to a\n  single number as :file:`pystone.py` does.\n\n* The :mod:`pyexpat` module now uses version 2.0 of the Expat parser.\n  (Contributed by Trent Mick.)\n\n* The :class:`~queue.Queue` class provided by the :mod:`Queue` module gained two new\n  methods.  :meth:`join` blocks until all items in the queue have been retrieved\n  and all processing work on the items  have been completed.  Worker threads call\n  the other new method,  :meth:`task_done`, to signal that processing for an item\n  has been completed.  (Contributed by Raymond Hettinger.)\n\n* The old :mod:`regex` and :mod:`regsub` modules, which have been  deprecated\n  ever since Python 2.0, have finally been deleted.   Other deleted modules:\n  :mod:`statcache`, :mod:`tzparse`, :mod:`whrandom`.\n\n* Also deleted: the :file:`lib-old` directory, which includes ancient modules\n  such as :mod:`dircmp` and :mod:`ni`, was removed.  :file:`lib-old` wasn't on the\n  default ``sys.path``, so unless your programs explicitly added the directory to\n  ``sys.path``, this removal shouldn't affect your code.\n\n* The :mod:`rlcompleter` module is no longer  dependent on importing the\n  :mod:`readline` module and therefore now works on non-Unix platforms. (Patch\n  from Robert Kiendl.)\n\n  .. Patch #1472854\n\n* The :mod:`SimpleXMLRPCServer` and :mod:`DocXMLRPCServer`  classes now have a\n  :attr:`rpc_paths` attribute that constrains XML-RPC operations to a limited set\n  of URL paths; the default is to allow only ``'/'`` and ``'/RPC2'``.  Setting\n  :attr:`rpc_paths` to ``None`` or an empty tuple disables  this path checking.\n\n  .. Bug #1473048\n\n* The :mod:`socket` module now supports :const:`AF_NETLINK` sockets on Linux,\n  thanks to a patch from Philippe Biondi.   Netlink sockets are a Linux-specific\n  mechanism for communications between a user-space process and kernel code; an\n  introductory  article about them is at https://www.linuxjournal.com/article/7356.\n  In Python code, netlink addresses are represented as a tuple of 2 integers,\n  ``(pid, group_mask)``.\n\n  Two new methods on socket objects, ``recv_into(buffer)`` and\n  ``recvfrom_into(buffer)``, store the received data in an object  that\n  supports the buffer protocol instead of returning the data as a string.  This\n  means you can put the data directly into an array or a memory-mapped file.\n\n  Socket objects also gained :meth:`getfamily`, :meth:`gettype`, and\n  :meth:`getproto` accessor methods to retrieve the family, type, and protocol\n  values for the socket.\n\n* New module: the :mod:`spwd` module provides functions for accessing the shadow\n  password database on systems that support  shadow passwords.\n\n* The :mod:`struct` is now faster because it  compiles format strings into\n  :class:`Struct` objects with :meth:`pack` and :meth:`unpack` methods.  This is\n  similar to how the :mod:`re` module lets you create compiled regular expression\n  objects.  You can still use the module-level  :func:`pack` and :func:`unpack`\n  functions; they'll create  :class:`Struct` objects and cache them.  Or you can\n  use  :class:`Struct` instances directly::\n\n     s = struct.Struct('ih3s')\n\n     data = s.pack(1972, 187, 'abc')\n     year, number, name = s.unpack(data)\n\n  You can also pack and unpack data to and from buffer objects directly using the\n  ``pack_into(buffer, offset, v1, v2, ...)`` and ``unpack_from(buffer,\n  offset)`` methods.  This lets you store data directly into an array or a\n  memory-mapped file.\n\n  (:class:`Struct` objects were implemented by Bob Ippolito at the NeedForSpeed\n  sprint.  Support for buffer objects was added by Martin Blais, also at the\n  NeedForSpeed sprint.)\n\n* The Python developers switched from CVS to Subversion during the 2.5\n  development process.  Information about the exact build version is available as\n  the ``sys.subversion`` variable, a 3-tuple of ``(interpreter-name, branch-name,\n  revision-range)``.  For example, at the time of writing my copy of 2.5 was\n  reporting ``('CPython', 'trunk', '45313:45315')``.\n\n  This information is also available to C extensions via the\n  :c:func:`Py_GetBuildInfo` function that returns a  string of build information\n  like this: ``\"trunk:45355:45356M, Apr 13 2006, 07:42:19\"``.   (Contributed by\n  Barry Warsaw.)\n\n* Another new function, :func:`sys._current_frames`, returns the current stack\n  frames for all running threads as a dictionary mapping thread identifiers to the\n  topmost stack frame currently active in that thread at the time the function is\n  called.  (Contributed by Tim Peters.)\n\n* The :class:`TarFile` class in the :mod:`tarfile` module now has an\n  :meth:`extractall` method that extracts all members from the archive into the\n  current working directory.  It's also possible to set a different directory as\n  the extraction target, and to unpack only a subset of the archive's members.\n\n  The compression used for a tarfile opened in stream mode can now be autodetected\n  using the mode ``'r|*'``. (Contributed by Lars Gust\u00e4bel.)\n\n  .. patch 918101\n\n* The :mod:`threading` module now lets you set the stack size used when new\n  threads are created. The ``stack_size([*size*])`` function returns the\n  currently configured stack size, and supplying the optional *size* parameter\n  sets a new value.  Not all platforms support changing the stack size, but\n  Windows, POSIX threading, and OS/2 all do. (Contributed by Andrew MacIntyre.)\n\n  .. Patch 1454481\n\n* The :mod:`unicodedata` module has been updated to use version 4.1.0 of the\n  Unicode character database.  Version 3.2.0 is required  by some specifications,\n  so it's still available as  :attr:`unicodedata.ucd_3_2_0`.\n\n* New module: the  :mod:`uuid` module generates  universally unique identifiers\n  (UUIDs) according to :rfc:`4122`.  The RFC defines several different UUID\n  versions that are generated from a starting string, from system properties, or\n  purely randomly.  This module contains a :class:`UUID` class and  functions\n  named :func:`uuid1`, :func:`uuid3`, :func:`uuid4`,  and  :func:`uuid5` to\n  generate different versions of UUID.  (Version 2 UUIDs  are not specified in\n  :rfc:`4122` and are not supported by this module.) ::\n\n     >>> import uuid\n     >>> # make a UUID based on the host ID and current time\n     >>> uuid.uuid1()\n     UUID('a8098c1a-f86e-11da-bd1a-00112444be1e')\n\n     >>> # make a UUID using an MD5 hash of a namespace UUID and a name\n     >>> uuid.uuid3(uuid.NAMESPACE_DNS, 'python.org')\n     UUID('6fa459ea-ee8a-3ca4-894e-db77e160355e')\n\n     >>> # make a random UUID\n     >>> uuid.uuid4()\n     UUID('16fd2706-8baf-433b-82eb-8c7fada847da')\n\n     >>> # make a UUID using a SHA-1 hash of a namespace UUID and a name\n     >>> uuid.uuid5(uuid.NAMESPACE_DNS, 'python.org')\n     UUID('886313e1-3b8a-5372-9b90-0c9aee199e5d')\n\n  (Contributed by Ka-Ping Yee.)\n\n* The :mod:`weakref` module's :class:`WeakKeyDictionary` and\n  :class:`WeakValueDictionary` types gained new methods for iterating over the\n  weak references contained in the dictionary.  :meth:`iterkeyrefs` and\n  :meth:`keyrefs` methods were added to :class:`WeakKeyDictionary`, and\n  :meth:`itervaluerefs` and :meth:`valuerefs` were added to\n  :class:`WeakValueDictionary`.  (Contributed by Fred L. Drake, Jr.)\n\n* The :mod:`webbrowser` module received a number of enhancements. It's now\n  usable as a script with ``python -m webbrowser``, taking a URL as the argument;\n  there are a number of switches  to control the behaviour (:option:`!-n` for a new\n  browser window,  :option:`!-t` for a new tab).  New module-level functions,\n  :func:`open_new` and :func:`open_new_tab`, were added  to support this.  The\n  module's :func:`open` function supports an additional feature, an *autoraise*\n  parameter that signals whether to raise the open window when possible. A number\n  of additional browsers were added to the supported list such as Firefox, Opera,\n  Konqueror, and elinks.  (Contributed by Oleg Broytmann and Georg Brandl.)\n\n  .. Patch #754022\n\n* The :mod:`xmlrpclib` module now supports returning  :class:`~datetime.datetime` objects\n  for the XML-RPC date type.  Supply  ``use_datetime=True`` to the :func:`loads`\n  function or the :class:`Unmarshaller` class to enable this feature. (Contributed\n  by Skip Montanaro.)\n\n  .. Patch 1120353\n\n* The :mod:`zipfile` module now supports the ZIP64 version of the  format,\n  meaning that a .zip archive can now be larger than 4 GiB and can contain\n  individual files larger than 4 GiB.  (Contributed by Ronald Oussoren.)\n\n  .. Patch 1446489\n\n* The :mod:`zlib` module's :class:`Compress` and :class:`Decompress` objects now\n  support a :meth:`copy` method that makes a copy of the  object's internal state\n  and returns a new  :class:`Compress` or :class:`Decompress` object.\n  (Contributed by Chris AtLee.)\n\n  .. Patch 1435422\n\n.. ======================================================================\n\n\n.. _module-ctypes:\n\nThe ctypes package\n------------------\n\nThe :mod:`ctypes` package, written by Thomas Heller, has been added  to the\nstandard library.  :mod:`ctypes` lets you call arbitrary functions  in shared\nlibraries or DLLs.  Long-time users may remember the :mod:`dl` module, which\nprovides functions for loading shared libraries and calling functions in them.\nThe :mod:`ctypes` package is much fancier.\n\nTo load a shared library or DLL, you must create an instance of the\n:class:`CDLL` class and provide the name or path of the shared library or DLL.\nOnce that's done, you can call arbitrary functions by accessing them as\nattributes of the :class:`CDLL` object.   ::\n\n   import ctypes\n\n   libc = ctypes.CDLL('libc.so.6')\n   result = libc.printf(\"Line of output\\n\")\n\nType constructors for the various C types are provided: :func:`c_int`,\n:func:`c_float`, :func:`c_double`, :func:`c_char_p` (equivalent to :c:type:`char\n\\*`), and so forth.  Unlike Python's types, the C versions are all mutable; you\ncan assign to their :attr:`value` attribute to change the wrapped value.  Python\nintegers and strings will be automatically converted to the corresponding C\ntypes, but for other types you  must call the correct type constructor.  (And I\nmean *must*;  getting it wrong will often result in the interpreter crashing\nwith a segmentation fault.)\n\nYou shouldn't use :func:`c_char_p` with a Python string when the C function will\nbe modifying the memory area, because Python strings are  supposed to be\nimmutable; breaking this rule will cause puzzling bugs.  When you need a\nmodifiable memory area, use :func:`create_string_buffer`::\n\n   s = \"this is a string\"\n   buf = ctypes.create_string_buffer(s)\n   libc.strfry(buf)\n\nC functions are assumed to return integers, but you can set the :attr:`restype`\nattribute of the function object to  change this::\n\n   >>> libc.atof('2.71828')\n   -1783957616\n   >>> libc.atof.restype = ctypes.c_double\n   >>> libc.atof('2.71828')\n   2.71828\n\n:mod:`ctypes` also provides a wrapper for Python's C API  as the\n``ctypes.pythonapi`` object.  This object does *not*  release the global\ninterpreter lock before calling a function, because the lock must be held when\ncalling into the interpreter's code.   There's a :class:`py_object()` type\nconstructor that will create a  :c:type:`PyObject \\*` pointer.  A simple usage::\n\n   import ctypes\n\n   d = {}\n   ctypes.pythonapi.PyObject_SetItem(ctypes.py_object(d),\n             ctypes.py_object(\"abc\"),  ctypes.py_object(1))\n   # d is now {'abc', 1}.\n\nDon't forget to use :class:`py_object()`; if it's omitted you end  up with a\nsegmentation fault.\n\n:mod:`ctypes` has been around for a while, but people still write  and\ndistribution hand-coded extension modules because you can't rely on\n:mod:`ctypes` being present. Perhaps developers will begin to write  Python\nwrappers atop a library accessed through :mod:`ctypes` instead of extension\nmodules, now that :mod:`ctypes` is included with core Python.\n\n\n.. seealso::\n\n   http://starship.python.net/crew/theller/ctypes/\n      The ctypes web page, with a tutorial, reference, and FAQ.\n\n   The documentation  for the :mod:`ctypes` module.\n\n.. ======================================================================\n\n\n.. _module-etree:\n\nThe ElementTree package\n-----------------------\n\nA subset of Fredrik Lundh's ElementTree library for processing XML has been\nadded to the standard library as :mod:`xml.etree`.  The available modules are\n:mod:`ElementTree`, :mod:`ElementPath`, and :mod:`ElementInclude` from\nElementTree 1.2.6.    The :mod:`cElementTree` accelerator module is also\nincluded.\n\nThe rest of this section will provide a brief overview of using ElementTree.\nFull documentation for ElementTree is available at\nhttp://effbot.org/zone/element-index.htm.\n\nElementTree represents an XML document as a tree of element nodes. The text\ncontent of the document is stored as the :attr:`text` and :attr:`tail`\nattributes of  (This is one of the major differences between ElementTree and\nthe Document Object Model; in the DOM there are many different types of node,\nincluding :class:`TextNode`.)\n\nThe most commonly used parsing function is :func:`parse`, that takes either a\nstring (assumed to contain a filename) or a file-like object and returns an\n:class:`ElementTree` instance::\n\n   from xml.etree import ElementTree as ET\n\n   tree = ET.parse('ex-1.xml')\n\n   feed = urllib.urlopen(\n             'http://planet.python.org/rss10.xml')\n   tree = ET.parse(feed)\n\nOnce you have an :class:`ElementTree` instance, you can call its :meth:`getroot`\nmethod to get the root :class:`Element` node.\n\nThere's also an :func:`XML` function that takes a string literal and returns an\n:class:`Element` node (not an :class:`ElementTree`).   This function provides a\ntidy way to incorporate XML fragments, approaching the convenience of an XML\nliteral::\n\n   svg = ET.XML(\"\"\"<svg width=\"10px\" version=\"1.0\">\n                </svg>\"\"\")\n   svg.set('height', '320px')\n   svg.append(elem1)\n\nEach XML element supports some dictionary-like and some list-like access\nmethods.  Dictionary-like operations are used to access attribute values, and\nlist-like operations are used to access child nodes.\n\n+-------------------------------+--------------------------------------------+\n| Operation                     | Result                                     |\n+===============================+============================================+\n| ``elem[n]``                   | Returns n'th child element.                |\n+-------------------------------+--------------------------------------------+\n| ``elem[m:n]``                 | Returns list of m'th through n'th child    |\n|                               | elements.                                  |\n+-------------------------------+--------------------------------------------+\n| ``len(elem)``                 | Returns number of child elements.          |\n+-------------------------------+--------------------------------------------+\n| ``list(elem)``                | Returns list of child elements.            |\n+-------------------------------+--------------------------------------------+\n| ``elem.append(elem2)``        | Adds *elem2* as a child.                   |\n+-------------------------------+--------------------------------------------+\n| ``elem.insert(index, elem2)`` | Inserts *elem2* at the specified location. |\n+-------------------------------+--------------------------------------------+\n| ``del elem[n]``               | Deletes n'th child element.                |\n+-------------------------------+--------------------------------------------+\n| ``elem.keys()``               | Returns list of attribute names.           |\n+-------------------------------+--------------------------------------------+\n| ``elem.get(name)``            | Returns value of attribute *name*.         |\n+-------------------------------+--------------------------------------------+\n| ``elem.set(name, value)``     | Sets new value for attribute *name*.       |\n+-------------------------------+--------------------------------------------+\n| ``elem.attrib``               | Retrieves the dictionary containing        |\n|                               | attributes.                                |\n+-------------------------------+--------------------------------------------+\n| ``del elem.attrib[name]``     | Deletes attribute *name*.                  |\n+-------------------------------+--------------------------------------------+\n\nComments and processing instructions are also represented as :class:`Element`\nnodes.  To check if a node is a comment or processing instructions::\n\n   if elem.tag is ET.Comment:\n       ...\n   elif elem.tag is ET.ProcessingInstruction:\n       ...\n\nTo generate XML output, you should call the :meth:`ElementTree.write` method.\nLike :func:`parse`, it can take either a string or a file-like object::\n\n   # Encoding is US-ASCII\n   tree.write('output.xml')\n\n   # Encoding is UTF-8\n   f = open('output.xml', 'w')\n   tree.write(f, encoding='utf-8')\n\n(Caution: the default encoding used for output is ASCII.  For general XML work,\nwhere an element's name may contain arbitrary Unicode characters, ASCII isn't a\nvery useful encoding because it will raise an exception if an element's name\ncontains any characters with values greater than 127.  Therefore, it's best to\nspecify a different encoding such as UTF-8 that can handle any Unicode\ncharacter.)\n\nThis section is only a partial description of the ElementTree interfaces. Please\nread the package's official documentation for more details.\n\n\n.. seealso::\n\n   http://effbot.org/zone/element-index.htm\n      Official documentation for ElementTree.\n\n.. ======================================================================\n\n\n.. _module-hashlib:\n\nThe hashlib package\n-------------------\n\nA new :mod:`hashlib` module, written by Gregory P. Smith,  has been added to\nreplace the :mod:`md5` and :mod:`sha` modules.  :mod:`hashlib` adds support for\nadditional secure hashes (SHA-224, SHA-256, SHA-384, and SHA-512). When\navailable, the module uses OpenSSL for fast platform optimized implementations\nof algorithms.\n\nThe old :mod:`md5` and :mod:`sha` modules still exist as wrappers around hashlib\nto preserve backwards compatibility.  The new module's interface is very close\nto that of the old modules, but not identical. The most significant difference\nis that the constructor functions for creating new hashing objects are named\ndifferently. ::\n\n   # Old versions\n   h = md5.md5()\n   h = md5.new()\n\n   # New version\n   h = hashlib.md5()\n\n   # Old versions\n   h = sha.sha()\n   h = sha.new()\n\n   # New version\n   h = hashlib.sha1()\n\n   # Hash that weren't previously available\n   h = hashlib.sha224()\n   h = hashlib.sha256()\n   h = hashlib.sha384()\n   h = hashlib.sha512()\n\n   # Alternative form\n   h = hashlib.new('md5')          # Provide algorithm as a string\n\nOnce a hash object has been created, its methods are the same as before:\n``update(string)`` hashes the specified string into the  current digest\nstate, :meth:`digest` and :meth:`hexdigest` return the digest value as a binary\nstring or a string of hex digits, and :meth:`copy` returns a new hashing object\nwith the same digest state.\n\n\n.. seealso::\n\n   The documentation  for the :mod:`hashlib` module.\n\n.. ======================================================================\n\n\n.. _module-sqlite:\n\nThe sqlite3 package\n-------------------\n\nThe pysqlite module (http://www.pysqlite.org), a wrapper for the SQLite embedded\ndatabase, has been added to the standard library under the package name\n:mod:`sqlite3`.\n\nSQLite is a C library that provides a lightweight disk-based database that\ndoesn't require a separate server process and allows accessing the database\nusing a nonstandard variant of the SQL query language. Some applications can use\nSQLite for internal data storage.  It's also possible to prototype an\napplication using SQLite and then port the code to a larger database such as\nPostgreSQL or Oracle.\n\npysqlite was written by Gerhard H\u00e4ring and provides a SQL interface compliant\nwith the DB-API 2.0 specification described by :pep:`249`.\n\nIf you're compiling the Python source yourself, note that the source tree\ndoesn't include the SQLite code, only the wrapper module. You'll need to have\nthe SQLite libraries and headers installed before compiling Python, and the\nbuild process will compile the module when the necessary headers are available.\n\nTo use the module, you must first create a :class:`Connection` object that\nrepresents the database.  Here the data will be stored in the\n:file:`/tmp/example` file::\n\n   conn = sqlite3.connect('/tmp/example')\n\nYou can also supply the special name ``:memory:`` to create a database in RAM.\n\nOnce you have a :class:`Connection`, you can create a :class:`Cursor`  object\nand call its :meth:`execute` method to perform SQL commands::\n\n   c = conn.cursor()\n\n   # Create table\n   c.execute('''create table stocks\n   (date text, trans text, symbol text,\n    qty real, price real)''')\n\n   # Insert a row of data\n   c.execute(\"\"\"insert into stocks\n             values ('2006-01-05','BUY','RHAT',100,35.14)\"\"\")\n\nUsually your SQL operations will need to use values from Python variables.  You\nshouldn't assemble your query using Python's string operations because doing so\nis insecure; it makes your program vulnerable to an SQL injection attack.\n\nInstead, use the DB-API's parameter substitution.  Put ``?`` as a placeholder\nwherever you want to use a value, and then provide a tuple of values as the\nsecond argument to the cursor's :meth:`execute` method.  (Other database modules\nmay use a different placeholder, such as ``%s`` or ``:1``.) For example::\n\n   # Never do this -- insecure!\n   symbol = 'IBM'\n   c.execute(\"... where symbol = '%s'\" % symbol)\n\n   # Do this instead\n   t = (symbol,)\n   c.execute('select * from stocks where symbol=?', t)\n\n   # Larger example\n   for t in (('2006-03-28', 'BUY', 'IBM', 1000, 45.00),\n             ('2006-04-05', 'BUY', 'MSOFT', 1000, 72.00),\n             ('2006-04-06', 'SELL', 'IBM', 500, 53.00),\n            ):\n       c.execute('insert into stocks values (?,?,?,?,?)', t)\n\nTo retrieve data after executing a SELECT statement, you can either  treat the\ncursor as an iterator, call the cursor's :meth:`fetchone` method to retrieve a\nsingle matching row,  or call :meth:`fetchall` to get a list of the matching\nrows.\n\nThis example uses the iterator form::\n\n   >>> c = conn.cursor()\n   >>> c.execute('select * from stocks order by price')\n   >>> for row in c:\n   ...    print row\n   ...\n   (u'2006-01-05', u'BUY', u'RHAT', 100, 35.140000000000001)\n   (u'2006-03-28', u'BUY', u'IBM', 1000, 45.0)\n   (u'2006-04-06', u'SELL', u'IBM', 500, 53.0)\n   (u'2006-04-05', u'BUY', u'MSOFT', 1000, 72.0)\n   >>>\n\nFor more information about the SQL dialect supported by SQLite, see\nhttps://www.sqlite.org.\n\n\n.. seealso::\n\n   http://www.pysqlite.org\n      The pysqlite web page.\n\n   https://www.sqlite.org\n      The SQLite web page; the documentation describes the syntax and the available\n      data types for the supported SQL dialect.\n\n   The documentation  for the :mod:`sqlite3` module.\n\n   :pep:`249` - Database API Specification 2.0\n      PEP written by Marc-Andr\u00e9 Lemburg.\n\n.. ======================================================================\n\n\n.. _module-wsgiref:\n\nThe wsgiref package\n-------------------\n\nThe Web Server Gateway Interface (WSGI) v1.0 defines a standard interface\nbetween web servers and Python web applications and is described in :pep:`333`.\nThe :mod:`wsgiref` package is a reference implementation of the WSGI\nspecification.\n\n.. XXX should this be in a :pep:`333` section instead?\n\nThe package includes a basic HTTP server that will run a WSGI application; this\nserver is useful for debugging but isn't intended for  production use.  Setting\nup a server takes only a few lines of code::\n\n   from wsgiref import simple_server\n\n   wsgi_app = ...\n\n   host = ''\n   port = 8000\n   httpd = simple_server.make_server(host, port, wsgi_app)\n   httpd.serve_forever()\n\n.. XXX discuss structure of WSGI applications?\n.. XXX provide an example using Django or some other framework?\n\n\n.. seealso::\n\n   http://www.wsgi.org\n      A central web site for WSGI-related resources.\n\n   :pep:`333` - Python Web Server Gateway Interface v1.0\n      PEP written by Phillip J. Eby.\n\n.. ======================================================================\n\n\n.. _build-api:\n\nBuild and C API Changes\n=======================\n\nChanges to Python's build process and to the C API include:\n\n* The Python source tree was converted from CVS to Subversion,  in a complex\n  migration procedure that was supervised and flawlessly carried out by Martin von\n  L\u00f6wis.  The procedure was developed as :pep:`347`.\n\n* Coverity, a company that markets a source code analysis tool called Prevent,\n  provided the results of their examination of the Python source code.  The\n  analysis found about 60 bugs that  were quickly fixed.  Many of the bugs were\n  refcounting problems, often occurring in error-handling code.  See\n  https://scan.coverity.com for the statistics.\n\n* The largest change to the C API came from :pep:`353`, which modifies the\n  interpreter to use a :c:type:`Py_ssize_t` type definition instead of\n  :c:type:`int`.  See the earlier section :ref:`pep-353` for a discussion of this\n  change.\n\n* The design of the bytecode compiler has changed a great deal,  no longer\n  generating bytecode by traversing the parse tree.  Instead the parse tree is\n  converted to an abstract syntax tree (or AST), and it is  the abstract syntax\n  tree that's traversed to produce the bytecode.\n\n  It's possible for Python code to obtain AST objects by using the\n  :func:`compile` built-in and specifying ``_ast.PyCF_ONLY_AST`` as the value of\n  the  *flags* parameter::\n\n     from _ast import PyCF_ONLY_AST\n     ast = compile(\"\"\"a=0\n     for i in range(10):\n         a += i\n     \"\"\", \"<string>\", 'exec', PyCF_ONLY_AST)\n\n     assignment = ast.body[0]\n     for_loop = ast.body[1]\n\n  No official documentation has been written for the AST code yet, but :pep:`339`\n  discusses the design.  To start learning about the code, read the definition of\n  the various AST nodes in :file:`Parser/Python.asdl`.  A Python script reads this\n  file and generates a set of C structure definitions in\n  :file:`Include/Python-ast.h`.  The :c:func:`PyParser_ASTFromString` and\n  :c:func:`PyParser_ASTFromFile`, defined in :file:`Include/pythonrun.h`, take\n  Python source as input and return the root of an AST representing the contents.\n  This AST can then be turned into a code object by :c:func:`PyAST_Compile`.  For\n  more information, read the source code, and then ask questions on python-dev.\n\n  The AST code was developed under Jeremy Hylton's management, and implemented by\n  (in alphabetical order) Brett Cannon, Nick Coghlan, Grant Edwards, John\n  Ehresman, Kurt Kaiser, Neal Norwitz, Tim Peters, Armin Rigo, and Neil\n  Schemenauer, plus the participants in a number of AST sprints at conferences\n  such as PyCon.\n\n  .. List of names taken from Jeremy's python-dev post at\n  .. https://mail.python.org/pipermail/python-dev/2005-October/057500.html\n\n* Evan Jones's patch to obmalloc, first described in a talk at PyCon DC 2005,\n  was applied.  Python 2.4 allocated small objects in 256K-sized arenas, but never\n  freed arenas.  With this patch, Python will free arenas when they're empty.  The\n  net effect is that on some platforms, when you allocate many objects, Python's\n  memory usage may actually drop when you delete them and the memory may be\n  returned to the operating system.  (Implemented by Evan Jones, and reworked by\n  Tim Peters.)\n\n  Note that this change means extension modules must be more careful when\n  allocating memory.  Python's API has many different functions for allocating\n  memory that are grouped into families.  For example, :c:func:`PyMem_Malloc`,\n  :c:func:`PyMem_Realloc`, and :c:func:`PyMem_Free` are one family that allocates\n  raw memory, while :c:func:`PyObject_Malloc`, :c:func:`PyObject_Realloc`, and\n  :c:func:`PyObject_Free` are another family that's supposed to be used for\n  creating Python objects.\n\n  Previously these different families all reduced to the platform's\n  :c:func:`malloc` and :c:func:`free` functions.  This meant  it didn't matter if\n  you got things wrong and allocated memory with the :c:func:`PyMem` function but\n  freed it with the :c:func:`PyObject` function.  With 2.5's changes to obmalloc,\n  these families now do different things and mismatches will probably result in a\n  segfault.  You should carefully test your C extension modules with Python 2.5.\n\n* The built-in set types now have an official C API.  Call :c:func:`PySet_New`\n  and :c:func:`PyFrozenSet_New` to create a new set, :c:func:`PySet_Add` and\n  :c:func:`PySet_Discard` to add and remove elements, and :c:func:`PySet_Contains`\n  and :c:func:`PySet_Size` to examine the set's state. (Contributed by Raymond\n  Hettinger.)\n\n* C code can now obtain information about the exact revision of the Python\n  interpreter by calling the  :c:func:`Py_GetBuildInfo` function that returns a\n  string of build information like this: ``\"trunk:45355:45356M, Apr 13 2006,\n  07:42:19\"``.   (Contributed by Barry Warsaw.)\n\n* Two new macros can be used to indicate C functions that are local to the\n  current file so that a faster calling convention can be used.\n  ``Py_LOCAL(type)`` declares the function as returning a value of the\n  specified *type* and uses a fast-calling qualifier.\n  ``Py_LOCAL_INLINE(type)`` does the same thing and also requests the\n  function be inlined.  If :c:func:`PY_LOCAL_AGGRESSIVE` is defined before\n  :file:`python.h` is included, a set of more aggressive optimizations are enabled\n  for the module; you should benchmark the results to find out if these\n  optimizations actually make the code faster.  (Contributed by Fredrik Lundh at\n  the NeedForSpeed sprint.)\n\n* ``PyErr_NewException(name, base, dict)`` can now accept a tuple of base\n  classes as its *base* argument.  (Contributed by Georg Brandl.)\n\n* The :c:func:`PyErr_Warn` function for issuing warnings is now deprecated in\n  favour of ``PyErr_WarnEx(category, message, stacklevel)`` which lets you\n  specify the number of stack frames separating this function and the caller.  A\n  *stacklevel* of 1 is the function calling :c:func:`PyErr_WarnEx`, 2 is the\n  function above that, and so forth.  (Added by Neal Norwitz.)\n\n* The CPython interpreter is still written in C, but  the code can now be\n  compiled with a C++ compiler without errors.   (Implemented by Anthony Baxter,\n  Martin von L\u00f6wis, Skip Montanaro.)\n\n* The :c:func:`PyRange_New` function was removed.  It was never documented, never\n  used in the core code, and had dangerously lax error checking.  In the unlikely\n  case that your extensions were using it, you can replace it by something like\n  the following::\n\n     range = PyObject_CallFunction((PyObject*) &PyRange_Type, \"lll\",\n                                   start, stop, step);\n\n.. ======================================================================\n\n\n.. _ports:\n\nPort-Specific Changes\n---------------------\n\n* MacOS X (10.3 and higher): dynamic loading of modules now uses the\n  :c:func:`dlopen` function instead of MacOS-specific functions.\n\n* MacOS X: an :option:`!--enable-universalsdk` switch was added to the\n  :program:`configure` script that compiles the interpreter as a universal binary\n  able to run on both PowerPC and Intel processors. (Contributed by Ronald\n  Oussoren; :issue:`2573`.)\n\n* Windows: :file:`.dll` is no longer supported as a filename extension for\n  extension modules.  :file:`.pyd` is now the only filename extension that will be\n  searched for.\n\n.. ======================================================================\n\n\n.. _porting:\n\nPorting to Python 2.5\n=====================\n\nThis section lists previously described changes that may require changes to your\ncode:\n\n* ASCII is now the default encoding for modules.  It's now  a syntax error if a\n  module contains string literals with 8-bit characters but doesn't have an\n  encoding declaration.  In Python 2.4 this triggered a warning, not a syntax\n  error.\n\n* Previously, the :attr:`gi_frame` attribute of a generator was always a frame\n  object.  Because of the :pep:`342` changes described in section :ref:`pep-342`,\n  it's now possible for :attr:`gi_frame` to be ``None``.\n\n* A new warning, :class:`UnicodeWarning`, is triggered when  you attempt to\n  compare a Unicode string and an 8-bit string that can't be converted to Unicode\n  using the default ASCII encoding.  Previously such comparisons would raise a\n  :class:`UnicodeDecodeError` exception.\n\n* Library: the :mod:`csv` module is now stricter about multi-line quoted fields.\n  If your files contain newlines embedded within fields, the input should be split\n  into lines in a manner which preserves the newline characters.\n\n* Library: the :mod:`locale` module's  :func:`format` function's would\n  previously  accept any string as long as no more than one %char specifier\n  appeared.  In Python 2.5, the argument must be exactly one %char specifier with\n  no surrounding text.\n\n* Library: The :mod:`pickle` and :mod:`cPickle` modules no longer accept a\n  return value of ``None`` from the :meth:`__reduce__` method; the method must\n  return a tuple of arguments instead.  The modules also no longer accept the\n  deprecated *bin* keyword parameter.\n\n* Library: The :mod:`SimpleXMLRPCServer` and :mod:`DocXMLRPCServer`  classes now\n  have a :attr:`rpc_paths` attribute that constrains XML-RPC operations to a\n  limited set of URL paths; the default is to allow only ``'/'`` and ``'/RPC2'``.\n  Setting  :attr:`rpc_paths` to ``None`` or an empty tuple disables  this path\n  checking.\n\n* C API: Many functions now use :c:type:`Py_ssize_t`  instead of :c:type:`int` to\n  allow processing more data on 64-bit machines.  Extension code may need to make\n  the same change to avoid warnings and to support 64-bit machines.  See the\n  earlier section :ref:`pep-353` for a discussion of this change.\n\n* C API:  The obmalloc changes mean that  you must be careful to not mix usage\n  of the :c:func:`PyMem_\\*` and :c:func:`PyObject_\\*` families of functions. Memory\n  allocated with  one family's :c:func:`\\*_Malloc` must be  freed with the\n  corresponding family's :c:func:`\\*_Free` function.\n\n.. ======================================================================\n\n\nAcknowledgements\n================\n\nThe author would like to thank the following people for offering suggestions,\ncorrections and assistance with various drafts of this article: Georg Brandl,\nNick Coghlan, Phillip J. Eby, Lars Gust\u00e4bel, Raymond Hettinger, Ralf W.\nGrosse-Kunstleve, Kent Johnson, Iain Lowe, Martin von L\u00f6wis, Fredrik Lundh, Andrew\nMcNamara, Skip Montanaro, Gustavo Niemeyer, Paul Prescod, James Pryor, Mike\nRovner, Scott Weikart, Barry Warsaw, Thomas Wouters.\n\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/whatsnew/3.3.rst": "****************************\n  What's New In Python 3.3\n****************************\n\n.. Rules for maintenance:\n\n   * Anyone can add text to this document.  Do not spend very much time\n   on the wording of your changes, because your text will probably\n   get rewritten to some degree.\n\n   * The maintainer will go through Misc/NEWS periodically and add\n   changes; it's therefore more important to add your changes to\n   Misc/NEWS than to this file.\n\n   * This is not a complete list of every single change; completeness\n   is the purpose of Misc/NEWS.  Some changes I consider too small\n   or esoteric to include.  If such a change is added to the text,\n   I'll just remove it.  (This is another reason you shouldn't spend\n   too much time on writing your addition.)\n\n   * If you want to draw your new text to the attention of the\n   maintainer, add 'XXX' to the beginning of the paragraph or\n   section.\n\n   * It's OK to just add a fragmentary note about a change.  For\n   example: \"XXX Describe the transmogrify() function added to the\n   socket module.\"  The maintainer will research the change and\n   write the necessary text.\n\n   * You can comment out your additions if you like, but it's not\n   necessary (especially when a final release is some months away).\n\n   * Credit the author of a patch or bugfix.   Just the name is\n   sufficient; the e-mail address isn't necessary.\n\n   * It's helpful to add the bug/patch number as a comment:\n\n   XXX Describe the transmogrify() function added to the socket\n   module.\n   (Contributed by P.Y. Developer in :issue:`12345`.)\n\n   This saves the maintainer the effort of going through the Mercurial log\n   when researching a change.\n\nThis article explains the new features in Python 3.3, compared to 3.2.\nPython 3.3 was released on September 29, 2012.  For full details,\nsee the `changelog <https://docs.python.org/3.3/whatsnew/changelog.html>`_.\n\n.. seealso::\n\n    :pep:`398` - Python 3.3 Release Schedule\n\n\nSummary -- Release highlights\n=============================\n\n.. This section singles out the most important changes in Python 3.3.\n   Brevity is key.\n\nNew syntax features:\n\n* New ``yield from`` expression for :ref:`generator delegation <pep-380>`.\n* The ``u'unicode'`` syntax is accepted again for :class:`str` objects.\n\nNew library modules:\n\n* :mod:`faulthandler` (helps debugging low-level crashes)\n* :mod:`ipaddress` (high-level objects representing IP addresses and masks)\n* :mod:`lzma` (compress data using the XZ / LZMA algorithm)\n* :mod:`unittest.mock` (replace parts of your system under test with mock objects)\n* :mod:`venv` (Python :ref:`virtual environments <pep-405>`, as in the\n  popular ``virtualenv`` package)\n\nNew built-in features:\n\n* Reworked :ref:`I/O exception hierarchy <pep-3151>`.\n\nImplementation improvements:\n\n* Rewritten :ref:`import machinery <importlib>` based on :mod:`importlib`.\n* More compact :ref:`unicode strings <pep-393>`.\n* More compact :ref:`attribute dictionaries <pep-412>`.\n\nSignificantly Improved Library Modules:\n\n* C Accelerator for the :ref:`decimal <new-decimal>` module.\n* Better unicode handling in the :ref:`email <new-email>` module\n  (:term:`provisional <provisional package>`).\n\nSecurity improvements:\n\n* Hash randomization is switched on by default.\n\nPlease read on for a comprehensive list of user-facing changes.\n\n\n.. _pep-405:\n\nPEP 405: Virtual Environments\n=============================\n\nVirtual environments help create separate Python setups while sharing a\nsystem-wide base install, for ease of maintenance.  Virtual environments\nhave their own set of private site packages (i.e. locally-installed\nlibraries), and are optionally segregated from the system-wide site\npackages.  Their concept and implementation are inspired by the popular\n``virtualenv`` third-party package, but benefit from tighter integration\nwith the interpreter core.\n\nThis PEP adds the :mod:`venv` module for programmatic access, and the\n``pyvenv`` script for command-line access and\nadministration.  The Python interpreter checks for a ``pyvenv.cfg``,\nfile whose existence signals the base of a virtual environment's directory\ntree.\n\n.. seealso::\n\n    :pep:`405` - Python Virtual Environments\n       PEP written by Carl Meyer; implementation by Carl Meyer and Vinay Sajip\n\n\nPEP 420: Implicit Namespace Packages\n====================================\n\nNative support for package directories that don't require ``__init__.py``\nmarker files and can automatically span multiple path segments (inspired by\nvarious third party approaches to namespace packages, as described in\n:pep:`420`)\n\n.. seealso::\n\n   :pep:`420` - Implicit Namespace Packages\n      PEP written by Eric V. Smith; implementation by Eric V. Smith\n      and Barry Warsaw\n\n\n.. _pep-3118-update:\n\nPEP 3118: New memoryview implementation and buffer protocol documentation\n=========================================================================\n\nThe implementation of :pep:`3118` has been significantly improved.\n\nThe new memoryview implementation comprehensively fixes all ownership and\nlifetime issues of dynamically allocated fields in the Py_buffer struct\nthat led to multiple crash reports. Additionally, several functions that\ncrashed or returned incorrect results for non-contiguous or multi-dimensional\ninput have been fixed.\n\nThe memoryview object now has a PEP-3118 compliant getbufferproc()\nthat checks the consumer's request type. Many new features have been\nadded, most of them work in full generality for non-contiguous arrays\nand arrays with suboffsets.\n\nThe documentation has been updated, clearly spelling out responsibilities\nfor both exporters and consumers. Buffer request flags are grouped into\nbasic and compound flags. The memory layout of non-contiguous and\nmulti-dimensional NumPy-style arrays is explained.\n\nFeatures\n--------\n\n* All native single character format specifiers in struct module syntax\n  (optionally prefixed with '@') are now supported.\n\n* With some restrictions, the cast() method allows changing of format and\n  shape of C-contiguous arrays.\n\n* Multi-dimensional list representations are supported for any array type.\n\n* Multi-dimensional comparisons are supported for any array type.\n\n* One-dimensional memoryviews of hashable (read-only) types with formats B,\n  b or c are now hashable.  (Contributed by Antoine Pitrou in :issue:`13411`.)\n\n* Arbitrary slicing of any 1-D arrays type is supported. For example, it\n  is now possible to reverse a memoryview in O(1) by using a negative step.\n\nAPI changes\n-----------\n\n* The maximum number of dimensions is officially limited to 64.\n\n* The representation of empty shape, strides and suboffsets is now\n  an empty tuple instead of ``None``.\n\n* Accessing a memoryview element with format 'B' (unsigned bytes)\n  now returns an integer (in accordance with the struct module syntax).\n  For returning a bytes object the view must be cast to 'c' first.\n\n* memoryview comparisons now use the logical structure of the operands\n  and compare all array elements by value. All format strings in struct\n  module syntax are supported. Views with unrecognised format strings\n  are still permitted, but will always compare as unequal, regardless\n  of view contents.\n\n* For further changes see `Build and C API Changes`_ and `Porting C code`_.\n\n(Contributed by Stefan Krah in :issue:`10181`.)\n\n.. seealso::\n\n   :pep:`3118` - Revising the Buffer Protocol\n\n\n.. _pep-393:\n\nPEP 393: Flexible String Representation\n=======================================\n\nThe Unicode string type is changed to support multiple internal\nrepresentations, depending on the character with the largest Unicode ordinal\n(1, 2, or 4 bytes) in the represented string.  This allows a space-efficient\nrepresentation in common cases, but gives access to full UCS-4 on all\nsystems.  For compatibility with existing APIs, several representations may\nexist in parallel; over time, this compatibility should be phased out.\n\nOn the Python side, there should be no downside to this change.\n\nOn the C API side, :pep:`393` is fully backward compatible.  The legacy API\nshould remain available at least five years.  Applications using the legacy\nAPI will not fully benefit of the memory reduction, or - worse - may use\na bit more memory, because Python may have to maintain two versions of each\nstring (in the legacy format and in the new efficient storage).\n\nFunctionality\n-------------\n\nChanges introduced by :pep:`393` are the following:\n\n* Python now always supports the full range of Unicode code points, including\n  non-BMP ones (i.e. from ``U+0000`` to ``U+10FFFF``).  The distinction between\n  narrow and wide builds no longer exists and Python now behaves like a wide\n  build, even under Windows.\n\n* With the death of narrow builds, the problems specific to narrow builds have\n  also been fixed, for example:\n\n  * :func:`len` now always returns 1 for non-BMP characters,\n    so ``len('\\U0010FFFF') == 1``;\n\n  * surrogate pairs are not recombined in string literals,\n    so ``'\\uDBFF\\uDFFF' != '\\U0010FFFF'``;\n\n  * indexing or slicing non-BMP characters returns the expected value,\n    so ``'\\U0010FFFF'[0]`` now returns ``'\\U0010FFFF'`` and not ``'\\uDBFF'``;\n\n  * all other functions in the standard library now correctly handle\n    non-BMP code points.\n\n* The value of :data:`sys.maxunicode` is now always ``1114111`` (``0x10FFFF``\n  in hexadecimal).  The :c:func:`PyUnicode_GetMax` function still returns\n  either ``0xFFFF`` or ``0x10FFFF`` for backward compatibility, and it should\n  not be used with the new Unicode API (see :issue:`13054`).\n\n* The :file:`./configure` flag ``--with-wide-unicode`` has been removed.\n\nPerformance and resource usage\n------------------------------\n\nThe storage of Unicode strings now depends on the highest code point in the string:\n\n* pure ASCII and Latin1 strings (``U+0000-U+00FF``) use 1 byte per code point;\n\n* BMP strings (``U+0000-U+FFFF``) use 2 bytes per code point;\n\n* non-BMP strings (``U+10000-U+10FFFF``) use 4 bytes per code point.\n\nThe net effect is that for most applications, memory usage of string\nstorage should decrease significantly - especially compared to former\nwide unicode builds - as, in many cases, strings will be pure ASCII\neven in international contexts (because many strings store non-human\nlanguage data, such as XML fragments, HTTP headers, JSON-encoded data,\netc.).  We also hope that it will, for the same reasons, increase CPU\ncache efficiency on non-trivial applications. The memory usage of\nPython 3.3 is two to three times smaller than Python 3.2, and a little\nbit better than Python 2.7, on a Django benchmark (see the PEP for\ndetails).\n\n.. seealso::\n\n   :pep:`393` - Flexible String Representation\n      PEP written by Martin von L\u00f6wis; implementation by Torsten Becker\n      and Martin von L\u00f6wis.\n\n\n.. _pep-397:\n\nPEP 397: Python Launcher for Windows\n====================================\n\nThe Python 3.3 Windows installer now includes a ``py`` launcher application\nthat can be used to launch Python applications in a version independent\nfashion.\n\nThis launcher is invoked implicitly when double-clicking ``*.py`` files.\nIf only a single Python version is installed on the system, that version\nwill be used to run the file. If multiple versions are installed, the most\nrecent version is used by default, but this can be overridden by including\na Unix-style \"shebang line\" in the Python script.\n\nThe launcher can also be used explicitly from the command line as the ``py``\napplication. Running ``py`` follows the same version selection rules as\nimplicitly launching scripts, but a more specific version can be selected\nby passing appropriate arguments (such as ``-3`` to request Python 3 when\nPython 2 is also installed, or ``-2.6`` to specifically request an earlier\nPython version when a more recent version is installed).\n\nIn addition to the launcher, the Windows installer now includes an\noption to add the newly installed Python to the system PATH.  (Contributed\nby Brian Curtin in :issue:`3561`.)\n\n.. seealso::\n\n   :pep:`397` - Python Launcher for Windows\n      PEP written by Mark Hammond and Martin v. L\u00f6wis; implementation by\n      Vinay Sajip.\n\n   Launcher documentation: :ref:`launcher`\n\n   Installer PATH modification: :ref:`windows-path-mod`\n\n\n.. _pep-3151:\n\nPEP 3151: Reworking the OS and IO exception hierarchy\n=====================================================\n\nThe hierarchy of exceptions raised by operating system errors is now both\nsimplified and finer-grained.\n\nYou don't have to worry anymore about choosing the appropriate exception\ntype between :exc:`OSError`, :exc:`IOError`, :exc:`EnvironmentError`,\n:exc:`WindowsError`, :exc:`mmap.error`, :exc:`socket.error` or\n:exc:`select.error`.  All these exception types are now only one:\n:exc:`OSError`.  The other names are kept as aliases for compatibility\nreasons.\n\nAlso, it is now easier to catch a specific error condition.  Instead of\ninspecting the ``errno`` attribute (or ``args[0]``) for a particular\nconstant from the :mod:`errno` module, you can catch the adequate\n:exc:`OSError` subclass.  The available subclasses are the following:\n\n* :exc:`BlockingIOError`\n* :exc:`ChildProcessError`\n* :exc:`ConnectionError`\n* :exc:`FileExistsError`\n* :exc:`FileNotFoundError`\n* :exc:`InterruptedError`\n* :exc:`IsADirectoryError`\n* :exc:`NotADirectoryError`\n* :exc:`PermissionError`\n* :exc:`ProcessLookupError`\n* :exc:`TimeoutError`\n\nAnd the :exc:`ConnectionError` itself has finer-grained subclasses:\n\n* :exc:`BrokenPipeError`\n* :exc:`ConnectionAbortedError`\n* :exc:`ConnectionRefusedError`\n* :exc:`ConnectionResetError`\n\nThanks to the new exceptions, common usages of the :mod:`errno` can now be\navoided.  For example, the following code written for Python 3.2::\n\n    from errno import ENOENT, EACCES, EPERM\n\n    try:\n        with open(\"document.txt\") as f:\n            content = f.read()\n    except IOError as err:\n        if err.errno == ENOENT:\n            print(\"document.txt file is missing\")\n        elif err.errno in (EACCES, EPERM):\n            print(\"You are not allowed to read document.txt\")\n        else:\n            raise\n\ncan now be written without the :mod:`errno` import and without manual\ninspection of exception attributes::\n\n    try:\n        with open(\"document.txt\") as f:\n            content = f.read()\n    except FileNotFoundError:\n        print(\"document.txt file is missing\")\n    except PermissionError:\n        print(\"You are not allowed to read document.txt\")\n\n.. seealso::\n\n   :pep:`3151` - Reworking the OS and IO Exception Hierarchy\n      PEP written and implemented by Antoine Pitrou\n\n\n.. index::\n   single: yield; yield from (in What's New)\n\n.. _pep-380:\n\nPEP 380: Syntax for Delegating to a Subgenerator\n================================================\n\nPEP 380 adds the ``yield from`` expression, allowing a :term:`generator` to\ndelegate\npart of its operations to another generator. This allows a section of code\ncontaining :keyword:`yield` to be factored out and placed in another generator.\nAdditionally, the subgenerator is allowed to return with a value, and the\nvalue is made available to the delegating generator.\n\nWhile designed primarily for use in delegating to a subgenerator, the ``yield\nfrom`` expression actually allows delegation to arbitrary subiterators.\n\nFor simple iterators, ``yield from iterable`` is essentially just a shortened\nform of ``for item in iterable: yield item``::\n\n    >>> def g(x):\n    ...     yield from range(x, 0, -1)\n    ...     yield from range(x)\n    ...\n    >>> list(g(5))\n    [5, 4, 3, 2, 1, 0, 1, 2, 3, 4]\n\nHowever, unlike an ordinary loop, ``yield from`` allows subgenerators to\nreceive sent and thrown values directly from the calling scope, and\nreturn a final value to the outer generator::\n\n    >>> def accumulate():\n    ...     tally = 0\n    ...     while 1:\n    ...         next = yield\n    ...         if next is None:\n    ...             return tally\n    ...         tally += next\n    ...\n    >>> def gather_tallies(tallies):\n    ...     while 1:\n    ...         tally = yield from accumulate()\n    ...         tallies.append(tally)\n    ...\n    >>> tallies = []\n    >>> acc = gather_tallies(tallies)\n    >>> next(acc)  # Ensure the accumulator is ready to accept values\n    >>> for i in range(4):\n    ...     acc.send(i)\n    ...\n    >>> acc.send(None)  # Finish the first tally\n    >>> for i in range(5):\n    ...     acc.send(i)\n    ...\n    >>> acc.send(None)  # Finish the second tally\n    >>> tallies\n    [6, 10]\n\nThe main principle driving this change is to allow even generators that are\ndesigned to be used with the ``send`` and ``throw`` methods to be split into\nmultiple subgenerators as easily as a single large function can be split into\nmultiple subfunctions.\n\n.. seealso::\n\n   :pep:`380` - Syntax for Delegating to a Subgenerator\n      PEP written by Greg Ewing; implementation by Greg Ewing, integrated into\n      3.3 by Renaud Blanch, Ryan Kelly and Nick Coghlan; documentation by\n      Zbigniew J\u0119drzejewski-Szmek and Nick Coghlan\n\n\nPEP 409: Suppressing exception context\n======================================\n\nPEP 409 introduces new syntax that allows the display of the chained\nexception context to be disabled. This allows cleaner error messages in\napplications that convert between exception types::\n\n    >>> class D:\n    ...     def __init__(self, extra):\n    ...         self._extra_attributes = extra\n    ...     def __getattr__(self, attr):\n    ...         try:\n    ...             return self._extra_attributes[attr]\n    ...         except KeyError:\n    ...             raise AttributeError(attr) from None\n    ...\n    >>> D({}).x\n    Traceback (most recent call last):\n      File \"<stdin>\", line 1, in <module>\n      File \"<stdin>\", line 8, in __getattr__\n    AttributeError: x\n\nWithout the ``from None`` suffix to suppress the cause, the original\nexception would be displayed by default::\n\n    >>> class C:\n    ...     def __init__(self, extra):\n    ...         self._extra_attributes = extra\n    ...     def __getattr__(self, attr):\n    ...         try:\n    ...             return self._extra_attributes[attr]\n    ...         except KeyError:\n    ...             raise AttributeError(attr)\n    ...\n    >>> C({}).x\n    Traceback (most recent call last):\n      File \"<stdin>\", line 6, in __getattr__\n    KeyError: 'x'\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"<stdin>\", line 1, in <module>\n      File \"<stdin>\", line 8, in __getattr__\n    AttributeError: x\n\nNo debugging capability is lost, as the original exception context remains\navailable if needed (for example, if an intervening library has incorrectly\nsuppressed valuable underlying details)::\n\n    >>> try:\n    ...     D({}).x\n    ... except AttributeError as exc:\n    ...     print(repr(exc.__context__))\n    ...\n    KeyError('x',)\n\n.. seealso::\n\n   :pep:`409` - Suppressing exception context\n      PEP written by Ethan Furman; implemented by Ethan Furman and Nick\n      Coghlan.\n\n\nPEP 414: Explicit Unicode literals\n======================================\n\nTo ease the transition from Python 2 for Unicode aware Python applications\nthat make heavy use of Unicode literals, Python 3.3 once again supports the\n\"``u``\" prefix for string literals. This prefix has no semantic significance\nin Python 3, it is provided solely to reduce the number of purely mechanical\nchanges in migrating to Python 3, making it easier for developers to focus on\nthe more significant semantic changes (such as the stricter default\nseparation of binary and text data).\n\n.. seealso::\n\n   :pep:`414` - Explicit Unicode literals\n      PEP written by Armin Ronacher.\n\n\nPEP 3155: Qualified name for classes and functions\n==================================================\n\nFunctions and class objects have a new ``__qualname__`` attribute representing\nthe \"path\" from the module top-level to their definition.  For global functions\nand classes, this is the same as ``__name__``.  For other functions and classes,\nit provides better information about where they were actually defined, and\nhow they might be accessible from the global scope.\n\nExample with (non-bound) methods::\n\n   >>> class C:\n   ...     def meth(self):\n   ...         pass\n   >>> C.meth.__name__\n   'meth'\n   >>> C.meth.__qualname__\n   'C.meth'\n\nExample with nested classes::\n\n   >>> class C:\n   ...     class D:\n   ...         def meth(self):\n   ...             pass\n   ...\n   >>> C.D.__name__\n   'D'\n   >>> C.D.__qualname__\n   'C.D'\n   >>> C.D.meth.__name__\n   'meth'\n   >>> C.D.meth.__qualname__\n   'C.D.meth'\n\nExample with nested functions::\n\n   >>> def outer():\n   ...     def inner():\n   ...         pass\n   ...     return inner\n   ...\n   >>> outer().__name__\n   'inner'\n   >>> outer().__qualname__\n   'outer.<locals>.inner'\n\nThe string representation of those objects is also changed to include the\nnew, more precise information::\n\n   >>> str(C.D)\n   \"<class '__main__.C.D'>\"\n   >>> str(C.D.meth)\n   '<function C.D.meth at 0x7f46b9fe31e0>'\n\n.. seealso::\n\n   :pep:`3155` - Qualified name for classes and functions\n      PEP written and implemented by Antoine Pitrou.\n\n\n.. _pep-412:\n\nPEP 412: Key-Sharing Dictionary\n===============================\n\nDictionaries used for the storage of objects' attributes are now able to\nshare part of their internal storage between each other (namely, the part\nwhich stores the keys and their respective hashes).  This reduces the memory\nconsumption of programs creating many instances of non-builtin types.\n\n.. seealso::\n\n   :pep:`412` - Key-Sharing Dictionary\n      PEP written and implemented by Mark Shannon.\n\n\nPEP 362: Function Signature Object\n==================================\n\nA new function :func:`inspect.signature` makes introspection of python\ncallables easy and straightforward.  A broad range of callables is supported:\npython functions, decorated or not, classes, and :func:`functools.partial`\nobjects.  New classes :class:`inspect.Signature`, :class:`inspect.Parameter`\nand :class:`inspect.BoundArguments` hold information about the call signatures,\nsuch as, annotations, default values, parameters kinds, and bound arguments,\nwhich considerably simplifies writing decorators and any code that validates\nor amends calling signatures or arguments.\n\n.. seealso::\n\n   :pep:`362`: -  Function Signature Object\n      PEP written by Brett Cannon, Yury Selivanov, Larry Hastings, Jiwon Seo;\n      implemented by Yury Selivanov.\n\n\nPEP 421: Adding sys.implementation\n==================================\n\nA new attribute on the :mod:`sys` module exposes details specific to the\nimplementation of the currently running interpreter.  The initial set of\nattributes on :attr:`sys.implementation` are ``name``, ``version``,\n``hexversion``, and ``cache_tag``.\n\nThe intention of ``sys.implementation`` is to consolidate into one namespace\nthe implementation-specific data used by the standard library.  This allows\ndifferent Python implementations to share a single standard library code base\nmuch more easily.  In its initial state, ``sys.implementation`` holds only a\nsmall portion of the implementation-specific data.  Over time that ratio will\nshift in order to make the standard library more portable.\n\nOne example of improved standard library portability is ``cache_tag``.  As of\nPython 3.3, ``sys.implementation.cache_tag`` is used by :mod:`importlib` to\nsupport :pep:`3147` compliance.  Any Python implementation that uses\n``importlib`` for its built-in import system may use ``cache_tag`` to control\nthe caching behavior for modules.\n\nSimpleNamespace\n---------------\n\nThe implementation of ``sys.implementation`` also introduces a new type to\nPython: :class:`types.SimpleNamespace`.  In contrast to a mapping-based\nnamespace, like :class:`dict`, ``SimpleNamespace`` is attribute-based, like\n:class:`object`.  However, unlike ``object``, ``SimpleNamespace`` instances\nare writable.  This means that you can add, remove, and modify the namespace\nthrough normal attribute access.\n\n.. seealso::\n\n   :pep:`421` - Adding sys.implementation\n      PEP written and implemented by Eric Snow.\n\n\n.. _importlib:\n\nUsing importlib as the Implementation of Import\n===============================================\n:issue:`2377` - Replace __import__ w/ importlib.__import__\n:issue:`13959` - Re-implement parts of :mod:`imp` in pure Python\n:issue:`14605` - Make import machinery explicit\n:issue:`14646` - Require loaders set __loader__ and __package__\n\nThe :func:`__import__` function is now powered by :func:`importlib.__import__`.\nThis work leads to the completion of \"phase 2\" of :pep:`302`. There are\nmultiple benefits to this change. First, it has allowed for more of the\nmachinery powering import to be exposed instead of being implicit and hidden\nwithin the C code. It also provides a single implementation for all Python VMs\nsupporting Python 3.3 to use, helping to end any VM-specific deviations in\nimport semantics. And finally it eases the maintenance of import, allowing for\nfuture growth to occur.\n\nFor the common user, there should be no visible change in semantics.  For\nthose whose code currently manipulates import or calls import\nprogrammatically, the code changes that might possibly be required are covered\nin the `Porting Python code`_ section of this document.\n\nNew APIs\n--------\nOne of the large benefits of this work is the exposure of what goes into\nmaking the import statement work. That means the various importers that were\nonce implicit are now fully exposed as part of the :mod:`importlib` package.\n\nThe abstract base classes defined in :mod:`importlib.abc` have been expanded\nto properly delineate between :term:`meta path finders <meta path finder>`\nand :term:`path entry finders <path entry finder>` by introducing\n:class:`importlib.abc.MetaPathFinder` and\n:class:`importlib.abc.PathEntryFinder`, respectively. The old ABC of\n:class:`importlib.abc.Finder` is now only provided for backwards-compatibility\nand does not enforce any method requirements.\n\nIn terms of finders, :class:`importlib.machinery.FileFinder` exposes the\nmechanism used to search for source and bytecode files of a module. Previously\nthis class was an implicit member of :attr:`sys.path_hooks`.\n\nFor loaders, the new abstract base class :class:`importlib.abc.FileLoader` helps\nwrite a loader that uses the file system as the storage mechanism for a module's\ncode. The loader for source files\n(:class:`importlib.machinery.SourceFileLoader`), sourceless bytecode files\n(:class:`importlib.machinery.SourcelessFileLoader`), and extension modules\n(:class:`importlib.machinery.ExtensionFileLoader`) are now available for\ndirect use.\n\n:exc:`ImportError` now has ``name`` and ``path`` attributes which are set when\nthere is relevant data to provide. The message for failed imports will also\nprovide the full name of the module now instead of just the tail end of the\nmodule's name.\n\nThe :func:`importlib.invalidate_caches` function will now call the method with\nthe same name on all finders cached in :attr:`sys.path_importer_cache` to help\nclean up any stored state as necessary.\n\nVisible Changes\n---------------\n\nFor potential required changes to code, see the `Porting Python code`_\nsection.\n\nBeyond the expanse of what :mod:`importlib` now exposes, there are other\nvisible changes to import. The biggest is that :attr:`sys.meta_path` and\n:attr:`sys.path_hooks` now store all of the meta path finders and path entry\nhooks used by import.  Previously the finders were implicit and hidden within\nthe C code of import instead of being directly exposed. This means that one can\nnow easily remove or change the order of the various finders to fit one's needs.\n\nAnother change is that all modules have a ``__loader__`` attribute, storing the\nloader used to create the module. :pep:`302` has been updated to make this\nattribute mandatory for loaders to implement, so in the future once 3rd-party\nloaders have been updated people will be able to rely on the existence of the\nattribute. Until such time, though, import is setting the module post-load.\n\nLoaders are also now expected to set the ``__package__`` attribute from\n:pep:`366`. Once again, import itself is already setting this on all loaders\nfrom :mod:`importlib` and import itself is setting the attribute post-load.\n\n``None`` is now inserted into :attr:`sys.path_importer_cache` when no finder\ncan be found on :attr:`sys.path_hooks`. Since :class:`imp.NullImporter` is not\ndirectly exposed on :attr:`sys.path_hooks` it could no longer be relied upon to\nalways be available to use as a value representing no finder found.\n\nAll other changes relate to semantic changes which should be taken into\nconsideration when updating code for Python 3.3, and thus should be read about\nin the `Porting Python code`_ section of this document.\n\n(Implementation by Brett Cannon)\n\n\nOther Language Changes\n======================\n\nSome smaller changes made to the core Python language are:\n\n* Added support for Unicode name aliases and named sequences.\n  Both :func:`unicodedata.lookup()` and ``'\\N{...}'`` now resolve name aliases,\n  and :func:`unicodedata.lookup()` resolves named sequences too.\n\n  (Contributed by Ezio Melotti in :issue:`12753`.)\n\n* Unicode database updated to UCD version 6.1.0\n\n* Equality comparisons on :func:`range` objects now return a result reflecting\n  the equality of the underlying sequences generated by those range objects.\n  (:issue:`13201`)\n\n* The ``count()``, ``find()``, ``rfind()``, ``index()`` and ``rindex()``\n  methods of :class:`bytes` and :class:`bytearray` objects now accept an\n  integer between 0 and 255 as their first argument.\n\n  (Contributed by Petri Lehtinen in :issue:`12170`.)\n\n* The ``rjust()``, ``ljust()``, and ``center()`` methods of :class:`bytes`\n  and :class:`bytearray` now accept a :class:`bytearray` for the ``fill``\n  argument.  (Contributed by Petri Lehtinen in :issue:`12380`.)\n\n* New methods have been added to :class:`list` and :class:`bytearray`:\n  ``copy()`` and ``clear()`` (:issue:`10516`).  Consequently,\n  :class:`~collections.abc.MutableSequence` now also defines a\n  :meth:`~collections.abc.MutableSequence.clear` method (:issue:`11388`).\n\n* Raw bytes literals can now be written ``rb\"...\"`` as well as ``br\"...\"``.\n\n  (Contributed by Antoine Pitrou in :issue:`13748`.)\n\n* :meth:`dict.setdefault` now does only one lookup for the given key, making\n  it atomic when used with built-in types.\n\n  (Contributed by Filip Gruszczy\u0144ski in :issue:`13521`.)\n\n* The error messages produced when a function call does not match the function\n  signature have been significantly improved.\n\n  (Contributed by Benjamin Peterson.)\n\n\nA Finer-Grained Import Lock\n===========================\n\nPrevious versions of CPython have always relied on a global import lock.\nThis led to unexpected annoyances, such as deadlocks when importing a module\nwould trigger code execution in a different thread as a side-effect.\nClumsy workarounds were sometimes employed, such as the\n:c:func:`PyImport_ImportModuleNoBlock` C API function.\n\nIn Python 3.3, importing a module takes a per-module lock.  This correctly\nserializes importation of a given module from multiple threads (preventing\nthe exposure of incompletely initialized modules), while eliminating the\naforementioned annoyances.\n\n(Contributed by Antoine Pitrou in :issue:`9260`.)\n\n\nBuiltin functions and types\n===========================\n\n* :func:`open` gets a new *opener* parameter: the underlying file descriptor\n  for the file object is then obtained by calling *opener* with (*file*,\n  *flags*). It can be used to use custom flags like :data:`os.O_CLOEXEC` for\n  example. The ``'x'`` mode was added: open for exclusive creation, failing if\n  the file already exists.\n* :func:`print`: added the *flush* keyword argument. If the *flush* keyword\n  argument is true, the stream is forcibly flushed.\n* :func:`hash`: hash randomization is enabled by default, see\n  :meth:`object.__hash__` and :envvar:`PYTHONHASHSEED`.\n* The :class:`str` type gets a new :meth:`~str.casefold` method: return a\n  casefolded copy of the string, casefolded strings may be used for caseless\n  matching. For example, ``'\u00df'.casefold()`` returns ``'ss'``.\n* The sequence documentation has been substantially rewritten to better\n  explain the binary/text sequence distinction and to provide specific\n  documentation sections for the individual builtin sequence types\n  (:issue:`4966`).\n\n\nNew Modules\n===========\n\nfaulthandler\n------------\n\nThis new debug module :mod:`faulthandler` contains functions to dump Python tracebacks explicitly,\non a fault (a crash like a segmentation fault), after a timeout, or on a user\nsignal. Call :func:`faulthandler.enable` to install fault handlers for the\n:const:`SIGSEGV`, :const:`SIGFPE`, :const:`SIGABRT`, :const:`SIGBUS`, and\n:const:`SIGILL` signals. You can also enable them at startup by setting the\n:envvar:`PYTHONFAULTHANDLER` environment variable or by using :option:`-X`\n``faulthandler`` command line option.\n\nExample of a segmentation fault on Linux:\n\n.. code-block:: shell-session\n\n    $ python -q -X faulthandler\n    >>> import ctypes\n    >>> ctypes.string_at(0)\n    Fatal Python error: Segmentation fault\n\n    Current thread 0x00007fb899f39700:\n      File \"/home/python/cpython/Lib/ctypes/__init__.py\", line 486 in string_at\n      File \"<stdin>\", line 1 in <module>\n    Segmentation fault\n\n\nipaddress\n---------\n\nThe new :mod:`ipaddress` module provides tools for creating and manipulating\nobjects representing IPv4 and IPv6 addresses, networks and interfaces (i.e.\nan IP address associated with a specific IP subnet).\n\n(Contributed by Google and Peter Moody in :pep:`3144`.)\n\nlzma\n----\n\nThe newly-added :mod:`lzma` module provides data compression and decompression\nusing the LZMA algorithm, including support for the ``.xz`` and ``.lzma``\nfile formats.\n\n(Contributed by Nadeem Vawda and Per \u00d8yvind Karlsen in :issue:`6715`.)\n\n\nImproved Modules\n================\n\nabc\n---\n\nImproved support for abstract base classes containing descriptors composed with\nabstract methods. The recommended approach to declaring abstract descriptors is\nnow to provide :attr:`__isabstractmethod__` as a dynamically updated\nproperty. The built-in descriptors have been updated accordingly.\n\n  * :class:`abc.abstractproperty` has been deprecated, use :class:`property`\n    with :func:`abc.abstractmethod` instead.\n  * :class:`abc.abstractclassmethod` has been deprecated, use\n    :class:`classmethod` with :func:`abc.abstractmethod` instead.\n  * :class:`abc.abstractstaticmethod` has been deprecated, use\n    :class:`staticmethod` with :func:`abc.abstractmethod` instead.\n\n(Contributed by Darren Dale in :issue:`11610`.)\n\n:meth:`abc.ABCMeta.register` now returns the registered subclass, which means\nit can now be used as a class decorator (:issue:`10868`).\n\n\narray\n-----\n\nThe :mod:`array` module supports the :c:type:`long long` type using ``q`` and\n``Q`` type codes.\n\n(Contributed by Oren Tirosh and Hirokazu Yamamoto in :issue:`1172711`.)\n\n\nbase64\n------\n\nASCII-only Unicode strings are now accepted by the decoding functions of the\n:mod:`base64` modern interface. For example, ``base64.b64decode('YWJj')``\nreturns ``b'abc'``.  (Contributed by Catalin Iacob in :issue:`13641`.)\n\n\nbinascii\n--------\n\nIn addition to the binary objects they normally accept, the ``a2b_`` functions\nnow all also accept ASCII-only strings as input.  (Contributed by Antoine\nPitrou in :issue:`13637`.)\n\n\nbz2\n---\n\nThe :mod:`bz2` module has been rewritten from scratch. In the process, several\nnew features have been added:\n\n* New :func:`bz2.open` function: open a bzip2-compressed file in binary or\n  text mode.\n\n* :class:`bz2.BZ2File` can now read from and write to arbitrary file-like\n  objects, by means of its constructor's *fileobj* argument.\n\n  (Contributed by Nadeem Vawda in :issue:`5863`.)\n\n* :class:`bz2.BZ2File` and :func:`bz2.decompress` can now decompress\n  multi-stream inputs (such as those produced by the :program:`pbzip2` tool).\n  :class:`bz2.BZ2File` can now also be used to create this type of file, using\n  the ``'a'`` (append) mode.\n\n  (Contributed by Nir Aides in :issue:`1625`.)\n\n* :class:`bz2.BZ2File` now implements all of the :class:`io.BufferedIOBase` API,\n  except for the :meth:`detach` and :meth:`truncate` methods.\n\n\ncodecs\n------\n\nThe :mod:`~encodings.mbcs` codec has been rewritten to handle correctly\n``replace`` and ``ignore`` error handlers on all Windows versions.  The\n:mod:`~encodings.mbcs` codec now supports all error handlers, instead of only\n``replace`` to encode and ``ignore`` to decode.\n\nA new Windows-only codec has been added: ``cp65001`` (:issue:`13216`). It is the\nWindows code page 65001 (Windows UTF-8, ``CP_UTF8``).  For example, it is used\nby ``sys.stdout`` if the console output code page is set to cp65001 (e.g., using\n``chcp 65001`` command).\n\nMultibyte CJK decoders now resynchronize faster.  They only ignore the first\nbyte of an invalid byte sequence. For example, ``b'\\xff\\n'.decode('gb2312',\n'replace')`` now returns a ``\\n`` after the replacement character.\n\n(:issue:`12016`)\n\nIncremental CJK codec encoders are no longer reset at each call to their\nencode() methods. For example::\n\n    >>> import codecs\n    >>> encoder = codecs.getincrementalencoder('hz')('strict')\n    >>> b''.join(encoder.encode(x) for x in '\\u52ff\\u65bd\\u65bc\\u4eba\\u3002 Bye.')\n    b'~{NpJ)l6HK!#~} Bye.'\n\nThis example gives ``b'~{Np~}~{J)~}~{l6~}~{HK~}~{!#~} Bye.'`` with older Python\nversions.\n\n(:issue:`12100`)\n\nThe ``unicode_internal`` codec has been deprecated.\n\n\ncollections\n-----------\n\nAddition of a new :class:`~collections.ChainMap` class to allow treating a\nnumber of mappings as a single unit.  (Written by Raymond Hettinger for\n:issue:`11089`, made public in :issue:`11297`.)\n\nThe abstract base classes have been moved in a new :mod:`collections.abc`\nmodule, to better differentiate between the abstract and the concrete\ncollections classes.  Aliases for ABCs are still present in the\n:mod:`collections` module to preserve existing imports.  (:issue:`11085`)\n\n.. XXX addition of __slots__ to ABCs not recorded here: internal detail\n\nThe :class:`~collections.Counter` class now supports the unary ``+`` and ``-``\noperators, as well as the in-place operators ``+=``, ``-=``, ``|=``, and\n``&=``.  (Contributed by Raymond Hettinger in :issue:`13121`.)\n\n\ncontextlib\n----------\n\n:class:`~contextlib.ExitStack` now provides a solid foundation for\nprogrammatic manipulation of context managers and similar cleanup\nfunctionality. Unlike the previous ``contextlib.nested`` API (which was\ndeprecated and removed), the new API is designed to work correctly\nregardless of whether context managers acquire their resources in\ntheir ``__init__`` method (for example, file objects) or in their\n``__enter__`` method (for example, synchronisation objects from the\n:mod:`threading` module).\n\n(:issue:`13585`)\n\n\ncrypt\n-----\n\nAddition of salt and modular crypt format (hashing method) and the :func:`~crypt.mksalt`\nfunction to the :mod:`crypt` module.\n\n(:issue:`10924`)\n\ncurses\n------\n\n * If the :mod:`curses` module is linked to the ncursesw library, use Unicode\n   functions when Unicode strings or characters are passed (e.g.\n   :c:func:`waddwstr`), and bytes functions otherwise (e.g. :c:func:`waddstr`).\n * Use the locale encoding instead of ``utf-8`` to encode Unicode strings.\n * :class:`curses.window` has a new :attr:`curses.window.encoding` attribute.\n * The :class:`curses.window` class has a new :meth:`~curses.window.get_wch`\n   method to get a wide character\n * The :mod:`curses` module has a new :meth:`~curses.unget_wch` function to\n   push a wide character so the next :meth:`~curses.window.get_wch` will return\n   it\n\n(Contributed by I\u00f1igo Serna in :issue:`6755`.)\n\ndatetime\n--------\n\n * Equality comparisons between naive and aware :class:`~datetime.datetime`\n   instances now return :const:`False` instead of raising :exc:`TypeError`\n   (:issue:`15006`).\n * New :meth:`datetime.datetime.timestamp` method: Return POSIX timestamp\n   corresponding to the :class:`~datetime.datetime` instance.\n * The :meth:`datetime.datetime.strftime` method supports formatting years\n   older than 1000.\n * The :meth:`datetime.datetime.astimezone` method can now be\n   called without arguments to convert datetime instance to the system\n   timezone.\n\n\n.. _new-decimal:\n\ndecimal\n-------\n\n:issue:`7652` - integrate fast native decimal arithmetic.\n   C-module and libmpdec written by Stefan Krah.\n\nThe new C version of the decimal module integrates the high speed libmpdec\nlibrary for arbitrary precision correctly-rounded decimal floating point\narithmetic. libmpdec conforms to IBM's General Decimal Arithmetic Specification.\n\nPerformance gains range from 10x for database applications to 100x for\nnumerically intensive applications. These numbers are expected gains\nfor standard precisions used in decimal floating point arithmetic. Since\nthe precision is user configurable, the exact figures may vary. For example,\nin integer bignum arithmetic the differences can be significantly higher.\n\nThe following table is meant as an illustration. Benchmarks are available\nat http://www.bytereef.org/mpdecimal/quickstart.html.\n\n   +---------+-------------+--------------+-------------+\n   |         |  decimal.py |   _decimal   |   speedup   |\n   +=========+=============+==============+=============+\n   |   pi    |    42.02s   |    0.345s    |    120x     |\n   +---------+-------------+--------------+-------------+\n   | telco   |   172.19s   |    5.68s     |     30x     |\n   +---------+-------------+--------------+-------------+\n   | psycopg |     3.57s   |    0.29s     |     12x     |\n   +---------+-------------+--------------+-------------+\n\nFeatures\n~~~~~~~~\n\n* The :exc:`~decimal.FloatOperation` signal optionally enables stricter\n  semantics for mixing floats and Decimals.\n\n* If Python is compiled without threads, the C version automatically\n  disables the expensive thread local context machinery. In this case,\n  the variable :data:`~decimal.HAVE_THREADS` is set to ``False``.\n\nAPI changes\n~~~~~~~~~~~\n\n* The C module has the following context limits, depending on the machine\n  architecture:\n\n   +-------------------+---------------------+------------------------------+\n   |                   |       32-bit        |            64-bit            |\n   +===================+=====================+==============================+\n   | :const:`MAX_PREC` | :const:`425000000`  | :const:`999999999999999999`  |\n   +-------------------+---------------------+------------------------------+\n   | :const:`MAX_EMAX` | :const:`425000000`  | :const:`999999999999999999`  |\n   +-------------------+---------------------+------------------------------+\n   | :const:`MIN_EMIN` | :const:`-425000000` | :const:`-999999999999999999` |\n   +-------------------+---------------------+------------------------------+\n\n* In the context templates (:class:`~decimal.DefaultContext`,\n  :class:`~decimal.BasicContext` and :class:`~decimal.ExtendedContext`)\n  the magnitude of :attr:`~decimal.Context.Emax` and\n  :attr:`~decimal.Context.Emin` has changed to :const:`999999`.\n\n* The :class:`~decimal.Decimal` constructor in decimal.py does not observe\n  the context limits and converts values with arbitrary exponents or precision\n  exactly. Since the C version has internal limits, the following scheme is\n  used: If possible, values are converted exactly, otherwise\n  :exc:`~decimal.InvalidOperation` is raised and the result is NaN. In the\n  latter case it is always possible to use :meth:`~decimal.Context.create_decimal`\n  in order to obtain a rounded or inexact value.\n\n\n* The power function in decimal.py is always correctly-rounded. In the\n  C version, it is defined in terms of the correctly-rounded\n  :meth:`~decimal.Decimal.exp` and :meth:`~decimal.Decimal.ln` functions,\n  but the final result is only \"almost always correctly rounded\".\n\n\n* In the C version, the context dictionary containing the signals is a\n  :class:`~collections.abc.MutableMapping`.  For speed reasons,\n  :attr:`~decimal.Context.flags` and :attr:`~decimal.Context.traps` always\n  refer to the same :class:`~collections.abc.MutableMapping` that the context\n  was initialized with. If a new signal dictionary is assigned,\n  :attr:`~decimal.Context.flags` and :attr:`~decimal.Context.traps`\n  are updated with the new values, but they do not reference the RHS\n  dictionary.\n\n\n* Pickling a :class:`~decimal.Context` produces a different output in order\n  to have a common interchange format for the Python and C versions.\n\n\n* The order of arguments in the :class:`~decimal.Context` constructor has been\n  changed to match the order displayed by :func:`repr`.\n\n\n* The ``watchexp`` parameter in the :meth:`~decimal.Decimal.quantize` method\n  is deprecated.\n\n\n.. _new-email:\n\nemail\n-----\n\nPolicy Framework\n~~~~~~~~~~~~~~~~\n\nThe email package now has a :mod:`~email.policy` framework.  A\n:class:`~email.policy.Policy` is an object with several methods and properties\nthat control how the email package behaves.  The primary policy for Python 3.3\nis the :class:`~email.policy.Compat32` policy, which provides backward\ncompatibility with the email package in Python 3.2.  A ``policy`` can be\nspecified when an email message is parsed by a :mod:`~email.parser`, or when a\n:class:`~email.message.Message` object is created, or when an email is\nserialized using a :mod:`~email.generator`.  Unless overridden, a policy passed\nto a ``parser`` is inherited by all the ``Message`` object and sub-objects\ncreated by the ``parser``.  By default a ``generator`` will use the policy of\nthe ``Message`` object it is serializing.  The default policy is\n:data:`~email.policy.compat32`.\n\nThe minimum set of controls implemented by all ``policy`` objects are:\n\n    .. tabularcolumns:: |l|L|\n\n    ===============     =======================================================\n    max_line_length     The maximum length, excluding the linesep character(s),\n                        individual lines may have when a ``Message`` is\n                        serialized.  Defaults to 78.\n\n    linesep             The character used to separate individual lines when a\n                        ``Message`` is serialized.  Defaults to ``\\n``.\n\n    cte_type            ``7bit`` or ``8bit``.  ``8bit`` applies only to a\n                        ``Bytes`` ``generator``, and means that non-ASCII may\n                        be used where allowed by the protocol (or where it\n                        exists in the original input).\n\n    raise_on_defect     Causes a ``parser`` to raise error when defects are\n                        encountered instead of adding them to the ``Message``\n                        object's ``defects`` list.\n    ===============     =======================================================\n\nA new policy instance, with new settings, is created using the\n:meth:`~email.policy.Policy.clone` method of policy objects.  ``clone`` takes\nany of the above controls as keyword arguments.  Any control not specified in\nthe call retains its default value.  Thus you can create a policy that uses\n``\\r\\n`` linesep characters like this::\n\n    mypolicy = compat32.clone(linesep='\\r\\n')\n\nPolicies can be used to make the generation of messages in the format needed by\nyour application simpler.  Instead of having to remember to specify\n``linesep='\\r\\n'`` in all the places you call a ``generator``, you can specify\nit once, when you set the policy used by the ``parser`` or the ``Message``,\nwhichever your program uses to create ``Message`` objects.  On the other hand,\nif you need to generate messages in multiple forms, you can still specify the\nparameters in the appropriate ``generator`` call.  Or you can have custom\npolicy instances for your different cases, and pass those in when you create\nthe ``generator``.\n\n\nProvisional Policy with New Header API\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nWhile the policy framework is worthwhile all by itself, the main motivation for\nintroducing it is to allow the creation of new policies that implement new\nfeatures for the email package in a way that maintains backward compatibility\nfor those who do not use the new policies.  Because the new policies introduce a\nnew API, we are releasing them in Python 3.3 as a :term:`provisional policy\n<provisional package>`.  Backwards incompatible changes (up to and including\nremoval of the code) may occur if deemed necessary by the core developers.\n\nThe new policies are instances of :class:`~email.policy.EmailPolicy`,\nand add the following additional controls:\n\n    .. tabularcolumns:: |l|L|\n\n    ===============     =======================================================\n    refold_source       Controls whether or not headers parsed by a\n                        :mod:`~email.parser` are refolded by the\n                        :mod:`~email.generator`.  It can be ``none``, ``long``,\n                        or ``all``.  The default is ``long``, which means that\n                        source headers with a line longer than\n                        ``max_line_length`` get refolded.  ``none`` means no\n                        line get refolded, and ``all`` means that all lines\n                        get refolded.\n\n    header_factory      A callable that take a ``name`` and ``value`` and\n                        produces a custom header object.\n    ===============     =======================================================\n\nThe ``header_factory`` is the key to the new features provided by the new\npolicies.  When one of the new policies is used, any header retrieved from\na ``Message`` object is an object produced by the ``header_factory``, and any\ntime you set a header on a ``Message`` it becomes an object produced by\n``header_factory``.  All such header objects have a ``name`` attribute equal\nto the header name.  Address and Date headers have additional attributes\nthat give you access to the parsed data of the header.  This means you can now\ndo things like this::\n\n    >>> m = Message(policy=SMTP)\n    >>> m['To'] = '\u00c9ric <foo@example.com>'\n    >>> m['to']\n    '\u00c9ric <foo@example.com>'\n    >>> m['to'].addresses\n    (Address(display_name='\u00c9ric', username='foo', domain='example.com'),)\n    >>> m['to'].addresses[0].username\n    'foo'\n    >>> m['to'].addresses[0].display_name\n    '\u00c9ric'\n    >>> m['Date'] = email.utils.localtime()\n    >>> m['Date'].datetime\n    datetime.datetime(2012, 5, 25, 21, 39, 24, 465484, tzinfo=datetime.timezone(datetime.timedelta(-1, 72000), 'EDT'))\n    >>> m['Date']\n    'Fri, 25 May 2012 21:44:27 -0400'\n    >>> print(m)\n    To: =?utf-8?q?=C3=89ric?= <foo@example.com>\n    Date: Fri, 25 May 2012 21:44:27 -0400\n\nYou will note that the unicode display name is automatically encoded as\n``utf-8`` when the message is serialized, but that when the header is accessed\ndirectly, you get the unicode version.  This eliminates any need to deal with\nthe :mod:`email.header` :meth:`~email.header.decode_header` or\n:meth:`~email.header.make_header` functions.\n\nYou can also create addresses from parts::\n\n    >>> m['cc'] = [Group('pals', [Address('Bob', 'bob', 'example.com'),\n    ...                           Address('Sally', 'sally', 'example.com')]),\n    ...            Address('Bonzo', addr_spec='bonz@laugh.com')]\n    >>> print(m)\n    To: =?utf-8?q?=C3=89ric?= <foo@example.com>\n    Date: Fri, 25 May 2012 21:44:27 -0400\n    cc: pals: Bob <bob@example.com>, Sally <sally@example.com>;, Bonzo <bonz@laugh.com>\n\nDecoding to unicode is done automatically::\n\n    >>> m2 = message_from_string(str(m))\n    >>> m2['to']\n    '\u00c9ric <foo@example.com>'\n\nWhen you parse a message, you can use the ``addresses`` and ``groups``\nattributes of the header objects to access the groups and individual\naddresses::\n\n    >>> m2['cc'].addresses\n    (Address(display_name='Bob', username='bob', domain='example.com'), Address(display_name='Sally', username='sally', domain='example.com'), Address(display_name='Bonzo', username='bonz', domain='laugh.com'))\n    >>> m2['cc'].groups\n    (Group(display_name='pals', addresses=(Address(display_name='Bob', username='bob', domain='example.com'), Address(display_name='Sally', username='sally', domain='example.com')), Group(display_name=None, addresses=(Address(display_name='Bonzo', username='bonz', domain='laugh.com'),))\n\nIn summary, if you use one of the new policies, header manipulation works the\nway it ought to:  your application works with unicode strings, and the email\npackage transparently encodes and decodes the unicode to and from the RFC\nstandard Content Transfer Encodings.\n\nOther API Changes\n~~~~~~~~~~~~~~~~~\n\nNew :class:`~email.parser.BytesHeaderParser`, added to the :mod:`~email.parser`\nmodule to complement :class:`~email.parser.HeaderParser` and complete the Bytes\nAPI.\n\nNew utility functions:\n\n   * :func:`~email.utils.format_datetime`: given a :class:`~datetime.datetime`,\n     produce a string formatted for use in an email header.\n\n   * :func:`~email.utils.parsedate_to_datetime`: given a date string from\n     an email header, convert it into an aware :class:`~datetime.datetime`,\n     or a naive :class:`~datetime.datetime` if the offset is ``-0000``.\n\n   * :func:`~email.utils.localtime`: With no argument, returns the\n     current local time as an aware :class:`~datetime.datetime` using the local\n     :class:`~datetime.timezone`.  Given an aware :class:`~datetime.datetime`,\n     converts it into an aware :class:`~datetime.datetime` using the\n     local :class:`~datetime.timezone`.\n\n\nftplib\n------\n\n* :class:`ftplib.FTP` now accepts a ``source_address`` keyword argument to\n  specify the ``(host, port)`` to use as the source address in the bind call\n  when creating the outgoing socket.  (Contributed by Giampaolo Rodol\u00e0\n  in :issue:`8594`.)\n\n* The :class:`~ftplib.FTP_TLS` class now provides a new\n  :func:`~ftplib.FTP_TLS.ccc` function to revert control channel back to\n  plaintext.  This can be useful to take advantage of firewalls that know how\n  to handle NAT with non-secure FTP without opening fixed ports.  (Contributed\n  by Giampaolo Rodol\u00e0 in :issue:`12139`.)\n\n* Added :meth:`ftplib.FTP.mlsd` method which provides a parsable directory\n  listing format and deprecates :meth:`ftplib.FTP.nlst` and\n  :meth:`ftplib.FTP.dir`.  (Contributed by Giampaolo Rodol\u00e0 in :issue:`11072`.)\n\n\nfunctools\n---------\n\nThe :func:`functools.lru_cache` decorator now accepts a ``typed`` keyword\nargument (that defaults to ``False`` to ensure that it caches values of\ndifferent types that compare equal in separate cache slots.  (Contributed\nby Raymond Hettinger in :issue:`13227`.)\n\n\ngc\n--\n\nIt is now possible to register callbacks invoked by the garbage collector\nbefore and after collection using the new :data:`~gc.callbacks` list.\n\n\nhmac\n----\n\nA new :func:`~hmac.compare_digest` function has been added to prevent side\nchannel attacks on digests through timing analysis.  (Contributed by Nick\nCoghlan and Christian Heimes in :issue:`15061`.)\n\n\nhttp\n----\n\n:class:`http.server.BaseHTTPRequestHandler` now buffers the headers and writes\nthem all at once when :meth:`~http.server.BaseHTTPRequestHandler.end_headers` is\ncalled.  A new method :meth:`~http.server.BaseHTTPRequestHandler.flush_headers`\ncan be used to directly manage when the accumulated headers are sent.\n(Contributed by Andrew Schaaf in :issue:`3709`.)\n\n:class:`http.server` now produces valid ``HTML 4.01 strict`` output.\n(Contributed by Ezio Melotti in :issue:`13295`.)\n\n:class:`http.client.HTTPResponse` now has a\n:meth:`~http.client.HTTPResponse.readinto` method, which means it can be used\nas an :class:`io.RawIOBase` class.  (Contributed by John Kuhn in\n:issue:`13464`.)\n\n\nhtml\n----\n\n:class:`html.parser.HTMLParser` is now able to parse broken markup without\nraising errors, therefore the *strict* argument of the constructor and the\n:exc:`~html.parser.HTMLParseError` exception are now deprecated.\nThe ability to parse broken markup is the result of a number of bug fixes that\nare also available on the latest bug fix releases of Python 2.7/3.2.\n(Contributed by Ezio Melotti in :issue:`15114`, and :issue:`14538`,\n:issue:`13993`, :issue:`13960`, :issue:`13358`, :issue:`1745761`,\n:issue:`755670`, :issue:`13357`, :issue:`12629`, :issue:`1200313`,\n:issue:`670664`, :issue:`13273`, :issue:`12888`, :issue:`7311`.)\n\nA new :data:`~html.entities.html5` dictionary that maps HTML5 named character\nreferences to the equivalent Unicode character(s) (e.g. ``html5['gt;'] ==\n'>'``) has been added to the :mod:`html.entities` module.  The dictionary is\nnow also used by :class:`~html.parser.HTMLParser`.  (Contributed by Ezio\nMelotti in :issue:`11113` and :issue:`15156`.)\n\n\nimaplib\n-------\n\nThe :class:`~imaplib.IMAP4_SSL` constructor now accepts an SSLContext\nparameter to control parameters of the secure channel.\n\n(Contributed by Sijin Joseph in :issue:`8808`.)\n\n\ninspect\n-------\n\nA new :func:`~inspect.getclosurevars` function has been added. This function\nreports the current binding of all names referenced from the function body and\nwhere those names were resolved, making it easier to verify correct internal\nstate when testing code that relies on stateful closures.\n\n(Contributed by Meador Inge and Nick Coghlan in :issue:`13062`.)\n\nA new :func:`~inspect.getgeneratorlocals` function has been added. This\nfunction reports the current binding of local variables in the generator's\nstack frame, making it easier to verify correct internal state when testing\ngenerators.\n\n(Contributed by Meador Inge in :issue:`15153`.)\n\nio\n--\n\nThe :func:`~io.open` function has a new ``'x'`` mode that can be used to\nexclusively create a new file, and raise a :exc:`FileExistsError` if the file\nalready exists. It is based on the C11 'x' mode to fopen().\n\n(Contributed by David Townshend in :issue:`12760`.)\n\nThe constructor of the :class:`~io.TextIOWrapper` class has a new\n*write_through* optional argument. If *write_through* is ``True``, calls to\n:meth:`~io.TextIOWrapper.write` are guaranteed not to be buffered: any data\nwritten on the :class:`~io.TextIOWrapper` object is immediately handled to its\nunderlying binary buffer.\n\n\nitertools\n---------\n\n:func:`~itertools.accumulate` now takes an optional ``func`` argument for\nproviding a user-supplied binary function.\n\n\nlogging\n-------\n\nThe :func:`~logging.basicConfig` function now supports an optional ``handlers``\nargument taking an iterable of handlers to be added to the root logger.\n\nA class level attribute :attr:`~logging.handlers.SysLogHandler.append_nul` has\nbeen added to :class:`~logging.handlers.SysLogHandler` to allow control of the\nappending of the ``NUL`` (``\\000``) byte to syslog records, since for some\ndaemons it is required while for others it is passed through to the log.\n\n\n\nmath\n----\n\nThe :mod:`math` module has a new function, :func:`~math.log2`,  which returns\nthe base-2 logarithm of *x*.\n\n(Written by Mark Dickinson in :issue:`11888`.)\n\n\nmmap\n----\n\nThe :meth:`~mmap.mmap.read` method is now more compatible with other file-like\nobjects: if the argument is omitted or specified as ``None``, it returns the\nbytes from the current file position to the end of the mapping.  (Contributed\nby Petri Lehtinen in :issue:`12021`.)\n\n\nmultiprocessing\n---------------\n\nThe new :func:`multiprocessing.connection.wait` function allows polling\nmultiple objects (such as connections, sockets and pipes) with a timeout.\n(Contributed by Richard Oudkerk in :issue:`12328`.)\n\n:class:`multiprocessing.Connection` objects can now be transferred over\nmultiprocessing connections.\n(Contributed by Richard Oudkerk in :issue:`4892`.)\n\n:class:`multiprocessing.Process` now accepts a ``daemon`` keyword argument\nto override the default behavior of inheriting the ``daemon`` flag from\nthe parent process (:issue:`6064`).\n\nNew attribute :data:`multiprocessing.Process.sentinel` allows a\nprogram to wait on multiple :class:`~multiprocessing.Process` objects at one\ntime using the appropriate OS primitives (for example, :mod:`select` on\nposix systems).\n\nNew methods :meth:`multiprocessing.pool.Pool.starmap` and\n:meth:`~multiprocessing.pool.Pool.starmap_async` provide\n:func:`itertools.starmap` equivalents to the existing\n:meth:`multiprocessing.pool.Pool.map` and\n:meth:`~multiprocessing.pool.Pool.map_async` functions.  (Contributed by Hynek\nSchlawack in :issue:`12708`.)\n\n\nnntplib\n-------\n\nThe :class:`nntplib.NNTP` class now supports the context management protocol to\nunconditionally consume :exc:`socket.error` exceptions and to close the NNTP\nconnection when done::\n\n  >>> from nntplib import NNTP\n  >>> with NNTP('news.gmane.org') as n:\n  ...     n.group('gmane.comp.python.committers')\n  ...\n  ('211 1755 1 1755 gmane.comp.python.committers', 1755, 1, 1755, 'gmane.comp.python.committers')\n  >>>\n\n(Contributed by Giampaolo Rodol\u00e0 in :issue:`9795`.)\n\n\nos\n--\n\n* The :mod:`os` module has a new :func:`~os.pipe2` function that makes it\n  possible to create a pipe with :data:`~os.O_CLOEXEC` or\n  :data:`~os.O_NONBLOCK` flags set atomically. This is especially useful to\n  avoid race conditions in multi-threaded programs.\n\n* The :mod:`os` module has a new :func:`~os.sendfile` function which provides\n  an efficient \"zero-copy\" way for copying data from one file (or socket)\n  descriptor to another. The phrase \"zero-copy\" refers to the fact that all of\n  the copying of data between the two descriptors is done entirely by the\n  kernel, with no copying of data into userspace buffers. :func:`~os.sendfile`\n  can be used to efficiently copy data from a file on disk to a network socket,\n  e.g. for downloading a file.\n\n  (Patch submitted by Ross Lagerwall and Giampaolo Rodol\u00e0 in :issue:`10882`.)\n\n* To avoid race conditions like symlink attacks and issues with temporary\n  files and directories, it is more reliable (and also faster) to manipulate\n  file descriptors instead of file names. Python 3.3 enhances existing functions\n  and introduces new functions to work on file descriptors (:issue:`4761`,\n  :issue:`10755` and :issue:`14626`).\n\n  - The :mod:`os` module has a new :func:`~os.fwalk` function similar to\n    :func:`~os.walk` except that it also yields file descriptors referring to the\n    directories visited. This is especially useful to avoid symlink races.\n\n  - The following functions get new optional *dir_fd* (:ref:`paths relative to\n    directory descriptors <dir_fd>`) and/or *follow_symlinks* (:ref:`not\n    following symlinks <follow_symlinks>`):\n    :func:`~os.access`, :func:`~os.chflags`, :func:`~os.chmod`, :func:`~os.chown`,\n    :func:`~os.link`, :func:`~os.lstat`, :func:`~os.mkdir`, :func:`~os.mkfifo`,\n    :func:`~os.mknod`, :func:`~os.open`, :func:`~os.readlink`, :func:`~os.remove`,\n    :func:`~os.rename`, :func:`~os.replace`, :func:`~os.rmdir`, :func:`~os.stat`,\n    :func:`~os.symlink`, :func:`~os.unlink`, :func:`~os.utime`.  Platform\n    support for using these parameters can be checked via the sets\n    :data:`os.supports_dir_fd` and :data:`os.supports_follows_symlinks`.\n\n  - The following functions now support a file descriptor for their path argument:\n    :func:`~os.chdir`, :func:`~os.chmod`, :func:`~os.chown`,\n    :func:`~os.execve`, :func:`~os.listdir`, :func:`~os.pathconf`, :func:`~os.path.exists`,\n    :func:`~os.stat`, :func:`~os.statvfs`, :func:`~os.utime`.  Platform support\n    for this can be checked via the :data:`os.supports_fd` set.\n\n* :func:`~os.access` accepts an ``effective_ids`` keyword argument to turn on\n  using the effective uid/gid rather than the real uid/gid in the access check.\n  Platform support for this can be checked via the\n  :data:`~os.supports_effective_ids` set.\n\n* The :mod:`os` module has two new functions: :func:`~os.getpriority` and\n  :func:`~os.setpriority`. They can be used to get or set process\n  niceness/priority in a fashion similar to :func:`os.nice` but extended to all\n  processes instead of just the current one.\n\n  (Patch submitted by Giampaolo Rodol\u00e0 in :issue:`10784`.)\n\n* The new :func:`os.replace` function allows cross-platform renaming of a\n  file with overwriting the destination.  With :func:`os.rename`, an existing\n  destination file is overwritten under POSIX, but raises an error under\n  Windows.\n  (Contributed by Antoine Pitrou in :issue:`8828`.)\n\n* The stat family of functions (:func:`~os.stat`, :func:`~os.fstat`,\n  and :func:`~os.lstat`) now support reading a file's timestamps\n  with nanosecond precision.  Symmetrically, :func:`~os.utime`\n  can now write file timestamps with nanosecond precision.  (Contributed by\n  Larry Hastings in :issue:`14127`.)\n\n* The new :func:`os.get_terminal_size` function queries the size of the\n  terminal attached to a file descriptor. See also\n  :func:`shutil.get_terminal_size`.\n  (Contributed by Zbigniew J\u0119drzejewski-Szmek in :issue:`13609`.)\n\n.. XXX sort out this mess after beta1\n\n* New functions to support Linux extended attributes (:issue:`12720`):\n  :func:`~os.getxattr`, :func:`~os.listxattr`, :func:`~os.removexattr`,\n  :func:`~os.setxattr`.\n\n* New interface to the scheduler. These functions\n  control how a process is allocated CPU time by the operating system. New\n  functions:\n  :func:`~os.sched_get_priority_max`, :func:`~os.sched_get_priority_min`,\n  :func:`~os.sched_getaffinity`, :func:`~os.sched_getparam`,\n  :func:`~os.sched_getscheduler`, :func:`~os.sched_rr_get_interval`,\n  :func:`~os.sched_setaffinity`, :func:`~os.sched_setparam`,\n  :func:`~os.sched_setscheduler`, :func:`~os.sched_yield`,\n\n* New functions to control the file system:\n\n  * :func:`~os.posix_fadvise`: Announces an intention to access data in a\n    specific pattern thus allowing the kernel to make optimizations.\n  * :func:`~os.posix_fallocate`: Ensures that enough disk space is allocated\n    for a file.\n  * :func:`~os.sync`: Force write of everything to disk.\n\n* Additional new  posix functions:\n\n  * :func:`~os.lockf`: Apply, test or remove a POSIX lock on an open file descriptor.\n  * :func:`~os.pread`: Read from a file descriptor at an offset, the file\n    offset remains unchanged.\n  * :func:`~os.pwrite`: Write to a file descriptor from an offset, leaving\n    the file offset unchanged.\n  * :func:`~os.readv`: Read from a file descriptor into a number of writable buffers.\n  * :func:`~os.truncate`: Truncate the file corresponding to *path*, so that\n    it is at most *length* bytes in size.\n  * :func:`~os.waitid`: Wait for the completion of one or more child processes.\n  * :func:`~os.writev`: Write the contents of *buffers* to a file descriptor,\n    where *buffers* is an arbitrary sequence of buffers.\n  * :func:`~os.getgrouplist` (:issue:`9344`): Return list of group ids that\n    specified user belongs to.\n\n* :func:`~os.times` and :func:`~os.uname`: Return type changed from a tuple to\n  a tuple-like object with named attributes.\n\n* Some platforms now support additional constants for the :func:`~os.lseek`\n  function, such as ``os.SEEK_HOLE`` and ``os.SEEK_DATA``.\n\n* New constants :data:`~os.RTLD_LAZY`, :data:`~os.RTLD_NOW`,\n  :data:`~os.RTLD_GLOBAL`, :data:`~os.RTLD_LOCAL`, :data:`~os.RTLD_NODELETE`,\n  :data:`~os.RTLD_NOLOAD`, and :data:`~os.RTLD_DEEPBIND` are available on\n  platforms that support them.   These are for use with the\n  :func:`sys.setdlopenflags` function, and supersede the similar constants\n  defined in :mod:`ctypes` and :mod:`DLFCN`.  (Contributed by Victor Stinner\n  in :issue:`13226`.)\n\n* :func:`os.symlink` now accepts (and ignores) the ``target_is_directory``\n  keyword argument on non-Windows platforms, to ease cross-platform support.\n\n\npdb\n---\n\nTab-completion is now available not only for command names, but also their\narguments.  For example, for the ``break`` command, function and file names\nare completed.\n\n(Contributed by Georg Brandl in :issue:`14210`)\n\n\npickle\n------\n\n:class:`pickle.Pickler` objects now have an optional\n:attr:`~pickle.Pickler.dispatch_table` attribute allowing per-pickler\nreduction functions to be set.\n\n(Contributed by Richard Oudkerk in :issue:`14166`.)\n\n\npydoc\n-----\n\nThe Tk GUI and the :func:`~pydoc.serve` function have been removed from the\n:mod:`pydoc` module: ``pydoc -g`` and :func:`~pydoc.serve` have been deprecated\nin Python 3.2.\n\n\nre\n--\n\n:class:`str` regular expressions now support ``\\u`` and ``\\U`` escapes.\n\n(Contributed by Serhiy Storchaka in :issue:`3665`.)\n\n\nsched\n-----\n\n* :meth:`~sched.scheduler.run` now accepts a *blocking* parameter which when\n  set to false makes the method execute the scheduled events due to expire\n  soonest (if any) and then return immediately.\n  This is useful in case you want to use the :class:`~sched.scheduler` in\n  non-blocking applications.  (Contributed by Giampaolo Rodol\u00e0 in :issue:`13449`.)\n\n* :class:`~sched.scheduler` class can now be safely used in multi-threaded\n  environments.  (Contributed by Josiah Carlson and Giampaolo Rodol\u00e0 in\n  :issue:`8684`.)\n\n* *timefunc* and *delayfunct* parameters of :class:`~sched.scheduler` class\n  constructor are now optional and defaults to :func:`time.time` and\n  :func:`time.sleep` respectively.  (Contributed by Chris Clark in\n  :issue:`13245`.)\n\n* :meth:`~sched.scheduler.enter` and :meth:`~sched.scheduler.enterabs`\n  *argument* parameter is now optional.  (Contributed by Chris Clark in\n  :issue:`13245`.)\n\n* :meth:`~sched.scheduler.enter` and :meth:`~sched.scheduler.enterabs`\n  now accept a *kwargs* parameter.  (Contributed by Chris Clark in\n  :issue:`13245`.)\n\n\nselect\n------\n\nSolaris and derivative platforms have a new class :class:`select.devpoll`\nfor high performance asynchronous sockets via :file:`/dev/poll`.\n(Contributed by Jes\u00fas Cea Avi\u00f3n in :issue:`6397`.)\n\n\nshlex\n-----\n\nThe previously undocumented helper function ``quote`` from the\n:mod:`pipes` modules has been moved to the :mod:`shlex` module and\ndocumented.  :func:`~shlex.quote` properly escapes all characters in a string\nthat might be otherwise given special meaning by the shell.\n\n\nshutil\n------\n\n* New functions:\n\n  * :func:`~shutil.disk_usage`: provides total, used and free disk space\n    statistics.  (Contributed by Giampaolo Rodol\u00e0 in :issue:`12442`.)\n  * :func:`~shutil.chown`: allows one to change user and/or group of the given\n    path also specifying the user/group names and not only their numeric\n    ids.  (Contributed by Sandro Tosi in :issue:`12191`.)\n  * :func:`shutil.get_terminal_size`: returns the size of the terminal window\n    to which the interpreter is attached.  (Contributed by Zbigniew\n    J\u0119drzejewski-Szmek in :issue:`13609`.)\n\n* :func:`~shutil.copy2` and :func:`~shutil.copystat` now preserve file\n  timestamps with nanosecond precision on platforms that support it.\n  They also preserve file \"extended attributes\" on Linux.  (Contributed\n  by Larry Hastings in :issue:`14127` and  :issue:`15238`.)\n\n* Several functions now take an optional ``symlinks`` argument: when that\n  parameter is true, symlinks aren't dereferenced and the operation instead\n  acts on the symlink itself (or creates one, if relevant).\n  (Contributed by Hynek Schlawack in :issue:`12715`.)\n\n* When copying files to a different file system, :func:`~shutil.move` now\n  handles symlinks the way the posix ``mv`` command does, recreating the\n  symlink rather than copying the target file contents.  (Contributed by\n  Jonathan Niehof in :issue:`9993`.)  :func:`~shutil.move` now also returns\n  the ``dst`` argument as its result.\n\n* :func:`~shutil.rmtree` is now resistant to symlink attacks on platforms\n  which support the new ``dir_fd`` parameter in :func:`os.open` and\n  :func:`os.unlink`.  (Contributed by Martin von L\u00f6wis and Hynek Schlawack\n  in :issue:`4489`.)\n\n\nsignal\n------\n\n* The :mod:`signal` module has new functions:\n\n  * :func:`~signal.pthread_sigmask`: fetch and/or change the signal mask of the\n    calling thread (Contributed by Jean-Paul Calderone in :issue:`8407`);\n  * :func:`~signal.pthread_kill`: send a signal to a thread;\n  * :func:`~signal.sigpending`: examine pending functions;\n  * :func:`~signal.sigwait`: wait a signal;\n  * :func:`~signal.sigwaitinfo`: wait for a signal, returning detailed\n    information about it;\n  * :func:`~signal.sigtimedwait`: like :func:`~signal.sigwaitinfo` but with a\n    timeout.\n\n* The signal handler writes the signal number as a single byte instead of\n  a nul byte into the wakeup file descriptor. So it is possible to wait more\n  than one signal and know which signals were raised.\n\n* :func:`signal.signal` and :func:`signal.siginterrupt` raise an OSError,\n  instead of a RuntimeError: OSError has an errno attribute.\n\n\nsmtpd\n-----\n\nThe :mod:`smtpd` module now supports :rfc:`5321` (extended SMTP) and :rfc:`1870`\n(size extension).  Per the standard, these extensions are enabled if and only\nif the client initiates the session with an ``EHLO`` command.\n\n(Initial ``ELHO`` support by Alberto Trevino.  Size extension by Juhana\nJauhiainen.  Substantial additional work on the patch contributed by Michele\nOrr\u00f9 and Dan Boswell.  :issue:`8739`)\n\n\nsmtplib\n-------\n\nThe :class:`~smtplib.SMTP`, :class:`~smtplib.SMTP_SSL`, and\n:class:`~smtplib.LMTP` classes now accept a ``source_address`` keyword argument\nto specify the ``(host, port)`` to use as the source address in the bind call\nwhen creating the outgoing socket.  (Contributed by Paulo Scardine in\n:issue:`11281`.)\n\n:class:`~smtplib.SMTP` now supports the context management protocol, allowing an\n``SMTP`` instance to be used in a ``with`` statement.  (Contributed\nby Giampaolo Rodol\u00e0 in :issue:`11289`.)\n\nThe :class:`~smtplib.SMTP_SSL` constructor and the :meth:`~smtplib.SMTP.starttls`\nmethod now accept an SSLContext parameter to control parameters of the secure\nchannel.  (Contributed by Kasun Herath in :issue:`8809`.)\n\n\nsocket\n------\n\n* The :class:`~socket.socket` class now exposes additional methods to process\n  ancillary data when supported by the underlying platform:\n\n  * :func:`~socket.socket.sendmsg`\n  * :func:`~socket.socket.recvmsg`\n  * :func:`~socket.socket.recvmsg_into`\n\n  (Contributed by David Watson in :issue:`6560`, based on an earlier patch by\n  Heiko Wundram)\n\n* The :class:`~socket.socket` class now supports the PF_CAN protocol family\n  (https://en.wikipedia.org/wiki/Socketcan), on Linux\n  (https://lwn.net/Articles/253425).\n\n  (Contributed by Matthias Fuchs, updated by Tiago Gon\u00e7alves in :issue:`10141`.)\n\n* The :class:`~socket.socket` class now supports the PF_RDS protocol family\n  (https://en.wikipedia.org/wiki/Reliable_Datagram_Sockets and\n  https://oss.oracle.com/projects/rds/).\n\n* The :class:`~socket.socket` class now supports the ``PF_SYSTEM`` protocol\n  family on OS X.  (Contributed by Michael Goderbauer in :issue:`13777`.)\n\n* New function :func:`~socket.sethostname` allows the hostname to be set\n  on unix systems if the calling process has sufficient privileges.\n  (Contributed by Ross Lagerwall in :issue:`10866`.)\n\n\nsocketserver\n------------\n\n:class:`~socketserver.BaseServer` now has an overridable method\n:meth:`~socketserver.BaseServer.service_actions` that is called by the\n:meth:`~socketserver.BaseServer.serve_forever` method in the service loop.\n:class:`~socketserver.ForkingMixIn` now uses this to clean up zombie\nchild processes.  (Contributed by Justin Warkentin in :issue:`11109`.)\n\n\nsqlite3\n-------\n\nNew :class:`sqlite3.Connection` method\n:meth:`~sqlite3.Connection.set_trace_callback` can be used to capture a trace of\nall sql commands processed by sqlite.  (Contributed by Torsten Landschoff\nin :issue:`11688`.)\n\n\nssl\n---\n\n* The :mod:`ssl` module has two new random generation functions:\n\n  * :func:`~ssl.RAND_bytes`: generate cryptographically strong\n    pseudo-random bytes.\n  * :func:`~ssl.RAND_pseudo_bytes`: generate pseudo-random bytes.\n\n  (Contributed by Victor Stinner in :issue:`12049`.)\n\n* The :mod:`ssl` module now exposes a finer-grained exception hierarchy\n  in order to make it easier to inspect the various kinds of errors.\n  (Contributed by Antoine Pitrou in :issue:`11183`.)\n\n* :meth:`~ssl.SSLContext.load_cert_chain` now accepts a *password* argument\n  to be used if the private key is encrypted.\n  (Contributed by Adam Simpkins in :issue:`12803`.)\n\n* Diffie-Hellman key exchange, both regular and Elliptic Curve-based, is\n  now supported through the :meth:`~ssl.SSLContext.load_dh_params` and\n  :meth:`~ssl.SSLContext.set_ecdh_curve` methods.\n  (Contributed by Antoine Pitrou in :issue:`13626` and :issue:`13627`.)\n\n* SSL sockets have a new :meth:`~ssl.SSLSocket.get_channel_binding` method\n  allowing the implementation of certain authentication mechanisms such as\n  SCRAM-SHA-1-PLUS.  (Contributed by Jacek Konieczny in :issue:`12551`.)\n\n* You can query the SSL compression algorithm used by an SSL socket, thanks\n  to its new :meth:`~ssl.SSLSocket.compression` method.  The new attribute\n  :attr:`~ssl.OP_NO_COMPRESSION` can be used to disable compression.\n  (Contributed by Antoine Pitrou in :issue:`13634`.)\n\n* Support has been added for the Next Protocol Negotiation extension using\n  the :meth:`ssl.SSLContext.set_npn_protocols` method.\n  (Contributed by Colin Marc in :issue:`14204`.)\n\n* SSL errors can now be introspected more easily thanks to\n  :attr:`~ssl.SSLError.library` and :attr:`~ssl.SSLError.reason` attributes.\n  (Contributed by Antoine Pitrou in :issue:`14837`.)\n\n* The :func:`~ssl.get_server_certificate` function now supports IPv6.\n  (Contributed by Charles-Fran\u00e7ois Natali in :issue:`11811`.)\n\n* New attribute :attr:`~ssl.OP_CIPHER_SERVER_PREFERENCE` allows setting\n  SSLv3 server sockets to use the server's cipher ordering preference rather\n  than the client's (:issue:`13635`).\n\n\nstat\n----\n\nThe undocumented tarfile.filemode function has been moved to\n:func:`stat.filemode`. It can be used to convert a file's mode to a string of\nthe form '-rwxrwxrwx'.\n\n(Contributed by Giampaolo Rodol\u00e0 in :issue:`14807`.)\n\n\nstruct\n------\n\nThe :mod:`struct` module now supports ``ssize_t`` and ``size_t`` via the\nnew codes ``n`` and ``N``, respectively.  (Contributed by Antoine Pitrou\nin :issue:`3163`.)\n\n\nsubprocess\n----------\n\nCommand strings can now be bytes objects on posix platforms.  (Contributed by\nVictor Stinner in :issue:`8513`.)\n\nA new constant :data:`~subprocess.DEVNULL` allows suppressing output in a\nplatform-independent fashion.  (Contributed by Ross Lagerwall in\n:issue:`5870`.)\n\n\nsys\n---\n\nThe :mod:`sys` module has a new :data:`~sys.thread_info` :term:`named\ntuple` holding information about the thread implementation\n(:issue:`11223`).\n\n\ntarfile\n-------\n\n:mod:`tarfile` now supports ``lzma`` encoding via the :mod:`lzma` module.\n(Contributed by Lars Gust\u00e4bel in :issue:`5689`.)\n\n\ntempfile\n--------\n\n:class:`tempfile.SpooledTemporaryFile`\\'s\n:meth:`~tempfile.SpooledTemporaryFile.truncate` method now accepts\na ``size`` parameter.  (Contributed by Ryan Kelly in :issue:`9957`.)\n\n\ntextwrap\n--------\n\nThe :mod:`textwrap` module has a new :func:`~textwrap.indent` that makes\nit straightforward to add a common prefix to selected lines in a block\nof text  (:issue:`13857`).\n\n\nthreading\n---------\n\n:class:`threading.Condition`, :class:`threading.Semaphore`,\n:class:`threading.BoundedSemaphore`, :class:`threading.Event`, and\n:class:`threading.Timer`, all of which used to be factory functions returning a\nclass instance, are now classes and may be subclassed.  (Contributed by \u00c9ric\nAraujo in :issue:`10968`.)\n\nThe :class:`threading.Thread` constructor now accepts a ``daemon`` keyword\nargument to override the default behavior of inheriting the ``daemon`` flag\nvalue from the parent thread (:issue:`6064`).\n\nThe formerly private function ``_thread.get_ident`` is now available as the\npublic function :func:`threading.get_ident`.  This eliminates several cases of\ndirect access to the ``_thread`` module in the stdlib.  Third party code that\nused ``_thread.get_ident`` should likewise be changed to use the new public\ninterface.\n\n\ntime\n----\n\nThe :pep:`418` added new functions to the :mod:`time` module:\n\n* :func:`~time.get_clock_info`: Get information on a clock.\n* :func:`~time.monotonic`: Monotonic clock (cannot go backward), not affected\n  by system clock updates.\n* :func:`~time.perf_counter`: Performance counter with the highest available\n  resolution to measure a short duration.\n* :func:`~time.process_time`: Sum of the system and user CPU time of the\n  current process.\n\nOther new functions:\n\n* :func:`~time.clock_getres`, :func:`~time.clock_gettime` and\n  :func:`~time.clock_settime` functions with ``CLOCK_xxx`` constants.\n  (Contributed by Victor Stinner in :issue:`10278`.)\n\nTo improve cross platform consistency, :func:`~time.sleep` now raises a\n:exc:`ValueError` when passed a negative sleep value.  Previously this was an\nerror on posix, but produced an infinite sleep on Windows.\n\n\ntypes\n-----\n\nAdd a new :class:`types.MappingProxyType` class: Read-only proxy of a mapping.\n(:issue:`14386`)\n\n\nThe new functions :func:`types.new_class` and :func:`types.prepare_class` provide support\nfor :pep:`3115` compliant dynamic type creation. (:issue:`14588`)\n\n\nunittest\n--------\n\n:meth:`.assertRaises`, :meth:`.assertRaisesRegex`, :meth:`.assertWarns`, and\n:meth:`.assertWarnsRegex` now accept a keyword argument *msg* when used as\ncontext managers.  (Contributed by Ezio Melotti and Winston Ewert in\n:issue:`10775`.)\n\n:meth:`unittest.TestCase.run` now returns the :class:`~unittest.TestResult`\nobject.\n\n\nurllib\n------\n\nThe :class:`~urllib.request.Request` class, now accepts a *method* argument\nused by :meth:`~urllib.request.Request.get_method` to determine what HTTP method\nshould be used.  For example, this will send a ``'HEAD'`` request::\n\n   >>> urlopen(Request('https://www.python.org', method='HEAD'))\n\n(:issue:`1673007`)\n\n\nwebbrowser\n----------\n\nThe :mod:`webbrowser` module supports more \"browsers\": Google Chrome (named\n:program:`chrome`, :program:`chromium`, :program:`chrome-browser` or\n:program:`chromium-browser` depending on the version and operating system),\nand the generic launchers :program:`xdg-open`, from the FreeDesktop.org\nproject, and :program:`gvfs-open`, which is the default URI handler for GNOME\n3.  (The former contributed by Arnaud Calmettes in :issue:`13620`, the latter\nby Matthias Klose in :issue:`14493`.)\n\n\nxml.etree.ElementTree\n---------------------\n\nThe :mod:`xml.etree.ElementTree` module now imports its C accelerator by\ndefault; there is no longer a need to explicitly import\n:mod:`xml.etree.cElementTree` (this module stays for backwards compatibility,\nbut is now deprecated).  In addition,  the ``iter`` family of methods of\n:class:`~xml.etree.ElementTree.Element` has been optimized (rewritten in C).\nThe module's documentation has also been greatly improved with added examples\nand a more detailed reference.\n\n\nzlib\n----\n\nNew attribute :attr:`zlib.Decompress.eof` makes it possible to distinguish\nbetween a properly-formed compressed stream and an incomplete or truncated one.\n(Contributed by Nadeem Vawda in :issue:`12646`.)\n\nNew attribute :attr:`zlib.ZLIB_RUNTIME_VERSION` reports the version string of\nthe underlying ``zlib`` library that is loaded at runtime.  (Contributed by\nTorsten Landschoff in :issue:`12306`.)\n\n\nOptimizations\n=============\n\nMajor performance enhancements have been added:\n\n* Thanks to :pep:`393`, some operations on Unicode strings have been optimized:\n\n  * the memory footprint is divided by 2 to 4 depending on the text\n  * encode an ASCII string to UTF-8 doesn't need to encode characters anymore,\n    the UTF-8 representation is shared with the ASCII representation\n  * the UTF-8 encoder has been optimized\n  * repeating a single ASCII letter and getting a substring of an ASCII string\n    is 4 times faster\n\n* UTF-8 is now 2x to 4x faster.  UTF-16 encoding is now up to 10x faster.\n\n  (Contributed by Serhiy Storchaka, :issue:`14624`, :issue:`14738` and\n  :issue:`15026`.)\n\n\nBuild and C API Changes\n=======================\n\nChanges to Python's build process and to the C API include:\n\n* New :pep:`3118` related function:\n\n  * :c:func:`PyMemoryView_FromMemory`\n\n* :pep:`393` added new Unicode types, macros and functions:\n\n  * High-level API:\n\n    * :c:func:`PyUnicode_CopyCharacters`\n    * :c:func:`PyUnicode_FindChar`\n    * :c:func:`PyUnicode_GetLength`, :c:macro:`PyUnicode_GET_LENGTH`\n    * :c:func:`PyUnicode_New`\n    * :c:func:`PyUnicode_Substring`\n    * :c:func:`PyUnicode_ReadChar`, :c:func:`PyUnicode_WriteChar`\n\n  * Low-level API:\n\n    * :c:type:`Py_UCS1`, :c:type:`Py_UCS2`, :c:type:`Py_UCS4` types\n    * :c:type:`PyASCIIObject` and :c:type:`PyCompactUnicodeObject` structures\n    * :c:macro:`PyUnicode_READY`\n    * :c:func:`PyUnicode_FromKindAndData`\n    * :c:func:`PyUnicode_AsUCS4`, :c:func:`PyUnicode_AsUCS4Copy`\n    * :c:macro:`PyUnicode_DATA`, :c:macro:`PyUnicode_1BYTE_DATA`,\n      :c:macro:`PyUnicode_2BYTE_DATA`, :c:macro:`PyUnicode_4BYTE_DATA`\n    * :c:macro:`PyUnicode_KIND` with :c:type:`PyUnicode_Kind` enum:\n      :c:data:`PyUnicode_WCHAR_KIND`, :c:data:`PyUnicode_1BYTE_KIND`,\n      :c:data:`PyUnicode_2BYTE_KIND`, :c:data:`PyUnicode_4BYTE_KIND`\n    * :c:macro:`PyUnicode_READ`, :c:macro:`PyUnicode_READ_CHAR`, :c:macro:`PyUnicode_WRITE`\n    * :c:macro:`PyUnicode_MAX_CHAR_VALUE`\n\n* :c:macro:`PyArg_ParseTuple` now accepts a :class:`bytearray` for the ``c``\n  format (:issue:`12380`).\n\n\n\nDeprecated\n==========\n\nUnsupported Operating Systems\n-----------------------------\n\nOS/2 and VMS are no longer supported due to the lack of a maintainer.\n\nWindows 2000 and Windows platforms which set ``COMSPEC`` to ``command.com``\nare no longer supported due to maintenance burden.\n\nOSF support, which was deprecated in 3.2, has been completely removed.\n\n\nDeprecated Python modules, functions and methods\n------------------------------------------------\n\n* Passing a non-empty string to ``object.__format__()`` is deprecated, and\n  will produce a :exc:`TypeError` in Python 3.4 (:issue:`9856`).\n* The ``unicode_internal`` codec has been deprecated because of the\n  :pep:`393`, use UTF-8, UTF-16 (``utf-16-le`` or ``utf-16-be``), or UTF-32\n  (``utf-32-le`` or ``utf-32-be``)\n* :meth:`ftplib.FTP.nlst` and :meth:`ftplib.FTP.dir`: use\n  :meth:`ftplib.FTP.mlsd`\n* :func:`platform.popen`: use the :mod:`subprocess` module. Check especially\n  the :ref:`subprocess-replacements` section (:issue:`11377`).\n* :issue:`13374`: The Windows bytes API has been deprecated in the :mod:`os`\n  module. Use Unicode filenames, instead of bytes filenames, to not depend on\n  the ANSI code page anymore and to support any filename.\n* :issue:`13988`: The :mod:`xml.etree.cElementTree` module is deprecated.  The\n  accelerator is used automatically whenever available.\n* The behaviour of :func:`time.clock` depends on the platform: use the new\n  :func:`time.perf_counter` or :func:`time.process_time` function instead,\n  depending on your requirements, to have a well defined behaviour.\n* The :func:`os.stat_float_times` function is deprecated.\n* :mod:`abc` module:\n\n  * :class:`abc.abstractproperty` has been deprecated, use :class:`property`\n    with :func:`abc.abstractmethod` instead.\n  * :class:`abc.abstractclassmethod` has been deprecated, use\n    :class:`classmethod` with :func:`abc.abstractmethod` instead.\n  * :class:`abc.abstractstaticmethod` has been deprecated, use\n    :class:`staticmethod` with :func:`abc.abstractmethod` instead.\n\n* :mod:`importlib` package:\n\n  * :meth:`importlib.abc.SourceLoader.path_mtime` is now deprecated in favour of\n    :meth:`importlib.abc.SourceLoader.path_stats` as bytecode files now store\n    both the modification time and size of the source file the bytecode file was\n    compiled from.\n\n\n\n\n\nDeprecated functions and types of the C API\n-------------------------------------------\n\nThe :c:type:`Py_UNICODE` has been deprecated by :pep:`393` and will be\nremoved in Python 4. All functions using this type are deprecated:\n\nUnicode functions and methods using :c:type:`Py_UNICODE` and\n:c:type:`Py_UNICODE*` types:\n\n* :c:macro:`PyUnicode_FromUnicode`: use :c:func:`PyUnicode_FromWideChar` or\n  :c:func:`PyUnicode_FromKindAndData`\n* :c:macro:`PyUnicode_AS_UNICODE`, :c:func:`PyUnicode_AsUnicode`,\n  :c:func:`PyUnicode_AsUnicodeAndSize`: use :c:func:`PyUnicode_AsWideCharString`\n* :c:macro:`PyUnicode_AS_DATA`: use :c:macro:`PyUnicode_DATA` with\n  :c:macro:`PyUnicode_READ` and :c:macro:`PyUnicode_WRITE`\n* :c:macro:`PyUnicode_GET_SIZE`, :c:func:`PyUnicode_GetSize`: use\n  :c:macro:`PyUnicode_GET_LENGTH` or :c:func:`PyUnicode_GetLength`\n* :c:macro:`PyUnicode_GET_DATA_SIZE`: use\n  ``PyUnicode_GET_LENGTH(str) * PyUnicode_KIND(str)`` (only work on ready\n  strings)\n* :c:func:`PyUnicode_AsUnicodeCopy`: use :c:func:`PyUnicode_AsUCS4Copy` or\n  :c:func:`PyUnicode_AsWideCharString`\n* :c:func:`PyUnicode_GetMax`\n\n\nFunctions and macros manipulating Py_UNICODE* strings:\n\n* :c:macro:`Py_UNICODE_strlen`: use :c:func:`PyUnicode_GetLength` or\n  :c:macro:`PyUnicode_GET_LENGTH`\n* :c:macro:`Py_UNICODE_strcat`: use :c:func:`PyUnicode_CopyCharacters` or\n  :c:func:`PyUnicode_FromFormat`\n* :c:macro:`Py_UNICODE_strcpy`, :c:macro:`Py_UNICODE_strncpy`,\n  :c:macro:`Py_UNICODE_COPY`: use :c:func:`PyUnicode_CopyCharacters` or\n  :c:func:`PyUnicode_Substring`\n* :c:macro:`Py_UNICODE_strcmp`: use :c:func:`PyUnicode_Compare`\n* :c:macro:`Py_UNICODE_strncmp`: use :c:func:`PyUnicode_Tailmatch`\n* :c:macro:`Py_UNICODE_strchr`, :c:macro:`Py_UNICODE_strrchr`: use\n  :c:func:`PyUnicode_FindChar`\n* :c:macro:`Py_UNICODE_FILL`: use :c:func:`PyUnicode_Fill`\n* :c:macro:`Py_UNICODE_MATCH`\n\nEncoders:\n\n* :c:func:`PyUnicode_Encode`: use :c:func:`PyUnicode_AsEncodedObject`\n* :c:func:`PyUnicode_EncodeUTF7`\n* :c:func:`PyUnicode_EncodeUTF8`: use :c:func:`PyUnicode_AsUTF8` or\n  :c:func:`PyUnicode_AsUTF8String`\n* :c:func:`PyUnicode_EncodeUTF32`\n* :c:func:`PyUnicode_EncodeUTF16`\n* :c:func:`PyUnicode_EncodeUnicodeEscape` use\n  :c:func:`PyUnicode_AsUnicodeEscapeString`\n* :c:func:`PyUnicode_EncodeRawUnicodeEscape` use\n  :c:func:`PyUnicode_AsRawUnicodeEscapeString`\n* :c:func:`PyUnicode_EncodeLatin1`: use :c:func:`PyUnicode_AsLatin1String`\n* :c:func:`PyUnicode_EncodeASCII`: use :c:func:`PyUnicode_AsASCIIString`\n* :c:func:`PyUnicode_EncodeCharmap`\n* :c:func:`PyUnicode_TranslateCharmap`\n* :c:func:`PyUnicode_EncodeMBCS`: use :c:func:`PyUnicode_AsMBCSString` or\n  :c:func:`PyUnicode_EncodeCodePage` (with ``CP_ACP`` code_page)\n* :c:func:`PyUnicode_EncodeDecimal`,\n  :c:func:`PyUnicode_TransformDecimalToASCII`\n\n\nDeprecated features\n-------------------\n\nThe :mod:`array` module's ``'u'`` format code is now deprecated and will be\nremoved in Python 4 together with the rest of the (:c:type:`Py_UNICODE`) API.\n\n\nPorting to Python 3.3\n=====================\n\nThis section lists previously described changes and other bugfixes\nthat may require changes to your code.\n\n.. _portingpythoncode:\n\nPorting Python code\n-------------------\n\n* Hash randomization is enabled by default. Set the :envvar:`PYTHONHASHSEED`\n  environment variable to ``0`` to disable hash randomization. See also the\n  :meth:`object.__hash__` method.\n\n* :issue:`12326`: On Linux, sys.platform doesn't contain the major version\n  anymore. It is now always 'linux', instead of 'linux2' or 'linux3' depending\n  on the Linux version used to build Python. Replace sys.platform == 'linux2'\n  with sys.platform.startswith('linux'), or directly sys.platform == 'linux' if\n  you don't need to support older Python versions.\n\n* :issue:`13847`, :issue:`14180`: :mod:`time` and :mod:`datetime`:\n  :exc:`OverflowError` is now raised instead of :exc:`ValueError` if a\n  timestamp is out of range. :exc:`OSError` is now raised if C functions\n  :c:func:`gmtime` or :c:func:`localtime` failed.\n\n* The default finders used by import now utilize a cache of what is contained\n  within a specific directory. If you create a Python source file or sourceless\n  bytecode file, make sure to call :func:`importlib.invalidate_caches` to clear\n  out the cache for the finders to notice the new file.\n\n* :exc:`ImportError` now uses the full name of the module that was attempted to\n  be imported. Doctests that check ImportErrors' message will need to be\n  updated to use the full name of the module instead of just the tail of the\n  name.\n\n* The *index* argument to :func:`__import__` now defaults to 0 instead of -1\n  and no longer support negative values. It was an oversight when :pep:`328` was\n  implemented that the default value remained -1. If you need to continue to\n  perform a relative import followed by an absolute import, then perform the\n  relative import using an index of 1, followed by another import using an\n  index of 0. It is preferred, though, that you use\n  :func:`importlib.import_module` rather than call :func:`__import__` directly.\n\n* :func:`__import__` no longer allows one to use an index value other than 0\n  for top-level modules. E.g. ``__import__('sys', level=1)`` is now an error.\n\n* Because :attr:`sys.meta_path` and :attr:`sys.path_hooks` now have finders on\n  them by default, you will most likely want to use :meth:`list.insert` instead\n  of :meth:`list.append` to add to those lists.\n\n* Because ``None`` is now inserted into :attr:`sys.path_importer_cache`, if you\n  are clearing out entries in the dictionary of paths that do not have a\n  finder, you will need to remove keys paired with values of ``None`` **and**\n  :class:`imp.NullImporter` to be backwards-compatible. This will lead to extra\n  overhead on older versions of Python that re-insert ``None`` into\n  :attr:`sys.path_importer_cache` where it represents the use of implicit\n  finders, but semantically it should not change anything.\n\n* :class:`importlib.abc.Finder` no longer specifies a `find_module()` abstract\n  method that must be implemented. If you were relying on subclasses to\n  implement that method, make sure to check for the method's existence first.\n  You will probably want to check for `find_loader()` first, though, in the\n  case of working with :term:`path entry finders <path entry finder>`.\n\n* :mod:`pkgutil` has been converted to use :mod:`importlib` internally. This\n  eliminates many edge cases where the old behaviour of the :pep:`302` import\n  emulation failed to match the behaviour of the real import system. The\n  import emulation itself is still present, but is now deprecated. The\n  :func:`pkgutil.iter_importers` and :func:`pkgutil.walk_packages` functions\n  special case the standard import hooks so they are still supported even\n  though they do not provide the non-standard ``iter_modules()`` method.\n\n* A longstanding RFC-compliance bug (:issue:`1079`) in the parsing done by\n  :func:`email.header.decode_header` has been fixed.  Code that uses the\n  standard idiom to convert encoded headers into unicode\n  (``str(make_header(decode_header(h))``) will see no change, but code that\n  looks at the individual tuples returned by decode_header will see that\n  whitespace that precedes or follows ``ASCII`` sections is now included in the\n  ``ASCII`` section.  Code that builds headers using ``make_header`` should\n  also continue to work without change, since ``make_header`` continues to add\n  whitespace between ``ASCII`` and non-``ASCII`` sections if it is not already\n  present in the input strings.\n\n* :func:`email.utils.formataddr` now does the correct content transfer\n  encoding when passed non-``ASCII`` display names.  Any code that depended on\n  the previous buggy behavior that preserved the non-``ASCII`` unicode in the\n  formatted output string will need to be changed (:issue:`1690608`).\n\n* :meth:`poplib.POP3.quit` may now raise protocol errors like all other\n  ``poplib`` methods.  Code that assumes ``quit`` does not raise\n  :exc:`poplib.error_proto` errors may need to be changed if errors on ``quit``\n  are encountered by a particular application (:issue:`11291`).\n\n* The ``strict`` argument to :class:`email.parser.Parser`, deprecated since\n  Python 2.4, has finally been removed.\n\n* The deprecated method ``unittest.TestCase.assertSameElements`` has been\n  removed.\n\n* The deprecated variable ``time.accept2dyear`` has been removed.\n\n* The deprecated ``Context._clamp`` attribute has been removed from the\n  :mod:`decimal` module.  It was previously replaced by the public attribute\n  :attr:`~decimal.Context.clamp`.  (See :issue:`8540`.)\n\n* The undocumented internal helper class ``SSLFakeFile`` has been removed\n  from :mod:`smtplib`, since its functionality has long been provided directly\n  by :meth:`socket.socket.makefile`.\n\n* Passing a negative value to :func:`time.sleep` on Windows now raises an\n  error instead of sleeping forever.  It has always raised an error on posix.\n\n* The ``ast.__version__`` constant has been removed.  If you need to\n  make decisions affected by the AST version, use :attr:`sys.version_info`\n  to make the decision.\n\n* Code that used to work around the fact that the :mod:`threading` module used\n  factory functions by subclassing the private classes will need to change to\n  subclass the now-public classes.\n\n* The undocumented debugging machinery in the threading module has been\n  removed, simplifying the code.  This should have no effect on production\n  code, but is mentioned here in case any application debug frameworks were\n  interacting with it (:issue:`13550`).\n\n\nPorting C code\n--------------\n\n* In the course of changes to the buffer API the undocumented\n  :c:member:`~Py_buffer.smalltable` member of the\n  :c:type:`Py_buffer` structure has been removed and the\n  layout of the :c:type:`PyMemoryViewObject` has changed.\n\n  All extensions relying on the relevant parts in ``memoryobject.h``\n  or ``object.h`` must be rebuilt.\n\n* Due to :ref:`PEP 393 <pep-393>`, the :c:type:`Py_UNICODE` type and all\n  functions using this type are deprecated (but will stay available for\n  at least five years).  If you were using low-level Unicode APIs to\n  construct and access unicode objects and you want to benefit of the\n  memory footprint reduction provided by :pep:`393`, you have to convert\n  your code to the new :doc:`Unicode API <../c-api/unicode>`.\n\n  However, if you only have been using high-level functions such as\n  :c:func:`PyUnicode_Concat()`, :c:func:`PyUnicode_Join` or\n  :c:func:`PyUnicode_FromFormat()`, your code will automatically take\n  advantage of the new unicode representations.\n\n* :c:func:`PyImport_GetMagicNumber` now returns ``-1`` upon failure.\n\n* As a negative value for the *level* argument to :func:`__import__` is no\n  longer valid, the same now holds for :c:func:`PyImport_ImportModuleLevel`.\n  This also means that the value of *level* used by\n  :c:func:`PyImport_ImportModuleEx` is now ``0`` instead of ``-1``.\n\n\nBuilding C extensions\n---------------------\n\n* The range of possible file names for C extensions has been narrowed.\n  Very rarely used spellings have been suppressed: under POSIX, files\n  named ``xxxmodule.so``, ``xxxmodule.abi3.so`` and\n  ``xxxmodule.cpython-*.so`` are no longer recognized as implementing\n  the ``xxx`` module.  If you had been generating such files, you have\n  to switch to the other spellings (i.e., remove the ``module`` string\n  from the file names).\n\n  (implemented in :issue:`14040`.)\n\n\nCommand Line Switch Changes\n---------------------------\n\n* The -Q command-line flag and related artifacts have been removed.  Code\n  checking sys.flags.division_warning will need updating.\n\n  (:issue:`10998`, contributed by \u00c9ric Araujo.)\n\n* When :program:`python` is started with :option:`-S`, ``import site``\n  will no longer add site-specific paths to the module search paths.  In\n  previous versions, it did.\n\n  (:issue:`11591`, contributed by Carl Meyer with editions by \u00c9ric Araujo.)\n",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/whatsnew/2.2.rst": "****************************\n  What's New in Python 2.2\n****************************\n\n:Author: A.M. Kuchling\n\n.. |release| replace:: 1.02\n\n.. $Id: whatsnew22.tex 37315 2004-09-10 19:33:00Z akuchling $\n\n\nIntroduction\n============\n\nThis article explains the new features in Python 2.2.2, released on October 14,\n2002.  Python 2.2.2 is a bugfix release of Python 2.2, originally released on\nDecember 21, 2001.\n\nPython 2.2 can be thought of as the \"cleanup release\".  There are some features\nsuch as generators and iterators that are completely new, but most of the\nchanges, significant and far-reaching though they may be, are aimed at cleaning\nup irregularities and dark corners of the language design.\n\nThis article doesn't attempt to provide a complete specification of the new\nfeatures, but instead provides a convenient overview.  For full details, you\nshould refer to the documentation for Python 2.2, such as the `Python Library\nReference <https://docs.python.org/2.2/lib/lib.html>`_ and the `Python\nReference Manual <https://docs.python.org/2.2/ref/ref.html>`_.  If you want to\nunderstand the complete implementation and design rationale for a change, refer\nto the PEP for a particular new feature.\n\n\n.. see also, now defunct\n\n   http://www.unixreview.com/documents/s=1356/urm0109h/0109h.htm\n      \"What's So Special About Python 2.2?\" is also about the new 2.2 features, and\n      was written by Cameron Laird and Kathryn Soraiz.\n\n.. ======================================================================\n\n\nPEPs 252 and 253: Type and Class Changes\n========================================\n\nThe largest and most far-reaching changes in Python 2.2 are to Python's model of\nobjects and classes.  The changes should be backward compatible, so it's likely\nthat your code will continue to run unchanged, but the changes provide some\namazing new capabilities. Before beginning this, the longest and most\ncomplicated section of this article, I'll provide an overview of the changes and\noffer some comments.\n\nA long time ago I wrote a Web page listing flaws in Python's design.  One of the\nmost significant flaws was that it's impossible to subclass Python types\nimplemented in C.  In particular, it's not possible to subclass built-in types,\nso you can't just subclass, say, lists in order to add a single useful method to\nthem. The :mod:`UserList` module provides a class that supports all of the\nmethods of lists and that can be subclassed further, but there's lots of C code\nthat expects a regular Python list and won't accept a :class:`UserList`\ninstance.\n\nPython 2.2 fixes this, and in the process adds some exciting new capabilities.\nA brief summary:\n\n* You can subclass built-in types such as lists and even integers, and your\n  subclasses should work in every place that requires the original type.\n\n* It's now possible to define static and class methods, in addition to the\n  instance methods available in previous versions of Python.\n\n* It's also possible to automatically call methods on accessing or setting an\n  instance attribute by using a new mechanism called :dfn:`properties`.  Many uses\n  of :meth:`__getattr__` can be rewritten to use properties instead, making the\n  resulting code simpler and faster.  As a small side benefit, attributes can now\n  have docstrings, too.\n\n* The list of legal attributes for an instance can be limited to a particular\n  set using :dfn:`slots`, making it possible to safeguard against typos and\n  perhaps make more optimizations possible in future versions of Python.\n\nSome users have voiced concern about all these changes.  Sure, they say, the new\nfeatures are neat and lend themselves to all sorts of tricks that weren't\npossible in previous versions of Python, but they also make the language more\ncomplicated.  Some people have said that they've always recommended Python for\nits simplicity, and feel that its simplicity is being lost.\n\nPersonally, I think there's no need to worry.  Many of the new features are\nquite esoteric, and you can write a lot of Python code without ever needed to be\naware of them.  Writing a simple class is no more difficult than it ever was, so\nyou don't need to bother learning or teaching them unless they're actually\nneeded.  Some very complicated tasks that were previously only possible from C\nwill now be possible in pure Python, and to my mind that's all for the better.\n\nI'm not going to attempt to cover every single corner case and small change that\nwere required to make the new features work.  Instead this section will paint\nonly the broad strokes.  See section :ref:`sect-rellinks`, \"Related Links\", for\nfurther sources of information about Python 2.2's new object model.\n\n\nOld and New Classes\n-------------------\n\nFirst, you should know that Python 2.2 really has two kinds of classes: classic\nor old-style classes, and new-style classes.  The old-style class model is\nexactly the same as the class model in earlier versions of Python.  All the new\nfeatures described in this section apply only to new-style classes. This\ndivergence isn't intended to last forever; eventually old-style classes will be\ndropped, possibly in Python 3.0.\n\nSo how do you define a new-style class?  You do it by subclassing an existing\nnew-style class.  Most of Python's built-in types, such as integers, lists,\ndictionaries, and even files, are new-style classes now.  A new-style class\nnamed :class:`object`, the base class for all built-in types, has also been\nadded so if no built-in type is suitable, you can just subclass\n:class:`object`::\n\n   class C(object):\n       def __init__ (self):\n           ...\n       ...\n\nThis means that :keyword:`class` statements that don't have any base classes are\nalways classic classes in Python 2.2.  (Actually you can also change this by\nsetting a module-level variable named :attr:`__metaclass__` --- see :pep:`253`\nfor the details --- but it's easier to just subclass :class:`object`.)\n\nThe type objects for the built-in types are available as built-ins, named using\na clever trick.  Python has always had built-in functions named :func:`int`,\n:func:`float`, and :func:`str`.  In 2.2, they aren't functions any more, but\ntype objects that behave as factories when called. ::\n\n   >>> int\n   <type 'int'>\n   >>> int('123')\n   123\n\nTo make the set of types complete, new type objects such as :func:`dict` and\n:func:`file` have been added.  Here's a more interesting example, adding a\n:meth:`lock` method to file objects::\n\n   class LockableFile(file):\n       def lock (self, operation, length=0, start=0, whence=0):\n           import fcntl\n           return fcntl.lockf(self.fileno(), operation,\n                              length, start, whence)\n\nThe now-obsolete :mod:`posixfile` module contained a class that emulated all of\na file object's methods and also added a :meth:`lock` method, but this class\ncouldn't be passed to internal functions that expected a built-in file,\nsomething which is possible with our new :class:`LockableFile`.\n\n\nDescriptors\n-----------\n\nIn previous versions of Python, there was no consistent way to discover what\nattributes and methods were supported by an object. There were some informal\nconventions, such as defining :attr:`__members__` and :attr:`__methods__`\nattributes that were lists of names, but often the author of an extension type\nor a class wouldn't bother to define them.  You could fall back on inspecting\nthe :attr:`~object.__dict__` of an object, but when class inheritance or an arbitrary\n:meth:`__getattr__` hook were in use this could still be inaccurate.\n\nThe one big idea underlying the new class model is that an API for describing\nthe attributes of an object using :dfn:`descriptors` has been formalized.\nDescriptors specify the value of an attribute, stating whether it's a method or\na field.  With the descriptor API, static methods and class methods become\npossible, as well as more exotic constructs.\n\nAttribute descriptors are objects that live inside class objects, and have a few\nattributes of their own:\n\n* :attr:`~definition.__name__` is the attribute's name.\n\n* :attr:`__doc__` is the attribute's docstring.\n\n* ``__get__(object)`` is a method that retrieves the attribute value from\n  *object*.\n\n* ``__set__(object, value)`` sets the attribute on *object* to *value*.\n\n* ``__delete__(object, value)`` deletes the *value*  attribute of *object*.\n\nFor example, when you write ``obj.x``, the steps that Python actually performs\nare::\n\n   descriptor = obj.__class__.x\n   descriptor.__get__(obj)\n\nFor methods, :meth:`descriptor.__get__` returns a temporary object that's\ncallable, and wraps up the instance and the method to be called on it. This is\nalso why static methods and class methods are now possible; they have\ndescriptors that wrap up just the method, or the method and the class.  As a\nbrief explanation of these new kinds of methods, static methods aren't passed\nthe instance, and therefore resemble regular functions.  Class methods are\npassed the class of the object, but not the object itself.  Static and class\nmethods are defined like this::\n\n   class C(object):\n       def f(arg1, arg2):\n           ...\n       f = staticmethod(f)\n\n       def g(cls, arg1, arg2):\n           ...\n       g = classmethod(g)\n\nThe :func:`staticmethod` function takes the function :func:`f`, and returns it\nwrapped up in a descriptor so it can be stored in the class object.  You might\nexpect there to be special syntax for creating such methods (``def static f``,\n``defstatic f()``, or something like that) but no such syntax has been defined\nyet; that's been left for future versions of Python.\n\nMore new features, such as slots and properties, are also implemented as new\nkinds of descriptors, and it's not difficult to write a descriptor class that\ndoes something novel.  For example, it would be possible to write a descriptor\nclass that made it possible to write Eiffel-style preconditions and\npostconditions for a method.  A class that used this feature might be defined\nlike this::\n\n   from eiffel import eiffelmethod\n\n   class C(object):\n       def f(self, arg1, arg2):\n           # The actual function\n           ...\n       def pre_f(self):\n           # Check preconditions\n           ...\n       def post_f(self):\n           # Check postconditions\n           ...\n\n       f = eiffelmethod(f, pre_f, post_f)\n\nNote that a person using the new :func:`eiffelmethod` doesn't have to understand\nanything about descriptors.  This is why I think the new features don't increase\nthe basic complexity of the language. There will be a few wizards who need to\nknow about it in order to write :func:`eiffelmethod` or the ZODB or whatever,\nbut most users will just write code on top of the resulting libraries and ignore\nthe implementation details.\n\n\nMultiple Inheritance: The Diamond Rule\n--------------------------------------\n\nMultiple inheritance has also been made more useful through changing the rules\nunder which names are resolved.  Consider this set of classes (diagram taken\nfrom :pep:`253` by Guido van Rossum)::\n\n         class A:\n           ^ ^  def save(self): ...\n          /   \\\n         /     \\\n        /       \\\n       /         \\\n   class B     class C:\n       ^         ^  def save(self): ...\n        \\       /\n         \\     /\n          \\   /\n           \\ /\n         class D\n\nThe lookup rule for classic classes is simple but not very smart; the base\nclasses are searched depth-first, going from left to right.  A reference to\n:meth:`D.save` will search the classes :class:`D`, :class:`B`, and then\n:class:`A`, where :meth:`save` would be found and returned.  :meth:`C.save`\nwould never be found at all.  This is bad, because if :class:`C`'s :meth:`save`\nmethod is saving some internal state specific to :class:`C`, not calling it will\nresult in that state never getting saved.\n\nNew-style classes follow a different algorithm that's a bit more complicated to\nexplain, but does the right thing in this situation. (Note that Python 2.3\nchanges this algorithm to one that produces the same results in most cases, but\nproduces more useful results for really complicated inheritance graphs.)\n\n#. List all the base classes, following the classic lookup rule and include a\n   class multiple times if it's visited repeatedly.  In the above example, the list\n   of visited classes is [:class:`D`, :class:`B`, :class:`A`, :class:`C`,\n   :class:`A`].\n\n#. Scan the list for duplicated classes.  If any are found, remove all but one\n   occurrence, leaving the *last* one in the list.  In the above example, the list\n   becomes [:class:`D`, :class:`B`, :class:`C`, :class:`A`] after dropping\n   duplicates.\n\nFollowing this rule, referring to :meth:`D.save` will return :meth:`C.save`,\nwhich is the behaviour we're after.  This lookup rule is the same as the one\nfollowed by Common Lisp.  A new built-in function, :func:`super`, provides a way\nto get at a class's superclasses without having to reimplement Python's\nalgorithm. The most commonly used form will be  ``super(class, obj)``, which\nreturns  a bound superclass object (not the actual class object).  This form\nwill be used in methods to call a method in the superclass; for example,\n:class:`D`'s :meth:`save` method would look like this::\n\n   class D (B,C):\n       def save (self):\n           # Call superclass .save()\n           super(D, self).save()\n           # Save D's private information here\n           ...\n\n:func:`super` can also return unbound superclass objects when called as\n``super(class)`` or ``super(class1, class2)``, but this probably won't\noften be useful.\n\n\nAttribute Access\n----------------\n\nA fair number of sophisticated Python classes define hooks for attribute access\nusing :meth:`__getattr__`; most commonly this is done for convenience, to make\ncode more readable by automatically mapping an attribute access such as\n``obj.parent`` into a method call such as ``obj.get_parent``.  Python 2.2 adds\nsome new ways of controlling attribute access.\n\nFirst, ``__getattr__(attr_name)`` is still supported by new-style classes,\nand nothing about it has changed.  As before, it will be called when an attempt\nis made to access ``obj.foo`` and no attribute named ``foo`` is found in the\ninstance's dictionary.\n\nNew-style classes also support a new method,\n``__getattribute__(attr_name)``.  The difference between the two methods is\nthat :meth:`__getattribute__` is *always* called whenever any attribute is\naccessed, while the old :meth:`__getattr__` is only called if ``foo`` isn't\nfound in the instance's dictionary.\n\nHowever, Python 2.2's support for :dfn:`properties` will often be a simpler way\nto trap attribute references.  Writing a :meth:`__getattr__` method is\ncomplicated because to avoid recursion you can't use regular attribute accesses\ninside them, and instead have to mess around with the contents of\n:attr:`~object.__dict__`. :meth:`__getattr__` methods also end up being called by Python\nwhen it checks for other methods such as :meth:`__repr__` or :meth:`__coerce__`,\nand so have to be written with this in mind. Finally, calling a function on\nevery attribute access results in a sizable performance loss.\n\n:class:`property` is a new built-in type that packages up three functions that\nget, set, or delete an attribute, and a docstring.  For example, if you want to\ndefine a :attr:`size` attribute that's computed, but also settable, you could\nwrite::\n\n   class C(object):\n       def get_size (self):\n           result = ... computation ...\n           return result\n       def set_size (self, size):\n           ... compute something based on the size\n           and set internal state appropriately ...\n\n       # Define a property.  The 'delete this attribute'\n       # method is defined as None, so the attribute\n       # can't be deleted.\n       size = property(get_size, set_size,\n                       None,\n                       \"Storage size of this instance\")\n\nThat is certainly clearer and easier to write than a pair of\n:meth:`__getattr__`/:meth:`__setattr__` methods that check for the :attr:`size`\nattribute and handle it specially while retrieving all other attributes from the\ninstance's :attr:`~object.__dict__`.  Accesses to :attr:`size` are also the only ones\nwhich have to perform the work of calling a function, so references to other\nattributes run at their usual speed.\n\nFinally, it's possible to constrain the list of attributes that can be\nreferenced on an object using the new :attr:`~object.__slots__` class attribute. Python\nobjects are usually very dynamic; at any time it's possible to define a new\nattribute on an instance by just doing ``obj.new_attr=1``.   A new-style class\ncan define a class attribute named :attr:`~object.__slots__` to limit the legal\nattributes  to a particular set of names.  An example will make this clear::\n\n   >>> class C(object):\n   ...     __slots__ = ('template', 'name')\n   ...\n   >>> obj = C()\n   >>> print obj.template\n   None\n   >>> obj.template = 'Test'\n   >>> print obj.template\n   Test\n   >>> obj.newattr = None\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in ?\n   AttributeError: 'C' object has no attribute 'newattr'\n\nNote how you get an :exc:`AttributeError` on the attempt to assign to an\nattribute not listed in :attr:`~object.__slots__`.\n\n\n.. _sect-rellinks:\n\nRelated Links\n-------------\n\nThis section has just been a quick overview of the new features, giving enough\nof an explanation to start you programming, but many details have been\nsimplified or ignored.  Where should you go to get a more complete picture?\n\nhttps://docs.python.org/dev/howto/descriptor.html is a lengthy tutorial introduction to\nthe descriptor features, written by Guido van Rossum. If my description has\nwhetted your appetite, go read this tutorial next, because it goes into much\nmore detail about the new features while still remaining quite easy to read.\n\nNext, there are two relevant PEPs, :pep:`252` and :pep:`253`.  :pep:`252` is\ntitled \"Making Types Look More Like Classes\", and covers the descriptor API.\n:pep:`253` is titled \"Subtyping Built-in Types\", and describes the changes to\ntype objects that make it possible to subtype built-in objects.  :pep:`253` is\nthe more complicated PEP of the two, and at a few points the necessary\nexplanations of types and meta-types may cause your head to explode.  Both PEPs\nwere written and implemented by Guido van Rossum, with substantial assistance\nfrom the rest of the Zope Corp. team.\n\nFinally, there's the ultimate authority: the source code.  Most of the machinery\nfor the type handling is in :file:`Objects/typeobject.c`, but you should only\nresort to it after all other avenues have been exhausted, including posting a\nquestion to python-list or python-dev.\n\n.. ======================================================================\n\n\nPEP 234: Iterators\n==================\n\nAnother significant addition to 2.2 is an iteration interface at both the C and\nPython levels.  Objects can define how they can be looped over by callers.\n\nIn Python versions up to 2.1, the usual way to make ``for item in obj`` work is\nto define a :meth:`__getitem__` method that looks something like this::\n\n   def __getitem__(self, index):\n       return <next item>\n\n:meth:`__getitem__` is more properly used to define an indexing operation on an\nobject so that you can write ``obj[5]`` to retrieve the sixth element.  It's a\nbit misleading when you're using this only to support :keyword:`for` loops.\nConsider some file-like object that wants to be looped over; the *index*\nparameter is essentially meaningless, as the class probably assumes that a\nseries of :meth:`__getitem__` calls will be made with *index* incrementing by\none each time.  In other words, the presence of the :meth:`__getitem__` method\ndoesn't mean that using ``file[5]``  to randomly access the sixth element will\nwork, though it really should.\n\nIn Python 2.2, iteration can be implemented separately, and :meth:`__getitem__`\nmethods can be limited to classes that really do support random access.  The\nbasic idea of iterators is  simple.  A new built-in function, ``iter(obj)``\nor ``iter(C, sentinel)``, is used to get an iterator. ``iter(obj)`` returns\nan iterator for the object *obj*, while ``iter(C, sentinel)`` returns an\niterator that will invoke the callable object *C* until it returns *sentinel* to\nsignal that the iterator is done.\n\nPython classes can define an :meth:`__iter__` method, which should create and\nreturn a new iterator for the object; if the object is its own iterator, this\nmethod can just return ``self``.  In particular, iterators will usually be their\nown iterators.  Extension types implemented in C can implement a :c:member:`~PyTypeObject.tp_iter`\nfunction in order to return an iterator, and extension types that want to behave\nas iterators can define a :c:member:`~PyTypeObject.tp_iternext` function.\n\nSo, after all this, what do iterators actually do?  They have one required\nmethod, :meth:`next`, which takes no arguments and returns the next value.  When\nthere are no more values to be returned, calling :meth:`next` should raise the\n:exc:`StopIteration` exception. ::\n\n   >>> L = [1,2,3]\n   >>> i = iter(L)\n   >>> print i\n   <iterator object at 0x8116870>\n   >>> i.next()\n   1\n   >>> i.next()\n   2\n   >>> i.next()\n   3\n   >>> i.next()\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in ?\n   StopIteration\n   >>>\n\nIn 2.2, Python's :keyword:`for` statement no longer expects a sequence; it\nexpects something for which :func:`iter` will return an iterator. For backward\ncompatibility and convenience, an iterator is automatically constructed for\nsequences that don't implement :meth:`__iter__` or a :c:member:`~PyTypeObject.tp_iter` slot, so\n``for i in [1,2,3]`` will still work.  Wherever the Python interpreter loops\nover a sequence, it's been changed to use the iterator protocol.  This means you\ncan do things like this::\n\n   >>> L = [1,2,3]\n   >>> i = iter(L)\n   >>> a,b,c = i\n   >>> a,b,c\n   (1, 2, 3)\n\nIterator support has been added to some of Python's basic types.   Calling\n:func:`iter` on a dictionary will return an iterator which loops over its keys::\n\n   >>> m = {'Jan': 1, 'Feb': 2, 'Mar': 3, 'Apr': 4, 'May': 5, 'Jun': 6,\n   ...      'Jul': 7, 'Aug': 8, 'Sep': 9, 'Oct': 10, 'Nov': 11, 'Dec': 12}\n   >>> for key in m: print key, m[key]\n   ...\n   Mar 3\n   Feb 2\n   Aug 8\n   Sep 9\n   May 5\n   Jun 6\n   Jul 7\n   Jan 1\n   Apr 4\n   Nov 11\n   Dec 12\n   Oct 10\n\nThat's just the default behaviour.  If you want to iterate over keys, values, or\nkey/value pairs, you can explicitly call the :meth:`iterkeys`,\n:meth:`itervalues`, or :meth:`iteritems` methods to get an appropriate iterator.\nIn a minor related change, the :keyword:`in` operator now works on dictionaries,\nso ``key in dict`` is now equivalent to ``dict.has_key(key)``.\n\nFiles also provide an iterator, which calls the :meth:`readline` method until\nthere are no more lines in the file.  This means you can now read each line of a\nfile using code like this::\n\n   for line in file:\n       # do something for each line\n       ...\n\nNote that you can only go forward in an iterator; there's no way to get the\nprevious element, reset the iterator, or make a copy of it. An iterator object\ncould provide such additional capabilities, but the iterator protocol only\nrequires a :meth:`next` method.\n\n\n.. seealso::\n\n   :pep:`234` - Iterators\n      Written by Ka-Ping Yee and GvR; implemented  by the Python Labs crew, mostly by\n      GvR and Tim Peters.\n\n.. ======================================================================\n\n\nPEP 255: Simple Generators\n==========================\n\nGenerators are another new feature, one that interacts with the introduction of\niterators.\n\nYou're doubtless familiar with how function calls work in Python or C.  When you\ncall a function, it gets a private namespace where its local variables are\ncreated.  When the function reaches a :keyword:`return` statement, the local\nvariables are destroyed and the resulting value is returned to the caller.  A\nlater call to the same function will get a fresh new set of local variables.\nBut, what if the local variables weren't thrown away on exiting a function?\nWhat if you could later resume the function where it left off?  This is what\ngenerators provide; they can be thought of as resumable functions.\n\nHere's the simplest example of a generator function::\n\n   def generate_ints(N):\n       for i in range(N):\n           yield i\n\nA new keyword, :keyword:`yield`, was introduced for generators.  Any function\ncontaining a :keyword:`!yield` statement is a generator function; this is\ndetected by Python's bytecode compiler which compiles the function specially as\na result.  Because a new keyword was introduced, generators must be explicitly\nenabled in a module by including a ``from __future__ import generators``\nstatement near the top of the module's source code.  In Python 2.3 this\nstatement will become unnecessary.\n\nWhen you call a generator function, it doesn't return a single value; instead it\nreturns a generator object that supports the iterator protocol.  On executing\nthe :keyword:`yield` statement, the generator outputs the value of ``i``,\nsimilar to a :keyword:`return` statement.  The big difference between\n:keyword:`!yield` and a :keyword:`!return` statement is that on reaching a\n:keyword:`!yield` the generator's state of execution is suspended and local\nvariables are preserved.  On the next call to the generator's ``next()`` method,\nthe function will resume executing immediately after the :keyword:`!yield`\nstatement.  (For complicated reasons, the :keyword:`!yield` statement isn't\nallowed inside the :keyword:`!try` block of a\n:keyword:`try`...\\ :keyword:`finally` statement; read :pep:`255` for a full\nexplanation of the interaction between :keyword:`!yield` and exceptions.)\n\nHere's a sample usage of the :func:`generate_ints` generator::\n\n   >>> gen = generate_ints(3)\n   >>> gen\n   <generator object at 0x8117f90>\n   >>> gen.next()\n   0\n   >>> gen.next()\n   1\n   >>> gen.next()\n   2\n   >>> gen.next()\n   Traceback (most recent call last):\n     File \"<stdin>\", line 1, in ?\n     File \"<stdin>\", line 2, in generate_ints\n   StopIteration\n\nYou could equally write ``for i in generate_ints(5)``, or ``a,b,c =\ngenerate_ints(3)``.\n\nInside a generator function, the :keyword:`return` statement can only be used\nwithout a value, and signals the end of the procession of values; afterwards the\ngenerator cannot return any further values. :keyword:`!return` with a value, such\nas ``return 5``, is a syntax error inside a generator function.  The end of the\ngenerator's results can also be indicated by raising :exc:`StopIteration`\nmanually, or by just letting the flow of execution fall off the bottom of the\nfunction.\n\nYou could achieve the effect of generators manually by writing your own class\nand storing all the local variables of the generator as instance variables.  For\nexample, returning a list of integers could be done by setting ``self.count`` to\n0, and having the :meth:`next` method increment ``self.count`` and return it.\nHowever, for a moderately complicated generator, writing a corresponding class\nwould be much messier. :file:`Lib/test/test_generators.py` contains a number of\nmore interesting examples.  The simplest one implements an in-order traversal of\na tree using generators recursively. ::\n\n   # A recursive generator that generates Tree leaves in in-order.\n   def inorder(t):\n       if t:\n           for x in inorder(t.left):\n               yield x\n           yield t.label\n           for x in inorder(t.right):\n               yield x\n\nTwo other examples in :file:`Lib/test/test_generators.py` produce solutions for\nthe N-Queens problem (placing $N$ queens on an $NxN$ chess board so that no\nqueen threatens another) and the Knight's Tour (a route that takes a knight to\nevery square of an $NxN$ chessboard without visiting any square twice).\n\nThe idea of generators comes from other programming languages, especially Icon\n(https://www.cs.arizona.edu/icon/), where the idea of generators is central.  In\nIcon, every expression and function call behaves like a generator.  One example\nfrom \"An Overview of the Icon Programming Language\" at\nhttps://www.cs.arizona.edu/icon/docs/ipd266.htm gives an idea of what this looks\nlike::\n\n   sentence := \"Store it in the neighboring harbor\"\n   if (i := find(\"or\", sentence)) > 5 then write(i)\n\nIn Icon the :func:`find` function returns the indexes at which the substring\n\"or\" is found: 3, 23, 33.  In the :keyword:`if` statement, ``i`` is first\nassigned a value of 3, but 3 is less than 5, so the comparison fails, and Icon\nretries it with the second value of 23.  23 is greater than 5, so the comparison\nnow succeeds, and the code prints the value 23 to the screen.\n\nPython doesn't go nearly as far as Icon in adopting generators as a central\nconcept.  Generators are considered a new part of the core Python language, but\nlearning or using them isn't compulsory; if they don't solve any problems that\nyou have, feel free to ignore them. One novel feature of Python's interface as\ncompared to Icon's is that a generator's state is represented as a concrete\nobject (the iterator) that can be passed around to other functions or stored in\na data structure.\n\n\n.. seealso::\n\n   :pep:`255` - Simple Generators\n      Written by Neil Schemenauer, Tim Peters, Magnus Lie Hetland.  Implemented mostly\n      by Neil Schemenauer and Tim Peters, with other fixes from the Python Labs crew.\n\n.. ======================================================================\n\n\nPEP 237: Unifying Long Integers and Integers\n============================================\n\nIn recent versions, the distinction between regular integers, which are 32-bit\nvalues on most machines, and long integers, which can be of arbitrary size, was\nbecoming an annoyance.  For example, on platforms that support files larger than\n``2**32`` bytes, the :meth:`tell` method of file objects has to return a long\ninteger. However, there were various bits of Python that expected plain integers\nand would raise an error if a long integer was provided instead.  For example,\nin Python 1.5, only regular integers could be used as a slice index, and\n``'abc'[1L:]`` would raise a :exc:`TypeError` exception with the message 'slice\nindex must be int'.\n\nPython 2.2 will shift values from short to long integers as required. The 'L'\nsuffix is no longer needed to indicate a long integer literal, as now the\ncompiler will choose the appropriate type.  (Using the 'L' suffix will be\ndiscouraged in future 2.x versions of Python, triggering a warning in Python\n2.4, and probably dropped in Python 3.0.)  Many operations that used to raise an\n:exc:`OverflowError` will now return a long integer as their result.  For\nexample::\n\n   >>> 1234567890123\n   1234567890123L\n   >>> 2 ** 64\n   18446744073709551616L\n\nIn most cases, integers and long integers will now be treated identically.  You\ncan still distinguish them with the :func:`type` built-in function, but that's\nrarely needed.\n\n\n.. seealso::\n\n   :pep:`237` - Unifying Long Integers and Integers\n      Written by Moshe Zadka and Guido van Rossum.  Implemented mostly by Guido van\n      Rossum.\n\n.. ======================================================================\n\n\nPEP 238: Changing the Division Operator\n=======================================\n\nThe most controversial change in Python 2.2 heralds the start of an effort to\nfix an old design flaw that's been in Python from the beginning. Currently\nPython's division operator, ``/``, behaves like C's division operator when\npresented with two integer arguments: it returns an integer result that's\ntruncated down when there would be a fractional part.  For example, ``3/2`` is\n1, not 1.5, and ``(-1)/2`` is -1, not -0.5.  This means that the results of\ndivision can vary unexpectedly depending on the type of the two operands and\nbecause Python is dynamically typed, it can be difficult to determine the\npossible types of the operands.\n\n(The controversy is over whether this is *really* a design flaw, and whether\nit's worth breaking existing code to fix this.  It's caused endless discussions\non python-dev, and in July 2001 erupted into a storm of acidly sarcastic\npostings on :newsgroup:`comp.lang.python`. I won't argue for either side here\nand will stick to describing what's  implemented in 2.2.  Read :pep:`238` for a\nsummary of arguments and counter-arguments.)\n\nBecause this change might break code, it's being introduced very gradually.\nPython 2.2 begins the transition, but the switch won't be complete until Python\n3.0.\n\nFirst, I'll borrow some terminology from :pep:`238`.  \"True division\" is the\ndivision that most non-programmers are familiar with: 3/2 is 1.5, 1/4 is 0.25,\nand so forth.  \"Floor division\" is what Python's ``/`` operator currently does\nwhen given integer operands; the result is the floor of the value returned by\ntrue division.  \"Classic division\" is the current mixed behaviour of ``/``; it\nreturns the result of floor division when the operands are integers, and returns\nthe result of true division when one of the operands is a floating-point number.\n\nHere are the changes 2.2 introduces:\n\n* A new operator, ``//``, is the floor division operator. (Yes, we know it looks\n  like C++'s comment symbol.)  ``//`` *always* performs floor division no matter\n  what the types of its operands are, so ``1 // 2`` is 0 and ``1.0 // 2.0`` is\n  also 0.0.\n\n  ``//`` is always available in Python 2.2; you don't need to enable it using a\n  ``__future__`` statement.\n\n* By including a ``from __future__ import division`` in a module, the ``/``\n  operator will be changed to return the result of true division, so ``1/2`` is\n  0.5.  Without the ``__future__`` statement, ``/`` still means classic division.\n  The default meaning of ``/`` will not change until Python 3.0.\n\n* Classes can define methods called :meth:`__truediv__` and :meth:`__floordiv__`\n  to overload the two division operators.  At the C level, there are also slots in\n  the :c:type:`PyNumberMethods` structure so extension types can define the two\n  operators.\n\n* Python 2.2 supports some command-line arguments for testing whether code will\n  work with the changed division semantics.  Running python with :option:`!-Q\n  warn` will cause a warning to be issued whenever division is applied to two\n  integers.  You can use this to find code that's affected by the change and fix\n  it.  By default, Python 2.2 will simply perform classic division without a\n  warning; the warning will be turned on by default in Python 2.3.\n\n\n.. seealso::\n\n   :pep:`238` - Changing the Division Operator\n      Written by Moshe Zadka and  Guido van Rossum.  Implemented by Guido van Rossum..\n\n.. ======================================================================\n\n\nUnicode Changes\n===============\n\nPython's Unicode support has been enhanced a bit in 2.2.  Unicode strings are\nusually stored as UCS-2, as 16-bit unsigned integers. Python 2.2 can also be\ncompiled to use UCS-4, 32-bit unsigned integers, as its internal encoding by\nsupplying :option:`!--enable-unicode=ucs4` to the configure script.   (It's also\npossible to specify :option:`!--disable-unicode` to completely disable Unicode\nsupport.)\n\nWhen built to use UCS-4 (a \"wide Python\"), the interpreter can natively handle\nUnicode characters from U+000000 to U+110000, so the range of legal values for\nthe :func:`unichr` function is expanded accordingly.  Using an interpreter\ncompiled to use UCS-2 (a \"narrow Python\"), values greater than 65535 will still\ncause :func:`unichr` to raise a :exc:`ValueError` exception. This is all\ndescribed in :pep:`261`, \"Support for 'wide' Unicode characters\"; consult it for\nfurther details.\n\nAnother change is simpler to explain. Since their introduction, Unicode strings\nhave supported an :meth:`encode` method to convert the string to a selected\nencoding such as UTF-8 or Latin-1.  A symmetric ``decode([*encoding*])``\nmethod has been added to 8-bit strings (though not to Unicode strings) in 2.2.\n:meth:`decode` assumes that the string is in the specified encoding and decodes\nit, returning whatever is returned by the codec.\n\nUsing this new feature, codecs have been added for tasks not directly related to\nUnicode.  For example, codecs have been added for uu-encoding, MIME's base64\nencoding, and compression with the :mod:`zlib` module::\n\n   >>> s = \"\"\"Here is a lengthy piece of redundant, overly verbose,\n   ... and repetitive text.\n   ... \"\"\"\n   >>> data = s.encode('zlib')\n   >>> data\n   'x\\x9c\\r\\xc9\\xc1\\r\\x80 \\x10\\x04\\xc0?Ul...'\n   >>> data.decode('zlib')\n   'Here is a lengthy piece of redundant, overly verbose,\\nand repetitive text.\\n'\n   >>> print s.encode('uu')\n   begin 666 <data>\n   M2&5R92!I<R!A(&QE;F=T:'D@<&EE8V4@;V8@<F5D=6YD86YT+\"!O=F5R;'D@\n   >=F5R8F]S92P*86YD(')E<&5T:71I=F4@=&5X=\"X*\n\n   end\n   >>> \"sheesh\".encode('rot-13')\n   'furrfu'\n\nTo convert a class instance to Unicode, a :meth:`__unicode__` method can be\ndefined by a class, analogous to :meth:`__str__`.\n\n:meth:`encode`, :meth:`decode`, and :meth:`__unicode__` were implemented by\nMarc-Andr\u00e9 Lemburg.  The changes to support using UCS-4 internally were\nimplemented by Fredrik Lundh and Martin von L\u00f6wis.\n\n\n.. seealso::\n\n   :pep:`261` - Support for 'wide' Unicode characters\n      Written by Paul Prescod.\n\n.. ======================================================================\n\n\nPEP 227: Nested Scopes\n======================\n\nIn Python 2.1, statically nested scopes were added as an optional feature, to be\nenabled by a ``from __future__ import nested_scopes`` directive.  In 2.2 nested\nscopes no longer need to be specially enabled, and are now always present.  The\nrest of this section is a copy of the description of nested scopes from my\n\"What's New in Python 2.1\" document; if you read it when 2.1 came out, you can\nskip the rest of this section.\n\nThe largest change introduced in Python 2.1, and made complete in 2.2, is to\nPython's scoping rules.  In Python 2.0, at any given time there are at most\nthree namespaces used to look up variable names: local, module-level, and the\nbuilt-in namespace.  This often surprised people because it didn't match their\nintuitive expectations.  For example, a nested recursive function definition\ndoesn't work::\n\n   def f():\n       ...\n       def g(value):\n           ...\n           return g(value-1) + 1\n       ...\n\nThe function :func:`g` will always raise a :exc:`NameError` exception, because\nthe binding of the name ``g`` isn't in either its local namespace or in the\nmodule-level namespace.  This isn't much of a problem in practice (how often do\nyou recursively define interior functions like this?), but this also made using\nthe :keyword:`lambda` expression clumsier, and this was a problem in practice.\nIn code which uses :keyword:`!lambda` you can often find local variables being\ncopied by passing them as the default values of arguments. ::\n\n   def find(self, name):\n       \"Return list of any entries equal to 'name'\"\n       L = filter(lambda x, name=name: x == name,\n                  self.list_attribute)\n       return L\n\nThe readability of Python code written in a strongly functional style suffers\ngreatly as a result.\n\nThe most significant change to Python 2.2 is that static scoping has been added\nto the language to fix this problem.  As a first effect, the ``name=name``\ndefault argument is now unnecessary in the above example.  Put simply, when a\ngiven variable name is not assigned a value within a function (by an assignment,\nor the :keyword:`def`, :keyword:`class`, or :keyword:`import` statements),\nreferences to the variable will be looked up in the local namespace of the\nenclosing scope.  A more detailed explanation of the rules, and a dissection of\nthe implementation, can be found in the PEP.\n\nThis change may cause some compatibility problems for code where the same\nvariable name is used both at the module level and as a local variable within a\nfunction that contains further function definitions. This seems rather unlikely\nthough, since such code would have been pretty confusing to read in the first\nplace.\n\nOne side effect of the change is that the ``from module import *`` and\n``exec`` statements have been made illegal inside a function scope under\ncertain conditions.  The Python reference manual has said all along that ``from\nmodule import *`` is only legal at the top level of a module, but the CPython\ninterpreter has never enforced this before.  As part of the implementation of\nnested scopes, the compiler which turns Python source into bytecodes has to\ngenerate different code to access variables in a containing scope.  ``from\nmodule import *`` and ``exec`` make it impossible for the compiler to\nfigure this out, because they add names to the local namespace that are\nunknowable at compile time. Therefore, if a function contains function\ndefinitions or :keyword:`lambda` expressions with free variables, the compiler\nwill flag this by raising a :exc:`SyntaxError` exception.\n\nTo make the preceding explanation a bit clearer, here's an example::\n\n   x = 1\n   def f():\n       # The next line is a syntax error\n       exec 'x=2'\n       def g():\n           return x\n\nLine 4 containing the ``exec`` statement is a syntax error, since\n``exec`` would define a new local variable named ``x`` whose value should\nbe accessed by :func:`g`.\n\nThis shouldn't be much of a limitation, since ``exec`` is rarely used in\nmost Python code (and when it is used, it's often a sign of a poor design\nanyway).\n\n\n.. seealso::\n\n   :pep:`227` - Statically Nested Scopes\n      Written and implemented by Jeremy Hylton.\n\n.. ======================================================================\n\n\nNew and Improved Modules\n========================\n\n* The :mod:`xmlrpclib` module was contributed to the standard library by Fredrik\n  Lundh, providing support for writing XML-RPC clients.  XML-RPC is a simple\n  remote procedure call protocol built on top of HTTP and XML. For example, the\n  following snippet retrieves a list of RSS channels from the O'Reilly Network,\n  and then  lists the recent headlines for one channel::\n\n     import xmlrpclib\n     s = xmlrpclib.Server(\n           'http://www.oreillynet.com/meerkat/xml-rpc/server.php')\n     channels = s.meerkat.getChannels()\n     # channels is a list of dictionaries, like this:\n     # [{'id': 4, 'title': 'Freshmeat Daily News'}\n     #  {'id': 190, 'title': '32Bits Online'},\n     #  {'id': 4549, 'title': '3DGamers'}, ... ]\n\n     # Get the items for one channel\n     items = s.meerkat.getItems( {'channel': 4} )\n\n     # 'items' is another list of dictionaries, like this:\n     # [{'link': 'http://freshmeat.net/releases/52719/',\n     #   'description': 'A utility which converts HTML to XSL FO.',\n     #   'title': 'html2fo 0.3 (Default)'}, ... ]\n\n  The :mod:`SimpleXMLRPCServer` module makes it easy to create straightforward\n  XML-RPC servers.  See http://xmlrpc.scripting.com/ for more information about XML-RPC.\n\n* The new :mod:`hmac` module implements the HMAC algorithm described by\n  :rfc:`2104`. (Contributed by Gerhard H\u00e4ring.)\n\n* Several functions that originally returned lengthy tuples now return\n  pseudo-sequences that still behave like tuples but also have mnemonic attributes such\n  as memberst_mtime or :attr:`tm_year`. The enhanced functions include\n  :func:`stat`, :func:`fstat`, :func:`statvfs`, and :func:`fstatvfs` in the\n  :mod:`os` module, and :func:`localtime`, :func:`gmtime`, and :func:`strptime` in\n  the :mod:`time` module.\n\n  For example, to obtain a file's size using the old tuples, you'd end up writing\n  something like ``file_size = os.stat(filename)[stat.ST_SIZE]``, but now this can\n  be written more clearly as ``file_size = os.stat(filename).st_size``.\n\n  The original patch for this feature was contributed by Nick Mathewson.\n\n* The Python profiler has been extensively reworked and various errors in its\n  output have been corrected.  (Contributed by Fred L. Drake, Jr. and Tim Peters.)\n\n* The :mod:`socket` module can be compiled to support IPv6; specify the\n  :option:`!--enable-ipv6` option to Python's configure script.  (Contributed by\n  Jun-ichiro \"itojun\" Hagino.)\n\n* Two new format characters were added to the :mod:`struct` module for 64-bit\n  integers on platforms that support the C :c:type:`long long` type.  ``q`` is for\n  a signed 64-bit integer, and ``Q`` is for an unsigned one.  The value is\n  returned in Python's long integer type.  (Contributed by Tim Peters.)\n\n* In the interpreter's interactive mode, there's a new built-in function\n  :func:`help` that uses the :mod:`pydoc` module introduced in Python 2.1 to\n  provide interactive help. ``help(object)`` displays any available help text\n  about *object*.  :func:`help` with no argument puts you in an online help\n  utility, where you can enter the names of functions, classes, or modules to read\n  their help text. (Contributed by Guido van Rossum, using Ka-Ping Yee's\n  :mod:`pydoc` module.)\n\n* Various bugfixes and performance improvements have been made to the SRE engine\n  underlying the :mod:`re` module.  For example, the :func:`re.sub` and\n  :func:`re.split` functions have been rewritten in C.  Another contributed patch\n  speeds up certain Unicode character ranges by a factor of two, and a new\n  :meth:`finditer`  method that returns an iterator over all the non-overlapping\n  matches in  a given string.  (SRE is maintained by Fredrik Lundh.  The\n  BIGCHARSET patch was contributed by Martin von L\u00f6wis.)\n\n* The :mod:`smtplib` module now supports :rfc:`2487`, \"Secure SMTP over TLS\", so\n  it's now possible to encrypt the SMTP traffic between a Python program and the\n  mail transport agent being handed a message.  :mod:`smtplib` also supports SMTP\n  authentication.  (Contributed by Gerhard H\u00e4ring.)\n\n* The :mod:`imaplib` module, maintained by Piers Lauder, has support for several\n  new extensions: the NAMESPACE extension defined in :rfc:`2342`, SORT, GETACL and\n  SETACL.  (Contributed by Anthony Baxter and Michel Pelletier.)\n\n* The :mod:`rfc822` module's parsing of email addresses is now compliant with\n  :rfc:`2822`, an update to :rfc:`822`.  (The module's name is *not* going to be\n  changed to ``rfc2822``.)  A new package, :mod:`email`, has also been added for\n  parsing and generating e-mail messages.  (Contributed by Barry Warsaw, and\n  arising out of his work on Mailman.)\n\n* The :mod:`difflib` module now contains a new :class:`Differ` class for\n  producing human-readable lists of changes (a \"delta\") between two sequences of\n  lines of text.  There are also two generator functions, :func:`ndiff` and\n  :func:`restore`, which respectively return a delta from two sequences, or one of\n  the original sequences from a delta. (Grunt work contributed by David Goodger,\n  from ndiff.py code by Tim Peters who then did the generatorization.)\n\n* New constants :const:`ascii_letters`, :const:`ascii_lowercase`, and\n  :const:`ascii_uppercase` were added to the :mod:`string` module.  There were\n  several modules in the standard library that used :const:`string.letters` to\n  mean the ranges A-Za-z, but that assumption is incorrect when locales are in\n  use, because :const:`string.letters` varies depending on the set of legal\n  characters defined by the current locale.  The buggy modules have all been fixed\n  to use :const:`ascii_letters` instead. (Reported by an unknown person; fixed by\n  Fred L. Drake, Jr.)\n\n* The :mod:`mimetypes` module now makes it easier to use alternative MIME-type\n  databases by the addition of a :class:`MimeTypes` class, which takes a list of\n  filenames to be parsed.  (Contributed by Fred L. Drake, Jr.)\n\n* A :class:`Timer` class was added to the :mod:`threading` module that allows\n  scheduling an activity to happen at some future time.  (Contributed by Itamar\n  Shtull-Trauring.)\n\n.. ======================================================================\n\n\nInterpreter Changes and Fixes\n=============================\n\nSome of the changes only affect people who deal with the Python interpreter at\nthe C level because they're writing Python extension modules, embedding the\ninterpreter, or just hacking on the interpreter itself. If you only write Python\ncode, none of the changes described here will affect you very much.\n\n* Profiling and tracing functions can now be implemented in C, which can operate\n  at much higher speeds than Python-based functions and should reduce the overhead\n  of profiling and tracing.  This  will be of interest to authors of development\n  environments for Python.  Two new C functions were added to Python's API,\n  :c:func:`PyEval_SetProfile` and :c:func:`PyEval_SetTrace`. The existing\n  :func:`sys.setprofile` and :func:`sys.settrace` functions still exist, and have\n  simply been changed to use the new C-level interface.  (Contributed by Fred L.\n  Drake, Jr.)\n\n* Another low-level API, primarily of interest to implementors of Python\n  debuggers and development tools, was added. :c:func:`PyInterpreterState_Head` and\n  :c:func:`PyInterpreterState_Next` let a caller walk through all the existing\n  interpreter objects; :c:func:`PyInterpreterState_ThreadHead` and\n  :c:func:`PyThreadState_Next` allow looping over all the thread states for a given\n  interpreter.  (Contributed by David Beazley.)\n\n* The C-level interface to the garbage collector has been changed to make it\n  easier to write extension types that support garbage collection and to debug\n  misuses of the functions. Various functions have slightly different semantics,\n  so a bunch of functions had to be renamed.  Extensions that use the old API will\n  still compile but will *not* participate in garbage collection, so updating them\n  for 2.2 should be considered fairly high priority.\n\n  To upgrade an extension module to the new API, perform the following steps:\n\n* Rename :c:func:`Py_TPFLAGS_GC` to :c:func:`PyTPFLAGS_HAVE_GC`.\n\n* Use :c:func:`PyObject_GC_New` or :c:func:`PyObject_GC_NewVar` to allocate\n    objects, and :c:func:`PyObject_GC_Del` to deallocate them.\n\n* Rename :c:func:`PyObject_GC_Init` to :c:func:`PyObject_GC_Track` and\n    :c:func:`PyObject_GC_Fini` to :c:func:`PyObject_GC_UnTrack`.\n\n* Remove :c:func:`PyGC_HEAD_SIZE` from object size calculations.\n\n* Remove calls to :c:func:`PyObject_AS_GC` and :c:func:`PyObject_FROM_GC`.\n\n* A new ``et`` format sequence was added to :c:func:`PyArg_ParseTuple`; ``et``\n  takes both a parameter and an encoding name, and converts the parameter to the\n  given encoding if the parameter turns out to be a Unicode string, or leaves it\n  alone if it's an 8-bit string, assuming it to already be in the desired\n  encoding.  This differs from the ``es`` format character, which assumes that\n  8-bit strings are in Python's default ASCII encoding and converts them to the\n  specified new encoding. (Contributed by M.-A. Lemburg, and used for the MBCS\n  support on Windows described in the following section.)\n\n* A different argument parsing function, :c:func:`PyArg_UnpackTuple`, has been\n  added that's simpler and presumably faster.  Instead of specifying a format\n  string, the caller simply gives the minimum and maximum number of arguments\n  expected, and a set of pointers to :c:type:`PyObject\\*` variables that will be\n  filled in with argument values.\n\n* Two new flags :const:`METH_NOARGS` and :const:`METH_O` are available in method\n  definition tables to simplify implementation of methods with no arguments or a\n  single untyped argument. Calling such methods is more efficient than calling a\n  corresponding method that uses :const:`METH_VARARGS`.  Also, the old\n  :const:`METH_OLDARGS` style of writing C methods is  now officially deprecated.\n\n* Two new wrapper functions, :c:func:`PyOS_snprintf` and :c:func:`PyOS_vsnprintf`\n  were added to provide  cross-platform implementations for the relatively new\n  :c:func:`snprintf` and :c:func:`vsnprintf` C lib APIs. In contrast to the standard\n  :c:func:`sprintf` and :c:func:`vsprintf` functions, the Python versions check the\n  bounds of the buffer used to protect against buffer overruns. (Contributed by\n  M.-A. Lemburg.)\n\n* The :c:func:`_PyTuple_Resize` function has lost an unused parameter, so now it\n  takes 2 parameters instead of 3.  The third argument was never used, and can\n  simply be discarded when porting code from earlier versions to Python 2.2.\n\n.. ======================================================================\n\n\nOther Changes and Fixes\n=======================\n\nAs usual there were a bunch of other improvements and bugfixes scattered\nthroughout the source tree.  A search through the CVS change logs finds there\nwere 527 patches applied and 683 bugs fixed between Python 2.1 and 2.2; 2.2.1\napplied 139 patches and fixed 143 bugs; 2.2.2 applied 106 patches and fixed 82\nbugs.  These figures are likely to be underestimates.\n\nSome of the more notable changes are:\n\n* The code for the MacOS port for Python, maintained by Jack Jansen, is now kept\n  in the main Python CVS tree, and many changes have been made to support MacOS X.\n\n  The most significant change is the ability to build Python as a framework,\n  enabled by supplying the :option:`!--enable-framework` option to the configure\n  script when compiling Python.  According to Jack Jansen, \"This installs a\n  self-contained Python installation plus the OS X framework \"glue\" into\n  :file:`/Library/Frameworks/Python.framework` (or another location of choice).\n  For now there is little immediate added benefit to this (actually, there is the\n  disadvantage that you have to change your PATH to be able to find Python), but\n  it is the basis for creating a full-blown Python application, porting the\n  MacPython IDE, possibly using Python as a standard OSA scripting language and\n  much more.\"\n\n  Most of the MacPython toolbox modules, which interface to MacOS APIs such as\n  windowing, QuickTime, scripting, etc. have been ported to OS X, but they've been\n  left commented out in :file:`setup.py`.  People who want to experiment with\n  these modules can uncomment them manually.\n\n  .. Jack's original comments:\n     The main change is the possibility to build Python as a\n     framework. This installs a self-contained Python installation plus the\n     OSX framework \"glue\" into /Library/Frameworks/Python.framework (or\n     another location of choice). For now there is little immediate added\n     benefit to this (actually, there is the disadvantage that you have to\n     change your PATH to be able to find Python), but it is the basis for\n     creating a fullblown Python application, porting the MacPython IDE,\n     possibly using Python as a standard OSA scripting language and much\n     more. You enable this with \"configure --enable-framework\".\n     The other change is that most MacPython toolbox modules, which\n     interface to all the MacOS APIs such as windowing, quicktime,\n     scripting, etc. have been ported. Again, most of these are not of\n     immediate use, as they need a full application to be really useful, so\n     they have been commented out in setup.py. People wanting to experiment\n     can uncomment them. Gestalt and Internet Config modules are enabled by\n     default.\n\n* Keyword arguments passed to built-in functions that don't take them now cause a\n  :exc:`TypeError` exception to be raised, with the message \"*function* takes no\n  keyword arguments\".\n\n* Weak references, added in Python 2.1 as an extension module, are now part of\n  the core because they're used in the implementation of new-style classes.  The\n  :exc:`ReferenceError` exception has therefore moved from the :mod:`weakref`\n  module to become a built-in exception.\n\n* A new script, :file:`Tools/scripts/cleanfuture.py` by Tim Peters,\n  automatically removes obsolete ``__future__`` statements from Python source\n  code.\n\n* An additional *flags* argument has been added to the built-in function\n  :func:`compile`, so the behaviour of ``__future__`` statements can now be\n  correctly observed in simulated shells, such as those presented by IDLE and\n  other development environments.  This is described in :pep:`264`. (Contributed\n  by Michael Hudson.)\n\n* The new license introduced with Python 1.6 wasn't GPL-compatible.  This is\n  fixed by some minor textual changes to the 2.2 license, so it's now legal to\n  embed Python inside a GPLed program again.  Note that Python itself is not\n  GPLed, but instead is under a license that's essentially equivalent to the BSD\n  license, same as it always was.  The license changes were also applied to the\n  Python 2.0.1 and 2.1.1 releases.\n\n* When presented with a Unicode filename on Windows, Python will now convert it\n  to an MBCS encoded string, as used by the Microsoft file APIs.  As MBCS is\n  explicitly used by the file APIs, Python's choice of ASCII as the default\n  encoding turns out to be an annoyance.  On Unix, the locale's character set is\n  used if ``locale.nl_langinfo(CODESET)`` is available.  (Windows support was\n  contributed by Mark Hammond with assistance from Marc-Andr\u00e9 Lemburg. Unix\n  support was added by Martin von L\u00f6wis.)\n\n* Large file support is now enabled on Windows.  (Contributed by Tim Peters.)\n\n* The :file:`Tools/scripts/ftpmirror.py` script now parses a :file:`.netrc`\n  file, if you have one. (Contributed by Mike Romberg.)\n\n* Some features of the object returned by the :func:`xrange` function are now\n  deprecated, and trigger warnings when they're accessed; they'll disappear in\n  Python 2.3. :class:`xrange` objects tried to pretend they were full sequence\n  types by supporting slicing, sequence multiplication, and the :keyword:`in`\n  operator, but these features were rarely used and therefore buggy.  The\n  :meth:`tolist` method and the :attr:`start`, :attr:`stop`, and :attr:`step`\n  attributes are also being deprecated.  At the C level, the fourth argument to\n  the :c:func:`PyRange_New` function, ``repeat``, has also been deprecated.\n\n* There were a bunch of patches to the dictionary implementation, mostly to fix\n  potential core dumps if a dictionary contains objects that sneakily changed\n  their hash value, or mutated the dictionary they were contained in. For a while\n  python-dev fell into a gentle rhythm of Michael Hudson finding a case that\n  dumped core, Tim Peters fixing the bug, Michael finding another case, and round\n  and round it went.\n\n* On Windows, Python can now be compiled with Borland C thanks to a number of\n  patches contributed by Stephen Hansen, though the result isn't fully functional\n  yet.  (But this *is* progress...)\n\n* Another Windows enhancement: Wise Solutions generously offered PythonLabs use\n  of their InstallerMaster 8.1 system.  Earlier PythonLabs Windows installers used\n  Wise 5.0a, which was beginning to show its age.  (Packaged up by Tim Peters.)\n\n* Files ending in ``.pyw`` can now be imported on Windows. ``.pyw`` is a\n  Windows-only thing, used to indicate that a script needs to be run using\n  PYTHONW.EXE instead of PYTHON.EXE in order to prevent a DOS console from popping\n  up to display the output.  This patch makes it possible to import such scripts,\n  in case they're also usable as modules.  (Implemented by David Bolen.)\n\n* On platforms where Python uses the C :c:func:`dlopen` function  to load\n  extension modules, it's now possible to set the flags used  by :c:func:`dlopen`\n  using the :func:`sys.getdlopenflags` and :func:`sys.setdlopenflags` functions.\n  (Contributed by Bram Stolk.)\n\n* The :func:`pow` built-in function no longer supports 3 arguments when\n  floating-point numbers are supplied. ``pow(x, y, z)`` returns ``(x**y) % z``,\n  but this is never useful for floating point numbers, and the final result varies\n  unpredictably depending on the platform.  A call such as ``pow(2.0, 8.0, 7.0)``\n  will now raise a :exc:`TypeError` exception.\n\n.. ======================================================================\n\n\nAcknowledgements\n================\n\nThe author would like to thank the following people for offering suggestions,\ncorrections and assistance with various drafts of this article: Fred Bremmer,\nKeith Briggs, Andrew Dalke, Fred L. Drake, Jr., Carel Fellinger, David Goodger,\nMark Hammond, Stephen Hansen, Michael Hudson, Jack Jansen, Marc-Andr\u00e9 Lemburg,\nMartin von L\u00f6wis, Fredrik Lundh, Michael McLay, Nick Mathewson, Paul Moore,\nGustavo Niemeyer, Don O'Donnell, Joonas Paalasma, Tim Peters, Jens Quade, Tom\nReinhardt, Neil Schemenauer, Guido van Rossum, Greg Ward, Edward Welbourne.\n\n"
    },
    "skipped": [
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/classicAppCompat.cat",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pythonwx150.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/launcher.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/logox128.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/py.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/idlex150.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pyd.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pythonx50.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/setup.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pythonwx44.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/py.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pyc.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pythonx150.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/python.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/idlex44.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/launcher.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pyc.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/setup.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pyd.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pythonw.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pythonx44.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/python.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/py.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/icons/pythonw.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/PC/bdist_wininst/PythonPowered.bmp",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/ensurepip/_bundled/pip-20.2.3-py2.py3-none-any.whl",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/ensurepip/_bundled/setuptools-49.2.1-py3-none-any.whl",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_source_encoding.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/zipdir.zip",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/zip_cp437_header.zip",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/badsyntax_pep3120.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/testtar.tar",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/pstats.pck",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sgml_input.html",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/Sine-1000Hz-300ms.aif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiotest.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.tiff",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.pbm",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.exr",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.bmp",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.sgi",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.ras",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.webp",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.pgm",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.ppm",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/imghdrdata/python.jpg",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.aifc",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.hcom",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.voc",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.aiff",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.wav",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.sndt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/sndhdrdata/sndhdr.8svx",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/namespace_pkgs/top_level_portion1.zip",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/namespace_pkgs/missing_directory.zip",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/namespace_pkgs/nested_portion1.zip",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/data/example-21.12-py3.6.egg",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/data/example-21.12-py3-none-any.whl",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/data01/utf-16.file",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/zipdata01/ziptestdata.zip",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_importlib/zipdata02/ziptestdata.zip",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm32.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm16.aiff",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm32.aiff",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm16.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm24.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm24.aiff",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-ulaw.aifc",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-alaw.aifc",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-ulaw.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm24.wav",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm8.wav",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm16.wav",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm8.aiff",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm8.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/audiodata/pluck-pcm32.wav",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/xmltestdata/test.xml",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/xmltestdata/test.xml.out",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_email/data/PyBanner048.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/test_email/data/audiotest.au",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/encoded_modules/module_koi8_r.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/encoded_modules/module_iso_8859_1.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/shift_jisx0213.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/euc_kr.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/euc_jp.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/shift_jis.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/johab.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/big5.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/cp949.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/big5hkscs.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/euc_jisx0213.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/gb18030.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/gb2312.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/test/cjkencodings/gbk.txt",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-14.0.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-10.0.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-9.0.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-10.0-amd64.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-8.0.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-7.1.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-6.0.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-14.0-amd64.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/distutils/command/wininst-9.0-amd64.exe",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/sqlite3/test/transactions.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/sqlite3/test/dbapi.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/sqlite3/test/types.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/sqlite3/test/factory.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/sqlite3/test/hooks.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/sqlite3/test/regression.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/tk.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle_32.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle.ico",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/minusnode.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/plusnode.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle_16.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle_48.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/python.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle_16.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle_32.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/openfolder.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/folder.gif",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle_256.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Lib/idlelib/Icons/idle_48.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Tools/msi/bundle/SideBar.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Tools/test2to3/setup.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Tools/i18n/pygettext.py",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/IDLE/IDLE.app/Contents/Resources/PythonCompiled.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/IDLE/IDLE.app/Contents/Resources/IDLE.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/IDLE/IDLE.app/Contents/Resources/PythonSource.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/BuildScript/resources/background.jpg",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Icons/Disk Image.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Icons/PythonCompiled.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Icons/Python Folder.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Icons/IDLE.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Icons/PythonLauncher.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Icons/PythonSource.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/iconsrc/IDE.psd",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/iconsrc/PythonApplet.psd",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/iconsrc/PackageManager.psd",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/iconsrc/PythonWSource.psd",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/iconsrc/PythonSource.psd",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/iconsrc/PythonIcon.psd",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/iconsrc/PythonCompiled.psd",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/app/Resources/PythonApplet.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/Resources/app/Resources/PythonInterpreter.icns",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/PythonLauncher/English.lproj/MyDocument.nib/objects.nib",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/PythonLauncher/English.lproj/MainMenu.nib/objects.nib",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Mac/PythonLauncher/English.lproj/PreferenceWindow.nib/objects.nib",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/faq/python-video-icon.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/using/win_installer.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/tulip_coro.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/tulip_coro.dia",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/turtle-star.pdf",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/pathlib-inheritance.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/turtle-star.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/library/hashlib-blake2-tree.png",
        "/var/tmp/sochat1/spack-stage/spack-stage-python-3.8.8-n5vs6oind4hv3wrdqbqftqz3rr2jk2at/spack-src/Doc/howto/logging_flow.png"
    ],
    "total_files": 4012
}