{
    "matches": {
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/tests/cp/nfs-removal-race.sh": "#!/bin/sh\n# Running cp S D on an NFS client while another client has just removed D\n# would lead (w/coreutils-8.16 and earlier) to cp's initial stat call\n# seeing (via stale NFS cache) that D exists, so that cp would then call\n# open without the O_CREAT flag.  Yet, the open must actually consult\n# the server, which confesses that D has been deleted, thus causing the\n# open call to fail with ENOENT.\n#\n# This test simulates that situation by intercepting stat for a nonexistent\n# destination, D, and making the stat fill in the result struct for another\n# file and return 0.\n#\n# This test is skipped on systems that lack LD_PRELOAD support; that's fine.\n# Similarly, on a system that lacks <dlfcn.h> or __xstat, skipping it is fine.\n\n# Copyright (C) 2012-2014 Free Software Foundation, Inc.\n\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n\n# You should have received a copy of the GNU General Public License\n# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n. \"${srcdir=.}/tests/init.sh\"; path_prepend_ ./src\nprint_ver_ cp\nrequire_gcc_shared_\n\n# Replace each stat call with a call to this wrapper.\ncat > k.c <<'EOF' || framework_failure_\n#define _GNU_SOURCE\n#include <sys/types.h>\n#include <dlfcn.h>\n\n#define __xstat __xstat_orig\n\n#include <sys/stat.h>\n#include <stddef.h>\n\n#undef __xstat\n\nint\n__xstat (int ver, const char *path, struct stat *st)\n{\n  static int (*real_stat)(int ver, const char *path, struct stat *st) = NULL;\n  if (!real_stat)\n    real_stat = dlsym (RTLD_NEXT, \"__xstat\");\n  /* When asked to stat nonexistent \"d\",\n     return results suggesting it exists. */\n  return real_stat (ver, *path == 'd' && path[1] == 0 ? \"d2\" : path, st);\n}\nEOF\n\n# Then compile/link it:\ngcc_shared_ k.c k.so \\\n  || framework_failure_ 'failed to build shared library'\n\ntouch d2 || framework_failure_\necho xyz > src || framework_failure_\n\n# Finally, run the test:\nLD_PRELOAD=./k.so cp src d || fail=1\n\ncompare src d || fail=1\nExit $fail\n"
    },
    "skipped": [
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/lt.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/fi.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/bg.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ga.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/et.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ro.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/sv.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/hr.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ia.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/uk.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/pt_BR.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/sl.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ja.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/pt.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/fr.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ms.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/eu.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/de.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/id.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/af.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/be.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/nl.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/eo.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/hu.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/sk.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/nb.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/cs.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/kk.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/pl.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/gl.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/vi.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/zh_CN.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/el.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/da.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/zh_TW.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/lg.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/es.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/it.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ko.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ca.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/ru.gmo",
        "/tmp/vanessa/spack-stage/spack-stage-coreutils-8.23-asct6wccj3yxpkqg2gyhmsv4w2yvbmjh/spack-src/po/tr.gmo"
    ],
    "total_files": 2403
}