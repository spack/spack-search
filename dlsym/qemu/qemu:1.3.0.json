{
    "matches": {
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/seabios/tools/kconfig/kconfig_load.c": "#include <dlfcn.h>\n#include <stdio.h>\n#include <stdlib.h>\n\n#include \"lkc.h\"\n\n#define P(name,type,arg)\ttype (*name ## _p) arg\n#include \"lkc_proto.h\"\n#undef P\n\nvoid kconfig_load(void)\n{\n\tvoid *handle;\n\tchar *error;\n\n\thandle = dlopen(\"./libkconfig.so\", RTLD_LAZY);\n\tif (!handle) {\n\t\thandle = dlopen(\"./tools/kconfig/libkconfig.so\", RTLD_LAZY);\n\t\tif (!handle) {\n\t\t\tfprintf(stderr, \"%s\\n\", dlerror());\n\t\t\texit(1);\n\t\t}\n\t}\n\n#define P(name,type,arg)\t\t\t\\\n{\t\t\t\t\t\t\\\n\tname ## _p = dlsym(handle, #name);\t\\\n        if ((error = dlerror()))  {\t\t\\\n                fprintf(stderr, \"%s\\n\", error);\t\\\n\t\texit(1);\t\t\t\\\n\t}\t\t\t\t\t\\\n}\n#include \"lkc_proto.h\"\n#undef P\n}\n",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/openbios/arch/unix/plugins.c": "/* tag: plugin interface for openbios forth kernel\n *\n * Copyright (C) 2003, 2004 Stefan Reinauer\n *\n * See the file \"COPYING\" for further information about\n * the copyright and warranty status of this work.\n */\n\n#include \"sysinclude.h\"\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <dlfcn.h>\n\n#include \"unix/plugins.h\"\n\nunsigned char *plugindir = \"/usr/share/OpenBIOS/plugins\";\n#define PLUGINDIR  plugindir\n#define PATHSIZE   256\n\n#define CONFIG_DEBUG_PLUGINS\n\ntypedef struct iorange iorange_t;\nstruct iorange {\n\tconst char *name;\n\tunsigned int start;\n\tunsigned int end;\n\tio_ops_t *ops;\n\tiorange_t *next;\n};\n\nstatic iorange_t *ioranges = NULL;\n\ntypedef struct plugin plugin_t;\nstruct plugin {\n\tconst char *name;\n\tplugin_t *next;\n};\n\nstatic plugin_t *plugins = NULL;\n\nio_ops_t *find_iorange(u32 reg)\n{\n\tiorange_t *range = ioranges;\n\twhile (range) {\n\t\tif (range->start <= reg && range->end >= reg)\n\t\t\treturn range->ops;\n\t\trange = range->next;\n\t}\n\treturn NULL;\n}\n\nint register_iorange(const char *name, io_ops_t * ops, unsigned int rstart,\n\t\t     unsigned int rend)\n{\n\tiorange_t *newrange;\n\n\t/* intersection check */\n\tnewrange = ioranges;\n\twhile (newrange) {\n\t\tint fail = 0;\n\t\t/* new section swallows old section */\n\t\tif (newrange->start >= rstart && newrange->end <= rend)\n\t\t\tfail = -1;\n\t\t/* new section start or end point are within range */\n\t\tif (newrange->start <= rstart && newrange->end >= rstart)\n\t\t\tfail = -1;\n\t\tif (newrange->start <= rend && newrange->end >= rend)\n\t\t\tfail = -1;\n\t\tif (fail) {\n\t\t\tprintf(\"Error: overlapping IO regions: %s and %s\\n\",\n\t\t\t\tnewrange->name, name);\n\t\t\treturn -1;\n\t\t}\n\t\tnewrange = newrange->next;\n\t}\n\n\tnewrange = malloc(sizeof(iorange_t));\n\n\tnewrange->name = name;\n\tnewrange->ops = ops;\n\tnewrange->start = rstart;\n\tnewrange->end = rend;\n\tnewrange->next = ioranges;\n\n\tioranges = newrange;\n\n\treturn 0;\n}\n\nint is_loaded(const char *plugin_name)\n{\n\tplugin_t *p = plugins;\n\twhile (p) {\n\t\tif (!strcmp(plugin_name, p->name))\n\t\t\treturn -1;\n\t\tp = p->next;\n\t}\n\treturn 0;\n}\n\nint load_plugin(const char *plugin_name)\n{\n\tvoid *handle;\n\tchar *error;\n\tchar path[PATHSIZE];\n\n\tint (*init_plugin) (void);\n\tchar **deps;\n\tchar **plugin_info;\n\tplugin_t *p;\n\n\tif (is_loaded(plugin_name)) {\n\t\tprintf(\"Plugin %s already loaded.\\n\", plugin_name);\n\t\treturn 0;\n\t}\n\n\tstrncpy(path, PLUGINDIR, PATHSIZE);\n\tstrncat(path, \"/plugin_\", PATHSIZE);\n\tstrncat(path, plugin_name, PATHSIZE);\n\tstrncat(path, \".so\", PATHSIZE);\n\n#if DEBUG\n\tprintf(\"Opening plugin %s\\n\", path);\n#endif\n\n\thandle = dlopen(path, RTLD_LAZY | RTLD_GLOBAL);\n\tif (!handle) {\n\t\terror = dlerror();\n\t\tprintf(\"Error: Could not open plugin \\\"%s\\\": %s\\n\",\n\t\t       plugin_name, error);\n\t\texit(1);\n\t}\n#ifdef CONFIG_DEBUG_PLUGINS\n\tplugin_info = dlsym(handle, \"plugin_author\");\n\tif ((error = dlerror()) == NULL)\n\t\tprintf(\"Plugin %s author:  %s\\n\", plugin_name, *plugin_info);\n\tplugin_info = dlsym(handle, \"plugin_license\");\n\tif ((error = dlerror()) == NULL)\n\t\tprintf(\"Plugin %s license: %s\\n\", plugin_name, *plugin_info);\n\tplugin_info = dlsym(handle, \"plugin_description\");\n\tif ((error = dlerror()) == NULL)\n\t\tprintf(\"Plugin %s descr.: %s\\n\", plugin_name, *plugin_info);\n#endif\n\tp = malloc(sizeof(plugin_t));\n\tp->next = plugins;\n\tp->name = plugin_name;\n\tplugins = p;\n\n\tdeps = dlsym(handle, \"plugin_deps\");\n\tif ((error = dlerror()) != NULL)\n\t\tdeps = NULL;\n\n\n\tstrncpy(path, \"plugin_\", PATHSIZE);\n\tstrncat(path, plugin_name, PATHSIZE);\n\tstrncat(path, \"_init\", PATHSIZE);\n\n\tinit_plugin = dlsym(handle, path);\n\tif ((error = dlerror()) != NULL) {\n\t\tprintf(\"error: %s\\n\", error);\n\t\texit(1);\n\t}\n\n\tif (deps) {\n\t\tint i = 0;\n\t\tchar *walk = deps[0];\n#ifdef CONFIG_DEBUG_PLUGINS\n\t\tprintf(\"\\nPlugin %s dependencies:\", plugin_name);\n#endif\n\t\twhile (walk) {\n\t\t\tprintf(\" %s\", walk);\n\t\t\tif (!is_loaded(walk)) {\n#ifdef CONFIG_DEBUG_PLUGINS\n\t\t\t\tprintf(\"(loading)\\n\");\n#endif\n\t\t\t\tload_plugin(walk);\n\t\t\t}\n#ifdef CONFIG_DEBUG_PLUGINS\n\t\t\telse {\n\t\t\t\tprintf(\"(loaded)\");\n\t\t\t}\n#endif\n\t\t\twalk = deps[++i];\n\t\t}\n\t}\n\n\tprintf(\"\\n\");\n#if DEBUG\n\tprintf(\"Initializing module:\\n\");\n#endif\n\n\treturn init_plugin();\n\n\t// We don't dlclose the handle here since\n\t// we want to keep our symbols for later use.\n}\n",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/openbios/arch/unix/plugins/loader.c": "/* tag: openbios plugin loader\n *\n * Copyright (C) 2003 Stefan Reinauer\n *\n * See the file \"COPYING\" for further information about\n * the copyright and warranty status of this work.\n */\n\n/* This is a simple plugin loader. OpenBIOS duplicates some\n * of this code in kernel/arch/unix/plugins.c. This code is\n * here for reference and simple testing.\n */\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <dlfcn.h>\n#include <unistd.h>\t\t// sleep\n\n#include \"unix/plugins.h\"\n\n#define PLUGINDIR  \"/usr/share/OpenBIOS/plugins\"\n#define PATHSIZE   256\n\n#define DEBUG_PLUGINS\n\ntypedef struct iorange iorange_t;\nstruct iorange {\n\tconst char *name;\n\tunsigned int start;\n\tunsigned int end;\n\tio_ops_t *ops;\n\tiorange_t *next;\n};\n\niorange_t *ioranges = NULL;\n\ntypedef struct plugin plugin_t;\nstruct plugin {\n\tconst char *name;\n\tplugin_t *next;\n};\n\nplugin_t *plugins = NULL;\n\nint register_iorange(const char *name, io_ops_t * ops, unsigned int rstart,\n\t\t     unsigned int rend)\n{\n\tiorange_t *newrange;\n\n\t/* intersection check */\n\tnewrange = ioranges;\n\twhile (newrange) {\n\t\tint fail = 0;\n\t\t/* new section swallows old section */\n\t\tif (newrange->start >= rstart && newrange->end <= rend)\n\t\t\tfail = -1;\n\t\t/* new section start or end point are within range */\n\t\tif (newrange->start <= rstart && newrange->end >= rstart)\n\t\t\tfail = -1;\n\t\tif (newrange->start <= rend && newrange->end >= rend)\n\t\t\tfail = -1;\n\t\tif (fail) {\n\t\t\tprintf(\"Error: overlapping IO regions: %s and %s\\n\",\n\t\t\t     newrange->name, name);\n\t\t\treturn -1;\n\t\t}\n\t\tnewrange = newrange->next;\n\t}\n\n\tnewrange = malloc(sizeof(iorange_t));\n\n\tnewrange->name = name;\n\tnewrange->ops = ops;\n\tnewrange->start = rstart;\n\tnewrange->end = rend;\n\tnewrange->next = ioranges;\n\n\tioranges = newrange;\n\n\treturn 0;\n}\n\nint is_loaded(const char *plugin_name)\n{\n\tplugin_t *p = plugins;\n\twhile (p) {\n\t\tif (!strcmp(plugin_name, p->name))\n\t\t\treturn -1;\n\t\tp = p->next;\n\t}\n\treturn 0;\n}\n\nint load_plugin(const char *plugin_name)\n{\n\tvoid *handle;\n\tchar *error;\n\tchar path[PATHSIZE];\n\n\tint (*init_plugin) (void);\n\tchar **deps;\n\tchar **plugin_info;\n\tplugin_t *p;\n\n\tif (is_loaded(plugin_name)) {\n\t\tprintf(\"Plugin %s already loaded.\\n\", plugin_name);\n\t\treturn 0;\n\t}\n\n\tstrncpy(path, PLUGINDIR, PATHSIZE);\n\tstrncat(path, \"/plugin_\", PATHSIZE);\n\tstrncat(path, plugin_name, PATHSIZE);\n\tstrncat(path, \".so\", PATHSIZE);\n\n#if DEBUG\n\tprintf(\"Opening plugin %s\\n\", path);\n#endif\n\n\thandle = dlopen(path, RTLD_LAZY | RTLD_GLOBAL);\n\tif (!handle) {\n\t\terror = dlerror();\n\t\tprintf(\"Error: Could not open plugin \\\"%s\\\": %s\\n\",\n\t\t       plugin_name, error);\n\t\texit(1);\n\t}\n#ifdef DEBUG_PLUGINS\n\tplugin_info = dlsym(handle, \"plugin_author\");\n\tif ((error = dlerror()) == NULL)\n\t\tprintf(\"Plugin %s author:  %s\\n\", plugin_name, *plugin_info);\n\tplugin_info = dlsym(handle, \"plugin_license\");\n\tif ((error = dlerror()) == NULL)\n\t\tprintf(\"Plugin %s license: %s\\n\", plugin_name, *plugin_info);\n\tplugin_info = dlsym(handle, \"plugin_description\");\n\tif ((error = dlerror()) == NULL)\n\t\tprintf(\"Plugin %s descr.: %s\\n\", plugin_name, *plugin_info);\n#endif\n\tp = malloc(sizeof(plugin_t));\n\tp->next = plugins;\n\tp->name = plugin_name;\n\tplugins = p;\n\n\tdeps = dlsym(handle, \"plugin_deps\");\n\tif ((error = dlerror()) != NULL)\n\t\tdeps = NULL;\n\n\n\tstrncpy(path, \"plugin_\", PATHSIZE);\n\tstrncat(path, plugin_name, PATHSIZE);\n\tstrncat(path, \"_init\", PATHSIZE);\n\n\tinit_plugin = dlsym(handle, path);\n\tif ((error = dlerror()) != NULL) {\n\t\tprintf(\"error: %s\\n\", error);\n\t\texit(1);\n\t}\n\n\tif (deps) {\n\t\tint i = 0;\n\t\tchar *walk = deps[0];\n#ifdef DEBUG_PLUGINS\n\t\tprintf(\"\\nPlugin %s dependencies:\", plugin_name);\n#endif\n\t\twhile (walk) {\n\t\t\tprintf(\" %s\", walk);\n\t\t\tif (!is_loaded(walk)) {\n#ifdef DEBUG_PLUGINS\n\t\t\t\tprintf(\"(loading)\\n\");\n#endif\n\t\t\t\tload_plugin(walk);\n\t\t\t}\n#ifdef DEBUG_PLUGINS\n\t\t\telse {\n\t\t\t\tprintf(\"(loaded)\");\n\t\t\t}\n#endif\n\t\t\twalk = deps[++i];\n\t\t}\n\t}\n\n\tprintf(\"\\n\");\n#if DEBUG\n\tprintf(\"Initializing module:\\n\");\n#endif\n\n\treturn init_plugin();\n\n\t// We don't dlclose the handle here since\n\t// we want to keep our symbols for later use.\n}\n\nint main(void)\n{\n\tiorange_t *r;\n\n\t// load_plugin(\"kbd\");\n\t// load_plugin(\"pci\");\n\tload_plugin(\"qt\");\n\n\tprintf(\"\\nRegistered IO Ranges:\\n\");\n\tr = ioranges;\n\twhile (r) {\n\t\tprintf(\"  %s: %x-%x\\n\", r->name, r->start, r->end);\n\t\tr = r->next;\n\t}\n\n\tsleep(10);\n\treturn 0;\n}\n"
    },
    "skipped": [
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/tests/tcg/pi_10.com",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/ppc_rom.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/slof.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/bamboo.dtb",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/pxe-ne2k_pci.rom",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/pxe-e1000.rom",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/pxe-rtl8139.rom",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/bios.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/kvmvapic.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/qemu-icon.bmp",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/vgabios-cirrus.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/spapr-rtas.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/petalogix-ml605.dtb",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/sgabios.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/pxe-eepro100.rom",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/vgabios.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/multiboot.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/s390-zipl.rom",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/linuxboot.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/vgabios-vmware.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/acpi-dsdt.aml",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/vgabios-qxl.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/petalogix-s3adsp1800.dtb",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/pxe-virtio.rom",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/vgabios-stdvga.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/pc-bios/pxe-pcnet.rom",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/qemu-palcode/osf.h",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/qemu-palcode/uart.c",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/qemu-palcode/uart.h",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/ipxe/src/drivers/infiniband/MT25408_PRM.h",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/ipxe/src/drivers/bus/eisa.c",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/ipxe/src/drivers/net/smc9000.h",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/ipxe/src/drivers/net/smc9000.c",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/ipxe/src/core/btext.c",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/openbios/forth/device/romfont.bin",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/openbios/libopenbios/font_8x8.c",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/openbios/libopenbios/font_8x16.c",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/SLOF/FlashingSLOF.pdf",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/SLOF/lib/libipmi/libipmi.oco",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/SLOF/clients/takeover/takeover.oco",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/SLOF/board-js2x/rtas/ipmi_oem.oco",
        "/tmp/vanessa/spack-stage/spack-stage-qemu-1.3.0-6qgo3gtu5gfqpckf7uvrdht3nlk42bjx/spack-src/roms/SLOF/board-js2x/rtas/i2c_bmc.oco"
    ],
    "total_files": 5138
}