{
    "matches": {
        "/tmp/vanessa/spack-stage/spack-stage-damaris-master-rzlckmpw7adf6oedjrauv7ujln2nozrr/spack-src/src/action/DynamicAction.cpp": "/**************************************************************************\nThis file is part of Damaris.\n\nDamaris is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nDamaris is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with Damaris.  If not, see <http://www.gnu.org/licenses/>.\n***************************************************************************/\n#include \"model/Model.hpp\"\n#include \"util/Debug.hpp\"\n#include \"env/Environment.hpp\"\n#include \"action/GroupAction.hpp\"\n#include \"action/DynamicAction.hpp\"\n\nnamespace damaris {\n\nvoid DynamicAction::Call(int32_t sourceID, int32_t iteration, const char* args)\n{\n\tif(!loaded_)\n\t\tLoad();\n\tif(function_ != NULL)\n\t\t(*function_)(GetName().c_str(), sourceID, iteration, args);\n}\n\nvoid DynamicAction::Load()\n{\n\tif(loaded_) return;\n\n\tchar* error;\n\thandle_ = NULL;\n\tif(GetModel().library() == \"\") {\n\t\thandle_ = dlopen(NULL,RTLD_NOW | RTLD_GLOBAL);\n\t} else {\n\t\thandle_ = dlopen(GetModel().library().c_str(), \n\t\t\t\t\tRTLD_NOW | RTLD_GLOBAL);\n\t\tif(!handle_)\n\t\t{\n\t\t\tERROR(\"While loading plugin in \\\"\" \n\t\t\t\t<< GetModel().library().c_str() \n\t\t\t\t<< \"\\\":\" << dlerror());\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/* loading function */\n\tfunction_ = (signal_t)dlsym(handle_,GetModel().action().c_str());\n\n\tif ((error = dlerror()) != NULL)  {\n\t\tERROR(\"While loading function : \" << error);\n\t\treturn;\n\t}\n\tloaded_ = true;\n}\n\n}\n"
    },
    "skipped": [
        "/tmp/vanessa/spack-stage/spack-stage-damaris-master-rzlckmpw7adf6oedjrauv7ujln2nozrr/spack-src/.git/objects/pack/pack-2f795b95489fa34ce988e0a8d71cfb99ffadc1e4.pack",
        "/tmp/vanessa/spack-stage/spack-stage-damaris-master-rzlckmpw7adf6oedjrauv7ujln2nozrr/spack-src/.git/objects/pack/pack-2f795b95489fa34ce988e0a8d71cfb99ffadc1e4.idx"
    ],
    "total_files": 246
}