{
    "matches": {
        "/tmp/vanessa/spack-stage/spack-stage-ncurses-6.2-v3z5jtv4ztmho7onysxesbp2wqrrbn5x/spack-src/configure.in": "dnl***************************************************************************\ndnl Copyright 2018-2019,2020 Thomas E. Dickey                                *\ndnl Copyright 1998-2017,2018 Free Software Foundation, Inc.                  *\ndnl                                                                          *\ndnl Permission is hereby granted, free of charge, to any person obtaining a  *\ndnl copy of this software and associated documentation files (the            *\ndnl \"Software\"), to deal in the Software without restriction, including      *\ndnl without limitation the rights to use, copy, modify, merge, publish,      *\ndnl distribute, distribute with modifications, sublicense, and/or sell       *\ndnl copies of the Software, and to permit persons to whom the Software is    *\ndnl furnished to do so, subject to the following conditions:                 *\ndnl                                                                          *\ndnl The above copyright notice and this permission notice shall be included  *\ndnl in all copies or substantial portions of the Software.                   *\ndnl                                                                          *\ndnl THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *\ndnl OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *\ndnl MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *\ndnl IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *\ndnl DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *\ndnl OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *\ndnl THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *\ndnl                                                                          *\ndnl Except as contained in this notice, the name(s) of the above copyright   *\ndnl holders shall not be used in advertising or otherwise to promote the     *\ndnl sale, use or other dealings in this Software without prior written       *\ndnl authorization.                                                           *\ndnl***************************************************************************\ndnl\ndnl Author: Thomas E. Dickey 1995-on\ndnl\ndnl $Id: configure.in,v 1.697 2020/02/08 20:56:13 tom Exp $\ndnl Process this file with autoconf to produce a configure script.\ndnl\ndnl For additional information, see\ndnl     https://invisible-island.net/autoconf/\ndnl     https://invisible-island.net/autoconf/my-autoconf.html\ndnl\ndnl ---------------------------------------------------------------------------\nAC_PREREQ(2.52.20200111)\nAC_REVISION($Revision: 1.697 $)\nAC_INIT(ncurses/base/lib_initscr.c)\nAC_CONFIG_HEADER(include/ncurses_cfg.h:include/ncurses_cfg.hin)\n\nAC_DEFUN([AC_PATH_XTRA],[])dnl ignore dependencies on this\n\nCF_TOP_BUILDDIR\nCF_SUBST_NCURSES_VERSION\nCF_VERSION_INFO(NCURSES,ncurses)\n\nCF_WITH_REL_VERSION(NCURSES)\nCF_NCURSES_WITH_ABI_VERSION\n\nCF_WITH_SYSTYPE\n\n###\tSave the given $CFLAGS to allow user-override.\ncf_user_CFLAGS=\"$CFLAGS\"\n\n###\tDefault install-location\nCF_CFG_DEFAULTS\n### Defaults for ncurses ABI\nCF_ABI_DEFAULTS\n\n###\tChecks for programs.\nAC_ARG_WITH(ada,\n\t[  --without-ada           suppress check for Ada compiler, don't build demo],\n\t[cf_with_ada=$withval],\n\t[cf_with_ada=yes])\n\nif test \"x$cf_with_ada\" = xyes\nthen\n\tcf_prog_cc=\"gnatgcc gcc cc\"\nelse\n\tcf_prog_cc=\"gcc cc\"\nfi\nCF_PROG_CC($cf_prog_cc)\n\nAC_PROG_CPP\nAC_PROG_GCC_TRADITIONAL\nCF_PROG_CC_C_O(CC,[$CFLAGS $CPPFLAGS])\nCF_PROG_LDCONFIG\n\ndnl DEFECT in autoconf 2.12:\tan attempt to set policy, this breaks the\ndnl\t\t\t\tconfigure script by not letting us test if C++\ndnl\t\t\t\tis present, making this option necessary.\nAC_MSG_CHECKING(if you want to ensure bool is consistent with C++)\nAC_ARG_WITH(cxx,\n\t[  --without-cxx           do not adjust ncurses bool to match C++],\n\t[cf_with_cxx=$withval],\n\t[cf_with_cxx=yes])\nAC_MSG_RESULT($cf_with_cxx)\nif test \"X$cf_with_cxx\" = Xno ; then\n\tCXX=\"\"\n\tGXX=\"\"\nelse\n\t# with autoconf 2.13, we can change the error to a warning:\n\tpushdef([AC_MSG_ERROR],\n\t\t[AC_MSG_RESULT(no)\n\t\t AC_MSG_WARN([You don't have any C++ compiler, too bad])\n\t\tcf_with_cxx=no; CXX=\"\"; GXX=\"\";])dnl\n\tAC_PROG_CXX\n\tpopdef([AC_MSG_ERROR])dnl\n\n\tAC_LANG_PUSH(C++)\n\tif test \"x$cf_with_cxx\" != xno\n\tthen\n\t\t# Several of the C++ configurations do not work, particularly when\n\t\t# cross-compiling (20140913 -TD)\n\t\tAC_MSG_CHECKING(if $CXX works)\n\n\t\tsave_CPPFLAGS=\"$CPPFLAGS\"\n\t\teval cf_includedir=${includedir}\n\t\tCPPFLAGS=\"$CPPFLAGS -I${cf_includedir}\"\n\t\tAC_TRY_COMPILE([\n#include <stdlib.h>\n#include <stdio.h>\n],\n\t\t[\n\t\tprintf(\"Hello world!\\n\")\n\t\t],\n\t\t[cf_cxx_works=yes],\n\t\t[cf_cxx_works=no])\n\t\tCPPFLAGS=\"$save_CPPFLAGS\"\n\n\t\tAC_MSG_RESULT($cf_cxx_works)\n\t\tif test \"x$cf_cxx_works\" = xno\n\t\tthen\n\t\t\tAC_MSG_WARN([Ignore $CXX, since it cannot compile hello-world.])\n\t\t\tcf_with_cxx=no; CXX=\"\"; GXX=\"\";\n\t\tfi\n\tfi\n\tAC_LANG_POP\n\n\t# autoconf 2.5x removed the error (hardcoding it to g++, or just blank)\n\tif test \"$CXX\" = \"g++\" ; then\n\t\tAC_PATH_PROG(CXX,g++)\n\tfi\n\tcase \"x$CXX\" in\n\t(x|xg++)\n\t\tAC_MSG_WARN([You don't have any C++ compiler, too bad])\n\t\tcf_with_cxx=no; CXX=\"\"; GXX=\"\";\n\t\t;;\n\tesac\nfi\n\nCF_GXX_VERSION\ncase $GXX_VERSION in\n(1*|2.[[0-6]]*)\n\t# GXX=\"\"; CXX=\"\"; ac_cv_prog_gxx=no\n\t# cf_cxx_library=no\n\tAC_MSG_WARN(templates do not work)\n\t;;\nesac\n\nAC_MSG_CHECKING(if you want to build C++ binding and demo)\nAC_ARG_WITH(cxx-binding,\n\t[  --without-cxx-binding   do not build C++ binding and demo],\n\t[cf_with_cxx_binding=$withval],\n\t[cf_with_cxx_binding=$cf_with_cxx])\nAC_MSG_RESULT($cf_with_cxx_binding)\n\nAC_MSG_CHECKING(if you want to build with Ada)\nAC_MSG_RESULT($cf_with_ada)\n\nAC_MSG_CHECKING(if you want to install terminal database)\nAC_ARG_ENABLE(db-install,\n\t[  --disable-db-install    suppress install of terminal database],\n\t[cf_with_db_install=$enableval],\n\t[cf_with_db_install=yes])\nAC_MSG_RESULT($cf_with_db_install)\n\nAC_MSG_CHECKING(if you want to install manpages)\nAC_ARG_WITH(manpages,\n\t[  --without-manpages      suppress install of manpages],\n\t[cf_with_manpages=$withval],\n\t[cf_with_manpages=yes])\nAC_MSG_RESULT($cf_with_manpages)\n\nAC_MSG_CHECKING(if you want to build programs such as tic)\nAC_ARG_WITH(progs,\n\t[  --without-progs         suppress build/install with programs (e.g., tic)],\n\t[cf_with_progs=$withval],\n\t[cf_with_progs=yes])\nAC_MSG_RESULT($cf_with_progs)\n\nif test -f $srcdir/tack/tack.h; then\n\tif test \"x$cross_compiling\" = xyes ; then\n\t\tCF_VERBOSE(ignoring tack because we are cross-compiling)\n\t\tcf_with_tack=no\n\telse\n\t\tAC_MSG_CHECKING(if you want to build the tack program)\n\t\tAC_ARG_WITH(tack,\n\t\t\t[  --without-tack          suppress build/install with tack program],\n\t\t\t[cf_with_tack=$withval],\n\t\t\t[cf_with_tack=$cf_with_progs])\n\t\tAC_MSG_RESULT($cf_with_tack)\n\tfi\nelse\n\tcf_with_tack=no\nfi\n\nAC_MSG_CHECKING(if you want to build test-programs)\nAC_ARG_WITH(tests,\n\t[  --without-tests         suppress build/install with test-programs],\n\t[cf_with_tests=$withval],\n\t[cf_with_tests=yes])\nAC_MSG_RESULT($cf_with_tests)\n\nAC_MSG_CHECKING(if you wish to install curses.h)\nAC_ARG_WITH(curses-h,\n\t[  --without-curses-h      install curses.h as ncurses.h only],\n\t[with_curses_h=$withval],\n\t[with_curses_h=yes])\nAC_MSG_RESULT($with_curses_h)\n\nmodules_to_build=\"ncurses\"\ntest \"X$cf_with_progs\" != Xno && modules_to_build=\"$modules_to_build progs\"\ntest \"X$cf_with_tack\"  != Xno && modules_to_build=\"$modules_to_build tack\"\nmodules_to_build=\"$modules_to_build panel menu form\"\n\nAC_ARG_PROGRAM\n\nCF_PROG_AWK\nCF_PROG_EGREP\nCF_PROG_INSTALL\nCF_PROG_LINT\nCF_PROG_LN_S\n\nAC_SYS_LONG_FILE_NAMES\n\n# Provide for renaming \"ncurses5-config\" to \"ncurses5X-config\", etc., in case\n# of package conflict.\ncf_config_suffix=\nAC_ARG_WITH(config-suffix,\n\t[  --with-config-suffix=X  suffixes ncursesXX-config file],\n\t[case \"x$withval\" in\n\t(xyes|xno)\n\t\tAC_MSG_WARN(expected a value for config-suffix option)\n\t\t;;\n\t(*)\tcf_config_suffix=\"$withval\"\n\t\t;;\n\tesac])\nAC_SUBST(cf_config_suffix)\n\n# If we find pkg-config, check if we should install the \".pc\" files.\nCF_PKG_CONFIG\nCF_WITH_PKG_CONFIG_LIBDIR\nCF_ENABLE_PC_FILES\nif test -z \"$MAKE_PC_FILES\"\nthen\n\tAC_MSG_CHECKING(for suffix to add to pc-files)\nAC_ARG_WITH(pc-suffix,\n\t[  --with-pc-suffix        suffixes pc-files],\n\t[case \"x$withval\" in\n\t(xyes|xno)\n\t\tPC_MODULE_SUFFIX=\n\t\t;;\n\t(*)\tPC_MODULE_SUFFIX=\"$withval\"\n\t\t;;\n\tesac])\n\ttest -z \"$PC_MODULE_SUFFIX\" && PC_MODULE_SUFFIX=none\n\tAC_MSG_RESULT($PC_MODULE_SUFFIX)\n\ttest \"$PC_MODULE_SUFFIX\" = none && PC_MODULE_SUFFIX=\n\tAC_SUBST(PC_MODULE_SUFFIX)\nfi\n\nAC_MSG_CHECKING(if we should assume mixed-case filenames)\nAC_ARG_ENABLE(mixed-case,\n\t[  --enable-mixed-case     tic should assume mixed-case filenames],\n\t[enable_mixedcase=$enableval],\n\t[enable_mixedcase=auto])\nAC_MSG_RESULT($enable_mixedcase)\nif test \"$enable_mixedcase\" = \"auto\" ; then\n\tCF_MIXEDCASE_FILENAMES\nelse\n\tcf_cv_mixedcase=$enable_mixedcase\n\tif test \"x$enable_mixedcase\" = \"xyes\" ; then\n\t\tAC_DEFINE(MIXEDCASE_FILENAMES,1,[Define to 1 if tic should assume mixed-case filenames])\n\tfi\nfi\n\n# do this after mixed-case option (tags/TAGS is not as important as tic).\nAC_PROG_MAKE_SET\nCF_MAKE_TAGS\nCF_MAKEFLAGS\n\ndnl These are standard among *NIX systems, but not when cross-compiling\nAC_CHECK_TOOL(RANLIB, ranlib, ':')\nAC_CHECK_TOOL(LD, ld, ld)\nAC_CHECK_TOOL(AR, ar, ar)\nAC_CHECK_TOOL(NM, nm, nm)\nCF_AR_FLAGS\n\ndnl Special option for use by system-builders: the install-prefix is used to\ndnl adjust the location into which the actual install is done, so that an\ndnl archive can be built without modifying the host system's configuration.\nAC_MSG_CHECKING(if you have specified an install-prefix)\nAC_ARG_WITH(install-prefix,\n\t[  --with-install-prefix   prefixes actual install-location ($DESTDIR)],\n\t[case \"x$withval\" in\n\t(xyes|xno)\n\t\t;;\n\t(*)\tDESTDIR=\"$withval\"\n\t\t;;\n\tesac])\nAC_MSG_RESULT($DESTDIR)\nAC_SUBST(DESTDIR)\n\n###############################################################################\nCF_HELP_MESSAGE(Build-Tools Needed to Compile Temporary Applications for Cross-compiling:)\n# If we're cross-compiling, allow the user to override the tools and their\n# options.  The configure script is oriented toward identifying the host\n# compiler, etc., but we need a build compiler to generate parts of the source.\nCF_BUILD_CC\n\n###############################################################################\nCF_HELP_MESSAGE(Options to Specify the Libraries Built/Used:)\n\n### Options to allow the user to specify the set of libraries which are used.\n### Use \"--without-normal --with-shared\" to allow the default model to be\n### shared, for example.\ncf_list_models=\"\"\nAC_SUBST(cf_list_models)dnl\tthe complete list of models (\"normal debug\")\n\nCF_WITH_LIBTOOL\nif test \"$with_libtool\" != \"no\" ; then\n\ncf_list_models=\"$cf_list_models libtool\"\n\nelse\n\nAC_MSG_CHECKING(if you want to build shared libraries)\nAC_ARG_WITH(shared,\n\t[  --with-shared           generate shared-libraries],\n\t[with_shared=$withval],\n\t[with_shared=no])\nAC_MSG_RESULT($with_shared)\ntest \"x$with_shared\" = \"xyes\" && cf_list_models=\"$cf_list_models shared\"\n\nAC_MSG_CHECKING(if you want to build static libraries)\nAC_ARG_WITH(normal,\n\t[  --with-normal           generate normal-libraries (default)],\n\t[with_normal=$withval],\n\t[with_normal=yes])\nAC_MSG_RESULT($with_normal)\ntest \"x$with_normal\" = \"xyes\" && cf_list_models=\"$cf_list_models normal\"\n\nAC_MSG_CHECKING(if you want to build debug libraries)\nAC_ARG_WITH(debug,\n\t[  --with-debug            generate debug-libraries (default)],\n\t[with_debug=$withval],\n\t[with_debug=yes])\nAC_MSG_RESULT($with_debug)\ntest \"x$with_debug\" = \"xyes\" && cf_list_models=\"$cf_list_models debug\"\n\nAC_MSG_CHECKING(if you want to build profiling libraries)\nAC_ARG_WITH(profile,\n\t[  --with-profile          generate profile-libraries],\n\t[with_profile=$withval],\n\t[with_profile=no])\nAC_MSG_RESULT($with_profile)\ntest \"x$with_profile\" = \"xyes\" && cf_list_models=\"$cf_list_models profile\"\n\nfi\n\nif test \"X$cf_with_cxx_binding\" != Xno; then\nif test \"x$with_shared\" = \"xyes\"; then\nAC_MSG_CHECKING(if you want to build C++ shared libraries)\nAC_ARG_WITH(cxx-shared,\n\t[  --with-cxx-shared       generate C++ shared-libraries],\n\t[with_shared_cxx=$withval],\n\t[with_shared_cxx=no])\nAC_MSG_RESULT($with_shared_cxx)\nfi\nfi\n\n###############################################################################\n\nAC_MSG_CHECKING(for specified models)\ntest -z \"$cf_list_models\" && cf_list_models=normal\ndnl If we use libtool to generate libraries, then it must be the only\ndnl specified model.\ntest \"$with_libtool\" != \"no\" && cf_list_models=libtool\nAC_MSG_RESULT($cf_list_models)\n\n### Use the first model as the default, and save its suffix for use in building\n### up test-applications.\nAC_MSG_CHECKING(for default model)\nDFT_LWR_MODEL=`echo \"$cf_list_models\" | $AWK '{print $1}'`\nAC_MSG_RESULT($DFT_LWR_MODEL)\n\nCF_UPPER(DFT_UPR_MODEL,$DFT_LWR_MODEL)dnl\n\nAC_SUBST(DFT_LWR_MODEL)dnl\tthe default model (\"normal\")\nAC_SUBST(DFT_UPR_MODEL)dnl\tthe default model (\"NORMAL\")\n\nTICS_NAME=tic\nAC_SUBST(TICS_NAME)\n\nTINFO_NAME=tinfo\nAC_SUBST(TINFO_NAME)\n\nLIB_NAME=ncurses\nAC_SUBST(LIB_NAME)\n\nLIB_DIR=../lib\nLIB_2ND=../../lib\n\nCF_WITH_LIB_PREFIX(cf_prefix)\n\nLIB_SUFFIX=\nAC_SUBST(LIB_SUFFIX)\nCF_PATHSEP\n\n###############################################################################\n\nAC_MSG_CHECKING(if you want to build a separate terminfo library)\nAC_ARG_WITH(termlib,\n\t[  --with-termlib          generate separate terminfo library],\n\t[with_termlib=$withval],\n\t[with_termlib=no])\nAC_MSG_RESULT($with_termlib)\n\nAC_MSG_CHECKING(if you want to build a separate tic library)\nAC_ARG_WITH(ticlib,\n\t[  --with-ticlib           generate separate tic library],\n\t[with_ticlib=$withval],\n\t[with_ticlib=no])\nAC_MSG_RESULT($with_ticlib)\n\ndnl Not all ports of gcc support the -g option\n\nif test X\"$CC_G_OPT\" = X\"\" ; then\n\tCC_G_OPT='-g'\n\ttest -n \"$GCC\" && test \"x${ac_cv_prog_cc_g}\" != xyes && CC_G_OPT=''\nfi\nAC_SUBST(CC_G_OPT)\n\nif test X\"$CXX_G_OPT\" = X\"\" ; then\n\tCXX_G_OPT='-g'\n\ttest -n \"$GXX\" && test \"x${ac_cv_prog_cxx_g}\" != xyes && CXX_G_OPT=''\nfi\nAC_SUBST(CXX_G_OPT)\n\nAC_MSG_CHECKING(for default loader flags)\ncase $DFT_LWR_MODEL in\n(libtool) LD_MODEL=''   ;;\n(normal)  LD_MODEL=''   ;;\n(debug)   LD_MODEL=$CC_G_OPT ;;\n(profile) LD_MODEL='-pg';;\n(shared)  LD_MODEL=''   ;;\nesac\nAC_SUBST(LD_MODEL)dnl\t\tthe type of link (e.g., -g or -pg)\nAC_MSG_RESULT($LD_MODEL)\n\ncase $DFT_LWR_MODEL in\n(shared)\nCF_ENABLE_RPATH\nAC_MSG_CHECKING(if shared libraries should be relinked during install)\nAC_ARG_ENABLE(relink,\n[  --disable-relink        relink shared libraries during install],\n[cf_cv_do_relink=$enableval],\n[cf_cv_do_relink=yes])\nAC_MSG_RESULT($cf_cv_do_relink)\n\t;;\nesac\n\n# we will build libraries one-level down.\nrel_builddir=..\nCF_SHARED_OPTS\nfor model in $cf_list_models; do\n\tcase $model in\n\t(libtool)\n\t\tCF_WITH_LIBTOOL_OPTS\n\t\tCF_WITH_EXPORT_SYMS\n\t\t;;\n\t(shared)\n\t\tif test \"$CC_SHARED_OPTS\" = \"unknown\"; then\n\t\t\tAC_ERROR(Shared libraries are not supported in this version)\n\t\tfi\n\t\t# workaround for inept transition to PIE vs PIC...\n\t\tAC_MSG_CHECKING(if current CFLAGS link properly)\n\t\tAC_TRY_LINK(\n\t\t\t[#include <stdio.h>],\n\t\t\t[printf(\"Hello work\\n\");],\n\t\t\t[cf_cflags_work=yes],\n\t\t\t[cf_cflags_work=no])\n\t\tAC_MSG_RESULT($cf_cflags_work)\n\t\tif test \"$cf_cflags_work\" = no\n\t\tthen\n\t\t\tCF_VERBOSE(try to work around by appending shared-options)\n\t\t\tCFLAGS=\"$CFLAGS $CC_SHARED_OPTS\"\n\t\tfi\n\t\tCF_WITH_VERSIONED_SYMS\n\t\t;;\n\tesac\ndone\n\n### Checks for special libraries, must be done up-front.\nSHLIB_LIST=\"\"\nCF_WITH_GPM\nif test \"$with_gpm\" != no ; then\n\tAC_MSG_CHECKING(if you want to load GPM dynamically)\n\tAC_ARG_WITH(dlsym,\n\t\t[  --without-dlsym         do not use dlsym() to load GPM dynamically],\n\t\t[with_dlsym=$withval],\n\t\t[with_dlsym=yes])\n\tAC_MSG_RESULT($with_dlsym)\n\tif test \"x$with_dlsym\" = xyes ; then\n\t\tCF_FUNC_DLSYM\n\t\tif test \"x$with_gpm\" != xyes ; then\n\t\t\tCF_VERBOSE(assuming soname for gpm is $with_gpm)\n\t\t\tcf_cv_gpm_soname=\"$with_gpm\"\n\t\telse\n\t\t\tCF_LIB_SONAME([#include <gpm.h>],[if (Gpm_Open(0,0)) Gpm_Close();],gpm)\n\t\tfi\n\t\ttest \"$cf_cv_gpm_soname\" != \"unknown\" && AC_DEFINE_UNQUOTED(LIBGPM_SONAME,\"$cf_cv_gpm_soname\",[Define as needed to set the gpm share library soname])\n\t\tSHLIB_LIST=\"-ldl $SHLIB_LIST\"\n\t\tCF_ADD_LIB(dl,PRIVATE_LIBS)\n\telse\n\t\tSHLIB_LIST=\"-lgpm $SHLIB_LIST\"\n\t\tCF_ADD_LIB(gpm,TEST_LIBS)\n\t\tCF_ADD_LIB(gpm,PRIVATE_LIBS)\n\tfi\n\tAC_DEFINE(HAVE_LIBGPM,1,[Define to 1 if we have the gpm library])\n\tCF_CHECK_GPM_WGETCH\nfi\n\nCF_WITH_PCRE2\nCF_WITH_SYSMOUSE\n\n# pretend that ncurses==ncursesw==ncursest\nAC_MSG_CHECKING(if you want to disable library suffixes)\nCF_ARG_DISABLE(lib-suffixes,\n\t[  --disable-lib-suffixes  disable library suffixes],\n\t[disable_lib_suffixes=yes],\n\t[disable_lib_suffixes=no],\n\tno)\nAC_MSG_RESULT($disable_lib_suffixes)\n\n### If we're building with rpath, try to link non-standard libs that way too.\nif test \"$DFT_LWR_MODEL\" = \"shared\" && test \"x$cf_cv_enable_rpath\" != xno; then\n\tCF_DISABLE_RPATH_HACK\nfi\n\n###############################################################################\nCF_HELP_MESSAGE(Fine-Tuning Your Configuration:)\n\n###\tuse option --with-extra-suffix to append suffix to headers and libraries\nAC_MSG_CHECKING(if you wish to append extra suffix to header/library paths)\nEXTRA_SUFFIX=\nAC_ARG_WITH(extra-suffix,\n\t[  --with-extra-suffix=X   append extra suffix to header/library paths],\n\t[case x$withval in\n\t(no)\n\t\t;;\n\t(xyes|x)\n\t\tEXTRA_SUFFIX=$cf_cv_abi_version\n\t\t;;\n\t(*)\n\t\tEXTRA_SUFFIX=$withval\n\t\t;;\n\tesac\n\t])\nAC_MSG_RESULT($EXTRA_SUFFIX)\nAC_SUBST(EXTRA_SUFFIX)\n\n###\tuse option --disable-overwrite to leave out the link to -lcurses\nAC_MSG_CHECKING(if you wish to install ncurses overwriting curses)\nAC_ARG_ENABLE(overwrite,\n\t[  --disable-overwrite     put headers in subdir, omit link to -lcurses],\n\t[with_overwrite=$enableval],\n\t[if test \"$prefix\" = \"/usr\" ; then with_overwrite=yes; else with_overwrite=no; fi])\nAC_MSG_RESULT($with_overwrite)\n\nAC_MSG_CHECKING(if external terminfo-database is used)\nAC_ARG_ENABLE(database,\n\t[  --disable-database      do not use terminfo, only fallbacks/termcap],\n\t[use_database=$enableval],\n\t[use_database=yes])\nAC_MSG_RESULT($use_database)\n\ncase $host_os in\n(os2*)\n\tTERMINFO_SRC='${top_srcdir}/misc/emx.src'\n\t;;\n(*)\n\tTERMINFO_SRC='${top_srcdir}/misc/terminfo.src'\n\t;;\nesac\nAC_SUBST(TERMINFO_SRC)\n\nNCURSES_USE_DATABASE=0\nif test \"$use_database\" != no ; then\n\tNCURSES_USE_DATABASE=1\n\n\tAC_MSG_CHECKING(which terminfo source-file will be installed)\n\tAC_ARG_WITH(database,\n\t\t[  --with-database=XXX     specify terminfo source to install],\n\t\t[TERMINFO_SRC=$withval])\n\tAC_MSG_RESULT($TERMINFO_SRC)\n\n\tAC_MSG_CHECKING(whether to use hashed database instead of directory/tree)\n\tAC_ARG_WITH(hashed-db,\n\t\t[  --with-hashed-db        specify hashed-database library],,\n\t\t[with_hashed_db=no])\n\tAC_MSG_RESULT($with_hashed_db)\nelse\n\twith_hashed_db=no\nfi\nAC_SUBST(NCURSES_USE_DATABASE)\n\nAC_MSG_CHECKING(for list of fallback descriptions)\nAC_ARG_WITH(fallbacks,\n\t[  --with-fallbacks=XXX    specify list of fallback terminal descriptions],\n\t[with_fallback=$withval],\n\t[with_fallback=])\nAC_MSG_RESULT($with_fallback)\n\ncase \".$with_fallback\" in\n(.|.no)\n\tFALLBACK_LIST=\n\t;;\n(.yes)\n\tAC_MSG_WARN(expected a list of terminal descriptions)\n\t;;\n(*)\n\tFALLBACK_LIST=`echo \"$with_fallback\" | sed -e 's/,/ /g'`\n\t;;\nesac\n\nUSE_FALLBACKS=\ntest -z \"$FALLBACK_LIST\" && USE_FALLBACKS=\"#\"\nAC_SUBST(FALLBACK_LIST)\nAC_SUBST(USE_FALLBACKS)\n\n# The fallback feature in ncurses relies upon tic/infocmp outside the build\n# tree for generating the terminal descriptions that will be compiled into the\n# library.  If your toolchain is old, it may not handle current terminal\n# databases.  Use configure-options to point to the tools which will be used,\n# rather than the first ones found on the $PATH.\nif test -n \"$FALLBACK_LIST\"\nthen\n\tCF_WITH_PATH_PROG(TIC,     tic,     [for fallbacks], $PATH:/usr/local/ncurses/bin)\n\tCF_WITH_PATH_PROG(INFOCMP, infocmp, [for fallbacks], $PATH:/usr/local/ncurses/bin)\nelse\n\t: ${TIC:=tic}\n\t: ${INFOCMP:=infocmp}\nfi\nAC_SUBST(TIC)\nAC_SUBST(INFOCMP)\n\nAC_MSG_CHECKING(if you want modern xterm or antique)\nAC_ARG_WITH(xterm-new,\n\t[  --without-xterm-new     specify if xterm terminfo should be old version],\n\t[with_xterm_new=$withval],\n\t[with_xterm_new=yes])\ncase $with_xterm_new in\n(no) with_xterm_new=xterm-old;;\n(*)\t with_xterm_new=xterm-new;;\nesac\nAC_MSG_RESULT($with_xterm_new)\nWHICH_XTERM=$with_xterm_new\nAC_SUBST(WHICH_XTERM)\n\nAC_MSG_CHECKING(if xterm backspace sends BS or DEL)\nAC_ARG_WITH(xterm-kbs,\n\t[  --with-xterm-kbs=XXX    specify if xterm backspace sends BS or DEL],\n\t[with_xterm_kbs=$withval],\n\t[with_xterm_kbs=BS])\ncase x$with_xterm_kbs in\n(xyes|xno|xBS|xbs|x8)\n\twith_xterm_kbs=BS\n\t;;\n(xDEL|xdel|x127)\n\twith_xterm_kbs=DEL\n\t;;\n(*)\n\twith_xterm_kbs=$withval\n\t;;\nesac\nAC_MSG_RESULT($with_xterm_kbs)\nXTERM_KBS=$with_xterm_kbs\nAC_SUBST(XTERM_KBS)\n\nMAKE_TERMINFO=\nif test \"$use_database\" = no ; then\n\tTERMINFO=\"${datadir}/terminfo\"\n\tMAKE_TERMINFO=\"#\"\nelse\n\nAC_MSG_CHECKING(for list of terminfo directories)\nCF_WITH_PATHLIST(terminfo-dirs,\n\t[  --with-terminfo-dirs=XXX specify list of terminfo directories],\n\tTERMINFO_DIRS,\n\tDATADIR/terminfo,\n\t${datadir}/terminfo)\nAC_MSG_RESULT($TERMINFO_DIRS)\ntest -n \"$TERMINFO_DIRS\" && AC_DEFINE_UNQUOTED(TERMINFO_DIRS,\"$TERMINFO_DIRS\",[Define as needed to predefine the TERMINFO_DIR searchlist])\n\ncase \"x$TERMINFO\" in\nx???:*)\n\tAC_MSG_WARN(ignoring non-directory/file TERMINFO value)\n\tunset TERMINFO\n\t;;\nesac\n\nAC_MSG_CHECKING(for default terminfo directory)\nCF_WITH_PATH(default-terminfo-dir,\n\t[  --with-default-terminfo-dir=DIR default terminfo directory],\n\tTERMINFO,\n\tDATADIR/terminfo,\n\t${datadir}/terminfo)\nAC_MSG_RESULT($TERMINFO)\nAC_DEFINE_UNQUOTED(TERMINFO,\"$TERMINFO\",[Define to set the default terminal database path])\n\nfi\n\nAC_SUBST(TERMINFO)\nAC_SUBST(MAKE_TERMINFO)\n\n###\tuse option --disable-big-core to make tic run on small machines\n###\tWe need 4Mb, check if we can allocate 50% more than that.\nAC_MSG_CHECKING(if big-core option selected)\nAC_ARG_ENABLE(big-core,\n\t[  --disable-big-core      assume machine has little memory],\n\t[with_big_core=$enableval],\n\t[AC_TRY_RUN([\n#include <stdlib.h>\n#include <string.h>\nint main() {\n\tunsigned long n = 6000000L;\n\tchar *s = malloc(n);\n\tif (s != 0)\n\t\ts[0] = s[n-1] = 0;\n\t${cf_cv_main_return:-return}(s == 0);\n}],\n\t[with_big_core=yes],\n\t[with_big_core=no],\n\t[with_big_core=no])])\nAC_MSG_RESULT($with_big_core)\ntest \"x$with_big_core\" = \"xyes\" && AC_DEFINE(HAVE_BIG_CORE,1,[Define to 1 if machine has ample memory for tic])\n\n### ISO C only guarantees 512-char strings, we have tables which load faster\n### when constructed using \"big\" strings.  More than the C compiler, the awk\n### program is a limit on most vendor UNIX systems.  Check that we can build.\nAC_MSG_CHECKING(if big-strings option selected)\nAC_ARG_ENABLE(big-strings,\n\t[  --disable-big-strings   assume compiler has only standard-size strings],\n\t[with_big_strings=$enableval],\n\t[CF_AWK_BIG_PRINTF(12000,with_big_strings)])\nAC_MSG_RESULT($with_big_strings)\n\nUSE_BIG_STRINGS=0\ntest \"x$with_big_strings\" = \"xyes\" && USE_BIG_STRINGS=1\nAC_SUBST(USE_BIG_STRINGS)\n\n###\tuse option --enable-termcap to compile in the termcap fallback support\nAC_MSG_CHECKING(if you want termcap-fallback support)\nAC_ARG_ENABLE(termcap,\n\t[  --enable-termcap        compile in termcap fallback support],\n\t[with_termcap=$enableval],\n\t[with_termcap=no])\nAC_MSG_RESULT($with_termcap)\n\nNCURSES_USE_TERMCAP=0\nif test \"x$with_termcap\" != \"xyes\" ; then\n\tif test \"$use_database\" = no ; then\n\t\tif test -z \"$with_fallback\" ; then\n\t\t\tAC_ERROR(You have disabled the database w/o specifying fallbacks)\n\t\tfi\n\tfi\n\tAC_DEFINE(PURE_TERMINFO,1,[Define to 1 if we should support only terminfo])\nelse\n\n\tif test \"$with_ticlib\" != no ; then\n\t\tAC_ERROR(Options --with-ticlib and --enable-termcap cannot be combined)\n\tfi\n\n\tNCURSES_USE_TERMCAP=1\n\tAC_MSG_CHECKING(for list of termcap files)\n\tCF_WITH_PATHLIST(termpath,\n\t\t[  --with-termpath=XXX     specify list of termcap files],\n\t\tTERMPATH,\n\t\t/etc/termcap:/usr/share/misc/termcap)\n\tAC_MSG_RESULT($TERMPATH)\n\ttest -n \"$TERMPATH\" && AC_DEFINE_UNQUOTED(TERMPATH,\"$TERMPATH\",[Define to set the termcap searchlist])\n\n\t###\tuse option --enable-getcap to use a hacked getcap for reading termcaps\n\tAC_MSG_CHECKING(if fast termcap-loader is needed)\n\tAC_ARG_ENABLE(getcap,\n\t\t[  --enable-getcap         fast termcap load, no xrefs to terminfo],\n\t\t[with_getcap=$enableval],\n\t\t[with_getcap=no])\n\tAC_MSG_RESULT($with_getcap)\n\ttest \"x$with_getcap\" = \"xyes\" && AC_DEFINE(USE_GETCAP,1,[Define to 1 to use fast termcap-loader])\n\n\tAC_MSG_CHECKING(if translated termcaps will be cached in ~/.terminfo)\n\tAC_ARG_ENABLE(getcap-cache,\n\t\t[  --enable-getcap-cache   cache translated termcaps in ~/.terminfo],\n\t\t[with_getcap_cache=$enableval],\n\t\t[with_getcap_cache=no])\n\tAC_MSG_RESULT($with_getcap_cache)\n\ttest \"x$with_getcap_cache\" = \"xyes\" && AC_DEFINE(USE_GETCAP_CACHE,1,[Define to 1 if translated termcap should be stored in $HOME/.terminfo])\n\nfi\nAC_SUBST(NCURSES_USE_TERMCAP)\n\n###   Use option --disable-home-terminfo to completely remove ~/.terminfo\nAC_MSG_CHECKING(if ~/.terminfo is wanted)\nAC_ARG_ENABLE(home-terminfo,\n\t[  --disable-home-terminfo drop ~/.terminfo from terminfo search-path],\n\t[with_home_terminfo=$enableval],\n\t[with_home_terminfo=yes])\nAC_MSG_RESULT($with_home_terminfo)\ntest \"x$with_home_terminfo\" = \"xyes\" && AC_DEFINE(USE_HOME_TERMINFO,1,[Define to 1 if $HOME/.terminfo feature is wanted])\n\nAC_MSG_CHECKING(if you want to use restricted environment when running as root)\nAC_ARG_ENABLE(root-environ,\n\t[  --disable-root-environ  restrict environment when running as root],\n\t[with_root_environ=$enableval],\n\t[with_root_environ=yes])\nAC_MSG_RESULT($with_root_environ)\ntest \"x$with_root_environ\" = xyes && AC_DEFINE(USE_ROOT_ENVIRON,1,[Define to 1 if environment should be restricted for root user])\n\n###   Use option --enable-symlinks to make tic use symlinks, not hard links\n###   to reduce storage requirements for the terminfo database.\nCF_LINK_FUNCS\n\nwith_links=no\nwith_symlinks=no\n\n# soft links (symbolic links) are useful for some systems where hard links do\n# not work, or to make it simpler to copy terminfo trees around.\nif test \"x$ac_cv_func_symlink\" = xyes ; then\n\tAC_MSG_CHECKING(if tic should use symbolic links)\n\tAC_ARG_ENABLE(symlinks,\n\t[  --enable-symlinks       make tic use symbolic links not hard links],\n\t[with_symlinks=$enableval],\n\t[with_symlinks=no])\n\tAC_MSG_RESULT($with_symlinks)\nfi\n\n# If we have hard links and did not choose to use soft links instead, there is\n# no reason to make this choice optional - use the hard links.\nif test \"$with_symlinks\" = no ; then\n\tAC_MSG_CHECKING(if tic should use hard links)\n\tif test \"x$ac_cv_func_link\" = xyes ; then\n\t\twith_links=yes\n\telse\n\t\twith_links=no\n\tfi\n\tAC_MSG_RESULT($with_links)\nfi\n\ntest \"x$with_links\" = xyes && AC_DEFINE(USE_LINKS,1,[Define to 1 if hardlinks should be used in terminfo database])\ntest \"x$with_symlinks\" = xyes && AC_DEFINE(USE_SYMLINKS,1,[Define to 1 if symbolic links should be used in terminfo database])\n\n###   use option --enable-broken-linker to force on use of broken-linker support\nCF_ENABLE_BROKEN_LINKER\n\n###   use option --enable-bsdpad to have tputs process BSD-style prefix padding\nAC_MSG_CHECKING(if tputs should process BSD-style prefix padding)\nAC_ARG_ENABLE(bsdpad,\n\t[  --enable-bsdpad         recognize BSD-style prefix padding],\n\t[with_bsdpad=$enableval],\n\t[with_bsdpad=no])\nAC_MSG_RESULT($with_bsdpad)\ntest \"x$with_bsdpad\" = xyes && AC_DEFINE(BSD_TPUTS,1,[Define to 1 to recognize BSD-style prefix padding])\n\n###   use option --enable-widec to turn on use of wide-character support\nNCURSES_CH_T=chtype\nNCURSES_LIBUTF8=0\n\nNEED_WCHAR_H=0\nNCURSES_MBSTATE_T=0\nNCURSES_WCHAR_T=0\nNCURSES_WINT_T=0\n\n# Check to define _XOPEN_SOURCE \"automatically\"\nCPPFLAGS_before_XOPEN=\"$CPPFLAGS\"\nCF_XOPEN_SOURCE(600)\nCPPFLAGS_after_XOPEN=\"$CPPFLAGS\"\n\n# Work around breakage on OS X\nCF_SIGWINCH\n\n# Checks for CODESET support.\nAM_LANGINFO_CODESET\n\n# use these variables to work around a defect in gcc's fixincludes.\nNCURSES_OK_WCHAR_T=\nNCURSES_OK_WINT_T=\n\nAC_MSG_CHECKING(if you want wide-character code)\nAC_ARG_ENABLE(widec,\n\t[  --enable-widec          compile with wide-char/UTF-8 code],\n\t[with_widec=$enableval],\n\t[with_widec=no])\nAC_MSG_RESULT($with_widec)\n\nNCURSES_WCWIDTH_GRAPHICS=1\nAC_SUBST(NCURSES_WCWIDTH_GRAPHICS)\n\nif test \"x$with_widec\" = xyes ; then\n\tif test \"x$disable_lib_suffixes\" = xno ; then\n\t\tLIB_SUFFIX=\"w${LIB_SUFFIX}\"\n\tfi\n\tAC_DEFINE(USE_WIDEC_SUPPORT,1,[Define to 1 to compile with wide-char/UTF-8 code])\n\tAC_DEFINE(NCURSES_WIDECHAR,1,[Define to 1 to compile with wide-char/UTF-8 code])\n\n\tCF_CHECK_WCHAR_H\n\tCF_CHECK_WCWIDTH_GRAPHICS\n\ttest \"$cf_cv_wcwidth_graphics\" = no && NCURSES_WCWIDTH_GRAPHICS=0\n\n\t# with_overwrite=no\n\tNCURSES_CH_T=cchar_t\n\tAC_CHECK_FUNCS(putwc btowc wctob mbtowc wctomb mblen mbrlen mbrtowc wcsrtombs mbsrtowcs wcstombs mbstowcs)\n\tif test \"x$ac_cv_func_putwc\" != xyes ; then\n\t\tCF_UTF8_LIB\n\t\tif test \"$cf_cv_utf8_lib\" != no ; then\n\t\t\tNCURSES_LIBUTF8=1\n\t\tfi\n\tfi\n\tCF_WCHAR_TYPE(mbstate_t, NCURSES_MBSTATE_T)\n\tCF_WCHAR_TYPE(wchar_t,   NCURSES_WCHAR_T,   NCURSES_OK_WCHAR_T)\n\tCF_WCHAR_TYPE(wint_t,    NCURSES_WINT_T,    NCURSES_OK_WINT_T)\n\n\tif test \"$NCURSES_MBSTATE_T\" != 0; then\n\t\tAC_DEFINE(NEED_MBSTATE_T_DEF,1,[Define to 1 if we must declare mbstate_t])\n\tfi\nfi\nAC_SUBST(NCURSES_CH_T)\nAC_SUBST(NCURSES_LIBUTF8)\n\nAC_SUBST(NEED_WCHAR_H)\nAC_SUBST(NCURSES_MBSTATE_T)\nAC_SUBST(NCURSES_WCHAR_T)\nAC_SUBST(NCURSES_WINT_T)\n\nAC_SUBST(NCURSES_OK_WCHAR_T)\nAC_SUBST(NCURSES_OK_WINT_T)\n\n###   use option --disable-lp64 to allow long chtype\nAC_MSG_CHECKING(whether to enable _LP64 definition in curses.h)\nAC_ARG_ENABLE(lp64,\n\t[  --disable-lp64          allow chtype to be long (ignore _LP64)],\n\t[with_lp64=$enableval],\n\t[with_lp64=$cf_dft_with_lp64])\nAC_MSG_RESULT($with_lp64)\n\nif test \"x$with_lp64\" = xyes ; then\n\tcf_cv_enable_lp64=1\nelse\n\tcf_cv_enable_lp64=0\nfi\nAC_SUBST(cf_cv_enable_lp64)\n\nCF_LARGEFILE\n\n###   use option --disable-tparm-varargs to make tparm() conform to X/Open\nAC_MSG_CHECKING(if you want tparm not to use X/Open fixed-parameter list)\nAC_ARG_ENABLE(tparm-varargs,\n\t[  --disable-tparm-varargs compile tparm() without varargs interface],\n\t[with_tparm_varargs=$enableval],\n\t[with_tparm_varargs=yes])\nAC_MSG_RESULT($with_tparm_varargs)\nNCURSES_TPARM_VARARGS=0\ntest \"x$with_tparm_varargs\" = xyes && NCURSES_TPARM_VARARGS=1\nAC_SUBST(NCURSES_TPARM_VARARGS)\n\n###   use option --disable-tic-depends to make libtic not explicitly depend on ncurses/ncursesw\nif test \"$with_ticlib\" != no ; then\nAC_MSG_CHECKING(if you want tic library to use explicit dependency on ncurses$LIB_SUFFIX library)\nAC_ARG_ENABLE(tic-depends,\n\t[  --disable-tic-depends   link tic library without explicit dependency on ncurses library],\n\t[with_tic_depends=$enableval],\n\t[with_tic_depends=yes])\nAC_MSG_RESULT($with_tic_depends)\nelse\n\twith_tic_depends=no\nfi\n\n###   use option --disable-wattr-macros to suppress wattr* macros from curses.h\nAC_MSG_CHECKING(if you want to suppress wattr* macros to help with ncurses5/ncurses6 transition)\nAC_ARG_ENABLE(wattr-macros,\n\t[  --disable-wattr-macros  suppress wattr* macros to help with ncurses5/ncurses6 transition],\n\t[with_wattr_macros=$enableval],\n\t[with_wattr_macros=yes])\nif [[ \"x$with_wattr_macros\" != xyes ]]; then\n\tNCURSES_WATTR_MACROS=0\n\tAC_MSG_RESULT(yes)\nelse\n\tNCURSES_WATTR_MACROS=1\n\tAC_MSG_RESULT(no)\nfi\nAC_SUBST(NCURSES_WATTR_MACROS)\n\nCF_WITH_X11_RGB\n\n###   use option --with-bool to override bool's type\nAC_MSG_CHECKING(for type of bool)\nAC_ARG_WITH(bool,\n\t[  --with-bool=TYPE        override fallback type of bool variable],\n\t[NCURSES_BOOL=\"$withval\"],\n\t[NCURSES_BOOL=auto])\nAC_MSG_RESULT($NCURSES_BOOL)\nAC_SUBST(NCURSES_BOOL)\n\nAC_MSG_CHECKING(for alternate terminal capabilities file)\nAC_ARG_WITH(caps,\n\t[  --with-caps=alt         compile with alternate Caps file],\n\t[TERMINFO_CAPS=Caps.$withval],\n\t[TERMINFO_CAPS=Caps])\ntest -f \"${srcdir}/include/${TERMINFO_CAPS}\" || TERMINFO_CAPS=Caps\nAC_MSG_RESULT($TERMINFO_CAPS)\nAC_SUBST(TERMINFO_CAPS)\n\n###   use option --with-chtype to override chtype's type\nAC_MSG_CHECKING(for type of chtype)\nAC_ARG_WITH(chtype,\n\t[  --with-chtype=TYPE      override type of chtype],\n\t[NCURSES_CHTYPE=\"$withval\"],\n\t[NCURSES_CHTYPE=$cf_dft_chtype])\nAC_MSG_RESULT($NCURSES_CHTYPE)\n\n###   use option --with-ospeed to override ospeed's type\nAC_MSG_CHECKING(for type of ospeed)\nAC_ARG_WITH(ospeed,\n\t[  --with-ospeed=TYPE      override type of ospeed variable],\n\t[NCURSES_OSPEED=\"$withval\"],\n\t[NCURSES_OSPEED=short])\nAC_MSG_RESULT($NCURSES_OSPEED)\nAC_SUBST(NCURSES_OSPEED)\n\n###   use option --with-mmask-t to override mmask_t's type\nAC_MSG_CHECKING(for type of mmask_t)\nAC_ARG_WITH(mmask-t,\n\t[  --with-mmask-t=TYPE     override type of mmask_t],\n\t[NCURSES_MMASK_T=\"$withval\"],\n\t[NCURSES_MMASK_T=$cf_dft_mmask_t])\nAC_MSG_RESULT($NCURSES_MMASK_T)\n\n###   use option --with-ccharw-max to override CCHARW_MAX size\nAC_MSG_CHECKING(for size CCHARW_MAX)\nAC_ARG_WITH(ccharw-max,\n\t[  --with-ccharw-max=XXX   override size CCHARW_MAX],\n\t[NCURSES_CCHARW_MAX=\"$withval\"],\n\t[NCURSES_CCHARW_MAX=5])\nAC_MSG_RESULT($NCURSES_CCHARW_MAX)\nAC_SUBST(NCURSES_CCHARW_MAX)\n\nAC_CHECK_SIZEOF([signed char])\nif test \"$ac_cv_sizeof_signed_char\" = 1 ; then\n\tNCURSES_SBOOL=\"signed char\"\nelse\n\tNCURSES_SBOOL=\"char\"\nfi\nAC_MSG_CHECKING(if you want to use signed Boolean array in term.h)\nAC_ARG_ENABLE(signed-char,\n\t[  --enable-signed-char    compile using signed Boolean's in term.h],\n\t[with_signed_char=$enableval],\n\t[with_signed_char=no])\nAC_MSG_RESULT($with_signed_char)\ntest \"x$with_signed_char\" != xyes && NCURSES_SBOOL=\"char\"\nAC_SUBST(NCURSES_SBOOL)\n\n###   use option --with-tparm-arg to override tparm's argument type\nAC_MSG_CHECKING(for type of tparm args)\nAC_ARG_WITH(tparm-arg,\n\t[  --with-tparm-arg=TYPE   override parameter type of tparm],\n\t[NCURSES_TPARM_ARG=\"$withval\"],\n\t[NCURSES_TPARM_ARG=$cf_dft_tparm_arg])\nAC_MSG_RESULT($NCURSES_TPARM_ARG)\nAC_SUBST(NCURSES_TPARM_ARG)\n\n### Enable compiling-in rcs id's\nAC_MSG_CHECKING(if RCS identifiers should be compiled-in)\nAC_ARG_WITH(rcs-ids,\n\t[  --with-rcs-ids          compile-in RCS identifiers],\n\t[with_rcs_ids=$withval],\n\t[with_rcs_ids=no])\nAC_MSG_RESULT($with_rcs_ids)\ntest \"x$with_rcs_ids\" = xyes && AC_DEFINE(USE_RCS_IDS,1,[Define to 1 to compile-in RCS identifiers])\n\n###############################################################################\nCF_MAN_PAGES([ captoinfo clear infocmp infotocap reset tabs tic toe tput tset ])\n\n###############################################################################\nCF_HELP_MESSAGE(Extensions:)\n\n### Note that some functions (such as const) are normally disabled anyway.\nAC_MSG_CHECKING(if you want to build with function extensions)\nAC_ARG_ENABLE(ext-funcs,\n\t[  --disable-ext-funcs     disable function-extensions],\n\t[with_ext_funcs=$enableval],\n\t[with_ext_funcs=yes])\nAC_MSG_RESULT($with_ext_funcs)\nif test \"x$with_ext_funcs\" = xyes ; then\n\tNCURSES_EXT_FUNCS=1\n\tAC_DEFINE(NCURSES_EXT_FUNCS,1,[Define to 1 to enable ncurses extended functions])\n\tAC_DEFINE(HAVE_ASSUME_DEFAULT_COLORS,1,[Define to 1 to enable assume_default_colors() function in test-programs])\n\tAC_DEFINE(HAVE_CURSES_VERSION,1,[Define to 1 to enable curses_version() function in test-programs])\n\tAC_DEFINE(HAVE_HAS_KEY,1,[Define to 1 to enable has_key() function in test-programs])\n\tAC_DEFINE(HAVE_RESIZETERM,1,[Define to 1 to enable resizeterm() function in test-programs])\n\tAC_DEFINE(HAVE_RESIZE_TERM,1,[Define to 1 to enable resize_term() function in test-programs])\n\tAC_DEFINE(HAVE_TERM_ENTRY_H,1,[Define to 1 to enable term_entry() function in test-programs])\n\tAC_DEFINE(HAVE_USE_DEFAULT_COLORS,1,[Define to 1 to enable use_default_colors() function in test-programs])\n\tAC_DEFINE(HAVE_USE_EXTENDED_NAMES,1,[Define to 1 to enable use_extended_names() function in test-programs])\n\tAC_DEFINE(HAVE_USE_SCREEN,1,[Define to 1 to enable use_screen() function in test-programs])\n\tAC_DEFINE(HAVE_USE_WINDOW,1,[Define to 1 to enable use_window() function in test-programs])\n\tAC_DEFINE(HAVE_WRESIZE,1,[Define to 1 to enable wresize() function in test-programs])\n\tGENERATED_EXT_FUNCS=generated\n\ttest \"x$with_ext_funcs\" = xyes || cf_dft_ext_spfuncs=no\nelse\n\tNCURSES_EXT_FUNCS=0\n\tGENERATED_EXT_FUNCS=\nfi\nAC_SUBST(NCURSES_EXT_FUNCS)\nAC_SUBST(GENERATED_EXT_FUNCS)\n\nAC_MSG_CHECKING(if you want to build with SCREEN extensions)\nAC_ARG_ENABLE(sp-funcs,\n\t[  --enable-sp-funcs       enable SCREEN-extensions],\n\t[with_sp_funcs=$enableval],\n\t[with_sp_funcs=$cf_dft_ext_spfuncs])\nAC_MSG_RESULT($with_sp_funcs)\nif test \"x$with_sp_funcs\" = xyes ; then\n\tNCURSES_SP_FUNCS=1\n\tAC_DEFINE(NCURSES_SP_FUNCS,1,[Define to 1 to enable SCREEN-extensions])\n\tAC_DEFINE(HAVE_TPUTS_SP,1,[Define to 1 to enable tputs_sp() function in test-programs])\n\tGENERATED_SP_FUNCS=generated\nelse\n\tNCURSES_SP_FUNCS=0\n\tGENERATED_SP_FUNCS=\nfi\nAC_SUBST(NCURSES_SP_FUNCS)\nAC_SUBST(GENERATED_SP_FUNCS)\n\nAC_MSG_CHECKING(if you want to build with terminal-driver)\nAC_ARG_ENABLE(term-driver,\n\t[  --enable-term-driver    enable terminal-driver],\n\t[with_term_driver=$enableval],\n\t[with_term_driver=no])\nAC_MSG_RESULT($with_term_driver)\nif test \"x$with_term_driver\" = xyes ; then\n\tAC_DEFINE(USE_TERM_DRIVER,1,[Define to 1 to enable terminal-driver])\n\tif test \"x$with_termlib\" != xno ; then\n\t\tAC_MSG_ERROR(The term-driver option conflicts with the termlib option)\n\tfi\n\tif test \"x$with_sp_funcs\" != xyes ; then\n\t\tAC_MSG_ERROR(The term-driver option relies upon sp-funcs)\n\tfi\nfi\n\n###   use option --enable-const to turn on use of const beyond that in XSI.\nAC_MSG_CHECKING(for extended use of const keyword)\nAC_ARG_ENABLE(const,\n\t[  --enable-const          compile with extra/non-standard const],\n\t[with_ext_const=$enableval],\n\t[with_ext_const=$cf_dft_ext_const])\nAC_MSG_RESULT($with_ext_const)\nNCURSES_CONST='/*nothing*/'\nif test \"x$with_ext_const\" = xyes ; then\n\tNCURSES_CONST=const\nfi\nAC_SUBST(NCURSES_CONST)\n\n###   use option --enable-ext-colors to turn on use of colors beyond 16.\nAC_MSG_CHECKING(if you want to use extended colors)\nAC_ARG_ENABLE(ext-colors,\n\t[  --enable-ext-colors     compile for 256-color support],\n\t[with_ext_colors=$enableval],\n\t[with_ext_colors=$cf_dft_ext_colors])\nAC_MSG_RESULT($with_ext_colors)\nNCURSES_EXT_COLORS=0\nif test \"x$with_ext_colors\" = xyes ; then\n\tif test \"x$with_widec\" != xyes ; then\n\t\tAC_MSG_WARN(This option applies only to wide-character library)\n\telse\n\t\t# cannot be ABI 5 since it changes sizeof(cchar_t)\n\t\tCF_NCURSES_ABI_6\n\t\tNCURSES_EXT_COLORS=1\n\t\tAC_DEFINE(NCURSES_EXT_COLORS,1,[Define to 1 to compile for 256-color support])\n\t\tAC_DEFINE(HAVE_ALLOC_PAIR,1,[Define to 1 to enable alloc_pair() function])\n\t\tAC_DEFINE(HAVE_INIT_EXTENDED_COLOR,1,[Define to 1 to enable init_extended_color() function in test-programs])\n\t\tAC_DEFINE(HAVE_RESET_COLOR_PAIRS,1,[Define to 1 to enable reset_color_pairs() function in test-programs])\n\tfi\nfi\nAC_SUBST(NCURSES_EXT_COLORS)\n\n###   use option --enable-ext-mouse to modify coding to support 5-button mice\nAC_MSG_CHECKING(if you want to use extended mouse encoding)\nAC_ARG_ENABLE(ext-mouse,\n\t[  --enable-ext-mouse      compile for extended mouse-encoding],\n\t[with_ext_mouse=$enableval],\n\t[with_ext_mouse=$cf_dft_ext_mouse])\nAC_MSG_RESULT($with_ext_mouse)\nNCURSES_MOUSE_VERSION=1\nif test \"x$with_ext_mouse\" = xyes ; then\n\tNCURSES_MOUSE_VERSION=2\n\tCF_NCURSES_ABI_6\nfi\nAC_SUBST(NCURSES_MOUSE_VERSION)\n\n###   use option --enable-ext-putwin to turn on extended screendumps\nAC_MSG_CHECKING(if you want to use extended putwin/screendump)\nAC_ARG_ENABLE(ext-putwin,\n\t[  --enable-ext-putwin     compile with extended putwin/screendump],\n\t[with_ext_putwin=$enableval],\n\t[with_ext_putwin=$cf_dft_ext_putwin])\nAC_MSG_RESULT($with_ext_putwin)\nif test \"x$with_ext_putwin\" = xyes ; then\n\tAC_DEFINE(NCURSES_EXT_PUTWIN,1,[Define to 1 to compile with extended putwin/screendump])\nfi\n\nAC_MSG_CHECKING(if you want \\$NCURSES_NO_PADDING code)\nAC_ARG_ENABLE(no-padding,\n\t[  --enable-no-padding     compile with $NCURSES_NO_PADDING code],\n\t[with_no_padding=$enableval],\n\t[with_no_padding=$with_ext_funcs])\nAC_MSG_RESULT($with_no_padding)\ntest \"x$with_no_padding\" = xyes && AC_DEFINE(NCURSES_NO_PADDING,1,[Define to 1 to compile with $NCURSES_NO_PADDING code])\n\n###   use option --enable-sigwinch to turn on use of SIGWINCH logic\nAC_MSG_CHECKING(if you want SIGWINCH handler)\nAC_ARG_ENABLE(sigwinch,\n\t[  --enable-sigwinch       compile with SIGWINCH handler],\n\t[with_sigwinch=$enableval],\n\t[with_sigwinch=$with_ext_funcs])\nAC_MSG_RESULT($with_sigwinch)\ntest \"x$with_sigwinch\" = xyes && AC_DEFINE(USE_SIGWINCH,1,[Define to 1 to compile with SIGWINCH handler])\n\n###   use option --enable-tcap-names to allow user to define new capabilities\nAC_MSG_CHECKING(if you want user-definable terminal capabilities like termcap)\nAC_ARG_ENABLE(tcap-names,\n\t[  --enable-tcap-names     compile with user-definable terminal capabilities],\n\t[with_tcap_names=$enableval],\n\t[with_tcap_names=$with_ext_funcs])\nAC_MSG_RESULT($with_tcap_names)\nNCURSES_XNAMES=0\ntest \"x$with_tcap_names\" = xyes && NCURSES_XNAMES=1\nAC_SUBST(NCURSES_XNAMES)\n\n##############################################################################\nCF_HELP_MESSAGE(Reentrant Code:)\nCF_WITH_PTHREAD\n\nif test \"x$with_pthread\" != xno; then\n\tAC_CHECK_FUNC(pthread_kill,[\n\t\tAC_MSG_CHECKING(if you want to allow EINTR in wgetch with pthreads)\n\t\tAC_ARG_ENABLE(pthreads-eintr,\n\t\t\t[  --enable-pthreads-eintr enable EINTR in wgetch with pthreads],\n\t\t\t[use_pthreads_eintr=$enableval],\n\t\t\t[use_pthreads_eintr=no])\n\t\tAC_MSG_RESULT($use_pthreads_eintr)\n\t\tif test \"x$use_pthreads_eintr\" = xyes ; then\n\t\t\tAC_DEFINE(USE_PTHREADS_EINTR,1,[Define to 1 to enable EINTR in wgetch with pthreads])\n\t\tfi])\n\n\tAC_MSG_CHECKING(if you want to use weak-symbols for pthreads)\n\tAC_ARG_ENABLE(weak-symbols,\n\t\t[  --enable-weak-symbols   enable weak-symbols for pthreads],\n\t\t[use_weak_symbols=$enableval],\n\t\t[use_weak_symbols=no])\n\tAC_MSG_RESULT($use_weak_symbols)\n\tif test \"x$use_weak_symbols\" = xyes ; then\n\t\tCF_WEAK_SYMBOLS\n\telse\n\t\tcf_cv_weak_symbols=no\n\tfi\n\n\tif test \"x$cf_cv_weak_symbols\" = xyes ; then\n\t\tAC_DEFINE(USE_WEAK_SYMBOLS,1,[Define to 1 to enable weak-symbols for pthreads])\n\tfi\nfi\n\nPTHREAD=\nif test \"x$with_pthread\" = \"xyes\" ; then\n\tAC_DEFINE(USE_PTHREADS,1,[Define to 1 to use pthreads feature])\n\tenable_reentrant=yes\n\tif test \"x$cf_cv_weak_symbols\" = xyes ; then\n\t\tPTHREAD=-lpthread\n\t\tCF_ADD_LIB(pthread,PRIVATE_LIBS)\n\tfi\nfi\nAC_SUBST(PTHREAD)\n\n# Reentrant code has to be opaque; there's little advantage to making ncurses\n# opaque outside of that, so there is no --enable-opaque option.  We can use\n# this option without --with-pthreads, but this will be always set for\n# pthreads.\nAC_MSG_CHECKING(if you want reentrant code)\nAC_ARG_ENABLE(reentrant,\n\t[  --enable-reentrant      compile with reentrant code],\n\t[with_reentrant=$enableval],\n\t[with_reentrant=no])\nAC_MSG_RESULT($with_reentrant)\nif test \"x$with_reentrant\" = xyes ; then\n\tcf_cv_enable_reentrant=1\n\tcf_cv_enable_opaque=\"NCURSES_INTERNALS\"\n\tNCURSES_SIZE_T=int\n\tif test \"x$cf_cv_weak_symbols\" = xyes ; then\n\t\tCF_REMOVE_LIB(LIBS,$LIBS,pthread)\n\t\tCF_ADD_LIB(pthread,TEST_LIBS)\n\t\tCF_ADD_LIB(pthread,TEST_LIBS2)\n\t\tCF_ADD_LIB(pthread,PRIVATE_LIBS)\n\telse\n\t\t# when not using weak symbols but with_reentrant,\n\t\t# add 't' to the library suffix on all platforms\n\t\t# except cygwin, where we only do that if ALSO\n\t\t# compiling with full thread support.\n\t\tcase \"$host\" in\n\t\t(*cygwin* | *msys*)\n\t\t\tif test \"$with_pthread\" = \"yes\" ; then\n\t\t\t\tif test \"x$disable_lib_suffixes\" = \"xno\" ; then\n\t\t\t\t\tLIB_SUFFIX=\"t${LIB_SUFFIX}\"\n\t\t\t\tfi\n\t\t\tfi ;;\n\t\t(*)\n\t\t\tif test \"x$disable_lib_suffixes\" = \"xno\" ; then\n\t\t\t\tLIB_SUFFIX=\"t${LIB_SUFFIX}\"\n\t\t\tfi\n\t\t\t;;\n\t\tesac\n\tfi\n\tAC_DEFINE(USE_REENTRANT,1,[Define to 1 to use reentrant feature])\n\tCF_NCURSES_ABI_6\nelse\n\tcf_cv_enable_reentrant=0\n\tcf_cv_enable_opaque=\"NCURSES_OPAQUE\"\n\tNCURSES_SIZE_T=short\nfi\nAC_SUBST(cf_cv_enable_reentrant)\nAC_SUBST(cf_cv_enable_opaque)\n\nAC_SUBST(NCURSES_SIZE_T)\n\nAC_MSG_CHECKING(if you want opaque curses-library structures)\nCF_ARG_ENABLE(opaque-curses,\n\t[  --enable-opaque-curses  make curses WINDOW, etc., \"opaque\"],\n\t[enable_opaque_curses=yes],[\n\t test \"$cf_cv_enable_reentrant\" = 1 && enable_opaque_curses=yes\n\t test \"$cf_cv_enable_reentrant\" = 1 || enable_opaque_curses=no\n\t])\nAC_MSG_RESULT($enable_opaque_curses)\n\ntest \"$cf_cv_enable_reentrant\" = 1 && \\\ntest \"$enable_opaque_curses\" = no && \\\nAC_MSG_ERROR(reentrant configuration requires opaque library)\n\nAC_MSG_CHECKING(if you want opaque form-library structures)\nAC_ARG_ENABLE(opaque-form,\n\t[  --enable-opaque-form    make form-library structures \"opaque\"],\n\t[enable_opaque_form=yes],[enable_opaque_form=no])\nAC_MSG_RESULT($enable_opaque_form)\n\nAC_MSG_CHECKING(if you want opaque menu-library structures)\nAC_ARG_ENABLE(opaque-menu,\n\t[  --enable-opaque-menu    make menu-library structures \"opaque\"],\n\t[enable_opaque_menu=yes],[enable_opaque_menu=no])\nAC_MSG_RESULT($enable_opaque_menu)\n\nAC_MSG_CHECKING(if you want opaque panel-library structures)\nAC_ARG_ENABLE(opaque-panel,\n\t[  --enable-opaque-panel   make panel-library structures \"opaque\"],\n\t[enable_opaque_panel=yes],[enable_opaque_panel=no])\nAC_MSG_RESULT($enable_opaque_panel)\n\nNCURSES_OPAQUE=0;\t\ttest \"$enable_opaque_curses\" = yes && NCURSES_OPAQUE=1\nNCURSES_OPAQUE_FORM=0;\ttest \"$enable_opaque_form\"   = yes && NCURSES_OPAQUE_FORM=1\nNCURSES_OPAQUE_MENU=0;\ttest \"$enable_opaque_menu\"   = yes && NCURSES_OPAQUE_MENU=1\nNCURSES_OPAQUE_PANEL=0;\ttest \"$enable_opaque_panel\"  = yes && NCURSES_OPAQUE_PANEL=1\n\nAC_SUBST(NCURSES_OPAQUE)\nAC_SUBST(NCURSES_OPAQUE_FORM)\nAC_SUBST(NCURSES_OPAQUE_MENU)\nAC_SUBST(NCURSES_OPAQUE_PANEL)\n\n### Allow using a different wrap-prefix\nif test \"$cf_cv_enable_reentrant\" != 0 || test \"$BROKEN_LINKER\" = 1 ; then\n\tAC_MSG_CHECKING(for prefix used to wrap public variables)\n\tAC_ARG_WITH(wrap-prefix,\n\t\t[  --with-wrap-prefix=XXX  override prefix used for public variables],\n\t\t[NCURSES_WRAP_PREFIX=$withval],\n\t\t[NCURSES_WRAP_PREFIX=_nc_])\n\tAC_MSG_RESULT($NCURSES_WRAP_PREFIX)\nelse\n\tNCURSES_WRAP_PREFIX=_nc_\nfi\nAC_SUBST(NCURSES_WRAP_PREFIX)\nAC_DEFINE_UNQUOTED(NCURSES_WRAP_PREFIX,\"$NCURSES_WRAP_PREFIX\",[Define to override _nc_ prefix])\n\n###############################################################################\n# These options are relatively safe to experiment with.\nCF_HELP_MESSAGE(Development Code:)\nAC_MSG_CHECKING(if you want all development code)\nAC_ARG_WITH(develop,\n\t[  --without-develop       disable development options],\n\t[with_develop=$withval],\n\t[with_develop=no])\nAC_MSG_RESULT($with_develop)\n\n###   use option --enable-hard-tabs to turn on use of hard-tabs optimize\nAC_MSG_CHECKING(if you want hard-tabs code)\nAC_ARG_ENABLE(hard-tabs,\n\t[  --enable-hard-tabs      compile with hard-tabs code],,\n\t[enable_hard_tabs=$with_develop])\nAC_MSG_RESULT($enable_hard_tabs)\ntest \"x$enable_hard_tabs\" = xyes && AC_DEFINE(USE_HARD_TABS,1,[Define to 1 to compile with hard-tabs code])\n\n###   use option --enable-xmc-glitch to turn on use of magic-cookie optimize\nAC_MSG_CHECKING(if you want limited support for xmc)\nAC_ARG_ENABLE(xmc-glitch,\n\t[  --enable-xmc-glitch     compile with support for xmc (magic-cookie)],,\n\t[enable_xmc_glitch=$with_develop])\nAC_MSG_RESULT($enable_xmc_glitch)\ntest \"x$enable_xmc_glitch\" = xyes && AC_DEFINE(USE_XMC_SUPPORT,1,[Define to 1 to compile with support for xmc (magic-cookie)])\n\n###############################################################################\n# These are just experimental, probably should not be in a package:\nCF_HELP_MESSAGE(Experimental Code:)\n\nAC_MSG_CHECKING(if you do not want to assume colors are white-on-black)\nAC_ARG_ENABLE(assumed-color,\n\t[  --disable-assumed-color do not assume anything about default-colors],\n\t[with_assumed_color=$enableval],\n\t[with_assumed_color=yes])\nAC_MSG_RESULT($with_assumed_color)\ntest \"x$with_assumed_color\" = xyes && AC_DEFINE(USE_ASSUMED_COLOR,1,[Define to 1 to assume things about default-colors])\n\n###   use option --enable-hashmap to turn on use of hashmap scrolling logic\nAC_MSG_CHECKING(if you want hashmap scrolling-optimization code)\nAC_ARG_ENABLE(hashmap,\n\t[  --disable-hashmap       compile without hashmap scrolling-optimization],\n\t[with_hashmap=$enableval],\n\t[with_hashmap=yes])\nAC_MSG_RESULT($with_hashmap)\ntest \"x$with_hashmap\" = xyes && AC_DEFINE(USE_HASHMAP,1,[Define to 1 to compile with hashmap scrolling-optimization])\n\n###   use option --enable-colorfgbg to turn on use of $COLORFGBG environment\nAC_MSG_CHECKING(if you want colorfgbg code)\nAC_ARG_ENABLE(colorfgbg,\n\t[  --enable-colorfgbg      compile-in experimental $COLORFGBG code],\n\t[with_colorfgbg=$enableval],\n\t[with_colorfgbg=no])\nAC_MSG_RESULT($with_colorfgbg)\ntest \"x$with_colorfgbg\" = xyes && AC_DEFINE(USE_COLORFGBG,1,[Define to 1 to compile-in experimental $COLORFGBG code])\n\n###   use option --enable-interop to turn on use of bindings used for interop\nAC_MSG_CHECKING(if you want interop bindings)\nAC_ARG_ENABLE(interop,\n\t[  --enable-interop        compile-in interop bindings],\n\t[with_exp_interop=$enableval],\n\t[with_exp_interop=$cf_dft_interop])\nAC_MSG_RESULT($with_exp_interop)\n\nNCURSES_INTEROP_FUNCS=0\ntest \"x$with_exp_interop\" = xyes && NCURSES_INTEROP_FUNCS=1\nAC_SUBST(NCURSES_INTEROP_FUNCS)\n\n\nAC_MSG_CHECKING(if you want experimental safe-sprintf code)\nAC_ARG_ENABLE(safe-sprintf,\n\t[  --enable-safe-sprintf   compile with experimental safe-sprintf code],\n\t[with_safe_sprintf=$enableval],\n\t[with_safe_sprintf=no])\nAC_MSG_RESULT($with_safe_sprintf)\n\n###   use option --disable-scroll-hints to turn off use of scroll-hints scrolling logic\n# when hashmap is used scroll hints are useless\nif test \"$with_hashmap\" = no ; then\nAC_MSG_CHECKING(if you want to experiment without scrolling-hints code)\nAC_ARG_ENABLE(scroll-hints,\n\t[  --disable-scroll-hints  compile without scroll-hints code],\n\t[with_scroll_hints=$enableval],\n\t[with_scroll_hints=yes])\nAC_MSG_RESULT($with_scroll_hints)\ntest \"x$with_scroll_hints\" = xyes && AC_DEFINE(USE_SCROLL_HINTS,1,[Define to 1 to compile without scroll-hints code])\nfi\n\nAC_MSG_CHECKING(if you want wgetch-events code)\nAC_ARG_ENABLE(wgetch-events,\n\t[  --enable-wgetch-events  compile with wgetch-events code],\n\t[with_wgetch_events=$enableval],\n\t[with_wgetch_events=no])\nAC_MSG_RESULT($with_wgetch_events)\ntest \"x$with_wgetch_events\" = xyes && AC_DEFINE(NCURSES_WGETCH_EVENTS,1,[Define to 1 to compile with wgetch-events code])\n\n###############################################################################\nCF_HELP_MESSAGE(Testing/development Options:)\n\n###\tuse option --disable-echo to suppress full display compiling commands\nCF_DISABLE_ECHO\nif test \"x$enable_echo\" = xyes; then\n\tECHO_LINK=\nelse\n\tECHO_LINK='@ echo linking $@ ... ;'\n\ttest -n \"$LIBTOOL\" && LIBTOOL=\"$LIBTOOL --silent\"\n\ttest -n \"$LIBTOOL_CXX\" && LIBTOOL_CXX=\"$LIBTOOL_CXX --silent\"\nfi\nAC_SUBST(ECHO_LINK)\n\n# --disable-stripping is used for debugging\nCF_INSTALL_OPTS\n\n# If we're avoiding relinking of shared libraries during install, that is to\n# avoid modifying the build-tree.  For the same reason, avoid doing ranlib if\n# the install program has \"-p\" (for preserving timestamps).\ncf_cv_do_reranlib=yes\nif test \"x$cf_cv_install_p\" = xyes\nthen\n\tif test \"x$cf_cv_do_relink\" != xyes\n\tthen\n\t\tcf_cv_do_reranlib=no\n\t\tINSTALL_OPT_P=\"-p\"\n\t\tINSTALL_LIB=\"$INSTALL_LIB $INSTALL_OPT_P\"\n\tfi\nfi\nAC_SUBST(INSTALL_OPT_P)\n\n###\tuse option --enable-warnings to turn on all gcc warnings\nAC_MSG_CHECKING(if you want to see compiler warnings)\nAC_ARG_ENABLE(warnings,\n\t[  --enable-warnings       build: turn on GCC compiler warnings],\n\t[with_warnings=$enableval])\nAC_MSG_RESULT($with_warnings)\n\nif test \"x$with_warnings\" = \"xyes\"; then\n \tCF_ADD_ADAFLAGS(-gnatg)\n\tCF_GCC_WARNINGS(Wno-unknown-pragmas Wswitch-enum)\n\tif test \"x$cf_with_cxx\" = xyes ; then\n\t\tCF_GXX_WARNINGS(Wno-unused)\n\tfi\nfi\nCF_GCC_ATTRIBUTES\nCF_ENABLE_STRING_HACKS\n\n###\tuse option --enable-assertions to turn on generation of assertion code\nAC_MSG_CHECKING(if you want to enable runtime assertions)\nAC_ARG_ENABLE(assertions,\n\t[  --enable-assertions     test: turn on generation of assertion code],\n\t[with_assertions=$enableval],\n\t[with_assertions=no])\nAC_MSG_RESULT($with_assertions)\nif test -n \"$GCC\"\nthen\n\tif test \"$with_assertions\" = no\n\tthen\n\t\tCPPFLAGS=\"$CPPFLAGS -DNDEBUG\"\n\telse\n\t\tCF_ADD_ADAFLAGS(-gnata)\n\tfi\nfi\n\n###\tuse option --disable-leaks to suppress \"permanent\" leaks, for testing\nCF_DISABLE_LEAKS\nAC_DEFINE(HAVE_NC_ALLOC_H,1,[Define to 1 if we have nc_alloc.h header])\n\n###\tuse option --enable-expanded to generate certain macros as functions\nAC_ARG_ENABLE(expanded,\n\t[  --enable-expanded       test: generate functions for certain macros],\n\t[test \"x$enableval\" = xyes && AC_DEFINE(NCURSES_EXPANDED,1,[Define to 1 to generate functions for certain macros])])\n\n###\tuse option --disable-macros to suppress macros in favor of functions\nAC_ARG_ENABLE(macros,\n\t[  --disable-macros        test: use functions rather than macros],\n\t[test \"$enableval\" = no && AC_DEFINE(NCURSES_NOMACROS,1,[Define to 1 to use functions rather than macros])])\n\n# Normally we only add trace() to the debug-library.  Allow this to be\n# extended to all models of the ncurses library:\ncf_all_traces=no\ncase \"$CFLAGS $CPPFLAGS\" in\n(*-DTRACE*)\n\tcf_all_traces=yes\n\t;;\nesac\n\nAC_MSG_CHECKING(whether to add trace feature to all models)\nAC_ARG_WITH(trace,\n[  --with-trace            test: add trace() function to all models of ncurses],\n[cf_with_trace=$withval],\n[cf_with_trace=$cf_all_traces])\nAC_MSG_RESULT($cf_with_trace)\n\nif test \"x$cf_with_trace\" = xyes ; then\n\tLIB_TRACING=all\n\tADA_TRACE=TRUE\n\tCF_ADD_CFLAGS(-DTRACE)\n\tAC_DEFINE(HAVE__TRACEF,1,[Define to 1 if we have _tracef function])\nelse\n\tLIB_TRACING=DEBUG\n\tADA_TRACE=FALSE\nfi\n\nAC_SUBST(ADA_TRACE)\n\nCF_DISABLE_GNAT_PROJECTS\n\n###\tChecks for libraries.\ncase $cf_cv_system_name in\n(*mingw32*|*mingw64*)\n\tCPPFLAGS=\"$CPPFLAGS -DWINVER=0x0501 -DWIN32_LEAN_AND_MEAN\"\n\t# Note: WINVER may be a problem with Windows 10\n\t;;\n(*)\nAC_CHECK_FUNC(gettimeofday,\n\tAC_DEFINE(HAVE_GETTIMEOFDAY,1,[Define to 1 if we have gettimeofday function]),[\n\nAC_CHECK_LIB(bsd, gettimeofday,\n\tAC_DEFINE(HAVE_GETTIMEOFDAY,1,[Define to 1 if we have gettimeofday function])\n\tCF_ADD_LIB(bsd))])dnl CLIX: bzero, select, gettimeofday\n\t;;\nesac\n\nCF_MATH_LIB(MATH_LIB,pow(sin(x),x))\nAC_SUBST(MATH_LIB)\n\n###\tChecks for header files.\nAC_STDC_HEADERS\nAC_HEADER_DIRENT\nAC_HEADER_TIME\nCF_REGEX\n\ndnl These are some other potentially nonportable headers.\nAC_CHECK_HEADERS( \\\nfcntl.h \\\ngetopt.h \\\nlimits.h \\\nlocale.h \\\nmath.h \\\npoll.h \\\nsys/bsdtypes.h \\\nsys/ioctl.h \\\nsys/param.h \\\nsys/poll.h \\\nsys/select.h \\\nsys/time.h \\\nsys/times.h \\\nttyent.h \\\nunistd.h \\\nwctype.h \\\n)\n\nCF_GETOPT_HEADER\n\nCF_CHECK_ENVIRON(environ)\nCF_CHECK_GETENV\nif test \"x$cf_cv_consistent_getenv\" = xno && \\\n\ttest \"x$cf_with_trace\" = xyes\nthen\n\tAC_MSG_WARN(The NCURSES_TRACE environment variable is not supported with this configuration)\nfi\n\n# check for ISC (this may also define _POSIX_SOURCE)\n# Note: even non-Posix ISC needs <sys/bsdtypes.h> to declare fd_set\nif test \"x$ISC\" = xyes ; then\n\tAC_CHECK_LIB(cposix,main)\n\tAC_CHECK_LIB(inet,bzero,CF_ADD_LIB(inet))dnl also 'select()'\nfi\n\nCF_SYS_TIME_SELECT\n\n###\tchecks for compiler characteristics\nAC_LANG_C\nAC_C_CONST\nCF_C_INLINE(NCURSES_INLINE,1200)\nCF_SIG_ATOMIC_T\n\nif test $NCURSES_CHTYPE = auto ; then\n\tCF_TYPEOF_CHTYPE\nelse\n\tcf_cv_typeof_chtype=$NCURSES_CHTYPE\nfi\ntest \"$cf_cv_typeof_chtype\" = unsigned && cf_cv_typeof_chtype=\"\"\nAC_SUBST(cf_cv_typeof_chtype)\n\nCF_UNSIGNED_LITERALS\ncf_cv_1UL=\"1\"\ntest \".$cf_cv_unsigned_literals\" = .yes && cf_cv_1UL=\"${cf_cv_1UL}U\"\ntest \".$cf_cv_typeof_chtype\"    = .long && cf_cv_1UL=\"${cf_cv_1UL}L\"\nAC_SUBST(cf_cv_1UL)\n\nif test $NCURSES_MMASK_T = auto ; then\n\tcf_cv_typeof_mmask_t=long\nelse\n\tcf_cv_typeof_mmask_t=$NCURSES_MMASK_T\nfi\ntest \"$cf_cv_typeof_mmask_t\" = unsigned && cf_cv_typeof_mmask_t=\"\"\nAC_SUBST(cf_cv_typeof_mmask_t)\n\n###\tChecks for external-data\nCF_ERRNO\nCF_LINK_DATAONLY\n\n###\tChecks for library functions.\nAC_CHECK_FUNCS( \\\ngetcwd \\\ngetegid \\\ngeteuid \\\ngetopt \\\ngetttynam \\\nissetugid \\\nlocaleconv \\\npoll \\\nputenv \\\nremove \\\nselect \\\nsetbuf \\\nsetbuffer \\\nsetenv \\\nsetvbuf \\\nsigaction \\\nsigvec \\\nstrdup \\\nstrstr \\\nsysconf \\\ntcgetpgrp \\\ntimes \\\ntsearch \\\nvsnprintf \\\n)\n\nif test \"x$ac_cv_func_getopt\" = xno && \\\n   test \"x$cf_with_progs$cf_with_tests\" != xnono; then\n\tAC_MSG_ERROR(getopt is required for building programs)\nfi\n\nif test \"x$with_safe_sprintf\" = xyes\nthen\n\tif test \"x$ac_cv_func_vsnprintf\" = xyes\n\tthen\n\t\tAC_MSG_WARN(will use vsnprintf instead of safe-sprintf option)\n\telse\n\t\tAC_DEFINE(USE_SAFE_SPRINTF,1,[Define to 1 to compile with experimental safe-sprintf code])\n\tfi\nfi\n\nif test \"x$with_getcap\" = \"xyes\" ; then\n\tCF_CGETENT\nfi\n\nCF_ISASCII\nCF_STRUCT_SIGACTION\nCF_FUNC_NANOSLEEP\nCF_FUNC_TERMIOS\nCF_FUNC_VSSCANF\nCF_MKSTEMP\n\n# setup for prototype of fallback for vsscanf()\nCF_SUBST_IF([\"$cf_cv_func_vsscanf\" = vsscanf], HAVE_VSSCANF, 1, 0)\n\ndnl FIXME (may need this) AC_SYS_RESTARTABLE_SYSCALLS\nif test \"x$cross_compiling\" = xyes ; then\n\tAC_MSG_WARN(cross compiling: assume setvbuf params not reversed)\nelse\n\tAC_FUNC_SETVBUF_REVERSED\nfi\nAC_CHECK_TYPE(intptr_t, long)\nAC_CHECK_TYPE(ssize_t, int)\nCF_TYPE_SIGACTION\nCF_SIZECHANGE\nCF_FUNC_MEMMOVE\nCF_FUNC_POLL\nCF_VA_COPY\nAC_FUNC_VFORK\nCF_FOPEN_BIN_R\n\n# special check for test/ditto.c\nCF_FUNC_OPENPTY\nif test \"$cf_cv_func_openpty\" != no ; then\n\tAC_DEFINE_UNQUOTED(USE_OPENPTY_HEADER,<$cf_cv_func_openpty>,[Define to actual header for openpty function])\n\tAC_DEFINE(USE_XTERM_PTY,1,[Define to 1 if we should assume xterm pseudoterminal interface])\n\tif test \"x$cf_cv_lib_util\" = xyes ; then\n\t\tCF_ADD_LIB(util,TEST_LIBS)\n\tfi\nfi\nAC_SUBST(TEST_LIBS)\nAC_SUBST(TEST_LIBS2)\n\nif test \"$with_hashed_db\" != no ; then\n\tAC_DEFINE(USE_HASHED_DB,1,[Define to 1 if we should build terminfo in hashed database])\n\tCF_HASHED_DB($with_hashed_db)\nfi\n\ndnl We'll do our own -g libraries, unless the user's overridden via $CFLAGS\nif test -z \"$cf_user_CFLAGS\" && test \"$with_no_leaks\" = no ; then\n\tCF_STRIP_G_OPT(CFLAGS)\n\tCF_STRIP_G_OPT(CXXFLAGS)\nfi\n\n# Just in case, check if the C compiler has a bool type.\nCF_BOOL_DECL(cf_cv_cc_bool_type)\n\n# Check for C++ compiler characteristics (and ensure that it's there!)\nif test -n \"$CXX\" ; then\n\tAC_LANG_CPLUSPLUS\n\tCF_STDCPP_LIBRARY\n\tCF_PROG_CC_C_O(CXX,[$CXXFLAGS $CPPFLAGS])\n\n\tcase $GXX_VERSION in\n\t(1*|2.[0-6]*)\n\t\tcf_cxx_library=yes\n\t\t;;\n\t(*-2.7*|2.7*)\n\t\tCF_GPP_LIBRARY\n\t\t;;\n\t(*)\n\t\tcf_cxx_library=no\n\t\t;;\n\tesac\n\n\tAC_CHECK_HEADERS(typeinfo)\n\tCF_CXX_IOSTREAM_NAMESPACE\n\tCF_BOOL_DECL\n\tCF_BOOL_SIZE\n\tCF_ETIP_DEFINES\n\tCF_CPP_PARAM_INIT\n\tCF_CPP_STATIC_CAST\n\tCF_CXX_AR_FLAGS\nelse\n\tcf_cxx_library=no\n\tcf_cv_builtin_bool=1\n\n\t# Just because we are not configuring against C++ right now does not\n\t# mean that a user will not want to use C++.  Some distributors disable\n\t# the C++ portion of this configuration as a shortcut (or just to avoid\n\t# compiling the demo in the c++ directory).  So we need a reasonable\n\t# default for the 'bool' type.\n\t#\n\t# Caveat: since the storage of the bool type is not standardized, it\n\t# may change.\n\n\tif test \"$NCURSES_BOOL\" != auto ; then\n\t\tcf_cv_type_of_bool=$NCURSES_BOOL\n\t\tcf_cv_header_stdbool_h=0\n\telse\n\t\tif test \"$cf_cv_header_stdbool_h\" = 1 ; then\n\t\t\tCF_BOOL_SIZE\n\t\telse\n\t\t\tAC_MSG_CHECKING(for fallback type of bool)\n\t\t\tcase \"$host_cpu\" in\n\t\t\t(i?86)\tcf_cv_type_of_bool=char\t;;\n\t\t\t(*)\tcf_cv_type_of_bool=int\t;;\n\t\t\tesac\n\t\t\tAC_MSG_RESULT($cf_cv_type_of_bool)\n\t\tfi\n\tfi\nfi\nAC_SUBST(CXXLIBS)\n\n# If the C compiler did not declare bool, and we did not determine that the C++\n# compiler does not declare bool, turn on an ifdef in curses.h that makes the\n# ncurses library use the same type as C++ bool.  Note that this allows one to\n# specify the type of bool in a configure-script option and postpone\n# integration with the C++ compiler provided that the types are compatible.\nUSE_CXX_BOOL=1\nif test $cf_cv_cc_bool_type = 1\nthen\n\t# oops: C has a bool.  Unlikely, but C++ could differ.\n\tUSE_CXX_BOOL=0\nelif test $cf_cv_builtin_bool = 0\nthen\n\t# C++ has no bool\n\tUSE_CXX_BOOL=0\nelse\n\t# this is the normal case\n\tUSE_CXX_BOOL='defined(__cplusplus)'\nfi\nAC_SUBST(USE_CXX_BOOL)\n\nCF_HELP_MESSAGE(Ada Binding Options:)\n\ndnl If the Ada95 source-tree is present, add that to the build unless it will\ndnl not work, or was not requested.\nif test -f \"${srcdir}/Ada95/Makefile.in\" ; then\n\ndnl libtool does not know anything about GNAT, though a change made in 1998\ndnl provided for it \"someday\".  Disable the ada subtree if we are using\ndnl libtool -TD 20070714\n\tif test \"$cf_with_ada\" != \"no\" ; then\n\t\tif test \"$with_libtool\" != \"no\"; then\n\t\t\tAC_MSG_WARN(libtool does not support Ada - disabling feature)\n\t\t\tcf_with_ada=no\n\t\tfi\n\tfi\n\ndnl Check for availability of GNU Ada Translator (GNAT).\ndnl At the moment we support no other Ada compiler.\n\tif test \"$cf_with_ada\" != \"no\" ; then\n\t\tCF_PROG_GNAT\n\t\tif test\t\"x$cf_cv_prog_gnat_correct\" = xyes; then\n\t\t\tCF_ADD_ADAFLAGS(-gnatpn)\n\t\t\tCF_FIXUP_ADAFLAGS\n\n\t\t\tCF_GNATPREP_OPT_T\n\n\t\t\tCF_GNAT_GENERICS\n\t\t\tCF_GNAT_SIGINT\n\t\t\tCF_GNAT_PROJECTS\n\n\t\t\tCF_WITH_ADA_COMPILER\n\n\t\t\tcf_ada_package=terminal_interface\n\t\t\tAC_SUBST(cf_ada_package)\n\n\t\t\tCF_WITH_ADA_INCLUDE\n\t\t\tCF_WITH_ADA_OBJECTS\n\t\t\tCF_WITH_ADA_SHAREDLIB\n\n\t\t\t# allow the Ada binding to be renamed\n\t\t\tCF_WITH_ADA_LIBNAME(AdaCurses)\n\t\tfi\n\tfi\nelse\n\tcf_with_ada=no\nfi\n\n# do this \"late\" to avoid conflict with header-checks\nif test \"x$with_widec\" = xyes ; then\n\tAC_CHECK_SIZEOF(wchar_t)\n\t# cross-compiling to mingw can run into the problem that attempting to\n\t# link with the regex library fails, causing the test to not set this to\n\t# a number.  \"recent\" autoconf does not address this problem either -TD\n\tif test -z \"$ac_cv_sizeof_wchar_t\"\n\tthen\n\t\tCF_VERBOSE(test failed (assume 2))\n\t\tsed /SIZEOF_WCHAR_T/d confdefs.h >confdefs.tmp\n\t\tmv confdefs.tmp confdefs.h\n\t\techo \"#define SIZEOF_WCHAR_T 2\" >>confdefs.h\n\tfi\nfi\n\n### Construct the ncurses library-subsets, if any, from this set of keywords:\n###\tnone, base, ext_funcs, ext_tinfo, ticlib, termlib, widechar\n###\n### ticlib modules may be a separate library, otherwise contained in termlib.\n### termlib modules may be a separate library, otherwise contained in ncurses.\n###\n### The of \"+\" or \" \" between the tokens controls the way the script\n### chooses to split module lists into libraries.\n###\n### (see CF_LIB_RULES).\nAC_MSG_CHECKING(for library subsets)\nLIB_SUBSETS=\n\nif test \"x$cf_with_progs\" = xyes || test \"$with_ticlib\" != no || test \"$with_termcap\" != no; then\n\tLIB_SUBSETS=\"${LIB_SUBSETS}ticlib\"\n\tif test \"$with_ticlib\" != no ; then\n\t\tLIB_SUBSETS=\"${LIB_SUBSETS} \"\n\telse\n\t\tLIB_SUBSETS=\"${LIB_SUBSETS}+\"\n\tfi\nfi\n\nLIB_SUBSETS=\"${LIB_SUBSETS}termlib\"\ntest \"x$with_ext_funcs\" = xyes && LIB_SUBSETS=\"${LIB_SUBSETS}+ext_tinfo\"\n\nif test \"$with_termlib\" != no ; then\n\tLIB_SUBSETS=\"${LIB_SUBSETS} \"\nelse\n\tLIB_SUBSETS=\"${LIB_SUBSETS}+\"\nfi\n\nLIB_SUBSETS=\"${LIB_SUBSETS}base\"\n\n# Most term-driver calls are to tinfo, but some like init_pair are to the\n# base library (so it resides in base).\nif test \"$with_term_driver\" != no ; then\n\tLIB_SUBSETS=\"${LIB_SUBSETS}+port_drivers\"\n\tcase $cf_cv_system_name in\n\t(*mingw32*|*mingw64*)\n\t\tLIB_SUBSETS=\"${LIB_SUBSETS}+port_tinfo+port_win32con\"\n\t\tCPPFLAGS=\"$CPPFLAGS -DUSE_WIN32CON_DRIVER\"\n\t\t;;\n\t(*)\n\t\tLIB_SUBSETS=\"${LIB_SUBSETS}+port_tinfo\"\n\t\t;;\n\tesac\nfi\n\ntest \"x$with_widec\"     = xyes && LIB_SUBSETS=\"${LIB_SUBSETS}+widechar\"\ntest \"x$with_ext_funcs\" = xyes && LIB_SUBSETS=\"${LIB_SUBSETS}+ext_funcs\"\n\nAC_MSG_RESULT($LIB_SUBSETS)\n\n### Construct the list of include-directories to be generated\nCF_INCLUDE_DIRS\nCF_ADA_INCLUDE_DIRS\n\n### Build up pieces for makefile rules\nAC_MSG_CHECKING(default library suffix)\nCF_LIB_TYPE($DFT_LWR_MODEL,DFT_ARG_SUFFIX)dnl\nAC_SUBST(DFT_ARG_SUFFIX)dnl the string to append to \"-lncurses\" (\"\")\nAC_MSG_RESULT($DFT_ARG_SUFFIX)\n\nAC_MSG_CHECKING(default library-dependency suffix)\nCF_LIB_SUFFIX($DFT_LWR_MODEL,DFT_LIB_SUFFIX,DFT_DEP_SUFFIX)dnl\nAC_SUBST(DFT_DEP_SUFFIX)dnl the corresponding library-suffix (\".a\")\nAC_MSG_RESULT($DFT_DEP_SUFFIX)\n\nAC_MSG_CHECKING(default object directory)\nCF_OBJ_SUBDIR($DFT_LWR_MODEL,DFT_OBJ_SUBDIR)dnl\nAC_SUBST(DFT_OBJ_SUBDIR)dnl the default object-directory (\"obj\")\nAC_MSG_RESULT($DFT_OBJ_SUBDIR)\n\nif test \"x$cf_with_cxx\" = xyes ; then\nAC_MSG_CHECKING(c++ library-dependency suffix)\nif test \"$with_libtool\" != \"no\"; then\n\t# libtool thinks it can make c++ shared libraries (perhaps only g++)\n\tCXX_LIB_SUFFIX=$DFT_DEP_SUFFIX\nelif test \"$with_shared_cxx\" != \"no\"; then\n\t# also for g++ users...\n\tCXX_LIB_SUFFIX=$DFT_DEP_SUFFIX\nelse\n\t# we normally make a static library because C/C++ library rules differ\n\tCF_LIB_SUFFIX(normal,CXX_LIB_SUFFIX,CXX_DEP_SUFFIX)\nfi\nAC_MSG_RESULT($CXX_LIB_SUFFIX)\nAC_SUBST(CXX_LIB_SUFFIX)\nfi\n\n# do not want -ldl in build except as needed for -lncurses dependency\nif test \"x$with_dlsym\" = xyes ; then\nif test $DFT_LWR_MODEL = shared || \\\n   test $DFT_LWR_MODEL = libtool ; then\n\tCF_REMOVE_LIB(LIBS,$LIBS,dl)\nfi\nfi\n### Set up low-level terminfo dependencies for makefiles.\n\n# TICS_LIST and TINFO_LIST are needed to build libtic.so and libterm.so, but\n# do not need libdl\nTICS_LIST=\nif test \"x$with_dlsym\" = xyes ; then\n\tCF_REMOVE_LIB(TINFO_LIST,$SHLIB_LIST,dl)\nfi\n\nUSE_ARG_SUFFIX=\"${DFT_ARG_SUFFIX}${EXTRA_SUFFIX}\"\nUSE_LIB_SUFFIX=\"${LIB_SUFFIX}${EXTRA_SUFFIX}\"\nUSE_CFG_SUFFIX=${DFT_ARG_SUFFIX}${cf_cv_abi_version}\nif test -n \"$EXTRA_SUFFIX\" && test \"x$EXTRA_SUFFIX\" != \"x${cf_cv_abi_version}\"\nthen\n\tUSE_CFG_SUFFIX=\"${USE_CFG_SUFFIX}${EXTRA_SUFFIX}\"\nfi\nAC_SUBST(USE_ARG_SUFFIX)\nAC_SUBST(USE_CFG_SUFFIX)\nAC_SUBST(USE_LIB_SUFFIX)\n\nif test \"$with_ticlib\" != no ; then\n\n\tif test \"x$with_ticlib\" != xyes ; then\n\t\tTICS_NAME=$with_ticlib\n\t\tTICS_SUFFIX=\"`echo ${DFT_LIB_SUFFIX}|sed -e \"s/^${USE_LIB_SUFFIX}//\"`\"\n\t\tTICS_ARG_SUFFIX=\"${with_ticlib}`echo ${USE_ARG_SUFFIX}|sed -e \"s/^${LIB_SUFFIX}//\"`\"\n\t\tTICS_DEP_SUFFIX=\"${with_ticlib}`echo ${DFT_DEP_SUFFIX}|sed -e \"s/^${LIB_SUFFIX}//\"`\"\n\t\tTICS_LIB_SUFFIX=\"${with_ticlib}\"\n\telse\n\t\tTICS_SUFFIX=${DFT_LIB_SUFFIX}\n\t\tTICS_ARG_SUFFIX=\"${TICS_NAME}${USE_ARG_SUFFIX}\"\n\t\tTICS_DEP_SUFFIX=\"${TICS_NAME}${DFT_DEP_SUFFIX}\"\n\t\tTICS_LIB_SUFFIX=\"${TICS_NAME}${USE_LIB_SUFFIX}\"\n\tfi\n\tTICS_LDFLAGS=\"-L${LIB_DIR}\"\n\tTICS_LIBS=\"-l${TICS_ARG_SUFFIX}\"\nelse\n\tTICS_SUFFIX=${DFT_LIB_SUFFIX}\n\tTICS_LDFLAGS=\"-L${LIB_DIR}\"\n\tTICS_LIBS=\"-l${LIB_NAME}${USE_ARG_SUFFIX}\"\nfi\nAC_SUBST(TICS_ARG_SUFFIX)\nAC_SUBST(TICS_DEP_SUFFIX)\nAC_SUBST(TICS_LIB_SUFFIX)\nAC_SUBST(TICS_LDFLAGS)\nAC_SUBST(TICS_LIBS)\n\nif test \"$with_termlib\" != no ; then\n\n\tif test \"x$with_termlib\" != xyes ; then\n\t\tTINFO_NAME=$with_termlib\n\t\tTINFO_SUFFIX=\"`echo ${DFT_LIB_SUFFIX}|sed -e \"s/^${USE_LIB_SUFFIX}//\"`\"\n\t\tTINFO_ARG_SUFFIX=\"${with_termlib}`echo ${USE_ARG_SUFFIX}|sed -e \"s/^${LIB_SUFFIX}//\"`\"\n\t\tTINFO_DEP_SUFFIX=\"${with_termlib}`echo ${DFT_DEP_SUFFIX}|sed -e \"s/^${LIB_SUFFIX}//\"`\"\n\t\tTINFO_LIB_SUFFIX=\"${with_termlib}\"\n\telse\n\t\tTINFO_SUFFIX=${DFT_LIB_SUFFIX}\n\t\tTINFO_ARG_SUFFIX=\"${TINFO_NAME}${USE_ARG_SUFFIX}\"\n\t\tTINFO_DEP_SUFFIX=\"${TINFO_NAME}${DFT_DEP_SUFFIX}\"\n\t\tTINFO_LIB_SUFFIX=\"${TINFO_NAME}${USE_LIB_SUFFIX}\"\n\tfi\n\n\tTEST_DEPS=\"${LIB_DIR}/${LIB_PREFIX}${TINFO_DEP_SUFFIX}\"\n\tTEST_DEP2=\"${LIB_2ND}/${LIB_PREFIX}${TINFO_DEP_SUFFIX}\"\n\tif test \"$DFT_LWR_MODEL\" = \"libtool\"; then\n\t\tTEST_ARGS=\"${TEST_DEPS}\"\n\t\tTEST_ARG2=\"${TEST_DEP2}\"\n\t\tTINFO_LDFLAGS=\"-L${LIB_DIR}\"\n\t\tTINFO_LIBS=\"$TEST_ARGS\"\n\t\tTICS_LIST=\"$SHLIB_LIST $TEST_ARGS\"\n\t\tSHLIB_LIST=\"${SHLIB_LIST} $TEST_ARGS\"\n\telse\n\t\tTEST_ARGS=\"-l${TINFO_ARG_SUFFIX}\"\n\t\tTEST_ARG2=\"-l${TINFO_ARG_SUFFIX}\"\n\t\tif test \"x$with_term_driver\" != xno ; then\n\t\t\tTICS_LIST=\"$SHLIB_LIST -l${LIB_NAME}${USE_ARG_SUFFIX}\"\n\t\t\tTICS_LIBS=\"$TICS_LIBS -l${LIB_NAME}${USE_ARG_SUFFIX}\"\n\t\t\tTINFO_LIBS=\"-l${LIB_NAME}${USE_ARG_SUFFIX} $TEST_ARGS\"\n\t\telse\n\t\t\tTICS_LIST=\"$SHLIB_LIST -l${TINFO_LIB_SUFFIX}\"\n\t\t\tTINFO_LIBS=\"$TEST_ARGS\"\n\t\tfi\n\t\tTINFO_LDFLAGS=\"-L${LIB_DIR}\"\n\t\tSHLIB_LIST=\"$SHLIB_LIST -l${TINFO_LIB_SUFFIX}\"\n\tfi\nelse\n\t# the next lines are needed for linking libtic over libncurses\n\tTINFO_NAME=${LIB_NAME}\n\tTINFO_SUFFIX=${DFT_LIB_SUFFIX}\n\tTINFO_ARG_SUFFIX=${LIB_NAME}${USE_ARG_SUFFIX}\n\tif test \"x$with_tic_depends\" = xyes ; then\n\t\tTICS_LIST=\"$SHLIB_LIST -l${LIB_NAME}${USE_ARG_SUFFIX}\"\n\telse\n\t\tTICS_LIST=\"$SHLIB_LIST\"\n\tfi\n\n\tTINFO_LDFLAGS=\"-L${LIB_DIR}\"\n\tTINFO_LIBS=\"-l${LIB_NAME}${USE_ARG_SUFFIX}\"\nfi\n\nif test \"$DFT_LWR_MODEL\" = shared ; then\n\tcase $cf_cv_system_name in\n\t(cygwin*|msys*)\n\t\t# \"lib\" files have \".dll.a\" suffix, \"cyg\"or \"msys-\" files have \".dll\"\n\t\tTINFO_SUFFIX=.dll\n\t\t;;\n\tesac\nfi\n\nAC_SUBST(TINFO_ARG_SUFFIX)\nAC_SUBST(TINFO_DEP_SUFFIX)\nAC_SUBST(TINFO_LIB_SUFFIX)\nAC_SUBST(TINFO_LDFLAGS)\nAC_SUBST(TINFO_LIBS)\n\nif test \"x$with_dlsym\" = xyes ; then\n\tCF_REMOVE_LIB(TICS_LIST,$TICS_LIST,dl)\nfi\n\nif test \"$DFT_LWR_MODEL\" = \"libtool\"; then\n\tOBJEXT=lo\nfi\n\n# needed for Ada95\nTINFO_LDFLAGS2=`echo \"$TINFO_LDFLAGS\" | sed -e 's,-L\\.\\./,-L../../,'`\nAC_SUBST(TINFO_LDFLAGS2)\n\ncase $DFT_LWR_MODEL in\n(normal|debug|profile)\n\tCF_LDFLAGS_STATIC\n\t;;\nesac\n\nAC_MSG_CHECKING(where we will install curses.h)\nAC_SUBST(includesubdir)\nincludesubdir=\nif test \"$with_overwrite\" = no && \\\n ( test \"x$includedir\" = 'x${prefix}/include' || \\\n   test \"x$includedir\" = \"x${prefix}/include\" )\nthen\n\tincludesubdir=\"/ncurses${USE_LIB_SUFFIX}\"\nfi\nAC_MSG_RESULT(${includedir}${includesubdir})\n\n### Resolve a conflict between normal and wide-curses by forcing applications\n### that will need libutf8 to add it to their configure script.\nif test \"$with_overwrite\" != no ; then\nif test \"$NCURSES_LIBUTF8\" = 1 ; then\n\tNCURSES_LIBUTF8='defined(HAVE_LIBUTF8_H)'\n\tAC_MSG_WARN(Wide-character applications must define HAVE_LIBUTF8_H to include curses.h)\nfi\nfi\nWITH_OVERWRITE=$with_overwrite\n\nAC_SUBST(WITH_OVERWRITE)\nAC_SUBST(TICS_LIST)\nAC_SUBST(TINFO_LIST)\nAC_SUBST(SHLIB_LIST)\n\n# used to separate tack out of the tree\nNCURSES_TREE=\nAC_SUBST(NCURSES_TREE)\n\n### predefined stuff for the test programs\nAC_DEFINE(HAVE_SLK_COLOR,1,[Define to 1 if we have slk_color for test-programs])\n\n### Construct the list of subdirectories for which we'll customize makefiles\n### with the appropriate compile-rules.\n\nCF_SRC_MODULES($modules_to_build)\n\nif test \"x$cf_with_ada\" = \"xyes\" && test \"x$cf_cv_prog_gnat_correct\" = \"xyes\"; then\n   SUB_MAKEFILES=\"$SUB_MAKEFILES Ada95/src/library.gpr:Ada95/src/library.gpr.in\"\n   SUB_MAKEFILES=\"$SUB_MAKEFILES Ada95/gen/adacurses${USE_CFG_SUFFIX}-config:Ada95/gen/adacurses-config.in\"\n   SUB_MAKEFILES=\"$SUB_MAKEFILES man/adacurses${USE_CFG_SUFFIX}-config.1:man/MKada_config.in\"\nfi\n\nCF_DIRS_TO_MAKE\n\n# symbols that differ when compiling Ada95 by itself.\nNCURSES_SHLIB2=$SHELL' $(top_srcdir)/misc/shlib'\nAC_SUBST(NCURSES_SHLIB2)\n\n# values to use as strings\nAC_DEFINE_UNQUOTED(NCURSES_PATHSEP,'$PATH_SEPARATOR',[Define to override ':' as library path-separator])\n\nAC_DEFINE_UNQUOTED(NCURSES_VERSION_STRING, \"${NCURSES_MAJOR}.${NCURSES_MINOR}.${NCURSES_PATCH}\",[Define to 1 if machine has ample memory for tic])\n\n### Now that we're done running tests, add the compiler-warnings, if any\nCF_ADD_CFLAGS($EXTRA_CFLAGS)\n\n### Define substitutions for header files to avoid name-pollution\nCF_SUBST_IF([\"x$cf_cv_have_tcgetattr\" = xyes], HAVE_TCGETATTR, 1, 0)\nCF_SUBST_IF([\"x$ac_cv_header_stdint_h\" = xyes], HAVE_STDINT_H, 1, 0)\nCF_SUBST_IF([\"x$ac_cv_header_termio_h\" = xyes], HAVE_TERMIO_H, 1, 0)\nCF_SUBST_IF([\"x$ac_cv_header_termios_h\" = xyes], HAVE_TERMIOS_H, 1, 0)\n\n################################################################################\ntest \"x$use_database\" = xyes && \\\nSUB_MAKEFILES=\"$SUB_MAKEFILES misc/run_tic.sh:misc/run_tic.in\"\n\nSUB_MAKEFILES=\"$SUB_MAKEFILES misc/ncurses-config:misc/ncurses-config.in\"\nSUB_MAKEFILES=\"$SUB_MAKEFILES man/ncurses${USE_CFG_SUFFIX}-config.1:man/MKncu_config.in\"\n\nif test \"x$enable_pc_files\" = xyes && test -z \"$MAKE_PC_FILES\" ; then\nSUB_MAKEFILES=\"$SUB_MAKEFILES misc/gen-pkgconfig:misc/gen-pkgconfig.in\"\nfi\nAC_SUBST(cross_compiling)\n\nif test \"x$cf_with_tests\" != xno ; then\n\tMAKE_TESTS=\nelse\n\tMAKE_TESTS=\"#\"\nfi\nAC_SUBST(MAKE_TESTS)\n\nADAHTML_DIR=../../doc/html/ada\nAC_SUBST(ADAHTML_DIR)\n\n# these could be configurable, but are not currently\nPANEL_NAME=panel\nMENU_NAME=menu\nFORM_NAME=form\nCXX_NAME=ncurses++\n\nAC_SUBST(PANEL_NAME)\nAC_SUBST(MENU_NAME)\nAC_SUBST(FORM_NAME)\nAC_SUBST(CXX_NAME)\n\n# workaround for OS/2 (20151017)\ncase $cf_cv_system_name in\n(os2*)\n\tLIBTOOL_OPTS_CXX=\"-os2dllname ncurs++\"\n\t;;\n(*)\n\tLIBTOOL_OPTS_CXX=\n\t;;\nesac\nAC_SUBST(LIBTOOL_OPTS_CXX)\n\n# workaround for g++ versus Solaris (20131116)\ncase $cf_cv_system_name in\n(solaris2*)\n\tcase \"x$CPPFLAGS\" in\n\t(*-D_XOPEN_SOURCE_EXTENDED*)\n\t\tCF_VERBOSE(moving _XOPEN_SOURCE_EXTENDED to work around g++ problem)\n\t\tCFLAGS=\"$CFLAGS -D_XOPEN_SOURCE_EXTENDED\"\n\t\tCPPFLAGS=`echo \"x$CPPFLAGS\" | sed -e  's/^.//' -e 's/-D_XOPEN_SOURCE_EXTENDED//'`\n\t\t;;\n\tesac\n\t;;\nesac\n\n# Help to automatically enable the extended curses features when using either\n# the *-config or the \".pc\" files by adding defines.\nAC_MSG_CHECKING(for defines to add to ncurses${USE_CFG_SUFFIX}-config script)\nPKG_CFLAGS=\nfor cf_loop1 in $CPPFLAGS_after_XOPEN\ndo\n\tcf_found=no\n\tfor cf_loop2 in $CPPFLAGS_before_XOPEN\n\tdo\n\t\tif test \"x$cf_loop1\" = \"x$cf_loop2\"\n\t\tthen\n\t\t\tcf_found=yes\n\t\t\tbreak\n\t\tfi\n\tdone\n\ttest \"$cf_found\" = no && PKG_CFLAGS=\"$PKG_CFLAGS $cf_loop1\"\ndone\nAC_MSG_RESULT($PKG_CFLAGS)\nAC_SUBST(PKG_CFLAGS)\n\n# AC_CHECK_SIZEOF demands a literal parameter, no variables.  So we do this.\ncase \"x$NCURSES_OSPEED\" in\n(*short*)\n\tcf_compatible=1\n\t;;\n(*)\n\tcf_compatible=0\n\t;;\nesac\nAC_DEFINE_UNQUOTED(NCURSES_OSPEED_COMPAT,$cf_compatible,[Define to 1 if termcap variable ospeed is short])\n\ncase \"x$cf_cv_typeof_chtype\" in\n(xshort|xint|xlong)\n\tcf_cv_typeof_chtype=\"unsigned $cf_cv_typeof_chtype\"\n\t;;\nesac\n\ncase \"x$cf_cv_typeof_mmask_t\" in\n(xshort|xint|xlong)\n\tcf_cv_typeof_mmask_t=\"unsigned $cf_cv_typeof_mmask_t\"\n\t;;\nesac\n\n# substitute into misc/Makefile to suppress\n# (un)install.data from the\n# (un)install rules.\nif test \"x$cf_with_db_install\" = \"xno\"; then\n\tMISC_INSTALL_DATA=\n\tMISC_UNINSTALL_DATA=\nelse\n\tMISC_INSTALL_DATA=install.data\n\tMISC_UNINSTALL_DATA=uninstall.data\nfi\nAC_SUBST(MISC_INSTALL_DATA)\nAC_SUBST(MISC_UNINSTALL_DATA)\n\nif test \"x$cf_with_db_install\" = \"xno\" || test \"x$TERMINFO_SRC\" = \"xno\"; then\n\tMAKE_DATABASE=\"#\"\nelse\n\tMAKE_DATABASE=\"$MAKE_TERMINFO\"\nfi\nAC_SUBST(MAKE_DATABASE)\n\ndnl Override the package used for exported symbols\nif test -n \"$PACKAGE\"\nthen\n\tPACKAGE=\"${PACKAGE}${DFT_ARG_SUFFIX}\"\n\texport PACKAGE\n\techo \"package: $PACKAGE\"\nfi\n\nUNALTERED_SYMS=\ncf_filter_syms=no\n\nif test -n \"$RESULTING_SYMS\"\nthen\n\tcf_filter_syms=$cf_dft_filter_syms\n\tCF_VERBOSE(will map symbols to ABI=$cf_cv_abi_version)\nfi\n\nif test \"x$WILDCARD_SYMS\" = xno\nthen\n\tcf_filter_syms=yes\nfi\n\ntest \"x$cf_with_trace\" = xyes && NCURSES_INLINE=\n\nUNALTERED_SYMS=`echo \"$RESULTING_SYMS\" | sed -e 's/\\\\$/\\\\\\\\$/g'`\nif test $cf_filter_syms = yes\nthen\n\tRESULTING_SYMS=resulting.map\nfi\nAC_SUBST(UNALTERED_SYMS)\n\nif test \"x$cross_compiling\" = xyes ; then\n\tADAGEN_LDFLAGS='$(CROSS_LDFLAGS)'\n\tCHECK_BUILD=\"#\"\nelse\n\tADAGEN_LDFLAGS='$(NATIVE_LDFLAGS)'\n\tCHECK_BUILD=\nfi\nAC_SUBST(ADAGEN_LDFLAGS)\nAC_SUBST(CHECK_BUILD)\nAC_SUBST(PRIVATE_LIBS)\n\n# This is used for the *-config script and *.pc data files.\nCF_LD_SEARCHPATH\n\nAC_DEFINE(HAVE_CURSES_DATA_BOOLNAMES,1,[definition needed for in-tree build of tack])\n\nAC_OUTPUT( \\\n\tinclude/MKterm.h.awk \\\n\tinclude/curses.head:include/curses.h.in \\\n\tinclude/ncurses_dll.h \\\n\tinclude/termcap.h \\\n\tinclude/unctrl.h \\\n\t$SUB_MAKEFILES \\\n\tMakefile,[\nif test \"x$cf_with_tests\" != xno ; then\n\tCF_PRG_RULES([$srcdir/test/mk-test.awk INSTALL=no ECHO_LINK=\"$ECHO_LD\"], test)\nfi\nCF_LIB_RULES($SRC_SUBDIRS)\n\nif test \"x$cf_with_ada\" = \"xyes\" && test \"x$cf_cv_prog_gnat_correct\" = \"xyes\"; then\nif test -z \"$USE_OLD_MAKERULES\" ; then\n\t$AWK -f $srcdir/Ada95/mk-1st.awk <$srcdir/Ada95/src/modules >>Ada95/src/Makefile\nfi\nfi\n],[\n### Special initialization commands, used to pass information from the\n### configuration-run into config.status\n\nAWK=\"$AWK\"\nALTERNATE_SYMS=\"$ALTERNATE_SYMS\"\nDFT_ARG_SUFFIX=\"$DFT_ARG_SUFFIX\"\nDFT_LWR_MODEL=\"$DFT_LWR_MODEL\"\nECHO_LD=\"$ECHO_LD\"\nEXTRA_SUFFIX=\"$EXTRA_SUFFIX\"\nLDCONFIG=\"$LDCONFIG\"\nLIBTOOL_VERSION=\"$LIBTOOL_VERSION\"\nLIB_NAME=\"$LIB_NAME\"\nLIB_PREFIX=\"$LIB_PREFIX\"\nLIB_SUBSETS=\"$LIB_SUBSETS\"\nLIB_SUFFIX=\"$LIB_SUFFIX\"\nLIB_TRACING=\"$LIB_TRACING\"\nLN_S=\"$LN_S\"\nMAKE_TERMINFO=\"$MAKE_TERMINFO\"\nNCURSES_MAJOR=\"$NCURSES_MAJOR\"\nNCURSES_MINOR=\"$NCURSES_MINOR\"\nNCURSES_OSPEED=\"$NCURSES_OSPEED\"\nNCURSES_PATCH=\"$NCURSES_PATCH\"\nSRC_SUBDIRS=\"$SRC_SUBDIRS\"\nTERMINFO=\"$TERMINFO\"\nTICS_ARG_SUFFIX=\"$TICS_ARG_SUFFIX\"\nTICS_LIB_SUFFIX=\"$TICS_LIB_SUFFIX\"\nTICS_NAME=\"$TICS_NAME\"\nTICS_SUFFIX=\"$TICS_SUFFIX\"\nTIC_PATH=\"$TIC_PATH\"\nTINFO_ARG_SUFFIX=\"$TINFO_ARG_SUFFIX\"\nTINFO_LIB_SUFFIX=\"$TINFO_LIB_SUFFIX\"\nTINFO_NAME=\"$TINFO_NAME\"\nTINFO_SUFFIX=\"$TINFO_SUFFIX\"\nUNALTERED_SYMS=\"$UNALTERED_SYMS\"\nUSE_ARG_SUFFIX=\"$USE_ARG_SUFFIX\"\nUSE_CFG_SUFFIX=\"$USE_CFG_SUFFIX\"\nUSE_LIB_SUFFIX=\"$USE_LIB_SUFFIX\"\nUSE_OLD_MAKERULES=\"$USE_OLD_MAKERULES\"\nWILDCARD_SYMS=\"$WILDCARD_SYMS\"\nWITH_CURSES_H=\"$with_curses_h\"\nWITH_ECHO=\"${enable_echo:=yes}\"\nWITH_OVERWRITE=\"$with_overwrite\"\ncf_LIST_MODELS=\"$cf_list_models\"\ncf_cv_abi_version=\"$cf_cv_abi_version\"\ncf_cv_do_relink=\"$cf_cv_do_relink\"\ncf_cv_do_reranlib=\"$cf_cv_do_reranlib\"\ncf_cv_do_symlinks=\"$cf_cv_do_symlinks\"\ncf_cv_enable_lp64=\"$cf_cv_enable_lp64\"\ncf_cv_enable_opaque=\"$cf_cv_enable_opaque\"\ncf_cv_prog_CC_c_o=$cf_cv_prog_CC_c_o\ncf_cv_prog_CXX_c_o=$cf_cv_prog_CXX_c_o\ncf_cv_prog_gnat_correct=$cf_cv_prog_gnat_correct\ncf_cv_rel_version=\"$cf_cv_rel_version\"\ncf_cv_rm_so_locs=\"$cf_cv_rm_so_locs\"\ncf_cv_shared_soname='$cf_cv_shared_soname'\ncf_cv_shlib_version=\"$cf_cv_shlib_version\"\ncf_cv_shlib_version_infix=\"$cf_cv_shlib_version_infix\"\ncf_cv_system_name=\"$cf_cv_system_name\"\ncf_cv_term_driver=\"$with_term_driver\"\ncf_with_ada=\"$cf_with_ada\"\ncf_with_cxx_binding=\"$cf_with_cxx_binding\"\ncf_with_db_install=\"$cf_with_db_install\"\ncf_with_manpages=\"$cf_with_manpages\"\ncf_with_tests=\"$cf_with_tests\"\nhost=\"$host\"\ntarget=\"$target\"\nwith_shared_cxx=\"$with_shared_cxx\"\n\n],cat)dnl\n${MAKE:-make} preinstall\n",
        "/tmp/vanessa/spack-stage/spack-stage-ncurses-6.2-v3z5jtv4ztmho7onysxesbp2wqrrbn5x/spack-src/aclocal.m4": "dnl***************************************************************************\ndnl Copyright 2018-2019,2020 Thomas E. Dickey                                *\ndnl Copyright 1998-2017,2018 Free Software Foundation, Inc.                  *\ndnl                                                                          *\ndnl Permission is hereby granted, free of charge, to any person obtaining a  *\ndnl copy of this software and associated documentation files (the            *\ndnl \"Software\"), to deal in the Software without restriction, including      *\ndnl without limitation the rights to use, copy, modify, merge, publish,      *\ndnl distribute, distribute with modifications, sublicense, and/or sell       *\ndnl copies of the Software, and to permit persons to whom the Software is    *\ndnl furnished to do so, subject to the following conditions:                 *\ndnl                                                                          *\ndnl The above copyright notice and this permission notice shall be included  *\ndnl in all copies or substantial portions of the Software.                   *\ndnl                                                                          *\ndnl THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *\ndnl OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *\ndnl MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *\ndnl IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *\ndnl DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *\ndnl OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *\ndnl THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *\ndnl                                                                          *\ndnl Except as contained in this notice, the name(s) of the above copyright   *\ndnl holders shall not be used in advertising or otherwise to promote the     *\ndnl sale, use or other dealings in this Software without prior written       *\ndnl authorization.                                                           *\ndnl***************************************************************************\ndnl\ndnl Author: Thomas E. Dickey 1995-on\ndnl\ndnl $Id: aclocal.m4,v 1.896 2020/02/08 21:01:07 tom Exp $\ndnl Macros used in NCURSES auto-configuration script.\ndnl\ndnl These macros are maintained separately from NCURSES.  The copyright on\ndnl this file applies to the aggregation of macros and does not affect use of\ndnl these macros in other applications.\ndnl\ndnl See these pages for additional information:\ndnl\t\thttps://invisible-island.net/autoconf/\ndnl\t\thttps://invisible-island.net/autoconf/my-autoconf.html\ndnl\ndnl ---------------------------------------------------------------------------\ndnl ---------------------------------------------------------------------------\ndnl AM_LANGINFO_CODESET version: 4 updated: 2015/04/18 08:56:57\ndnl -------------------\ndnl Inserted as requested by gettext 0.10.40\ndnl File from /usr/share/aclocal\ndnl codeset.m4\ndnl ====================\ndnl serial AM1\ndnl\ndnl From Bruno Haible.\nAC_DEFUN([AM_LANGINFO_CODESET],\n[\nAC_CACHE_CHECK([for nl_langinfo and CODESET], am_cv_langinfo_codeset,\n\t[AC_TRY_LINK([#include <langinfo.h>],\n\t[char* cs = nl_langinfo(CODESET);],\n\tam_cv_langinfo_codeset=yes,\n\tam_cv_langinfo_codeset=no)\n\t])\n\tif test $am_cv_langinfo_codeset = yes; then\n\t\tAC_DEFINE(HAVE_LANGINFO_CODESET, 1,\n\t\t[Define if you have <langinfo.h> and nl_langinfo(CODESET).])\n\tfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ABI_DEFAULTS version: 2 updated: 2015/06/06 13:49:58\ndnl ---------------\ndnl Provide configure-script defaults for different ncurses ABIs.\nAC_DEFUN([CF_ABI_DEFAULTS],[\nAC_REQUIRE([CF_NCURSES_WITH_ABI_VERSION])\ncase x$cf_cv_abi_version in\n(x[[6789]])\n\tcf_dft_ext_colors=yes\n\tcf_dft_ext_const=yes\n\tcf_dft_ext_mouse=yes\n\tcf_dft_ext_putwin=yes\n\tcf_dft_ext_spfuncs=yes\n\tcf_dft_filter_syms=yes\n\tcf_dft_chtype=uint32_t\n\tcf_dft_mmask_t=uint32_t\n\tcf_dft_interop=yes\n\tcf_dft_tparm_arg=intptr_t\n\tcf_dft_with_lp64=yes\n\t;;\n(*)\n\tcf_dft_ext_colors=no\n\tcf_dft_ext_const=no\n\tcf_dft_ext_mouse=no\n\tcf_dft_ext_putwin=no\n\tcf_dft_ext_spfuncs=no\n\tcf_dft_filter_syms=no\n\tcf_dft_chtype=auto\n\tcf_dft_mmask_t=auto\n\tcf_dft_interop=no\n\tcf_dft_tparm_arg=long\n\tcf_dft_with_lp64=no\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ACVERSION_CHECK version: 5 updated: 2014/06/04 19:11:49\ndnl ------------------\ndnl Conditionally generate script according to whether we're using a given autoconf.\ndnl\ndnl $1 = version to compare against\ndnl $2 = code to use if AC_ACVERSION is at least as high as $1.\ndnl $3 = code to use if AC_ACVERSION is older than $1.\ndefine([CF_ACVERSION_CHECK],\n[\nifdef([AC_ACVERSION], ,[ifdef([AC_AUTOCONF_VERSION],[m4_copy([AC_AUTOCONF_VERSION],[AC_ACVERSION])],[m4_copy([m4_PACKAGE_VERSION],[AC_ACVERSION])])])dnl\nifdef([m4_version_compare],\n[m4_if(m4_version_compare(m4_defn([AC_ACVERSION]), [$1]), -1, [$3], [$2])],\n[CF_ACVERSION_COMPARE(\nAC_PREREQ_CANON(AC_PREREQ_SPLIT([$1])),\nAC_PREREQ_CANON(AC_PREREQ_SPLIT(AC_ACVERSION)), AC_ACVERSION, [$2], [$3])])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ACVERSION_COMPARE version: 3 updated: 2012/10/03 18:39:53\ndnl --------------------\ndnl CF_ACVERSION_COMPARE(MAJOR1, MINOR1, TERNARY1,\ndnl                      MAJOR2, MINOR2, TERNARY2,\ndnl                      PRINTABLE2, not FOUND, FOUND)\ndefine([CF_ACVERSION_COMPARE],\n[ifelse(builtin([eval], [$2 < $5]), 1,\n[ifelse([$8], , ,[$8])],\n[ifelse([$9], , ,[$9])])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADA_INCLUDE_DIRS version: 8 updated: 2013/10/14 04:24:07\ndnl -------------------\ndnl Construct the list of include-options for the C programs in the Ada95\ndnl binding.\nAC_DEFUN([CF_ADA_INCLUDE_DIRS],\n[\nACPPFLAGS=\"-I. -I../include -I../../include $ACPPFLAGS\"\nif test \"$srcdir\" != \".\"; then\n\tACPPFLAGS=\"-I\\${srcdir}/../../include $ACPPFLAGS\"\nfi\nif test \"$GCC\" != yes; then\n\tACPPFLAGS=\"$ACPPFLAGS -I\\${includedir}\"\nelif test \"$includedir\" != \"/usr/include\"; then\n\tif test \"$includedir\" = '${prefix}/include' ; then\n\t\tif test x$prefix != x/usr ; then\n\t\t\tACPPFLAGS=\"$ACPPFLAGS -I\\${includedir}\"\n\t\tfi\n\telse\n\t\tACPPFLAGS=\"$ACPPFLAGS -I\\${includedir}\"\n\tfi\nfi\nAC_SUBST(ACPPFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_ADAFLAGS version: 1 updated: 2010/06/19 15:22:18\ndnl ---------------\ndnl Add to $ADAFLAGS, which is substituted into makefile and scripts.\nAC_DEFUN([CF_ADD_ADAFLAGS],[\n \tADAFLAGS=\"$ADAFLAGS $1\"\n\tAC_SUBST(ADAFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_CFLAGS version: 13 updated: 2017/02/25 18:57:40\ndnl -------------\ndnl Copy non-preprocessor flags to $CFLAGS, preprocessor flags to $CPPFLAGS\ndnl The second parameter if given makes this macro verbose.\ndnl\ndnl Put any preprocessor definitions that use quoted strings in $EXTRA_CPPFLAGS,\ndnl to simplify use of $CPPFLAGS in compiler checks, etc., that are easily\ndnl confused by the quotes (which require backslashes to keep them usable).\nAC_DEFUN([CF_ADD_CFLAGS],\n[\ncf_fix_cppflags=no\ncf_new_cflags=\ncf_new_cppflags=\ncf_new_extra_cppflags=\n\nfor cf_add_cflags in $1\ndo\ncase $cf_fix_cppflags in\n(no)\n\tcase $cf_add_cflags in\n\t(-undef|-nostdinc*|-I*|-D*|-U*|-E|-P|-C)\n\t\tcase $cf_add_cflags in\n\t\t(-D*)\n\t\t\tcf_tst_cflags=`echo ${cf_add_cflags} |sed -e 's/^-D[[^=]]*='\\''\\\"[[^\"]]*//'`\n\n\t\t\ttest \"x${cf_add_cflags}\" != \"x${cf_tst_cflags}\" \\\n\t\t\t\t&& test -z \"${cf_tst_cflags}\" \\\n\t\t\t\t&& cf_fix_cppflags=yes\n\n\t\t\tif test $cf_fix_cppflags = yes ; then\n\t\t\t\tCF_APPEND_TEXT(cf_new_extra_cppflags,$cf_add_cflags)\n\t\t\t\tcontinue\n\t\t\telif test \"${cf_tst_cflags}\" = \"\\\"'\" ; then\n\t\t\t\tCF_APPEND_TEXT(cf_new_extra_cppflags,$cf_add_cflags)\n\t\t\t\tcontinue\n\t\t\tfi\n\t\t\t;;\n\t\tesac\n\t\tcase \"$CPPFLAGS\" in\n\t\t(*$cf_add_cflags)\n\t\t\t;;\n\t\t(*)\n\t\t\tcase $cf_add_cflags in\n\t\t\t(-D*)\n\t\t\t\tcf_tst_cppflags=`echo \"x$cf_add_cflags\" | sed -e 's/^...//' -e 's/=.*//'`\n\t\t\t\tCF_REMOVE_DEFINE(CPPFLAGS,$CPPFLAGS,$cf_tst_cppflags)\n\t\t\t\t;;\n\t\t\tesac\n\t\t\tCF_APPEND_TEXT(cf_new_cppflags,$cf_add_cflags)\n\t\t\t;;\n\t\tesac\n\t\t;;\n\t(*)\n\t\tCF_APPEND_TEXT(cf_new_cflags,$cf_add_cflags)\n\t\t;;\n\tesac\n\t;;\n(yes)\n\tCF_APPEND_TEXT(cf_new_extra_cppflags,$cf_add_cflags)\n\n\tcf_tst_cflags=`echo ${cf_add_cflags} |sed -e 's/^[[^\"]]*\"'\\''//'`\n\n\ttest \"x${cf_add_cflags}\" != \"x${cf_tst_cflags}\" \\\n\t\t&& test -z \"${cf_tst_cflags}\" \\\n\t\t&& cf_fix_cppflags=no\n\t;;\nesac\ndone\n\nif test -n \"$cf_new_cflags\" ; then\n\tifelse([$2],,,[CF_VERBOSE(add to \\$CFLAGS $cf_new_cflags)])\n\tCF_APPEND_TEXT(CFLAGS,$cf_new_cflags)\nfi\n\nif test -n \"$cf_new_cppflags\" ; then\n\tifelse([$2],,,[CF_VERBOSE(add to \\$CPPFLAGS $cf_new_cppflags)])\n\tCF_APPEND_TEXT(CPPFLAGS,$cf_new_cppflags)\nfi\n\nif test -n \"$cf_new_extra_cppflags\" ; then\n\tifelse([$2],,,[CF_VERBOSE(add to \\$EXTRA_CPPFLAGS $cf_new_extra_cppflags)])\n\tCF_APPEND_TEXT(EXTRA_CPPFLAGS,$cf_new_extra_cppflags)\nfi\n\nAC_SUBST(EXTRA_CPPFLAGS)\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_INCDIR version: 15 updated: 2018/06/20 20:23:13\ndnl -------------\ndnl Add an include-directory to $CPPFLAGS.  Don't add /usr/include, since it's\ndnl redundant.  We don't normally need to add -I/usr/local/include for gcc,\ndnl but old versions (and some misinstalled ones) need that.  To make things\ndnl worse, gcc 3.x may give error messages if -I/usr/local/include is added to\ndnl the include-path).\nAC_DEFUN([CF_ADD_INCDIR],\n[\nif test -n \"$1\" ; then\n  for cf_add_incdir in $1\n  do\n\twhile test $cf_add_incdir != /usr/include\n\tdo\n\t  if test -d $cf_add_incdir\n\t  then\n\t\tcf_have_incdir=no\n\t\tif test -n \"$CFLAGS$CPPFLAGS\" ; then\n\t\t  # a loop is needed to ensure we can add subdirs of existing dirs\n\t\t  for cf_test_incdir in $CFLAGS $CPPFLAGS ; do\n\t\t\tif test \".$cf_test_incdir\" = \".-I$cf_add_incdir\" ; then\n\t\t\t  cf_have_incdir=yes; break\n\t\t\tfi\n\t\t  done\n\t\tfi\n\n\t\tif test \"$cf_have_incdir\" = no ; then\n\t\t  if test \"$cf_add_incdir\" = /usr/local/include ; then\n\t\t\tif test \"$GCC\" = yes\n\t\t\tthen\n\t\t\t  cf_save_CPPFLAGS=$CPPFLAGS\n\t\t\t  CF_APPEND_TEXT(CPPFLAGS,-I$cf_add_incdir)\n\t\t\t  AC_TRY_COMPILE([#include <stdio.h>],\n\t\t\t\t  [printf(\"Hello\")],\n\t\t\t\t  [],\n\t\t\t\t  [cf_have_incdir=yes])\n\t\t\t  CPPFLAGS=$cf_save_CPPFLAGS\n\t\t\tfi\n\t\t  fi\n\t\tfi\n\n\t\tif test \"$cf_have_incdir\" = no ; then\n\t\t  CF_VERBOSE(adding $cf_add_incdir to include-path)\n\t\t  ifelse([$2],,CPPFLAGS,[$2])=\"$ifelse([$2],,CPPFLAGS,[$2]) -I$cf_add_incdir\"\n\n\t\t  cf_top_incdir=`echo $cf_add_incdir | sed -e 's%/include/.*$%/include%'`\n\t\t  test \"$cf_top_incdir\" = \"$cf_add_incdir\" && break\n\t\t  cf_add_incdir=\"$cf_top_incdir\"\n\t\telse\n\t\t  break\n\t\tfi\n\t  else\n\t\tbreak\n\t  fi\n\tdone\n  done\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_LIB version: 2 updated: 2010/06/02 05:03:05\ndnl ----------\ndnl Add a library, used to enforce consistency.\ndnl\ndnl $1 = library to add, without the \"-l\"\ndnl $2 = variable to update (default $LIBS)\nAC_DEFUN([CF_ADD_LIB],[CF_ADD_LIBS(-l$1,ifelse($2,,LIBS,[$2]))])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_LIBDIR version: 10 updated: 2015/04/18 08:56:57\ndnl -------------\ndnl\tAdds to the library-path\ndnl\ndnl\tSome machines have trouble with multiple -L options.\ndnl\ndnl $1 is the (list of) directory(s) to add\ndnl $2 is the optional name of the variable to update (default LDFLAGS)\ndnl\nAC_DEFUN([CF_ADD_LIBDIR],\n[\nif test -n \"$1\" ; then\n\tfor cf_add_libdir in $1\n\tdo\n\t\tif test $cf_add_libdir = /usr/lib ; then\n\t\t\t:\n\t\telif test -d $cf_add_libdir\n\t\tthen\n\t\t\tcf_have_libdir=no\n\t\t\tif test -n \"$LDFLAGS$LIBS\" ; then\n\t\t\t\t# a loop is needed to ensure we can add subdirs of existing dirs\n\t\t\t\tfor cf_test_libdir in $LDFLAGS $LIBS ; do\n\t\t\t\t\tif test \".$cf_test_libdir\" = \".-L$cf_add_libdir\" ; then\n\t\t\t\t\t\tcf_have_libdir=yes; break\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\tfi\n\t\t\tif test \"$cf_have_libdir\" = no ; then\n\t\t\t\tCF_VERBOSE(adding $cf_add_libdir to library-path)\n\t\t\t\tifelse([$2],,LDFLAGS,[$2])=\"-L$cf_add_libdir $ifelse([$2],,LDFLAGS,[$2])\"\n\t\t\tfi\n\t\tfi\n\tdone\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_LIBS version: 3 updated: 2019/11/02 16:47:33\ndnl -----------\ndnl Add one or more libraries, used to enforce consistency.  Libraries are\ndnl prepended to an existing list, since their dependencies are assumed to\ndnl already exist in the list.\ndnl\ndnl $1 = libraries to add, with the \"-l\", etc.\ndnl $2 = variable to update (default $LIBS)\nAC_DEFUN([CF_ADD_LIBS],[\ncf_add_libs=\"[$]ifelse($2,,LIBS,[$2])\"\n# reverse order\ncf_add_0lib=\nfor cf_add_1lib in $1; do cf_add_0lib=\"$cf_add_1lib $cf_add_0lib\"; done\n# filter duplicates\nfor cf_add_1lib in $cf_add_0lib; do\n\tfor cf_add_2lib in $cf_add_libs; do\n\t\tif test \"x$cf_add_1lib\" = \"x$cf_add_2lib\"; then\n\t\t\tcf_add_1lib=\n\t\t\tbreak\n\t\tfi\n\tdone\n\ttest -n \"$cf_add_1lib\" && cf_add_libs=\"$cf_add_1lib $cf_add_libs\"\ndone\nifelse($2,,LIBS,[$2])=\"$cf_add_libs\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_SUBDIR_PATH version: 4 updated: 2013/10/08 17:47:05\ndnl ------------------\ndnl Append to a search-list for a nonstandard header/lib-file\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\ndnl\t$3 = the subdirectory, e.g., bin, include or lib\ndnl $4 = the directory under which we will test for subdirectories\ndnl $5 = a directory that we do not want $4 to match\nAC_DEFUN([CF_ADD_SUBDIR_PATH],\n[\ntest \"x$4\" != \"x$5\" && \\\ntest -d \"$4\" && \\\nifelse([$5],NONE,,[(test -z \"$5\" || test x$5 = xNONE || test \"x$4\" != \"x$5\") &&]) {\n\ttest -n \"$verbose\" && echo \"\t... testing for $3-directories under $4\"\n\ttest -d $4/$3 &&          $1=\"[$]$1 $4/$3\"\n\ttest -d $4/$3/$2 &&       $1=\"[$]$1 $4/$3/$2\"\n\ttest -d $4/$3/$2/$3 &&    $1=\"[$]$1 $4/$3/$2/$3\"\n\ttest -d $4/$2/$3 &&       $1=\"[$]$1 $4/$2/$3\"\n\ttest -d $4/$2/$3/$2 &&    $1=\"[$]$1 $4/$2/$3/$2\"\n}\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_APPEND_TEXT version: 1 updated: 2017/02/25 18:58:55\ndnl --------------\ndnl use this macro for appending text without introducing an extra blank at\ndnl the beginning\ndefine([CF_APPEND_TEXT],\n[\n\ttest -n \"[$]$1\" && $1=\"[$]$1 \"\n\t$1=\"[$]{$1}$2\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ARG_DISABLE version: 3 updated: 1999/03/30 17:24:31\ndnl --------------\ndnl Allow user to disable a normally-on option.\nAC_DEFUN([CF_ARG_DISABLE],\n[CF_ARG_OPTION($1,[$2],[$3],[$4],yes)])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ARG_ENABLE version: 3 updated: 1999/03/30 17:24:31\ndnl -------------\ndnl Allow user to enable a normally-off option.\nAC_DEFUN([CF_ARG_ENABLE],\n[CF_ARG_OPTION($1,[$2],[$3],[$4],no)])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ARG_OPTION version: 5 updated: 2015/05/10 19:52:14\ndnl -------------\ndnl Restricted form of AC_ARG_ENABLE that ensures user doesn't give bogus\ndnl values.\ndnl\ndnl Parameters:\ndnl $1 = option name\ndnl $2 = help-string\ndnl $3 = action to perform if option is not default\ndnl $4 = action if perform if option is default\ndnl $5 = default option value (either 'yes' or 'no')\nAC_DEFUN([CF_ARG_OPTION],\n[AC_ARG_ENABLE([$1],[$2],[test \"$enableval\" != ifelse([$5],no,yes,no) && enableval=ifelse([$5],no,no,yes)\n\tif test \"$enableval\" != \"$5\" ; then\nifelse([$3],,[    :]dnl\n,[    $3]) ifelse([$4],,,[\n\telse\n\t\t$4])\n\tfi],[enableval=$5 ifelse([$4],,,[\n\t$4\n])dnl\n])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_AR_FLAGS version: 6 updated: 2015/10/10 15:25:05\ndnl -----------\ndnl Check for suitable \"ar\" (archiver) options for updating an archive.\ndnl\ndnl In particular, handle some obsolete cases where the \"-\" might be omitted,\ndnl as well as a workaround for breakage of make's archive rules by the GNU\ndnl binutils \"ar\" program.\nAC_DEFUN([CF_AR_FLAGS],[\nAC_REQUIRE([CF_PROG_AR])\n\nAC_CACHE_CHECK(for options to update archives, cf_cv_ar_flags,[\n\tcf_cv_ar_flags=unknown\n\tfor cf_ar_flags in -curvU -curv curv -crv crv -cqv cqv -rv rv\n\tdo\n\n\t\t# check if $ARFLAGS already contains this choice\n\t\tif test \"x$ARFLAGS\" != \"x\" ; then\n\t\t\tcf_check_ar_flags=`echo \"x$ARFLAGS\" | sed -e \"s/$cf_ar_flags\\$//\" -e \"s/$cf_ar_flags / /\"`\n\t\t\tif test \"x$ARFLAGS\" != \"$cf_check_ar_flags\" ; then\n\t\t\t\tcf_cv_ar_flags=\n\t\t\t\tbreak\n\t\t\tfi\n\t\tfi\n\n\t\trm -f conftest.$ac_cv_objext\n\t\trm -f conftest.a\n\n\t\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint\ttestdata[[3]] = { 123, 456, 789 };\nEOF\n\t\tif AC_TRY_EVAL(ac_compile) ; then\n\t\t\techo \"$AR $ARFLAGS $cf_ar_flags conftest.a conftest.$ac_cv_objext\" >&AC_FD_CC\n\t\t\t$AR $ARFLAGS $cf_ar_flags conftest.a conftest.$ac_cv_objext 2>&AC_FD_CC 1>/dev/null\n\t\t\tif test -f conftest.a ; then\n\t\t\t\tcf_cv_ar_flags=$cf_ar_flags\n\t\t\t\tbreak\n\t\t\tfi\n\t\telse\n\t\t\tCF_VERBOSE(cannot compile test-program)\n\t\t\tbreak\n\t\tfi\n\tdone\n\trm -f conftest.a conftest.$ac_ext conftest.$ac_cv_objext\n])\n\nif test -n \"$ARFLAGS\" ; then\n\tif test -n \"$cf_cv_ar_flags\" ; then\n\t\tARFLAGS=\"$ARFLAGS $cf_cv_ar_flags\"\n\tfi\nelse\n\tARFLAGS=$cf_cv_ar_flags\nfi\n\nAC_SUBST(ARFLAGS)\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_AWK_BIG_PRINTF version: 5 updated: 2015/04/17 21:13:04\ndnl -----------------\ndnl Check if awk can handle big strings using printf.  Some older versions of\ndnl awk choke on large strings passed via \"%s\".\ndnl\ndnl $1 = desired string size\ndnl $2 = variable to set with result\nAC_DEFUN([CF_AWK_BIG_PRINTF],\n[\n\tcase x$AWK in\n\t(x)\n\t\teval $2=no\n\t\t;;\n\t(*)\n\t\tif ( ${AWK} 'BEGIN { xx = \"x\"; while (length(xx) < $1) { xx = xx \"x\"; }; printf(\"%s\\n\", xx); }' 2>/dev/null \\\n\t\t\t| $AWK '{ printf \"%d\\n\", length([$]0); }' 2>/dev/null | $AWK 'BEGIN { eqls=0; recs=0; } { recs++; if ([$]0 == 12000) eqls++; } END { if (recs != 1 || eqls != 1) exit 1; }' 2>/dev/null >/dev/null ) ; then\n\t\t\teval $2=yes\n\t\telse\n\t\t\teval $2=no\n\t\tfi\n\t\t;;\n\tesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_BOOL_DECL version: 8 updated: 2004/01/30 15:51:18\ndnl ------------\ndnl Test if 'bool' is a builtin type in the configured C++ compiler.  Some\ndnl older compilers (e.g., gcc 2.5.8) don't support 'bool' directly; gcc\ndnl 2.6.3 does, in anticipation of the ANSI C++ standard.\ndnl\ndnl Treat the configuration-variable specially here, since we're directly\ndnl substituting its value (i.e., 1/0).\ndnl\ndnl $1 is the shell variable to store the result in, if not $cv_cv_builtin_bool\nAC_DEFUN([CF_BOOL_DECL],\n[\nAC_MSG_CHECKING(if we should include stdbool.h)\n\nAC_CACHE_VAL(cf_cv_header_stdbool_h,[\n\tAC_TRY_COMPILE([],[bool foo = false],\n\t\t[cf_cv_header_stdbool_h=0],\n\t\t[AC_TRY_COMPILE([\n#ifndef __BEOS__\n#include <stdbool.h>\n#endif\n],[bool foo = false],\n\t\t\t[cf_cv_header_stdbool_h=1],\n\t\t\t[cf_cv_header_stdbool_h=0])])])\n\nif test \"$cf_cv_header_stdbool_h\" = 1\nthen\tAC_MSG_RESULT(yes)\nelse\tAC_MSG_RESULT(no)\nfi\n\nAC_MSG_CHECKING([for builtin bool type])\n\nAC_CACHE_VAL(ifelse($1,,cf_cv_builtin_bool,[$1]),[\n\tAC_TRY_COMPILE([\n#include <stdio.h>\n#include <sys/types.h>\n],[bool x = false],\n\t\t[ifelse($1,,cf_cv_builtin_bool,[$1])=1],\n\t\t[ifelse($1,,cf_cv_builtin_bool,[$1])=0])\n\t])\n\nif test \"$ifelse($1,,cf_cv_builtin_bool,[$1])\" = 1\nthen\tAC_MSG_RESULT(yes)\nelse\tAC_MSG_RESULT(no)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_BOOL_SIZE version: 15 updated: 2017/01/21 11:06:25\ndnl ------------\ndnl Test for the size of 'bool' in the configured C++ compiler (e.g., a type).\ndnl Don't bother looking for bool.h, since it's been deprecated.\ndnl\ndnl If the current compiler is C rather than C++, we get the bool definition\ndnl from <stdbool.h>.\nAC_DEFUN([CF_BOOL_SIZE],\n[\nAC_MSG_CHECKING([for size of bool])\nAC_CACHE_VAL(cf_cv_type_of_bool,[\n\trm -f cf_test.out\n\tAC_TRY_RUN([\n#include <stdlib.h>\n#include <stdio.h>\n\n#if defined(__cplusplus)\n\n#ifdef HAVE_GXX_BUILTIN_H\n#include <g++/builtin.h>\n#elif HAVE_GPP_BUILTIN_H\n#include <gpp/builtin.h>\n#elif HAVE_BUILTIN_H\n#include <builtin.h>\n#endif\n\n#else\n\n#if $cf_cv_header_stdbool_h\n#include <stdbool.h>\n#endif\n\n#endif\n\nint main(void)\n{\n\tFILE *fp = fopen(\"cf_test.out\", \"w\");\n\tif (fp != 0) {\n\t\tbool x = true;\n\t\tif ((bool)(-x) >= 0)\n\t\t\tfputs(\"unsigned \", fp);\n\t\tif (sizeof(x) == sizeof(int))       fputs(\"int\",  fp);\n\t\telse if (sizeof(x) == sizeof(char)) fputs(\"char\", fp);\n\t\telse if (sizeof(x) == sizeof(short))fputs(\"short\",fp);\n\t\telse if (sizeof(x) == sizeof(long)) fputs(\"long\", fp);\n\t\tfclose(fp);\n\t}\n\t${cf_cv_main_return:-return}(0);\n}\n\t\t],\n\t\t[cf_cv_type_of_bool=`cat cf_test.out`\n\t\t if test -z \"$cf_cv_type_of_bool\"; then\n\t\t   cf_cv_type_of_bool=unknown\n\t\t fi],\n\t\t[cf_cv_type_of_bool=unknown],\n\t\t[cf_cv_type_of_bool=unknown])\n\t])\n\trm -f cf_test.out\nAC_MSG_RESULT($cf_cv_type_of_bool)\nif test \"$cf_cv_type_of_bool\" = unknown ; then\n\tcase .$NCURSES_BOOL in\n\t(.auto|.) NCURSES_BOOL=unsigned;;\n\tesac\n\tAC_MSG_WARN(Assuming $NCURSES_BOOL for type of bool)\n\tcf_cv_type_of_bool=$NCURSES_BOOL\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_BUILD_CC version: 8 updated: 2018/01/04 20:31:04\ndnl -----------\ndnl If we're cross-compiling, allow the user to override the tools and their\ndnl options.  The configure script is oriented toward identifying the host\ndnl compiler, etc., but we need a build compiler to generate parts of the\ndnl source.\ndnl\ndnl $1 = default for $CPPFLAGS\ndnl $2 = default for $LIBS\nAC_DEFUN([CF_BUILD_CC],[\nCF_ACVERSION_CHECK(2.52,,\n\t[AC_REQUIRE([CF_PROG_EXT])])\nif test \"$cross_compiling\" = yes ; then\n\n\t# defaults that we might want to override\n\t: ${BUILD_CFLAGS:=''}\n\t: ${BUILD_CPPFLAGS:='ifelse([$1],,,[$1])'}\n\t: ${BUILD_LDFLAGS:=''}\n\t: ${BUILD_LIBS:='ifelse([$2],,,[$2])'}\n\t: ${BUILD_EXEEXT:='$x'}\n\t: ${BUILD_OBJEXT:='o'}\n\n\tAC_ARG_WITH(build-cc,\n\t\t[  --with-build-cc=XXX     the build C compiler ($BUILD_CC)],\n\t\t[BUILD_CC=\"$withval\"],\n\t\t[AC_CHECK_PROGS(BUILD_CC, [gcc clang c99 c89 cc cl],none)])\n\tAC_MSG_CHECKING(for native build C compiler)\n\tAC_MSG_RESULT($BUILD_CC)\n\n\tAC_MSG_CHECKING(for native build C preprocessor)\n\tAC_ARG_WITH(build-cpp,\n\t\t[  --with-build-cpp=XXX    the build C preprocessor ($BUILD_CPP)],\n\t\t[BUILD_CPP=\"$withval\"],\n\t\t[BUILD_CPP='${BUILD_CC} -E'])\n\tAC_MSG_RESULT($BUILD_CPP)\n\n\tAC_MSG_CHECKING(for native build C flags)\n\tAC_ARG_WITH(build-cflags,\n\t\t[  --with-build-cflags=XXX the build C compiler-flags ($BUILD_CFLAGS)],\n\t\t[BUILD_CFLAGS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_CFLAGS)\n\n\tAC_MSG_CHECKING(for native build C preprocessor-flags)\n\tAC_ARG_WITH(build-cppflags,\n\t\t[  --with-build-cppflags=XXX the build C preprocessor-flags ($BUILD_CPPFLAGS)],\n\t\t[BUILD_CPPFLAGS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_CPPFLAGS)\n\n\tAC_MSG_CHECKING(for native build linker-flags)\n\tAC_ARG_WITH(build-ldflags,\n\t\t[  --with-build-ldflags=XXX the build linker-flags ($BUILD_LDFLAGS)],\n\t\t[BUILD_LDFLAGS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_LDFLAGS)\n\n\tAC_MSG_CHECKING(for native build linker-libraries)\n\tAC_ARG_WITH(build-libs,\n\t\t[  --with-build-libs=XXX   the build libraries (${BUILD_LIBS})],\n\t\t[BUILD_LIBS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_LIBS)\n\n\t# this assumes we're on Unix.\n\tBUILD_EXEEXT=\n\tBUILD_OBJEXT=o\n\n\t: ${BUILD_CC:='${CC}'}\n\n\tif ( test \"$BUILD_CC\" = \"$CC\" || test \"$BUILD_CC\" = '${CC}' ) ; then\n\t\tAC_MSG_ERROR([Cross-build requires two compilers.\nUse --with-build-cc to specify the native compiler.])\n\tfi\n\nelse\n\t: ${BUILD_CC:='${CC}'}\n\t: ${BUILD_CPP:='${CPP}'}\n\t: ${BUILD_CFLAGS:='${CFLAGS}'}\n\t: ${BUILD_CPPFLAGS:='${CPPFLAGS}'}\n\t: ${BUILD_LDFLAGS:='${LDFLAGS}'}\n\t: ${BUILD_LIBS:='${LIBS}'}\n\t: ${BUILD_EXEEXT:='$x'}\n\t: ${BUILD_OBJEXT:='o'}\nfi\n\nAC_SUBST(BUILD_CC)\nAC_SUBST(BUILD_CPP)\nAC_SUBST(BUILD_CFLAGS)\nAC_SUBST(BUILD_CPPFLAGS)\nAC_SUBST(BUILD_LDFLAGS)\nAC_SUBST(BUILD_LIBS)\nAC_SUBST(BUILD_EXEEXT)\nAC_SUBST(BUILD_OBJEXT)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CC_ENV_FLAGS version: 9 updated: 2018/07/29 18:03:26\ndnl ---------------\ndnl Check for user's environment-breakage by stuffing CFLAGS/CPPFLAGS content\ndnl into CC.  This will not help with broken scripts that wrap the compiler\ndnl with options, but eliminates a more common category of user confusion.\ndnl\ndnl In particular, it addresses the problem of being able to run the C\ndnl preprocessor in a consistent manner.\ndnl\ndnl Caveat: this also disallows blanks in the pathname for the compiler, but\ndnl the nuisance of having inconsistent settings for compiler and preprocessor\ndnl outweighs that limitation.\nAC_DEFUN([CF_CC_ENV_FLAGS],\n[\n# This should have been defined by AC_PROG_CC\n: ${CC:=cc}\n\nAC_MSG_CHECKING(\\$CFLAGS variable)\ncase \"x$CFLAGS\" in\n(*-[[IUD]]*)\n\tAC_MSG_RESULT(broken)\n\tAC_MSG_WARN(your environment uses the CFLAGS variable to hold CPPFLAGS options)\n\tcf_flags=\"$CFLAGS\"\n\tCFLAGS=\n\tfor cf_arg in $cf_flags\n\tdo\n\t\tCF_ADD_CFLAGS($cf_arg)\n\tdone\n\t;;\n(*)\n\tAC_MSG_RESULT(ok)\n\t;;\nesac\n\nAC_MSG_CHECKING(\\$CC variable)\ncase \"$CC\" in\n(*[[\\ \\\t]]-*)\n\tAC_MSG_RESULT(broken)\n\tAC_MSG_WARN(your environment uses the CC variable to hold CFLAGS/CPPFLAGS options)\n\t# humor him...\n\tcf_prog=`echo \"$CC\" | sed -e 's/\t/ /g' -e 's/[[ ]]* / /g' -e 's/[[ ]]*[[ ]]-[[^ ]].*//'`\n\tcf_flags=`echo \"$CC\" | ${AWK:-awk} -v prog=\"$cf_prog\" '{ printf(\"%s\", [substr]([$]0,1+length(prog))); }'`\n\tCC=\"$cf_prog\"\n\tfor cf_arg in $cf_flags\n\tdo\n\t\tcase \"x$cf_arg\" in\n\t\t(x-[[IUDfgOW]]*)\n\t\t\tCF_ADD_CFLAGS($cf_arg)\n\t\t\t;;\n\t\t(*)\n\t\t\tCC=\"$CC $cf_arg\"\n\t\t\t;;\n\t\tesac\n\tdone\n\tCF_VERBOSE(resulting CC: '$CC')\n\tCF_VERBOSE(resulting CFLAGS: '$CFLAGS')\n\tCF_VERBOSE(resulting CPPFLAGS: '$CPPFLAGS')\n\t;;\n(*)\n\tAC_MSG_RESULT(ok)\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CFG_DEFAULTS version: 11 updated: 2015/04/17 21:13:04\ndnl ---------------\ndnl Determine the default configuration into which we'll install ncurses.  This\ndnl can be overridden by the user's command-line options.  There's two items to\ndnl look for:\ndnl\t1. the prefix (e.g., /usr)\ndnl\t2. the header files (e.g., /usr/include/ncurses)\ndnl We'll look for a previous installation of ncurses and use the same defaults.\ndnl\ndnl We don't use AC_PREFIX_DEFAULT, because it gets evaluated too soon, and\ndnl we don't use AC_PREFIX_PROGRAM, because we cannot distinguish ncurses's\ndnl programs from a vendor's.\nAC_DEFUN([CF_CFG_DEFAULTS],\n[\nAC_MSG_CHECKING(for prefix)\nif test \"x$prefix\" = \"xNONE\" ; then\n\tcase \"$cf_cv_system_name\" in\n\t\t# non-vendor systems don't have a conflict\n\t(openbsd*|freebsd*|mirbsd*|linux*|cygwin*|msys*|k*bsd*-gnu|mingw*)\n\t\tprefix=/usr\n\t\t;;\n\t(*)\tprefix=$ac_default_prefix\n\t\t;;\n\tesac\nfi\nAC_MSG_RESULT($prefix)\n\nif test \"x$prefix\" = \"xNONE\" ; then\nAC_MSG_CHECKING(for default include-directory)\ntest -n \"$verbose\" && echo 1>&AC_FD_MSG\nfor cf_symbol in \\\n\t$includedir \\\n\t$includedir/ncurses \\\n\t$prefix/include \\\n\t$prefix/include/ncurses \\\n\t/usr/local/include \\\n\t/usr/local/include/ncurses \\\n\t/usr/include \\\n\t/usr/include/ncurses\ndo\n\tcf_dir=`eval echo $cf_symbol`\n\tif test -f $cf_dir/curses.h ; then\n\tif ( fgrep NCURSES_VERSION $cf_dir/curses.h 2>&1 >/dev/null ) ; then\n\t\tincludedir=\"$cf_symbol\"\n\t\ttest -n \"$verbose\"  && echo $ac_n \"\tfound \" 1>&AC_FD_MSG\n\t\tbreak\n\tfi\n\tfi\n\ttest -n \"$verbose\"  && echo \"\ttested $cf_dir\" 1>&AC_FD_MSG\ndone\nAC_MSG_RESULT($includedir)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CGETENT version: 6 updated: 2017/01/21 11:06:25\ndnl ----------\ndnl Check if the terminal-capability database functions are available.  If not,\ndnl ncurses has a much-reduced version.\nAC_DEFUN([CF_CGETENT],[\nAC_CACHE_CHECK(for terminal-capability database functions,cf_cv_cgetent,[\nAC_TRY_LINK([\n#include <stdlib.h>],[\n\tchar temp[128];\n\tchar *buf = temp;\n\tchar *db_array = temp;\n\tcgetent(&buf, &db_array, \"vt100\");\n\tcgetcap(buf, \"tc\", '=');\n\tcgetmatch(buf, \"tc\");\n\t],\n\t[cf_cv_cgetent=yes],\n\t[cf_cv_cgetent=no])\n])\n\nif test \"$cf_cv_cgetent\" = yes\nthen\n\tAC_DEFINE(HAVE_BSD_CGETENT,1,[Define to 1 if we have BSD cgetent])\nAC_CACHE_CHECK(if cgetent uses const parameter,cf_cv_cgetent_const,[\nAC_TRY_LINK([\n#pragma GCC diagnostic error \"-Wincompatible-pointer-types-discards-qualifiers\"\n#include <stdlib.h>],[\n\tchar temp[128];\n\tchar *buf = temp;\n#ifndef _NETBSD_SOURCE\t\t\t/* given, since April 2004 in stdlib.h */\n\tconst char *db_array = temp;\n\tcgetent(&buf, &db_array, \"vt100\");\n#endif\n\tcgetcap(buf, \"tc\", '=');\n\tcgetmatch(buf, \"tc\");\n\t],\n\t[cf_cv_cgetent_const=yes],\n\t[cf_cv_cgetent_const=no])\n])\n\tif test \"$cf_cv_cgetent_const\" = yes\n\tthen\n\t\tAC_DEFINE_UNQUOTED(CGETENT_CONST,const,[Define to const if needed for some BSD cgetent variations])\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_CACHE version: 12 updated: 2012/10/02 20:55:03\ndnl --------------\ndnl Check if we're accidentally using a cache from a different machine.\ndnl Derive the system name, as a check for reusing the autoconf cache.\ndnl\ndnl If we've packaged config.guess and config.sub, run that (since it does a\ndnl better job than uname).  Normally we'll use AC_CANONICAL_HOST, but allow\ndnl an extra parameter that we may override, e.g., for AC_CANONICAL_SYSTEM\ndnl which is useful in cross-compiles.\ndnl\ndnl Note: we would use $ac_config_sub, but that is one of the places where\ndnl autoconf 2.5x broke compatibility with autoconf 2.13\nAC_DEFUN([CF_CHECK_CACHE],\n[\nif test -f $srcdir/config.guess || test -f $ac_aux_dir/config.guess ; then\n\tifelse([$1],,[AC_CANONICAL_HOST],[$1])\n\tsystem_name=\"$host_os\"\nelse\n\tsystem_name=\"`(uname -s -r) 2>/dev/null`\"\n\tif test -z \"$system_name\" ; then\n\t\tsystem_name=\"`(hostname) 2>/dev/null`\"\n\tfi\nfi\ntest -n \"$system_name\" && AC_DEFINE_UNQUOTED(SYSTEM_NAME,\"$system_name\",[Define to the system name.])\nAC_CACHE_VAL(cf_cv_system_name,[cf_cv_system_name=\"$system_name\"])\n\ntest -z \"$system_name\" && system_name=\"$cf_cv_system_name\"\ntest -n \"$cf_cv_system_name\" && AC_MSG_RESULT(Configuring for $cf_cv_system_name)\n\nif test \".$system_name\" != \".$cf_cv_system_name\" ; then\n\tAC_MSG_RESULT(Cached system name ($system_name) does not agree with actual ($cf_cv_system_name))\n\tAC_MSG_ERROR(\"Please remove config.cache and try again.\")\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_ENVIRON version: 3 updated: 2010/05/26 16:44:57\ndnl ----------------\ndnl Check for data that is usually declared in <unistd.h>, e.g., the 'environ'\ndnl variable.  Define a DECL_xxx symbol if we must declare it ourselves.\ndnl\ndnl $1 = the name to check\ndnl $2 = the assumed type\nAC_DEFUN([CF_CHECK_ENVIRON],\n[\nAC_CACHE_CHECK(if external $1 is declared, cf_cv_dcl_$1,[\n    AC_TRY_COMPILE([\n#ifdef HAVE_STDLIB_H\n#include <stdlib.h>\n#endif\n#include <unistd.h> ],\n    ifelse([$2],,int,[$2]) x = (ifelse([$2],,int,[$2])) $1,\n    [cf_cv_dcl_$1=yes],\n    [cf_cv_dcl_$1=no])\n])\n\nif test \"$cf_cv_dcl_$1\" = no ; then\n    CF_UPPER(cf_result,decl_$1)\n    AC_DEFINE_UNQUOTED($cf_result)\nfi\n\n# It's possible (for near-UNIX clones) that the data doesn't exist\nCF_CHECK_EXTERN_DATA($1,ifelse([$2],,int,[$2]))\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_ERRNO version: 12 updated: 2015/04/18 08:56:57\ndnl --------------\ndnl Check for data that is usually declared in <stdio.h> or <errno.h>, e.g.,\ndnl the 'errno' variable.  Define a DECL_xxx symbol if we must declare it\ndnl ourselves.\ndnl\ndnl $1 = the name to check\ndnl $2 = the assumed type\nAC_DEFUN([CF_CHECK_ERRNO],\n[\nAC_CACHE_CHECK(if external $1 is declared, cf_cv_dcl_$1,[\n\tAC_TRY_COMPILE([\n#ifdef HAVE_STDLIB_H\n#include <stdlib.h>\n#endif\n#include <stdio.h>\n#include <sys/types.h>\n#include <errno.h> ],\n\tifelse([$2],,int,[$2]) x = (ifelse([$2],,int,[$2])) $1,\n\t[cf_cv_dcl_$1=yes],\n\t[cf_cv_dcl_$1=no])\n])\n\nif test \"$cf_cv_dcl_$1\" = no ; then\n\tCF_UPPER(cf_result,decl_$1)\n\tAC_DEFINE_UNQUOTED($cf_result)\nfi\n\n# It's possible (for near-UNIX clones) that the data doesn't exist\nCF_CHECK_EXTERN_DATA($1,ifelse([$2],,int,[$2]))\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_EXTERN_DATA version: 4 updated: 2015/04/18 08:56:57\ndnl --------------------\ndnl Check for existence of external data in the current set of libraries.  If\ndnl we can modify it, it's real enough.\ndnl $1 = the name to check\ndnl $2 = its type\nAC_DEFUN([CF_CHECK_EXTERN_DATA],\n[\nAC_CACHE_CHECK(if external $1 exists, cf_cv_have_$1,[\n\tAC_TRY_LINK([\n#undef $1\nextern $2 $1;\n],\n\t[$1 = 2],\n\t[cf_cv_have_$1=yes],\n\t[cf_cv_have_$1=no])\n])\n\nif test \"$cf_cv_have_$1\" = yes ; then\n\tCF_UPPER(cf_result,have_$1)\n\tAC_DEFINE_UNQUOTED($cf_result)\nfi\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_GETENV version: 1 updated: 2019/06/23 15:28:15\ndnl ---------------\ndnl Check if repeated getenv calls return the same pointer, e.g., it does not\ndnl discard the previous pointer when returning a new one.\nAC_DEFUN([CF_CHECK_GETENV],\n[\nAC_REQUIRE([CF_CHECK_ENVIRON])\nAC_CHECK_FUNC( getenv, ,, AC_MSG_ERROR(getenv not found) )\nAC_CHECK_FUNCS( putenv setenv strdup )\nAC_CACHE_CHECK(if getenv returns consistent values,cf_cv_consistent_getenv,[\nAC_TRY_RUN([\n#include <stdlib.h>\n#include <unistd.h>\n#include <stdio.h>\n#include <string.h>\n#include <sys/types.h>\n\n#if defined(HAVE_ENVIRON) && defined(DECL_ENVIRON) && !defined(environ)\nextern char **environ;\t/* POSIX, but some systems are not... */\n#endif\n\n#if defined(HAVE_STRDUP)\n#define str_alloc(s) strdup(s)\n#else\n#define str_alloc(s) strcpy(malloc(strlen(s) + 1, s))\n#endif\n\nstatic void set_value(const char *name, const char *value)\n{\n#if defined(HAVE_SETENV)\n\tsetenv(name, value, 1);\n#elif defined(HAVE_PUTENV)\n\tchar buffer[1024];\n\tsprintf(buffer, \"%s=%s\", name, value);\n\tputenv(str_alloc(buffer));\n#else\n#error neither putenv/setenv found\n#endif\n}\nint main(void)\n{\n\tint pass;\n\tsize_t numenv, limit, j;\n\tchar **mynames;\n\tchar **myvalues;\n\tchar **mypointer;\n\tchar *equals;\n\tfor (numenv = 0; environ[numenv]; ++numenv) ;\n\tlimit = numenv + 10;\n\tmynames = (char **) calloc(limit + 1, sizeof(char *));\n\tmyvalues = (char **) calloc(limit + 1, sizeof(char *));\n\tmypointer = (char **) calloc(limit + 1, sizeof(char *));\n#if defined(HAVE_ENVIRON)\n\tfor (j = 0; environ[j]; ++j) {\n\t\tmynames[j] = str_alloc(environ[j]);\n\t\tequals = strchr(mynames[j], '=');\n\t\tif (equals != 0) {\n\t\t\t*equals++ = '\\0';\n\t\t\tmyvalues[j] = str_alloc(equals);\n\t\t} else {\n\t\t\tmyvalues[j] = str_alloc(\"\");\n\t\t}\n\t}\n#endif\n\tfor (j = numenv; j < limit; ++j) {\n\t\tchar name[80];\n\t\tchar value[80];\n\t\tsize_t found;\n\t\tsize_t k = 0;\n\t\tdo {\n\t\t\tsize_t jk;\n\t\t\tfound = 0;\n\t\t\tsprintf(name, \"TERM%lu\", (unsigned long) k);\n\t\t\tfor (jk = 0; jk < j; ++jk) {\n\t\t\t\tif (!strcmp(name, mynames[jk])) {\n\t\t\t\t\tfound = 1;\n\t\t\t\t\t++k;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while (found);\n\t\tsprintf(value, \"%lu:%p\", (unsigned long) k, &mynames[j]);\n\t\tset_value(name, value);\n\t\tmynames[j] = str_alloc(name);\n\t\tmyvalues[j] = str_alloc(value);\n\t}\n\tfor (pass = 0; pass < 3; ++pass) {\n\t\tfor (j = 0; j < limit; ++j) {\n\t\t\tchar *value = getenv(mynames[j]);\n\t\t\tif (pass) {\n\t\t\t\tif (value == 0) {\n\t\t\t\t\tfprintf(stderr, \"getenv returned null for %s\\n\", mynames[j]);\n\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t} else if (value != mypointer[j]) {\n\t\t\t\t\tfprintf(stderr, \"getenv returned different pointer for %s\\n\", mynames[j]);\n\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t} else if (strcmp(value, myvalues[j])) {\n\t\t\t\t\tfprintf(stderr, \"getenv returned different value for %s\\n\", mynames[j]);\n\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsize_t k;\n\t\t\t\tmypointer[j] = value;\n\t\t\t\tfor (k = 0; k < j; ++k) {\n\t\t\t\t\tif (mypointer[j] == mypointer[k]) {\n\t\t\t\t\t\tfprintf(stderr, \"getenv returned same pointer for %s and %s\\n\", mynames[j], mynames[k]);\n\t\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t${cf_cv_main_return:-return}(0);\n}\n],\n[cf_cv_consistent_getenv=yes],\n[cf_cv_consistent_getenv=no],\n[cf_cv_consistent_getenv=unknown])\n])\n\nif test \"x$cf_cv_consistent_getenv\" = xno\nthen\n\tAC_DEFINE(HAVE_CONSISTENT_GETENV,1,[Define to 1 if getenv repeatably returns the same value for a given name])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_GNAT_VERSION version: 2 updated: 2019/12/31 08:53:54\ndnl ---------------------\nAC_DEFUN([CF_CHECK_GNAT_VERSION],\n[\nAC_REQUIRE([CF_GNAT_VERSION])\ncase $cf_cv_gnat_version in\n(3.1[[1-9]]*|3.[[2-9]]*|[[4-9]].*|20[[0-9]][[0-9]])\n\tcf_cv_prog_gnat_correct=yes\n\t;;\n(*)\n\tAC_MSG_WARN(Unsupported GNAT version $cf_cv_gnat_version. We require 3.11 or better. Disabling Ada95 binding.)\n\tcf_cv_prog_gnat_correct=no\n\t;;\nesac\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_GPM_WGETCH version: 3 updated: 2017/01/21 11:06:25\ndnl -------------------\ndnl Check if GPM is already linked with curses.  If so - and if the linkage\ndnl is not \"weak\" - warn about this because it can create problems linking\ndnl applications with ncurses.\nAC_DEFUN([CF_CHECK_GPM_WGETCH],[\nAC_CHECK_LIB(gpm,Gpm_Wgetch,[\n\nAC_CACHE_CHECK(if GPM is weakly bound to curses library, cf_cv_check_gpm_wgetch,[\ncf_cv_check_gpm_wgetch=unknown\nif test \"$cross_compiling\" != yes ; then\n\ncat >conftest.$ac_ext <<CF_EOF\n#include <gpm.h>\nint main(void)\n{\n\tGpm_Wgetch();\n\t${cf_cv_main_return:-return}(0);\n}\nCF_EOF\n\n\tcf_save_LIBS=\"$LIBS\"\n\t# This only works if we can look at the symbol table.  If a shared\n\t# library is stripped for install, we cannot use that.  So we're forced\n\t# to rely on the static library, noting that some packagers may not\n\t# include it.\n\tLIBS=\"-static -lgpm -dynamic $LIBS\"\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\tif AC_TRY_EVAL(ac_link) ; then\n\t\t\tcf_cv_check_gpm_wgetch=`nm conftest$ac_exeext | egrep '\\<wgetch\\>' | egrep '\\<[[vVwW]]\\>'`\n\t\t\ttest -n \"$cf_cv_check_gpm_wgetch\" && cf_cv_check_gpm_wgetch=yes\n\t\t\ttest -z \"$cf_cv_check_gpm_wgetch\" && cf_cv_check_gpm_wgetch=no\n\t\tfi\n\tfi\n\trm -rf conftest*\n\tLIBS=\"$cf_save_LIBS\"\nfi\n])\n\nif test \"$cf_cv_check_gpm_wgetch\" != yes ; then\n\tAC_MSG_WARN(GPM library is already linked with curses - read the FAQ)\nfi\n])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_LIBTOOL_VERSION version: 1 updated: 2013/04/06 18:03:09\ndnl ------------------------\ndnl Show the version of libtool\ndnl\ndnl Save the version in a cache variable - this is not entirely a good thing,\ndnl but the version string from libtool is very ugly, and for bug reports it\ndnl might be useful to have the original string.\nAC_DEFUN([CF_CHECK_LIBTOOL_VERSION],[\nif test -n \"$LIBTOOL\" && test \"$LIBTOOL\" != none\nthen\n\tAC_MSG_CHECKING(version of $LIBTOOL)\n\tCF_LIBTOOL_VERSION\n\tAC_MSG_RESULT($cf_cv_libtool_version)\n\tif test -z \"$cf_cv_libtool_version\" ; then\n\t\tAC_MSG_ERROR(This is not GNU libtool)\n\tfi\nelse\n\tAC_MSG_ERROR(GNU libtool has not been found)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_WCHAR_H version: 2 updated: 2017/01/21 11:06:25\ndnl ----------------\ndnl Check if wchar.h can be used, i.e., without defining _XOPEN_SOURCE_EXTENDED\nAC_DEFUN([CF_CHECK_WCHAR_H],[\nAC_CHECK_HEADERS( \\\nwchar.h \\\nwctype.h \\\n)\nAC_CACHE_CHECK(if wchar.h can be used as is,cf_cv_wchar_h_okay,[\nAC_TRY_COMPILE(\n[\n#include <stdlib.h>\n#ifdef HAVE_WCHAR_H\n#include <wchar.h>\n#endif\n#ifdef HAVE_WCTYPE_H\n#include <wctype.h>\n#endif\n],[\n\twint_t foo = 0;\n\tint bar = iswpunct(foo)],\n\t[cf_cv_wchar_h_okay=yes],\n\t[cf_cv_wchar_h_okay=no])])\n\nif test $cf_cv_wchar_h_okay = no\nthen\n\tCF_PREDEFINE(_XOPEN_SOURCE_EXTENDED)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_WCWIDTH_GRAPHICS version: 1 updated: 2015/12/19 17:47:56\ndnl -------------------------\ndnl Most \"modern\" terminal emulators are based to some degree on VT100, and\ndnl should support line-drawing.  Even with Unicode.  There is a problem.\ndnl\ndnl While most of the VT100 graphics characters were incorporated into Unicode,\ndnl all of those were combined into a page of useful graphics characters.\ndnl\ndnl So far, so good.\ndnl\ndnl However, while they are useful, there are other considerations.  CJK\ndnl is (because of poor device resolution) often rendered as double-width\ndnl characters.  So... for these generally-useful characters, what should\ndnl be the width (to make them consistent with adjacent characters)?\ndnl\ndnl The obvious choice would have been to make this locale-dependent, and use\ndnl wcwidth() to tell applications what the actual width is.  That was too\ndnl obvious.  Instead, we have a slew of \"ambiguous-width\" characters.\ndnl See for example\ndnl\t\thttp://www.unicode.org/reports/tr11/tr11-29.html\ndnl\t\thttp://www.cl.cam.ac.uk/~mgk25/ucs/scw-proposal.html\ndnl\ndnl The EastAsianWidth-6.2.0.txt file from the Unicode organization lists\ndnl more than 22,000 characters, with 1281 of those as ambiguous-width.  For\ndnl instance, it lists half (44/96) of the Latin-1 characters as\ndnl ambiguous-width.  Also, all of the box-characters at 0x2500 are ambiguous.\ndnl\ndnl What this means for the implementor is that on some systems wcwidth() can\ndnl give bad advice.  On Solaris, some of the ambiguous widths are returned as\ndnl 1 (the Latin-1 characters), while others are returned as 2 (line-drawing\ndnl characters).  These do not necessarily match the behavior of the terminal\ndnl emulator.  xterm, for instance, does an optional startup check to find if\ndnl this problem (or similar) exists with the system's locale tables, rejecting\ndnl them if they are too unreliable.\nAC_DEFUN([CF_CHECK_WCWIDTH_GRAPHICS],[\nAC_CACHE_CHECK(if wcwidth agrees graphics are single-width, cf_cv_wcwidth_graphics,[\ncat >conftest.in <<CF_EOF\n-\tVT100 symbols\n0x250c\tupper left corner\n0x2514\tlower left corner\n0x2510\tupper right corner\n0x2518\tlower right corner\n0x251c\ttee pointing left\n0x2524\ttee pointing right\n0x2534\ttee pointing up\n0x252c\ttee pointing down\n0x2500\thorizontal line\n0x2502\tvertical line\n0x253c\tlarge plus or crossover\n0x23ba\tscan line 1\n0x23bd\tscan line 9\n0x25c6\tdiamond\n0x2592\tchecker board (stipple)\n0x00b0\tdegree symbol\n0x00b1\tplus/minus\n0x00b7\tbullet\n-\tTeletype 5410v1 symbols\n0x2190\tarrow pointing left\n0x2192\tarrow pointing right\n0x2193\tarrow pointing down\n0x2191\tarrow pointing up\n0x2592\tboard of squares\n0x2603\tlantern symbol\n0x25ae\tsolid square block\n-\tthese defaults were invented for ncurses\n0x23bb\tscan line 3\n0x23bc\tscan line 7\n0x2264\tless-than-or-equal-to\n0x2265\tgreater-than-or-equal-to\n0x03c0\tgreek pi\n0x2260\tnot-equal\n0x00a3\tpound-sterling symbol\n-\tthick-line-drawing\n0x250f\tupper left corner\n0x2517\tlower left corner\n0x2513\tupper right corner\n0x251b\tlower right corner\n0x2523\ttee pointing left\n0x252b\ttee pointing right\n0x253b\ttee pointing up\n0x2533\ttee pointing down\n0x2501\thorizontal line\n0x2503\tvertical line\n0x254b\tlarge plus or crossover\n-\tdouble-line-drawing\n0x2554\tupper left corner\n0x255a\tlower left corner\n0x2557\tupper right corner\n0x255d\tlower right corner\n0x2563\ttee pointing left\n0x2560\ttee pointing right\n0x2569\ttee pointing up\n0x2566\ttee pointing down\n0x2550\thorizontal line\n0x2551\tvertical line\n0x256c\tlarge plus or crossover\nCF_EOF\nAC_TRY_RUN([\n#include <locale.h>\n#include <stdio.h>\n#include <wchar.h>\n\n#define MY_LEN 80\n\nint\nmain(void)\n{\n\tFILE *fp;\n\tint value;\n\tchar buffer[MY_LEN + 1];\n\tchar notes[MY_LEN + 1];\n\tint totals = 0;\n\tint passed = 0;\n\n\tif (setlocale(LC_ALL, \"en_US.UTF8\") ||\n\t\tsetlocale(LC_ALL, \"en_US.UTF-8\") ||\n\t\tsetlocale(LC_ALL, \"en_US.utf8\") ||\n\t\tsetlocale(LC_ALL, \"en_US.utf-8\")) {\n\t\tif ((fp = fopen(\"conftest.in\", \"r\")) != 0) {\n\t\t\twhile (fgets(buffer, MY_LEN, fp) != 0) {\n\t\t\t\tif (*buffer == '-') {\n\t\t\t\t\tfprintf(stderr, \"\\t%s\", buffer);\n\t\t\t\t} else if (sscanf(buffer, \"%x %s\", &value, notes) == 2) {\n\t\t\t\t\t++totals;\n\t\t\t\t\tif (wcwidth(value) == 1)\n\t\t\t\t\t\t++passed;\n\t\t\t\t\tfprintf(stderr, \"%d\\t%s\", wcwidth(value), buffer);\n\t\t\t\t} else {\n\t\t\t\t\tfprintf(stderr, \"?\\t%s\", buffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfprintf(stderr, \"%d/%d passed wcwidth/graphics check\\n\", passed, totals);\n\treturn (totals == passed) ? 0 : 1;\n}\n],\n[cf_cv_wcwidth_graphics=yes],\n[cf_cv_wcwidth_graphics=no],\n[cf_cv_wcwidth_graphics=unknown])\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CLANG_COMPILER version: 2 updated: 2013/11/19 19:23:35\ndnl -----------------\ndnl Check if the given compiler is really clang.  clang's C driver defines\ndnl __GNUC__ (fooling the configure script into setting $GCC to yes) but does\ndnl not ignore some gcc options.\ndnl\ndnl This macro should be run \"soon\" after AC_PROG_CC or AC_PROG_CPLUSPLUS, to\ndnl ensure that it is not mistaken for gcc/g++.  It is normally invoked from\ndnl the wrappers for gcc and g++ warnings.\ndnl\ndnl $1 = GCC (default) or GXX\ndnl $2 = CLANG_COMPILER (default)\ndnl $3 = CFLAGS (default) or CXXFLAGS\nAC_DEFUN([CF_CLANG_COMPILER],[\nifelse([$2],,CLANG_COMPILER,[$2])=no\n\nif test \"$ifelse([$1],,[$1],GCC)\" = yes ; then\n\tAC_MSG_CHECKING(if this is really Clang ifelse([$1],GXX,C++,C) compiler)\n\tcf_save_CFLAGS=\"$ifelse([$3],,CFLAGS,[$3])\"\n\tifelse([$3],,CFLAGS,[$3])=\"$ifelse([$3],,CFLAGS,[$3]) -Qunused-arguments\"\n\tAC_TRY_COMPILE([],[\n#ifdef __clang__\n#else\nmake an error\n#endif\n],[ifelse([$2],,CLANG_COMPILER,[$2])=yes\ncf_save_CFLAGS=\"$cf_save_CFLAGS -Qunused-arguments\"\n],[])\n\tifelse([$3],,CFLAGS,[$3])=\"$cf_save_CFLAGS\"\n\tAC_MSG_RESULT($ifelse([$2],,CLANG_COMPILER,[$2]))\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_CONST_X_STRING version: 3 updated: 2020/01/11 18:39:22\ndnl -----------------\ndnl The X11R4-X11R6 Xt specification uses an ambiguous String type for most\ndnl character-strings.\ndnl\ndnl It is ambiguous because the specification accommodated the pre-ANSI\ndnl compilers bundled by more than one vendor in lieu of providing a standard C\ndnl compiler other than by costly add-ons.  Because of this, the specification\ndnl did not take into account the use of const for telling the compiler that\ndnl string literals would be in readonly memory.\ndnl\ndnl As a workaround, one could (starting with X11R5) define XTSTRINGDEFINES, to\ndnl let the compiler decide how to represent Xt's strings which were #define'd. \ndnl That does not solve the problem of using the block of Xt's strings which\ndnl are compiled into the library (and is less efficient than one might want).\ndnl\ndnl Xt specification 7 introduces the _CONST_X_STRING symbol which is used both\ndnl when compiling the library and compiling using the library, to tell the\ndnl compiler that String is const.\nAC_DEFUN([CF_CONST_X_STRING],\n[\nAC_REQUIRE([AC_PATH_XTRA])\n\nCF_SAVE_XTRA_FLAGS([CF_CONST_X_STRING])\n\nAC_TRY_COMPILE(\n[\n#include <stdlib.h>\n#include <X11/Intrinsic.h>\n],\n[String foo = malloc(1)],[\n\nAC_CACHE_CHECK(for X11/Xt const-feature,cf_cv_const_x_string,[\n\tAC_TRY_COMPILE(\n\t\t[\n#define _CONST_X_STRING\t/* X11R7.8 (perhaps) */\n#undef  XTSTRINGDEFINES\t/* X11R5 and later */\n#include <stdlib.h>\n#include <X11/Intrinsic.h>\n\t\t],[String foo = malloc(1); *foo = 0],[\n\t\t\tcf_cv_const_x_string=no\n\t\t],[\n\t\t\tcf_cv_const_x_string=yes\n\t\t])\n])\n\nCF_RESTORE_XTRA_FLAGS([CF_CONST_X_STRING])\n\ncase $cf_cv_const_x_string in\n(no)\n\tCF_APPEND_TEXT(CPPFLAGS,-DXTSTRINGDEFINES)\n\t;;\n(*)\n\tCF_APPEND_TEXT(CPPFLAGS,-D_CONST_X_STRING)\n\t;;\nesac\n\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CPP_PARAM_INIT version: 7 updated: 2017/01/21 11:06:25\ndnl -----------------\ndnl Check if the C++ compiler accepts duplicate parameter initialization.  This\ndnl is a late feature for the standard and is not in some recent compilers\ndnl (1999/9/11).\nAC_DEFUN([CF_CPP_PARAM_INIT],\n[\nif test -n \"$CXX\"; then\nAC_CACHE_CHECK(if $CXX accepts parameter initialization,cf_cv_cpp_param_init,[\n\tAC_LANG_SAVE\n\tAC_LANG_CPLUSPLUS\n\tAC_TRY_RUN([\nclass TEST {\nprivate:\n\tint value;\npublic:\n\tTEST(int x = 1);\n\t~TEST();\n};\n\nTEST::TEST(int x = 1)\t// some compilers do not like second initializer\n{\n\tvalue = x;\n}\nint main(void) { }\n],\n\t[cf_cv_cpp_param_init=yes],\n\t[cf_cv_cpp_param_init=no],\n\t[cf_cv_cpp_param_init=unknown])\n\tAC_LANG_RESTORE\n])\nfi\ntest \"$cf_cv_cpp_param_init\" = yes && AC_DEFINE(CPP_HAS_PARAM_INIT,1,[Define to 1 if C++ has parameter initialization])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CPP_STATIC_CAST version: 3 updated: 2013/04/13 18:03:21\ndnl ------------------\ndnl Check if the C++ compiler accepts static_cast in generics.  This appears to\ndnl not be supported in g++ before 3.0\nAC_DEFUN([CF_CPP_STATIC_CAST],\n[\nif test -n \"$CXX\"; then\n\nAC_CACHE_CHECK(if $CXX accepts static_cast,cf_cv_cpp_static_cast,[\n\tAC_LANG_SAVE\n\tAC_LANG_CPLUSPLUS\n\n\tAC_TRY_COMPILE([\nclass NCursesPanel\n{\npublic:\n  NCursesPanel(int nlines,\n\t       int ncols,\n\t       int begin_y = 0,\n\t       int begin_x = 0)\n  {\n  }\n  NCursesPanel();\n  ~NCursesPanel();\n};\n\ntemplate<class T> class NCursesUserPanel : public NCursesPanel\n{\npublic:\n  NCursesUserPanel (int nlines,\n\t\t    int ncols,\n\t\t    int begin_y = 0,\n\t\t    int begin_x = 0,\n\t\t    const T* p_UserData = static_cast<T*>(0))\n    : NCursesPanel (nlines, ncols, begin_y, begin_x)\n  {\n  };\n  NCursesUserPanel(const T* p_UserData = static_cast<T*>(0)) : NCursesPanel()\n  {\n  };\n\n  virtual ~NCursesUserPanel() {};\n};\n],[\n\tconst char* p_UserData = static_cast<char*>(0)],\n\t[cf_cv_cpp_static_cast=yes],\n\t[cf_cv_cpp_static_cast=no])\n\n\tAC_LANG_RESTORE\n])\n\nfi\n\ntest \"$cf_cv_cpp_static_cast\" = yes && AC_DEFINE(CPP_HAS_STATIC_CAST,1,[Define to 1 if C++ has static_cast])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CXX_AR_FLAGS version: 2 updated: 2015/04/17 21:13:04\ndnl ---------------\ndnl Setup special archiver flags for given compilers.\nAC_DEFUN([CF_CXX_AR_FLAGS],[\n\tCXX_AR='$(AR)'\n\tCXX_ARFLAGS='$(ARFLAGS)'\n\tcase $cf_cv_system_name in\n\t(irix*)\n\t    if test \"$GXX\" != yes ; then\n\t\tCXX_AR='$(CXX)'\n\t\tCXX_ARFLAGS='-ar -o'\n\t    fi\n\t    ;;\n\t(sco3.2v5*)\n\t    CXXLDFLAGS=\"-u main\"\n\t    ;;\n\t(solaris2*)\n\t    if test \"$GXX\" != yes ; then\n\t\tCXX_AR='$(CXX)'\n\t\tCXX_ARFLAGS='-xar -o'\n\t    fi\n\t    ;;\n\tesac\n\tAC_SUBST(CXXLDFLAGS)\n\tAC_SUBST(CXX_AR)\n\tAC_SUBST(CXX_ARFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CXX_IOSTREAM_NAMESPACE version: 2 updated: 2012/10/06 17:56:13\ndnl -------------------------\ndnl For c++, check if iostream uses \"std::\" namespace.\nAC_DEFUN([CF_CXX_IOSTREAM_NAMESPACE],[\nAC_CHECK_HEADERS(iostream)\nif test x\"$ac_cv_header_iostream\" = xyes ; then\n\tAC_MSG_CHECKING(if iostream uses std-namespace)\n\tAC_TRY_COMPILE([\n#include <iostream>\nusing std::endl;\nusing std::cerr;],[\ncerr << \"testing\" << endl;\n],[cf_iostream_namespace=yes],[cf_iostream_namespace=no])\n\tAC_MSG_RESULT($cf_iostream_namespace)\n\tif test \"$cf_iostream_namespace\" = yes ; then\n\t\tAC_DEFINE(IOSTREAM_NAMESPACE,1,[Define to 1 if C++ has namespace iostream])\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_C_INLINE version: 6 updated: 2019/09/07 13:38:36\ndnl -----------\ndnl Check if the C compiler supports \"inline\".\ndnl $1 is the name of a shell variable to set if inline is supported\ndnl $2 is the threshold for gcc 4.x's option controlling maximum inline size\nAC_DEFUN([CF_C_INLINE],[\nAC_REQUIRE([CF_GCC_VERSION])\nAC_C_INLINE\n$1=\nif test \"$ac_cv_c_inline\" != no ; then\n\t$1=inline\n\tif test \"$INTEL_COMPILER\" = yes\n\tthen\n\t\t:\n\telif test \"$CLANG_COMPILER\" = yes\n\tthen\n\t\t:\n\telif test \"$GCC\" = yes\n\tthen\n\t\tAC_CACHE_CHECK(if $CC supports options to tune inlining,cf_cv_gcc_inline,[\n\t\tcf_save_CFLAGS=$CFLAGS\n\t\tCFLAGS=\"$CFLAGS --param max-inline-insns-single=$2\"\n\t\tAC_TRY_COMPILE([inline int foo(void) { return 1; }],\n\t\t[${cf_cv_main_return:-return} foo()],\n\t\t[cf_cv_gcc_inline=yes],\n\t\t[cf_cv_gcc_inline=no])\n\t\tCFLAGS=$cf_save_CFLAGS\n\t\t])\n\t\tif test \"$cf_cv_gcc_inline\" = yes ; then\n\t\t\tCF_ADD_CFLAGS([--param max-inline-insns-single=$2])\n\t\tfi\n\tfi\nfi\nAC_SUBST($1)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DIRNAME version: 4 updated: 2002/12/21 19:25:52\ndnl ----------\ndnl \"dirname\" is not portable, so we fake it with a shell script.\nAC_DEFUN([CF_DIRNAME],[$1=`echo $2 | sed -e 's%/[[^/]]*$%%'`])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DIRS_TO_MAKE version: 3 updated: 2002/02/23 20:38:31\ndnl ---------------\nAC_DEFUN([CF_DIRS_TO_MAKE],\n[\nDIRS_TO_MAKE=\"lib\"\nfor cf_item in $cf_list_models\ndo\n\tCF_OBJ_SUBDIR($cf_item,cf_subdir)\n\tfor cf_item2 in $DIRS_TO_MAKE\n\tdo\n\t\ttest $cf_item2 = $cf_subdir && break\n\tdone\n\ttest \".$cf_item2\" != \".$cf_subdir\" && DIRS_TO_MAKE=\"$DIRS_TO_MAKE $cf_subdir\"\ndone\nfor cf_dir in $DIRS_TO_MAKE\ndo\n\ttest ! -d $cf_dir && mkdir $cf_dir\ndone\nAC_SUBST(DIRS_TO_MAKE)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_ECHO version: 13 updated: 2015/04/18 08:56:57\ndnl ---------------\ndnl You can always use \"make -n\" to see the actual options, but it's hard to\ndnl pick out/analyze warning messages when the compile-line is long.\ndnl\ndnl Sets:\ndnl\tECHO_LT - symbol to control if libtool is verbose\ndnl\tECHO_LD - symbol to prefix \"cc -o\" lines\ndnl\tRULE_CC - symbol to put before implicit \"cc -c\" lines (e.g., .c.o)\ndnl\tSHOW_CC - symbol to put before explicit \"cc -c\" lines\ndnl\tECHO_CC - symbol to put before any \"cc\" line\ndnl\nAC_DEFUN([CF_DISABLE_ECHO],[\nAC_MSG_CHECKING(if you want to see long compiling messages)\nCF_ARG_DISABLE(echo,\n\t[  --disable-echo          do not display \"compiling\" commands],\n\t[\n\tECHO_LT='--silent'\n\tECHO_LD='@echo linking [$]@;'\n\tRULE_CC='@echo compiling [$]<'\n\tSHOW_CC='@echo compiling [$]@'\n\tECHO_CC='@'\n],[\n\tECHO_LT=''\n\tECHO_LD=''\n\tRULE_CC=''\n\tSHOW_CC=''\n\tECHO_CC=''\n])\nAC_MSG_RESULT($enableval)\nAC_SUBST(ECHO_LT)\nAC_SUBST(ECHO_LD)\nAC_SUBST(RULE_CC)\nAC_SUBST(SHOW_CC)\nAC_SUBST(ECHO_CC)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_GNAT_PROJECTS version: 1 updated: 2014/06/01 11:34:00\ndnl ------------------------\nAC_DEFUN([CF_DISABLE_GNAT_PROJECTS],[\nAC_MSG_CHECKING(if we want to use GNAT projects)\nCF_ARG_DISABLE(gnat-projects,\n\t[  --disable-gnat-projects test: disable GNAT projects even if usable],\n\t[enable_gnat_projects=no],\n\t[enable_gnat_projects=yes])\nAC_MSG_RESULT($enable_gnat_projects)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_LEAKS version: 7 updated: 2012/10/02 20:55:03\ndnl ----------------\ndnl Combine no-leak checks with the libraries or tools that are used for the\ndnl checks.\nAC_DEFUN([CF_DISABLE_LEAKS],[\n\nAC_REQUIRE([CF_WITH_DMALLOC])\nAC_REQUIRE([CF_WITH_DBMALLOC])\nAC_REQUIRE([CF_WITH_VALGRIND])\n\nAC_MSG_CHECKING(if you want to perform memory-leak testing)\nAC_ARG_ENABLE(leaks,\n\t[  --disable-leaks         test: free permanent memory, analyze leaks],\n\t[if test \"x$enableval\" = xno; then with_no_leaks=yes; else with_no_leaks=no; fi],\n\t: ${with_no_leaks:=no})\nAC_MSG_RESULT($with_no_leaks)\n\nif test \"$with_no_leaks\" = yes ; then\n\tAC_DEFINE(NO_LEAKS,1,[Define to 1 if you want to perform memory-leak testing.])\n\tAC_DEFINE(YY_NO_LEAKS,1,[Define to 1 if you want to perform memory-leak testing.])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_LIBTOOL_VERSION version: 3 updated: 2015/04/17 21:13:04\ndnl --------------------------\ndnl Check if we should use the libtool 1.5 feature \"-version-number\" instead of\ndnl the older \"-version-info\" feature.  The newer feature allows us to use\ndnl version numbering on shared libraries which make them compatible with\ndnl various systems.\nAC_DEFUN([CF_DISABLE_LIBTOOL_VERSION],\n[\nAC_MSG_CHECKING(if libtool -version-number should be used)\nCF_ARG_DISABLE(libtool-version,\n\t[  --disable-libtool-version  enable to use libtool's incompatible naming scheme],\n\t[cf_libtool_version=no],\n\t[cf_libtool_version=yes])\nAC_MSG_RESULT($cf_libtool_version)\n\nif test \"$cf_libtool_version\" = yes ; then\n\tLIBTOOL_VERSION=\"-version-number\"\nelse\n\tLIBTOOL_VERSION=\"-version-info\"\n\tcase \"x$VERSION\" in\n\t(x)\n\t\tAC_MSG_WARN(VERSION was not set)\n\t\t;;\n\t(x*.*.*)\n\t\tABI_VERSION=\"$VERSION\"\n\t\tCF_VERBOSE(ABI_VERSION: $ABI_VERSION)\n\t\t;;\n\t(x*:*:*)\n\t\tABI_VERSION=`echo \"$VERSION\" | sed -e 's/:/./g'`\n\t\tCF_VERBOSE(ABI_VERSION: $ABI_VERSION)\n\t\t;;\n\t(*)\n\t\tAC_MSG_WARN(unexpected VERSION value: $VERSION)\n\t\t;;\n\tesac\nfi\n\nAC_SUBST(ABI_VERSION)\nAC_SUBST(LIBTOOL_VERSION)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_RPATH_HACK version: 2 updated: 2011/02/13 13:31:33\ndnl ---------------------\ndnl The rpath-hack makes it simpler to build programs, particularly with the\ndnl *BSD ports which may have essential libraries in unusual places.  But it\ndnl can interfere with building an executable for the base system.  Use this\ndnl option in that case.\nAC_DEFUN([CF_DISABLE_RPATH_HACK],\n[\nAC_MSG_CHECKING(if rpath-hack should be disabled)\nCF_ARG_DISABLE(rpath-hack,\n\t[  --disable-rpath-hack    don't add rpath options for additional libraries],\n\t[cf_disable_rpath_hack=yes],\n\t[cf_disable_rpath_hack=no])\nAC_MSG_RESULT($cf_disable_rpath_hack)\nif test \"$cf_disable_rpath_hack\" = no ; then\n\tCF_RPATH_HACK\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_BROKEN_LINKER version: 1 updated: 2020/02/08 15:59:30\ndnl -----------------------\ndnl Some linkers cannot reference a data-only object.  Cygwin used to be one.\ndnl This usually follows CF_LINK_DATAONLY, but is not required in case we need\ndnl an unconditional feature.\nAC_DEFUN([CF_ENABLE_BROKEN_LINKER],[\n\nAC_MSG_CHECKING(if you want broken-linker support code)\nAC_ARG_ENABLE(broken_linker,\n\t[  --enable-broken_linker  compile with broken-linker support code],\n\t[with_broken_linker=$enableval],\n\t[with_broken_linker=no])\nAC_MSG_RESULT($with_broken_linker)\n\n: ${BROKEN_LINKER:=0}\nif test \"x$with_broken_linker\" = xyes ; then\n\tAC_DEFINE(BROKEN_LINKER,1,[Define to 1 to work around linkers which cannot link data-only modules])\n\tBROKEN_LINKER=1\nfi\nAC_SUBST(BROKEN_LINKER)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_PC_FILES version: 13 updated: 2015/11/01 05:27:39\ndnl ------------------\ndnl This is the \"--enable-pc-files\" option, which is available if there is a\ndnl pkg-config configuration on the local machine.\nAC_DEFUN([CF_ENABLE_PC_FILES],[\nAC_REQUIRE([CF_PKG_CONFIG])\nAC_REQUIRE([CF_WITH_PKG_CONFIG_LIBDIR])\n\nif test \"x$PKG_CONFIG\" != xnone\nthen\n\tAC_MSG_CHECKING(if we should install .pc files for $PKG_CONFIG)\nelse\n\tAC_MSG_CHECKING(if we should install .pc files)\nfi\n\nAC_ARG_ENABLE(pc-files,\n\t[  --enable-pc-files       generate and install .pc files for pkg-config],\n\t[enable_pc_files=$enableval],\n\t[enable_pc_files=no])\nAC_MSG_RESULT($enable_pc_files)\n\nif test \"x$enable_pc_files\" != xno\nthen\n\tMAKE_PC_FILES=\n\tcase \"x$PKG_CONFIG_LIBDIR\" in\n\t(xno|xyes)\n\t\tAC_MSG_WARN(no PKG_CONFIG_LIBDIR was found)\n\t\t;;\n\t(*)\n\t\tCF_PATH_SYNTAX(PKG_CONFIG_LIBDIR)\n\t\t;;\n\tesac\nelse\n\tMAKE_PC_FILES=\"#\"\nfi\nAC_SUBST(MAKE_PC_FILES)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_RPATH version: 2 updated: 2010/03/27 18:39:42\ndnl ---------------\ndnl Check if the rpath option should be used, setting cache variable\ndnl cf_cv_enable_rpath if so.\nAC_DEFUN([CF_ENABLE_RPATH],\n[\nAC_MSG_CHECKING(if rpath option should be used)\nAC_ARG_ENABLE(rpath,\n[  --enable-rpath          use rpath option when generating shared libraries],\n[cf_cv_enable_rpath=$enableval],\n[cf_cv_enable_rpath=no])\nAC_MSG_RESULT($cf_cv_enable_rpath)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_STRING_HACKS version: 5 updated: 2016/10/08 17:34:11\ndnl ----------------------\ndnl On a few platforms, the compiler and/or loader nags with untruthful\ndnl comments stating that \"most\" uses of strcat/strcpy/sprintf are incorrect,\ndnl and implying that most uses of the recommended alternatives are correct.\ndnl\ndnl Factually speaking, no one has actually counted the number of uses of these\ndnl functions versus the total of incorrect uses.  Samples of a few thousand\ndnl instances are meaningless compared to the hundreds of millions of lines of\ndnl existing C code.\ndnl\ndnl strlcat/strlcpy are (as of 2012) non-standard, and are available on some\ndnl platforms, in implementations of varying quality.  Likewise, snprintf is\ndnl standard - but evolved through phases, and older implementations are likely\ndnl to yield surprising results, as documented in manpages on various systems.\nAC_DEFUN([CF_ENABLE_STRING_HACKS],\n[\nAC_MSG_CHECKING(if you want to work around bogus compiler/loader warnings)\nAC_ARG_ENABLE(string-hacks,\n\t[  --enable-string-hacks   work around bogus compiler/loader warnings],\n\t[with_string_hacks=$enableval],\n\t[with_string_hacks=no])\nAC_MSG_RESULT($with_string_hacks)\n\nif test \"x$with_string_hacks\" = \"xyes\"; then\n \tAC_DEFINE(USE_STRING_HACKS,1,[Define to 1 to work around bogus compiler/loader warnings])\n\tAC_MSG_WARN(enabling string-hacks to work around bogus compiler/loader warnings)\n\tAC_CHECK_FUNC(strlcat,[\n\t\tAC_DEFINE(HAVE_STRLCAT,1,[Define to 1 if we have strlcat function])\n\t\t],[\n\t\tAC_CHECK_LIB(bsd,strlcat,[\n\t\t\tCF_ADD_LIB(bsd)\n\t\t\tAC_CHECK_HEADERS(bsd/string.h)\n\t\t\tAC_DEFINE(HAVE_STRLCAT,1,[Define to 1 if we have strlcat function])\n\t\t\t])\n\t\t])\n\tAC_CHECK_FUNCS( strlcpy snprintf )\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ERRNO version: 5 updated: 1997/11/30 12:44:39\ndnl --------\ndnl Check if 'errno' is declared in <errno.h>\nAC_DEFUN([CF_ERRNO],\n[\nCF_CHECK_ERRNO(errno)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ETIP_DEFINES version: 5 updated: 2012/02/18 17:51:07\ndnl ---------------\ndnl Test for conflicting definitions of exception in gcc 2.8.0, etc., between\ndnl math.h and builtin.h, only for ncurses\nAC_DEFUN([CF_ETIP_DEFINES],\n[\nAC_MSG_CHECKING(for special defines needed for etip.h)\ncf_save_CXXFLAGS=\"$CXXFLAGS\"\ncf_result=\"none\"\n\n# etip.h includes ncurses.h which includes ncurses_dll.h\n# But ncurses_dll.h is generated - fix here.\ntest -d include || mkdir include\ntest -f include/ncurses_dll.h || sed -e 's/@NCURSES_WRAP_PREFIX@/'$NCURSES_WRAP_PREFIX'/g' ${srcdir}/include/ncurses_dll.h.in >include/ncurses_dll.h\n\nfor cf_math in \"\" MATH_H\ndo\nfor cf_excp in \"\" MATH_EXCEPTION\ndo\n\tCXXFLAGS=\"$cf_save_CXXFLAGS -I${srcdir}/c++ -I${srcdir}/menu -Iinclude -I${srcdir}/include\"\n\ttest -n \"$cf_math\" && CXXFLAGS=\"$CXXFLAGS -DETIP_NEEDS_${cf_math}\"\n\ttest -n \"$cf_excp\" && CXXFLAGS=\"$CXXFLAGS -DETIP_NEEDS_${cf_excp}\"\nAC_TRY_COMPILE([\n#include <etip.h.in>\n],[],[\n\ttest -n \"$cf_math\" && AC_DEFINE_UNQUOTED(ETIP_NEEDS_${cf_math})\n\ttest -n \"$cf_excp\" && AC_DEFINE_UNQUOTED(ETIP_NEEDS_${cf_excp})\n\tcf_result=\"$cf_math $cf_excp\"\n\tbreak 2\n],[])\ndone\ndone\nAC_MSG_RESULT($cf_result)\nCXXFLAGS=\"$cf_save_CXXFLAGS\"\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_FIND_LINKAGE version: 21 updated: 2018/06/20 20:23:13\ndnl ---------------\ndnl Find a library (specifically the linkage used in the code fragment),\ndnl searching for it if it is not already in the library path.\ndnl See also CF_ADD_SEARCHPATH.\ndnl\ndnl Parameters (4-on are optional):\ndnl     $1 = headers for library entrypoint\ndnl     $2 = code fragment for library entrypoint\ndnl     $3 = the library name without the \"-l\" option or \".so\" suffix.\ndnl     $4 = action to perform if successful (default: update CPPFLAGS, etc)\ndnl     $5 = action to perform if not successful\ndnl     $6 = module name, if not the same as the library name\ndnl     $7 = extra libraries\ndnl\ndnl Sets these variables:\ndnl     $cf_cv_find_linkage_$3 - yes/no according to whether linkage is found\ndnl     $cf_cv_header_path_$3 - include-directory if needed\ndnl     $cf_cv_library_path_$3 - library-directory if needed\ndnl     $cf_cv_library_file_$3 - library-file if needed, e.g., -l$3\nAC_DEFUN([CF_FIND_LINKAGE],[\n\n# If the linkage is not already in the $CPPFLAGS/$LDFLAGS configuration, these\n# will be set on completion of the AC_TRY_LINK below.\ncf_cv_header_path_$3=\ncf_cv_library_path_$3=\n\nCF_MSG_LOG([Starting [FIND_LINKAGE]($3,$6)])\n\ncf_save_LIBS=\"$LIBS\"\n\nAC_TRY_LINK([$1],[$2],[\n\tcf_cv_find_linkage_$3=yes\n\tcf_cv_header_path_$3=/usr/include\n\tcf_cv_library_path_$3=/usr/lib\n],[\n\nLIBS=\"-l$3 $7 $cf_save_LIBS\"\n\nAC_TRY_LINK([$1],[$2],[\n\tcf_cv_find_linkage_$3=yes\n\tcf_cv_header_path_$3=/usr/include\n\tcf_cv_library_path_$3=/usr/lib\n\tcf_cv_library_file_$3=\"-l$3\"\n],[\n\tcf_cv_find_linkage_$3=no\n\tLIBS=\"$cf_save_LIBS\"\n\n\tCF_VERBOSE(find linkage for $3 library)\n\tCF_MSG_LOG([Searching for headers in [FIND_LINKAGE]($3,$6)])\n\n\tcf_save_CPPFLAGS=\"$CPPFLAGS\"\n\tcf_test_CPPFLAGS=\"$CPPFLAGS\"\n\n\tCF_HEADER_PATH(cf_search,ifelse([$6],,[$3],[$6]))\n\tfor cf_cv_header_path_$3 in $cf_search\n\tdo\n\t\tif test -d $cf_cv_header_path_$3 ; then\n\t\t\tCF_VERBOSE(... testing $cf_cv_header_path_$3)\n\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\tCF_APPEND_TEXT(CPPFLAGS,-I$cf_cv_header_path_$3)\n\t\t\tAC_TRY_COMPILE([$1],[$2],[\n\t\t\t\tCF_VERBOSE(... found $3 headers in $cf_cv_header_path_$3)\n\t\t\t\tcf_cv_find_linkage_$3=maybe\n\t\t\t\tcf_test_CPPFLAGS=\"$CPPFLAGS\"\n\t\t\t\tbreak],[\n\t\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\t\t])\n\t\tfi\n\tdone\n\n\tif test \"$cf_cv_find_linkage_$3\" = maybe ; then\n\n\t\tCF_MSG_LOG([Searching for $3 library in [FIND_LINKAGE]($3,$6)])\n\n\t\tcf_save_LIBS=\"$LIBS\"\n\t\tcf_save_LDFLAGS=\"$LDFLAGS\"\n\n\t\tifelse([$6],,,[\n\t\tCPPFLAGS=\"$cf_test_CPPFLAGS\"\n\t\tLIBS=\"-l$3 $7 $cf_save_LIBS\"\n\t\tAC_TRY_LINK([$1],[$2],[\n\t\t\tCF_VERBOSE(... found $3 library in system)\n\t\t\tcf_cv_find_linkage_$3=yes])\n\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\tLIBS=\"$cf_save_LIBS\"\n\t\t\t])\n\n\t\tif test \"$cf_cv_find_linkage_$3\" != yes ; then\n\t\t\tCF_LIBRARY_PATH(cf_search,$3)\n\t\t\tfor cf_cv_library_path_$3 in $cf_search\n\t\t\tdo\n\t\t\t\tif test -d $cf_cv_library_path_$3 ; then\n\t\t\t\t\tCF_VERBOSE(... testing $cf_cv_library_path_$3)\n\t\t\t\t\tCPPFLAGS=\"$cf_test_CPPFLAGS\"\n\t\t\t\t\tLIBS=\"-l$3 $7 $cf_save_LIBS\"\n\t\t\t\t\tLDFLAGS=\"$cf_save_LDFLAGS -L$cf_cv_library_path_$3\"\n\t\t\t\t\tAC_TRY_LINK([$1],[$2],[\n\t\t\t\t\tCF_VERBOSE(... found $3 library in $cf_cv_library_path_$3)\n\t\t\t\t\tcf_cv_find_linkage_$3=yes\n\t\t\t\t\tcf_cv_library_file_$3=\"-l$3\"\n\t\t\t\t\tbreak],[\n\t\t\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\t\t\tLIBS=\"$cf_save_LIBS\"\n\t\t\t\t\tLDFLAGS=\"$cf_save_LDFLAGS\"\n\t\t\t\t\t])\n\t\t\t\tfi\n\t\t\tdone\n\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\tLDFLAGS=\"$cf_save_LDFLAGS\"\n\t\tfi\n\n\telse\n\t\tcf_cv_find_linkage_$3=no\n\tfi\n\t],$7)\n])\n\nLIBS=\"$cf_save_LIBS\"\n\nif test \"$cf_cv_find_linkage_$3\" = yes ; then\nifelse([$4],,[\n\tCF_ADD_INCDIR($cf_cv_header_path_$3)\n\tCF_ADD_LIBDIR($cf_cv_library_path_$3)\n\tCF_ADD_LIB($3)\n],[$4])\nelse\nifelse([$5],,AC_MSG_WARN(Cannot find $3 library),[$5])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FIND_SUB_INCDIR version: 2 updated: 2015/04/17 21:13:04\ndnl ------------------\ndnl Find an include-directory with the given leaf-name.  This is useful for\ndnl example with FreeBSD ports, which use this convention to distinguish\ndnl different versions of the same port.\nAC_DEFUN([CF_FIND_SUB_INCDIR],[\n\tCF_SUBDIR_PATH(cf_search,$1,include)\n\tfor cf_item in $cf_search\n\tdo\n\t\tcase $cf_item in\n\t\t(*/$1)\n\t\t\tCF_ADD_INCDIR($cf_item)\n\t\t\t;;\n\t\tesac\n\tdone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FIND_SUB_LIBDIR version: 2 updated: 2015/04/17 21:13:04\ndnl ------------------\ndnl Find a library-directory with the given leaf-name.  This is useful for\ndnl example with FreeBSD ports, which use this convention to distinguish\ndnl different versions of the same port.\nAC_DEFUN([CF_FIND_SUB_LIBDIR],[\n\tCF_SUBDIR_PATH(cf_search,$1,lib)\n\tfor cf_item in $cf_search\n\tdo\n\t\tcase $cf_item in\n\t\t(*/$1)\n\t\t\tCF_ADD_LIBDIR($cf_item)\n\t\t\t;;\n\t\tesac\n\tdone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FIXUP_ADAFLAGS version: 2 updated: 2015/04/17 21:13:04\ndnl -----------------\ndnl make ADAFLAGS consistent with CFLAGS\nAC_DEFUN([CF_FIXUP_ADAFLAGS],[\n\tAC_MSG_CHECKING(optimization options for ADAFLAGS)\n\tcase \"$CFLAGS\" in\n\t(*-g*)\n\t\tCF_ADD_ADAFLAGS(-g)\n\t\t;;\n\tesac\n\tcase \"$CFLAGS\" in\n\t(*-O*)\n\t\tcf_O_flag=`echo \"$CFLAGS\" |sed -e 's/^.*-O/-O/' -e 's/[[ \t]].*//'`\n\t\tCF_ADD_ADAFLAGS($cf_O_flag)\n\t\t;;\n\tesac\n\tAC_MSG_RESULT($ADAFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FOPEN_BIN_R version: 2 updated: 2019/12/31 08:53:54\ndnl --------------\ndnl Check if fopen works when the \"b\" (binary) flag is added to the mode\ndnl parameter.  POSIX ignores the \"b\", which c89 specified.  Some very old\ndnl systems do not accept it.\nAC_DEFUN([CF_FOPEN_BIN_R],[\nAC_CACHE_CHECK(if fopen accepts explicit binary mode,cf_cv_fopen_bin_r,[\n\tAC_TRY_RUN([\n#include <stdio.h>\nint main(void) {\n\tFILE *fp = fopen(\"conftest.tmp\", \"wb\");\n\tint rc = 0;\n\tif (fp != 0) {\n\t\tint p, q;\n\t\tfor (p = 0; p < 256; ++p) {\n\t\t\tfputc(p, fp);\n\t\t}\n\t\tfclose(fp);\n\t\tfp = fopen(\"conftest.tmp\", \"rb\");\n\t\tif (fp != 0) {\n\t\t\tfor (p = 0; p < 256; ++p) {\n\t\t\t\tq = fgetc(fp);\n\t\t\t\tif (q != p) {\n\t\t\t\t\trc = 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\trc = 1;\n\t\t}\n\t} else {\n\t\trc = 1;\n\t}\n\t${cf_cv_main_return:-return} (rc);\n}\n],\n\t\t[cf_cv_fopen_bin_r=yes],\n\t\t[cf_cv_fopen_bin_r=no],\n\t\t[cf_cv_fopen_bin_r=unknown])\n])\ntest \"x$cf_cv_fopen_bin_r\" != xno && AC_DEFINE(USE_FOPEN_BIN_R,1,[Define to 1 if fopen accepts explicit binary mode])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FORGET_TOOL version: 1 updated: 2013/04/06 18:03:09\ndnl --------------\ndnl Forget that we saw the given tool.\nAC_DEFUN([CF_FORGET_TOOL],[\nunset ac_cv_prog_ac_ct_$1\nunset ac_ct_$1\nunset $1\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_DLSYM version: 4 updated: 2015/09/12 14:46:44\ndnl -------------\ndnl Test for dlsym() and related functions, as well as libdl.\ndnl\ndnl Sets\ndnl\t$cf_have_dlsym\ndnl\t$cf_have_libdl\nAC_DEFUN([CF_FUNC_DLSYM],[\ncf_have_dlsym=no\nAC_CHECK_FUNC(dlsym,cf_have_dlsym=yes,[\n\ncf_have_libdl=no\nAC_CHECK_LIB(dl,dlsym,[\n\tcf_have_dlsym=yes\n\tcf_have_libdl=yes])])\n\nif test \"$cf_have_dlsym\" = yes ; then\n\ttest \"$cf_have_libdl\" = yes && { CF_ADD_LIB(dl) }\n\n\tAC_MSG_CHECKING(whether able to link to dl*() functions)\n\tAC_TRY_LINK([#include <dlfcn.h>],[\n\t\tvoid *obj;\n\t\tif ((obj = dlopen(\"filename\", 0)) != 0) {\n\t\t\tif (dlsym(obj, \"symbolname\") == 0) {\n\t\t\tdlclose(obj);\n\t\t\t}\n\t\t}],[\n\t\tAC_DEFINE(HAVE_LIBDL,1,[Define to 1 if we have dl library])],[\n\t\tAC_MSG_ERROR(Cannot link test program for libdl)])\n\tAC_MSG_RESULT(ok)\nelse\n\tAC_MSG_ERROR(Cannot find dlsym function)\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_MEMMOVE version: 9 updated: 2017/01/21 11:06:25\ndnl ---------------\ndnl Check for memmove, or a bcopy that can handle overlapping copy.  If neither\ndnl is found, add our own version of memmove to the list of objects.\nAC_DEFUN([CF_FUNC_MEMMOVE],\n[\nAC_CHECK_FUNC(memmove,,[\nAC_CHECK_FUNC(bcopy,[\n\tAC_CACHE_CHECK(if bcopy does overlapping moves,cf_cv_good_bcopy,[\n\t\tAC_TRY_RUN([\nint main(void) {\n\tstatic char data[] = \"abcdefghijklmnopqrstuwwxyz\";\n\tchar temp[40];\n\tbcopy(data, temp, sizeof(data));\n\tbcopy(temp+10, temp, 15);\n\tbcopy(temp+5, temp+15, 10);\n\t${cf_cv_main_return:-return} (strcmp(temp, \"klmnopqrstuwwxypqrstuwwxyz\"));\n}\n\t\t],\n\t\t[cf_cv_good_bcopy=yes],\n\t\t[cf_cv_good_bcopy=no],\n\t\t[cf_cv_good_bcopy=unknown])\n\t\t])\n\t],[cf_cv_good_bcopy=no])\n\tif test \"$cf_cv_good_bcopy\" = yes ; then\n\t\tAC_DEFINE(USE_OK_BCOPY,1,[Define to 1 to use bcopy when memmove is unavailable])\n\telse\n\t\tAC_DEFINE(USE_MY_MEMMOVE,1,[Define to 1 to use replacement function when memmove is unavailable])\n\tfi\n])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_NANOSLEEP version: 5 updated: 2017/01/21 11:06:25\ndnl -----------------\ndnl Check for existence of workable nanosleep() function.  Some systems, e.g.,\ndnl AIX 4.x, provide a non-working version.\nAC_DEFUN([CF_FUNC_NANOSLEEP],[\nAC_CACHE_CHECK(if nanosleep really works,cf_cv_func_nanosleep,[\nAC_TRY_RUN([\n#include <stdio.h>\n#include <errno.h>\n#include <time.h>\n\n#ifdef HAVE_SYS_TIME_H\n#include <sys/time.h>\n#endif\n\nint main(void) {\n\tstruct timespec ts1, ts2;\n\tint code;\n\tts1.tv_sec  = 0;\n\tts1.tv_nsec = 750000000;\n\tts2.tv_sec  = 0;\n\tts2.tv_nsec = 0;\n\terrno = 0;\n\tcode = nanosleep(&ts1, &ts2); /* on failure errno is ENOSYS. */\n\t${cf_cv_main_return:-return}(code != 0);\n}\n],\n\t[cf_cv_func_nanosleep=yes],\n\t[cf_cv_func_nanosleep=no],\n\t[cf_cv_func_nanosleep=unknown])])\n\ntest \"$cf_cv_func_nanosleep\" = \"yes\" && AC_DEFINE(HAVE_NANOSLEEP,1,[Define to 1 if we have nanosleep()])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_OPENPTY version: 5 updated: 2015/09/12 14:46:50\ndnl ---------------\ndnl Check for openpty() function, along with <pty.h> header.  It may need the\ndnl \"util\" library as well.\nAC_DEFUN([CF_FUNC_OPENPTY],\n[\nAC_CHECK_LIB(util,openpty,cf_cv_lib_util=yes,cf_cv_lib_util=no)\nAC_CACHE_CHECK(for openpty header,cf_cv_func_openpty,[\n\tcf_save_LIBS=\"$LIBS\"\n\ttest $cf_cv_lib_util = yes && { CF_ADD_LIB(util) }\n\tfor cf_header in pty.h libutil.h util.h\n\tdo\n\tAC_TRY_LINK([\n#include <$cf_header>\n],[\n\tint x = openpty((int *)0, (int *)0, (char *)0,\n\t\t\t\t   (struct termios *)0, (struct winsize *)0);\n],[\n\t\tcf_cv_func_openpty=$cf_header\n\t\tbreak\n],[\n\t\tcf_cv_func_openpty=no\n])\n\tdone\n\tLIBS=\"$cf_save_LIBS\"\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_POLL version: 9 updated: 2015/10/10 13:27:32\ndnl ------------\ndnl See if the poll function really works.  Some platforms have poll(), but\ndnl it does not work for terminals or files.\nAC_DEFUN([CF_FUNC_POLL],[\ntty 2>&1 >/dev/null || { AC_CHECK_FUNCS(posix_openpt) }\nAC_CACHE_CHECK(if poll really works,cf_cv_working_poll,[\nAC_TRY_RUN([\n#include <stdlib.h>\n#include <stdio.h>\n#include <unistd.h>\n#include <fcntl.h>\n#ifdef HAVE_POLL_H\n#include <poll.h>\n#else\n#include <sys/poll.h>\n#endif\nint main(void) {\n\tstruct pollfd myfds;\n\tint ret;\n\n\t/* check for Darwin bug with respect to \"devices\" */\n\tmyfds.fd = open(\"/dev/null\", 1);\t/* O_WRONLY */\n\tif (myfds.fd < 0)\n\t\tmyfds.fd = 0;\n\tmyfds.events = POLLIN;\n\tmyfds.revents = 0;\n\n\tret = poll(&myfds, 1, 100);\n\n\tif (ret < 0 || (myfds.revents & POLLNVAL)) {\n\t\tret = -1;\n\t} else {\n\t\tint fd = 0;\n\t\tif (!isatty(fd)) {\n\t\t\tfd = open(\"/dev/tty\", 2);\t/* O_RDWR */\n\t\t}\n#ifdef HAVE_POSIX_OPENPT\n\t\tif (fd < 0) {\n\t\t\tfd = posix_openpt(O_RDWR);\n\t\t}\n#endif\n\n\t\tif (fd >= 0) {\n\t\t\t/* also check with standard input */\n\t\t\tmyfds.fd = fd;\n\t\t\tmyfds.events = POLLIN;\n\t\t\tmyfds.revents = 0;\n\t\t\tret = poll(&myfds, 1, 100);\n\t\t} else {\n\t\t\tret = -1;\n\t\t}\n\t}\n\t${cf_cv_main_return:-return}(ret < 0);\n}],\n\t[cf_cv_working_poll=yes],\n\t[cf_cv_working_poll=no],\n\t[cf_cv_working_poll=unknown])])\ntest \"$cf_cv_working_poll\" = \"yes\" && AC_DEFINE(HAVE_WORKING_POLL,1,[Define to 1 if the poll function seems to work])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_TERMIOS version: 3 updated: 2012/10/06 17:56:13\ndnl ---------------\ndnl Some old/broken variations define tcgetattr() only as a macro in\ndnl termio(s).h\nAC_DEFUN([CF_FUNC_TERMIOS],[\nAC_REQUIRE([CF_STRUCT_TERMIOS])\nAC_CACHE_CHECK(for tcgetattr, cf_cv_have_tcgetattr,[\nAC_TRY_LINK([\n#include <sys/types.h>\n#ifdef HAVE_UNISTD_H\n#include <unistd.h>\n#endif\n#ifdef HAVE_TERMIOS_H\n#include <termios.h>\n#define TTY struct termios\n#else\n#ifdef HAVE_TERMIO_H\n#include <termio.h>\n#define TTY struct termio\n#endif\n#endif\n],[\nTTY foo;\ntcgetattr(1, &foo);],\n[cf_cv_have_tcgetattr=yes],\n[cf_cv_have_tcgetattr=no])])\ntest \"$cf_cv_have_tcgetattr\" = yes && AC_DEFINE(HAVE_TCGETATTR,1,[Define to 1 if we have tcgetattr])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_VSSCANF version: 6 updated: 2015/04/18 08:56:57\ndnl ---------------\ndnl Check for vsscanf() function, which is in c9x but generally not in earlier\ndnl versions of C.  It is in the GNU C library, and can often be simulated by\ndnl other functions.\nAC_DEFUN([CF_FUNC_VSSCANF],\n[\nAC_CACHE_CHECK(for vsscanf function or workaround,cf_cv_func_vsscanf,[\nAC_TRY_LINK([\n#include <stdarg.h>\n#include <stdio.h>],[\n\tva_list ap;\n\tvsscanf(\"from\", \"%d\", ap)],[cf_cv_func_vsscanf=vsscanf],[\nAC_TRY_LINK([\n#include <stdarg.h>\n#include <stdio.h>],[\n\tFILE strbuf;\n\tchar *str = \"from\";\n\n\tstrbuf._flag = _IOREAD;\n\tstrbuf._ptr = strbuf._base = (unsigned char *) str;\n\tstrbuf._cnt = strlen(str);\n\tstrbuf._file = _NFILE;\n\treturn (vfscanf(&strbuf, \"%d\", ap))],[cf_cv_func_vsscanf=vfscanf],[\nAC_TRY_LINK([\n#include <stdarg.h>\n#include <stdio.h>],[\n\tFILE strbuf;\n\tchar *str = \"from\";\n\n\tstrbuf._flag = _IOREAD;\n\tstrbuf._ptr = strbuf._base = (unsigned char *) str;\n\tstrbuf._cnt = strlen(str);\n\tstrbuf._file = _NFILE;\n\treturn (_doscan(&strbuf, \"%d\", ap))],[cf_cv_func_vsscanf=_doscan],[\ncf_cv_func_vsscanf=no])])])])\n\ncase $cf_cv_func_vsscanf in\n(vsscanf) AC_DEFINE(HAVE_VSSCANF,1,[Define to 1 if we have vsscanf]);;\n(vfscanf) AC_DEFINE(HAVE_VFSCANF,1,[Define to 1 if we have vfscanf]);;\n(_doscan) AC_DEFINE(HAVE__DOSCAN,1,[Define to 1 if we have _doscan]);;\nesac\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GCC_ATTRIBUTES version: 17 updated: 2015/04/12 15:39:00\ndnl -----------------\ndnl Test for availability of useful gcc __attribute__ directives to quiet\ndnl compiler warnings.  Though useful, not all are supported -- and contrary\ndnl to documentation, unrecognized directives cause older compilers to barf.\nAC_DEFUN([CF_GCC_ATTRIBUTES],\n[\nif test \"$GCC\" = yes\nthen\ncat > conftest.i <<EOF\n#ifndef GCC_PRINTF\n#define GCC_PRINTF 0\n#endif\n#ifndef GCC_SCANF\n#define GCC_SCANF 0\n#endif\n#ifndef GCC_NORETURN\n#define GCC_NORETURN /* nothing */\n#endif\n#ifndef GCC_UNUSED\n#define GCC_UNUSED /* nothing */\n#endif\nEOF\nif test \"$GCC\" = yes\nthen\n\tAC_CHECKING([for $CC __attribute__ directives])\ncat > conftest.$ac_ext <<EOF\n#line __oline__ \"${as_me:-configure}\"\n#include \"confdefs.h\"\n#include \"conftest.h\"\n#include \"conftest.i\"\n#if\tGCC_PRINTF\n#define GCC_PRINTFLIKE(fmt,var) __attribute__((format(printf,fmt,var)))\n#else\n#define GCC_PRINTFLIKE(fmt,var) /*nothing*/\n#endif\n#if\tGCC_SCANF\n#define GCC_SCANFLIKE(fmt,var)  __attribute__((format(scanf,fmt,var)))\n#else\n#define GCC_SCANFLIKE(fmt,var)  /*nothing*/\n#endif\nextern void wow(char *,...) GCC_SCANFLIKE(1,2);\nextern void oops(char *,...) GCC_PRINTFLIKE(1,2) GCC_NORETURN;\nextern void foo(void) GCC_NORETURN;\nint main(int argc GCC_UNUSED, char *argv[[]] GCC_UNUSED) { return 0; }\nEOF\n\tcf_printf_attribute=no\n\tcf_scanf_attribute=no\n\tfor cf_attribute in scanf printf unused noreturn\n\tdo\n\t\tCF_UPPER(cf_ATTRIBUTE,$cf_attribute)\n\t\tcf_directive=\"__attribute__(($cf_attribute))\"\n\t\techo \"checking for $CC $cf_directive\" 1>&AC_FD_CC\n\n\t\tcase $cf_attribute in\n\t\t(printf)\n\t\t\tcf_printf_attribute=yes\n\t\t\tcat >conftest.h <<EOF\n#define GCC_$cf_ATTRIBUTE 1\nEOF\n\t\t\t;;\n\t\t(scanf)\n\t\t\tcf_scanf_attribute=yes\n\t\t\tcat >conftest.h <<EOF\n#define GCC_$cf_ATTRIBUTE 1\nEOF\n\t\t\t;;\n\t\t(*)\n\t\t\tcat >conftest.h <<EOF\n#define GCC_$cf_ATTRIBUTE $cf_directive\nEOF\n\t\t\t;;\n\t\tesac\n\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... $cf_attribute)\n\t\t\tcat conftest.h >>confdefs.h\n\t\t\tcase $cf_attribute in\n\t\t\t(noreturn)\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_NORETURN,$cf_directive,[Define to noreturn-attribute for gcc])\n\t\t\t\t;;\n\t\t\t(printf)\n\t\t\t\tcf_value='/* nothing */'\n\t\t\t\tif test \"$cf_printf_attribute\" != no ; then\n\t\t\t\t\tcf_value='__attribute__((format(printf,fmt,var)))'\n\t\t\t\t\tAC_DEFINE(GCC_PRINTF,1,[Define to 1 if the compiler supports gcc-like printf attribute.])\n\t\t\t\tfi\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_PRINTFLIKE(fmt,var),$cf_value,[Define to printf-attribute for gcc])\n\t\t\t\t;;\n\t\t\t(scanf)\n\t\t\t\tcf_value='/* nothing */'\n\t\t\t\tif test \"$cf_scanf_attribute\" != no ; then\n\t\t\t\t\tcf_value='__attribute__((format(scanf,fmt,var)))'\n\t\t\t\t\tAC_DEFINE(GCC_SCANF,1,[Define to 1 if the compiler supports gcc-like scanf attribute.])\n\t\t\t\tfi\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_SCANFLIKE(fmt,var),$cf_value,[Define to sscanf-attribute for gcc])\n\t\t\t\t;;\n\t\t\t(unused)\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_UNUSED,$cf_directive,[Define to unused-attribute for gcc])\n\t\t\t\t;;\n\t\t\tesac\n\t\tfi\n\tdone\nelse\n\tfgrep define conftest.i >>confdefs.h\nfi\nrm -rf conftest*\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GCC_VERSION version: 8 updated: 2019/09/07 13:38:36\ndnl --------------\ndnl Find version of gcc, and (because icc/clang pretend to be gcc without being\ndnl compatible), attempt to determine if icc/clang is actually used.\nAC_DEFUN([CF_GCC_VERSION],[\nAC_REQUIRE([AC_PROG_CC])\nGCC_VERSION=none\nif test \"$GCC\" = yes ; then\n\tAC_MSG_CHECKING(version of $CC)\n\tGCC_VERSION=\"`${CC} --version 2>/dev/null | sed -e '2,$d' -e 's/^.*(GCC[[^)]]*) //' -e 's/^.*(Debian[[^)]]*) //' -e 's/^[[^0-9.]]*//' -e 's/[[^0-9.]].*//'`\"\n\ttest -z \"$GCC_VERSION\" && GCC_VERSION=unknown\n\tAC_MSG_RESULT($GCC_VERSION)\nfi\nCF_INTEL_COMPILER(GCC,INTEL_COMPILER,CFLAGS)\nCF_CLANG_COMPILER(GCC,CLANG_COMPILER,CFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GCC_WARNINGS version: 37 updated: 2020/01/05 20:04:12\ndnl ---------------\ndnl Check if the compiler supports useful warning options.  There's a few that\ndnl we don't use, simply because they're too noisy:\ndnl\ndnl\t-Wconversion (useful in older versions of gcc, but not in gcc 2.7.x)\ndnl\t-Winline (usually not worthwhile)\ndnl\t-Wredundant-decls (system headers make this too noisy)\ndnl\t-Wtraditional (combines too many unrelated messages, only a few useful)\ndnl\t-Wwrite-strings (too noisy, but should review occasionally).  This\ndnl\t\tis enabled for ncurses using \"--enable-const\".\ndnl\t-pedantic\ndnl\ndnl Parameter:\ndnl\t$1 is an optional list of gcc warning flags that a particular\ndnl\t\tapplication might want to use, e.g., \"no-unused\" for\ndnl\t\t-Wno-unused\ndnl Special:\ndnl\tIf $with_ext_const is \"yes\", add a check for -Wwrite-strings\ndnl\nAC_DEFUN([CF_GCC_WARNINGS],\n[\nAC_REQUIRE([CF_GCC_VERSION])\nif test \"x$have_x\" = xyes; then CF_CONST_X_STRING fi\ncat > conftest.$ac_ext <<EOF\n#line __oline__ \"${as_me:-configure}\"\nint main(int argc, char *argv[[]]) { return (argv[[argc-1]] == 0) ; }\nEOF\nif test \"$INTEL_COMPILER\" = yes\nthen\n# The \"-wdXXX\" options suppress warnings:\n# remark #1419: external declaration in primary source file\n# remark #1683: explicit conversion of a 64-bit integral type to a smaller integral type (potential portability problem)\n# remark #1684: conversion from pointer to same-sized integral type (potential portability problem)\n# remark #193: zero used for undefined preprocessing identifier\n# remark #593: variable \"curs_sb_left_arrow\" was set but never used\n# remark #810: conversion from \"int\" to \"Dimension={unsigned short}\" may lose significant bits\n# remark #869: parameter \"tw\" was never referenced\n# remark #981: operands are evaluated in unspecified order\n# warning #279: controlling expression is constant\n\n\tAC_CHECKING([for $CC warning options])\n\tcf_save_CFLAGS=\"$CFLAGS\"\n\tEXTRA_CFLAGS=\"-Wall\"\n\tfor cf_opt in \\\n\t\twd1419 \\\n\t\twd1683 \\\n\t\twd1684 \\\n\t\twd193 \\\n\t\twd593 \\\n\t\twd279 \\\n\t\twd810 \\\n\t\twd869 \\\n\t\twd981\n\tdo\n\t\tCFLAGS=\"$cf_save_CFLAGS $EXTRA_CFLAGS -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tEXTRA_CFLAGS=\"$EXTRA_CFLAGS -$cf_opt\"\n\t\tfi\n\tdone\n\tCFLAGS=\"$cf_save_CFLAGS\"\nelif test \"$GCC\" = yes && test \"$GCC_VERSION\" != \"unknown\"\nthen\n\tAC_CHECKING([for $CC warning options])\n\tcf_save_CFLAGS=\"$CFLAGS\"\n\tEXTRA_CFLAGS=\n\tcf_warn_CONST=\"\"\n\ttest \"$with_ext_const\" = yes && cf_warn_CONST=\"Wwrite-strings\"\n\tcf_gcc_warnings=\"Wignored-qualifiers Wlogical-op Wvarargs\"\n\ttest \"x$CLANG_COMPILER\" = xyes && cf_gcc_warnings=\n\tfor cf_opt in W Wall \\\n\t\tWbad-function-cast \\\n\t\tWcast-align \\\n\t\tWcast-qual \\\n\t\tWdeclaration-after-statement \\\n\t\tWextra \\\n\t\tWinline \\\n\t\tWmissing-declarations \\\n\t\tWmissing-prototypes \\\n\t\tWnested-externs \\\n\t\tWpointer-arith \\\n\t\tWshadow \\\n\t\tWstrict-prototypes \\\n\t\tWundef Wno-inline $cf_gcc_warnings $cf_warn_CONST $1\n\tdo\n\t\tCFLAGS=\"$cf_save_CFLAGS $EXTRA_CFLAGS -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tcase $cf_opt in\n\t\t\t(Winline)\n\t\t\t\tcase $GCC_VERSION in\n\t\t\t\t([[34]].*)\n\t\t\t\t\tCF_VERBOSE(feature is broken in gcc $GCC_VERSION)\n\t\t\t\t\tcontinue;;\n\t\t\t\tesac\n\t\t\t\t;;\n\t\t\t(Wpointer-arith)\n\t\t\t\tcase $GCC_VERSION in\n\t\t\t\t([[12]].*)\n\t\t\t\t\tCF_VERBOSE(feature is broken in gcc $GCC_VERSION)\n\t\t\t\t\tcontinue;;\n\t\t\t\tesac\n\t\t\t\t;;\n\t\t\tesac\n\t\t\tEXTRA_CFLAGS=\"$EXTRA_CFLAGS -$cf_opt\"\n\t\tfi\n\tdone\n\tCFLAGS=\"$cf_save_CFLAGS\"\nfi\nrm -rf conftest*\n\nAC_SUBST(EXTRA_CFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GETOPT_HEADER version: 6 updated: 2014/07/22 14:45:54\ndnl ----------------\ndnl Check for getopt's variables which are commonly defined in stdlib.h,\ndnl unistd.h or (nonstandard) in getopt.h\nAC_DEFUN([CF_GETOPT_HEADER],\n[\nAC_HAVE_HEADERS(unistd.h getopt.h)\nAC_CACHE_CHECK(for header declaring getopt variables,cf_cv_getopt_header,[\ncf_cv_getopt_header=none\nfor cf_header in stdio.h stdlib.h unistd.h getopt.h\ndo\nAC_TRY_COMPILE([\n#include <$cf_header>],\n[int x = optind; char *y = optarg],\n[cf_cv_getopt_header=$cf_header\n break])\ndone\n])\nif test $cf_cv_getopt_header != none ; then\n\tAC_DEFINE(HAVE_GETOPT_HEADER,1,[Define to 1 if getopt variables are declared in header])\nfi\nif test $cf_cv_getopt_header = getopt.h ; then\n\tAC_DEFINE(NEED_GETOPT_H,1,[Define to 1 if we must include getopt.h])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNATPREP_OPT_T version: 1 updated: 2014/08/02 18:37:25\ndnl -----------------\nAC_DEFUN([CF_GNATPREP_OPT_T],[\nAC_CACHE_CHECK(if GNATPREP supports -T option,cf_cv_gnatprep_opt_t,[\ncf_cv_gnatprep_opt_t=no\ngnatprep -T 2>/dev/null >/dev/null && cf_cv_gnatprep_opt_t=yes\n])\ntest \"$cf_cv_gnatprep_opt_t\" = yes && GNATPREP_OPTS=\"-T $GNATPREP_OPTS\"\nAC_SUBST(GNATPREP_OPTS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_GENERICS version: 4 updated: 2019/12/31 08:53:54\ndnl ----------------\nAC_DEFUN([CF_GNAT_GENERICS],\n[\nAC_REQUIRE([CF_GNAT_VERSION])\n\nAC_MSG_CHECKING(if GNAT supports generics)\ncase $cf_cv_gnat_version in\n(3.[[1-9]]*|[[4-9]].*)\n\tcf_gnat_generics=yes\n\t;;\n(*)\n\tcf_gnat_generics=no\n\t;;\nesac\nAC_MSG_RESULT($cf_gnat_generics)\n\nif test \"$cf_gnat_generics\" = yes\nthen\n\tcf_compile_generics=generics\n\tcf_generic_objects=\"\\${GENOBJS}\"\nelse\n\tcf_compile_generics=\n\tcf_generic_objects=\nfi\n\nAC_SUBST(cf_compile_generics)\nAC_SUBST(cf_generic_objects)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_PROJECTS version: 10 updated: 2019/12/31 08:53:54\ndnl ----------------\ndnl GNAT projects are configured with \".gpr\" project files.\ndnl GNAT libraries are a further development, using the project feature.\nAC_DEFUN([CF_GNAT_PROJECTS],\n[\nAC_REQUIRE([CF_GNAT_VERSION])\nAC_REQUIRE([CF_DISABLE_GNAT_PROJECTS])\n\ncf_gnat_libraries=no\ncf_gnat_projects=no\n\nif test \"$enable_gnat_projects\" != no ; then\nAC_MSG_CHECKING(if GNAT supports project files)\ncase $cf_cv_gnat_version in\n(3.[[0-9]]*)\n\t;;\n(*)\n\tcase $cf_cv_system_name in\n\t(cygwin*|msys*)\n\t\t;;\n\t(*)\n\t\trm -rf conftest* *~conftest*\n\t\tif mkdir conftest.src conftest.bin conftest.lib\n\t\tthen\n\t\t\tcd conftest.src\n\t\t\trm -rf conftest* *~conftest*\n\t\t\tcat >>library.gpr <<CF_EOF\nproject Library is\n  Kind := External (\"LIB_KIND\");\n  for Library_Name use \"ConfTest\";\n  for Object_Dir use \".\";\n  for Library_ALI_Dir use External(\"LIBRARY_DIR\");\n  for Library_Version use External (\"SONAME\");\n  for Library_Kind use Kind;\n  for Library_Dir use External(\"BUILD_DIR\");\n  Source_Dir := External (\"SOURCE_DIR\");\n  for Source_Dirs use (Source_Dir);\nend Library;\nCF_EOF\n\t\t\tcat >>confpackage.ads <<CF_EOF\npackage ConfPackage is\n   procedure conftest;\nend ConfPackage;\nCF_EOF\n\t\t\tcat >>confpackage.adb <<CF_EOF\nwith Text_IO;\npackage body ConfPackage is\n   procedure conftest is\n   begin\n      Text_IO.Put (\"Hello World\");\n      Text_IO.New_Line;\n   end conftest;\nend ConfPackage;\nCF_EOF\n\t\t\tif ( $cf_ada_make $ADAFLAGS \\\n\t\t\t\t\t-Plibrary.gpr \\\n\t\t\t\t\t-XBUILD_DIR=`cd ../conftest.bin;pwd` \\\n\t\t\t\t\t-XLIBRARY_DIR=`cd ../conftest.lib;pwd` \\\n\t\t\t\t\t-XSOURCE_DIR=`pwd` \\\n\t\t\t\t\t-XSONAME=libConfTest.so.1 \\\n\t\t\t\t\t-XLIB_KIND=static 1>&AC_FD_CC 2>&1 ) ; then\n\t\t\t\tcf_gnat_projects=yes\n\t\t\tfi\n\t\t\tcd ..\n\t\tfi\n\t\tif test -f conftest.lib/confpackage.ali\n\t\tthen\n\t\t\tcf_gnat_libraries=yes\n\t\tfi\n\t\trm -rf conftest* *~conftest*\n\t\t;;\n\tesac\n\t;;\nesac\nAC_MSG_RESULT($cf_gnat_projects)\nfi # enable_gnat_projects\n\nif test $cf_gnat_projects = yes\nthen\n\tAC_MSG_CHECKING(if GNAT supports libraries)\n\tAC_MSG_RESULT($cf_gnat_libraries)\nfi\n\nif test \"$cf_gnat_projects\" = yes\nthen\n\tUSE_OLD_MAKERULES=\"#\"\n\tUSE_GNAT_PROJECTS=\"\"\nelse\n\tUSE_OLD_MAKERULES=\"\"\n\tUSE_GNAT_PROJECTS=\"#\"\nfi\n\nif test \"$cf_gnat_libraries\" = yes\nthen\n\tUSE_GNAT_LIBRARIES=\"\"\nelse\n\tUSE_GNAT_LIBRARIES=\"#\"\nfi\n\nAC_SUBST(USE_OLD_MAKERULES)\nAC_SUBST(USE_GNAT_PROJECTS)\nAC_SUBST(USE_GNAT_LIBRARIES)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_SIGINT version: 1 updated: 2011/03/27 20:07:59\ndnl --------------\ndnl Check if gnat supports SIGINT, and presumably tasking.  For the latter, it\ndnl is noted that gnat may compile a tasking unit even for configurations which\ndnl fail at runtime.\nAC_DEFUN([CF_GNAT_SIGINT],[\nAC_CACHE_CHECK(if GNAT supports SIGINT,cf_cv_gnat_sigint,[\nCF_GNAT_TRY_LINK([with Ada.Interrupts.Names;\n\npackage ConfTest is\n\n   pragma Warnings (Off);  --  the next pragma exists since 3.11p\n   pragma Unreserve_All_Interrupts;\n   pragma Warnings (On);\n\n   protected Process is\n      procedure Stop;\n      function Continue return Boolean;\n      pragma Attach_Handler (Stop, Ada.Interrupts.Names.SIGINT);\n   private\n      Done : Boolean := False;\n   end Process;\n\nend ConfTest;],\n[package body ConfTest is\n   protected body Process is\n      procedure Stop is\n      begin\n         Done := True;\n      end Stop;\n      function Continue return Boolean is\n      begin\n         return not Done;\n      end Continue;\n   end Process;\nend ConfTest;],\n\t[cf_cv_gnat_sigint=yes],\n\t[cf_cv_gnat_sigint=no])])\n\nif test $cf_cv_gnat_sigint = yes ; then\n\tUSE_GNAT_SIGINT=\"\"\nelse\n\tUSE_GNAT_SIGINT=\"#\"\nfi\nAC_SUBST(USE_GNAT_SIGINT)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_TRY_LINK version: 3 updated: 2011/03/19 14:47:45\ndnl ----------------\ndnl Verify that a test program compiles/links with GNAT.\ndnl $cf_ada_make is set to the program that compiles/links\ndnl $ADAFLAGS may be set to the GNAT flags.\ndnl\ndnl $1 is the text of the spec\ndnl $2 is the text of the body\ndnl $3 is the shell command to execute if successful\ndnl $4 is the shell command to execute if not successful\nAC_DEFUN([CF_GNAT_TRY_LINK],\n[\nrm -rf conftest* *~conftest*\ncat >>conftest.ads <<CF_EOF\n$1\nCF_EOF\ncat >>conftest.adb <<CF_EOF\n$2\nCF_EOF\nif ( $cf_ada_make $ADAFLAGS conftest 1>&AC_FD_CC 2>&1 ) ; then\nifelse($3,,      :,[      $3])\nifelse($4,,,[else\n   $4])\nfi\nrm -rf conftest* *~conftest*\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_TRY_RUN version: 5 updated: 2011/03/19 14:47:45\ndnl ---------------\ndnl Verify that a test program compiles and runs with GNAT\ndnl $cf_ada_make is set to the program that compiles/links\ndnl $ADAFLAGS may be set to the GNAT flags.\ndnl\ndnl $1 is the text of the spec\ndnl $2 is the text of the body\ndnl $3 is the shell command to execute if successful\ndnl $4 is the shell command to execute if not successful\nAC_DEFUN([CF_GNAT_TRY_RUN],\n[\nrm -rf conftest* *~conftest*\ncat >>conftest.ads <<CF_EOF\n$1\nCF_EOF\ncat >>conftest.adb <<CF_EOF\n$2\nCF_EOF\nif ( $cf_ada_make $ADAFLAGS conftest 1>&AC_FD_CC 2>&1 ) ; then\n   if ( ./conftest 1>&AC_FD_CC 2>&1 ) ; then\nifelse($3,,      :,[      $3])\nifelse($4,,,[   else\n      $4])\n   fi\nifelse($4,,,[else\n   $4])\nfi\nrm -rf conftest* *~conftest*\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_VERSION version: 22 updated: 2019/12/31 08:53:54\ndnl ---------------\ndnl $1 = cache variable to update\ndnl $2 = program name\ndnl Verify version of GNAT or related tool\nAC_DEFUN([CF_GNAT_VERSION],\n[\nAC_CACHE_CHECK(for ifelse($2,,gnat,$2) version, cf_cv_gnat_version,[\ncf_cv_gnat_version=`ifelse($2,,${cf_ada_make:-gnatmake},$2) --version 2>&1 | \\\n\tgrep '[[0-9]].[[0-9]][[0-9]]*' |\\\n\tsed -e '2,$d' -e 's/[[^0-9 \\.]]//g' -e 's/^[[ ]]*//' -e 's/ .*//'`\n])\ntest -z \"$cf_cv_gnat_version\" && cf_cv_gnat_version=no\nifelse($1,,,[eval $1=$cf_cv_gnat_version; unset cf_cv_gnat_version])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNU_SOURCE version: 10 updated: 2018/12/10 20:09:41\ndnl -------------\ndnl Check if we must define _GNU_SOURCE to get a reasonable value for\ndnl _XOPEN_SOURCE, upon which many POSIX definitions depend.  This is a defect\ndnl (or misfeature) of glibc2, which breaks portability of many applications,\ndnl since it is interwoven with GNU extensions.\ndnl\ndnl Well, yes we could work around it...\ndnl\ndnl Parameters:\ndnl\t$1 is the nominal value for _XOPEN_SOURCE\nAC_DEFUN([CF_GNU_SOURCE],\n[\ncf_gnu_xopen_source=ifelse($1,,500,$1)\n\nAC_CACHE_CHECK(if this is the GNU C library,cf_cv_gnu_library,[\nAC_TRY_COMPILE([#include <sys/types.h>],[\n\t#if __GLIBC__ > 0 && __GLIBC_MINOR__ >= 0\n\t\treturn 0;\n\t#elif __NEWLIB__ > 0 && __NEWLIB_MINOR__ >= 0\n\t\treturn 0;\n\t#else\n\t#\terror not GNU C library\n\t#endif],\n\t[cf_cv_gnu_library=yes],\n\t[cf_cv_gnu_library=no])\n])\n\nif test x$cf_cv_gnu_library = xyes; then\n\n\t# With glibc 2.19 (13 years after this check was begun), _DEFAULT_SOURCE\n\t# was changed to help a little.  newlib incorporated the change about 4\n\t# years later.\n\tAC_CACHE_CHECK(if _DEFAULT_SOURCE can be used as a basis,cf_cv_gnu_library_219,[\n\t\tcf_save=\"$CPPFLAGS\"\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_DEFAULT_SOURCE)\n\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t#if (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 19) || (__GLIBC__ > 2)\n\t\t\t\treturn 0;\n\t\t\t#elif (__NEWLIB__ == 2 && __NEWLIB_MINOR__ >= 4) || (__GLIBC__ > 3)\n\t\t\t\treturn 0;\n\t\t\t#else\n\t\t\t#\terror GNU C library __GLIBC__.__GLIBC_MINOR__ is too old\n\t\t\t#endif],\n\t\t\t[cf_cv_gnu_library_219=yes],\n\t\t\t[cf_cv_gnu_library_219=no])\n\t\tCPPFLAGS=\"$cf_save\"\n\t])\n\n\tif test \"x$cf_cv_gnu_library_219\" = xyes; then\n\t\tcf_save=\"$CPPFLAGS\"\n\t\tAC_CACHE_CHECK(if _XOPEN_SOURCE=$cf_gnu_xopen_source works with _DEFAULT_SOURCE,cf_cv_gnu_dftsrc_219,[\n\t\t\tCF_ADD_CFLAGS(-D_DEFAULT_SOURCE -D_XOPEN_SOURCE=$cf_gnu_xopen_source)\n\t\t\tAC_TRY_COMPILE([\n\t\t\t\t#include <limits.h>\n\t\t\t\t#include <sys/types.h>\n\t\t\t\t],[\n\t\t\t\t#if (_XOPEN_SOURCE >= $cf_gnu_xopen_source) && (MB_LEN_MAX > 1)\n\t\t\t\t\treturn 0;\n\t\t\t\t#else\n\t\t\t\t#\terror GNU C library is too old\n\t\t\t\t#endif],\n\t\t\t\t[cf_cv_gnu_dftsrc_219=yes],\n\t\t\t\t[cf_cv_gnu_dftsrc_219=no])\n\t\t\t])\n\t\ttest \"x$cf_cv_gnu_dftsrc_219\" = \"xyes\" || CPPFLAGS=\"$cf_save\"\n\telse\n\t\tcf_cv_gnu_dftsrc_219=maybe\n\tfi\n\n\tif test \"x$cf_cv_gnu_dftsrc_219\" != xyes; then\n\n\t\tAC_CACHE_CHECK(if we must define _GNU_SOURCE,cf_cv_gnu_source,[\n\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t#ifndef _XOPEN_SOURCE\n\t\t\t#error\texpected _XOPEN_SOURCE to be defined\n\t\t\t#endif],\n\t\t\t[cf_cv_gnu_source=no],\n\t\t\t[cf_save=\"$CPPFLAGS\"\n\t\t\t CF_ADD_CFLAGS(-D_GNU_SOURCE)\n\t\t\t AC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t\t#ifdef _XOPEN_SOURCE\n\t\t\t\t#error\texpected _XOPEN_SOURCE to be undefined\n\t\t\t\t#endif],\n\t\t\t\t[cf_cv_gnu_source=no],\n\t\t\t\t[cf_cv_gnu_source=yes])\n\t\t\tCPPFLAGS=\"$cf_save\"\n\t\t\t])\n\t\t])\n\n\t\tif test \"$cf_cv_gnu_source\" = yes\n\t\tthen\n\t\tAC_CACHE_CHECK(if we should also define _DEFAULT_SOURCE,cf_cv_default_source,[\n\t\t\tCF_APPEND_TEXT(CPPFLAGS,-D_GNU_SOURCE)\n\t\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t\t#ifdef _DEFAULT_SOURCE\n\t\t\t\t#error\texpected _DEFAULT_SOURCE to be undefined\n\t\t\t\t#endif],\n\t\t\t\t[cf_cv_default_source=no],\n\t\t\t\t[cf_cv_default_source=yes])\n\t\t\t])\n\t\t\tif test \"$cf_cv_default_source\" = yes\n\t\t\tthen\n\t\t\t\tCF_APPEND_TEXT(CPPFLAGS,-D_DEFAULT_SOURCE)\n\t\t\tfi\n\t\tfi\n\tfi\n\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GPP_LIBRARY version: 12 updated: 2015/04/17 21:13:04\ndnl --------------\ndnl If we're trying to use g++, test if libg++ is installed (a rather common\ndnl problem :-).  If we have the compiler but no library, we'll be able to\ndnl configure, but won't be able to build the c++ demo program.\nAC_DEFUN([CF_GPP_LIBRARY],\n[\ncf_cxx_library=unknown\ncase $cf_cv_system_name in\n(os2*)\n\tcf_gpp_libname=gpp\n\t;;\n(*)\n\tcf_gpp_libname=g++\n\t;;\nesac\nif test \"$GXX\" = yes; then\n\tAC_MSG_CHECKING([for lib$cf_gpp_libname])\n\tcf_save=\"$LIBS\"\n\tCF_ADD_LIB($cf_gpp_libname)\n\tAC_TRY_LINK([\n#include <$cf_gpp_libname/builtin.h>\n\t],\n\t[two_arg_error_handler_t foo2 = lib_error_handler],\n\t[cf_cxx_library=yes\n\t CF_ADD_LIB($cf_gpp_libname,CXXLIBS)\n\t if test \"$cf_gpp_libname\" = cpp ; then\n\t    AC_DEFINE(HAVE_GPP_BUILTIN_H,1,[Define to 1 if we have gpp builtin.h])\n\t else\n\t    AC_DEFINE(HAVE_GXX_BUILTIN_H,1,[Define to 1 if we have g++ builtin.h])\n\t fi],\n\t[AC_TRY_LINK([\n#include <builtin.h>\n\t],\n\t[two_arg_error_handler_t foo2 = lib_error_handler],\n\t[cf_cxx_library=yes\n\t CF_ADD_LIB($cf_gpp_libname,CXXLIBS)\n\t AC_DEFINE(HAVE_BUILTIN_H,1,[Define to 1 if we have builtin.h])],\n\t[cf_cxx_library=no])])\n\tLIBS=\"$cf_save\"\n\tAC_MSG_RESULT($cf_cxx_library)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GXX_VERSION version: 8 updated: 2017/02/11 14:48:57\ndnl --------------\ndnl Check for version of g++\nAC_DEFUN([CF_GXX_VERSION],[\nAC_REQUIRE([AC_PROG_CPP])\nGXX_VERSION=none\nif test \"$GXX\" = yes; then\n\tAC_MSG_CHECKING(version of ${CXX:-g++})\n\tGXX_VERSION=\"`${CXX:-g++} --version| sed -e '2,$d' -e 's/^.*(GCC) //' -e 's/^[[^0-9.]]*//' -e 's/[[^0-9.]].*//'`\"\n\tif test -z \"$GXX_VERSION\"\n\tthen\n\t\tGXX_VERSION=unknown\n\t\tGXX=no\n\tfi\n\tAC_MSG_RESULT($GXX_VERSION)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GXX_WARNINGS version: 9 updated: 2015/04/17 21:13:04\ndnl ---------------\ndnl Check if the compiler supports useful warning options.\ndnl\ndnl Most of gcc's options apply to g++, except:\ndnl\t-Wbad-function-cast\ndnl\t-Wmissing-declarations\ndnl\t-Wnested-externs\ndnl\ndnl Omit a few (for now):\ndnl\t-Winline\ndnl\ndnl Parameter:\ndnl\t$1 is an optional list of g++ warning flags that a particular\ndnl\t\tapplication might want to use, e.g., \"no-unused\" for\ndnl\t\t-Wno-unused\ndnl Special:\ndnl\tIf $with_ext_const is \"yes\", add a check for -Wwrite-strings\ndnl\nAC_DEFUN([CF_GXX_WARNINGS],\n[\n\nCF_INTEL_COMPILER(GXX,INTEL_CPLUSPLUS,CXXFLAGS)\nCF_CLANG_COMPILER(GXX,CLANG_CPLUSPLUS,CXXFLAGS)\n\nAC_REQUIRE([CF_GXX_VERSION])\n\nAC_LANG_SAVE\nAC_LANG_CPLUSPLUS\n\ncat > conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint main(int argc, char *argv[[]]) { return (argv[[argc-1]] == 0) ; }\nEOF\n\nif test \"$INTEL_CPLUSPLUS\" = yes\nthen\n# The \"-wdXXX\" options suppress warnings:\n# remark #1419: external declaration in primary source file\n# remark #1682: implicit conversion of a 64-bit integral type to a smaller integral type (potential portability problem)\n# remark #1683: explicit conversion of a 64-bit integral type to a smaller integral type (potential portability problem)\n# remark #1684: conversion from pointer to same-sized integral type (potential portability problem)\n# remark #193: zero used for undefined preprocessing identifier\n# remark #593: variable \"curs_sb_left_arrow\" was set but never used\n# remark #810: conversion from \"int\" to \"Dimension={unsigned short}\" may lose significant bits\n# remark #869: parameter \"tw\" was never referenced\n# remark #981: operands are evaluated in unspecified order\n# warning #269: invalid format string conversion\n\n\tAC_CHECKING([for $CC warning options])\n\tcf_save_CXXFLAGS=\"$CXXFLAGS\"\n\tEXTRA_CXXFLAGS=\"-Wall\"\n\tfor cf_opt in \\\n\t\twd1419 \\\n\t\twd1682 \\\n\t\twd1683 \\\n\t\twd1684 \\\n\t\twd193 \\\n\t\twd279 \\\n\t\twd593 \\\n\t\twd810 \\\n\t\twd869 \\\n\t\twd981\n\tdo\n\t\tCXXFLAGS=\"$cf_save_CXXFLAGS $EXTRA_CXXFLAGS -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tEXTRA_CXXFLAGS=\"$EXTRA_CXXFLAGS -$cf_opt\"\n\t\tfi\n\tdone\n\tCXXFLAGS=\"$cf_save_CXXFLAGS\"\n\nelif test \"$GXX\" = yes\nthen\n\tAC_CHECKING([for $CXX warning options])\n\tcf_save_CXXFLAGS=\"$CXXFLAGS\"\n\tEXTRA_CXXFLAGS=\"-W -Wall\"\n\tcf_gxx_extra_warnings=\"\"\n\ttest \"$with_ext_const\" = yes && cf_gxx_extra_warnings=\"Wwrite-strings\"\n\tcase \"$GCC_VERSION\" in\n\t([[1-2]].*)\n\t\t;;\n\t(*)\n\t\tcf_gxx_extra_warnings=\"$cf_gxx_extra_warnings Weffc++\"\n\t\t;;\n\tesac\n\tfor cf_opt in \\\n\t\tWabi \\\n\t\tfabi-version=0 \\\n\t\tWextra \\\n\t\tWignored-qualifiers \\\n\t\tWlogical-op \\\n\t\tWoverloaded-virtual \\\n\t\tWsign-promo \\\n\t\tWsynth \\\n\t\tWold-style-cast \\\n\t\tWcast-align \\\n\t\tWcast-qual \\\n\t\tWpointer-arith \\\n\t\tWshadow \\\n\t\tWundef $cf_gxx_extra_warnings $1\n\tdo\n\t\tCXXFLAGS=\"$cf_save_CXXFLAGS $EXTRA_CXXFLAGS -Werror -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tEXTRA_CXXFLAGS=\"$EXTRA_CXXFLAGS -$cf_opt\"\n\t\telse\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... no -$cf_opt)\n\t\tfi\n\tdone\n\tCXXFLAGS=\"$cf_save_CXXFLAGS\"\nfi\n\nrm -rf conftest*\nAC_LANG_RESTORE\nAC_SUBST(EXTRA_CXXFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HASHED_DB version: 7 updated: 2015/04/18 08:56:57\ndnl ------------\ndnl Look for an instance of the Berkeley hashed database.\ndnl\ndnl $1 = optional parameter, to specify install-prefix for the database.\nAC_DEFUN([CF_HASHED_DB],\n[\nifelse([$1],,,[\ncase $1 in\n(yes|*able*)\n\t;;\n(*)\n\tif test -d \"$1\" ; then\n\t\tCF_ADD_INCDIR($1/include)\n\t\tCF_ADD_LIBDIR($1/lib)\n\telse\n\t\tcase \"$1\" in\n\t\t(./*|../*|/*)\n\t\t\tAC_MSG_WARN(no such directory $1)\n\t\t\t;;\n\t\t(*)\n\t\t\tCF_FIND_SUB_INCDIR($1)\n\t\t\tCF_FIND_SUB_LIBDIR($1)\n\t\t\t;;\n\t\tesac\n\tfi\nesac\n])\nAC_CHECK_HEADER(db.h,[\nCF_HASHED_DB_VERSION\nif test \"$cf_cv_hashed_db_version\" = unknown ; then\n\tAC_MSG_ERROR(Cannot determine version of db)\nelse\n\tCF_HASHED_DB_LIBS\n\tif test \"$cf_cv_hashed_db_libs\" = unknown ; then\n\t\tAC_MSG_ERROR(Cannot determine library for db)\n\telif test \"$cf_cv_hashed_db_libs\" != default ; then\n\t\tCF_ADD_LIB($cf_cv_hashed_db_libs)\n\tfi\nfi\n],[\n\tAC_MSG_ERROR(Cannot find db.h)\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HASHED_DB_LIBS version: 9 updated: 2010/05/29 16:31:02\ndnl -----------------\ndnl Given that we have the header and version for hashed database, find the\ndnl library information.\nAC_DEFUN([CF_HASHED_DB_LIBS],\n[\nAC_CACHE_CHECK(for db libraries, cf_cv_hashed_db_libs,[\ncf_cv_hashed_db_libs=unknown\nfor cf_db_libs in \"\" db$cf_cv_hashed_db_version db-$cf_cv_hashed_db_version db ''\ndo\n\tcf_save_libs=\"$LIBS\"\n\tif test -n \"$cf_db_libs\"; then\n\t\tCF_ADD_LIB($cf_db_libs)\n\tfi\n\tCF_MSG_LOG(checking for library \"$cf_db_libs\")\n\tAC_TRY_LINK([\n$ac_includes_default\n#include <db.h>\n],[\n\tchar *path = \"/tmp/foo\";\n#ifdef DB_VERSION_MAJOR\n#if DB_VERSION_MAJOR >= 4\n\tDB *result = 0;\n\tdb_create(&result, NULL, 0);\n\tresult->open(result,\n\t\tNULL,\n\t\tpath,\n\t\tpath,\n\t\tDB_HASH,\n\t\tDB_CREATE,\n\t\t0644);\n#elif DB_VERSION_MAJOR >= 3\n\tDB *result = 0;\n\tdb_create(&result, NULL, 0);\n\tresult->open(result,\n\t\tpath,\n\t\tpath,\n\t\tDB_HASH,\n\t\tDB_CREATE,\n\t\t0644);\n#elif DB_VERSION_MAJOR >= 2\n\tDB *result = 0;\n\tdb_open(path,\n\t\tDB_HASH,\n\t\tDB_CREATE,\n\t\t0644,\n\t\t(DB_ENV *) 0,\n\t\t(DB_INFO *) 0,\n\t\t&result);\n#endif /* DB_VERSION_MAJOR */\n#else\n\tDB *result = dbopen(path,\n\t\t     2,\n\t\t     0644,\n\t\t     DB_HASH,\n\t\t     0);\n#endif\n\t${cf_cv_main_return:-return}(result != 0)\n],[\n\tif test -n \"$cf_db_libs\" ; then\n\t\tcf_cv_hashed_db_libs=$cf_db_libs\n\telse\n\t\tcf_cv_hashed_db_libs=default\n\tfi\n\tLIBS=\"$cf_save_libs\"\n\tbreak\n])\n\tLIBS=\"$cf_save_libs\"\ndone\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HASHED_DB_VERSION version: 4 updated: 2014/04/12 16:47:01\ndnl --------------------\ndnl Given that we have the header file for hashed database, find the version\ndnl information.\nAC_DEFUN([CF_HASHED_DB_VERSION],\n[\nAC_CACHE_CHECK(for version of db, cf_cv_hashed_db_version,[\ncf_cv_hashed_db_version=unknown\n\nfor cf_db_version in 1 2 3 4 5 6\ndo\n\tCF_MSG_LOG(checking for db version $cf_db_version)\n\tAC_TRY_COMPILE([\n$ac_includes_default\n#include <db.h>\n\n#ifdef DB_VERSION_MAJOR\n\t/* db2 (DB_VERSION_MAJOR=2) has also DB_VERSION_MINOR, tested with 7 */\n#if $cf_db_version == DB_VERSION_MAJOR\n\t/* ok */\n#else\n\tmake an error\n#endif\n#else\n#if $cf_db_version == 1\n\t/* ok: assuming this is DB 1.8.5 */\n#else\n\tmake an error\n#endif\n#endif\n],[DBT *foo = 0],[\n\tcf_cv_hashed_db_version=$cf_db_version\n\tbreak\n\t])\ndone\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HEADER_PATH version: 13 updated: 2015/04/15 19:08:48\ndnl --------------\ndnl Construct a search-list of directories for a nonstandard header-file\ndnl\ndnl Parameters\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\nAC_DEFUN([CF_HEADER_PATH],\n[\n$1=\n\n# collect the current set of include-directories from compiler flags\ncf_header_path_list=\"\"\nif test -n \"${CFLAGS}${CPPFLAGS}\" ; then\n\tfor cf_header_path in $CPPFLAGS $CFLAGS\n\tdo\n\t\tcase $cf_header_path in\n\t\t(-I*)\n\t\t\tcf_header_path=`echo \".$cf_header_path\" |sed -e 's/^...//' -e 's,/include$,,'`\n\t\t\tCF_ADD_SUBDIR_PATH($1,$2,include,$cf_header_path,NONE)\n\t\t\tcf_header_path_list=\"$cf_header_path_list [$]$1\"\n\t\t\t;;\n\t\tesac\n\tdone\nfi\n\n# add the variations for the package we are looking for\nCF_SUBDIR_PATH($1,$2,include)\n\ntest \"$includedir\" != NONE && \\\ntest \"$includedir\" != \"/usr/include\" && \\\ntest -d \"$includedir\" && {\n\ttest -d $includedir &&    $1=\"[$]$1 $includedir\"\n\ttest -d $includedir/$2 && $1=\"[$]$1 $includedir/$2\"\n}\n\ntest \"$oldincludedir\" != NONE && \\\ntest \"$oldincludedir\" != \"/usr/include\" && \\\ntest -d \"$oldincludedir\" && {\n\ttest -d $oldincludedir    && $1=\"[$]$1 $oldincludedir\"\n\ttest -d $oldincludedir/$2 && $1=\"[$]$1 $oldincludedir/$2\"\n}\n\n$1=\"[$]$1 $cf_header_path_list\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HELP_MESSAGE version: 4 updated: 2019/12/31 08:53:54\ndnl ---------------\ndnl Insert text into the help-message, for readability, from AC_ARG_WITH.\nAC_DEFUN([CF_HELP_MESSAGE],\n[CF_ACVERSION_CHECK(2.53,[],[\nAC_DIVERT_HELP($1)])dnl\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INCLUDE_DIRS version: 10 updated: 2014/09/19 20:58:42\ndnl ---------------\ndnl Construct the list of include-options according to whether we're building\ndnl in the source directory or using '--srcdir=DIR' option.\nAC_DEFUN([CF_INCLUDE_DIRS],\n[\nif test \"$srcdir\" != \".\"; then\n\tCPPFLAGS=\"-I\\${srcdir}/../include $CPPFLAGS\"\nfi\nCPPFLAGS=\"-I../include $CPPFLAGS\"\nif test \"$srcdir\" != \".\"; then\n\tCPPFLAGS=\"-I\\${srcdir} $CPPFLAGS\"\nfi\nCPPFLAGS=\"-I. $CPPFLAGS\"\nAC_SUBST(CPPFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPTS version: 2 updated: 2018/08/18 12:19:21\ndnl ---------------\ndnl prompt for/fill-in useful install-program options\nAC_DEFUN([CF_INSTALL_OPTS],\n[\nCF_INSTALL_OPT_S\nCF_INSTALL_OPT_P\nCF_INSTALL_OPT_O\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPT_O version: 2 updated: 2015/05/15 19:45:35\ndnl ----------------\ndnl Almost all \"install\" programs default to the current user's ownership.\ndnl Almost - MINIX is an exception.\nAC_DEFUN([CF_INSTALL_OPT_O],\n[\nAC_MSG_CHECKING(if install needs to be told about ownership)\ncase `$ac_config_guess` in\n(*minix)\n\twith_install_o=yes\n\t;;\n(*)\n\twith_install_o=no\n\t;;\nesac\n\nAC_MSG_RESULT($with_install_o)\nif test \"x$with_install_o\" = xyes\nthen\n\tINSTALL_OPT_O=`id root|sed -e 's/uid=[[0-9]]*(/ -o /' -e 's/gid=[[0-9]]*(/ -g /' -e 's/ [[^=[:space:]]][[^=[:space:]]]*=.*/ /' -e 's/)//g'`\nelse\n\tINSTALL_OPT_O=\nfi\n\nAC_SUBST(INSTALL_OPT_O)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPT_P version: 1 updated: 2018/08/18 12:19:21\ndnl ----------------\ndnl Some install-programs accept a \"-p\" option to preserve file modification\ndnl timestamps.  That can be useful as an install option, as well as a way to\ndnl avoid the need for ranlib after copying a static archive.\nAC_DEFUN([CF_INSTALL_OPT_P],\n[\n: ${INSTALL:=install}\nAC_CACHE_CHECK(if install accepts -p option, cf_cv_install_p,[\n\trm -rf conftest*\n\tdate >conftest.in\n\tmkdir conftest.out\n\tsleep 3\n\tif $INSTALL -p conftest.in conftest.out 2>/dev/null\n\tthen\n\t\tif test -f conftest.out/conftest.in\n\t\tthen\n\t\t\ttest conftest.in -nt conftest.out/conftest.in 2>conftest.err && \\\n\t\t\ttest conftest.out/conftest.in -nt conftest.in 2>conftest.err\n\t\t\tif test -s conftest.err\n\t\t\tthen\n\t\t\t\tcf_cv_install_p=no\n\t\t\telse\n\t\t\t\tcf_cv_install_p=yes\n\t\t\tfi\n\t\telse\n\t\t\tcf_cv_install_p=no\n\t\tfi\n\telse\n\t\tcf_cv_install_p=no\n\tfi\n\trm -rf conftest*\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPT_S version: 2 updated: 2018/08/18 12:19:21\ndnl ----------------\ndnl By default, we should strip executables which are installed, but leave the\ndnl ability to suppress that for unit-testing.\nAC_DEFUN([CF_INSTALL_OPT_S],\n[\nAC_MSG_CHECKING(if you want to install stripped executables)\nCF_ARG_DISABLE(stripping,\n\t[  --disable-stripping     do not strip (debug info) installed executables],\n\t[with_stripping=no],\n\t[with_stripping=yes])\nAC_MSG_RESULT($with_stripping)\n\nif test \"$with_stripping\" = yes\nthen\n\tINSTALL_OPT_S=\"-s\"\nelse\n\tINSTALL_OPT_S=\nfi\nAC_SUBST(INSTALL_OPT_S)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INTEL_COMPILER version: 7 updated: 2015/04/12 15:39:00\ndnl -----------------\ndnl Check if the given compiler is really the Intel compiler for Linux.  It\ndnl tries to imitate gcc, but does not return an error when it finds a mismatch\ndnl between prototypes, e.g., as exercised by CF_MISSING_CHECK.\ndnl\ndnl This macro should be run \"soon\" after AC_PROG_CC or AC_PROG_CPLUSPLUS, to\ndnl ensure that it is not mistaken for gcc/g++.  It is normally invoked from\ndnl the wrappers for gcc and g++ warnings.\ndnl\ndnl $1 = GCC (default) or GXX\ndnl $2 = INTEL_COMPILER (default) or INTEL_CPLUSPLUS\ndnl $3 = CFLAGS (default) or CXXFLAGS\nAC_DEFUN([CF_INTEL_COMPILER],[\nAC_REQUIRE([AC_CANONICAL_HOST])\nifelse([$2],,INTEL_COMPILER,[$2])=no\n\nif test \"$ifelse([$1],,[$1],GCC)\" = yes ; then\n\tcase $host_os in\n\t(linux*|gnu*)\n\t\tAC_MSG_CHECKING(if this is really Intel ifelse([$1],GXX,C++,C) compiler)\n\t\tcf_save_CFLAGS=\"$ifelse([$3],,CFLAGS,[$3])\"\n\t\tifelse([$3],,CFLAGS,[$3])=\"$ifelse([$3],,CFLAGS,[$3]) -no-gcc\"\n\t\tAC_TRY_COMPILE([],[\n#ifdef __INTEL_COMPILER\n#else\nmake an error\n#endif\n],[ifelse([$2],,INTEL_COMPILER,[$2])=yes\ncf_save_CFLAGS=\"$cf_save_CFLAGS -we147\"\n],[])\n\t\tifelse([$3],,CFLAGS,[$3])=\"$cf_save_CFLAGS\"\n\t\tAC_MSG_RESULT($ifelse([$2],,INTEL_COMPILER,[$2]))\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ISASCII version: 4 updated: 2012/10/06 17:56:13\ndnl ----------\ndnl Check if we have either a function or macro for 'isascii()'.\nAC_DEFUN([CF_ISASCII],\n[\nAC_MSG_CHECKING(for isascii)\nAC_CACHE_VAL(cf_cv_have_isascii,[\n\tAC_TRY_LINK([#include <ctype.h>],[int x = isascii(' ')],\n\t[cf_cv_have_isascii=yes],\n\t[cf_cv_have_isascii=no])\n])dnl\nAC_MSG_RESULT($cf_cv_have_isascii)\ntest \"$cf_cv_have_isascii\" = yes && AC_DEFINE(HAVE_ISASCII,1,[Define to 1 if we have isascii()])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LARGEFILE version: 11 updated: 2018/06/20 20:23:13\ndnl ------------\ndnl Add checks for large file support.\nAC_DEFUN([CF_LARGEFILE],[\nifdef([AC_FUNC_FSEEKO],[\n\tAC_SYS_LARGEFILE\n\tif test \"$enable_largefile\" != no ; then\n\tAC_FUNC_FSEEKO\n\n\t# Normally we would collect these definitions in the config.h,\n\t# but (like _XOPEN_SOURCE), some environments rely on having these\n\t# defined before any of the system headers are included.  Another\n\t# case comes up with C++, e.g., on AIX the compiler compiles the\n\t# header files by themselves before looking at the body files it is\n\t# told to compile.  For ncurses, those header files do not include\n\t# the config.h\n\tif test \"$ac_cv_sys_large_files\" != no\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_LARGE_FILES)\n\tfi\n\tif test \"$ac_cv_sys_largefile_source\" != no\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_LARGEFILE_SOURCE)\n\tfi\n\tif test \"$ac_cv_sys_file_offset_bits\" != no\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_FILE_OFFSET_BITS=$ac_cv_sys_file_offset_bits)\n\tfi\n\n\tAC_CACHE_CHECK(whether to use struct dirent64, cf_cv_struct_dirent64,[\n\t\tAC_TRY_COMPILE([\n#pragma GCC diagnostic error \"-Wincompatible-pointer-types\"\n#include <sys/types.h>\n#include <dirent.h>\n\t\t],[\n\t\t/* if transitional largefile support is setup, this is true */\n\t\textern struct dirent64 * readdir(DIR *);\n\t\tstruct dirent64 *x = readdir((DIR *)0);\n\t\tstruct dirent *y = readdir((DIR *)0);\n\t\tint z = x - y;\n\t\t],\n\t\t[cf_cv_struct_dirent64=yes],\n\t\t[cf_cv_struct_dirent64=no])\n\t])\n\ttest \"$cf_cv_struct_dirent64\" = yes && AC_DEFINE(HAVE_STRUCT_DIRENT64,1,[Define to 1 if we have struct dirent64])\n\tfi\n])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_LDFLAGS_STATIC version: 12 updated: 2015/04/18 08:56:57\ndnl -----------------\ndnl Check for compiler/linker flags used to temporarily force usage of static\ndnl libraries.  This depends on the compiler and platform.  Use this to help\ndnl ensure that the linker picks up a given library based on its position in\ndnl the list of linker options and libraries.\nAC_DEFUN([CF_LDFLAGS_STATIC],[\n\nif test \"$GCC\" = yes ; then\n\tcase $cf_cv_system_name in\n\t(OS/2*|os2*|aix[[4]]*|solaris2.1[[0-9]]|darwin*)\n\t\tLDFLAGS_STATIC=\n\t\tLDFLAGS_SHARED=\n\t\t;;\n\t(*) \t# normally, except when broken\n\t\tLDFLAGS_STATIC=-static\n\t\tLDFLAGS_SHARED=-dynamic\n\t\t;;\n\tesac\nelse\n\tcase $cf_cv_system_name in\n\t(aix[[4-7]]*) \t# from ld manpage\n\t\tLDFLAGS_STATIC=-bstatic\n\t\tLDFLAGS_SHARED=-bdynamic\n\t\t;;\n\t(hpux*)\t\t# from ld manpage for hpux10.20, hpux11.11\n\t\t# We could also use just \"archive\" and \"shared\".\n\t\tLDFLAGS_STATIC=-Wl,-a,archive_shared\n\t\tLDFLAGS_SHARED=-Wl,-a,shared_archive\n\t\t;;\n\t(irix*)\t\t# from ld manpage IRIX64\n\t\tLDFLAGS_STATIC=-Bstatic\n\t\tLDFLAGS_SHARED=-Bdynamic\n\t\t;;\n\t(osf[[45]]*)\t# from ld manpage osf4.0d, osf5.1\n\t\t# alternative \"-oldstyle_liblookup\" (not in cc manpage)\n\t\tLDFLAGS_STATIC=-noso\n\t\tLDFLAGS_SHARED=-so_archive\n\t\t;;\n\t(solaris2*)\n\t\tLDFLAGS_STATIC=-Bstatic\n\t\tLDFLAGS_SHARED=-Bdynamic\n\t\t;;\n\tesac\nfi\n\nif test -n \"$LDFLAGS_STATIC\" && test -n \"$LDFLAGS_SHARED\"\nthen\n\tAC_MSG_CHECKING(if linker supports switching between static/dynamic)\n\n\trm -f libconftest.a\n\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\n#include <stdio.h>\nint cf_ldflags_static(FILE *fp) { return fflush(fp); }\nEOF\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\t( $AR $ARFLAGS libconftest.a conftest.o ) 2>&AC_FD_CC 1>/dev/null\n\t\t( eval $RANLIB libconftest.a ) 2>&AC_FD_CC >/dev/null\n\tfi\n\trm -f conftest.*\n\n\tcf_save_LIBS=\"$LIBS\"\n\n\tLIBS=\"$LDFLAGS_STATIC -L`pwd` -lconftest $LDFLAGS_DYNAMIC $LIBS\"\n\tAC_TRY_LINK([\n#line __oline__ \"configure\"\n#include <stdio.h>\nint cf_ldflags_static(FILE *fp);\n],[\n\treturn cf_ldflags_static(stdin);\n],[\n\t# some linkers simply ignore the -dynamic\n\tcase x`file conftest$ac_exeext 2>/dev/null` in\n\t(*static*)\n\t\tcf_ldflags_static=no\n\t\t;;\n\t(*)\n\t\tcf_ldflags_static=yes\n\t\t;;\n\tesac\n],[cf_ldflags_static=no])\n\n\trm -f libconftest.*\n\tLIBS=\"$cf_save_LIBS\"\n\n\tAC_MSG_RESULT($cf_ldflags_static)\n\n\tif test $cf_ldflags_static != yes\n\tthen\n\t\tLDFLAGS_STATIC=\n\t\tLDFLAGS_SHARED=\n\tfi\nelse\n\tLDFLAGS_STATIC=\n\tLDFLAGS_SHARED=\nfi\n\nAC_SUBST(LDFLAGS_STATIC)\nAC_SUBST(LDFLAGS_SHARED)\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_LD_RPATH_OPT version: 8 updated: 2018/08/18 16:36:35\ndnl ---------------\ndnl For the given system and compiler, find the compiler flags to pass to the\ndnl loader to use the \"rpath\" feature.\nAC_DEFUN([CF_LD_RPATH_OPT],\n[\nAC_REQUIRE([CF_CHECK_CACHE])\n\nLD_RPATH_OPT=\nif test \"x$cf_cv_enable_rpath\" != xno\nthen\n\tAC_MSG_CHECKING(for an rpath option)\n\tcase $cf_cv_system_name in\n\t(irix*)\n\t\tif test \"$GCC\" = yes; then\n\t\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\telse\n\t\t\tLD_RPATH_OPT=\"-rpath \"\n\t\tfi\n\t\t;;\n\t(linux*|gnu*|k*bsd*-gnu|freebsd*)\n\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\t;;\n\t(openbsd[[2-9]].*|mirbsd*)\n\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\t;;\n\t(dragonfly*)\n\t\tLD_RPATH_OPT=\"-rpath \"\n\t\t;;\n\t(netbsd*)\n\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\t;;\n\t(osf*|mls+*)\n\t\tLD_RPATH_OPT=\"-rpath \"\n\t\t;;\n\t(solaris2*)\n\t\tLD_RPATH_OPT=\"-R\"\n\t\t;;\n\t(*)\n\t\t;;\n\tesac\n\tAC_MSG_RESULT($LD_RPATH_OPT)\n\n\tcase \"x$LD_RPATH_OPT\" in\n\t(x-R*)\n\t\tAC_MSG_CHECKING(if we need a space after rpath option)\n\t\tcf_save_LIBS=\"$LIBS\"\n\t\tCF_ADD_LIBS(${LD_RPATH_OPT}$libdir)\n\t\tAC_TRY_LINK(, , cf_rpath_space=no, cf_rpath_space=yes)\n\t\tLIBS=\"$cf_save_LIBS\"\n\t\tAC_MSG_RESULT($cf_rpath_space)\n\t\ttest \"$cf_rpath_space\" = yes && LD_RPATH_OPT=\"$LD_RPATH_OPT \"\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LD_SEARCHPATH version: 2 updated: 2019/09/26 20:34:14\ndnl ----------------\ndnl Try to obtain the linker's search-path, for use in scripts.\ndnl\ndnl Ignore LD_LIBRARY_PATH, etc.\nAC_DEFUN([CF_LD_SEARCHPATH],[\nAC_CACHE_CHECK(for linker search path,cf_cv_ld_searchpath,[\n\nif test \"$cross_compiling\" != yes ; then\n\n# GNU binutils' ld does not involve permissions which may stop ldconfig.\ncf_pathlist=`ld --verbose 2>/dev/null | grep SEARCH_DIR | sed -e 's,SEARCH_DIR[[(\"=]][[(\"=]]*,,g' -e 's/\"[[)]];//gp' | sort -u`\n\n# The -NX options tell newer versions of Linux ldconfig to not attempt to\n# update the cache, which makes it run faster.\ntest -z \"$cf_pathlist\" && \\\n\tcf_pathlist=`ldconfig -NX -v 2>/dev/null | sed -e '/^[[ \t]]/d' -e 's/:$//' | sort -u`\n\ntest -z \"$cf_pathlist\" &&\n\tcf_pathlist=`ldconfig -v 2>/dev/null | sed -n -e '/^[[ \t]]/d' -e 's/:$//p' | sort -u`\n\n# This works with OpenBSD 6.5, which lists only filenames\ntest -z \"$cf_pathlist\" &&\n\tcf_pathlist=`ldconfig -v 2>/dev/null | sed -n -e 's,^Adding \\(.*\\)/.*[$],\\1,p' | sort -u`\n\nif test -z \"$cf_pathlist\"\nthen\n\t# dyld default path with MacOS\n\tif test -f /usr/bin/otool && test \"x`uname -s`\" = xDarwin\n\tthen\n\t\t# do this to bypass check\n\t\tcf_cv_ld_searchpath='$HOME/lib'\n\t\tcf_pathlist=\"/usr/local/lib /lib /usr/lib\"\n\tfi\nfi\n\nif test -z \"$cf_pathlist\"\nthen\n\t# Solaris is hardcoded\n\tif test -d /opt/SUNWspro/lib\n\tthen\n\t\tcf_pathlist=\"/opt/SUNWspro/lib /usr/ccs/lib /usr/lib\"\n\telif test -d /usr/ccs/lib\n\tthen\n\t\tcf_pathlist=\"/usr/ccs/lib /usr/lib\"\n\tfi\nfi\n\nfi\n\n# If nothing else, assume it is conventional\ntest -z \"$cf_pathlist\" && cf_pathlist=\"/usr/lib /lib\"\n\n# Finally, check that this is only directories\nfor cf_path in [$]0 $cf_pathlist\ndo\n\tif test -d \"$cf_path\"; then\n\t\ttest -n \"$cf_cv_ld_searchpath\" && cf_cv_ld_searchpath=\"${cf_cv_ld_searchpath} \"\n\t\tcf_cv_ld_searchpath=\"${cf_cv_ld_searchpath}${cf_path}\"\n\tfi\ndone\n\n# Ensure that it is nonempty\ntest -z \"$cf_cv_ld_searchpath\" && cf_cv_ld_searchpath=/usr/lib\n])\n\nLD_SEARCHPATH=`echo \"$cf_cv_ld_searchpath\"|sed -e 's/ /|/g'`\nAC_SUBST(LD_SEARCHPATH)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIBRARY_PATH version: 10 updated: 2015/04/15 19:08:48\ndnl ---------------\ndnl Construct a search-list of directories for a nonstandard library-file\ndnl\ndnl Parameters\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\nAC_DEFUN([CF_LIBRARY_PATH],\n[\n$1=\ncf_library_path_list=\"\"\nif test -n \"${LDFLAGS}${LIBS}\" ; then\n\tfor cf_library_path in $LDFLAGS $LIBS\n\tdo\n\t\tcase $cf_library_path in\n\t\t(-L*)\n\t\t\tcf_library_path=`echo \".$cf_library_path\" |sed -e 's/^...//' -e 's,/lib$,,'`\n\t\t\tCF_ADD_SUBDIR_PATH($1,$2,lib,$cf_library_path,NONE)\n\t\t\tcf_library_path_list=\"$cf_library_path_list [$]$1\"\n\t\t\t;;\n\t\tesac\n\tdone\nfi\n\nCF_SUBDIR_PATH($1,$2,lib)\n\n$1=\"$cf_library_path_list [$]$1\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIBTOOL_VERSION version: 1 updated: 2013/04/06 18:03:09\ndnl ------------------\nAC_DEFUN([CF_LIBTOOL_VERSION],[\nif test -n \"$LIBTOOL\" && test \"$LIBTOOL\" != none\nthen\n\tcf_cv_libtool_version=`$LIBTOOL --version 2>&1 | sed -e '/^$/d' |sed -e '2,$d' -e 's/([[^)]]*)//g' -e 's/^[[^1-9]]*//' -e 's/[[^0-9.]].*//'`\nelse\n\tcf_cv_libtool_version=\nfi\ntest -z \"$cf_cv_libtool_version\" && unset cf_cv_libtool_version\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_PREFIX version: 12 updated: 2015/10/17 19:03:33\ndnl -------------\ndnl Compute the library-prefix for the given host system\ndnl $1 = variable to set\ndefine([CF_LIB_PREFIX],\n[\n\tcase $cf_cv_system_name in\n\t(OS/2*|os2*)\n\t\tif test \"$DFT_LWR_MODEL\" = libtool; then\n\t\t\tLIB_PREFIX='lib'\n\t\telse\n\t\t\tLIB_PREFIX=''\n\t\tfi\n\t\t;;\n\t(*)\tLIB_PREFIX='lib'\n\t\t;;\n\tesac\nifelse($1,,,[$1=$LIB_PREFIX])\n\tAC_SUBST(LIB_PREFIX)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_RULES version: 88 updated: 2018/08/18 12:19:21\ndnl ------------\ndnl Append definitions and rules for the given models to the subdirectory\ndnl Makefiles, and the recursion rule for the top-level Makefile.  If the\ndnl subdirectory is a library-source directory, modify the Libs_To_Make list in\ndnl the corresponding makefile to list the models that we'll generate.\ndnl\ndnl For shared libraries, make a list of symbolic links to construct when\ndnl generating each library.  The convention used for Linux is the simplest\ndnl one:\ndnl\tlib<name>.so\t->\ndnl\tlib<name>.so.<major>\t->\ndnl\tlib<name>.so.<maj>.<minor>\ndnl\ndnl Note: Libs_To_Make is mixed case, since it is not a pure autoconf variable.\nAC_DEFUN([CF_LIB_RULES],\n[\ncf_prefix=$LIB_PREFIX\nAC_REQUIRE([CF_SUBST_NCURSES_VERSION])\n\ncase $cf_cv_shlib_version in\n(cygdll|msysdll|mingw)\n\tTINFO_NAME=$TINFO_ARG_SUFFIX\n\tTINFO_SUFFIX=.dll\n\t;;\nesac\n\nif test -n \"$TINFO_SUFFIX\" ; then\n\tcase $TINFO_SUFFIX in\n\t(tw*)\n\t\tTINFO_NAME=\"${TINFO_NAME}tw${EXTRA_SUFFIX}\"\n\t\tTINFO_SUFFIX=`echo $TINFO_SUFFIX | sed 's/^tw'$EXTRA_SUFFIX'//'`\n\t\t;;\n\t(t*)\n\t\tTINFO_NAME=\"${TINFO_NAME}t${EXTRA_SUFFIX}\"\n\t\tTINFO_SUFFIX=`echo $TINFO_SUFFIX | sed 's/^t'$EXTRA_SUFFIX'//'`\n\t\t;;\n\t(w*)\n\t\tTINFO_NAME=\"${TINFO_NAME}w${EXTRA_SUFFIX}\"\n\t\tTINFO_SUFFIX=`echo $TINFO_SUFFIX | sed 's/^w'$EXTRA_SUFFIX'//'`\n\t\t;;\n\tesac\nfi\n\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tif test ! -d $srcdir/$cf_dir ; then\n\t\tcontinue\n\telif test -f $srcdir/$cf_dir/modules; then\n\n\t\tSHARED_LIB=\n\t\tLibs_To_Make=\n\t\tcf_awk_program=\n\t\tif test -n \"${cf_cv_abi_version}\" && test \"x${cf_cv_abi_version}\" != \"x5\"\n\t\tthen\n\t\t\tcf_awk_program=\"$cf_awk_program\\\n/deprecated in ABI${cf_cv_abi_version}/ { next; }\\\n{ sub(\\\"NCURSES([[WT]]+)?\\\", \\\"&${cf_cv_abi_version}\\\"); }\\\n\"\n\t\tfi\n\n\t\tif test \"x$WILDCARD_SYMS\" = xno\n\t\tthen\n\t\t\tcf_awk_program=\"$cf_awk_program\\\n/[[ \t]]_\\\\*;/ { skip=1; next; }\\\n\"\n\t\tfi\n\n\t\tif test \"x$cf_awk_program\" != \"x\"\n\t\tthen\n\t\t\tcat >>$cf_dir/Makefile <<CF_EOF\n\n# Generated by CF_LIB_RULES\nresulting.map: $UNALTERED_SYMS\n\t$AWK 'BEGIN { skip = 1; last=\"\"; } \\\n$cf_awk_program \\\n{ if ( last != \"\" && ( skip == 0 || \\[$]\\[$]0 !~ /}/ ) ) { print last; }\\\n skip = 0; last = \\[$]\\[$]0; } \\\nEND { print last; }' < $UNALTERED_SYMS >\\[$]@\n\ndistclean::\n\trm -f resulting.map\nCF_EOF\n\t\tfi\n\n\t\tfor cf_item in $cf_LIST_MODELS\n\t\tdo\n\t\t\tCF_LIB_SUFFIX($cf_item,cf_suffix,cf_depsuf)\n\t\t\tcf_libname=$cf_dir\n\t\t\ttest \"$cf_dir\" = c++ && cf_libname=ncurses++\n\t\t\tif test $cf_item = shared ; then\n\t\t\t\tif test -n \"${LIB_SUFFIX}\"\n\t\t\t\tthen\n\t\t\t\t\tcf_shared_suffix=`echo \"$cf_suffix\" | sed 's/^'\"${USE_LIB_SUFFIX}\"'//'`\n\t\t\t\telse\n\t\t\t\t\tcf_shared_suffix=\"$cf_suffix\"\n\t\t\t\tfi\n\t\t\t\tif test \"$cf_cv_do_symlinks\" = yes ; then\n\t\t\t\t\tcf_version_name=\n\n\t\t\t\t\tcase \"$cf_cv_shlib_version\" in\n\t\t\t\t\t(rel)\n\t\t\t\t\t\tcf_version_name=REL_VERSION\n\t\t\t\t\t\t;;\n\t\t\t\t\t(abi)\n\t\t\t\t\t\tcf_version_name=ABI_VERSION\n\t\t\t\t\t\t;;\n\t\t\t\t\tesac\n\n\t\t\t\t\tif test -n \"$cf_version_name\"\n\t\t\t\t\tthen\n\t\t\t\t\t\tcase \"$cf_cv_system_name\" in\n\t\t\t\t\t\t(darwin*)\n\t\t\t\t\t\t\t# \"w\", etc?\n\t\t\t\t\t\t\tcf_suffix=\"${USE_LIB_SUFFIX}\"'.${'$cf_version_name'}'\"$cf_shared_suffix\"\n\t\t\t\t\t\t\t;;\n\t\t\t\t\t\t(*)\n\t\t\t\t\t\t\tcf_suffix=\"$cf_suffix\"'.${'$cf_version_name'}'\n\t\t\t\t\t\t\t;;\n\t\t\t\t\t\tesac\n\t\t\t\t\tfi\n\t\t\t\t\tif test -n \"${USE_LIB_SUFFIX}\"\n\t\t\t\t\tthen\n\t\t\t\t\t\tcf_shared_suffix=`echo \"$cf_suffix\" | sed 's/^'\"${USE_LIB_SUFFIX}\"'//'`\n\t\t\t\t\telse\n\t\t\t\t\t\tcf_shared_suffix=\"$cf_suffix\"\n\t\t\t\t\tfi\n\t\t\t\tfi\n\t\t\t\t# cygwin needs import library, and has unique naming convention\n\t\t\t\t# use autodetected ${cf_prefix} for import lib and static lib, but\n\t\t\t\t# use 'cyg' prefix for shared lib.\n\t\t\t\tcase $cf_cv_shlib_version in\n\t\t\t\t(cygdll)\n\t\t\t\t\tcf_cygsuf=`echo \"$cf_suffix\" | sed -e 's/\\.dll/\\${ABI_VERSION}.dll/'`\n\t\t\t\t\tcf_add_lib=\"../lib/cyg${cf_libname}${cf_cygsuf}\"\n\t\t\t\t\t;;\n\t\t\t\t(msysdll)\n\t\t\t\t\tcf_cygsuf=`echo \"$cf_suffix\" | sed -e 's/\\.dll/\\${ABI_VERSION}.dll/'`\n\t\t\t\t\tcf_add_lib=\"../lib/msys-${cf_libname}${cf_cygsuf}\"\n\t\t\t\t\t;;\n\t\t\t\t(mingw)\n\t\t\t\t\tcf_cygsuf=`echo \"$cf_suffix\" | sed -e 's/\\.dll/\\${ABI_VERSION}.dll/'`\n\t\t\t\t\tcf_add_lib=\"../lib/lib${cf_libname}${cf_cygsuf}\"\n\t\t\t\t\t;;\n\t\t\t\t(*)\n\t\t\t\t\tcf_add_lib=\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\t\tif test -n \"$cf_add_lib\"\n\t\t\t\tthen\n\t\t\t\t\tLibs_To_Make=\"$Libs_To_Make $cf_add_lib\"\n\t\t\t\t\tcontinue\n\t\t\t\tfi\n\t\t\tfi\n\t\t\tcf_add_lib=\"../lib/${cf_prefix}${cf_libname}${cf_suffix}\"\n\t\t\tLibs_To_Make=\"$Libs_To_Make $cf_add_lib\"\n\t\tdone\n\n\t\tif test $cf_dir = ncurses ; then\n\t\t\tcf_subsets=\"$LIB_SUBSETS\"\n\t\t\tcf_r_parts=\"$cf_subsets\"\n\t\t\tcf_liblist=\"$Libs_To_Make\"\n\n\t\t\twhile test -n \"$cf_r_parts\"\n\t\t\tdo\n\t\t\t\tcf_l_parts=`echo \"$cf_r_parts\" |sed -e 's/ .*$//'`\n\t\t\t\tcf_r_parts=`echo \"$cf_r_parts\" |sed -e 's/^[[^ ]]* //'`\n\t\t\t\tif test \"$cf_l_parts\" != \"$cf_r_parts\" ; then\n\t\t\t\t\tcf_add_lib=\n\t\t\t\t\tcase $cf_l_parts in\n\t\t\t\t\t(*termlib*)\n\t\t\t\t\t\tcf_add_lib=`echo $cf_liblist |sed -e s%${LIB_NAME}${USE_LIB_SUFFIX}%${TINFO_LIB_SUFFIX}%g`\n\t\t\t\t\t\t;;\n\t\t\t\t\t(*ticlib*)\n\t\t\t\t\t\tcf_add_lib=`echo $cf_liblist |sed -e s%${LIB_NAME}${USE_LIB_SUFFIX}%${TICS_LIB_SUFFIX}%g`\n\t\t\t\t\t\t;;\n\t\t\t\t\t(*)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t\t;;\n\t\t\t\t\tesac\n\t\t\t\t\tif test -n \"$cf_add_lib\"; then\n\t\t\t\t\t\tLibs_To_Make=\"$cf_add_lib $Libs_To_Make\"\n\t\t\t\t\tfi\n\t\t\t\telse\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tdone\n\t\telse\n\t\t\tcf_subsets=`echo \"$LIB_SUBSETS\" | sed -e 's/^termlib.* //'`\n\t\tfi\n\n\t\tif test $cf_dir = c++; then\n\t\t\tif test \"x$with_shared_cxx\" != xyes && test -n \"$cf_shared_suffix\"; then\n\t\t\t\tcf_list=\n\t\t\t\tfor cf_item in $Libs_To_Make\n\t\t\t\tdo\n\t\t\t\t\tcase $cf_item in\n\t\t\t\t\t(*.a)\n\t\t\t\t\t\t;;\n\t\t\t\t\t(*)\n\t\t\t\t\t\tcf_item=`echo \"$cf_item\" | sed -e \"s,\"$cf_shared_suffix\",.a,\"`\n\t\t\t\t\t\t;;\n\t\t\t\t\tesac\n\t\t\t\t\tfor cf_test in $cf_list\n\t\t\t\t\tdo\n\t\t\t\t\t\tif test \"$cf_test\" = \"$cf_item\"\n\t\t\t\t\t\tthen\n\t\t\t\t\t\t\tcf_LIST_MODELS=`echo \"$cf_LIST_MODELS\" | sed -e 's/normal//'`\n\t\t\t\t\t\t\tcf_item=\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tfi\n\t\t\t\t\tdone\n\t\t\t\t\ttest -n \"$cf_item\" && cf_list=\"$cf_list $cf_item\"\n\t\t\t\tdone\n\t\t\t\tLibs_To_Make=\"$cf_list\"\n\t\t\tfi\n\t\tfi\n\n\t\tsed -e \"s%@Libs_To_Make@%$Libs_To_Make%\" \\\n\t\t    -e \"s%@SHARED_LIB@%$SHARED_LIB%\" \\\n\t\t\t$cf_dir/Makefile >$cf_dir/Makefile.out\n\t\tmv $cf_dir/Makefile.out $cf_dir/Makefile\n\n\t\t$AWK -f $srcdir/mk-0th.awk \\\n\t\t\tlibname=\"${cf_dir}${LIB_SUFFIX}\" subsets=\"$LIB_SUBSETS\" ticlib=\"$TICS_LIB_SUFFIX\" termlib=\"$TINFO_LIB_SUFFIX\" \\\n\t\t\t$srcdir/$cf_dir/modules >>$cf_dir/Makefile\n\n\t\tfor cf_subset in $cf_subsets\n\t\tdo\n\t\t\tcf_subdirs=\n\t\t\tfor cf_item in $cf_LIST_MODELS\n\t\t\tdo\n\n\t\t\techo \"Appending rules for ${cf_item} model (${cf_dir}: ${cf_subset})\"\n\t\t\tCF_UPPER(cf_ITEM,$cf_item)\n\n\t\t\tCXX_MODEL=$cf_ITEM\n\t\t\tif test \"$CXX_MODEL\" = SHARED; then\n\t\t\t\tcase $cf_cv_shlib_version in\n\t\t\t\t(cygdll|msysdll|mingw)\n\t\t\t\t\ttest \"x$with_shared_cxx\" = xno && CF_VERBOSE(overriding CXX_MODEL to SHARED)\n\t\t\t\t\twith_shared_cxx=yes\n\t\t\t\t\t;;\n\t\t\t\t(*)\n\t\t\t\t\ttest \"x$with_shared_cxx\" = xno && CXX_MODEL=NORMAL\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\tfi\n\n\t\t\tCF_LIB_SUFFIX($cf_item,cf_suffix,cf_depsuf)\n\t\t\tCF_OBJ_SUBDIR($cf_item,cf_subdir)\n\n\t\t\t# Test for case where we build libtinfo with a different name.\n\t\t\tcf_libname=$cf_dir\n\t\t\tif test $cf_dir = ncurses ; then\n\t\t\t\tcase $cf_subset in\n\t\t\t\t(*base*)\n\t\t\t\t\tcf_libname=${cf_libname}$USE_LIB_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(*termlib*)\n\t\t\t\t\tcf_libname=$TINFO_LIB_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(ticlib*)\n\t\t\t\t\tcf_libname=$TICS_LIB_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\telif test $cf_dir = c++ ; then\n\t\t\t\tcf_libname=ncurses++$USE_LIB_SUFFIX\n\t\t\telse\n\t\t\t\tcf_libname=${cf_libname}$USE_LIB_SUFFIX\n\t\t\tfi\n\t\t\tif test -n \"${USE_ARG_SUFFIX}\" ; then\n\t\t\t\t# undo $USE_LIB_SUFFIX add-on in CF_LIB_SUFFIX\n\t\t\t\tcf_suffix=`echo $cf_suffix |sed -e \"s%^${USE_LIB_SUFFIX}%%\"`\n\t\t\tfi\n\n\t\t\t# These dependencies really are for development, not\n\t\t\t# builds, but they are useful in porting, too.\n\t\t\tcf_depend=\"../include/ncurses_cfg.h\"\n\t\t\tif test \"$srcdir\" = \".\"; then\n\t\t\t\tcf_reldir=\".\"\n\t\t\telse\n\t\t\t\tcf_reldir=\"\\${srcdir}\"\n\t\t\tfi\n\n\t\t\tif test -f $srcdir/$cf_dir/$cf_dir.priv.h; then\n\t\t\t\tcf_depend=\"$cf_depend $cf_reldir/$cf_dir.priv.h\"\n\t\t\telif test -f $srcdir/$cf_dir/curses.priv.h; then\n\t\t\t\tcf_depend=\"$cf_depend $cf_reldir/curses.priv.h\"\n\t\t\tfi\n\n \t\t\tcf_dir_suffix=\n \t\t\told_cf_suffix=\"$cf_suffix\"\n \t\t\tif test \"$cf_cv_shlib_version_infix\" = yes ; then\n\t\t\tif test -n \"$USE_LIB_SUFFIX\" ; then\n\t\t\t\tcase $USE_LIB_SUFFIX in\n\t\t\t\t(tw*)\n\t\t\t\t\tcf_libname=`echo $cf_libname | sed 's/tw'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo $cf_suffix | sed 's/^tw'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=tw$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(t*)\n\t\t\t\t\tcf_libname=`echo $cf_libname | sed 's/t'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo $cf_suffix | sed 's/^t'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=t$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(w*)\n\t\t\t\t\tcf_libname=`echo $cf_libname | sed 's/w'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo $cf_suffix | sed 's/^w'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=w$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(*)\n\t\t\t\t\tcf_libname=`echo $cf_libname | sed 's/'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo $cf_suffix | sed 's/^'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\tfi\n \t\t\tfi\n\n\t\t\t$AWK -f $srcdir/mk-1st.awk \\\n\t\t\t\tname=${cf_libname}${cf_dir_suffix} \\\n\t\t\t\ttraces=$LIB_TRACING \\\n\t\t\t\tMODEL=$cf_ITEM \\\n\t\t\t\tCXX_MODEL=$CXX_MODEL \\\n\t\t\t\tmodel=$cf_subdir \\\n\t\t\t\tprefix=$cf_prefix \\\n\t\t\t\tsuffix=$cf_suffix \\\n\t\t\t\tsubset=$cf_subset \\\n\t\t\t\tdriver=$cf_cv_term_driver \\\n\t\t\t\tSymLink=\"$LN_S\" \\\n\t\t\t\tTermlibRoot=$TINFO_NAME \\\n\t\t\t\tTermlibSuffix=$TINFO_SUFFIX \\\n\t\t\t\tShlibVer=$cf_cv_shlib_version \\\n\t\t\t\tShlibVerInfix=$cf_cv_shlib_version_infix \\\n\t\t\t\tReLink=${cf_cv_do_relink:-no} \\\n\t\t\t\tReRanlib=${cf_cv_do_reranlib:-yes} \\\n\t\t\t\tDoLinks=$cf_cv_do_symlinks \\\n\t\t\t\trmSoLocs=$cf_cv_rm_so_locs \\\n\t\t\t\tldconfig=\"$LDCONFIG\" \\\n\t\t\t\toverwrite=$WITH_OVERWRITE \\\n\t\t\t\tdepend=\"$cf_depend\" \\\n\t\t\t\thost=\"$host\" \\\n\t\t\t\tlibtool_version=\"$LIBTOOL_VERSION\" \\\n\t\t\t\t$srcdir/$cf_dir/modules >>$cf_dir/Makefile\n\n\t\t\tcf_suffix=\"$old_cf_suffix\"\n\n\t\t\tfor cf_subdir2 in $cf_subdirs lib\n\t\t\tdo\n\t\t\t\ttest $cf_subdir = $cf_subdir2 && break\n\t\t\tdone\n\t\t\ttest \"${cf_subset}.${cf_subdir2}\" != \"${cf_subset}.${cf_subdir}\" && \\\n\t\t\t$AWK -f $srcdir/mk-2nd.awk \\\n\t\t\t\tname=$cf_dir \\\n\t\t\t\ttraces=$LIB_TRACING \\\n\t\t\t\tMODEL=$cf_ITEM \\\n\t\t\t\tmodel=$cf_subdir \\\n\t\t\t\tsubset=$cf_subset \\\n\t\t\t\tsrcdir=$srcdir \\\n\t\t\t\techo=$WITH_ECHO \\\n\t\t\t\tcrenames=$cf_cv_prog_CC_c_o \\\n\t\t\t\tcxxrenames=$cf_cv_prog_CXX_c_o \\\n\t\t\t\t$srcdir/$cf_dir/modules >>$cf_dir/Makefile\n\t\t\tcf_subdirs=\"$cf_subdirs $cf_subdir\"\n\t\t\tdone\n\t\tdone\n\tfi\n\n\techo '\tcd '$cf_dir' && ${MAKE} ${TOP_MFLAGS} [$]@' >>Makefile\ndone\n\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tif test ! -d $srcdir/$cf_dir ; then\n\t\tcontinue\n\tfi\n\n\tif test -f $cf_dir/Makefile ; then\n\t\tcase \"$cf_dir\" in\n\t\t(Ada95)\n\t\t\techo 'libs \\' >> Makefile\n\t\t\techo 'install.libs \\' >> Makefile\n\t\t\techo 'uninstall.libs ::' >> Makefile\n\t\t\techo '\tcd '$cf_dir' && ${MAKE} ${TOP_MFLAGS} [$]@' >> Makefile\n\t\t\t;;\n\t\tesac\n\tfi\n\n\tif test -f $srcdir/$cf_dir/modules; then\n\t\techo >> Makefile\n\t\tif test -f $srcdir/$cf_dir/headers; then\ncat >> Makefile <<CF_EOF\ninstall.includes \\\\\nuninstall.includes \\\\\nCF_EOF\n\t\tfi\nif test \"$cf_dir\" != \"c++\" ; then\necho 'lint \\' >> Makefile\nfi\ncat >> Makefile <<CF_EOF\nlibs \\\\\nlintlib \\\\\ninstall.libs \\\\\nuninstall.libs \\\\\ninstall.$cf_dir \\\\\nuninstall.$cf_dir ::\n\tcd $cf_dir && \\${MAKE} \\${TOP_MFLAGS} \\[$]@\nCF_EOF\n\telif test -f $srcdir/$cf_dir/headers; then\ncat >> Makefile <<CF_EOF\n\nlibs \\\\\ninstall.libs \\\\\nuninstall.libs \\\\\ninstall.includes \\\\\nuninstall.includes ::\n\tcd $cf_dir && \\${MAKE} \\${TOP_MFLAGS} \\[$]@\nCF_EOF\nfi\ndone\n\nif test \"x$cf_with_db_install\" = xyes; then\ncat >> Makefile <<CF_EOF\n\ninstall.libs uninstall.libs \\\\\ninstall.data uninstall.data ::\n$MAKE_TERMINFO\tcd misc && \\${MAKE} \\${TOP_MFLAGS} \\[$]@\nCF_EOF\nelse\ncat >> Makefile <<CF_EOF\n\ninstall.libs uninstall.libs ::\n\tcd misc && \\${MAKE} \\${TOP_MFLAGS} \\[$]@\nCF_EOF\nfi\n\nif test \"x$cf_with_manpages\" = xyes; then\ncat >> Makefile <<CF_EOF\n\ninstall.man \\\\\nuninstall.man ::\n\tcd man && \\${MAKE} \\${TOP_MFLAGS} \\[$]@\nCF_EOF\nfi\n\ncat >> Makefile <<CF_EOF\n\ndistclean ::\n\trm -f config.cache config.log config.status Makefile include/ncurses_cfg.h\n\trm -f headers.sh headers.sed mk_shared_lib.sh\n\trm -f edit_man.* man_alias.*\n\trm -rf \\${DIRS_TO_MAKE}\nCF_EOF\n\n# Special case: tack's manpage lives in its own directory.\nif test \"x$cf_with_manpages\" = xyes; then\nif test \"x$cf_with_tack\" = \"xyes\"; then\ncat >> Makefile <<CF_EOF\n\ninstall.man \\\\\nuninstall.man ::\n\tcd tack && \\${MAKE} \\${TOP_MFLAGS} \\[$]@\nCF_EOF\nfi\nfi\n\ndnl If we're installing into a subdirectory of /usr/include, etc., we should\ndnl prepend the subdirectory's name to the \"#include\" paths.  It won't hurt\ndnl anything, and will make it more standardized.  It's awkward to decide this\ndnl at configuration because of quoting, so we'll simply make all headers\ndnl installed via a script that can do the right thing.\n\nrm -f headers.sed headers.sh\n\ndnl ( generating this script makes the makefiles a little tidier :-)\necho creating headers.sh\ncat >headers.sh <<CF_EOF\n#! $SHELL\n# This shell script is generated by the 'configure' script.  It is invoked in a\n# subdirectory of the build tree.  It generates a sed-script in the parent\n# directory that is used to adjust includes for header files that reside in a\n# subdirectory of /usr/include, etc.\nPRG=\"\"\nwhile test \\[$]# != 3\ndo\nPRG=\"\\$PRG \\[$]1\"; shift\ndone\nDST=\\[$]1\nREF=\\[$]2\nSRC=\\[$]3\nTMPSRC=\\${TMPDIR:-/tmp}/\\`basename \\$SRC\\`\\$\\$\nTMPSED=\\${TMPDIR:-/tmp}/headers.sed\\$\\$\necho installing \\$SRC in \\$DST\nCF_EOF\n\nif test $WITH_CURSES_H = yes; then\n\tcat >>headers.sh <<CF_EOF\ncase \\$DST in\n(/*/include/*)\n\tEND=\\`basename \\$DST\\`\n\tfor i in \\`cat \\$REF/../*/headers |fgrep -v \"#\"\\`\n\tdo\n\t\tNAME=\\`basename \\$i\\`\n\t\techo \"s/<\\$NAME>/<\\$END\\/\\$NAME>/\" >> \\$TMPSED\n\tdone\n\t;;\n(*)\n\techo \"\" >> \\$TMPSED\n\t;;\nesac\nCF_EOF\n\nelse\n\tcat >>headers.sh <<CF_EOF\ncase \\$DST in\n(/*/include/*)\n\tEND=\\`basename \\$DST\\`\n\tfor i in \\`cat \\$REF/../*/headers |fgrep -v \"#\"\\`\n\tdo\n\t\tNAME=\\`basename \\$i\\`\n\t\tif test \"\\$NAME\" = \"curses.h\"\n\t\tthen\n\t\t\techo \"s/<curses.h>/<ncurses.h>/\" >> \\$TMPSED\n\t\t\tNAME=ncurses.h\n\t\tfi\n\t\techo \"s/<\\$NAME>/<\\$END\\/\\$NAME>/\" >> \\$TMPSED\n\tdone\n\t;;\n(*)\n\techo \"s/<curses.h>/<ncurses.h>/\" >> \\$TMPSED\n\t;;\nesac\nCF_EOF\nfi\ncat >>headers.sh <<CF_EOF\nrm -f \\$TMPSRC\nsed -f \\$TMPSED \\$SRC > \\$TMPSRC\nNAME=\\`basename \\$SRC\\`\nCF_EOF\nif test $WITH_CURSES_H != yes; then\n\tcat >>headers.sh <<CF_EOF\ntest \"\\$NAME\" = \"curses.h\" && NAME=ncurses.h\nCF_EOF\nfi\ncat >>headers.sh <<CF_EOF\n# Just in case someone gzip'd manpages, remove the conflicting copy.\ntest -f \\$DST/\\$NAME.gz && rm -f \\$DST/\\$NAME.gz\n\neval \\$PRG \\$TMPSRC \\$DST/\\$NAME\nrm -f \\$TMPSRC \\$TMPSED\nCF_EOF\n\nchmod 0755 headers.sh\n\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tif test ! -d $srcdir/$cf_dir ; then\n\t\tcontinue\n\tfi\n\n\tif test -f $srcdir/$cf_dir/headers; then\n\t\t$AWK -f $srcdir/mk-hdr.awk \\\n\t\t\tsubset=\"$LIB_SUBSETS\" \\\n\t\t\tcompat=\"$WITH_CURSES_H\" \\\n\t\t\t$srcdir/$cf_dir/headers >>$cf_dir/Makefile\n\tfi\n\n\tif test -f $srcdir/$cf_dir/modules; then\n\t\tif test \"$cf_dir\" != \"c++\" ; then\n\t\t\tcat >>$cf_dir/Makefile <<\"CF_EOF\"\ndepend : ${AUTO_SRC}\n\tmakedepend -- ${CPPFLAGS} -- ${C_SRC}\n\n# DO NOT DELETE THIS LINE -- make depend depends on it.\nCF_EOF\n\t\tfi\n\tfi\ndone\nAC_SUBST(Libs_To_Make)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_SONAME version: 6 updated: 2017/01/21 11:06:25\ndnl -------------\ndnl Find the and soname for the given shared library.  Set the cache variable\ndnl cf_cv_$3_soname to this, unless it is not found.  Then set the cache\ndnl variable to \"unknown\".\ndnl\ndnl $1 = headers\ndnl $2 = code\ndnl $3 = library name\nAC_DEFUN([CF_LIB_SONAME],\n[\nAC_CACHE_CHECK(for soname of $3 library,cf_cv_$3_soname,[\n\ncf_cv_$3_soname=unknown\nif test \"$cross_compiling\" != yes ; then\ncat >conftest.$ac_ext <<CF_EOF\n$1\nint main(void)\n{\n$2\n\t${cf_cv_main_return:-return}(0);\n}\nCF_EOF\ncf_save_LIBS=\"$LIBS\"\n\tCF_ADD_LIB($3)\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\tif AC_TRY_EVAL(ac_link) ; then\n\t\t\tcf_cv_$3_soname=`ldd conftest$ac_exeext 2>/dev/null | sed -e 's,^.*/,,' -e 's, .*$,,' | fgrep lib$3.`\n\t\t\ttest -z \"$cf_cv_$3_soname\" && cf_cv_$3_soname=unknown\n\t\tfi\n\tfi\nrm -rf conftest*\nLIBS=\"$cf_save_LIBS\"\nfi\n])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_SUFFIX version: 25 updated: 2015/04/17 21:13:04\ndnl -------------\ndnl Compute the library file-suffix from the given model name\ndnl $1 = model name\ndnl $2 = variable to set (the nominal library suffix)\ndnl $3 = dependency variable to set (actual filename)\ndnl The variable $LIB_SUFFIX, if set, prepends the variable to set.\nAC_DEFUN([CF_LIB_SUFFIX],\n[\n\tcase X$1 in\n\t(Xlibtool)\n\t\t$2='.la'\n\t\t$3=[$]$2\n\t\t;;\n\t(Xdebug)\n\t\t$2='_g.a'\n\t\t$3=[$]$2\n\t\t;;\n\t(Xprofile)\n\t\t$2='_p.a'\n\t\t$3=[$]$2\n\t\t;;\n\t(Xshared)\n\t\tcase $cf_cv_system_name in\n\t\t(aix[[5-7]]*)\n\t\t\t$2='.so'\n\t\t\t$3=[$]$2\n\t\t\t;;\n\t\t(cygwin*|msys*|mingw*)\n\t\t\t$2='.dll'\n\t\t\t$3='.dll.a'\n\t\t\t;;\n\t\t(darwin*)\n\t\t\t$2='.dylib'\n\t\t\t$3=[$]$2\n\t\t\t;;\n\t\t(hpux*)\n\t\t\tcase $target in\n\t\t\t(ia64*)\n\t\t\t\t$2='.so'\n\t\t\t\t$3=[$]$2\n\t\t\t\t;;\n\t\t\t(*)\n\t\t\t\t$2='.sl'\n\t\t\t\t$3=[$]$2\n\t\t\t\t;;\n\t\t\tesac\n\t\t\t;;\n\t\t(*)\n\t\t\t$2='.so'\n\t\t\t$3=[$]$2\n\t\t\t;;\n\t\tesac\n\t\t;;\n\t(*)\n\t\t$2='.a'\n\t\t$3=[$]$2\n\t\t;;\n\tesac\n\tif test -n \"${LIB_SUFFIX}${EXTRA_SUFFIX}\"\n\tthen\n\t\t$2=\"${LIB_SUFFIX}${EXTRA_SUFFIX}[$]{$2}\"\n\t\t$3=\"${LIB_SUFFIX}${EXTRA_SUFFIX}[$]{$3}\"\n\tfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_TYPE version: 5 updated: 2015/04/17 21:13:04\ndnl -----------\ndnl Compute the string to append to -library from the given model name\ndnl $1 = model name\ndnl $2 = variable to set\ndnl The variable $LIB_SUFFIX, if set, prepends the variable to set.\nAC_DEFUN([CF_LIB_TYPE],\n[\n\tcase $1 in\n\t(libtool) $2=''   ;;\n\t(normal)  $2=''   ;;\n\t(debug)   $2='_g' ;;\n\t(profile) $2='_p' ;;\n\t(shared)  $2=''   ;;\n\tesac\n\ttest -n \"$LIB_SUFFIX\" && $2=\"${LIB_SUFFIX}[$]{$2}\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LINK_DATAONLY version: 13 updated: 2020/02/08 15:59:30\ndnl ----------------\ndnl Some systems have a non-ANSI linker that doesn't pull in modules that have\ndnl only data (i.e., no functions), for example NeXT.  On those systems we'll\ndnl have to provide wrappers for global tables to ensure they're linked\ndnl properly.\nAC_DEFUN([CF_LINK_DATAONLY],\n[\nAC_MSG_CHECKING([if data-only library module links])\nAC_CACHE_VAL(cf_cv_link_dataonly,[\n\trm -f conftest.a\n\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint\ttestdata[[3]] = { 123, 456, 789 };\nEOF\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\tmv conftest.o data.o && \\\n\t\t( $AR $ARFLAGS conftest.a data.o ) 2>&AC_FD_CC 1>/dev/null\n\tfi\n\trm -f conftest.$ac_ext data.o\n\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint\ttestfunc(void)\n{\n#if defined(NeXT)\n\t${cf_cv_main_return:-return}(1);\t/* I'm told this linker is broken */\n#else\n\textern int testdata[[3]];\n\treturn testdata[[0]] == 123\n\t   &&  testdata[[1]] == 456\n\t   &&  testdata[[2]] == 789;\n#endif\n}\nEOF\n\tif AC_TRY_EVAL(ac_compile); then\n\t\tmv conftest.o func.o && \\\n\t\t( $AR $ARFLAGS conftest.a func.o ) 2>&AC_FD_CC 1>/dev/null\n\tfi\n\trm -f conftest.$ac_ext func.o\n\t( eval $RANLIB conftest.a ) 2>&AC_FD_CC >/dev/null\n\tcf_saveLIBS=\"$LIBS\"\n\tLIBS=\"conftest.a $LIBS\"\n\tAC_TRY_RUN([\n\tint main(void)\n\t{\n\t\textern int testfunc();\n\t\t${cf_cv_main_return:-return} (!testfunc());\n\t}\n\t],\n\t[cf_cv_link_dataonly=yes],\n\t[cf_cv_link_dataonly=no],\n\t[cf_cv_link_dataonly=unknown])\n\tLIBS=\"$cf_saveLIBS\"\n\t])\nAC_MSG_RESULT($cf_cv_link_dataonly)\n\nif test \"$cf_cv_link_dataonly\" = no ; then\n\tAC_DEFINE(BROKEN_LINKER,1,[if data-only library module does not link])\n\tBROKEN_LINKER=1\nfi\nAC_SUBST(BROKEN_LINKER)\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LINK_FUNCS version: 9 updated: 2017/01/21 11:11:02\ndnl -------------\ndnl Most Unix systems have both link and symlink, a few don't have symlink.\ndnl A few non-Unix systems implement symlink, but not link.\ndnl A few non-systems implement neither (or have nonfunctional versions).\nAC_DEFUN([CF_LINK_FUNCS],\n[\nAC_CHECK_HEADERS( \\\nunistd.h \\\n)\nAC_CHECK_FUNCS( \\\n\tremove \\\n\tunlink )\n\nif test \"$cross_compiling\" = yes ; then\n\tAC_CHECK_FUNCS( \\\n\t\tlink \\\n\t\tsymlink )\nelse\n\tAC_CACHE_CHECK(if link/symlink functions work,cf_cv_link_funcs,[\n\t\tcf_cv_link_funcs=\n\t\tfor cf_func in link symlink ; do\n\t\t\tAC_TRY_RUN([\n#include <sys/types.h>\n#include <sys/stat.h>\n#ifdef HAVE_UNISTD_H\n#include <unistd.h>\n#endif\nint main(void)\n{\n\tint fail = 0;\n\tchar *src = \"config.log\";\n\tchar *dst = \"conftest.chk\";\n\tstruct stat src_sb;\n\tstruct stat dst_sb;\n\n\tstat(src, &src_sb);\n\tfail = ($cf_func(\"config.log\", \"conftest.chk\") < 0)\n\t    || (stat(dst, &dst_sb) < 0)\n\t    || (dst_sb.st_mtime != src_sb.st_mtime);\n#ifdef HAVE_UNLINK\n\tunlink(dst);\n#else\n\tremove(dst);\n#endif\n\t${cf_cv_main_return:-return} (fail);\n}\n\t\t\t],[\n\t\t\tcf_cv_link_funcs=\"$cf_cv_link_funcs $cf_func\"\n\t\t\teval 'ac_cv_func_'$cf_func'=yes'],[\n\t\t\teval 'ac_cv_func_'$cf_func'=no'],[\n\t\t\teval 'ac_cv_func_'$cf_func'=error'])\n\t\tdone\n\t\ttest -z \"$cf_cv_link_funcs\" && cf_cv_link_funcs=no\n\t])\n\ttest \"$ac_cv_func_link\"    = yes && AC_DEFINE(HAVE_LINK,1,[Define to 1 if we have link() function])\n\ttest \"$ac_cv_func_symlink\" = yes && AC_DEFINE(HAVE_SYMLINK,1,[Define to 1 if we have symlink() function])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAKEFLAGS version: 18 updated: 2018/02/21 21:26:03\ndnl ------------\ndnl Some 'make' programs support ${MAKEFLAGS}, some ${MFLAGS}, to pass 'make'\ndnl options to lower-levels.  It's very useful for \"make -n\" -- if we have it.\ndnl (GNU 'make' does both, something POSIX 'make', which happens to make the\ndnl ${MAKEFLAGS} variable incompatible because it adds the assignments :-)\nAC_DEFUN([CF_MAKEFLAGS],\n[\nAC_CACHE_CHECK(for makeflags variable, cf_cv_makeflags,[\n\tcf_cv_makeflags=''\n\tfor cf_option in '-${MAKEFLAGS}' '${MFLAGS}'\n\tdo\n\t\tcat >cf_makeflags.tmp <<CF_EOF\nSHELL = $SHELL\nall :\n\t@ echo '.$cf_option'\nCF_EOF\n\t\tcf_result=`${MAKE:-make} -k -f cf_makeflags.tmp 2>/dev/null | fgrep -v \"ing directory\" | sed -e 's,[[ \t]]*$,,'`\n\t\tcase \"$cf_result\" in\n\t\t(.*k|.*kw)\n\t\t\tcf_result=`${MAKE:-make} -k -f cf_makeflags.tmp CC=cc 2>/dev/null`\n\t\t\tcase \"$cf_result\" in\n\t\t\t(.*CC=*)\tcf_cv_makeflags=\n\t\t\t\t;;\n\t\t\t(*)\tcf_cv_makeflags=$cf_option\n\t\t\t\t;;\n\t\t\tesac\n\t\t\tbreak\n\t\t\t;;\n\t\t(.-)\n\t\t\t;;\n\t\t(*)\n\t\t\tCF_MSG_LOG(given option \\\"$cf_option\\\", no match \\\"$cf_result\\\")\n\t\t\t;;\n\t\tesac\n\tdone\n\trm -f cf_makeflags.tmp\n])\n\nAC_SUBST(cf_cv_makeflags)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAKE_TAGS version: 6 updated: 2010/10/23 15:52:32\ndnl ------------\ndnl Generate tags/TAGS targets for makefiles.  Do not generate TAGS if we have\ndnl a monocase filesystem.\nAC_DEFUN([CF_MAKE_TAGS],[\nAC_REQUIRE([CF_MIXEDCASE_FILENAMES])\n\nAC_CHECK_PROGS(CTAGS, exctags ctags)\nAC_CHECK_PROGS(ETAGS, exetags etags)\n\nAC_CHECK_PROG(MAKE_LOWER_TAGS, ${CTAGS:-ctags}, yes, no)\n\nif test \"$cf_cv_mixedcase\" = yes ; then\n\tAC_CHECK_PROG(MAKE_UPPER_TAGS, ${ETAGS:-etags}, yes, no)\nelse\n\tMAKE_UPPER_TAGS=no\nfi\n\nif test \"$MAKE_UPPER_TAGS\" = yes ; then\n\tMAKE_UPPER_TAGS=\nelse\n\tMAKE_UPPER_TAGS=\"#\"\nfi\n\nif test \"$MAKE_LOWER_TAGS\" = yes ; then\n\tMAKE_LOWER_TAGS=\nelse\n\tMAKE_LOWER_TAGS=\"#\"\nfi\n\nAC_SUBST(CTAGS)\nAC_SUBST(ETAGS)\n\nAC_SUBST(MAKE_UPPER_TAGS)\nAC_SUBST(MAKE_LOWER_TAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_FORMAT version: 11 updated: 2015/04/18 08:56:57\ndnl -----------------\ndnl Option to allow user to override automatic configuration of manpage format.\ndnl There are several special cases:\ndnl\ndnl\tgzip - man checks for, can display gzip'd files\ndnl\tcompress - man checks for, can display compressed files\ndnl\tBSDI - files in the cat-directories are suffixed \".0\"\ndnl\tformatted - installer should format (put files in cat-directory)\ndnl\tcatonly - installer should only format, e.g., for a turnkey system.\ndnl\ndnl There are other configurations which this macro does not test, e.g., HPUX's\ndnl compressed manpages (but uncompressed manpages are fine, and HPUX's naming\ndnl convention would not match our use).\nAC_DEFUN([CF_MANPAGE_FORMAT],\n[\nAC_REQUIRE([CF_PATHSEP])\nAC_MSG_CHECKING(format of man-pages)\n\nAC_ARG_WITH(manpage-format,\n\t[  --with-manpage-format   specify manpage-format: gzip/compress/BSDI/normal and\n                          optionally formatted/catonly, e.g., gzip,formatted],\n\t[MANPAGE_FORMAT=$withval],\n\t[MANPAGE_FORMAT=unknown])\n\ntest -z \"$MANPAGE_FORMAT\" && MANPAGE_FORMAT=unknown\nMANPAGE_FORMAT=`echo \"$MANPAGE_FORMAT\" | sed -e 's/,/ /g'`\n\ncf_unknown=\n\ncase $MANPAGE_FORMAT in\n(unknown)\n\tif test -z \"$MANPATH\" ; then\n\t\tMANPATH=\"/usr/man:/usr/share/man\"\n\tfi\n\n\t# look for the 'date' man-page (it's most likely to be installed!)\n\tMANPAGE_FORMAT=\n\tcf_preform=no\n\tcf_catonly=yes\n\tcf_example=date\n\n\tIFS=\"${IFS:- \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n\tfor cf_dir in $MANPATH; do\n\t\ttest -z \"$cf_dir\" && cf_dir=/usr/man\n\t\tfor cf_name in $cf_dir/man*/$cf_example.[[01]]* $cf_dir/cat*/$cf_example.[[01]]* $cf_dir/man*/$cf_example $cf_dir/cat*/$cf_example\n\t\tdo\n\t\t\tcf_test=`echo $cf_name | sed -e 's/*//'`\n\t\t\tif test \"x$cf_test\" = \"x$cf_name\" ; then\n\n\t\t\t\tcase \"$cf_name\" in\n\t\t\t\t(*.gz) MANPAGE_FORMAT=\"$MANPAGE_FORMAT gzip\";;\n\t\t\t\t(*.Z)  MANPAGE_FORMAT=\"$MANPAGE_FORMAT compress\";;\n\t\t\t\t(*.0)  MANPAGE_FORMAT=\"$MANPAGE_FORMAT BSDI\";;\n\t\t\t\t(*)    MANPAGE_FORMAT=\"$MANPAGE_FORMAT normal\";;\n\t\t\t\tesac\n\n\t\t\t\tcase \"$cf_name\" in\n\t\t\t\t($cf_dir/man*)\n\t\t\t\t\tcf_catonly=no\n\t\t\t\t\t;;\n\t\t\t\t($cf_dir/cat*)\n\t\t\t\t\tcf_preform=yes\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\t\tbreak\n\t\t\tfi\n\n\t\t\t# if we found a match in either man* or cat*, stop looking\n\t\t\tif test -n \"$MANPAGE_FORMAT\" ; then\n\t\t\t\tcf_found=no\n\t\t\t\ttest \"$cf_preform\" = yes && MANPAGE_FORMAT=\"$MANPAGE_FORMAT formatted\"\n\t\t\t\ttest \"$cf_catonly\" = yes && MANPAGE_FORMAT=\"$MANPAGE_FORMAT catonly\"\n\t\t\t\tcase \"$cf_name\" in\n\t\t\t\t($cf_dir/cat*)\n\t\t\t\t\tcf_found=yes\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\t\ttest $cf_found=yes && break\n\t\t\tfi\n\t\tdone\n\t\t# only check the first directory in $MANPATH where we find manpages\n\t\tif test -n \"$MANPAGE_FORMAT\" ; then\n\t\t\tbreak\n\t\tfi\n\tdone\n\t# if we did not find the example, just assume it is normal\n\ttest -z \"$MANPAGE_FORMAT\" && MANPAGE_FORMAT=normal\n\tIFS=\"$ac_save_ifs\"\n\t;;\n(*)\n\tfor cf_option in $MANPAGE_FORMAT; do\n\tcase $cf_option in\n\t(gzip|compress|BSDI|normal|formatted|catonly)\n\t\t;;\n\t(*)\n\t\tcf_unknown=\"$cf_unknown $cf_option\"\n\t\t;;\n\tesac\n\tdone\n\t;;\nesac\n\nAC_MSG_RESULT($MANPAGE_FORMAT)\nif test -n \"$cf_unknown\" ; then\n\tAC_MSG_WARN(Unexpected manpage-format $cf_unknown)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_RENAMES version: 10 updated: 2015/08/05 20:44:28\ndnl ------------------\ndnl The Debian people have their own naming convention for manpages.  This\ndnl option lets us override the name of the file containing renaming, or\ndnl disable it altogether.\nAC_DEFUN([CF_MANPAGE_RENAMES],\n[\nAC_MSG_CHECKING(for manpage renaming)\n\nAC_ARG_WITH(manpage-renames,\n\t[  --with-manpage-renames  specify manpage-renaming],\n\t[MANPAGE_RENAMES=$withval],\n\t[MANPAGE_RENAMES=yes])\n\ncase \".$MANPAGE_RENAMES\" in\n(.no)\n\t;;\n(.|.yes)\n\t# Debian 'man' program?\n\tif test -f /etc/debian_version ; then\n\t\tMANPAGE_RENAMES=`cd $srcdir && pwd`/man/man_db.renames\n\telse\n\t\tMANPAGE_RENAMES=no\n\tfi\n\t;;\nesac\n\nif test \"$MANPAGE_RENAMES\" != no ; then\n\tif test -f $srcdir/man/$MANPAGE_RENAMES ; then\n\t\tMANPAGE_RENAMES=`cd $srcdir/man && pwd`/$MANPAGE_RENAMES\n\telif test ! -f $MANPAGE_RENAMES ; then\n\t\tAC_MSG_ERROR(not a filename: $MANPAGE_RENAMES)\n\tfi\n\n\ttest ! -d man && mkdir man\n\n\t# Construct a sed-script to perform renaming within man-pages\n\tif test -n \"$MANPAGE_RENAMES\" ; then\n\t\ttest ! -d man && mkdir man\n\t\t$SHELL $srcdir/man/make_sed.sh $MANPAGE_RENAMES >./edit_man.sed\n\tfi\nfi\n\nAC_MSG_RESULT($MANPAGE_RENAMES)\nAC_SUBST(MANPAGE_RENAMES)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_SYMLINKS version: 6 updated: 2015/04/17 21:13:04\ndnl -------------------\ndnl Some people expect each tool to make all aliases for manpages in the\ndnl man-directory.  This accommodates the older, less-capable implementations\ndnl of 'man', and is optional.\nAC_DEFUN([CF_MANPAGE_SYMLINKS],\n[\nAC_MSG_CHECKING(if manpage aliases will be installed)\n\nAC_ARG_WITH(manpage-aliases,\n\t[  --with-manpage-aliases  specify manpage-aliases using .so],\n\t[MANPAGE_ALIASES=$withval],\n\t[MANPAGE_ALIASES=yes])\n\nAC_MSG_RESULT($MANPAGE_ALIASES)\n\ncase \"x$LN_S\" in\n(xln*)\n\tcf_use_symlinks=yes\n\t;;\n(*)\n\tcf_use_symlinks=no\n\t;;\nesac\n\nMANPAGE_SYMLINKS=no\nif test \"$MANPAGE_ALIASES\" = yes ; then\nAC_MSG_CHECKING(if manpage symlinks should be used)\n\nAC_ARG_WITH(manpage-symlinks,\n\t[  --with-manpage-symlinks specify manpage-aliases using symlinks],\n\t[MANPAGE_SYMLINKS=$withval],\n\t[MANPAGE_SYMLINKS=$cf_use_symlinks])\n\nif test \"$$cf_use_symlinks\" = no; then\nif test \"$MANPAGE_SYMLINKS\" = yes ; then\n\tAC_MSG_WARN(cannot make symlinks, will use .so files)\n\tMANPAGE_SYMLINKS=no\nfi\nfi\n\nAC_MSG_RESULT($MANPAGE_SYMLINKS)\nfi\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_TBL version: 3 updated: 2002/01/19 22:51:32\ndnl --------------\ndnl This option causes manpages to be run through tbl(1) to generate tables\ndnl correctly.\nAC_DEFUN([CF_MANPAGE_TBL],\n[\nAC_MSG_CHECKING(for manpage tbl)\n\nAC_ARG_WITH(manpage-tbl,\n\t[  --with-manpage-tbl      specify manpage processing with tbl],\n\t[MANPAGE_TBL=$withval],\n\t[MANPAGE_TBL=no])\n\nAC_MSG_RESULT($MANPAGE_TBL)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAN_PAGES version: 47 updated: 2017/08/12 07:58:51\ndnl ------------\ndnl Try to determine if the man-pages on the system are compressed, and if\ndnl so, what format is used.  Use this information to construct a script that\ndnl will install man-pages.\nAC_DEFUN([CF_MAN_PAGES],\n[\nCF_HELP_MESSAGE(Options to Specify How Manpages are Installed:)\nCF_MANPAGE_FORMAT\nCF_MANPAGE_RENAMES\nCF_MANPAGE_SYMLINKS\nCF_MANPAGE_TBL\n\nif test \"$prefix\" = \"NONE\" ; then\n\tcf_prefix=\"$ac_default_prefix\"\nelse\n\tcf_prefix=\"$prefix\"\nfi\n\ncase \"$MANPAGE_FORMAT\" in\n(*catonly*)\n\tcf_format=yes\n\tcf_inboth=no\n\t;;\n(*formatted*)\n\tcf_format=yes\n\tcf_inboth=yes\n\t;;\n(*)\n\tcf_format=no\n\tcf_inboth=no\n\t;;\nesac\n\ntest ! -d man && mkdir man\n\ncf_so_strip=\ncf_compress=\ncase \"$MANPAGE_FORMAT\" in\n(*compress*)\n\tcf_so_strip=\"Z\"\n\tcf_compress=compress\n\t;;\n(*gzip*)\n\tcf_so_strip=\"gz\"\n\tcf_compress=gzip\n\t;;\nesac\n\ncf_edit_man=./edit_man.sh\ncf_man_alias=`pwd`/man_alias.sed\n\ncat >$cf_edit_man <<CF_EOF\n#! $SHELL\n# this script is generated by the configure-script CF_MAN_PAGES macro.\n\nprefix=\"$cf_prefix\"\ndatarootdir=\"$datarootdir\"\ndatadir=\"$datadir\"\n\nNCURSES_MAJOR=\"$NCURSES_MAJOR\"\nNCURSES_MINOR=\"$NCURSES_MINOR\"\nNCURSES_PATCH=\"$NCURSES_PATCH\"\n\nNCURSES_OSPEED=\"$NCURSES_OSPEED\"\nTERMINFO=\"$TERMINFO\"\n\nINSTALL=\"$INSTALL\"\nINSTALL_DATA=\"$INSTALL_DATA\"\n\ntransform=\"$program_transform_name\"\n\nTMP=\\${TMPDIR:=/tmp}/man\\$\\$\ntrap \"rm -f \\$TMP\" 0 1 2 3 15\n\nform=\\[$]1\nshift || exit 1\n\nverb=\\[$]1\nshift || exit 1\n\nmandir=\\[$]1\nshift || exit 1\n\nsrcdir=\\[$]1\ntop_srcdir=\\[$]srcdir/..\nshift || exit 1\n\nif test \"\\$form\" = normal ; then\n\tif test \"$cf_format\" = yes ; then\n\tif test \"$cf_inboth\" = no ; then\n\t\t$SHELL \\[$]0 format \\$verb \\$mandir \\$srcdir \\[$]*\n\t\texit $?\n\tfi\n\tfi\n\tcf_subdir=\\$mandir/man\n\tcf_tables=$MANPAGE_TBL\nelse\n\tcf_subdir=\\$mandir/cat\n\tcf_tables=yes\nfi\n\n# process the list of source-files\nfor i in \\[$]* ; do\ncase \\$i in\n(*.orig|*.rej) ;;\n(*.[[0-9]]*)\n\tsection=\\`expr \"\\$i\" : '.*\\\\.\\\\([[0-9]]\\\\)[[xm]]*'\\`;\n\tif test \\$verb = installing ; then\n\tif test ! -d \\$cf_subdir\\${section} ; then\n\t\tmkdir -p \\$cf_subdir\\$section\n\tfi\n\tfi\n\n\t# replace variables in man page\n\tif test ! -f $cf_man_alias ; then\ncat >>$cf_man_alias <<-CF_EOF2\n\t\ts,@DATADIR@,\\$datadir,g\n\t\ts,@TERMINFO@,\\${TERMINFO:=\"no default value\"},g\n\t\ts,@TERMINFO_DIRS@,\\${TERMINFO_DIRS:=\"no default value\"},g\n\t\ts,@NCURSES_MAJOR@,\\${NCURSES_MAJOR:=\"no default value\"},g\n\t\ts,@NCURSES_MINOR@,\\${NCURSES_MINOR:=\"no default value\"},g\n\t\ts,@NCURSES_PATCH@,\\${NCURSES_PATCH:=\"no default value\"},g\n\t\ts,@NCURSES_OSPEED@,\\${NCURSES_OSPEED:=\"no default value\"},g\nCF_EOF\n\tifelse($1,,,[\n\tfor cf_name in $1\n\tdo\n\t\tcf_NAME=`echo \"$cf_name\" | sed y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%`\n\t\tcf_name=`echo $cf_name|sed \"$program_transform_name\"`\ncat >>$cf_edit_man <<-CF_EOF\n\t\ts,@$cf_NAME@,$cf_name,g\nCF_EOF\n\tdone\n\t])\ncat >>$cf_edit_man <<CF_EOF\nCF_EOF2\n\t\techo \"...made $cf_man_alias\"\n\tfi\n\n\taliases=\n\tcf_source=\\`basename \\$i\\`\n\tinalias=\\$cf_source\n\ttest ! -f \\$inalias && inalias=\"\\$srcdir/\\$inalias\"\n\tif test ! -f \\$inalias ; then\n\t\techo .. skipped \\$cf_source\n\t\tcontinue\n\tfi\nCF_EOF\n\nif test \"$MANPAGE_ALIASES\" != no ; then\ncat >>$cf_edit_man <<CF_EOF\n\tnCurses=ignore.3x\n\ttest $with_curses_h = yes && nCurses=ncurses.3x\n\taliases=\\`sed -f \\$top_srcdir/man/manlinks.sed \\$inalias |sed -f $cf_man_alias | sort -u; test \\$inalias = \\$nCurses && echo curses\\`\nCF_EOF\nfi\n\nif test \"$MANPAGE_RENAMES\" = no ; then\ncat >>$cf_edit_man <<CF_EOF\n\t# perform program transformations for section 1 man pages\n\tif test \\$section = 1 ; then\n\t\tcf_target=\\$cf_subdir\\${section}/\\`echo \\$cf_source|sed \"\\${transform}\"\\`\n\telse\n\t\tcf_target=\\$cf_subdir\\${section}/\\$cf_source\n\tfi\nCF_EOF\nelse\ncat >>$cf_edit_man <<CF_EOF\n\tcf_target=\\`grep \"^\\$cf_source\" $MANPAGE_RENAMES | $AWK '{print \\[$]2}'\\`\n\tif test -z \"\\$cf_target\" ; then\n\t\techo '? missing rename for '\\$cf_source\n\t\tcf_target=\"\\$cf_source\"\n\tfi\n\tcf_target=\"\\$cf_subdir\\${section}/\\${cf_target}\"\n\nCF_EOF\nfi\n\ncat >>$cf_edit_man <<CF_EOF\n\tsed\t-f $cf_man_alias \\\\\nCF_EOF\n\nif test -f $MANPAGE_RENAMES ; then\ncat >>$cf_edit_man <<CF_EOF\n\t\t< \\$i | sed -f `pwd`/edit_man.sed >\\$TMP\nCF_EOF\nelse\ncat >>$cf_edit_man <<CF_EOF\n\t\t< \\$i >\\$TMP\nCF_EOF\nfi\n\ncat >>$cf_edit_man <<CF_EOF\nif test \\$cf_tables = yes ; then\n\ttbl \\$TMP >\\$TMP.out\n\tmv \\$TMP.out \\$TMP\nfi\nCF_EOF\n\nif test $with_overwrite != yes ; then\ncat >>$cf_edit_man <<CF_EOF\n\tsed -e \"/\\#[    ]*include/s,<curses.h,<ncurses$LIB_SUFFIX/curses.h,\" < \\$TMP >\\$TMP.out\n\tmv \\$TMP.out \\$TMP\nCF_EOF\nfi\n\nif test $with_curses_h != yes ; then\ncat >>$cf_edit_man <<CF_EOF\n\tsed -e \"/\\#[    ]*include/s,curses.h,ncurses.h,\" < \\$TMP >\\$TMP.out\n\tmv \\$TMP.out \\$TMP\nCF_EOF\nfi\n\ncat >>$cf_edit_man <<CF_EOF\n\tif test \\$form = format ; then\n\t\tnroff -man \\$TMP >\\$TMP.out\n\t\tmv \\$TMP.out \\$TMP\n\tfi\nCF_EOF\n\nif test -n \"$cf_compress\" ; then\ncat >>$cf_edit_man <<CF_EOF\n\tif test \\$verb = installing ; then\n\tif ( $cf_compress -f \\$TMP )\n\tthen\n\t\tmv \\$TMP.$cf_so_strip \\$TMP\n\tfi\n\tfi\n\tcf_target=\"\\$cf_target.$cf_so_strip\"\nCF_EOF\nfi\n\ncase \"$MANPAGE_FORMAT\" in\n(*BSDI*)\ncat >>$cf_edit_man <<CF_EOF\n\tif test \\$form = format ; then\n\t\t# BSDI installs only .0 suffixes in the cat directories\n\t\tcf_target=\"\\`echo \\$cf_target|sed -e 's/\\.[[1-9]]\\+[[a-z]]*/.0/'\\`\"\n\tfi\nCF_EOF\n  ;;\nesac\n\ncat >>$cf_edit_man <<CF_EOF\n\tsuffix=\\`basename \\$cf_target | sed -e 's%^[[^.]]*%%'\\`\n\tif test \\$verb = installing ; then\n\t\techo \\$verb \\$cf_target\n\t\t\\$INSTALL_DATA \\$TMP \\$cf_target\n\t\ttest -d \\$cf_subdir\\${section} &&\n\t\ttest -n \"\\$aliases\" && (\n\t\t\tcd \\$cf_subdir\\${section} && (\n\t\t\t\tcf_source=\\`echo \\$cf_target |sed -e 's%^.*/\\([[^/]][[^/]]*/[[^/]][[^/]]*$\\)%\\1%'\\`\n\t\t\t\ttest -n \"$cf_so_strip\" && cf_source=\\`echo \\$cf_source |sed -e 's%\\.$cf_so_strip\\$%%'\\`\n\t\t\t\tcf_target=\\`basename \\$cf_target\\`\n\t\t\t\tfor cf_alias in \\$aliases\n\t\t\t\tdo\n\t\t\t\t\tif test \\$section = 1 ; then\n\t\t\t\t\t\tcf_alias=\\`echo \\$cf_alias|sed \"\\${transform}\"\\`\n\t\t\t\t\tfi\n\n\t\t\t\t\tif test \"$MANPAGE_SYMLINKS\" = yes ; then\n\t\t\t\t\t\tif test -f \\$cf_alias\\${suffix} ; then\n\t\t\t\t\t\t\tif ( cmp -s \\$cf_target \\$cf_alias\\${suffix} )\n\t\t\t\t\t\t\tthen\n\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\tfi\n\t\t\t\t\t\tfi\n\t\t\t\t\t\techo .. \\$verb alias \\$cf_alias\\${suffix}\nCF_EOF\ncase \"x$LN_S\" in\n(*-f)\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\t$LN_S \\$cf_target \\$cf_alias\\${suffix}\nCF_EOF\n\t;;\n(*)\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\trm -f \\$cf_alias\\${suffix}\n\t\t\t\t\t\t$LN_S \\$cf_target \\$cf_alias\\${suffix}\nCF_EOF\n\t;;\nesac\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\telif test \"\\$cf_target\" != \"\\$cf_alias\\${suffix}\" ; then\n\t\t\t\t\t\techo \".so \\$cf_source\" >\\$TMP\nCF_EOF\nif test -n \"$cf_compress\" ; then\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\tif test -n \"$cf_so_strip\" ; then\n\t\t\t\t\t\t\t$cf_compress -f \\$TMP\n\t\t\t\t\t\t\tmv \\$TMP.$cf_so_strip \\$TMP\n\t\t\t\t\t\tfi\nCF_EOF\nfi\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\techo .. \\$verb alias \\$cf_alias\\${suffix}\n\t\t\t\t\t\trm -f \\$cf_alias\\${suffix}\n\t\t\t\t\t\t\\$INSTALL_DATA \\$TMP \\$cf_alias\\${suffix}\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\t)\n\t\t)\n\telif test \\$verb = removing ; then\n\t\ttest -f \\$cf_target && (\n\t\t\techo \\$verb \\$cf_target\n\t\t\trm -f \\$cf_target\n\t\t)\n\t\ttest -d \\$cf_subdir\\${section} &&\n\t\ttest -n \"\\$aliases\" && (\n\t\t\tcd \\$cf_subdir\\${section} && (\n\t\t\t\tfor cf_alias in \\$aliases\n\t\t\t\tdo\n\t\t\t\t\tif test \\$section = 1 ; then\n\t\t\t\t\t\tcf_alias=\\`echo \\$cf_alias|sed \"\\${transform}\"\\`\n\t\t\t\t\tfi\n\n\t\t\t\t\techo .. \\$verb alias \\$cf_alias\\${suffix}\n\t\t\t\t\trm -f \\$cf_alias\\${suffix}\n\t\t\t\tdone\n\t\t\t)\n\t\t)\n\telse\n#\t\techo \".hy 0\"\n\t\tcat \\$TMP\n\tfi\n\t;;\nesac\ndone\n\nif test $cf_inboth = yes ; then\nif test \\$form != format ; then\n\t$SHELL \\[$]0 format \\$verb \\$mandir \\$srcdir \\[$]*\nfi\nfi\n\nexit 0\nCF_EOF\nchmod 755 $cf_edit_man\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MATH_LIB version: 9 updated: 2017/01/21 11:06:25\ndnl -----------\ndnl Checks for libraries.  At least one UNIX system, Apple Macintosh\ndnl Rhapsody 5.5, does not have -lm.  We cannot use the simpler\ndnl AC_CHECK_LIB(m,sin), because that fails for C++.\nAC_DEFUN([CF_MATH_LIB],\n[\nAC_CACHE_CHECK(if -lm needed for math functions,\n\tcf_cv_need_libm,[\n\tAC_TRY_LINK([\n\t#include <stdio.h>\n\t#include <stdlib.h>\n\t#include <math.h>\n\t],\n\t[double x = rand(); printf(\"result = %g\\n\", ]ifelse([$2],,sin(x),$2)[)],\n\t[cf_cv_need_libm=no],\n\t[cf_cv_need_libm=yes])])\nif test \"$cf_cv_need_libm\" = yes\nthen\nifelse($1,,[\n\tCF_ADD_LIB(m)\n],[$1=-lm])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_MIXEDCASE_FILENAMES version: 7 updated: 2015/04/12 15:39:00\ndnl ----------------------\ndnl Check if the file-system supports mixed-case filenames.  If we're able to\ndnl create a lowercase name and see it as uppercase, it doesn't support that.\nAC_DEFUN([CF_MIXEDCASE_FILENAMES],\n[\nAC_CACHE_CHECK(if filesystem supports mixed-case filenames,cf_cv_mixedcase,[\nif test \"$cross_compiling\" = yes ; then\n\tcase $target_alias in\n\t(*-os2-emx*|*-msdosdjgpp*|*-cygwin*|*-msys*|*-mingw*|*-uwin*)\n\t\tcf_cv_mixedcase=no\n\t\t;;\n\t(*)\n\t\tcf_cv_mixedcase=yes\n\t\t;;\n\tesac\nelse\n\trm -f conftest CONFTEST\n\techo test >conftest\n\tif test -f CONFTEST ; then\n\t\tcf_cv_mixedcase=no\n\telse\n\t\tcf_cv_mixedcase=yes\n\tfi\n\trm -f conftest CONFTEST\nfi\n])\ntest \"$cf_cv_mixedcase\" = yes && AC_DEFINE(MIXEDCASE_FILENAMES,1,[Define to 1 if filesystem supports mixed-case filenames.])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MKSTEMP version: 10 updated: 2017/01/21 11:12:16\ndnl ----------\ndnl Check for a working mkstemp.  This creates two files, checks that they are\ndnl successfully created and distinct (AmigaOS apparently fails on the last).\nAC_DEFUN([CF_MKSTEMP],[\nAC_CHECK_HEADERS( \\\nunistd.h \\\n)\nAC_CACHE_CHECK(for working mkstemp, cf_cv_func_mkstemp,[\nrm -rf conftest*\nAC_TRY_RUN([\n#include <sys/types.h>\n#ifdef HAVE_UNISTD_H\n#include <unistd.h>\n#endif\n#include <stdlib.h>\n#include <stdio.h>\n#include <string.h>\n#include <sys/stat.h>\nint main(void)\n{\n\tchar *tmpl = \"conftestXXXXXX\";\n\tchar name[2][80];\n\tint n;\n\tint result = 0;\n\tint fd;\n\tstruct stat sb;\n\n\tumask(077);\n\tfor (n = 0; n < 2; ++n) {\n\t\tstrcpy(name[n], tmpl);\n\t\tif ((fd = mkstemp(name[n])) >= 0) {\n\t\t\tif (!strcmp(name[n], tmpl)\n\t\t\t || stat(name[n], &sb) != 0\n\t\t\t || (sb.st_mode & S_IFMT) != S_IFREG\n\t\t\t || (sb.st_mode & 077) != 0) {\n\t\t\t\tresult = 1;\n\t\t\t}\n\t\t\tclose(fd);\n\t\t}\n\t}\n\tif (result == 0\n\t && !strcmp(name[0], name[1]))\n\t\tresult = 1;\n\t${cf_cv_main_return:-return}(result);\n}\n],[cf_cv_func_mkstemp=yes\n],[cf_cv_func_mkstemp=no\n],[cf_cv_func_mkstemp=maybe])\n])\nif test \"x$cf_cv_func_mkstemp\" = xmaybe ; then\n\tAC_CHECK_FUNC(mkstemp)\nfi\nif test \"x$cf_cv_func_mkstemp\" = xyes || test \"x$ac_cv_func_mkstemp\" = xyes ; then\n\tAC_DEFINE(HAVE_MKSTEMP,1,[Define to 1 if mkstemp() is available and working.])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MSG_LOG version: 5 updated: 2010/10/23 15:52:32\ndnl ----------\ndnl Write a debug message to config.log, along with the line number in the\ndnl configure script.\nAC_DEFUN([CF_MSG_LOG],[\necho \"${as_me:-configure}:__oline__: testing $* ...\" 1>&AC_FD_CC\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NCURSES_ABI_6 version: 3 updated: 2015/06/06 16:10:11\ndnl ----------------\ndnl Set ncurses' ABI to 6 unless overridden by explicit configure option, and\ndnl warn about this.\nAC_DEFUN([CF_NCURSES_ABI_6],[\nif test \"${with_abi_version+set}\" != set; then\n\tcase $cf_cv_rel_version in\n\t(5.*)\n\t\tcf_cv_rel_version=6.0\n\t\tcf_cv_abi_version=6\n\t\tAC_MSG_WARN(overriding ABI version to $cf_cv_abi_version)\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NCURSES_WITH_ABI_VERSION version: 2 updated: 2015/12/19 17:51:52\ndnl ---------------------------\ndnl Allow ncurses's ABI to be overridden.  Generally this happens when a\ndnl packager has incremented the ABI past that used in the original package,\ndnl and wishes to keep doing this.\ndnl\ndnl $1 is the package name, if any, to derive a corresponding {package}_ABI\ndnl symbol.\nAC_DEFUN([CF_NCURSES_WITH_ABI_VERSION],[\nCF_WITH_ABI_VERSION($1)\nif test \"x$cf_cv_abi_version\" != \"x$with_abi_version\"\nthen\n\tcase $cf_cv_rel_version in\n\t(5.*)\n\t\tcf_cv_rel_version=$with_abi_version.0\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NO_LEAKS_OPTION version: 6 updated: 2015/04/12 15:39:00\ndnl ------------------\ndnl see CF_WITH_NO_LEAKS\nAC_DEFUN([CF_NO_LEAKS_OPTION],[\nAC_MSG_CHECKING(if you want to use $1 for testing)\nAC_ARG_WITH($1,\n\t[$2],\n\t[AC_DEFINE_UNQUOTED($3,1,\"Define to 1 if you want to use $1 for testing.\")ifelse([$4],,[\n\t $4\n])\n\t: ${with_cflags:=-g}\n\t: ${with_no_leaks:=yes}\n\t with_$1=yes],\n\t[with_$1=])\nAC_MSG_RESULT(${with_$1:-no})\n\ncase .$with_cflags in\n(.*-g*)\n\tcase .$CFLAGS in\n\t(.*-g*)\n\t\t;;\n\t(*)\n\t\tCF_ADD_CFLAGS([-g])\n\t\t;;\n\tesac\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NUMBER_SYNTAX version: 2 updated: 2015/04/17 21:13:04\ndnl ----------------\ndnl Check if the given variable is a number.  If not, report an error.\ndnl $1 is the variable\ndnl $2 is the message\nAC_DEFUN([CF_NUMBER_SYNTAX],[\nif test -n \"$1\" ; then\n  case $1 in\n  ([[0-9]]*)\n \t;;\n  (*)\n\tAC_MSG_ERROR($2 is not a number: $1)\n \t;;\n  esac\nelse\n  AC_MSG_ERROR($2 value is empty)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_OBJ_SUBDIR version: 7 updated: 2015/04/17 21:13:04\ndnl -------------\ndnl Compute the object-directory name from the given model name\nAC_DEFUN([CF_OBJ_SUBDIR],\n[\n\tcase $1 in\n\t(libtool) $2='obj_lo'  ;;\n\t(normal)  $2='objects' ;;\n\t(debug)   $2='obj_g' ;;\n\t(profile) $2='obj_p' ;;\n\t(shared)\n\t\tcase $cf_cv_system_name in\n\t\t(cygwin|msys)\n\t\t\t$2='objects' ;;\n\t\t(*)\n\t\t\t$2='obj_s' ;;\n\t\tesac\n\tesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PATHSEP version: 7 updated: 2015/04/12 15:39:00\ndnl ----------\ndnl Provide a value for the $PATH and similar separator (or amend the value\ndnl as provided in autoconf 2.5x).\nAC_DEFUN([CF_PATHSEP],\n[\n\tAC_MSG_CHECKING(for PATH separator)\n\tcase $cf_cv_system_name in\n\t(os2*)\tPATH_SEPARATOR=';'  ;;\n\t(*)\t${PATH_SEPARATOR:=':'}  ;;\n\tesac\nifelse([$1],,,[$1=$PATH_SEPARATOR])\n\tAC_SUBST(PATH_SEPARATOR)\n\tAC_MSG_RESULT($PATH_SEPARATOR)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PATH_PROG version: 10 updated: 2019/06/30 19:44:43\ndnl ------------\ndnl Check for a given program, defining corresponding symbol.\ndnl\t$1 = environment variable, which is suffixed by \"_PATH\" in the #define.\ndnl\t$2 = program name to find.\ndnl\t$3 = optional list of additional program names to test.\ndnl $4 = $PATH\ndnl\ndnl If there is more than one token in the result, #define the remaining tokens\ndnl to $1_ARGS.  We need this for 'install' in particular.\ndnl\ndnl FIXME: we should allow this to be overridden by environment variables\ndnl\nAC_DEFUN([CF_PATH_PROG],[\nAC_REQUIRE([CF_PATHSEP])\ntest -z \"[$]$1\" && $1=$2\nAC_PATH_PROGS($1,[$]$1 $2 ifelse($3,,,$3),[$]$1, ifelse($4,,,$4))\n\ncf_path_prog=\"\"\ncf_path_args=\"\"\nIFS=\"${IFS:- \t}\"; cf_save_ifs=\"$IFS\"; IFS=\"${IFS}$PATH_SEPARATOR\"\nfor cf_temp in $ac_cv_path_$1\ndo\n\tif test -z \"$cf_path_prog\" ; then\n\t\tif test \"$with_full_paths\" = yes ; then\n\t\t\tCF_PATH_SYNTAX(cf_temp,break)\n\t\t\tcf_path_prog=\"$cf_temp\"\n\t\telse\n\t\t\tcf_path_prog=\"`basename $cf_temp`\"\n\t\tfi\n\telif test -z \"$cf_path_args\" ; then\n\t\tcf_path_args=\"$cf_temp\"\n\telse\n\t\tcf_path_args=\"$cf_path_args $cf_temp\"\n\tfi\ndone\nIFS=\"$cf_save_ifs\"\n\nif test -n \"$cf_path_prog\" ; then\n\tCF_MSG_LOG(defining path for ${cf_path_prog})\n\tAC_DEFINE_UNQUOTED($1_PATH,\"$cf_path_prog\",Define to pathname $1)\n\ttest -n \"$cf_path_args\" && AC_DEFINE_UNQUOTED($1_ARGS,\"$cf_path_args\",Define to provide args for $1)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PATH_SYNTAX version: 16 updated: 2015/04/18 08:56:57\ndnl --------------\ndnl Check the argument to see that it looks like a pathname.  Rewrite it if it\ndnl begins with one of the prefix/exec_prefix variables, and then again if the\ndnl result begins with 'NONE'.  This is necessary to work around autoconf's\ndnl delayed evaluation of those symbols.\nAC_DEFUN([CF_PATH_SYNTAX],[\nif test \"x$prefix\" != xNONE; then\n\tcf_path_syntax=\"$prefix\"\nelse\n\tcf_path_syntax=\"$ac_default_prefix\"\nfi\n\ncase \".[$]$1\" in\n(.\\[$]\\(*\\)*|.\\'*\\'*)\n\t;;\n(..|./*|.\\\\*)\n\t;;\n(.[[a-zA-Z]]:[[\\\\/]]*) # OS/2 EMX\n\t;;\n(.\\[$]{*prefix}*|.\\[$]{*dir}*)\n\teval $1=\"[$]$1\"\n\tcase \".[$]$1\" in\n\t(.NONE/*)\n\t\t$1=`echo [$]$1 | sed -e s%NONE%$cf_path_syntax%`\n\t\t;;\n\tesac\n\t;;\n(.no|.NONE/*)\n\t$1=`echo [$]$1 | sed -e s%NONE%$cf_path_syntax%`\n\t;;\n(*)\n\tifelse([$2],,[AC_MSG_ERROR([expected a pathname, not \\\"[$]$1\\\"])],$2)\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PKG_CONFIG version: 10 updated: 2015/04/26 18:06:58\ndnl -------------\ndnl Check for the package-config program, unless disabled by command-line.\nAC_DEFUN([CF_PKG_CONFIG],\n[\nAC_MSG_CHECKING(if you want to use pkg-config)\nAC_ARG_WITH(pkg-config,\n\t[  --with-pkg-config{=path} enable/disable use of pkg-config],\n\t[cf_pkg_config=$withval],\n\t[cf_pkg_config=yes])\nAC_MSG_RESULT($cf_pkg_config)\n\ncase $cf_pkg_config in\n(no)\n\tPKG_CONFIG=none\n\t;;\n(yes)\n\tCF_ACVERSION_CHECK(2.52,\n\t\t[AC_PATH_TOOL(PKG_CONFIG, pkg-config, none)],\n\t\t[AC_PATH_PROG(PKG_CONFIG, pkg-config, none)])\n\t;;\n(*)\n\tPKG_CONFIG=$withval\n\t;;\nesac\n\ntest -z \"$PKG_CONFIG\" && PKG_CONFIG=none\nif test \"$PKG_CONFIG\" != none ; then\n\tCF_PATH_SYNTAX(PKG_CONFIG)\nelif test \"x$cf_pkg_config\" != xno ; then\n\tAC_MSG_WARN(pkg-config is not installed)\nfi\n\nAC_SUBST(PKG_CONFIG)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_POSIX_C_SOURCE version: 11 updated: 2018/12/31 20:46:17\ndnl -----------------\ndnl Define _POSIX_C_SOURCE to the given level, and _POSIX_SOURCE if needed.\ndnl\ndnl\tPOSIX.1-1990\t\t\t\t_POSIX_SOURCE\ndnl\tPOSIX.1-1990 and\t\t\t_POSIX_SOURCE and\ndnl\t\tPOSIX.2-1992 C-Language\t\t\t_POSIX_C_SOURCE=2\ndnl\t\tBindings Option\ndnl\tPOSIX.1b-1993\t\t\t\t_POSIX_C_SOURCE=199309L\ndnl\tPOSIX.1c-1996\t\t\t\t_POSIX_C_SOURCE=199506L\ndnl\tX/Open 2000\t\t\t\t_POSIX_C_SOURCE=200112L\ndnl\ndnl Parameters:\ndnl\t$1 is the nominal value for _POSIX_C_SOURCE\nAC_DEFUN([CF_POSIX_C_SOURCE],\n[AC_REQUIRE([CF_POSIX_VISIBLE])dnl\n\nif test \"$cf_cv_posix_visible\" = no; then\n\ncf_POSIX_C_SOURCE=ifelse([$1],,199506L,[$1])\n\ncf_save_CFLAGS=\"$CFLAGS\"\ncf_save_CPPFLAGS=\"$CPPFLAGS\"\n\nCF_REMOVE_DEFINE(cf_trim_CFLAGS,$cf_save_CFLAGS,_POSIX_C_SOURCE)\nCF_REMOVE_DEFINE(cf_trim_CPPFLAGS,$cf_save_CPPFLAGS,_POSIX_C_SOURCE)\n\nAC_CACHE_CHECK(if we should define _POSIX_C_SOURCE,cf_cv_posix_c_source,[\n\tCF_MSG_LOG(if the symbol is already defined go no further)\n\tAC_TRY_COMPILE([#include <sys/types.h>],[\n#ifndef _POSIX_C_SOURCE\nmake an error\n#endif],\n\t[cf_cv_posix_c_source=no],\n\t[cf_want_posix_source=no\n\t case .$cf_POSIX_C_SOURCE in\n\t (.[[12]]??*)\n\t\tcf_cv_posix_c_source=\"-D_POSIX_C_SOURCE=$cf_POSIX_C_SOURCE\"\n\t\t;;\n\t (.2)\n\t\tcf_cv_posix_c_source=\"-D_POSIX_C_SOURCE=$cf_POSIX_C_SOURCE\"\n\t\tcf_want_posix_source=yes\n\t\t;;\n\t (.*)\n\t\tcf_want_posix_source=yes\n\t\t;;\n\t esac\n\t if test \"$cf_want_posix_source\" = yes ; then\n\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n#ifdef _POSIX_SOURCE\nmake an error\n#endif],[],\n\t\tcf_cv_posix_c_source=\"$cf_cv_posix_c_source -D_POSIX_SOURCE\")\n\t fi\n\t CF_MSG_LOG(ifdef from value $cf_POSIX_C_SOURCE)\n\t CFLAGS=\"$cf_trim_CFLAGS\"\n\t CPPFLAGS=\"$cf_trim_CPPFLAGS\"\n\t CF_APPEND_TEXT(CPPFLAGS,$cf_cv_posix_c_source)\n\t CF_MSG_LOG(if the second compile does not leave our definition intact error)\n\t AC_TRY_COMPILE([#include <sys/types.h>],[\n#ifndef _POSIX_C_SOURCE\nmake an error\n#endif],,\n\t [cf_cv_posix_c_source=no])\n\t CFLAGS=\"$cf_save_CFLAGS\"\n\t CPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t])\n])\n\nif test \"$cf_cv_posix_c_source\" != no ; then\n\tCFLAGS=\"$cf_trim_CFLAGS\"\n\tCPPFLAGS=\"$cf_trim_CPPFLAGS\"\n\tCF_ADD_CFLAGS($cf_cv_posix_c_source)\nfi\n\nfi # cf_cv_posix_visible\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_POSIX_VISIBLE version: 1 updated: 2018/12/31 20:46:17\ndnl ----------------\ndnl POSIX documents test-macros which an application may set before any system\ndnl headers are included to make features available.\ndnl\ndnl Some BSD platforms (originally FreeBSD, but copied by a few others)\ndnl diverged from POSIX in 2002 by setting symbols which make all of the most\ndnl recent features visible in the system header files unless the application\ndnl overrides the corresponding test-macros.  Doing that introduces portability\ndnl problems.\ndnl\ndnl This macro makes a special check for the symbols used for this, to avoid a\ndnl conflicting definition.\nAC_DEFUN([CF_POSIX_VISIBLE],\n[\nAC_CACHE_CHECK(if the POSIX test-macros are already defined,cf_cv_posix_visible,[\nAC_TRY_COMPILE([#include <stdio.h>],[\n#if defined(__POSIX_VISIBLE) && ((__POSIX_VISIBLE - 0L) > 0) \\\n\t&& defined(__XSI_VISIBLE) && ((__XSI_VISIBLE - 0L) > 0) \\\n\t&& defined(__BSD_VISIBLE) && ((__BSD_VISIBLE - 0L) > 0) \\\n\t&& defined(__ISO_C_VISIBLE) && ((__ISO_C_VISIBLE - 0L) > 0)\n#error conflicting symbols found\n#endif\n],[cf_cv_posix_visible=no],[cf_cv_posix_visible=yes])\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PREDEFINE version: 2 updated: 2010/05/26 16:44:57\ndnl ------------\ndnl Add definitions to CPPFLAGS to ensure they're predefined for all compiles.\ndnl\ndnl $1 = symbol to test\ndnl $2 = value (if any) to use for a predefinition\nAC_DEFUN([CF_PREDEFINE],\n[\nAC_MSG_CHECKING(if we must define $1)\nAC_TRY_COMPILE([#include <sys/types.h>\n],[\n#ifndef $1\nmake an error\n#endif],[cf_result=no],[cf_result=yes])\nAC_MSG_RESULT($cf_result)\n\nif test \"$cf_result\" = yes ; then\n\tCPPFLAGS=\"$CPPFLAGS ifelse([$2],,-D$1,[-D$1=$2])\"\nelif test \"x$2\" != \"x\" ; then\n\tAC_MSG_CHECKING(checking for compatible value versus $2)\n\tAC_TRY_COMPILE([#include <sys/types.h>\n],[\n#if $1-$2 < 0\nmake an error\n#endif],[cf_result=yes],[cf_result=no])\n\tAC_MSG_RESULT($cf_result)\n\tif test \"$cf_result\" = no ; then\n\t\t# perhaps we can override it - try...\n\t\tCPPFLAGS=\"$CPPFLAGS -D$1=$2\"\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PRG_RULES version: 1 updated: 2006/06/03 11:45:08\ndnl ------------\ndnl Append definitions and rules for the given programs to the subdirectory\ndnl Makefiles, and the recursion rule for the top-level Makefile.\ndnl\ndnl parameters\ndnl\t$1 = script to run\ndnl\t$2 = list of subdirectories\ndnl\ndnl variables\ndnl\t$AWK\nAC_DEFUN([CF_PRG_RULES],\n[\nfor cf_dir in $2\ndo\n\tif test ! -d $srcdir/$cf_dir; then\n\t\tcontinue\n\telif test -f $srcdir/$cf_dir/programs; then\n\t\t$AWK -f $1 $srcdir/$cf_dir/programs >>$cf_dir/Makefile\n\tfi\ndone\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_AR version: 1 updated: 2009/01/01 20:15:22\ndnl ----------\ndnl Check for archiver \"ar\".\nAC_DEFUN([CF_PROG_AR],[\nAC_CHECK_TOOL(AR, ar, ar)\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_AWK version: 1 updated: 2006/09/16 11:40:59\ndnl -----------\ndnl Check for awk, ensure that the check found something.\nAC_DEFUN([CF_PROG_AWK],\n[\nAC_PROG_AWK\ntest -z \"$AWK\" && AC_MSG_ERROR(No awk program found)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_CC version: 5 updated: 2019/12/31 08:53:54\ndnl ----------\ndnl standard check for CC, plus followup sanity checks\ndnl $1 = optional parameter to pass to AC_PROG_CC to specify compiler name\nAC_DEFUN([CF_PROG_CC],[\nCF_ACVERSION_CHECK(2.53,\n\t[AC_MSG_WARN(this will incorrectly handle gnatgcc choice)\n\t AC_REQUIRE([AC_PROG_CC])],\n\t[])\nifelse($1,,[AC_PROG_CC],[AC_PROG_CC($1)])\nCF_GCC_VERSION\nCF_ACVERSION_CHECK(2.52,\n\t[AC_PROG_CC_STDC],\n\t[CF_ANSI_CC_REQD])\nCF_CC_ENV_FLAGS\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_CC_C_O version: 5 updated: 2017/01/21 11:06:25\ndnl --------------\ndnl Analogous to AC_PROG_CC_C_O, but more useful: tests only $CC, ensures that\ndnl the output file can be renamed, and allows for a shell variable that can\ndnl be used later.  The parameter is either CC or CXX.  The result is the\ndnl cache variable:\ndnl\t$cf_cv_prog_CC_c_o\ndnl\t$cf_cv_prog_CXX_c_o\ndnl\ndnl $1 = compiler\ndnl $2 = compiler options, if any\nAC_DEFUN([CF_PROG_CC_C_O],\n[AC_REQUIRE([AC_PROG_CC])dnl\nAC_MSG_CHECKING([whether [$]$1 understands -c and -o together])\nAC_CACHE_VAL(cf_cv_prog_$1_c_o,\n[\ncat > conftest.$ac_ext <<CF_EOF\nint main(void)\n{\n\t${cf_cv_main_return:-return}(0);\n}\nCF_EOF\n# We do the test twice because some compilers refuse to overwrite an\n# existing .o file with -o, though they will create one.\nac_try='[$]$1 $2 -c conftest.$ac_ext -o conftest2.$ac_objext >&AC_FD_CC'\nif AC_TRY_EVAL(ac_try) &&\n  test -f conftest2.$ac_objext && AC_TRY_EVAL(ac_try);\nthen\n  eval cf_cv_prog_$1_c_o=yes\nelse\n  eval cf_cv_prog_$1_c_o=no\nfi\nrm -rf conftest*\n])dnl\nif test $cf_cv_prog_$1_c_o = yes; then\n  AC_MSG_RESULT([yes])\nelse\n  AC_MSG_RESULT([no])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_EGREP version: 2 updated: 2015/04/18 08:56:57\ndnl -------------\ndnl AC_PROG_EGREP was introduced in autoconf 2.53.\ndnl This macro adds a check to ensure the script found something.\nAC_DEFUN([CF_PROG_EGREP],\n[AC_CACHE_CHECK([for egrep], [ac_cv_prog_egrep],\n\t[if echo a | (grep -E '(a|b)') >/dev/null 2>&1\n\t\tthen ac_cv_prog_egrep='grep -E'\n\t\telse ac_cv_prog_egrep='egrep'\n\tfi])\n\tEGREP=$ac_cv_prog_egrep\n\tAC_SUBST([EGREP])\n\ttest -z \"$EGREP\" && AC_MSG_ERROR(No egrep program found)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_GNAT version: 10 updated: 2019/12/31 08:53:54\ndnl ------------\ndnl Check for gnat/gnatmake/etc, ensure that the toolset is complete.\nAC_DEFUN([CF_PROG_GNAT],[\nfor cf_prog_gnat in gnat gnatmake gprconfig gprbuild\ndo\n\tCF_UPPER(cf_upper_prog_gnat,${cf_prog_gnat})\n\n\tunset ac_cv_path_cf_TEMP_gnat\n\tunset cf_TEMP_gnat\n\tAC_PATH_PROG(cf_TEMP_gnat,$cf_prog_gnat,no)\n\teval cf_cv_PATH_$cf_upper_prog_gnat=[$]ac_cv_path_cf_TEMP_gnat\n\n\tif test \"x$cf_TEMP_gnat\" != xno; then\n\t\tunset cf_cv_gnat_version\n\t\tunset cf_TEMP_gnat\n\t\tCF_GNAT_VERSION(cf_TEMP_gnat,$cf_prog_gnat)\n\tfi\n\teval cf_cv_VERSION_$cf_upper_prog_gnat=[$]cf_TEMP_gnat\n\n\tunset cf_TEMP_gnat\n\tunset cf_cv_gnat_version\n\tunset ac_cv_path_cf_TEMP_gnat\ndone\n\nif test \"x$cf_cv_VERSION_GNATMAKE\" = \"xno\"; then\n\tcf_ada_make=\n\tcf_cv_prog_gnat_correct=no\nelse\n\tcf_ada_make=gnatmake\n\tif test \"x$cf_cv_VERSION_GPRCONFIG\" = \"xno\"; then\n\t\t# gprconfig is newer than gnatmake; we can continue...\n\t\tcf_ada_config=\"##\"\n\telse\n\t\trm -rf conftest* *~conftest*\n\t\tif mkdir conftest.src\n\t\tthen\n\t\t\tcf_ada_config=\"\"\n\t\t\tcd conftest.src\n\t\t\tfor cf_gprconfig in Ada C\n\t\t\tdo\n\t\t\t\tAC_MSG_CHECKING(for gprconfig name for $cf_gprconfig)\n\t\t\t\tif test $cf_gprconfig = C\n\t\t\t\tthen\n\t\t\t\t\tfor cf_gprconfig_param in \\\n\t\t\t\t\t\t$cf_gprconfig,,,,GNATGCC \\\n\t\t\t\t\t\t$cf_gprconfig,,,,GCC \\\n\t\t\t\t\t\t$cf_gprconfig\n\t\t\t\t\tdo\n\t\t\t\t\t\tcf_gprconfig_value=`echo s| gprconfig --config=$cf_gprconfig_param 2>&AC_FD_CC | ${AWK:-awk} '/^\\*/{print [$]3;}' | head -n 1`\n\t\t\t\t\t\ttest -n \"$cf_gprconfig_value\" && break\n\t\t\t\t\tdone\n\t\t\t\telse\n\t\t\t\t\tcf_gprconfig_param=$cf_gprconfig\n\t\t\t\t\tcf_gprconfig_value=`echo s| gprconfig --config=$cf_gprconfig_param 2>&AC_FD_CC | ${AWK:-awk} '/^\\*/{print [$]3;}' | head -n 1`\n\t\t\t\tfi\n\t\t\t\tif test -n \"$cf_gprconfig_value\"\n\t\t\t\tthen\n\t\t\t\t\teval cf_ada_config_[$]cf_gprconfig=[$]cf_gprconfig_value\n\t\t\t\t\tAC_MSG_RESULT($cf_gprconfig_value)\n\t\t\t\telse\n\t\t\t\t\tAC_MSG_RESULT(missing)\n\t\t\t\t\tcf_ada_config=\"#\"\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tdone\n\t\t\tcd ..\n\t\t\trm -rf conftest* *~conftest*\n\t\tfi\n\tfi\n\tif test \"x$cf_ada_config\" != \"x#\"\n\tthen\n\t\tCF_GNAT_VERSION\n\t\tCF_CHECK_GNAT_VERSION\n\t\tAC_CHECK_PROG(M4_exists, m4, yes, no)\n\t\tif test \"$ac_cv_prog_M4_exists\" = no; then\n\t\t\tcf_cv_prog_gnat_correct=no\n\t\t\tAC_MSG_WARN(Ada95 binding required program m4 not found. Ada95 binding disabled)\n\t\tfi\n\t\tif test \"$cf_cv_prog_gnat_correct\" = yes; then\n\t\t\tAC_MSG_CHECKING(if GNAT works)\n\t\t\tCF_GNAT_TRY_RUN([procedure conftest;],\n[with Text_IO;\nwith GNAT.OS_Lib;\nprocedure conftest is\nbegin\n   Text_IO.Put (\"Hello World\");\n   Text_IO.New_Line;\n   GNAT.OS_Lib.OS_Exit (0);\nend conftest;],\n[cf_cv_prog_gnat_correct=yes],\n[cf_cv_prog_gnat_correct=no])\n\t\t\tAC_MSG_RESULT($cf_cv_prog_gnat_correct)\n\t\tfi\n\telse\n\t\tcf_cv_prog_gnat_correct=no\n\tfi\nfi\n\nAC_SUBST(cf_ada_make)\nAC_SUBST(cf_ada_config)\nAC_SUBST(cf_ada_config_Ada)\nAC_SUBST(cf_ada_config_C)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_INSTALL version: 7 updated: 2015/04/18 08:56:57\ndnl ---------------\ndnl Force $INSTALL to be an absolute-path.  Otherwise, edit_man.sh and the\ndnl misc/tabset install won't work properly.  Usually this happens only when\ndnl using the fallback mkinstalldirs script\nAC_DEFUN([CF_PROG_INSTALL],\n[AC_PROG_INSTALL\ncase $INSTALL in\n(/*)\n\t;;\n(*)\n\tCF_DIRNAME(cf_dir,$INSTALL)\n\ttest -z \"$cf_dir\" && cf_dir=.\n\tINSTALL=`cd $cf_dir && pwd`/`echo $INSTALL | sed -e 's%^.*/%%'`\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_LDCONFIG version: 5 updated: 2015/04/18 08:56:57\ndnl ----------------\ndnl Check for ldconfig, needed to fixup shared libraries that would be built\ndnl and then used in the install.\nAC_DEFUN([CF_PROG_LDCONFIG],[\nif test \"$cross_compiling\" = yes ; then\n\tLDCONFIG=:\nelse\n\tcase \"$cf_cv_system_name\" in\n\t(dragonfly*|mirbsd*|freebsd*)\n\t\ttest -z \"$LDCONFIG\" && LDCONFIG=\"/sbin/ldconfig -R\"\n\t\t;;\n\t(*) LDPATH=$PATH:/sbin:/usr/sbin\n\t\tAC_PATH_PROG(LDCONFIG,ldconfig,,$LDPATH)\n\t\t;;\n\tesac\nfi\nAC_SUBST(LDCONFIG)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_LINT version: 4 updated: 2019/11/20 18:55:37\ndnl ------------\nAC_DEFUN([CF_PROG_LINT],\n[\nAC_CHECK_PROGS(LINT, lint cppcheck splint)\ncase \"x$LINT\" in\n(xcppcheck|x*/cppcheck)\n\ttest -z \"$LINT_OPTS\" && LINT_OPTS=\"--enable=all\"\n\t;;\nesac\nAC_SUBST(LINT_OPTS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_LN_S version: 2 updated: 2010/08/14 18:25:37\ndnl ------------\ndnl Combine checks for \"ln -s\" and \"ln -sf\", updating $LN_S to include \"-f\"\ndnl option if it is supported.\nAC_DEFUN([CF_PROG_LN_S],[\nAC_PROG_LN_S\nAC_MSG_CHECKING(if $LN_S -f options work)\n\nrm -f conf$$.src conf$$dst\necho >conf$$.dst\necho first >conf$$.src\nif $LN_S -f conf$$.src conf$$.dst 2>/dev/null; then\n\tcf_prog_ln_sf=yes\nelse\n\tcf_prog_ln_sf=no\nfi\nrm -f conf$$.dst conf$$src\nAC_MSG_RESULT($cf_prog_ln_sf)\n\ntest \"$cf_prog_ln_sf\" = yes && LN_S=\"$LN_S -f\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_REGEX version: 12 updated: 2015/04/18 08:56:57\ndnl --------\ndnl Attempt to determine if we've got one of the flavors of regular-expression\ndnl code that we can support.\nAC_DEFUN([CF_REGEX],\n[\n\ncf_regex_func=no\n\ncf_regex_libs=\"regex re\"\ncase $host_os in\n(mingw*)\n\tcf_regex_libs=\"gnurx $cf_regex_libs\"\n\t;;\nesac\n\nAC_CHECK_FUNC(regcomp,[cf_regex_func=regcomp],[\n\tfor cf_regex_lib in $cf_regex_libs\n\tdo\n\t\tAC_CHECK_LIB($cf_regex_lib,regcomp,[\n\t\t\t\tCF_ADD_LIB($cf_regex_lib)\n\t\t\t\tcf_regex_func=regcomp\n\t\t\t\tbreak])\n\tdone\n])\n\nif test \"$cf_regex_func\" = no ; then\n\tAC_CHECK_FUNC(compile,[cf_regex_func=compile],[\n\t\tAC_CHECK_LIB(gen,compile,[\n\t\t\t\tCF_ADD_LIB(gen)\n\t\t\t\tcf_regex_func=compile])])\nfi\n\nif test \"$cf_regex_func\" = no ; then\n\tAC_MSG_WARN(cannot find regular expression library)\nfi\n\nAC_CACHE_CHECK(for regular-expression headers,cf_cv_regex_hdrs,[\n\ncf_cv_regex_hdrs=no\ncase $cf_regex_func in\n(compile)\n\tfor cf_regex_hdr in regexp.h regexpr.h\n\tdo\n\t\tAC_TRY_LINK([#include <$cf_regex_hdr>],[\n\t\t\tchar *p = compile(\"\", \"\", \"\", 0);\n\t\t\tint x = step(\"\", \"\");\n\t\t],[\n\t\t\tcf_cv_regex_hdrs=$cf_regex_hdr\n\t\t\tbreak\n\t\t])\n\tdone\n\t;;\n(*)\n\tfor cf_regex_hdr in regex.h\n\tdo\n\t\tAC_TRY_LINK([#include <sys/types.h>\n#include <$cf_regex_hdr>],[\n\t\t\tregex_t *p;\n\t\t\tint x = regcomp(p, \"\", 0);\n\t\t\tint y = regexec(p, \"\", 0, 0, 0);\n\t\t\tregfree(p);\n\t\t],[\n\t\t\tcf_cv_regex_hdrs=$cf_regex_hdr\n\t\t\tbreak\n\t\t])\n\tdone\n\t;;\nesac\n\n])\n\ncase $cf_cv_regex_hdrs in\n\t(no)\t\tAC_MSG_WARN(no regular expression header found) ;;\n\t(regex.h)\tAC_DEFINE(HAVE_REGEX_H_FUNCS,1,[Define to 1 to include regex.h for regular expressions]) ;;\n\t(regexp.h)\tAC_DEFINE(HAVE_REGEXP_H_FUNCS,1,[Define to 1 to include regexp.h for regular expressions]) ;;\n\t(regexpr.h) AC_DEFINE(HAVE_REGEXPR_H_FUNCS,1,[Define to 1 to include regexpr.h for regular expressions]) ;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_REMOVE_DEFINE version: 3 updated: 2010/01/09 11:05:50\ndnl ----------------\ndnl Remove all -U and -D options that refer to the given symbol from a list\ndnl of C compiler options.  This works around the problem that not all\ndnl compilers process -U and -D options from left-to-right, so a -U option\ndnl cannot be used to cancel the effect of a preceding -D option.\ndnl\ndnl $1 = target (which could be the same as the source variable)\ndnl $2 = source (including '$')\ndnl $3 = symbol to remove\ndefine([CF_REMOVE_DEFINE],\n[\n$1=`echo \"$2\" | \\\n\tsed\t-e 's/-[[UD]]'\"$3\"'\\(=[[^ \t]]*\\)\\?[[ \t]]/ /g' \\\n\t\t-e 's/-[[UD]]'\"$3\"'\\(=[[^ \t]]*\\)\\?[$]//g'`\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_REMOVE_LIB version: 1 updated: 2007/02/17 14:11:52\ndnl -------------\ndnl Remove the given library from the symbol\ndnl\ndnl $1 = target (which could be the same as the source variable)\ndnl $2 = source (including '$')\ndnl $3 = library to remove\ndefine([CF_REMOVE_LIB],\n[\n# remove $3 library from $2\n$1=`echo \"$2\" | sed -e 's/-l$3[[ \t]]//g' -e 's/-l$3[$]//'`\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_RESTORE_XTRA_FLAGS version: 1 updated: 2020/01/11 16:47:45\ndnl ---------------------\ndnl Restore flags saved in CF_SAVE_XTRA_FLAGS\ndnl $1 = name of current macro\ndefine([CF_RESTORE_XTRA_FLAGS],\n[\nLIBS=\"$cf_save_LIBS_$1\"\nCFLAGS=\"$cf_save_CFLAGS_$1\"\nCPPFLAGS=\"$cf_save_CPPFLAGS_$1\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_RPATH_HACK version: 11 updated: 2013/09/01 13:02:00\ndnl -------------\nAC_DEFUN([CF_RPATH_HACK],\n[\nAC_REQUIRE([CF_LD_RPATH_OPT])\nAC_MSG_CHECKING(for updated LDFLAGS)\nif test -n \"$LD_RPATH_OPT\" ; then\n\tAC_MSG_RESULT(maybe)\n\n\tAC_CHECK_PROGS(cf_ldd_prog,ldd,no)\n\tcf_rpath_list=\"/usr/lib /lib\"\n\tif test \"$cf_ldd_prog\" != no\n\tthen\n\t\tcf_rpath_oops=\n\nAC_TRY_LINK([#include <stdio.h>],\n\t\t[printf(\"Hello\");],\n\t\t[cf_rpath_oops=`$cf_ldd_prog conftest$ac_exeext | fgrep ' not found' | sed -e 's% =>.*$%%' |sort | uniq`\n\t\t cf_rpath_list=`$cf_ldd_prog conftest$ac_exeext | fgrep / | sed -e 's%^.*[[ \t]]/%/%' -e 's%/[[^/]][[^/]]*$%%' |sort | uniq`])\n\n\t\t# If we passed the link-test, but get a \"not found\" on a given library,\n\t\t# this could be due to inept reconfiguration of gcc to make it only\n\t\t# partly honor /usr/local/lib (or whatever).  Sometimes this behavior\n\t\t# is intentional, e.g., installing gcc in /usr/bin and suppressing the\n\t\t# /usr/local libraries.\n\t\tif test -n \"$cf_rpath_oops\"\n\t\tthen\n\t\t\tfor cf_rpath_src in $cf_rpath_oops\n\t\t\tdo\n\t\t\t\tfor cf_rpath_dir in \\\n\t\t\t\t\t/usr/local \\\n\t\t\t\t\t/usr/pkg \\\n\t\t\t\t\t/opt/sfw\n\t\t\t\tdo\n\t\t\t\t\tif test -f $cf_rpath_dir/lib/$cf_rpath_src\n\t\t\t\t\tthen\n\t\t\t\t\t\tCF_VERBOSE(...adding -L$cf_rpath_dir/lib to LDFLAGS for $cf_rpath_src)\n\t\t\t\t\t\tLDFLAGS=\"$LDFLAGS -L$cf_rpath_dir/lib\"\n\t\t\t\t\t\tbreak\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\tdone\n\t\tfi\n\tfi\n\n\tCF_VERBOSE(...checking EXTRA_LDFLAGS $EXTRA_LDFLAGS)\n\n\tCF_RPATH_HACK_2(LDFLAGS)\n\tCF_RPATH_HACK_2(LIBS)\n\n\tCF_VERBOSE(...checked EXTRA_LDFLAGS $EXTRA_LDFLAGS)\nelse\n\tAC_MSG_RESULT(no)\nfi\nAC_SUBST(EXTRA_LDFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_RPATH_HACK_2 version: 7 updated: 2015/04/12 15:39:00\ndnl ---------------\ndnl Do one set of substitutions for CF_RPATH_HACK, adding an rpath option to\ndnl EXTRA_LDFLAGS for each -L option found.\ndnl\ndnl $cf_rpath_list contains a list of directories to ignore.\ndnl\ndnl $1 = variable name to update.  The LDFLAGS variable should be the only one,\ndnl      but LIBS often has misplaced -L options.\nAC_DEFUN([CF_RPATH_HACK_2],\n[\nCF_VERBOSE(...checking $1 [$]$1)\n\ncf_rpath_dst=\nfor cf_rpath_src in [$]$1\ndo\n\tcase $cf_rpath_src in\n\t(-L*)\n\n\t\t# check if this refers to a directory which we will ignore\n\t\tcf_rpath_skip=no\n\t\tif test -n \"$cf_rpath_list\"\n\t\tthen\n\t\t\tfor cf_rpath_item in $cf_rpath_list\n\t\t\tdo\n\t\t\t\tif test \"x$cf_rpath_src\" = \"x-L$cf_rpath_item\"\n\t\t\t\tthen\n\t\t\t\t\tcf_rpath_skip=yes\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tdone\n\t\tfi\n\n\t\tif test \"$cf_rpath_skip\" = no\n\t\tthen\n\t\t\t# transform the option\n\t\t\tif test \"$LD_RPATH_OPT\" = \"-R \" ; then\n\t\t\t\tcf_rpath_tmp=`echo \"$cf_rpath_src\" |sed -e \"s%-L%-R %\"`\n\t\t\telse\n\t\t\t\tcf_rpath_tmp=`echo \"$cf_rpath_src\" |sed -e \"s%-L%$LD_RPATH_OPT%\"`\n\t\t\tfi\n\n\t\t\t# if we have not already added this, add it now\n\t\t\tcf_rpath_tst=`echo \"$EXTRA_LDFLAGS\" | sed -e \"s%$cf_rpath_tmp %%\"`\n\t\t\tif test \"x$cf_rpath_tst\" = \"x$EXTRA_LDFLAGS\"\n\t\t\tthen\n\t\t\t\tCF_VERBOSE(...Filter $cf_rpath_src ->$cf_rpath_tmp)\n\t\t\t\tEXTRA_LDFLAGS=\"$cf_rpath_tmp $EXTRA_LDFLAGS\"\n\t\t\tfi\n\t\tfi\n\t\t;;\n\tesac\n\tcf_rpath_dst=\"$cf_rpath_dst $cf_rpath_src\"\ndone\n$1=$cf_rpath_dst\n\nCF_VERBOSE(...checked $1 [$]$1)\nAC_SUBST(EXTRA_LDFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SAVE_XTRA_FLAGS version: 1 updated: 2020/01/11 16:46:44\ndnl ------------------\ndnl Use this macro to save CFLAGS/CPPFLAGS/LIBS before checks against X headers\ndnl and libraries which do not update those variables.\ndnl\ndnl $1 = name of current macro\ndefine([CF_SAVE_XTRA_FLAGS],\n[\ncf_save_LIBS_$1=\"$LIBS\"\ncf_save_CFLAGS_$1=\"$CFLAGS\"\ncf_save_CPPFLAGS_$1=\"$CPPFLAGS\"\nLIBS=\"$LIBS ${X_PRE_LIBS} ${X_LIBS} ${X_EXTRA_LIBS}\"\nfor cf_X_CFLAGS in $X_CFLAGS\ndo\n\tcase \"x$cf_X_CFLAGS\" in\n\tx-[[IUD]]*)\n\t\tCPPFLAGS=\"$CPPFLAGS $cf_X_CFLAGS\"\n\t\t;;\n\t*)\n\t\tCFLAGS=\"$CFLAGS $cf_X_CFLAGS\"\n\t\t;;\n\tesac\ndone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SHARED_OPTS version: 93 updated: 2018/08/18 16:36:35\ndnl --------------\ndnl --------------\ndnl Attempt to determine the appropriate CC/LD options for creating a shared\ndnl library.\ndnl\ndnl Notes:\ndnl a) ${LOCAL_LDFLAGS} is used to link executables that will run within\ndnl the build-tree, i.e., by making use of the libraries that are compiled in\ndnl $rel_builddir/lib We avoid compiling-in a $rel_builddir/lib path for the\ndnl shared library since that can lead to unexpected results at runtime.\ndnl b) ${LOCAL_LDFLAGS2} has the same intention but assumes that the shared\ndnl libraries are compiled in ../../lib\ndnl\ndnl The variable 'cf_cv_do_symlinks' is used to control whether we configure\ndnl to install symbolic links to the rel/abi versions of shared libraries.\ndnl\ndnl The variable 'cf_cv_shlib_version' controls whether we use the rel or abi\ndnl version when making symbolic links.\ndnl\ndnl The variable 'cf_cv_shlib_version_infix' controls whether shared library\ndnl version numbers are infix (ex: libncurses.<ver>.dylib) or postfix\ndnl (ex: libncurses.so.<ver>).\ndnl\ndnl Some loaders leave 'so_locations' lying around.  It's nice to clean up.\nAC_DEFUN([CF_SHARED_OPTS],\n[\n\tAC_REQUIRE([CF_LD_RPATH_OPT])\n\n\tRM_SHARED_OPTS=\n\tLOCAL_LDFLAGS=\n\tLOCAL_LDFLAGS2=\n\tLD_SHARED_OPTS=\n\tINSTALL_LIB=\"-m 644\"\n\t: ${rel_builddir:=.}\n\n\tshlibdir=$libdir\n\tAC_SUBST(shlibdir)\n\n\tMAKE_DLLS=\"#\"\n\tAC_SUBST(MAKE_DLLS)\n\n\tcf_cv_do_symlinks=no\n\tcf_ld_rpath_opt=\n\ttest \"$cf_cv_enable_rpath\" = yes && cf_ld_rpath_opt=\"$LD_RPATH_OPT\"\n\n\tAC_MSG_CHECKING(if release/abi version should be used for shared libs)\n\tAC_ARG_WITH(shlib-version,\n\t[  --with-shlib-version=X  Specify rel or abi version for shared libs],\n\t[test -z \"$withval\" && withval=auto\n\tcase $withval in\n\t(yes)\n\t\tcf_cv_shlib_version=auto\n\t\t;;\n\t(rel|abi|auto)\n\t\tcf_cv_shlib_version=$withval\n\t\t;;\n\t(*)\n\t\tAC_MSG_RESULT($withval)\n\t\tAC_MSG_ERROR([option value must be one of: rel, abi, or auto])\n\t\t;;\n\tesac\n\t],[cf_cv_shlib_version=auto])\n\tAC_MSG_RESULT($cf_cv_shlib_version)\n\n\tcf_cv_rm_so_locs=no\n\tcf_try_cflags=\n\n\t# Some less-capable ports of gcc support only -fpic\n\tCC_SHARED_OPTS=\n\n\tcf_try_fPIC=no\n\tif test \"$GCC\" = yes\n\tthen\n\t\tcf_try_fPIC=yes\n\telse\n\t\tcase $cf_cv_system_name in\n\t\t(*linux*)\t# e.g., PGI compiler\n\t\t\tcf_try_fPIC=yes\n\t\t\t;;\n\t\tesac\n\tfi\n\n\tif test \"$cf_try_fPIC\" = yes\n\tthen\n\t\tAC_MSG_CHECKING(which $CC option to use)\n\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\tfor CC_SHARED_OPTS in -fPIC -fpic ''\n\t\tdo\n\t\t\tCFLAGS=\"$cf_save_CFLAGS $CC_SHARED_OPTS\"\n\t\t\tAC_TRY_COMPILE([#include <stdio.h>],[int x = 1],[break],[])\n\t\tdone\n\t\tAC_MSG_RESULT($CC_SHARED_OPTS)\n\t\tCFLAGS=\"$cf_save_CFLAGS\"\n\tfi\n\n\tcf_cv_shlib_version_infix=no\n\n\tcase $cf_cv_system_name in\n\t(aix4.[3-9]*|aix[[5-7]]*)\n\t\tif test \"$GCC\" = yes; then\n\t\t\tCC_SHARED_OPTS='-Wl,-brtl'\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-brtl -Wl,-blibpath:${RPATH_LIST}:/usr/lib -o [$]@'\n\t\telse\n\t\t\tCC_SHARED_OPTS='-brtl'\n\t\t\t# as well as '-qpic=large -G' or perhaps \"-bM:SRE -bnoentry -bexpall\"\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -G -Wl,-brtl -Wl,-blibpath:${RPATH_LIST}:/usr/lib -o [$]@'\n\t\tfi\n\t\t;;\n\t(beos*)\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -o $[@] -Xlinker -soname=`basename $[@]` -nostart -e 0'\n\t\t;;\n\t(cygwin*)\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB=$SHELL' '$rel_builddir'/mk_shared_lib.sh [$]@ [$]{CC} [$]{CFLAGS}'\n\t\tRM_SHARED_OPTS=\"$RM_SHARED_OPTS $rel_builddir/mk_shared_lib.sh *.dll.a\"\n\t\tcf_cv_shlib_version=cygdll\n\t\tcf_cv_shlib_version_infix=cygdll\n\t\tshlibdir=$bindir\n\t\tMAKE_DLLS=\n\t\tcat >mk_shared_lib.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tSHARED_LIB=\\[$]1\n\t\tIMPORT_LIB=\\`echo \"\\[$]1\" | sed -e 's/cyg/lib/' -e 's/[[0-9]]*\\.dll[$]/.dll.a/'\\`\n\t\tshift\n\t\tcat <<-EOF\n\t\tLinking shared library\n\t\t** SHARED_LIB \\[$]SHARED_LIB\n\t\t** IMPORT_LIB \\[$]IMPORT_LIB\nEOF\n\t\texec \\[$]* ${LDFLAGS} -shared -Wl,--out-implib=\\[$]{IMPORT_LIB} -Wl,--export-all-symbols -o \\[$]{SHARED_LIB}\nCF_EOF\n\t\tchmod +x mk_shared_lib.sh\n\t\t;;\n\t(msys*)\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB=$SHELL' '$rel_builddir'/mk_shared_lib.sh [$]@ [$]{CC} [$]{CFLAGS}'\n\t\tRM_SHARED_OPTS=\"$RM_SHARED_OPTS $rel_builddir/mk_shared_lib.sh *.dll.a\"\n\t\tcf_cv_shlib_version=msysdll\n\t\tcf_cv_shlib_version_infix=msysdll\n\t\tshlibdir=$bindir\n\t\tMAKE_DLLS=\n\t\tcat >mk_shared_lib.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tSHARED_LIB=\\[$]1\n\t\tIMPORT_LIB=\\`echo \"\\[$]1\" | sed -e 's/msys-/lib/' -e 's/[[0-9]]*\\.dll[$]/.dll.a/'\\`\n\t\tshift\n\t\tcat <<-EOF\n\t\tLinking shared library\n\t\t** SHARED_LIB \\[$]SHARED_LIB\n\t\t** IMPORT_LIB \\[$]IMPORT_LIB\nEOF\n\t\texec \\[$]* ${LDFLAGS} -shared -Wl,--out-implib=\\[$]{IMPORT_LIB} -Wl,--export-all-symbols -o \\[$]{SHARED_LIB}\nCF_EOF\n\t\tchmod +x mk_shared_lib.sh\n\t\t;;\n\t(darwin*)\n\t\tcf_try_cflags=\"no-cpp-precomp\"\n\t\tCC_SHARED_OPTS=\"-dynamic\"\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -dynamiclib -install_name ${libdir}/`basename $[@]` -compatibility_version ${ABI_VERSION} -current_version ${ABI_VERSION} -o $[@]'\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=abi\n\t\tcf_cv_shlib_version_infix=yes\n\t\tAC_CACHE_CHECK([if ld -search_paths_first works], cf_cv_ldflags_search_paths_first, [\n\t\t\tcf_save_LDFLAGS=$LDFLAGS\n\t\t\tLDFLAGS=\"$LDFLAGS -Wl,-search_paths_first\"\n\t\t\tAC_TRY_LINK(, [int i;], cf_cv_ldflags_search_paths_first=yes, cf_cv_ldflags_search_paths_first=no)\n\t\t\t\tLDFLAGS=$cf_save_LDFLAGS])\n\t\tif test $cf_cv_ldflags_search_paths_first = yes; then\n\t\t\tLDFLAGS=\"$LDFLAGS -Wl,-search_paths_first\"\n\t\tfi\n\t\t;;\n\t(hpux[[7-8]]*)\n\t\t# HP-UX 8.07 ld lacks \"+b\" option used for libdir search-list\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='+Z'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -b -o $[@]'\n\t\tINSTALL_LIB=\"-m 555\"\n\t\t;;\n\t(hpux*)\n\t\t# (tested with gcc 2.7.2 -- I don't have c89)\n\t\tif test \"$GCC\" = yes; then\n\t\t\tLD_SHARED_OPTS='-Xlinker +b -Xlinker ${libdir}'\n\t\telse\n\t\t\tCC_SHARED_OPTS='+Z'\n\t\t\tLD_SHARED_OPTS='-Wl,+b,${libdir}'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} +b ${libdir} -b -o $[@]'\n\t\t# HP-UX shared libraries must be executable, and should be\n\t\t# readonly to exploit a quirk in the memory manager.\n\t\tINSTALL_LIB=\"-m 555\"\n\t\t;;\n\t(interix*)\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\tif test \"$cf_cv_shlib_version\" = rel; then\n\t\t\tcf_shared_soname='`basename $[@] .${REL_VERSION}`.${ABI_VERSION}'\n\t\telse\n\t\t\tcf_shared_soname='`basename $[@]`'\n\t\tfi\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-rpath,${RPATH_LIST} -Wl,-h,'$cf_shared_soname' -o $[@]'\n\t\t;;\n\t(irix*)\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\t# tested with IRIX 5.2 and 'cc'.\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-KPIC'\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -rdata_shared -soname `basename $[@]` -o $[@]'\n\t\telse\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,`basename $[@]` -o $[@]'\n\t\tfi\n\t\tcf_cv_rm_so_locs=yes\n\t\t;;\n\t(linux*|gnu*|k*bsd*-gnu)\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test -n \"$LD_RPATH_OPT\" ; then\n\t\t\tLOCAL_LDFLAGS=\"${LD_RPATH_OPT}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCF_SHARED_SONAME\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,'$cf_cv_shared_soname',-stats,-lc -o $[@]'\n\t\t;;\n\t(mingw*)\n\t\tcf_cv_shlib_version=mingw\n\t\tcf_cv_shlib_version_infix=mingw\n\t\tshlibdir=$bindir\n\t\tMAKE_DLLS=\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" ; then\n\t\t\tLOCAL_LDFLAGS=\"-Wl,--enable-auto-import\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\t\tEXTRA_LDFLAGS=\"-Wl,--enable-auto-import $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB=$SHELL' '$rel_builddir'/mk_shared_lib.sh [$]@ [$]{CC} [$]{CFLAGS}'\n\t\tRM_SHARED_OPTS=\"$RM_SHARED_OPTS $rel_builddir/mk_shared_lib.sh *.dll.a\"\n\t\tcat >mk_shared_lib.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tSHARED_LIB=\\[$]1\n\t\tIMPORT_LIB=\\`echo \"\\[$]1\" | sed -e 's/[[0-9]]*\\.dll[$]/.dll.a/'\\`\n\t\tshift\n\t\tcat <<-EOF\n\t\tLinking shared library\n\t\t** SHARED_LIB \\[$]SHARED_LIB\n\t\t** IMPORT_LIB \\[$]IMPORT_LIB\nEOF\n\t\texec \\[$]* ${LDFLAGS} -shared -Wl,--enable-auto-import,--out-implib=\\[$]{IMPORT_LIB} -Wl,--export-all-symbols -o \\[$]{SHARED_LIB}\nCF_EOF\n\t\tchmod +x mk_shared_lib.sh\n\t\t;;\n\t(openbsd[[2-9]].*|mirbsd*)\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test -n \"$LD_RPATH_OPT\" ; then\n\t\t\tLOCAL_LDFLAGS=\"${LD_RPATH_OPT}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tCF_SHARED_SONAME\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-Bshareable,-soname,'$cf_cv_shared_soname',-stats,-lc -o $[@]'\n\t\t;;\n\t(nto-qnx*|openbsd*|freebsd[[12]].*)\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -Bshareable -o $[@]'\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\t;;\n\t(dragonfly*|freebsd*)\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tLOCAL_LDFLAGS=\"${cf_ld_rpath_opt}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $LOCAL_LDFLAGS\"\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCF_SHARED_SONAME\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,'$cf_cv_shared_soname',-stats,-lc -o $[@]'\n\t\t;;\n\t(netbsd*)\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tLOCAL_LDFLAGS=\"${cf_ld_rpath_opt}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\t\tif test \"$cf_cv_shlib_version\" = auto; then\n\t\t\tif test -f /usr/libexec/ld.elf_so; then\n\t\t\t\tcf_cv_shlib_version=abi\n\t\t\telse\n\t\t\t\tcf_cv_shlib_version=rel\n\t\t\tfi\n\t\t\tfi\n\t\t\tCF_SHARED_SONAME\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,'$cf_cv_shared_soname' -o $[@]'\n\t\telse\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -Wl,-shared -Wl,-Bshareable -o $[@]'\n\t\tfi\n\t\t;;\n\t(osf*|mls+*)\n\t\t# tested with OSF/1 V3.2 and 'cc'\n\t\t# tested with OSF/1 V3.2 and gcc 2.6.3 (but the c++ demo didn't\n\t\t# link with shared libs).\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -set_version ${REL_VERSION}:${ABI_VERSION} -expect_unresolved \"*\" -shared -soname `basename $[@]`'\n\t\tcase $host_os in\n\t\t(osf4*)\n\t\t\tMK_SHARED_LIB=\"${MK_SHARED_LIB} -msym\"\n\t\t\t;;\n\t\tesac\n\t\tMK_SHARED_LIB=\"${MK_SHARED_LIB}\"' -o $[@]'\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test -n \"$LD_RPATH_OPT\" ; then\n\t\t\tLOCAL_LDFLAGS=\"${LD_RPATH_OPT}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tcf_cv_rm_so_locs=yes\n\t\t;;\n\t(sco3.2v5*)  # also uw2* and UW7: hops 13-Apr-98\n\t\t# tested with osr5.0.5\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-belf -KPIC'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -dy -G -h `basename $[@] .${REL_VERSION}`.${ABI_VERSION} -o [$]@'\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\t# only way is to set LD_RUN_PATH but no switch for it\n\t\t\tRUN_PATH=$libdir\n\t\tfi\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\tLINK_PROGS='LD_RUN_PATH=${libdir}'\n\t\tLINK_TESTS='Pwd=`pwd`;LD_RUN_PATH=`dirname $${Pwd}`/lib'\n\t\t;;\n\t(sunos4*)\n\t\t# tested with SunOS 4.1.1 and gcc 2.7.0\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-KPIC'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -assert pure-text -o $[@]'\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\t;;\n\t(solaris2*)\n\t\t# tested with SunOS 5.5.1 (solaris 2.5.1) and gcc 2.7.2\n\t\t# tested with SunOS 5.10 (solaris 10) and gcc 3.4.3\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" ; then\n\t\t\tLOCAL_LDFLAGS=\"-R \\$(LOCAL_LIBDIR):\\${libdir}\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"-R \\${libdir} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCF_SHARED_SONAME\n\t\tif test \"$GCC\" != yes; then\n\t\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\t\tfor cf_shared_opts in -xcode=pic32 -xcode=pic13 -KPIC -Kpic -O\n\t\t\tdo\n\t\t\t\tCFLAGS=\"$cf_shared_opts $cf_save_CFLAGS\"\n\t\t\t\tAC_TRY_COMPILE([#include <stdio.h>],[printf(\"Hello\\n\");],[break])\n\t\t\tdone\n\t\t\tCFLAGS=\"$cf_save_CFLAGS\"\n\t\t\tCC_SHARED_OPTS=$cf_shared_opts\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -dy -G -h '$cf_cv_shared_soname' -o $[@]'\n\t\telse\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -dy -G -h '$cf_cv_shared_soname' -o $[@]'\n\t\tfi\n\t\t;;\n\t(sysv5uw7*|unix_sv*)\n\t\t# tested with UnixWare 7.1.0 (gcc 2.95.2 and cc)\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-KPIC'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -d y -G -o [$]@'\n\t\t;;\n\t(*)\n\t\tCC_SHARED_OPTS='unknown'\n\t\tMK_SHARED_LIB='echo unknown'\n\t\t;;\n\tesac\n\n\t# This works if the last tokens in $MK_SHARED_LIB are the -o target.\n\tcase \"$cf_cv_shlib_version\" in\n\t(rel|abi)\n\t\tcase \"$MK_SHARED_LIB\" in\n\t\t(*'-o $[@]')\n\t\t\ttest \"$cf_cv_do_symlinks\" = no && cf_cv_do_symlinks=yes\n\t\t\t;;\n\t\t(*)\n\t\t\tAC_MSG_WARN(ignored --with-shlib-version)\n\t\t\t;;\n\t\tesac\n\t\t;;\n\tesac\n\n\tif test -n \"$cf_try_cflags\"\n\tthen\ncat > conftest.$ac_ext <<EOF\n#line __oline__ \"${as_me:-configure}\"\n#include <stdio.h>\nint main(int argc, char *argv[[]])\n{\n\tprintf(\"hello\\n\");\n\treturn (argv[[argc-1]] == 0) ;\n}\nEOF\n\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\tfor cf_opt in $cf_try_cflags\n\t\tdo\n\t\t\tCFLAGS=\"$cf_save_CFLAGS -$cf_opt\"\n\t\t\tAC_MSG_CHECKING(if CFLAGS option -$cf_opt works)\n\t\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\t\tAC_MSG_RESULT(yes)\n\t\t\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\t\telse\n\t\t\t\tAC_MSG_RESULT(no)\n\t\t\tfi\n\t\tdone\n\t\tCFLAGS=\"$cf_save_CFLAGS\"\n\tfi\n\n\n\t# RPATH_LIST is a colon-separated list of directories\n\ttest -n \"$cf_ld_rpath_opt\" && MK_SHARED_LIB=\"$MK_SHARED_LIB $cf_ld_rpath_opt\\${RPATH_LIST}\"\n\ttest -z \"$RPATH_LIST\" && RPATH_LIST=\"\\${libdir}\"\n\n\ttest $cf_cv_rm_so_locs = yes && RM_SHARED_OPTS=\"$RM_SHARED_OPTS so_locations\"\n\n\tCF_VERBOSE(CC_SHARED_OPTS: $CC_SHARED_OPTS)\n\tCF_VERBOSE(MK_SHARED_LIB:  $MK_SHARED_LIB)\n\n\tAC_SUBST(CC_SHARED_OPTS)\n\tAC_SUBST(LD_RPATH_OPT)\n\tAC_SUBST(LD_SHARED_OPTS)\n\tAC_SUBST(MK_SHARED_LIB)\n\tAC_SUBST(RM_SHARED_OPTS)\n\n\tAC_SUBST(LINK_PROGS)\n\tAC_SUBST(LINK_TESTS)\n\n\tAC_SUBST(EXTRA_LDFLAGS)\n\tAC_SUBST(LOCAL_LDFLAGS)\n\tAC_SUBST(LOCAL_LDFLAGS2)\n\n\tAC_SUBST(INSTALL_LIB)\n\tAC_SUBST(RPATH_LIST)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SHARED_SONAME version: 3 updated: 2008/09/08 18:34:43\ndnl ----------------\ndnl utility macro for CF_SHARED_OPTS, constructs \"$cf_cv_shared_soname\" for\ndnl substitution into MK_SHARED_LIB string for the \"-soname\" (or similar)\ndnl option.\ndnl\ndnl $1 is the default that should be used for \"$cf_cv_shlib_version\".\ndnl If missing, use \"rel\".\ndefine([CF_SHARED_SONAME],\n[\n\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=ifelse($1,,rel,$1)\n\tif test \"$cf_cv_shlib_version\" = rel; then\n\t\tcf_cv_shared_soname='`basename $[@] .${REL_VERSION}`.${ABI_VERSION}'\n\telse\n\t\tcf_cv_shared_soname='`basename $[@]`'\n\tfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_SIGWINCH version: 2 updated: 2019/03/23 19:54:44\ndnl -----------\ndnl Use this macro after CF_XOPEN_SOURCE, but do not require it (not all\ndnl programs need this test).\ndnl\ndnl This is really a Mac OS X 10.4.3 workaround.  Defining _POSIX_C_SOURCE\ndnl forces SIGWINCH to be undefined (breaks xterm, ncurses).  Oddly, the struct\ndnl winsize declaration is left alone - we may revisit this if Apple choose to\ndnl break that part of the interface as well.\nAC_DEFUN([CF_SIGWINCH],\n[\nAC_CACHE_CHECK(if SIGWINCH is defined,cf_cv_define_sigwinch,[\n\tAC_TRY_COMPILE([\n#include <sys/types.h>\n#include <sys/signal.h>\n],[int x = SIGWINCH],\n\t[cf_cv_define_sigwinch=yes],\n\t[AC_TRY_COMPILE([\n#undef _XOPEN_SOURCE\n#undef _POSIX_SOURCE\n#undef _POSIX_C_SOURCE\n#include <sys/types.h>\n#include <sys/signal.h>\n],[int x = SIGWINCH],\n\t[cf_cv_define_sigwinch=maybe],\n\t[cf_cv_define_sigwinch=no])\n])\n])\n\nif test \"$cf_cv_define_sigwinch\" = maybe ; then\nAC_CACHE_CHECK(for actual SIGWINCH definition,cf_cv_fixup_sigwinch,[\ncf_cv_fixup_sigwinch=unknown\ncf_sigwinch=32\nwhile test $cf_sigwinch != 1\ndo\n\tAC_TRY_COMPILE([\n#undef _XOPEN_SOURCE\n#undef _POSIX_SOURCE\n#undef _POSIX_C_SOURCE\n#include <sys/types.h>\n#include <sys/signal.h>\n],[\n#if SIGWINCH != $cf_sigwinch\nmake an error\n#endif\nint x = SIGWINCH],\n\t[cf_cv_fixup_sigwinch=$cf_sigwinch\n\t break])\n\ncf_sigwinch=`expr $cf_sigwinch - 1`\ndone\n])\n\n\tif test \"$cf_cv_fixup_sigwinch\" != unknown ; then\n\t\tCPPFLAGS=\"$CPPFLAGS -DSIGWINCH=$cf_cv_fixup_sigwinch\"\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SIG_ATOMIC_T version: 4 updated: 2020/01/18 12:30:44\ndnl ---------------\ndnl signal handler, but there are some gcc dependencies in that recommendation.\ndnl Try anyway.\nAC_DEFUN([CF_SIG_ATOMIC_T],\n[\nAC_MSG_CHECKING(for signal global datatype)\nAC_CACHE_VAL(cf_cv_sig_atomic_t,[\n\tfor cf_type in \\\n\t\t\"volatile sig_atomic_t\" \\\n\t\t\"sig_atomic_t\" \\\n\t\t\"int\"\n\tdo\n\tAC_TRY_COMPILE([\n#include <sys/types.h>\n#include <signal.h>\n#include <stdio.h>\n\nextern $cf_type x;\n$cf_type x;\nstatic void handler(int sig)\n{\n\tx = 5;\n}],\n\t\t[signal(SIGINT, handler);\n\t\t x = 1],\n\t\t[cf_cv_sig_atomic_t=$cf_type],\n\t\t[cf_cv_sig_atomic_t=no])\n\t\ttest \"$cf_cv_sig_atomic_t\" != no && break\n\tdone\n\t])\nAC_MSG_RESULT($cf_cv_sig_atomic_t)\ntest \"$cf_cv_sig_atomic_t\" != no && AC_DEFINE_UNQUOTED(SIG_ATOMIC_T, $cf_cv_sig_atomic_t,[Define to signal global datatype])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SIZECHANGE version: 14 updated: 2018/06/20 20:23:13\ndnl -------------\ndnl Check for definitions & structures needed for window size-changing\ndnl\ndnl https://stackoverflow.com/questions/18878141/difference-between-structures-ttysize-and-winsize/50769952#50769952\nAC_DEFUN([CF_SIZECHANGE],\n[\nAC_REQUIRE([CF_STRUCT_TERMIOS])\nAC_CACHE_CHECK(declaration of size-change, cf_cv_sizechange,[\n\tcf_cv_sizechange=unknown\n\tcf_save_CPPFLAGS=\"$CPPFLAGS\"\n\nfor cf_opts in \"\" \"NEED_PTEM_H\"\ndo\n\n\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\tif test -n \"$cf_opts\"\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D$cf_opts)\n\tfi\n\tAC_TRY_COMPILE([#include <sys/types.h>\n#ifdef HAVE_TERMIOS_H\n#include <termios.h>\n#else\n#ifdef HAVE_TERMIO_H\n#include <termio.h>\n#endif\n#endif\n\n#ifdef NEED_PTEM_H\n/* This is a workaround for SCO:  they neglected to define struct winsize in\n * termios.h -- it's only in termio.h and ptem.h\n */\n#include <sys/stream.h>\n#include <sys/ptem.h>\n#endif\n\n#ifdef HAVE_SYS_IOCTL_H\n#include <sys/ioctl.h>\n#endif\n],[\n#ifdef TIOCGSIZE\n\tstruct ttysize win;\t/* SunOS 3.0... */\n\tint y = win.ts_lines;\n\tint x = win.ts_cols;\n#else\n#ifdef TIOCGWINSZ\n\tstruct winsize win;\t/* everything else */\n\tint y = win.ws_row;\n\tint x = win.ws_col;\n#else\n\tno TIOCGSIZE or TIOCGWINSZ\n#endif /* TIOCGWINSZ */\n#endif /* TIOCGSIZE */\n\t],\n\t[cf_cv_sizechange=yes],\n\t[cf_cv_sizechange=no])\n\n\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\tif test \"$cf_cv_sizechange\" = yes ; then\n\t\techo \"size-change succeeded ($cf_opts)\" >&AC_FD_CC\n\t\ttest -n \"$cf_opts\" && cf_cv_sizechange=\"$cf_opts\"\n\t\tbreak\n\tfi\ndone\n])\nif test \"$cf_cv_sizechange\" != no ; then\n\tAC_DEFINE(HAVE_SIZECHANGE,1,[Define to 1 if sizechange declarations are provided])\n\tcase $cf_cv_sizechange in\n\t(NEED*)\n\t\tAC_DEFINE_UNQUOTED($cf_cv_sizechange )\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SRC_MODULES version: 31 updated: 2019/09/21 18:08:42\ndnl --------------\ndnl For each parameter, test if the source-directory exists, and if it contains\ndnl a 'modules' file.  If so, add to the list $cf_cv_src_modules which we'll\ndnl use in CF_LIB_RULES.\ndnl\ndnl This uses the configured value to make the lists SRC_SUBDIRS and\ndnl SUB_MAKEFILES which are used in the makefile-generation scheme.\nAC_DEFUN([CF_SRC_MODULES],\n[\nAC_REQUIRE([CF_CHECK_GNAT_VERSION])\nAC_MSG_CHECKING(for src modules)\n\n# dependencies and linker-arguments for test-programs\nTEST_DEPS=\"${LIB_DIR}/${LIB_PREFIX}${LIB_NAME}${DFT_DEP_SUFFIX} $TEST_DEPS\"\nTEST_DEP2=\"${LIB_2ND}/${LIB_PREFIX}${LIB_NAME}${DFT_DEP_SUFFIX} $TEST_DEP2\"\nif test \"$DFT_LWR_MODEL\" = \"libtool\"; then\n\tTEST_ARGS=\"${TEST_DEPS}\"\n\tTEST_ARG2=\"${TEST_DEP2}\"\nelse\n\tTEST_ARGS=\"-l${LIB_NAME}${USE_ARG_SUFFIX} $TEST_ARGS\"\n\tTEST_ARG2=\"-l${LIB_NAME}${USE_ARG_SUFFIX} $TEST_ARG2\"\nfi\n\nPC_MODULES_TO_MAKE=\"ncurses${USE_ARG_SUFFIX}\"\ncf_cv_src_modules=\nfor cf_dir in $1\ndo\n\tif test -f $srcdir/$cf_dir/modules; then\n\n\t\t# We may/may not have tack in the distribution, though the\n\t\t# makefile is.\n\t\tif test $cf_dir = tack ; then\n\t\t\tif test \"x$cf_with_tack\" != \"xyes\"; then\n\t\t\t\tcontinue\n\t\t\tfi\n\t\tfi\n\n\t\tif test -z \"$cf_cv_src_modules\"; then\n\t\t\tcf_cv_src_modules=$cf_dir\n\t\telse\n\t\t\tcf_cv_src_modules=\"$cf_cv_src_modules $cf_dir\"\n\t\tfi\n\n\t\t# Make the ncurses_cfg.h file record the library interface files as\n\t\t# well.  These are header files that are the same name as their\n\t\t# directory.  Ncurses is the only library that does not follow\n\t\t# that pattern.\n\t\tif test $cf_dir = tack ; then\n\t\t\tcontinue\n\t\telif test -f $srcdir/${cf_dir}/${cf_dir}.h; then\n\t\t\tCF_UPPER(cf_have_include,$cf_dir)\n\t\t\tAC_DEFINE_UNQUOTED(HAVE_${cf_have_include}_H)\n\t\t\tAC_DEFINE_UNQUOTED(HAVE_LIB${cf_have_include})\n\t\t\tTEST_DEPS=\"${LIB_DIR}/${LIB_PREFIX}${cf_dir}${DFT_DEP_SUFFIX} $TEST_DEPS\"\n\t\t\tTEST_DEP2=\"${LIB_2ND}/${LIB_PREFIX}${cf_dir}${DFT_DEP_SUFFIX} $TEST_DEP2\"\n\t\t\tif test \"$DFT_LWR_MODEL\" = \"libtool\"; then\n\t\t\t\tTEST_ARGS=\"${TEST_DEPS}\"\n\t\t\t\tTEST_ARG2=\"${TEST_DEP2}\"\n\t\t\telse\n\t\t\t\tTEST_ARGS=\"-l${cf_dir}${USE_ARG_SUFFIX} $TEST_ARGS\"\n\t\t\t\tTEST_ARG2=\"-l${cf_dir}${USE_ARG_SUFFIX} $TEST_ARG2\"\n\t\t\tfi\n\t\t\tPC_MODULES_TO_MAKE=\"${PC_MODULES_TO_MAKE} ${cf_dir}${USE_ARG_SUFFIX}\"\n\t\tfi\n\tfi\ndone\nAC_MSG_RESULT($cf_cv_src_modules)\n\nTEST_ARGS=\"-L${LIB_DIR} $TEST_ARGS\"\nTEST_ARG2=\"-L${LIB_2ND} $TEST_ARG2\"\n\nAC_SUBST(TEST_ARGS)\nAC_SUBST(TEST_DEPS)\n\nAC_SUBST(TEST_ARG2)\nAC_SUBST(TEST_DEP2)\n\nSRC_SUBDIRS=\nif test \"x$cf_with_manpages\" != xno ; then\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS man\"\nfi\nSRC_SUBDIRS=\"$SRC_SUBDIRS include\"\nfor cf_dir in $cf_cv_src_modules\ndo\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS $cf_dir\"\ndone\nif test \"x$cf_with_tests\" != \"xno\" ; then\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS test\"\nfi\n# always make this, to install the ncurses-config script\nSRC_SUBDIRS=\"$SRC_SUBDIRS misc\"\nif test \"$cf_with_cxx_binding\" != no; then\n\tPC_MODULES_TO_MAKE=\"${PC_MODULES_TO_MAKE} ncurses++${USE_ARG_SUFFIX}\"\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS c++\"\nfi\n\ntest \"x$with_termlib\" != xno && PC_MODULES_TO_MAKE=\"$PC_MODULES_TO_MAKE $TINFO_ARG_SUFFIX\"\ntest \"x$with_ticlib\" != xno && PC_MODULES_TO_MAKE=\"$PC_MODULES_TO_MAKE $TICS_ARG_SUFFIX\"\n\nAC_SUBST(PC_MODULES_TO_MAKE)\n\nADA_SUBDIRS=\nif test \"x$cf_with_ada\" = \"xyes\" && test \"x$cf_cv_prog_gnat_correct\" = xyes && test -f $srcdir/Ada95/Makefile.in; then\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS Ada95\"\n\tADA_SUBDIRS=\"gen src\"\n\tif test \"x$cf_with_tests\" != \"xno\" ; then\n\t\tADA_SUBDIRS=\"$ADA_SUBDIRS samples\"\n\tfi\nfi\n\nSUB_MAKEFILES=\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tSUB_MAKEFILES=\"$SUB_MAKEFILES $cf_dir/Makefile\"\ndone\n\nif test -n \"$ADA_SUBDIRS\"; then\n\tfor cf_dir in $ADA_SUBDIRS\n\tdo\n\t\tSUB_MAKEFILES=\"$SUB_MAKEFILES Ada95/$cf_dir/Makefile\"\n\tdone\n\tAC_SUBST(ADA_SUBDIRS)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STDCPP_LIBRARY version: 11 updated: 2015/10/17 19:03:33\ndnl -----------------\ndnl Check for -lstdc++, which is GNU's standard C++ library.\ndnl If $CXXLIBS is set, add that to the libraries used for test-linking.\ndnl If -lstdc++ was not already added to $LIBS or $CXXLIBS, and is needed,\ndnl add it to $CXXLIBS.\nAC_DEFUN([CF_STDCPP_LIBRARY],\n[\nif test -n \"$GXX\" ; then\n\n\tcf_save=\"$LIBS\"\n\tLIBS=\"$LIBS $CXXLIBS\"\n\tAC_MSG_CHECKING(if we already have C++ library)\n\tAC_TRY_LINK([\n\t\t\t#include <iostream>],[\n\t\t\tstd::cout << \"Hello World!\" << std::endl;],\n\t\t[cf_have_libstdcpp=yes],\n\t\t[cf_have_libstdcpp=no])\n\tAC_MSG_RESULT($cf_have_libstdcpp)\n\tLIBS=\"$cf_save\"\n\n\tif test $cf_have_libstdcpp != yes\n\tthen\n\t\tcase $cf_cv_system_name in\n\t\t(os2*)\n\t\t\tif test -z \"`g++ -dM -E - < /dev/null | grep __KLIBC__`\"; then\n\t\t\t\tcf_stdcpp_libname=stdcpp\n\t\t\telse\n\t\t\t\tcf_stdcpp_libname=stdc++\n\t\t\tfi\n\t\t\t;;\n\t\t(*)\n\t\t\tcf_stdcpp_libname=stdc++\n\t\t\t;;\n\t\tesac\n\n\t\tAC_CACHE_CHECK(for library $cf_stdcpp_libname,cf_cv_libstdcpp,[\n\t\t\tcf_save=\"$LIBS\"\n\t\t\tLIBS=\"$LIBS $CXXLIBS\"\n\t\t\tCF_ADD_LIB($cf_stdcpp_libname)\n\t\tAC_TRY_LINK([\n\t\t\t\t#include <iostream>],[\n\t\t\t\tstd::cout << \"Hello World!\" << std::endl;],\n\t\t\t[cf_cv_libstdcpp=yes],\n\t\t\t[cf_cv_libstdcpp=no])\n\t\t\tLIBS=\"$cf_save\"\n\t\t])\n\t\ttest \"$cf_cv_libstdcpp\" = yes && { CF_ADD_LIB($cf_stdcpp_libname,CXXLIBS) }\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STRIP_G_OPT version: 3 updated: 2002/12/21 19:25:52\ndnl --------------\ndnl\tRemove \"-g\" option from the compiler options\nAC_DEFUN([CF_STRIP_G_OPT],\n[$1=`echo ${$1} | sed -e 's%-g %%' -e 's%-g$%%'`])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STRUCT_SIGACTION version: 5 updated: 2012/10/06 17:56:13\ndnl -------------------\ndnl Check if we need _POSIX_SOURCE defined to use struct sigaction.  We'll only\ndnl do this if we've found the sigaction function.\nAC_DEFUN([CF_STRUCT_SIGACTION],[\nAC_REQUIRE([CF_XOPEN_SOURCE])\n\nif test \"$ac_cv_func_sigaction\" = yes; then\nAC_MSG_CHECKING(whether sigaction needs _POSIX_SOURCE)\nAC_TRY_COMPILE([\n#include <sys/types.h>\n#include <signal.h>],\n\t[struct sigaction act],\n\t[sigact_bad=no],\n\t[\nAC_TRY_COMPILE([\n#define _POSIX_SOURCE\n#include <sys/types.h>\n#include <signal.h>],\n\t[struct sigaction act],\n\t[sigact_bad=yes\n\t AC_DEFINE(_POSIX_SOURCE,1,[Define to 1 if we must define _POSIX_SOURCE])],\n\t [sigact_bad=unknown])])\nAC_MSG_RESULT($sigact_bad)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STRUCT_TERMIOS version: 9 updated: 2018/06/08 21:57:23\ndnl -----------------\ndnl Some machines require _POSIX_SOURCE to completely define struct termios.\nAC_DEFUN([CF_STRUCT_TERMIOS],[\nAC_REQUIRE([CF_XOPEN_SOURCE])\n\nAC_CHECK_HEADERS( \\\ntermio.h \\\ntermios.h \\\nunistd.h \\\nsys/ioctl.h \\\nsys/termio.h \\\n)\n\nif test \"$ac_cv_header_termios_h\" = yes ; then\n\tcase \"$CFLAGS $CPPFLAGS\" in\n\t(*-D_POSIX_SOURCE*)\n\t\ttermios_bad=dunno ;;\n\t(*)\ttermios_bad=maybe ;;\n\tesac\n\tif test \"$termios_bad\" = maybe ; then\n\tAC_MSG_CHECKING(whether termios.h needs _POSIX_SOURCE)\n\tAC_TRY_COMPILE([#include <termios.h>],\n\t\t[struct termios foo; int x = foo.c_iflag],\n\t\ttermios_bad=no, [\n\t\tAC_TRY_COMPILE([\n#define _POSIX_SOURCE\n#include <termios.h>],\n\t\t\t[struct termios foo; int x = foo.c_iflag],\n\t\t\ttermios_bad=unknown,\n\t\t\ttermios_bad=yes AC_DEFINE(_POSIX_SOURCE,1,[Define to 1 if we must define _POSIX_SOURCE]))\n\t\t\t])\n\tAC_MSG_RESULT($termios_bad)\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SUBDIR_PATH version: 7 updated: 2014/12/04 04:33:06\ndnl --------------\ndnl Construct a search-list for a nonstandard header/lib-file\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\ndnl\t$3 = the subdirectory, e.g., bin, include or lib\nAC_DEFUN([CF_SUBDIR_PATH],\n[\n$1=\n\nCF_ADD_SUBDIR_PATH($1,$2,$3,$prefix,NONE)\n\nfor cf_subdir_prefix in \\\n\t/usr \\\n\t/usr/local \\\n\t/usr/pkg \\\n\t/opt \\\n\t/opt/local \\\n\t[$]HOME\ndo\n\tCF_ADD_SUBDIR_PATH($1,$2,$3,$cf_subdir_prefix,$prefix)\ndone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SUBST_IF version: 2 updated: 2006/06/17 12:33:03\ndnl -----------\ndnl\tShorthand macro for substituting things that the user may override\ndnl\twith an environment variable.\ndnl\ndnl\t$1 = condition to pass to \"test\"\ndnl\t$2 = environment variable\ndnl\t$3 = value if the test succeeds\ndnl\t$4 = value if the test fails\nAC_DEFUN([CF_SUBST_IF],\n[\nif test $1 ; then\n\t$2=$3\nifelse($4,,,[else\n\t$2=$4])\nfi\nAC_SUBST($2)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SUBST_NCURSES_VERSION version: 8 updated: 2006/09/16 11:40:59\ndnl ------------------------\ndnl Get the version-number for use in shared-library naming, etc.\nAC_DEFUN([CF_SUBST_NCURSES_VERSION],\n[\nAC_REQUIRE([CF_PROG_EGREP])\nNCURSES_MAJOR=\"`$ac_cv_prog_egrep '^NCURSES_MAJOR[[ \t]]*=' $srcdir/dist.mk | sed -e 's/^[[^0-9]]*//'`\"\nNCURSES_MINOR=\"`$ac_cv_prog_egrep '^NCURSES_MINOR[[ \t]]*=' $srcdir/dist.mk | sed -e 's/^[[^0-9]]*//'`\"\nNCURSES_PATCH=\"`$ac_cv_prog_egrep '^NCURSES_PATCH[[ \t]]*=' $srcdir/dist.mk | sed -e 's/^[[^0-9]]*//'`\"\ncf_cv_abi_version=${NCURSES_MAJOR}\ncf_cv_rel_version=${NCURSES_MAJOR}.${NCURSES_MINOR}\ndnl Show the computed version, for logging\ncf_cv_timestamp=`date`\nAC_MSG_RESULT(Configuring NCURSES $cf_cv_rel_version ABI $cf_cv_abi_version ($cf_cv_timestamp))\ndnl We need these values in the generated headers\nAC_SUBST(NCURSES_MAJOR)\nAC_SUBST(NCURSES_MINOR)\nAC_SUBST(NCURSES_PATCH)\ndnl We need these values in the generated makefiles\nAC_SUBST(cf_cv_rel_version)\nAC_SUBST(cf_cv_abi_version)\nAC_SUBST(cf_cv_builtin_bool)\nAC_SUBST(cf_cv_header_stdbool_h)\nAC_SUBST(cf_cv_type_of_bool)dnl\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SYS_TIME_SELECT version: 6 updated: 2015/04/18 08:56:57\ndnl ------------------\ndnl Check if we can include <sys/time.h> with <sys/select.h>; this breaks on\ndnl older SCO configurations.\nAC_DEFUN([CF_SYS_TIME_SELECT],\n[\nAC_MSG_CHECKING(if sys/time.h works with sys/select.h)\nAC_CACHE_VAL(cf_cv_sys_time_select,[\nAC_TRY_COMPILE([\n#include <sys/types.h>\n#ifdef HAVE_SYS_TIME_H\n#include <sys/time.h>\n#endif\n#ifdef HAVE_SYS_SELECT_H\n#include <sys/select.h>\n#endif\n],[],[cf_cv_sys_time_select=yes],\n\t [cf_cv_sys_time_select=no])\n\t ])\nAC_MSG_RESULT($cf_cv_sys_time_select)\ntest \"$cf_cv_sys_time_select\" = yes && AC_DEFINE(HAVE_SYS_TIME_SELECT,1,[Define to 1 if we can include <sys/time.h> with <sys/select.h>])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_TOP_BUILDDIR version: 2 updated: 2013/07/27 17:38:32\ndnl ---------------\ndnl Define a top_builddir symbol, for applications that need an absolute path.\nAC_DEFUN([CF_TOP_BUILDDIR],\n[\ntop_builddir=ifelse($1,,`pwd`,$1)\nAC_SUBST(top_builddir)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_TRY_PKG_CONFIG version: 5 updated: 2013/07/06 21:27:06\ndnl -----------------\ndnl This is a simple wrapper to use for pkg-config, for libraries which may be\ndnl available in that form.\ndnl\ndnl $1 = package name\ndnl $2 = extra logic to use, if any, after updating CFLAGS and LIBS\ndnl $3 = logic to use if pkg-config does not have the package\nAC_DEFUN([CF_TRY_PKG_CONFIG],[\nAC_REQUIRE([CF_PKG_CONFIG])\n\nif test \"$PKG_CONFIG\" != none && \"$PKG_CONFIG\" --exists $1; then\n\tCF_VERBOSE(found package $1)\n\tcf_pkgconfig_incs=\"`$PKG_CONFIG --cflags $1 2>/dev/null`\"\n\tcf_pkgconfig_libs=\"`$PKG_CONFIG --libs   $1 2>/dev/null`\"\n\tCF_VERBOSE(package $1 CFLAGS: $cf_pkgconfig_incs)\n\tCF_VERBOSE(package $1 LIBS: $cf_pkgconfig_libs)\n\tCF_ADD_CFLAGS($cf_pkgconfig_incs)\n\tCF_ADD_LIBS($cf_pkgconfig_libs)\n\tifelse([$2],,:,[$2])\nelse\n\tcf_pkgconfig_incs=\n\tcf_pkgconfig_libs=\n\tifelse([$3],,:,[$3])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_TRY_XOPEN_SOURCE version: 2 updated: 2018/06/20 20:23:13\ndnl -------------------\ndnl If _XOPEN_SOURCE is not defined in the compile environment, check if we\ndnl can define it successfully.\nAC_DEFUN([CF_TRY_XOPEN_SOURCE],[\nAC_CACHE_CHECK(if we should define _XOPEN_SOURCE,cf_cv_xopen_source,[\n\tAC_TRY_COMPILE([\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n],[\n#ifndef _XOPEN_SOURCE\nmake an error\n#endif],\n\t[cf_cv_xopen_source=no],\n\t[cf_save=\"$CPPFLAGS\"\n\t CF_APPEND_TEXT(CPPFLAGS,-D_XOPEN_SOURCE=$cf_XOPEN_SOURCE)\n\t AC_TRY_COMPILE([\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n],[\n#ifdef _XOPEN_SOURCE\nmake an error\n#endif],\n\t[cf_cv_xopen_source=no],\n\t[cf_cv_xopen_source=$cf_XOPEN_SOURCE])\n\tCPPFLAGS=\"$cf_save\"\n\t])\n])\n\nif test \"$cf_cv_xopen_source\" != no ; then\n\tCF_REMOVE_DEFINE(CFLAGS,$CFLAGS,_XOPEN_SOURCE)\n\tCF_REMOVE_DEFINE(CPPFLAGS,$CPPFLAGS,_XOPEN_SOURCE)\n\tcf_temp_xopen_source=\"-D_XOPEN_SOURCE=$cf_cv_xopen_source\"\n\tCF_ADD_CFLAGS($cf_temp_xopen_source)\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_TYPEOF_CHTYPE version: 10 updated: 2017/01/21 11:06:25\ndnl ----------------\ndnl Determine the type we should use for chtype (and attr_t, which is treated\ndnl as the same thing).  We want around 32 bits, so on most machines want a\ndnl long, but on newer 64-bit machines, probably want an int.  If we're using\ndnl wide characters, we have to have a type compatible with that, as well.\nAC_DEFUN([CF_TYPEOF_CHTYPE],\n[\nAC_MSG_CHECKING([for type of chtype])\nAC_CACHE_VAL(cf_cv_typeof_chtype,[\n\t\tAC_TRY_RUN([\n#define WANT_BITS 31\n#include <stdio.h>\nint main(void)\n{\n\tFILE *fp = fopen(\"cf_test.out\", \"w\");\n\tif (fp != 0) {\n\t\tchar *result = \"long\";\n\t\tif (sizeof(unsigned long) > sizeof(unsigned int)) {\n\t\t\tint n;\n\t\t\tunsigned int x, y;\n\t\t\tfor (n = 0; n < WANT_BITS; n++) {\n\t\t\t\tx = (1 << n);\n\t\t\t\ty = (x >> n);\n\t\t\t\tif (y != 1 || x == 0) {\n\t\t\t\t\tx = 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*\n\t\t\t * If x is nonzero, an int is big enough for the bits\n\t\t\t * that we want.\n\t\t\t */\n\t\t\tresult = (x != 0) ? \"int\" : \"long\";\n\t\t}\n\t\tfputs(result, fp);\n\t\tfclose(fp);\n\t}\n\t${cf_cv_main_return:-return}(0);\n}\n\t\t],\n\t\t[cf_cv_typeof_chtype=`cat cf_test.out`],\n\t\t[cf_cv_typeof_chtype=long],\n\t\t[cf_cv_typeof_chtype=long])\n\t\trm -f cf_test.out\n\t])\nAC_MSG_RESULT($cf_cv_typeof_chtype)\n\nAC_SUBST(cf_cv_typeof_chtype)\nAC_DEFINE_UNQUOTED(TYPEOF_CHTYPE,$cf_cv_typeof_chtype,[Define to actual type if needed for chtype])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_TYPE_SIGACTION version: 4 updated: 2012/10/06 17:56:13\ndnl -----------------\ndnl\nAC_DEFUN([CF_TYPE_SIGACTION],\n[\nAC_MSG_CHECKING([for type sigaction_t])\nAC_CACHE_VAL(cf_cv_type_sigaction,[\n\tAC_TRY_COMPILE([\n#include <signal.h>],\n\t\t[sigaction_t x],\n\t\t[cf_cv_type_sigaction=yes],\n\t\t[cf_cv_type_sigaction=no])])\nAC_MSG_RESULT($cf_cv_type_sigaction)\ntest \"$cf_cv_type_sigaction\" = yes && AC_DEFINE(HAVE_TYPE_SIGACTION,1,[Define to 1 if we have the sigaction_t type])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_UNSIGNED_LITERALS version: 2 updated: 1998/02/07 22:10:16\ndnl --------------------\ndnl Test if the compiler supports 'U' and 'L' suffixes.  Only old compilers\ndnl won't, but they're still there.\nAC_DEFUN([CF_UNSIGNED_LITERALS],\n[\nAC_MSG_CHECKING([if unsigned literals are legal])\nAC_CACHE_VAL(cf_cv_unsigned_literals,[\n\tAC_TRY_COMPILE([],[long x = 1L + 1UL + 1U + 1],\n\t\t[cf_cv_unsigned_literals=yes],\n\t\t[cf_cv_unsigned_literals=no])\n\t])\nAC_MSG_RESULT($cf_cv_unsigned_literals)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_UPPER version: 5 updated: 2001/01/29 23:40:59\ndnl --------\ndnl Make an uppercase version of a variable\ndnl $1=uppercase($2)\nAC_DEFUN([CF_UPPER],\n[\n$1=`echo \"$2\" | sed y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%`\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_UTF8_LIB version: 8 updated: 2012/10/06 08:57:51\ndnl -----------\ndnl Check for multibyte support, and if not found, utf8 compatibility library\nAC_DEFUN([CF_UTF8_LIB],\n[\nAC_CACHE_CHECK(for multibyte character support,cf_cv_utf8_lib,[\n\tcf_save_LIBS=\"$LIBS\"\n\tAC_TRY_LINK([\n#include <stdlib.h>],[putwc(0,0);],\n\t[cf_cv_utf8_lib=yes],\n\t[CF_FIND_LINKAGE([\n#include <libutf8.h>],[putwc(0,0);],utf8,\n\t\t[cf_cv_utf8_lib=add-on],\n\t\t[cf_cv_utf8_lib=no])\n])])\n\n# HAVE_LIBUTF8_H is used by ncurses if curses.h is shared between\n# ncurses/ncursesw:\nif test \"$cf_cv_utf8_lib\" = \"add-on\" ; then\n\tAC_DEFINE(HAVE_LIBUTF8_H,1,[Define to 1 if we should include libutf8.h])\n\tCF_ADD_INCDIR($cf_cv_header_path_utf8)\n\tCF_ADD_LIBDIR($cf_cv_library_path_utf8)\n\tCF_ADD_LIBS($cf_cv_library_file_utf8)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_VA_COPY version: 6 updated: 2018/12/04 18:14:25\ndnl ----------\ndnl check for va_copy, part of stdarg.h starting with ISO C 1999.\ndnl Also, workaround for glibc's __va_copy, by checking for both.\ndnl Finally, try to accommodate pre-ISO C 1999 headers.\nAC_DEFUN([CF_VA_COPY],[\nAC_CACHE_CHECK(for va_copy, cf_cv_have_va_copy,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tstatic va_list dst;\n\tstatic va_list src;\n\tva_copy(dst, src)],\n\tcf_cv_have_va_copy=yes,\n\tcf_cv_have_va_copy=no)])\n\nif test \"$cf_cv_have_va_copy\" = yes;\nthen\n\tAC_DEFINE(HAVE_VA_COPY,1,[Define to 1 if we have va_copy])\nelse # !cf_cv_have_va_copy\n\nAC_CACHE_CHECK(for __va_copy, cf_cv_have___va_copy,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tstatic va_list dst;\n\tstatic va_list src;\n\t__va_copy(dst, src)],\n\tcf_cv_have___va_copy=yes,\n\tcf_cv_have___va_copy=no)])\n\nif test \"$cf_cv_have___va_copy\" = yes\nthen\n\tAC_DEFINE(HAVE___VA_COPY,1,[Define to 1 if we have __va_copy])\nelse # !cf_cv_have___va_copy\n\nAC_CACHE_CHECK(for __builtin_va_copy, cf_cv_have___builtin_va_copy,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tstatic va_list dst;\n\tstatic va_list src;\n\t__builtin_va_copy(dst, src)],\n\tcf_cv_have___builtin_va_copy=yes,\n\tcf_cv_have___builtin_va_copy=no)])\n\ntest \"$cf_cv_have___builtin_va_copy\" = yes &&\n\tAC_DEFINE(HAVE___BUILTIN_VA_COPY,1,[Define to 1 if we have __builtin_va_copy])\n\nfi # cf_cv_have___va_copy\n\nfi # cf_cv_have_va_copy\n\ncase \"${cf_cv_have_va_copy}${cf_cv_have___va_copy}${cf_cv_have___builtin_va_copy}\" in\n(*yes*)\n\t;;\n\n(*)\n\tAC_CACHE_CHECK(if we can simply copy va_list, cf_cv_pointer_va_list,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tva_list dst;\n\tva_list src;\n\tdst = src],\n\tcf_cv_pointer_va_list=yes,\n\tcf_cv_pointer_va_list=no)])\n\n\tif test \"$cf_cv_pointer_va_list\" = no\n\tthen\n\t\tAC_CACHE_CHECK(if we can copy va_list indirectly, cf_cv_array_va_list,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tva_list dst;\n\tva_list src;\n\t*dst = *src],\n\t\t\tcf_cv_array_va_list=yes,\n\t\t\tcf_cv_array_va_list=no)])\n\t\ttest \"$cf_cv_array_va_list\" = yes && AC_DEFINE(ARRAY_VA_LIST,1,[Define to 1 if we can copy va_list indirectly])\n\tfi\n\t;;\nesac\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_VERBOSE version: 3 updated: 2007/07/29 09:55:12\ndnl ----------\ndnl Use AC_VERBOSE w/o the warnings\nAC_DEFUN([CF_VERBOSE],\n[test -n \"$verbose\" && echo \"\t$1\" 1>&AC_FD_MSG\nCF_MSG_LOG([$1])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_VERSION_INFO version: 7 updated: 2015/04/17 21:13:04\ndnl ---------------\ndnl Define several useful symbols derived from the VERSION file.  A separate\ndnl file is preferred to embedding the version numbers in various scripts.\ndnl (automake is a textbook-example of why the latter is a bad idea, but there\ndnl are others).\ndnl\ndnl The file contents are:\ndnl\tlibtool-version\trelease-version\tpatch-version\ndnl or\ndnl\trelease-version\ndnl where\ndnl\tlibtool-version (see ?) consists of 3 integers separated by '.'\ndnl\trelease-version consists of a major version and minor version\ndnl\t\tseparated by '.', optionally followed by a patch-version\ndnl\t\tseparated by '-'.  The minor version need not be an\ndnl\t\tinteger (but it is preferred).\ndnl\tpatch-version is an integer in the form yyyymmdd, so ifdef's and\ndnl\t\tscripts can easily compare versions.\ndnl\ndnl If libtool is used, the first form is required, since CF_WITH_LIBTOOL\ndnl simply extracts the first field using 'cut -f1'.\ndnl\ndnl Optional parameters:\ndnl $1 = internal name for package\ndnl $2 = external name for package\nAC_DEFUN([CF_VERSION_INFO],\n[\nif test -f $srcdir/VERSION ; then\n\tAC_MSG_CHECKING(for package version)\n\n\t# if there are not enough fields, cut returns the last one...\n\tcf_field1=`sed -e '2,$d' $srcdir/VERSION|cut -f1`\n\tcf_field2=`sed -e '2,$d' $srcdir/VERSION|cut -f2`\n\tcf_field3=`sed -e '2,$d' $srcdir/VERSION|cut -f3`\n\n\t# this is how CF_BUNDLED_INTL uses $VERSION:\n\tVERSION=\"$cf_field1\"\n\n\tVERSION_MAJOR=`echo \"$cf_field2\" | sed -e 's/\\..*//'`\n\ttest -z \"$VERSION_MAJOR\" && AC_MSG_ERROR(missing major-version)\n\n\tVERSION_MINOR=`echo \"$cf_field2\" | sed -e 's/^[[^.]]*\\.//' -e 's/-.*//'`\n\ttest -z \"$VERSION_MINOR\" && AC_MSG_ERROR(missing minor-version)\n\n\tAC_MSG_RESULT(${VERSION_MAJOR}.${VERSION_MINOR})\n\n\tAC_MSG_CHECKING(for package patch date)\n\tVERSION_PATCH=`echo \"$cf_field3\" | sed -e 's/^[[^-]]*-//'`\n\tcase .$VERSION_PATCH in\n\t(.)\n\t\tAC_MSG_ERROR(missing patch-date $VERSION_PATCH)\n\t\t;;\n\t(.[[0-9]][[0-9]][[0-9]][[0-9]][[0-9]][[0-9]][[0-9]][[0-9]])\n\t\t;;\n\t(*)\n\t\tAC_MSG_ERROR(illegal patch-date $VERSION_PATCH)\n\t\t;;\n\tesac\n\tAC_MSG_RESULT($VERSION_PATCH)\nelse\n\tAC_MSG_ERROR(did not find $srcdir/VERSION)\nfi\n\n# show the actual data that we have for versions:\nCF_VERBOSE(ABI VERSION $VERSION)\nCF_VERBOSE(VERSION_MAJOR $VERSION_MAJOR)\nCF_VERBOSE(VERSION_MINOR $VERSION_MINOR)\nCF_VERBOSE(VERSION_PATCH $VERSION_PATCH)\n\nAC_SUBST(VERSION)\nAC_SUBST(VERSION_MAJOR)\nAC_SUBST(VERSION_MINOR)\nAC_SUBST(VERSION_PATCH)\n\ndnl if a package name is given, define its corresponding version info.  We\ndnl need the package name to ensure that the defined symbols are unique.\nifelse($1,,,[\n\tcf_PACKAGE=$1\n\tPACKAGE=ifelse($2,,$1,$2)\n\tAC_DEFINE_UNQUOTED(PACKAGE, \"$PACKAGE\",[Define to the package-name])\n\tAC_SUBST(PACKAGE)\n\tCF_UPPER(cf_PACKAGE,$cf_PACKAGE)\n\tAC_DEFINE_UNQUOTED(${cf_PACKAGE}_VERSION,\"${VERSION_MAJOR}.${VERSION_MINOR}\")\n\tAC_DEFINE_UNQUOTED(${cf_PACKAGE}_PATCHDATE,${VERSION_PATCH})\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WCHAR_TYPE version: 4 updated: 2012/10/06 16:39:58\ndnl -------------\ndnl Check if type wide-character type $1 is declared, and if so, which header\ndnl file is needed.  The second parameter is used to set a shell variable when\ndnl the type is not found.  The first parameter sets a shell variable for the\ndnl opposite sense.\nAC_DEFUN([CF_WCHAR_TYPE],\n[\n# This is needed on Tru64 5.0 to declare $1\nAC_CACHE_CHECK(if we must include wchar.h to declare $1,cf_cv_$1,[\nAC_TRY_COMPILE([\n#include <stdlib.h>\n#include <stdarg.h>\n#include <stdio.h>\n#ifdef HAVE_LIBUTF8_H\n#include <libutf8.h>\n#endif],\n\t[$1 state],\n\t[cf_cv_$1=no],\n\t[AC_TRY_COMPILE([\n#include <stdlib.h>\n#include <stdarg.h>\n#include <stdio.h>\n#include <wchar.h>\n#ifdef HAVE_LIBUTF8_H\n#include <libutf8.h>\n#endif],\n\t[$1 value],\n\t[cf_cv_$1=yes],\n\t[cf_cv_$1=unknown])])])\n\nif test \"$cf_cv_$1\" = yes ; then\n\tAC_DEFINE(NEED_WCHAR_H,1,[Define to 1 if we must include wchar.h])\n\tNEED_WCHAR_H=1\nfi\n\nifelse([$2],,,[\n# if we do not find $1 in either place, use substitution to provide a fallback.\nif test \"$cf_cv_$1\" = unknown ; then\n\t$2=1\nfi\n])\nifelse($3,,,[\n# if we find $1 in either place, use substitution to provide a fallback.\nif test \"$cf_cv_$1\" != unknown ; then\n\t$3=1\nfi\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WEAK_SYMBOLS version: 1 updated: 2008/08/16 19:18:06\ndnl ---------------\ndnl Check for compiler-support for weak symbols.\ndnl This works with \"recent\" gcc.\nAC_DEFUN([CF_WEAK_SYMBOLS],[\nAC_CACHE_CHECK(if $CC supports weak symbols,cf_cv_weak_symbols,[\n\nAC_TRY_COMPILE([\n#include <stdio.h>],\n[\n#if defined(__GNUC__)\n#  if defined __USE_ISOC99\n#    define _cat_pragma(exp)\t_Pragma(#exp)\n#    define _weak_pragma(exp)\t_cat_pragma(weak name)\n#  else\n#    define _weak_pragma(exp)\n#  endif\n#  define _declare(name)\t__extension__ extern __typeof__(name) name\n#  define weak_symbol(name)\t_weak_pragma(name) _declare(name) __attribute__((weak))\n#endif\n\nweak_symbol(fopen);\n],[cf_cv_weak_symbols=yes],[cf_cv_weak_symbols=no])\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ABI_VERSION version: 3 updated: 2015/06/06 16:10:11\ndnl -------------------\ndnl Allow library's ABI to be overridden.  Generally this happens when a\ndnl packager has incremented the ABI past that used in the original package,\ndnl and wishes to keep doing this.\ndnl\ndnl $1 is the package name, if any, to derive a corresponding {package}_ABI\ndnl symbol.\nAC_DEFUN([CF_WITH_ABI_VERSION],[\ntest -z \"$cf_cv_abi_version\" && cf_cv_abi_version=0\nAC_ARG_WITH(abi-version,\n[  --with-abi-version=XXX  override derived ABI version],[\n\tif test \"x$cf_cv_abi_version\" != \"x$withval\"\n\tthen\n\t\tAC_MSG_WARN(overriding ABI version $cf_cv_abi_version to $withval)\n\t\tcase $cf_cv_rel_version in\n\t\t(5.*)\n\t\t\tcf_cv_rel_version=$withval.0\n\t\t\t;;\n\t\t(6.*)\n\t\t\tcf_cv_rel_version=$withval.9\t# FIXME: should be 10 as of 6.0 release\n\t\t\t;;\n\t\tesac\n\tfi\n\tcf_cv_abi_version=$withval])\n\tCF_NUMBER_SYNTAX($cf_cv_abi_version,ABI version)\nifelse($1,,,[\n$1_ABI=$cf_cv_abi_version\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_COMPILER version: 2 updated: 2010/06/26 17:35:58\ndnl --------------------\ndnl Command-line option to specify the Ada95 compiler.\nAC_DEFUN([CF_WITH_ADA_COMPILER],[\nAC_MSG_CHECKING(for ada-compiler)\nAC_ARG_WITH(ada-compiler,\n\t[  --with-ada-compiler=CMD specify Ada95 compiler command (default gnatmake)],\n\t[cf_ada_compiler=$withval],\n\t[cf_ada_compiler=gnatmake])\nAC_SUBST(cf_ada_compiler)\nAC_MSG_RESULT($cf_ada_compiler)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_INCLUDE version: 2 updated: 2010/06/26 17:35:58\ndnl -------------------\ndnl Command-line option to specify where Ada includes will install.\nAC_DEFUN([CF_WITH_ADA_INCLUDE],[\nAC_MSG_CHECKING(for ada-include)\nCF_WITH_PATH(ada-include,\n   [  --with-ada-include=DIR  Ada includes are in DIR],\n   ADA_INCLUDE,\n   PREFIX/share/ada/adainclude,\n   [$]prefix/share/ada/adainclude)\nAC_SUBST(ADA_INCLUDE)\nAC_MSG_RESULT($ADA_INCLUDE)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_LIBNAME version: 1 updated: 2019/09/07 18:59:41\ndnl -------------------\ndnl CF_WITH_ADA_LIBNAME\ndnl -------------------\ndnl Command-line option to specify how to name the resulting Ada library.\ndnl $1 = default value\nAC_DEFUN([CF_WITH_ADA_LIBNAME],[\nAC_MSG_CHECKING(for ada-libname)\nAC_ARG_WITH(ada-libname,\n   [  --with-ada-libname=XXX  override default Ada library-name],\n   ADA_LIBNAME=[$]withval,\n   ADA_LIBNAME=$1)\ncase \"x$ADA_LIBNAME\" in\n(x|xyes|xno)\n\tADA_LIBNAME=$1\n\t;;\nesac\nAC_SUBST(ADA_LIBNAME)\nAC_MSG_RESULT($ADA_LIBNAME)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_OBJECTS version: 2 updated: 2010/06/26 17:35:58\ndnl -------------------\ndnl Command-line option to specify where Ada objects will install.\nAC_DEFUN([CF_WITH_ADA_OBJECTS],[\nAC_MSG_CHECKING(for ada-objects)\nCF_WITH_PATH(ada-objects,\n   [  --with-ada-objects=DIR  Ada objects are in DIR],\n   ADA_OBJECTS,\n   PREFIX/lib/ada/adalib,\n   [$]prefix/lib/ada/adalib)\nAC_SUBST(ADA_OBJECTS)\nAC_MSG_RESULT($ADA_OBJECTS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_SHAREDLIB version: 5 updated: 2018/07/21 19:10:35\ndnl ---------------------\ndnl Command-line option to specify if an Ada95 shared-library should be built,\ndnl and optionally what its soname should be.\nAC_DEFUN([CF_WITH_ADA_SHAREDLIB],[\nAC_REQUIRE([CF_GNAT_PROJECTS])\nAC_MSG_CHECKING(if an Ada95 shared-library should be built)\nAC_ARG_WITH(ada-sharedlib,\n\t[  --with-ada-sharedlib=soname build shared-library (requires GNAT projects)],\n\t[with_ada_sharedlib=$withval],\n\t[with_ada_sharedlib=no])\nAC_MSG_RESULT($with_ada_sharedlib)\n\nif test \"x$with_ada_sharedlib\" != xno\nthen\n\tif test \"x$cf_gnat_projects\" != xyes\n\tthen\n\t\tAC_MSG_WARN(disabling shared-library since GNAT projects are not supported)\n\t\twith_ada_sharedlib=no\n\tfi\nfi\n\nADA_SHAREDLIB='lib$(LIB_NAME).so.1'\nMAKE_ADA_SHAREDLIB=\"#\"\n\nif test \"x$with_ada_sharedlib\" != xno\nthen\n\tMAKE_ADA_SHAREDLIB=\n\tif test \"x$with_ada_sharedlib\" != xyes\n\tthen\n\t\tADA_SHAREDLIB=\"$with_ada_sharedlib\"\n\tfi\nfi\n\nAC_SUBST(ADA_SHAREDLIB)\nAC_SUBST(MAKE_ADA_SHAREDLIB)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_DBMALLOC version: 7 updated: 2010/06/21 17:26:47\ndnl ----------------\ndnl Configure-option for dbmalloc.  The optional parameter is used to override\ndnl the updating of $LIBS, e.g., to avoid conflict with subsequent tests.\nAC_DEFUN([CF_WITH_DBMALLOC],[\nCF_NO_LEAKS_OPTION(dbmalloc,\n\t[  --with-dbmalloc         test: use Conor Cahill's dbmalloc library],\n\t[USE_DBMALLOC])\n\nif test \"$with_dbmalloc\" = yes ; then\n\tAC_CHECK_HEADER(dbmalloc.h,\n\t\t[AC_CHECK_LIB(dbmalloc,[debug_malloc]ifelse([$1],,[],[,$1]))])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_DMALLOC version: 7 updated: 2010/06/21 17:26:47\ndnl ---------------\ndnl Configure-option for dmalloc.  The optional parameter is used to override\ndnl the updating of $LIBS, e.g., to avoid conflict with subsequent tests.\nAC_DEFUN([CF_WITH_DMALLOC],[\nCF_NO_LEAKS_OPTION(dmalloc,\n\t[  --with-dmalloc          test: use Gray Watson's dmalloc library],\n\t[USE_DMALLOC])\n\nif test \"$with_dmalloc\" = yes ; then\n\tAC_CHECK_HEADER(dmalloc.h,\n\t\t[AC_CHECK_LIB(dmalloc,[dmalloc_debug]ifelse([$1],,[],[,$1]))])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_EXPORT_SYMS version: 3 updated: 2014/12/20 19:16:08\ndnl -------------------\ndnl Use this with libtool to specify the list of symbols that may be exported.\ndnl The input file contains one symbol per line; comments work with \"#\".\ndnl\ndnl $1 = basename of the \".sym\" file (default $PACKAGE)\nAC_DEFUN([CF_WITH_EXPORT_SYMS],\n[\nAC_MSG_CHECKING(if exported-symbols file should be used)\nAC_ARG_WITH(export-syms,\n\t[  --with-export-syms=XXX  limit exported symbols using libtool],\n\t[with_export_syms=$withval],\n\t[with_export_syms=no])\nif test \"x$with_export_syms\" = xyes\nthen\n\twith_export_syms='${top_srcdir}/package/ifelse($1,,${PACKAGE},[$1]).sym'\n\tAC_SUBST(PACKAGE)\nfi\nAC_MSG_RESULT($with_export_syms)\nif test \"x$with_export_syms\" != xno\nthen\n\tEXPORT_SYMS=\"-export-symbols $with_export_syms\"\n\tAC_SUBST(EXPORT_SYMS)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_GPM version: 10 updated: 2017/04/29 18:32:18\ndnl -----------\ndnl\ndnl The option parameter (if neither yes/no) is assumed to be the name of\ndnl the gpm library, e.g., for dynamic loading.\nAC_DEFUN([CF_WITH_GPM],\n[\nAC_MSG_CHECKING(if you want to link with the GPM mouse library)\nAC_ARG_WITH(gpm,\n\t[  --with-gpm              use Alessandro Rubini's GPM library],\n\t[with_gpm=$withval],\n\t[with_gpm=maybe])\nAC_MSG_RESULT($with_gpm)\n\nif test \"$with_gpm\" != no ; then\n\tAC_CHECK_HEADER(gpm.h,[\n\t\tAC_DEFINE(HAVE_GPM_H,1,[Define to 1 if we have gpm.h header])\n\t\tif test \"$with_gpm\" != yes && test \"$with_gpm\" != maybe ; then\n\t\t\tCF_VERBOSE(assuming we really have GPM library)\n\t\t\tAC_DEFINE(HAVE_LIBGPM,1,[Define to 1 if we have the gpm library])\n\t\t\twith_gpm=yes\n\t\telse\n\t\t\tAC_CHECK_LIB(gpm,Gpm_Open,[with_gpm=yes],[\n\t\t\t\tif test \"$with_gpm\" = maybe; then\n\t\t\t\t\tAC_MSG_WARN(Cannot link with GPM library)\n\t\t\t\t\twith_gpm=no\n\t\t\t\telse\n\t\t\t\t\tAC_MSG_ERROR(Cannot link with GPM library)\n\t\t\t\tfi\n\t\t\t])\n\t\tfi\n\t],[\n\t\ttest \"$with_gpm\" != maybe && AC_MSG_WARN(Cannot find GPM header)\n\t\twith_gpm=no\n\t])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_LIBTOOL version: 35 updated: 2017/08/12 07:58:51\ndnl ---------------\ndnl Provide a configure option to incorporate libtool.  Define several useful\ndnl symbols for the makefile rules.\ndnl\ndnl The reference to AC_PROG_LIBTOOL does not normally work, since it uses\ndnl macros from libtool.m4 which is in the aclocal directory of automake.\ndnl Following is a simple script which turns on the AC_PROG_LIBTOOL macro.\ndnl But that still does not work properly since the macro is expanded outside\ndnl the CF_WITH_LIBTOOL macro:\ndnl\ndnl\t#!/bin/sh\ndnl\tACLOCAL=`aclocal --print-ac-dir`\ndnl\tif test -z \"$ACLOCAL\" ; then\ndnl\t\techo cannot find aclocal directory\ndnl\t\texit 1\ndnl\telif test ! -f $ACLOCAL/libtool.m4 ; then\ndnl\t\techo cannot find libtool.m4 file\ndnl\t\texit 1\ndnl\tfi\ndnl\ndnl\tLOCAL=aclocal.m4\ndnl\tORIG=aclocal.m4.orig\ndnl\ndnl\ttrap \"mv $ORIG $LOCAL\" 0 1 2 3 15\ndnl\trm -f $ORIG\ndnl\tmv $LOCAL $ORIG\ndnl\ndnl\t# sed the LIBTOOL= assignment to omit the current directory?\ndnl\tsed -e 's/^LIBTOOL=.*/LIBTOOL=${LIBTOOL:-libtool}/' $ACLOCAL/libtool.m4 >>$LOCAL\ndnl\tcat $ORIG >>$LOCAL\ndnl\ndnl\tautoconf-257 $*\ndnl\nAC_DEFUN([CF_WITH_LIBTOOL],\n[\nAC_REQUIRE([CF_DISABLE_LIBTOOL_VERSION])\nifdef([AC_PROG_LIBTOOL],,[\nLIBTOOL=\n])\n# common library maintenance symbols that are convenient for libtool scripts:\nLIB_CREATE='${AR} -cr'\nLIB_OBJECT='${OBJECTS}'\nLIB_SUFFIX=.a\nLIB_PREP=\"$RANLIB\"\n\n# symbols used to prop libtool up to enable it to determine what it should be\n# doing:\nLIB_CLEAN=\nLIB_COMPILE=\nLIB_LINK='${CC}'\nLIB_INSTALL=\nLIB_UNINSTALL=\n\nAC_MSG_CHECKING(if you want to build libraries with libtool)\nAC_ARG_WITH(libtool,\n\t[  --with-libtool          generate libraries with libtool],\n\t[with_libtool=$withval],\n\t[with_libtool=no])\nAC_MSG_RESULT($with_libtool)\nif test \"$with_libtool\" != \"no\"; then\nifdef([AC_PROG_LIBTOOL],[\n\t# missing_content_AC_PROG_LIBTOOL{{\n\tAC_PROG_LIBTOOL\n\t# missing_content_AC_PROG_LIBTOOL}}\n],[\n\tif test \"$with_libtool\" != \"yes\" ; then\n\t\tCF_PATH_SYNTAX(with_libtool)\n\t\tLIBTOOL=$with_libtool\n\telse\n\t\tAC_CHECK_TOOLS(LIBTOOL,[libtool glibtool],none)\n\t\tCF_LIBTOOL_VERSION\n\t\tif test -z \"$cf_cv_libtool_version\" && test \"$LIBTOOL\" = libtool\n\t\tthen\n\t\t\tCF_FORGET_TOOL(LIBTOOL)\n\t\t\tAC_CHECK_TOOLS(LIBTOOL,[glibtool],none)\n\t\t\tCF_LIBTOOL_VERSION\n\t\tfi\n\tfi\n\tif test -z \"$LIBTOOL\" ; then\n\t\tAC_MSG_ERROR(Cannot find libtool)\n\tfi\n])dnl\n\tLIB_CREATE='${LIBTOOL} --mode=link ${CC} -rpath ${libdir} ${LIBTOOL_VERSION} `cut -f1 ${top_srcdir}/VERSION` ${LIBTOOL_OPTS} ${LT_UNDEF} $(LIBS) -o'\n\tLIB_OBJECT='${OBJECTS:.o=.lo}'\n\tLIB_SUFFIX=.la\n\tLIB_CLEAN='${LIBTOOL} --mode=clean'\n\tLIB_COMPILE='${LIBTOOL} --mode=compile'\n\tLIB_LINK='${LIBTOOL} --mode=link ${CC} ${LIBTOOL_OPTS}'\n\tLIB_INSTALL='${LIBTOOL} --mode=install'\n\tLIB_UNINSTALL='${LIBTOOL} --mode=uninstall'\n\tLIB_PREP=:\n\n\tCF_CHECK_LIBTOOL_VERSION\n\n\t# special hack to add -no-undefined (which libtool should do for itself)\n\tLT_UNDEF=\n\tcase \"$cf_cv_system_name\" in\n\t(cygwin*|msys*|mingw32*|os2*|uwin*|aix[[4-7]])\n\t\tLT_UNDEF=-no-undefined\n\t\t;;\n\tesac\n\tAC_SUBST([LT_UNDEF])\n\n\t# special hack to add --tag option for C++ compiler\n\tcase $cf_cv_libtool_version in\n\t(1.[[5-9]]*|[[2-9]].[[0-9.a-z]]*)\n\t\tLIBTOOL_CXX=\"$LIBTOOL --tag=CXX\"\n\t\tLIBTOOL=\"$LIBTOOL --tag=CC\"\n\t\t;;\n\t(*)\n\t\tLIBTOOL_CXX=\"$LIBTOOL\"\n\t\t;;\n\tesac\nelse\n\tLIBTOOL=\"\"\n\tLIBTOOL_CXX=\"\"\nfi\n\ntest -z \"$LIBTOOL\" && ECHO_LT=\n\nAC_SUBST(LIBTOOL)\nAC_SUBST(LIBTOOL_CXX)\nAC_SUBST(LIBTOOL_OPTS)\n\nAC_SUBST(LIB_CREATE)\nAC_SUBST(LIB_OBJECT)\nAC_SUBST(LIB_SUFFIX)\nAC_SUBST(LIB_PREP)\n\nAC_SUBST(LIB_CLEAN)\nAC_SUBST(LIB_COMPILE)\nAC_SUBST(LIB_LINK)\nAC_SUBST(LIB_INSTALL)\nAC_SUBST(LIB_UNINSTALL)\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_LIBTOOL_OPTS version: 4 updated: 2015/04/17 21:13:04\ndnl --------------------\ndnl Allow user to pass additional libtool options into the library creation\ndnl and link steps.  The main use for this is to do something like\ndnl\t./configure --with-libtool-opts=-static\ndnl to get the same behavior as automake-flavored\ndnl\t./configure --enable-static\nAC_DEFUN([CF_WITH_LIBTOOL_OPTS],[\nAC_MSG_CHECKING(for additional libtool options)\nAC_ARG_WITH(libtool-opts,\n\t[  --with-libtool-opts=XXX specify additional libtool options],\n\t[with_libtool_opts=$withval],\n\t[with_libtool_opts=no])\nAC_MSG_RESULT($with_libtool_opts)\n\ncase .$with_libtool_opts in\n(.yes|.no|.)\n\t;;\n(*)\n\tLIBTOOL_OPTS=\"$LIBTOOL_OPTS $with_libtool_opts\"\n\t;;\nesac\n\nAC_SUBST(LIBTOOL_OPTS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_LIB_PREFIX version: 1 updated: 2012/01/21 19:28:10\ndnl ------------------\ndnl Allow the library-prefix to be overridden.  OS/2 EMX originally had no\ndnl \"lib\" prefix, e.g., because it used the dll naming convention.\ndnl\ndnl $1 = variable to set\nAC_DEFUN([CF_WITH_LIB_PREFIX],\n[\nAC_MSG_CHECKING(if you want to have a library-prefix)\nAC_ARG_WITH(lib-prefix,\n\t[  --with-lib-prefix       override library-prefix],\n\t[with_lib_prefix=$withval],\n\t[with_lib_prefix=auto])\nAC_MSG_RESULT($with_lib_prefix)\n\nif test $with_lib_prefix = auto\nthen\n\tCF_LIB_PREFIX($1)\nelif test $with_lib_prefix = no\nthen\n\tLIB_PREFIX=\nelse\n\tLIB_PREFIX=$with_lib_prefix\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PATH version: 11 updated: 2012/09/29 15:04:19\ndnl ------------\ndnl Wrapper for AC_ARG_WITH to ensure that user supplies a pathname, not just\ndnl defaulting to yes/no.\ndnl\ndnl $1 = option name\ndnl $2 = help-text\ndnl $3 = environment variable to set\ndnl $4 = default value, shown in the help-message, must be a constant\ndnl $5 = default value, if it's an expression & cannot be in the help-message\ndnl\nAC_DEFUN([CF_WITH_PATH],\n[AC_ARG_WITH($1,[$2 ](default: ifelse([$4],,empty,[$4])),,\nifelse([$4],,[withval=\"${$3}\"],[withval=\"${$3:-ifelse([$5],,[$4],[$5])}\"]))dnl\nif ifelse([$5],,true,[test -n \"$5\"]) ; then\nCF_PATH_SYNTAX(withval)\nfi\neval $3=\"$withval\"\nAC_SUBST($3)dnl\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PATHLIST version: 10 updated: 2015/04/17 21:13:04\ndnl ----------------\ndnl Process an option specifying a list of colon-separated paths.\ndnl\ndnl $1 = option name\ndnl $2 = help-text\ndnl $3 = environment variable to set\ndnl $4 = default value, shown in the help-message, must be a constant\ndnl $5 = default value, if it's an expression & cannot be in the help-message\ndnl $6 = flag to tell if we want to define or substitute\ndnl\nAC_DEFUN([CF_WITH_PATHLIST],[\nAC_REQUIRE([CF_PATHSEP])\nAC_ARG_WITH($1,[$2 ](default: ifelse($4,,empty,$4)),,\nifelse($4,,[withval=${$3}],[withval=${$3:-ifelse($5,,$4,$5)}]))dnl\n\nIFS=\"${IFS:- \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${PATH_SEPARATOR}\"\ncf_dst_path=\nfor cf_src_path in $withval\ndo\n  CF_PATH_SYNTAX(cf_src_path)\n  test -n \"$cf_dst_path\" && cf_dst_path=\"${cf_dst_path}$PATH_SEPARATOR\"\n  cf_dst_path=\"${cf_dst_path}${cf_src_path}\"\ndone\nIFS=\"$ac_save_ifs\"\n\nifelse($6,define,[\n# Strip single quotes from the value, e.g., when it was supplied as a literal\n# for $4 or $5.\ncase $cf_dst_path in\n(\\'*)\n  cf_dst_path=`echo $cf_dst_path |sed -e s/\\'// -e s/\\'\\$//`\n  ;;\nesac\ncf_dst_path=`echo \"$cf_dst_path\" | sed -e 's/\\\\\\\\/\\\\\\\\\\\\\\\\/g'`\n])\n\n# This may use the prefix/exec_prefix symbols which will only yield \"NONE\"\n# so we have to check/work around.  We do prefer the result of \"eval\"...\neval cf_dst_eval=\"$cf_dst_path\"\ncase \"x$cf_dst_eval\" in\n(xNONE*)\n\t$3=$cf_dst_path\n\t;;\n(*)\n\t$3=\"$cf_dst_eval\"\n\t;;\nesac\nAC_SUBST($3)dnl\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PATH_PROG version: 1 updated: 2019/06/30 19:44:43\ndnl -----------------\ndnl Check for a given program, like CF_PATH_PROG, but allow override using a\ndnl \"--with-xxx\" option.\ndnl\ndnl Parameters:\ndnl\t\t$1 = environment variable to set/update\ndnl\t\t$2 = program name\ndnl\t\t$3 = help-text\ndnl\t\t$4 = $PATH\nAC_DEFUN([CF_WITH_PATH_PROG],[\nAC_ARG_WITH($2-path,\n\t[  --with-$2-path=XXX     specify path of $2 ifelse($3,,,$3)],\n\t[AC_MSG_CHECKING(for $2 program ifelse($3,,,$3))\n\t\t$1=$withval\n\t\tAC_MSG_RESULT([$]$1)\n\t\tCF_PATH_SYNTAX($1)\n\t],\n\t[CF_PATH_PROG($1,$2,,ifelse($4,,,$4))\n\t\tif test -z \"[$]$1\"\n\t\tthen\n\t\t\tAC_MSG_WARN(no $2 program found ifelse($3,,,$3))\n\t\tfi\n\t])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PCRE2 version: 2 updated: 2018/07/14 16:47:56\ndnl -------------\ndnl Add PCRE2 (Perl-compatible regular expressions v2) to the build if it is\ndnl available and the user requests it.  Assume the application will otherwise\ndnl use the POSIX interface.\ndnl\ndnl TODO allow $withval to specify package location\nAC_DEFUN([CF_WITH_PCRE2],\n[\nAC_REQUIRE([CF_PKG_CONFIG])\n\nAC_MSG_CHECKING(if you want to use PCRE2 for regular-expressions)\nAC_ARG_WITH(pcre2,\n\t[  --with-pcre2            use PCRE2 for regular-expressions])\ntest -z \"$with_pcre2\" && with_pcre2=no\nAC_MSG_RESULT($with_pcre2)\n\nif test \"x$with_pcre2\" != xno ; then\n\tCF_TRY_PKG_CONFIG(libpcre2,,[\n\tCF_TRY_PKG_CONFIG(libpcre,,[\n\t\t\tAC_MSG_ERROR(Cannot find PCRE2 library)])])\n\n\tAC_DEFINE(HAVE_LIB_PCRE2,1,[Define to 1 if we can/should compile with the PCRE2 library])\n\n\t# if pkgconfig gave no results, look for the libraries directly\n\tcase $LIBS in\n\t(*pcre2-posix*|*pcreposix*)\n\t\t;;\n\t(*)\n\t\tAC_CHECK_LIB(pcre2-posix,regcomp,[\n\t\t\tCF_ADD_LIB(pcre2-posix)],\n\t\t\t[AC_CHECK_LIB(pcreposix,regcomp,[\n\t\t\t CF_ADD_LIB(pcreposix)\n\t\t\t],[AC_MSG_ERROR(Cannot find PCRE2 POSIX library)])])\n\t\t;;\n\tesac\n\n\t# either way, check for the library header files\n\tAC_CHECK_HEADERS(pcre2-posix.h pcreposix.h)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PKG_CONFIG_LIBDIR version: 10 updated: 2015/08/22 17:10:56\ndnl -------------------------\ndnl Allow the choice of the pkg-config library directory to be overridden.\nAC_DEFUN([CF_WITH_PKG_CONFIG_LIBDIR],[\n\ncase $PKG_CONFIG in\n(no|none|yes)\n\tAC_MSG_CHECKING(for pkg-config library directory)\n\t;;\n(*)\n\tAC_MSG_CHECKING(for $PKG_CONFIG library directory)\n\t;;\nesac\n\nPKG_CONFIG_LIBDIR=no\nAC_ARG_WITH(pkg-config-libdir,\n\t[  --with-pkg-config-libdir=XXX use given directory for installing pc-files],\n\t[PKG_CONFIG_LIBDIR=$withval],\n\t[test \"x$PKG_CONFIG\" != xnone && PKG_CONFIG_LIBDIR=yes])\n\ncase x$PKG_CONFIG_LIBDIR in\n(x/*)\n\t;;\n(xyes)\n\t# Look for the library directory using the same prefix as the executable\n\tif test \"x$PKG_CONFIG\" = xnone\n\tthen\n\t\tcf_path=$prefix\n\telse\n\t\tcf_path=`echo \"$PKG_CONFIG\" | sed -e 's,/[[^/]]*/[[^/]]*$,,'`\n\tfi\n\n\t# If you don't like using the default architecture, you have to specify the\n\t# intended library directory and corresponding compiler/linker options.\n\t#\n\t# This case allows for Debian's 2014-flavor of multiarch, along with the\n\t# most common variations before that point.  Some other variants spell the\n\t# directory differently, e.g., \"pkg-config\", and put it in unusual places.\n\t# pkg-config has always been poorly standardized, which is ironic...\n\tcase x`(arch) 2>/dev/null` in\n\t(*64)\n\t\tcf_search_path=\"\\\n\t\t\t$cf_path/lib/*64-linux-gnu \\\n\t\t\t$cf_path/share \\\n\t\t\t$cf_path/lib64 \\\n\t\t\t$cf_path/lib32 \\\n\t\t\t$cf_path/lib\"\n\t\t;;\n\t(*)\n\t\tcf_search_path=\"\\\n\t\t\t$cf_path/lib/*-linux-gnu \\\n\t\t\t$cf_path/share \\\n\t\t\t$cf_path/lib32 \\\n\t\t\t$cf_path/lib \\\n\t\t\t$cf_path/libdata\"\n\t\t;;\n\tesac\n\n\tCF_VERBOSE(list...)\n\tfor cf_config in $cf_search_path\n\tdo\n\t\tCF_VERBOSE(checking $cf_config/pkgconfig)\n\t\tif test -d $cf_config/pkgconfig\n\t\tthen\n\t\t\tPKG_CONFIG_LIBDIR=$cf_config/pkgconfig\n\t\t\tAC_MSG_CHECKING(done)\n\t\t\tbreak\n\t\tfi\n\tdone\n\t;;\n(*)\n\t;;\nesac\n\nif test \"x$PKG_CONFIG_LIBDIR\" != xno ; then\n\tAC_MSG_RESULT($PKG_CONFIG_LIBDIR)\nfi\n\nAC_SUBST(PKG_CONFIG_LIBDIR)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PTHREAD version: 7 updated: 2015/04/18 08:56:57\ndnl ---------------\ndnl Check for POSIX thread library.\nAC_DEFUN([CF_WITH_PTHREAD],\n[\nAC_MSG_CHECKING(if you want to link with the pthread library)\nAC_ARG_WITH(pthread,\n\t[  --with-pthread          use POSIX thread library],\n\t[with_pthread=$withval],\n\t[with_pthread=no])\nAC_MSG_RESULT($with_pthread)\n\nif test \"$with_pthread\" != no ; then\n\tAC_CHECK_HEADER(pthread.h,[\n\tAC_DEFINE(HAVE_PTHREADS_H,1,[Define to 1 if we have pthreads.h header])\n\n\tfor cf_lib_pthread in pthread c_r\n\tdo\n\t    AC_MSG_CHECKING(if we can link with the $cf_lib_pthread library)\n\t    cf_save_LIBS=\"$LIBS\"\n\t    CF_ADD_LIB($cf_lib_pthread)\n\t    AC_TRY_LINK([\n#include <pthread.h>\n],[\n\t\tint rc = pthread_create(0,0,0,0);\n\t\tint r2 = pthread_mutexattr_settype(0, 0);\n],[with_pthread=yes],[with_pthread=no])\n\t    LIBS=\"$cf_save_LIBS\"\n\t    AC_MSG_RESULT($with_pthread)\n\t    test \"$with_pthread\" = yes && break\n\tdone\n\n\tif test \"$with_pthread\" = yes ; then\n\t    CF_ADD_LIB($cf_lib_pthread)\n\t    AC_DEFINE(HAVE_LIBPTHREADS,1,[Define to 1 if we have pthreads library])\n\telse\n\t    AC_MSG_ERROR(Cannot link with pthread library)\n\tfi\n\t])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_REL_VERSION version: 1 updated: 2003/09/20 18:12:49\ndnl -------------------\ndnl Allow library's release-version to be overridden.  Generally this happens when a\ndnl packager has incremented the release-version past that used in the original package,\ndnl and wishes to keep doing this.\ndnl\ndnl $1 is the package name, if any, to derive corresponding {package}_MAJOR\ndnl and {package}_MINOR symbols\ndnl symbol.\nAC_DEFUN([CF_WITH_REL_VERSION],[\ntest -z \"$cf_cv_rel_version\" && cf_cv_rel_version=0.0\nAC_ARG_WITH(rel-version,\n[  --with-rel-version=XXX  override derived release version],\n[AC_MSG_WARN(overriding release version $cf_cv_rel_version to $withval)\n cf_cv_rel_version=$withval])\nifelse($1,,[\n CF_NUMBER_SYNTAX($cf_cv_rel_version,Release version)\n],[\n $1_MAJOR=`echo \"$cf_cv_rel_version\" | sed -e 's/\\..*//'`\n $1_MINOR=`echo \"$cf_cv_rel_version\" | sed -e 's/^[[^.]]*//' -e 's/^\\.//' -e 's/\\..*//'`\n CF_NUMBER_SYNTAX([$]$1_MAJOR,Release major-version)\n CF_NUMBER_SYNTAX([$]$1_MINOR,Release minor-version)\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_SYSMOUSE version: 3 updated: 2012/10/06 17:56:13\ndnl ----------------\ndnl If we can compile with sysmouse, make it available unless it is not wanted.\nAC_DEFUN([CF_WITH_SYSMOUSE],[\n# not everyone has \"test -c\"\nif test -c /dev/sysmouse 2>/dev/null ; then\nAC_MSG_CHECKING(if you want to use sysmouse)\nAC_ARG_WITH(sysmouse,\n\t[  --with-sysmouse         use sysmouse (FreeBSD console)],\n\t[cf_with_sysmouse=$withval],\n\t[cf_with_sysmouse=maybe])\n\tif test \"$cf_with_sysmouse\" != no ; then\n\tAC_TRY_COMPILE([\n#include <osreldate.h>\n#if (__FreeBSD_version >= 400017)\n#include <sys/consio.h>\n#include <sys/fbio.h>\n#else\n#include <machine/console.h>\n#endif\n],[\n\tstruct mouse_info the_mouse;\n\tioctl(0, CONS_MOUSECTL, &the_mouse);\n],[cf_with_sysmouse=yes],[cf_with_sysmouse=no])\n\tfi\nAC_MSG_RESULT($cf_with_sysmouse)\ntest \"$cf_with_sysmouse\" = yes && AC_DEFINE(USE_SYSMOUSE,1,[Define to 1 if we can/should use the sysmouse interface])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_SYSTYPE version: 1 updated: 2013/01/26 16:26:12\ndnl ---------------\ndnl For testing, override the derived host system-type which is used to decide\ndnl things such as the linker commands used to build shared libraries.  This is\ndnl normally chosen automatically based on the type of system which you are\ndnl building on.  We use it for testing the configure script.\ndnl\ndnl This is different from the --host option: it is used only for testing parts\ndnl of the configure script which would not be reachable with --host since that\ndnl relies on the build environment being real, rather than mocked up.\nAC_DEFUN([CF_WITH_SYSTYPE],[\nCF_CHECK_CACHE([AC_CANONICAL_SYSTEM])\nAC_ARG_WITH(system-type,\n\t[  --with-system-type=XXX  test: override derived host system-type],\n[AC_MSG_WARN(overriding system type to $withval)\n\tcf_cv_system_name=$withval\n\thost_os=$withval\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_VALGRIND version: 1 updated: 2006/12/14 18:00:21\ndnl ----------------\nAC_DEFUN([CF_WITH_VALGRIND],[\nCF_NO_LEAKS_OPTION(valgrind,\n\t[  --with-valgrind         test: use valgrind],\n\t[USE_VALGRIND])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_VERSIONED_SYMS version: 8 updated: 2018/10/20 20:24:34\ndnl ----------------------\ndnl Use this when building shared library with ELF, to markup symbols with the\ndnl version identifier from the given input file.  Generally that identifier is\ndnl the same as the SONAME at which the symbol was first introduced.\ndnl\ndnl $1 = basename of the \".map\" file (default $PACKAGE)\nAC_DEFUN([CF_WITH_VERSIONED_SYMS],\n[\nAC_MSG_CHECKING(if versioned-symbols file should be used)\nAC_ARG_WITH(versioned-syms,\n\t[  --with-versioned-syms=X markup versioned symbols using ld],\n\t[with_versioned_syms=$withval],\n\t[with_versioned_syms=no])\ncase \"x$with_versioned_syms\" in\n(xyes)\n\twith_versioned_syms='${top_srcdir}/package/ifelse($1,,${PACKAGE},[$1]).map'\n\tAC_SUBST(PACKAGE)\n\t;;\n(xno)\n\t;;\n(x/*)\n\ttest -f \"$with_versioned_syms\" || AC_MSG_ERROR(expected a filename: $with_versioned_syms)\n\t;;\n(*)\n\ttest -f \"$with_versioned_syms\" || AC_MSG_ERROR(expected a filename: $with_versioned_syms)\n\twith_versioned_syms=`pwd`/\"$with_versioned_syms\"\n\t;;\nesac\nAC_MSG_RESULT($with_versioned_syms)\n\nRESULTING_SYMS=\nVERSIONED_SYMS=\nWILDCARD_SYMS=\n\nif test \"x$with_versioned_syms\" != xno\nthen\n\tRESULTING_SYMS=$with_versioned_syms\n\tcase \"x$MK_SHARED_LIB\" in\n\t(*-Wl,*)\n\t\tVERSIONED_SYMS=\"-Wl,--version-script,\\${RESULTING_SYMS}\"\n\t\tMK_SHARED_LIB=`echo \"$MK_SHARED_LIB\" | sed -e \"s%-Wl,%\\\\[$]{VERSIONED_SYMS} -Wl,%\"`\n\t\tCF_VERBOSE(MK_SHARED_LIB:  $MK_SHARED_LIB)\n\t\t;;\n\t(*-dy\\ *)\n\t\tVERSIONED_SYMS=\"-Wl,-M,\\${RESULTING_SYMS}\"\n\t\tMK_SHARED_LIB=`echo \"$MK_SHARED_LIB\" | sed -e \"s%-dy%\\\\[$]{VERSIONED_SYMS} -dy%\"`\n\t\tCF_VERBOSE(MK_SHARED_LIB:  $MK_SHARED_LIB)\n\t\t;;\n\t(*)\n\t\tAC_MSG_WARN(this system does not support versioned-symbols)\n\t\t;;\n\tesac\n\n\t# Linux ld can selectively override scope, e.g., of symbols beginning with\n\t# \"_\" by first declaring some as global, and then using a wildcard to\n\t# declare the others as local.  Some other loaders cannot do this.  Check\n\t# by constructing a (very) simple shared library and inspecting its\n\t# symbols.\n\tif test \"x$VERSIONED_SYMS\" != \"x\"\n\tthen\n\t\tAC_MSG_CHECKING(if wildcards can be used to selectively omit symbols)\n\t\tWILDCARD_SYMS=no\n\n\t\t# make sources\n\t\trm -f conftest.*\n\n\t\tcat >conftest.ver <<EOF\nmodule_1.0 {\nglobal:\n\tglobalf1;\nlocal:\n\tlocalf1;\n};\nmodule_2.0 {\nglobal:\n\tglobalf2;\nlocal:\n\tlocalf2;\n\t_*;\n} module_1.0;\nsubmodule_1.0 {\nglobal:\n\tsubglobalf1;\n\t_ismissing;\nlocal:\n\tsublocalf1;\n};\nsubmodule_2.0 {\nglobal:\n\tsubglobalf2;\nlocal:\n\tsublocalf2;\n\t_*;\n} submodule_1.0;\nEOF\n\t\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint\t_ismissing(void) { return 1; }\nint\t_localf1(void) { return 1; }\nint\t_localf2(void) { return 2; }\nint\tglobalf1(void) { return 1; }\nint\tglobalf2(void) { return 2; }\nint\t_sublocalf1(void) { return 1; }\nint\t_sublocalf2(void) { return 2; }\nint\tsubglobalf1(void) { return 1; }\nint\tsubglobalf2(void) { return 2; }\nEOF\n\t\tcat >conftest.mk <<EOF\nCC=${CC}\nCFLAGS=${CFLAGS}\nCPPFLAGS=${CPPFLAGS}\nLDFLAGS=${LDFLAGS}\nLIBS=${LIBS}\nVERSIONED_SYMS=${VERSIONED_SYMS}\nRESULTING_SYMS=conftest.ver\nMK_SHARED_LIB=${MK_SHARED_LIB}\nconftest.so: conftest.$ac_cv_objext\n\t\t\\$(MK_SHARED_LIB) conftest.$ac_cv_objext\nEOF\n\n\t\t# compile source, make library\n\t\tif make -f conftest.mk 2>&AC_FD_CC >/dev/null\n\t\tthen\n\t\t\t# test for missing symbol in either Data or Text section\n\t\t\tcf_missing=`nm -P conftest.so 2>&AC_FD_CC |fgrep _ismissing | egrep '[[ \t]][[DT]][[ \t]]'`\n\t\t\ttest -n \"$cf_missing\" && WILDCARD_SYMS=yes\n\t\tfi\n\t\tAC_MSG_RESULT($WILDCARD_SYMS)\n\t\trm -f conftest.*\n\tfi\nfi\nAC_SUBST(RESULTING_SYMS)\nAC_SUBST(VERSIONED_SYMS)\nAC_SUBST(WILDCARD_SYMS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_X11_RGB version: 2 updated: 2019/12/31 08:53:54\ndnl ---------------\ndnl Handle configure option \"--with-x11-rgb\", setting these shell\ndnl variables:\ndnl\ndnl $RGB_PATH is the option value, used for finding the X11 rgb file.\ndnl $no_x11_rgb is a \"#\" (comment) if \"--without-x11-rgb\" is given.\ndnl\ndnl Most Linux's use this:\ndnl \t/usr/share/X11/rgb.txt\ndnl Debian uses this:\ndnl \t/etc/X11/rgb.txt\ndnl DragonFlyBSD ports uses this:\ndnl \t/usr/pkg/lib/X11/rgb.txt\ndnl FreeBSD ports use these:\ndnl \t/usr/local/lib/X11/rgb.txt\ndnl \t/usr/local/share/X11/rgb.txt\ndnl Mandriva has these:\ndnl \t/usr/lib/X11/rgb.txt\ndnl \t/usr/lib64/X11/rgb.txt\ndnl NetBSD has these\ndnl \t/usr/X11R7/lib/X11/rgb.txt\ndnl OpenSolaris uses\ndnl \t32-bit:\ndnl \t/usr/X11/etc/X11/rgb.txt\ndnl \t/usr/X11/share/X11/rgb.txt\ndnl \t/usr/X11/lib/X11/rgb.txt\ndnl OSX uses\ndnl\t\t/opt/local/share/X11/rgb.txt (MacPorts)\ndnl\t\t/opt/X11/share/X11/rgb.txt (non-ports)\ndnl\t64-bit:\ndnl \t/usr/X11/etc/X11/rgb.txt\ndnl \t/usr/X11/share/X11/rgb.txt (perhaps)\ndnl \t/usr/X11/lib/amd64/X11/rgb.txt\ndnl Solaris10 uses (in this order):\ndnl \t/usr/openwin/lib/X11/rgb.txt\ndnl \t/usr/X11/lib/X11/rgb.txt\nAC_DEFUN([CF_WITH_X11_RGB],[\nAC_MSG_CHECKING(for X11 rgb file)\nAC_ARG_WITH(x11-rgb,\n\t[  --with-x11-rgb=FILE   file containing X11 rgb information (EPREFIX/lib/X11/rgb.txt)],\n\t[RGB_PATH=$withval],\n\t[RGB_PATH=auto])\n\nif test \"x[$]RGB_PATH\" = xauto\nthen\n\tRGB_PATH='${exec_prefix}/lib/X11/rgb.txt'\n\tfor cf_path in \\\n\t\t/opt/local/share/X11/rgb.txt \\\n\t\t/opt/X11/share/X11/rgb.txt \\\n\t\t/usr/share/X11/rgb.txt \\\n\t\t/usr/X11/share/X11/rgb.txt \\\n\t\t/usr/X11/lib/X11/rgb.txt \\\n\t\t/usr/lib/X11/rgb.txt \\\n\t\t/etc/X11/rgb.txt \\\n\t\t/usr/pkg/lib/X11/rgb.txt \\\n\t\t/usr/X11R7/lib/X11/rgb.txt \\\n\t\t/usr/X11R6/lib/X11/rgb.txt \\\n\t\t/usr/X11R5/lib/X11/rgb.txt \\\n\t\t/usr/X11R4/lib/X11/rgb.txt \\\n\t\t/usr/local/lib/X11/rgb.txt \\\n\t\t/usr/local/share/X11/rgb.txt \\\n\t\t/usr/lib64/X11/rgb.txt\n\tdo\n\t\tif test -f \"$cf_path\" ; then\n\t\t\tRGB_PATH=\"$cf_path\"\n\t\t\tbreak\n\t\tfi\n\tdone\nelse\n\tcf_path=$RGB_PATH\n\tCF_PATH_SYNTAX(cf_path)\nfi\n\nAC_MSG_RESULT($RGB_PATH)\nAC_SUBST(RGB_PATH)\nAC_DEFINE_UNQUOTED(RGB_PATH,\"$cf_path\",[Define to the full pathname of rgb.txt])\n\nno_x11_rgb=\nif test \"$RGB_PATH\" = no\nthen\n\tno_x11_rgb=\"#\"\nfi\nAC_SUBST(no_x11_rgb)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_XOPEN_SOURCE version: 55 updated: 2018/12/31 20:46:17\ndnl ---------------\ndnl Try to get _XOPEN_SOURCE defined properly that we can use POSIX functions,\ndnl or adapt to the vendor's definitions to get equivalent functionality,\ndnl without losing the common non-POSIX features.\ndnl\ndnl Parameters:\ndnl\t$1 is the nominal value for _XOPEN_SOURCE\ndnl\t$2 is the nominal value for _POSIX_C_SOURCE\nAC_DEFUN([CF_XOPEN_SOURCE],[\nAC_REQUIRE([AC_CANONICAL_HOST])\nAC_REQUIRE([CF_POSIX_VISIBLE])\n\nif test \"$cf_cv_posix_visible\" = no; then\n\ncf_XOPEN_SOURCE=ifelse([$1],,500,[$1])\ncf_POSIX_C_SOURCE=ifelse([$2],,199506L,[$2])\ncf_xopen_source=\n\ncase $host_os in\n(aix[[4-7]]*)\n\tcf_xopen_source=\"-D_ALL_SOURCE\"\n\t;;\n(msys)\n\tcf_XOPEN_SOURCE=600\n\t;;\n(darwin[[0-8]].*)\n\tcf_xopen_source=\"-D_APPLE_C_SOURCE\"\n\t;;\n(darwin*)\n\tcf_xopen_source=\"-D_DARWIN_C_SOURCE\"\n\tcf_XOPEN_SOURCE=\n\t;;\n(freebsd*|dragonfly*|midnightbsd*)\n\t# 5.x headers associate\n\t#\t_XOPEN_SOURCE=600 with _POSIX_C_SOURCE=200112L\n\t#\t_XOPEN_SOURCE=500 with _POSIX_C_SOURCE=199506L\n\tcf_POSIX_C_SOURCE=200112L\n\tcf_XOPEN_SOURCE=600\n\tcf_xopen_source=\"-D_BSD_TYPES -D__BSD_VISIBLE -D_POSIX_C_SOURCE=$cf_POSIX_C_SOURCE -D_XOPEN_SOURCE=$cf_XOPEN_SOURCE\"\n\t;;\n(hpux11*)\n\tcf_xopen_source=\"-D_HPUX_SOURCE -D_XOPEN_SOURCE=500\"\n\t;;\n(hpux*)\n\tcf_xopen_source=\"-D_HPUX_SOURCE\"\n\t;;\n(irix[[56]].*)\n\tcf_xopen_source=\"-D_SGI_SOURCE\"\n\tcf_XOPEN_SOURCE=\n\t;;\n(linux*|uclinux*|gnu*|mint*|k*bsd*-gnu|cygwin)\n\tCF_GNU_SOURCE($cf_XOPEN_SOURCE)\n\t;;\n(minix*)\n\tcf_xopen_source=\"-D_NETBSD_SOURCE\" # POSIX.1-2001 features are ifdef'd with this...\n\t;;\n(mirbsd*)\n\t# setting _XOPEN_SOURCE or _POSIX_SOURCE breaks <sys/select.h> and other headers which use u_int / u_short types\n\tcf_XOPEN_SOURCE=\n\tCF_POSIX_C_SOURCE($cf_POSIX_C_SOURCE)\n\t;;\n(netbsd*)\n\tcf_xopen_source=\"-D_NETBSD_SOURCE\" # setting _XOPEN_SOURCE breaks IPv6 for lynx on NetBSD 1.6, breaks xterm, is not needed for ncursesw\n\t;;\n(openbsd[[4-9]]*)\n\t# setting _XOPEN_SOURCE lower than 500 breaks g++ compile with wchar.h, needed for ncursesw\n\tcf_xopen_source=\"-D_BSD_SOURCE\"\n\tcf_XOPEN_SOURCE=600\n\t;;\n(openbsd*)\n\t# setting _XOPEN_SOURCE breaks xterm on OpenBSD 2.8, is not needed for ncursesw\n\t;;\n(osf[[45]]*)\n\tcf_xopen_source=\"-D_OSF_SOURCE\"\n\t;;\n(nto-qnx*)\n\tcf_xopen_source=\"-D_QNX_SOURCE\"\n\t;;\n(sco*)\n\t# setting _XOPEN_SOURCE breaks Lynx on SCO Unix / OpenServer\n\t;;\n(solaris2.*)\n\tcf_xopen_source=\"-D__EXTENSIONS__\"\n\tcf_cv_xopen_source=broken\n\t;;\n(sysv4.2uw2.*) # Novell/SCO UnixWare 2.x (tested on 2.1.2)\n\tcf_XOPEN_SOURCE=\n\tcf_POSIX_C_SOURCE=\n\t;;\n(*)\n\tCF_TRY_XOPEN_SOURCE\n\tCF_POSIX_C_SOURCE($cf_POSIX_C_SOURCE)\n\t;;\nesac\n\nif test -n \"$cf_xopen_source\" ; then\n\tCF_ADD_CFLAGS($cf_xopen_source,true)\nfi\n\ndnl In anything but the default case, we may have system-specific setting\ndnl which is still not guaranteed to provide all of the entrypoints that\ndnl _XOPEN_SOURCE would yield.\nif test -n \"$cf_XOPEN_SOURCE\" && test -z \"$cf_cv_xopen_source\" ; then\n\tAC_MSG_CHECKING(if _XOPEN_SOURCE really is set)\n\tAC_TRY_COMPILE([#include <stdlib.h>],[\n#ifndef _XOPEN_SOURCE\nmake an error\n#endif],\n\t[cf_XOPEN_SOURCE_set=yes],\n\t[cf_XOPEN_SOURCE_set=no])\n\tAC_MSG_RESULT($cf_XOPEN_SOURCE_set)\n\tif test $cf_XOPEN_SOURCE_set = yes\n\tthen\n\t\tAC_TRY_COMPILE([#include <stdlib.h>],[\n#if (_XOPEN_SOURCE - 0) < $cf_XOPEN_SOURCE\nmake an error\n#endif],\n\t\t[cf_XOPEN_SOURCE_set_ok=yes],\n\t\t[cf_XOPEN_SOURCE_set_ok=no])\n\t\tif test $cf_XOPEN_SOURCE_set_ok = no\n\t\tthen\n\t\t\tAC_MSG_WARN(_XOPEN_SOURCE is lower than requested)\n\t\tfi\n\telse\n\t\tCF_TRY_XOPEN_SOURCE\n\tfi\nfi\nfi # cf_cv_posix_visible\n])\n",
        "/tmp/vanessa/spack-stage/spack-stage-ncurses-6.2-v3z5jtv4ztmho7onysxesbp2wqrrbn5x/spack-src/ncurses/base/lib_mouse.c": "/****************************************************************************\n * Copyright 2018-2019,2020 Thomas E. Dickey                                *\n * Copyright 1998-2016,2017 Free Software Foundation, Inc.                  *\n *                                                                          *\n * Permission is hereby granted, free of charge, to any person obtaining a  *\n * copy of this software and associated documentation files (the            *\n * \"Software\"), to deal in the Software without restriction, including      *\n * without limitation the rights to use, copy, modify, merge, publish,      *\n * distribute, distribute with modifications, sublicense, and/or sell       *\n * copies of the Software, and to permit persons to whom the Software is    *\n * furnished to do so, subject to the following conditions:                 *\n *                                                                          *\n * The above copyright notice and this permission notice shall be included  *\n * in all copies or substantial portions of the Software.                   *\n *                                                                          *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *\n * IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *\n * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *\n * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *\n * THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *\n *                                                                          *\n * Except as contained in this notice, the name(s) of the above copyright   *\n * holders shall not be used in advertising or otherwise to promote the     *\n * sale, use or other dealings in this Software without prior written       *\n * authorization.                                                           *\n ****************************************************************************/\n\n/****************************************************************************\n *  Author: Zeyd M. Ben-Halim <zmbenhal@netcom.com> 1992,1995               *\n *     and: Eric S. Raymond <esr@snark.thyrsus.com>                         *\n *     and: Thomas E. Dickey                        1996-on                 *\n *     and: Juergen Pfeifer                         2008                    *\n ****************************************************************************/\n\n/*\n * This module is intended to encapsulate ncurses's interface to pointing\n * devices.\n *\n * The primary method used is xterm's internal mouse-tracking facility.\n * Additional methods depend on the platform:\n *\tAlessandro Rubini's GPM server (Linux)\n *\tsysmouse (FreeBSD)\n *\tspecial-purpose mouse interface for OS/2 EMX.\n *\n * Notes for implementors of new mouse-interface methods:\n *\n * The code is logically split into a lower level that accepts event reports\n * in a device-dependent format and an upper level that parses mouse gestures\n * and filters events.  The mediating data structure is a circular queue of\n * MEVENT structures.\n *\n * Functionally, the lower level's job is to pick up primitive events and\n * put them on the circular queue.  This can happen in one of two ways:\n * either (a) _nc_mouse_event() detects a series of incoming mouse reports\n * and queues them, or (b) code in lib_getch.c detects the kmous prefix in\n * the keyboard input stream and calls _nc_mouse_inline to queue up a series\n * of adjacent mouse reports.\n *\n * In either case, _nc_mouse_parse() should be called after the series is\n * accepted to parse the digested mouse reports (low-level MEVENTs) into\n * a gesture (a high-level or composite MEVENT).\n *\n * Don't be too shy about adding new event types or modifiers, if you can find\n * room for them in the 32-bit mask.  The API is written so that users get\n * feedback on which theoretical event types they won't see when they call\n * mousemask. There's one bit per button (the RESERVED_EVENT bit) not being\n * used yet, and a couple of bits open at the high end.\n */\n\n#ifdef __EMX__\n#  include <io.h>\n#  define  INCL_DOS\n#  define  INCL_VIO\n#  define  INCL_KBD\n#  define  INCL_MOU\n#  define  INCL_DOSPROCESS\n#  include <os2.h>\t\t/* Need to include before the others */\n#endif\n\n#include <curses.priv.h>\n\n#ifndef CUR\n#define CUR SP_TERMTYPE\n#endif\n\nMODULE_ID(\"$Id: lib_mouse.c,v 1.184 2020/02/02 23:34:34 tom Exp $\")\n\n#include <tic.h>\n\n#if USE_GPM_SUPPORT\n#include <linux/keyboard.h>\t/* defines KG_* macros */\n\n#ifdef HAVE_LIBDL\n/* use dynamic loader to avoid linkage dependency */\n#include <dlfcn.h>\n\n#ifdef RTLD_NOW\n#define my_RTLD RTLD_NOW\n#else\n#ifdef RTLD_LAZY\n#define my_RTLD RTLD_LAZY\n#else\nmake an error\n#endif\n#endif\t\t\t\t/* RTLD_NOW */\n#endif\t\t\t\t/* HAVE_LIBDL */\n\n#endif\t\t\t\t/* USE_GPM_SUPPORT */\n\n#if USE_SYSMOUSE\n#undef buttons\t\t\t/* symbol conflict in consio.h */\n#undef mouse_info\t\t/* symbol conflict in consio.h */\n#include <osreldate.h>\n#if defined(__DragonFly_version) || (defined(__FreeBSD__) && (__FreeBSD_version >= 400017))\n#include <sys/consio.h>\n#include <sys/fbio.h>\n#else\n#include <machine/console.h>\n#endif\n#endif\t\t\t\t/* use_SYSMOUSE */\n\n#if USE_KLIBC_MOUSE\n#include <sys/socket.h>\n#define pipe(handles) socketpair(AF_LOCAL, SOCK_STREAM, 0, handles)\n#define DosWrite(hfile, pbuffer, cbwrite, pcbactual) \\\n\t\twrite(hfile, pbuffer, cbwrite)\n#define DosExit(action, result )\t/* do nothing */\n#define DosCreateThread(ptid, pfn, param, flag, cbStack) \\\n\t\t(*(ptid) = _beginthread(pfn, NULL, cbStack, \\\n\t\t\t\t\t(void *)param), (*(ptid) == -1))\n#endif\n\n#define MY_TRACE TRACE_ICALLS|TRACE_IEVENT\n\n#define\tMASK_RELEASE(x)\t\t(mmask_t) NCURSES_MOUSE_MASK(x, 001)\n#define\tMASK_PRESS(x)\t\t(mmask_t) NCURSES_MOUSE_MASK(x, 002)\n#define\tMASK_CLICK(x)\t\t(mmask_t) NCURSES_MOUSE_MASK(x, 004)\n#define\tMASK_DOUBLE_CLICK(x)\t(mmask_t) NCURSES_MOUSE_MASK(x, 010)\n#define\tMASK_TRIPLE_CLICK(x)\t(mmask_t) NCURSES_MOUSE_MASK(x, 020)\n#define\tMASK_RESERVED_EVENT(x)\t(mmask_t) NCURSES_MOUSE_MASK(x, 040)\n\n#if NCURSES_MOUSE_VERSION == 1\n#define BUTTON_CLICKED        (BUTTON1_CLICKED        | BUTTON2_CLICKED        | BUTTON3_CLICKED        | BUTTON4_CLICKED)\n#define BUTTON_PRESSED        (BUTTON1_PRESSED        | BUTTON2_PRESSED        | BUTTON3_PRESSED        | BUTTON4_PRESSED)\n#define BUTTON_RELEASED       (BUTTON1_RELEASED       | BUTTON2_RELEASED       | BUTTON3_RELEASED       | BUTTON4_RELEASED)\n#define BUTTON_DOUBLE_CLICKED (BUTTON1_DOUBLE_CLICKED | BUTTON2_DOUBLE_CLICKED | BUTTON3_DOUBLE_CLICKED | BUTTON4_DOUBLE_CLICKED)\n#define BUTTON_TRIPLE_CLICKED (BUTTON1_TRIPLE_CLICKED | BUTTON2_TRIPLE_CLICKED | BUTTON3_TRIPLE_CLICKED | BUTTON4_TRIPLE_CLICKED)\n#define MAX_BUTTONS  4\n#else\n#define BUTTON_CLICKED        (BUTTON1_CLICKED        | BUTTON2_CLICKED        | BUTTON3_CLICKED        | BUTTON4_CLICKED        | BUTTON5_CLICKED)\n#define BUTTON_PRESSED        (BUTTON1_PRESSED        | BUTTON2_PRESSED        | BUTTON3_PRESSED        | BUTTON4_PRESSED        | BUTTON5_PRESSED)\n#define BUTTON_RELEASED       (BUTTON1_RELEASED       | BUTTON2_RELEASED       | BUTTON3_RELEASED       | BUTTON4_RELEASED       | BUTTON5_RELEASED)\n#define BUTTON_DOUBLE_CLICKED (BUTTON1_DOUBLE_CLICKED | BUTTON2_DOUBLE_CLICKED | BUTTON3_DOUBLE_CLICKED | BUTTON4_DOUBLE_CLICKED | BUTTON5_DOUBLE_CLICKED)\n#define BUTTON_TRIPLE_CLICKED (BUTTON1_TRIPLE_CLICKED | BUTTON2_TRIPLE_CLICKED | BUTTON3_TRIPLE_CLICKED | BUTTON4_TRIPLE_CLICKED | BUTTON5_TRIPLE_CLICKED)\n#define MAX_BUTTONS  5\n#endif\n\n#define INVALID_EVENT\t-1\n#define NORMAL_EVENT\t0\n\n#define ValidEvent(ep) ((ep)->id != INVALID_EVENT)\n#define Invalidate(ep) (ep)->id = INVALID_EVENT\n\n#if USE_GPM_SUPPORT\n\n#ifndef LIBGPM_SONAME\n#define LIBGPM_SONAME \"libgpm.so\"\n#endif\n\n#define GET_DLSYM(name) (my_##name = (TYPE_##name) dlsym(sp->_dlopen_gpm, #name))\n\n#endif\t\t\t\t/* USE_GPM_SUPPORT */\n\nstatic bool _nc_mouse_parse(SCREEN *, int);\nstatic void _nc_mouse_resume(SCREEN *);\nstatic void _nc_mouse_wrap(SCREEN *);\n\n/* maintain a circular list of mouse events */\n\n#define FirstEV(sp)\t((sp)->_mouse_events)\n#define LastEV(sp)\t((sp)->_mouse_events + EV_MAX - 1)\n\n#undef  NEXT\n#define NEXT(ep)\t((ep >= LastEV(SP_PARM)) \\\n\t\t\t ? FirstEV(SP_PARM) \\\n\t\t\t : ep + 1)\n\n#undef  PREV\n#define PREV(ep)\t((ep <= FirstEV(SP_PARM)) \\\n\t\t\t ? LastEV(SP_PARM) \\\n\t\t\t : ep - 1)\n\n#define IndexEV(sp, ep)\t(ep - FirstEV(sp))\n\n#define RunParams(sp, eventp, runp) \\\n\t\t(long) IndexEV(sp, runp), \\\n\t\t(long) (IndexEV(sp, eventp) + (EV_MAX - 1)) % EV_MAX\n\n#ifdef TRACE\nstatic void\n_trace_slot(SCREEN *sp, const char *tag)\n{\n    MEVENT *ep;\n\n    _tracef(\"%s\", tag);\n\n    for (ep = FirstEV(sp); ep <= LastEV(sp); ep++)\n\t_tracef(\"mouse event queue slot %ld = %s\",\n\t\t(long) IndexEV(sp, ep),\n\t\t_nc_tracemouse(sp, ep));\n}\n#endif\n\n#if USE_EMX_MOUSE\n\n#  define TOP_ROW          0\n#  define LEFT_COL         0\n\n#  define M_FD(sp) sp->_mouse_fd\n\nstatic void\nwrite_event(SCREEN *sp, int down, int button, int x, int y)\n{\n    char buf[6];\n    unsigned long ignore;\n\n    _nc_STRCPY(buf, \"\\033[M\", sizeof(buf));\t/* should be the same as key_mouse */\n    buf[3] = ' ' + (button - 1) + (down ? 0 : 0x40);\n    buf[4] = ' ' + x - LEFT_COL + 1;\n    buf[5] = ' ' + y - TOP_ROW + 1;\n    DosWrite(sp->_emxmouse_wfd, buf, 6, &ignore);\n}\n\nstatic void\n#if USE_KLIBC_MOUSE\nmouse_server(void *param)\n#else\nmouse_server(unsigned long param)\n#endif\n{\n    SCREEN *sp = (SCREEN *) param;\n    unsigned short fWait = MOU_WAIT;\n    /* NOPTRRECT mourt = { 0,0,24,79 }; */\n    MOUEVENTINFO mouev;\n    HMOU hmou;\n    unsigned short mask = MOUSE_BN1_DOWN | MOUSE_BN2_DOWN | MOUSE_BN3_DOWN;\n    int nbuttons = 3;\n    int oldstate = 0;\n    char err[80];\n    unsigned long rc;\n\n    /* open the handle for the mouse */\n    if (MouOpen(NULL, &hmou) == 0) {\n\trc = MouSetEventMask(&mask, hmou);\n\tif (rc) {\t\t/* retry with 2 buttons */\n\t    mask = MOUSE_BN1_DOWN | MOUSE_BN2_DOWN;\n\t    rc = MouSetEventMask(&mask, hmou);\n\t    nbuttons = 2;\n\t}\n\tif (rc == 0 && MouDrawPtr(hmou) == 0) {\n\t    for (;;) {\n\t\t/* sit and wait on the event queue */\n\t\trc = MouReadEventQue(&mouev, &fWait, hmou);\n\t\tif (rc) {\n\t\t    _nc_SPRINTF(err, _nc_SLIMIT(sizeof(err))\n\t\t\t\t\"Error reading mouse queue, rc=%lu.\\r\\n\", rc);\n\t\t    break;\n\t\t}\n\t\tif (!sp->_emxmouse_activated)\n\t\t    goto finish;\n\n\t\t/*\n\t\t * OS/2 numbers a 3-button mouse inconsistently from other\n\t\t * platforms:\n\t\t *      1 = left\n\t\t *      2 = right\n\t\t *      3 = middle.\n\t\t */\n\t\tif ((mouev.fs ^ oldstate) & MOUSE_BN1_DOWN)\n\t\t    write_event(sp, mouev.fs & MOUSE_BN1_DOWN,\n\t\t\t\tsp->_emxmouse_buttons[1], mouev.col, mouev.row);\n\t\tif ((mouev.fs ^ oldstate) & MOUSE_BN2_DOWN)\n\t\t    write_event(sp, mouev.fs & MOUSE_BN2_DOWN,\n\t\t\t\tsp->_emxmouse_buttons[3], mouev.col, mouev.row);\n\t\tif ((mouev.fs ^ oldstate) & MOUSE_BN3_DOWN)\n\t\t    write_event(sp, mouev.fs & MOUSE_BN3_DOWN,\n\t\t\t\tsp->_emxmouse_buttons[2], mouev.col, mouev.row);\n\n\t      finish:\n\t\toldstate = mouev.fs;\n\t    }\n\t} else {\n\t    _nc_SPRINTF(err, _nc_SLIMIT(sizeof(err))\n\t\t\t\"Error setting event mask, buttons=%d, rc=%lu.\\r\\n\",\n\t\t\tnbuttons, rc);\n\t}\n\n\tDosWrite(2, err, strlen(err), &rc);\n\tMouClose(hmou);\n    }\n    DosExit(EXIT_THREAD, 0L);\n}\n\n#endif /* USE_EMX_MOUSE */\n\n#if USE_SYSMOUSE\nstatic void\nsysmouse_server(SCREEN *sp)\n{\n    struct mouse_info the_mouse;\n    MEVENT *work;\n\n    the_mouse.operation = MOUSE_GETINFO;\n    if (sp != 0\n\t&& sp->_mouse_fd >= 0\n\t&& sp->_sysmouse_tail < FIFO_SIZE\n\t&& ioctl(sp->_mouse_fd, CONS_MOUSECTL, &the_mouse) != -1) {\n\n\tif (sp->_sysmouse_head > sp->_sysmouse_tail) {\n\t    sp->_sysmouse_tail = 0;\n\t    sp->_sysmouse_head = 0;\n\t}\n\twork = &(sp->_sysmouse_fifo[sp->_sysmouse_tail]);\n\tmemset(work, 0, sizeof(*work));\n\twork->id = NORMAL_EVENT;\t/* there's only one mouse... */\n\n\tsp->_sysmouse_old_buttons = sp->_sysmouse_new_buttons;\n\tsp->_sysmouse_new_buttons = the_mouse.u.data.buttons & 0x7;\n\n\tif (sp->_sysmouse_new_buttons) {\n\t    if (sp->_sysmouse_new_buttons & 1)\n\t\twork->bstate |= BUTTON1_PRESSED;\n\t    if (sp->_sysmouse_new_buttons & 2)\n\t\twork->bstate |= BUTTON2_PRESSED;\n\t    if (sp->_sysmouse_new_buttons & 4)\n\t\twork->bstate |= BUTTON3_PRESSED;\n\t} else {\n\t    if (sp->_sysmouse_old_buttons & 1)\n\t\twork->bstate |= BUTTON1_RELEASED;\n\t    if (sp->_sysmouse_old_buttons & 2)\n\t\twork->bstate |= BUTTON2_RELEASED;\n\t    if (sp->_sysmouse_old_buttons & 4)\n\t\twork->bstate |= BUTTON3_RELEASED;\n\t}\n\n\t/* for cosmetic bug in syscons.c on FreeBSD 3.[34] */\n\tthe_mouse.operation = MOUSE_HIDE;\n\tioctl(sp->_mouse_fd, CONS_MOUSECTL, &the_mouse);\n\tthe_mouse.operation = MOUSE_SHOW;\n\tioctl(sp->_mouse_fd, CONS_MOUSECTL, &the_mouse);\n\n\t/*\n\t * We're only interested if the button is pressed or released.\n\t * FIXME: implement continuous event-tracking.\n\t */\n\tif (sp->_sysmouse_new_buttons != sp->_sysmouse_old_buttons) {\n\t    sp->_sysmouse_tail += 1;\n\t}\n\twork->x = the_mouse.u.data.x / sp->_sysmouse_char_width;\n\twork->y = the_mouse.u.data.y / sp->_sysmouse_char_height;\n    }\n}\n\nstatic void\nhandle_sysmouse(int sig GCC_UNUSED)\n{\n    sysmouse_server(CURRENT_SCREEN);\n}\n#endif /* USE_SYSMOUSE */\n\n#ifndef USE_TERM_DRIVER\n#define xterm_kmous \"\\033[M\"\n\nstatic void\ninit_xterm_mouse(SCREEN *sp)\n{\n    sp->_mouse_type = M_XTERM;\n    sp->_mouse_format = MF_X10;\n    sp->_mouse_xtermcap = tigetstr(\"XM\");\n    if (VALID_STRING(sp->_mouse_xtermcap)) {\n\tchar *code = strstr(sp->_mouse_xtermcap, \"[?\");\n\tif (code != 0) {\n\t    code += 2;\n\t    while ((*code >= '0') && (*code <= '9')) {\n\t\tchar *next = code;\n\t\twhile ((*next >= '0') && (*next <= '9')) {\n\t\t    ++next;\n\t\t}\n\t\tif (!strncmp(code, \"1006\", (size_t) (next - code))) {\n\t\t    sp->_mouse_format = MF_SGR1006;\n\t\t}\n#ifdef EXP_XTERM_1005\n\t\tif (!strncmp(code, \"1005\", (size_t) (next - code))) {\n\t\t    sp->_mouse_format = MF_XTERM_1005;\n\t\t}\n#endif\n\t\tif (*next == ';') {\n\t\t    while (*next == ';') {\n\t\t\t++next;\n\t\t    }\n\t\t    code = next;\n\t\t} else {\n\t\t    break;\n\t\t}\n\t    }\n\t}\n    } else {\n\tint code = tigetnum(\"XM\");\n\tswitch (code) {\n\tcase 1006:\n\t    break;\n\tdefault:\n\t    code = 1000;\n\t    break;\n\t}\n\tsp->_mouse_xtermcap = \"\\033[?1000%?%p1%{1}%=%th%el%;\";\n    }\n}\n#endif\n\nstatic void\nenable_xterm_mouse(SCREEN *sp, int enable)\n{\n#if USE_EMX_MOUSE\n    sp->_emxmouse_activated = enable;\n#else\n    NCURSES_PUTP2(\"xterm-mouse\", TPARM_1(sp->_mouse_xtermcap, enable));\n#endif\n    sp->_mouse_active = enable;\n}\n\n#if USE_GPM_SUPPORT\nstatic bool\nallow_gpm_mouse(SCREEN *sp GCC_UNUSED)\n{\n    bool result = FALSE;\n\n#if USE_WEAK_SYMBOLS\n    /* Danger Robinson: do not use dlopen for libgpm if already loaded */\n    if ((Gpm_Wgetch) != 0) {\n\tif (!sp->_mouse_gpm_loaded) {\n\t    T((\"GPM library was already dlopen'd, not by us\"));\n\t}\n    } else\n#endif\n\t/* GPM does printf's without checking if stdout is a terminal */\n    if (NC_ISATTY(fileno(stdout))) {\n\tconst char *list = getenv(\"NCURSES_GPM_TERMS\");\n\tconst char *env = getenv(\"TERM\");\n\tif (list != 0) {\n\t    if (env != 0) {\n\t\tresult = _nc_name_match(list, env, \"|:\");\n\t    }\n\t} else {\n\t    /* GPM checks the beginning of the $TERM variable to decide if it\n\t     * should pass xterm events through.  There is no real advantage in\n\t     * allowing GPM to do this.  Recent versions relax that check, and\n\t     * pretend that GPM can work with any terminal having the kmous\n\t     * capability.  Perhaps that works for someone.  If so, they can\n\t     * set the environment variable (above).\n\t     */\n\t    if (env != 0 && strstr(env, \"linux\") != 0) {\n\t\tresult = TRUE;\n\t    }\n\t}\n    }\n    return result;\n}\n\n#ifdef HAVE_LIBDL\nstatic void\nunload_gpm_library(SCREEN *sp)\n{\n    if (sp->_dlopen_gpm != 0) {\n\tT((\"unload GPM library\"));\n\tsp->_mouse_gpm_loaded = FALSE;\n\tsp->_mouse_fd = -1;\n\tdlclose(sp->_dlopen_gpm);\n\tsp->_dlopen_gpm = 0;\n    }\n}\n\nstatic void\nload_gpm_library(SCREEN *sp)\n{\n    sp->_mouse_gpm_found = FALSE;\n    if ((sp->_dlopen_gpm = dlopen(LIBGPM_SONAME, my_RTLD)) != 0) {\n#if (defined(__GNUC__) && (__GNUC__ >= 5)) || defined(__clang__)\n#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wpedantic\"\n#endif\n\tif (GET_DLSYM(gpm_fd) == 0 ||\n\t    GET_DLSYM(Gpm_Open) == 0 ||\n\t    GET_DLSYM(Gpm_Close) == 0 ||\n\t    GET_DLSYM(Gpm_GetEvent) == 0) {\n#if (defined(__GNUC__) && (__GNUC__ >= 5)) || defined(__clang__)\n#pragma GCC diagnostic pop\n#endif\n\t    T((\"GPM initialization failed: %s\", dlerror()));\n\t    unload_gpm_library(sp);\n\t} else {\n\t    sp->_mouse_gpm_found = TRUE;\n\t    sp->_mouse_gpm_loaded = TRUE;\n\t}\n    }\n}\n#endif\n\nstatic bool\nenable_gpm_mouse(SCREEN *sp, bool enable)\n{\n    bool result;\n\n    T((T_CALLED(\"enable_gpm_mouse(%d)\"), enable));\n\n    if (enable && !sp->_mouse_active) {\n#ifdef HAVE_LIBDL\n\tif (sp->_mouse_gpm_found && !sp->_mouse_gpm_loaded) {\n\t    load_gpm_library(sp);\n\t}\n#endif\n\tif (sp->_mouse_gpm_loaded) {\n\t    int code;\n\n\t    /* GPM: initialize connection to gpm server */\n\t    sp->_mouse_gpm_connect.eventMask = GPM_DOWN | GPM_UP;\n\t    sp->_mouse_gpm_connect.defaultMask =\n\t\t(unsigned short) (~(sp->_mouse_gpm_connect.eventMask | GPM_HARD));\n\t    sp->_mouse_gpm_connect.minMod = 0;\n\t    sp->_mouse_gpm_connect.maxMod =\n\t\t(unsigned short) (~((1 << KG_SHIFT) |\n\t\t\t\t    (1 << KG_SHIFTL) |\n\t\t\t\t    (1 << KG_SHIFTR)));\n\t    /*\n\t     * Note: GPM hardcodes \\E[?1001s and \\E[?1000h during its open.\n\t     * The former is recognized by wscons (SunOS), and the latter by\n\t     * xterm.  Those will not show up in ncurses' traces.\n\t     */\n\t    code = my_Gpm_Open(&sp->_mouse_gpm_connect, 0);\n\t    result = (code >= 0);\n\n\t    /*\n\t     * GPM can return a -2 if it is trying to do something with xterm.\n\t     * Ignore that, since it conflicts with our use of stdin.\n\t     */\n\t    if (code == -2) {\n\t\tmy_Gpm_Close();\n\t    }\n\t} else {\n\t    result = FALSE;\n\t}\n\tsp->_mouse_active = result;\n\tT((\"GPM open %s\", result ? \"succeeded\" : \"failed\"));\n    } else {\n\tif (!enable && sp->_mouse_active) {\n\t    /* GPM: close connection to gpm server */\n\t    my_Gpm_Close();\n\t    sp->_mouse_active = FALSE;\n\t    T((\"GPM closed\"));\n\t}\n\tresult = enable;\n    }\n#ifdef HAVE_LIBDL\n    if (!result) {\n\tunload_gpm_library(sp);\n    }\n#endif\n    returnBool(result);\n}\n#endif /* USE_GPM_SUPPORT */\n\nstatic void\ninitialize_mousetype(SCREEN *sp)\n{\n    T((T_CALLED(\"initialize_mousetype()\")));\n\n    /* Try gpm first, because gpm may be configured to run in xterm */\n#if USE_GPM_SUPPORT\n    if (allow_gpm_mouse(sp)) {\n\tif (!sp->_mouse_gpm_loaded) {\n#ifdef HAVE_LIBDL\n\t    load_gpm_library(sp);\n#else /* !HAVE_LIBDL */\n\t    sp->_mouse_gpm_found = TRUE;\n\t    sp->_mouse_gpm_loaded = TRUE;\n#endif\n\t}\n\n\t/*\n\t * The gpm_fd file-descriptor may be negative (xterm).  So we have to\n\t * maintain our notion of whether the mouse connection is active\n\t * without testing the file-descriptor.\n\t */\n\tif (sp->_mouse_gpm_found && enable_gpm_mouse(sp, TRUE)) {\n\t    sp->_mouse_type = M_GPM;\n\t    sp->_mouse_fd = *(my_gpm_fd);\n\t    T((\"GPM mouse_fd %d\", sp->_mouse_fd));\n\t    returnVoid;\n\t}\n    }\n#endif /* USE_GPM_SUPPORT */\n\n    /* OS/2 VIO */\n#if USE_EMX_MOUSE\n    if (!sp->_emxmouse_thread\n\t&& strstr(SP_TERMTYPE term_names, \"xterm\") == 0\n\t&& NonEmpty(key_mouse)) {\n\tint handles[2];\n\n\tif (pipe(handles) < 0) {\n\t    perror(\"mouse pipe error\");\n\t    returnVoid;\n\t} else {\n\t    int rc;\n\n\t    if (!sp->_emxmouse_buttons[0]) {\n\t\tconst char *s = getenv(\"MOUSE_BUTTONS_123\");\n\n\t\tsp->_emxmouse_buttons[0] = 1;\n\t\tif (s && strlen(s) >= 3) {\n\t\t    sp->_emxmouse_buttons[1] = s[0] - '0';\n\t\t    sp->_emxmouse_buttons[2] = s[1] - '0';\n\t\t    sp->_emxmouse_buttons[3] = s[2] - '0';\n\t\t} else {\n\t\t    sp->_emxmouse_buttons[1] = 1;\n\t\t    sp->_emxmouse_buttons[2] = 3;\n\t\t    sp->_emxmouse_buttons[3] = 2;\n\t\t}\n\t    }\n\t    sp->_emxmouse_wfd = handles[1];\n\t    M_FD(sp) = handles[0];\n\t    /* Needed? */\n\t    setmode(handles[0], O_BINARY);\n\t    setmode(handles[1], O_BINARY);\n\t    /* Do not use CRT functions, we may single-threaded. */\n\t    rc = DosCreateThread((unsigned long *) &sp->_emxmouse_thread,\n\t\t\t\t mouse_server, (long) sp, 0, 8192);\n\t    if (rc) {\n\t\tprintf(\"mouse thread error %d=%#x\", rc, rc);\n\t    } else {\n\t\tsp->_mouse_type = M_XTERM;\n\t    }\n\t    returnVoid;\n\t}\n    }\n#endif /* USE_EMX_MOUSE */\n\n#if USE_SYSMOUSE\n    {\n\tstatic char dev_tty[] = \"/dev/tty\";\n\tstruct mouse_info the_mouse;\n\tchar *the_device = 0;\n\n\tif (NC_ISATTY(sp->_ifd))\n\t    the_device = ttyname(sp->_ifd);\n\tif (the_device == 0)\n\t    the_device = dev_tty;\n\n\tsp->_mouse_fd = open(the_device, O_RDWR);\n\n\tif (sp->_mouse_fd >= 0) {\n\t    /*\n\t     * sysmouse does not have a usable user interface for obtaining\n\t     * mouse events.  The logical way to proceed (reading data on a\n\t     * stream) only works if one opens the device as root.  Even in\n\t     * that mode, careful examination shows we lose events\n\t     * occasionally.  The interface provided for user programs is to\n\t     * establish a signal handler.  really.\n\t     *\n\t     * Take over SIGUSR2 for this purpose since SIGUSR1 is more\n\t     * likely to be used by an application.  getch() will have to\n\t     * handle the misleading EINTR's.\n\t     */\n\t    signal(SIGUSR2, SIG_IGN);\n\t    the_mouse.operation = MOUSE_MODE;\n\t    the_mouse.u.mode.mode = 0;\n\t    the_mouse.u.mode.signal = SIGUSR2;\n\t    if (ioctl(sp->_mouse_fd, CONS_MOUSECTL, &the_mouse) != -1) {\n\t\tsignal(SIGUSR2, handle_sysmouse);\n\t\tthe_mouse.operation = MOUSE_SHOW;\n\t\tioctl(sp->_mouse_fd, CONS_MOUSECTL, &the_mouse);\n\n#if defined(FBIO_MODEINFO) || defined(CONS_MODEINFO)\t/* FreeBSD > 2.x */\n\t\t{\n#ifndef FBIO_GETMODE\t\t/* FreeBSD 3.x */\n#define FBIO_GETMODE    CONS_GET\n#define FBIO_MODEINFO   CONS_MODEINFO\n#endif /* FBIO_GETMODE */\n\t\t    video_info_t the_video;\n\n\t\t    if (ioctl(sp->_mouse_fd,\n\t\t\t      FBIO_GETMODE,\n\t\t\t      &the_video.vi_mode) != -1\n\t\t\t&& ioctl(sp->_mouse_fd,\n\t\t\t\t FBIO_MODEINFO,\n\t\t\t\t &the_video) != -1) {\n\t\t\tsp->_sysmouse_char_width = the_video.vi_cwidth;\n\t\t\tsp->_sysmouse_char_height = the_video.vi_cheight;\n\t\t    }\n\t\t}\n#endif /* defined(FBIO_MODEINFO) || defined(CONS_MODEINFO) */\n\n\t\tif (sp->_sysmouse_char_width <= 0)\n\t\t    sp->_sysmouse_char_width = 8;\n\t\tif (sp->_sysmouse_char_height <= 0)\n\t\t    sp->_sysmouse_char_height = 16;\n\t\tsp->_mouse_type = M_SYSMOUSE;\n\t\treturnVoid;\n\t    }\n\t}\n    }\n#endif /* USE_SYSMOUSE */\n\n#ifdef USE_TERM_DRIVER\n    CallDriver(sp, td_initmouse);\n#else\n    /* we know how to recognize mouse events under \"xterm\" */\n    if (NonEmpty(key_mouse)) {\n\tinit_xterm_mouse(sp);\n    } else if (strstr(SP_TERMTYPE term_names, \"xterm\") != 0) {\n\tif (_nc_add_to_try(&(sp->_keytry), xterm_kmous, KEY_MOUSE) == OK)\n\t    init_xterm_mouse(sp);\n    }\n#endif\n\n    returnVoid;\n}\n\nstatic bool\n_nc_mouse_init(SCREEN *sp)\n/* initialize the mouse */\n{\n    bool result = FALSE;\n\n    if (sp != 0) {\n\tif (!sp->_mouse_initialized) {\n\t    int i;\n\n\t    sp->_mouse_initialized = TRUE;\n\n\t    TR(MY_TRACE, (\"_nc_mouse_init() called\"));\n\n\t    sp->_mouse_eventp = FirstEV(sp);\n\t    for (i = 0; i < EV_MAX; i++)\n\t\tInvalidate(sp->_mouse_events + i);\n\n\t    initialize_mousetype(sp);\n\n\t    T((\"_nc_mouse_init() set mousetype to %d\", sp->_mouse_type));\n\t}\n\tresult = sp->_mouse_initialized;\n    }\n    return result;\n}\n\n/*\n * Query to see if there is a pending mouse event.  This is called from\n * fifo_push() in lib_getch.c\n */\nstatic bool\n_nc_mouse_event(SCREEN *sp)\n{\n    MEVENT *eventp = sp->_mouse_eventp;\n    bool result = FALSE;\n\n    (void) eventp;\n\n    switch (sp->_mouse_type) {\n    case M_XTERM:\n\t/* xterm: never have to query, mouse events are in the keyboard stream */\n#if USE_EMX_MOUSE\n\t{\n\t    char kbuf[3];\n\n\t    int i, res = read(M_FD(sp), &kbuf, 3);\t/* Eat the prefix */\n\t    if (res != 3)\n\t\tprintf(\"Got %d chars instead of 3 for prefix.\\n\", res);\n\t    for (i = 0; i < res; i++) {\n\t\tif (kbuf[i] != key_mouse[i])\n\t\t    printf(\"Got char %d instead of %d for prefix.\\n\",\n\t\t\t   (int) kbuf[i], (int) key_mouse[i]);\n\t    }\n\t    result = TRUE;\n\t}\n#endif /* USE_EMX_MOUSE */\n\tbreak;\n\n#if USE_GPM_SUPPORT\n    case M_GPM:\n\tif (sp->_mouse_fd >= 0) {\n\t    /* query server for event, return TRUE if we find one */\n\t    Gpm_Event ev;\n\n\t    switch (my_Gpm_GetEvent(&ev)) {\n\t    case 0:\n\t\t/* Connection closed, drop the mouse. */\n\t\tsp->_mouse_fd = -1;\n\t\tbreak;\n\t    case 1:\n\t\t/* there's only one mouse... */\n\t\teventp->id = NORMAL_EVENT;\n\n\t\teventp->bstate = 0;\n\t\tswitch (ev.type & 0x0f) {\n\t\tcase (GPM_DOWN):\n\t\t    if (ev.buttons & GPM_B_LEFT)\n\t\t\teventp->bstate |= BUTTON1_PRESSED;\n\t\t    if (ev.buttons & GPM_B_MIDDLE)\n\t\t\teventp->bstate |= BUTTON2_PRESSED;\n\t\t    if (ev.buttons & GPM_B_RIGHT)\n\t\t\teventp->bstate |= BUTTON3_PRESSED;\n\t\t    break;\n\t\tcase (GPM_UP):\n\t\t    if (ev.buttons & GPM_B_LEFT)\n\t\t\teventp->bstate |= BUTTON1_RELEASED;\n\t\t    if (ev.buttons & GPM_B_MIDDLE)\n\t\t\teventp->bstate |= BUTTON2_RELEASED;\n\t\t    if (ev.buttons & GPM_B_RIGHT)\n\t\t\teventp->bstate |= BUTTON3_RELEASED;\n\t\t    break;\n\t\tdefault:\n\t\t    eventp->bstate |= REPORT_MOUSE_POSITION;\n\t\t    break;\n\t\t}\n\n\t\teventp->x = ev.x - 1;\n\t\teventp->y = ev.y - 1;\n\t\teventp->z = 0;\n\n\t\t/* bump the next-free pointer into the circular list */\n\t\tsp->_mouse_eventp = NEXT(eventp);\n\t\tresult = TRUE;\n\t\tbreak;\n\t    }\n\t}\n\tbreak;\n#endif\n\n#if USE_SYSMOUSE\n    case M_SYSMOUSE:\n\tif (sp->_sysmouse_head < sp->_sysmouse_tail) {\n\t    *eventp = sp->_sysmouse_fifo[sp->_sysmouse_head];\n\n\t    /*\n\t     * Point the fifo-head to the next possible location.  If there\n\t     * are none, reset the indices.  This may be interrupted by the\n\t     * signal handler, doing essentially the same reset.\n\t     */\n\t    sp->_sysmouse_head += 1;\n\t    if (sp->_sysmouse_head == sp->_sysmouse_tail) {\n\t\tsp->_sysmouse_tail = 0;\n\t\tsp->_sysmouse_head = 0;\n\t    }\n\n\t    /* bump the next-free pointer into the circular list */\n\t    sp->_mouse_eventp = eventp = NEXT(eventp);\n\t    result = TRUE;\n\t}\n\tbreak;\n#endif /* USE_SYSMOUSE */\n\n#ifdef USE_TERM_DRIVER\n    case M_TERM_DRIVER:\n\twhile (sp->_drv_mouse_head < sp->_drv_mouse_tail) {\n\t    *eventp = sp->_drv_mouse_fifo[sp->_drv_mouse_head];\n\n\t    /*\n\t     * Point the fifo-head to the next possible location.  If there\n\t     * are none, reset the indices.\n\t     */\n\t    sp->_drv_mouse_head += 1;\n\t    if (sp->_drv_mouse_head == sp->_drv_mouse_tail) {\n\t\tsp->_drv_mouse_tail = 0;\n\t\tsp->_drv_mouse_head = 0;\n\t    }\n\n\t    /* bump the next-free pointer into the circular list */\n\t    sp->_mouse_eventp = eventp = NEXT(eventp);\n\t    result = TRUE;\n\t}\n\tbreak;\n#endif\n\n    case M_NONE:\n\tbreak;\n    }\n\n    return result;\t\t/* true if we found an event */\n}\n\n#if USE_EMX_MOUSE\n#define PRESS_POSITION(n) \\\n    do { \\\n\t    eventp->bstate = MASK_PRESS(n); \\\n\t    sp->_mouse_bstate |= MASK_PRESS(n); \\\n\t    if (button & 0x40) { \\\n\t\t    eventp->bstate = MASK_RELEASE(n); \\\n\t\t    sp->_mouse_bstate &= ~MASK_PRESS(n); \\\n\t    } \\\n    } while (0)\n#else\n#define PRESS_POSITION(n) \\\n    do { \\\n\t    eventp->bstate = (mmask_t) ((sp->_mouse_bstate & MASK_PRESS(n)) \\\n\t\t\t\t    ? REPORT_MOUSE_POSITION \\\n\t\t\t\t    : MASK_PRESS(n)); \\\n\t    sp->_mouse_bstate |= MASK_PRESS(n); \\\n    } while (0)\n#endif\n\nstatic bool\nhandle_wheel(SCREEN *sp, MEVENT * eventp, int button, int wheel)\n{\n    bool result = TRUE;\n\n    switch (button & 3) {\n    case 0:\n\tif (wheel) {\n\t    eventp->bstate = MASK_PRESS(4);\n\t    /* Do not record in sp->_mouse_bstate; there will be no\n\t     * corresponding release event.\n\t     */\n\t} else {\n\t    PRESS_POSITION(1);\n\t}\n\tbreak;\n    case 1:\n\tif (wheel) {\n#if NCURSES_MOUSE_VERSION == 2\n\t    eventp->bstate = MASK_PRESS(5);\n\t    /* See comment above for button 4 */\n#else\n\t    /* Ignore this event as it is not a true press of the button */\n\t    eventp->bstate = REPORT_MOUSE_POSITION;\n#endif\n\t} else {\n\t    PRESS_POSITION(2);\n\t}\n\tbreak;\n    case 2:\n\tPRESS_POSITION(3);\n\tbreak;\n    default:\n\tresult = FALSE;\n\tbreak;\n    }\n    return result;\n}\n\nstatic bool\ndecode_X10_bstate(SCREEN *sp, MEVENT * eventp, unsigned intro)\n{\n    bool result;\n\n    eventp->bstate = 0;\n\n    if (!handle_wheel(sp, eventp, (int) intro, (intro & 96) == 96)) {\n\n\t/*\n\t * Release events aren't reported for individual buttons, just for\n\t * the button set as a whole.  However, because there are normally\n\t * no mouse events under xterm that intervene between press and\n\t * release, we can infer the button actually released by looking at\n\t * the previous event.\n\t */\n\tif (sp->_mouse_bstate & BUTTON_PRESSED) {\n\t    int b;\n\n\t    eventp->bstate = BUTTON_RELEASED;\n\t    for (b = 1; b <= MAX_BUTTONS; ++b) {\n\t\tif (!(sp->_mouse_bstate & MASK_PRESS(b)))\n\t\t    eventp->bstate &= ~MASK_RELEASE(b);\n\t    }\n\t    sp->_mouse_bstate = 0;\n\t} else {\n\t    /*\n\t     * xterm will return a stream of release-events to let the\n\t     * application know where the mouse is going, if private mode\n\t     * 1002 or 1003 is enabled.\n\t     */\n\t    eventp->bstate = REPORT_MOUSE_POSITION;\n\t}\n    }\n\n    if (intro & 4) {\n\teventp->bstate |= BUTTON_SHIFT;\n    }\n    if (intro & 8) {\n\teventp->bstate |= BUTTON_ALT;\n    }\n    if (intro & 16) {\n\teventp->bstate |= BUTTON_CTRL;\n    }\n    result = (eventp->bstate & REPORT_MOUSE_POSITION) ? TRUE : FALSE;\n    return result;\n}\n\n/* This code requires that your xterm entry contain the kmous capability and\n * that it be set to the \\E[M documented in the Xterm Control Sequences\n * reference.  This is how we arrange for mouse events to be reported via a\n * KEY_MOUSE return value from wgetch().  After this value is received,\n * _nc_mouse_inline() gets called and is immediately responsible for parsing\n * the mouse status information following the prefix.\n *\n * The following quotes from the ctlseqs.ms document in the XTerm distribution,\n * describing the mouse tracking feature:\n *\n * Parameters for all mouse tracking escape sequences generated by xterm encode\n * numeric parameters in a single character as value+040.  For example, ! is\n * 1.\n *\n * On button press or release, xterm sends ESC [ M CbCxCy.  The low two bits of\n * Cb encode button information:  0=MB1 pressed, 1=MB2 pressed, 2=MB3 pressed,\n * 3=release.  The upper bits encode what modifiers were down when the button\n * was pressed and are added together.  4=Shift, 8=Meta, 16=Control.  Cx and Cy\n * are the x and y coordinates of the mouse event.  The upper left corner is\n * (1,1).\n *\n * (End quote) By the time we get here, we've eaten the key prefix.  FYI, the\n * loop below is necessary because mouse click info isn't guaranteed to present\n * as a single clist item.\n *\n * Wheel mice may return buttons 4 and 5 when the wheel is turned.  We encode\n * those as button presses.\n */\nstatic bool\ndecode_xterm_X10(SCREEN *sp, MEVENT * eventp)\n{\n#define MAX_KBUF 3\n    unsigned char kbuf[MAX_KBUF + 1];\n    size_t grabbed;\n    int res;\n    bool result;\n\n# if USE_PTHREADS_EINTR\n#  if USE_WEAK_SYMBOLS\n    if ((pthread_self) && (pthread_kill) && (pthread_equal))\n#  endif\n\t_nc_globals.read_thread = pthread_self();\n# endif\n    for (grabbed = 0; grabbed < MAX_KBUF; grabbed += (size_t) res) {\n\n\t/* For VIO mouse we add extra bit 64 to disambiguate button-up. */\n\tres = (int) read(\n#if USE_EMX_MOUSE\n\t\t\t    (M_FD(sp) >= 0) ? M_FD(sp) : sp->_ifd,\n#else\n\t\t\t    sp->_ifd,\n#endif\n\t\t\t    kbuf + grabbed, (size_t) (MAX_KBUF - (int) grabbed));\n\tif (res == -1)\n\t    break;\n    }\n#if USE_PTHREADS_EINTR\n    _nc_globals.read_thread = 0;\n#endif\n    kbuf[MAX_KBUF] = '\\0';\n\n    TR(TRACE_IEVENT,\n       (\"_nc_mouse_inline sees the following xterm data: '%s'\", kbuf));\n\n    /* there's only one mouse... */\n    eventp->id = NORMAL_EVENT;\n\n    result = decode_X10_bstate(sp, eventp, kbuf[0]);\n\n    eventp->x = (kbuf[1] - ' ') - 1;\n    eventp->y = (kbuf[2] - ' ') - 1;\n\n    return result;\n}\n\n#ifdef EXP_XTERM_1005\n/*\n * This is identical to X10/X11 responses except that there are two UTF-8\n * characters storing the ordinates instead of two bytes.\n */\nstatic bool\ndecode_xterm_1005(SCREEN *sp, MEVENT * eventp)\n{\n    char kbuf[80];\n    size_t grabbed;\n    size_t limit = (sizeof(kbuf) - 1);\n    unsigned coords[2];\n    bool result;\n\n    coords[0] = 0;\n    coords[1] = 0;\n\n# if USE_PTHREADS_EINTR\n#  if USE_WEAK_SYMBOLS\n    if ((pthread_self) && (pthread_kill) && (pthread_equal))\n#  endif\n\t_nc_globals.read_thread = pthread_self();\n# endif\n    for (grabbed = 0; grabbed < limit;) {\n\tint res;\n\n\tres = (int) read(\n#if USE_EMX_MOUSE\n\t\t\t    (M_FD(sp) >= 0) ? M_FD(sp) : sp->_ifd,\n#else\n\t\t\t    sp->_ifd,\n#endif\n\t\t\t    (kbuf + grabbed), (size_t) 1);\n\tif (res == -1)\n\t    break;\n\tgrabbed += (size_t) res;\n\tif (grabbed > 1) {\n\t    size_t check = 1;\n\t    int n;\n\n\t    for (n = 0; n < 2; ++n) {\n\t\tint rc;\n\n\t\tif (check >= grabbed)\n\t\t    break;\n\t\trc = _nc_conv_to_utf32(&coords[n], kbuf + check, (unsigned)\n\t\t\t\t       (grabbed - check));\n\t\tif (!rc)\n\t\t    break;\n\t\tcheck += (size_t) rc;\n\t    }\n\t    if (n >= 2)\n\t\tbreak;\n\t}\n    }\n#if USE_PTHREADS_EINTR\n    _nc_globals.read_thread = 0;\n#endif\n\n    TR(TRACE_IEVENT,\n       (\"_nc_mouse_inline sees the following xterm data: %s\",\n\t_nc_visbufn(kbuf, (int) grabbed)));\n\n    /* there's only one mouse... */\n    eventp->id = NORMAL_EVENT;\n\n    result = decode_X10_bstate(sp, eventp, UChar(kbuf[0]));\n\n    eventp->x = (int) (coords[0] - ' ') - 1;\n    eventp->y = (int) (coords[1] - ' ') - 1;\n\n    return result;\n}\n#endif /* EXP_XTERM_1005 */\n\n/*\n * ECMA-48 section 5.4\n */\n#define isInter(c) ((c) >= 0x20 && (c) <= 0x2f)\n#define isParam(c) ((c) >= 0x30 && (c) <= 0x3f)\n#define isFinal(c) ((c) >= 0x40 && (c) <= 0x7e)\n\n#define MAX_PARAMS 9\n\ntypedef struct {\n    int nerror;\t\t\t/* nonzero if there are unexpected chars */\n    int nparam;\t\t\t/* number of numeric parameters */\n    int params[MAX_PARAMS];\n    int final;\t\t\t/* the final-character */\n} SGR_DATA;\n\nstatic bool\nread_SGR(SCREEN *sp, SGR_DATA * result)\n{\n    char kbuf[80];\t\t/* bigger than any possible mouse response */\n    int grabbed = 0;\n    int ch = 0;\n    int now = -1;\n    int marker = 1;\n\n    memset(result, 0, sizeof(*result));\n# if USE_PTHREADS_EINTR\n#  if USE_WEAK_SYMBOLS\n    if ((pthread_self) && (pthread_kill) && (pthread_equal))\n#  endif\n\t_nc_globals.read_thread = pthread_self();\n# endif\n\n    do {\n\tint res;\n\n\tres = (int) read(\n#if USE_EMX_MOUSE\n\t\t\t    (M_FD(sp) >= 0) ? M_FD(sp) : sp->_ifd,\n#else\n\t\t\t    sp->_ifd,\n#endif\n\t\t\t    (kbuf + grabbed), (size_t) 1);\n\tif (res == -1)\n\t    break;\n\tif ((grabbed + MAX_KBUF) >= (int) sizeof(kbuf)) {\n\t    result->nerror++;\n\t    break;\n\t}\n\tch = UChar(kbuf[grabbed]);\n\tkbuf[grabbed + 1] = 0;\n\tswitch (ch) {\n\tcase '0':\n\tcase '1':\n\tcase '2':\n\tcase '3':\n\tcase '4':\n\tcase '5':\n\tcase '6':\n\tcase '7':\n\tcase '8':\n\tcase '9':\n\t    if (marker) {\n\t\t++now;\n\t\tresult->nparam = (now + 1);\n\t    }\n\t    marker = 0;\n\t    result->params[now] = (result->params[now] * 10) + (ch - '0');\n\t    break;\n\tcase ';':\n\t    if (marker) {\n\t\t++now;\n\t\tresult->nparam = (now + 1);\n\t    }\n\t    marker = 1;\n\t    break;\n\tdefault:\n\t    if (ch < 32 || ch > 126) {\n\t\t/*\n\t\t * Technically other characters could be interspersed in the\n\t\t * response.  Ignore those for now.\n\t\t */\n\t\tresult->nerror++;\n\t\tcontinue;\n\t    } else if (isFinal(ch)) {\n\t\tif (marker) {\n\t\t    result->nparam++;\n\t\t}\n\t\tresult->final = ch;\n\t    } else {\n\t\tresult->nerror++;\n\t    }\n\t    break;\n\t}\n\t++grabbed;\n    } while (!isFinal(ch));\n#if USE_PTHREADS_EINTR\n    _nc_globals.read_thread = 0;\n#endif\n\n    kbuf[++grabbed] = 0;\n    TR(TRACE_IEVENT,\n       (\"_nc_mouse_inline sees the following xterm data: '%s'\", kbuf));\n    return (grabbed > 0) && (result->nerror == 0);\n}\n\nstatic bool\ndecode_xterm_SGR1006(SCREEN *sp, MEVENT * eventp)\n{\n    SGR_DATA data;\n    bool result = FALSE;\n    if (read_SGR(sp, &data)) {\n\tint b = data.params[0];\n\tint b3 = 1 + (b & 3);\n\n\teventp->id = NORMAL_EVENT;\n\tif (data.final == 'M') {\n\t    (void) handle_wheel(sp, eventp, b, (b & 64) == 64);\n\t} else {\n\t    mmask_t pressed = (mmask_t) NCURSES_MOUSE_MASK(b3, NCURSES_BUTTON_PRESSED);\n\t    mmask_t release = (mmask_t) NCURSES_MOUSE_MASK(b3, NCURSES_BUTTON_RELEASED);\n\t    if (sp->_mouse_bstate & pressed) {\n\t\teventp->bstate = release;\n\t\tsp->_mouse_bstate &= ~pressed;\n\t    } else {\n\t\teventp->bstate = REPORT_MOUSE_POSITION;\n\t    }\n\t}\n\tif (b & 4) {\n\t    eventp->bstate |= BUTTON_SHIFT;\n\t}\n\tif (b & 8) {\n\t    eventp->bstate |= BUTTON_ALT;\n\t}\n\tif (b & 16) {\n\t    eventp->bstate |= BUTTON_CTRL;\n\t}\n\tresult = (eventp->bstate & REPORT_MOUSE_POSITION) ? TRUE : FALSE;\n\teventp->x = (data.params[1] ? (data.params[1] - 1) : 0);\n\teventp->y = (data.params[2] ? (data.params[2] - 1) : 0);\n    }\n    return result;\n}\n\nstatic bool\n_nc_mouse_inline(SCREEN *sp)\n/* mouse report received in the keyboard stream -- parse its info */\n{\n    bool result = FALSE;\n    MEVENT *eventp = sp->_mouse_eventp;\n\n    TR(MY_TRACE, (\"_nc_mouse_inline() called\"));\n\n    if (sp->_mouse_type == M_XTERM) {\n\tswitch (sp->_mouse_format) {\n\tcase MF_X10:\n\t    result = decode_xterm_X10(sp, eventp);\n\t    break;\n\tcase MF_SGR1006:\n\t    result = decode_xterm_SGR1006(sp, eventp);\n\t    break;\n#ifdef EXP_XTERM_1005\n\tcase MF_XTERM_1005:\n\t    result = decode_xterm_1005(sp, eventp);\n\t    break;\n#endif\n\t}\n\n\tTR(MY_TRACE,\n\t   (\"_nc_mouse_inline: primitive mouse-event %s has slot %ld\",\n\t    _nc_tracemouse(sp, eventp),\n\t    (long) IndexEV(sp, eventp)));\n\n\t/* bump the next-free pointer into the circular list */\n\tsp->_mouse_eventp = NEXT(eventp);\n\n\tif (!result) {\n\t    /* If this event is from a wheel-mouse, treat it like position\n\t     * reports and avoid waiting for the release-events which will\n\t     * never come.\n\t     */\n\t    if (eventp->bstate & BUTTON_PRESSED) {\n\t\tint b;\n\n\t\tfor (b = 4; b <= MAX_BUTTONS; ++b) {\n\t\t    if ((eventp->bstate & MASK_PRESS(b))) {\n\t\t\tresult = TRUE;\n\t\t\tbreak;\n\t\t    }\n\t\t}\n\t    }\n\t}\n    }\n\n    return (result);\n}\n\nstatic void\nmouse_activate(SCREEN *sp, int on)\n{\n    if (!on && !sp->_mouse_initialized)\n\treturn;\n\n    if (!_nc_mouse_init(sp))\n\treturn;\n\n    if (on) {\n\tsp->_mouse_bstate = 0;\n\tswitch (sp->_mouse_type) {\n\tcase M_XTERM:\n#if NCURSES_EXT_FUNCS\n\t    NCURSES_SP_NAME(keyok) (NCURSES_SP_ARGx KEY_MOUSE, on);\n#endif\n\t    TPUTS_TRACE(\"xterm mouse initialization\");\n\t    enable_xterm_mouse(sp, 1);\n\t    break;\n#if USE_GPM_SUPPORT\n\tcase M_GPM:\n\t    if (enable_gpm_mouse(sp, TRUE)) {\n\t\tsp->_mouse_fd = *(my_gpm_fd);\n\t\tT((\"GPM mouse_fd %d\", sp->_mouse_fd));\n\t    }\n\t    break;\n#endif\n#if USE_SYSMOUSE\n\tcase M_SYSMOUSE:\n\t    signal(SIGUSR2, handle_sysmouse);\n\t    sp->_mouse_active = TRUE;\n\t    break;\n#endif\n#ifdef USE_TERM_DRIVER\n\tcase M_TERM_DRIVER:\n\t    sp->_mouse_active = TRUE;\n\t    break;\n#endif\n\tcase M_NONE:\n\t    return;\n\t}\n\t/* Make runtime binding to cut down on object size of applications that\n\t * do not use the mouse (e.g., 'clear').\n\t */\n\tsp->_mouse_event = _nc_mouse_event;\n\tsp->_mouse_inline = _nc_mouse_inline;\n\tsp->_mouse_parse = _nc_mouse_parse;\n\tsp->_mouse_resume = _nc_mouse_resume;\n\tsp->_mouse_wrap = _nc_mouse_wrap;\n    } else {\n\n\tswitch (sp->_mouse_type) {\n\tcase M_XTERM:\n\t    TPUTS_TRACE(\"xterm mouse deinitialization\");\n\t    enable_xterm_mouse(sp, 0);\n\t    break;\n#if USE_GPM_SUPPORT\n\tcase M_GPM:\n\t    enable_gpm_mouse(sp, FALSE);\n\t    break;\n#endif\n#if USE_SYSMOUSE\n\tcase M_SYSMOUSE:\n\t    signal(SIGUSR2, SIG_IGN);\n\t    sp->_mouse_active = FALSE;\n\t    break;\n#endif\n#ifdef USE_TERM_DRIVER\n\tcase M_TERM_DRIVER:\n\t    sp->_mouse_active = FALSE;\n\t    break;\n#endif\n\tcase M_NONE:\n\t    return;\n\t}\n    }\n    NCURSES_SP_NAME(_nc_flush) (NCURSES_SP_ARG);\n}\n\n/**************************************************************************\n *\n * Device-independent code\n *\n **************************************************************************/\n\nstatic bool\n_nc_mouse_parse(SCREEN *sp, int runcount)\n/* parse a run of atomic mouse events into a gesture */\n{\n    MEVENT *eventp = sp->_mouse_eventp;\n    MEVENT *next, *ep;\n    MEVENT *first_valid = NULL;\n    MEVENT *first_invalid = NULL;\n    int n;\n    int b;\n    bool merge;\n    bool endLoop;\n\n    TR(MY_TRACE, (\"_nc_mouse_parse(%d) called\", runcount));\n\n    /*\n     * When we enter this routine, the event list next-free pointer\n     * points just past a run of mouse events that we know were separated\n     * in time by less than the critical click interval. The job of this\n     * routine is to collapse this run into a single higher-level event\n     * or gesture.\n     *\n     * We accomplish this in two passes.  The first pass merges press/release\n     * pairs into click events.  The second merges runs of click events into\n     * double or triple-click events.\n     *\n     * It's possible that the run may not resolve to a single event (for\n     * example, if the user quadruple-clicks).  If so, leading events\n     * in the run are ignored if user does not call getmouse in a loop (getting\n     * them from newest to older).\n     *\n     * Note that this routine is independent of the format of the specific\n     * format of the pointing-device's reports.  We can use it to parse\n     * gestures on anything that reports press/release events on a per-\n     * button basis, as long as the device-dependent mouse code puts stuff\n     * on the queue in MEVENT format.\n     */\n\n    /*\n     * Reset all events that were not set, in case the user sometimes calls\n     * getmouse only once and other times until there are no more events in\n     * queue.\n     *\n     * This also allows reaching the beginning of the run.\n     */\n    ep = eventp;\n    for (n = runcount; n < EV_MAX; n++) {\n\tInvalidate(ep);\n\tep = NEXT(ep);\n    }\n\n#ifdef TRACE\n    if (USE_TRACEF(TRACE_IEVENT)) {\n\t_trace_slot(sp, \"before mouse press/release merge:\");\n\t_tracef(\"_nc_mouse_parse: run starts at %ld, ends at %ld, count %d\",\n\t\tRunParams(sp, eventp, ep),\n\t\truncount);\n\t_nc_unlock_global(tracef);\n    }\n#endif /* TRACE */\n\n    /* first pass; merge press/release pairs */\n    endLoop = FALSE;\n    while (!endLoop) {\n\tnext = NEXT(ep);\n\tif (next == eventp) {\n\t    /* Will end the loop, but compact before */\n\t    endLoop = TRUE;\n\t} else {\n\n#define MASK_CHANGED(x) (!(ep->bstate & MASK_PRESS(x)) \\\n\t\t      == !(next->bstate & MASK_RELEASE(x)))\n\n\t    if (ValidEvent(ep) && ValidEvent(next)\n\t\t&& ep->x == next->x && ep->y == next->y\n\t\t&& (ep->bstate & BUTTON_PRESSED)\n\t\t&& (!(next->bstate & BUTTON_PRESSED))) {\n\t\tbool changed = TRUE;\n\n\t\tfor (b = 1; b <= MAX_BUTTONS; ++b) {\n\t\t    if (!MASK_CHANGED(b)) {\n\t\t\tchanged = FALSE;\n\t\t\tbreak;\n\t\t    }\n\t\t}\n\n\t\tif (changed) {\n\t\t    merge = FALSE;\n\t\t    for (b = 1; b <= MAX_BUTTONS; ++b) {\n\t\t\tif ((sp->_mouse_mask & MASK_CLICK(b))\n\t\t\t    && (ep->bstate & MASK_PRESS(b))) {\n\t\t\t    next->bstate &= ~MASK_RELEASE(b);\n\t\t\t    next->bstate |= MASK_CLICK(b);\n\t\t\t    merge = TRUE;\n\t\t\t}\n\t\t    }\n\t\t    if (merge) {\n\t\t\tInvalidate(ep);\n\t\t    }\n\t\t}\n\t    }\n\t}\n\n\t/* Compact valid events */\n\tif (!ValidEvent(ep)) {\n\t    if ((first_valid != NULL) && (first_invalid == NULL)) {\n\t\tfirst_invalid = ep;\n\t    }\n\t} else {\n\t    if (first_valid == NULL) {\n\t\tfirst_valid = ep;\n\t    } else if (first_invalid != NULL) {\n\t\t*first_invalid = *ep;\n\t\tInvalidate(ep);\n\t\tfirst_invalid = NEXT(first_invalid);\n\t    }\n\t}\n\n\tep = next;\n    }\n\n    if (first_invalid != NULL) {\n\teventp = first_invalid;\n    }\n#ifdef TRACE\n    if (USE_TRACEF(TRACE_IEVENT)) {\n\t_trace_slot(sp, \"before mouse click merge:\");\n\tif (first_valid == NULL) {\n\t    _tracef(\"_nc_mouse_parse: no valid event\");\n\t} else {\n\t    _tracef(\"_nc_mouse_parse: run starts at %ld, ends at %ld, count %d\",\n\t\t    RunParams(sp, eventp, first_valid),\n\t\t    runcount);\n\t    _nc_unlock_global(tracef);\n\t}\n    }\n#endif /* TRACE */\n\n    /*\n     * Second pass; merge click runs.  We merge click events forward in the\n     * queue.  For example, double click can be changed to triple click.\n     *\n     * NOTE: There is a problem with this design!  If the application\n     * allows enough click events to pile up in the circular queue so\n     * they wrap around, it will cheerfully merge the newest forward\n     * into the oldest, creating a bogus doubleclick and confusing\n     * the queue-traversal logic rather badly.  Generally this won't\n     * happen, because calling getmouse() marks old events invalid and\n     * ineligible for merges.  The true solution to this problem would\n     * be to timestamp each MEVENT and perform the obvious sanity check,\n     * but the timer element would have to have sub-second resolution,\n     * which would get us into portability trouble.\n     */\n    first_invalid = NULL;\n    endLoop = (first_valid == NULL);\n    ep = first_valid;\n    while (!endLoop) {\n\tnext = NEXT(ep);\n\n\tif (next == eventp) {\n\t    /* Will end the loop, but check event type and compact before */\n\t    endLoop = TRUE;\n\t} else if (!ValidEvent(next)) {\n\t    continue;\n\t} else {\n\t    /* merge click events forward */\n\t    if ((ep->bstate & BUTTON_CLICKED)\n\t\t&& (next->bstate & BUTTON_CLICKED)) {\n\t\tmerge = FALSE;\n\t\tfor (b = 1; b <= MAX_BUTTONS; ++b) {\n\t\t    if ((sp->_mouse_mask & MASK_DOUBLE_CLICK(b))\n\t\t\t&& (ep->bstate & MASK_CLICK(b))\n\t\t\t&& (next->bstate & MASK_CLICK(b))) {\n\t\t\tnext->bstate &= ~MASK_CLICK(b);\n\t\t\tnext->bstate |= MASK_DOUBLE_CLICK(b);\n\t\t\tmerge = TRUE;\n\t\t    }\n\t\t}\n\t\tif (merge) {\n\t\t    Invalidate(ep);\n\t\t}\n\t    }\n\n\t    /* merge double-click events forward */\n\t    if ((ep->bstate & BUTTON_DOUBLE_CLICKED)\n\t\t&& (next->bstate & BUTTON_CLICKED)) {\n\t\tmerge = FALSE;\n\t\tfor (b = 1; b <= MAX_BUTTONS; ++b) {\n\t\t    if ((sp->_mouse_mask & MASK_TRIPLE_CLICK(b))\n\t\t\t&& (ep->bstate & MASK_DOUBLE_CLICK(b))\n\t\t\t&& (next->bstate & MASK_CLICK(b))) {\n\t\t\tnext->bstate &= ~MASK_CLICK(b);\n\t\t\tnext->bstate |= MASK_TRIPLE_CLICK(b);\n\t\t\tmerge = TRUE;\n\t\t    }\n\t\t}\n\t\tif (merge) {\n\t\t    Invalidate(ep);\n\t\t}\n\t    }\n\t}\n\n\t/* Discard event if it does not match event mask */\n\tif (!(ep->bstate & sp->_mouse_mask2)) {\n\t    Invalidate(ep);\n\t}\n\n\t/* Compact valid events */\n\tif (!ValidEvent(ep)) {\n\t    if (ep == first_valid) {\n\t\tfirst_valid = next;\n\t    } else if (first_invalid == NULL) {\n\t\tfirst_invalid = ep;\n\t    }\n\t} else if (first_invalid != NULL) {\n\t    *first_invalid = *ep;\n\t    Invalidate(ep);\n\t    first_invalid = NEXT(first_invalid);\n\t}\n\n\tep = next;\n    }\n\n    if (first_invalid == NULL) {\n\tfirst_invalid = eventp;\n    }\n    sp->_mouse_eventp = first_invalid;\n\n#ifdef TRACE\n    if (first_valid != NULL) {\n\tif (USE_TRACEF(TRACE_IEVENT)) {\n\t    _trace_slot(sp, \"after mouse event queue compaction:\");\n\t    _tracef(\"_nc_mouse_parse: run starts at %ld, ends at %ld, count %d\",\n\t\t    RunParams(sp, first_invalid, first_valid),\n\t\t    runcount);\n\t    _nc_unlock_global(tracef);\n\t}\n\tfor (ep = first_valid; ep != first_invalid; ep = NEXT(ep)) {\n\t    if (ValidEvent(ep))\n\t\tTR(MY_TRACE,\n\t\t   (\"_nc_mouse_parse: returning composite mouse event %s at slot %ld\",\n\t\t    _nc_tracemouse(sp, ep),\n\t\t    (long) IndexEV(sp, ep)));\n\t}\n    }\n#endif /* TRACE */\n\n    /* after all this, do we have a valid event? */\n    return ValidEvent(PREV(first_invalid));\n}\n\nstatic void\n_nc_mouse_wrap(SCREEN *sp)\n/* release mouse -- called by endwin() before shellout/exit */\n{\n    TR(MY_TRACE, (\"_nc_mouse_wrap() called\"));\n\n    switch (sp->_mouse_type) {\n    case M_XTERM:\n\tif (sp->_mouse_mask)\n\t    mouse_activate(sp, FALSE);\n\tbreak;\n#if USE_GPM_SUPPORT\n\t/* GPM: pass all mouse events to next client */\n    case M_GPM:\n\tif (sp->_mouse_mask)\n\t    mouse_activate(sp, FALSE);\n\tbreak;\n#endif\n#if USE_SYSMOUSE\n    case M_SYSMOUSE:\n\tmouse_activate(sp, FALSE);\n\tbreak;\n#endif\n#ifdef USE_TERM_DRIVER\n    case M_TERM_DRIVER:\n\tmouse_activate(sp, FALSE);\n\tbreak;\n#endif\n    case M_NONE:\n\tbreak;\n    }\n}\n\nstatic void\n_nc_mouse_resume(SCREEN *sp)\n/* re-connect to mouse -- called by doupdate() after shellout */\n{\n    TR(MY_TRACE, (\"_nc_mouse_resume() called\"));\n\n    switch (sp->_mouse_type) {\n    case M_XTERM:\n\t/* xterm: re-enable reporting */\n\tif (sp->_mouse_mask)\n\t    mouse_activate(sp, TRUE);\n\tbreak;\n\n#if USE_GPM_SUPPORT\n    case M_GPM:\n\t/* GPM: reclaim our event set */\n\tif (sp->_mouse_mask)\n\t    mouse_activate(sp, TRUE);\n\tbreak;\n#endif\n\n#if USE_SYSMOUSE\n    case M_SYSMOUSE:\n\tmouse_activate(sp, TRUE);\n\tbreak;\n#endif\n\n#ifdef USE_TERM_DRIVER\n    case M_TERM_DRIVER:\n\tmouse_activate(sp, TRUE);\n\tbreak;\n#endif\n\n    case M_NONE:\n\tbreak;\n    }\n}\n\n/**************************************************************************\n *\n * Mouse interface entry points for the API\n *\n **************************************************************************/\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(getmouse) (NCURSES_SP_DCLx MEVENT * aevent)\n{\n    int result = ERR;\n    MEVENT *eventp;\n\n    T((T_CALLED(\"getmouse(%p,%p)\"), (void *) SP_PARM, (void *) aevent));\n\n    if ((aevent != 0) &&\n\t(SP_PARM != 0) &&\n\t(SP_PARM->_mouse_type != M_NONE) &&\n\t(eventp = SP_PARM->_mouse_eventp) != 0) {\n\t/* compute the current-event pointer */\n\tMEVENT *prev = PREV(eventp);\n\n\t/*\n\t * Discard events not matching mask (there could be still some if\n\t * _nc_mouse_parse was not called, e.g., when _nc_mouse_inline returns\n\t * false).\n\t */\n\twhile (ValidEvent(prev) && (!(prev->bstate & SP_PARM->_mouse_mask2))) {\n\t    Invalidate(prev);\n\t    prev = PREV(prev);\n\t}\n\tif (ValidEvent(prev)) {\n\t    /* copy the event we find there */\n\t    *aevent = *prev;\n\n\t    TR(TRACE_IEVENT, (\"getmouse: returning event %s from slot %ld\",\n\t\t\t      _nc_tracemouse(SP_PARM, prev),\n\t\t\t      (long) IndexEV(SP_PARM, prev)));\n\n\t    Invalidate(prev);\t/* so the queue slot becomes free */\n\t    SP_PARM->_mouse_eventp = prev;\n\t    result = OK;\n\t} else {\n\t    /* Reset the provided event */\n\t    aevent->bstate = 0;\n\t    Invalidate(aevent);\n\t    aevent->x = 0;\n\t    aevent->y = 0;\n\t    aevent->z = 0;\n\t}\n    }\n    returnCode(result);\n}\n\n#if NCURSES_SP_FUNCS\n/* grab a copy of the current mouse event */\nNCURSES_EXPORT(int)\ngetmouse(MEVENT * aevent)\n{\n    return NCURSES_SP_NAME(getmouse) (CURRENT_SCREEN, aevent);\n}\n#endif\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(ungetmouse) (NCURSES_SP_DCLx MEVENT * aevent)\n{\n    int result = ERR;\n    MEVENT *eventp;\n\n    T((T_CALLED(\"ungetmouse(%p,%p)\"), (void *) SP_PARM, (void *) aevent));\n\n    if (aevent != 0 &&\n\tSP_PARM != 0 &&\n\t(eventp = SP_PARM->_mouse_eventp) != 0) {\n\n\t/* stick the given event in the next-free slot */\n\t*eventp = *aevent;\n\n\t/* bump the next-free pointer into the circular list */\n\tSP_PARM->_mouse_eventp = NEXT(eventp);\n\n\t/* push back the notification event on the keyboard queue */\n\tresult = NCURSES_SP_NAME(ungetch) (NCURSES_SP_ARGx KEY_MOUSE);\n    }\n    returnCode(result);\n}\n\n#if NCURSES_SP_FUNCS\n/* enqueue a synthesized mouse event to be seen by the next wgetch() */\nNCURSES_EXPORT(int)\nungetmouse(MEVENT * aevent)\n{\n    return NCURSES_SP_NAME(ungetmouse) (CURRENT_SCREEN, aevent);\n}\n#endif\n\nNCURSES_EXPORT(mmask_t)\nNCURSES_SP_NAME(mousemask) (NCURSES_SP_DCLx mmask_t newmask, mmask_t * oldmask)\n/* set the mouse event mask */\n{\n    mmask_t result = 0;\n\n    T((T_CALLED(\"mousemask(%p,%#lx,%p)\"),\n       (void *) SP_PARM,\n       (unsigned long) newmask,\n       (void *) oldmask));\n\n    if (SP_PARM != 0) {\n\tif (oldmask)\n\t    *oldmask = SP_PARM->_mouse_mask;\n\n\tif (newmask || SP_PARM->_mouse_initialized) {\n\t    _nc_mouse_init(SP_PARM);\n\n\t    if (SP_PARM->_mouse_type != M_NONE) {\n\t\tint b;\n\n\t\tresult = newmask &\n\t\t    (REPORT_MOUSE_POSITION\n\t\t     | BUTTON_ALT\n\t\t     | BUTTON_CTRL\n\t\t     | BUTTON_SHIFT\n\t\t     | BUTTON_PRESSED\n\t\t     | BUTTON_RELEASED\n\t\t     | BUTTON_CLICKED\n\t\t     | BUTTON_DOUBLE_CLICKED\n\t\t     | BUTTON_TRIPLE_CLICKED);\n\n\t\tmouse_activate(SP_PARM, (bool) (result != 0));\n\n\t\tSP_PARM->_mouse_mask = result;\n\t\tSP_PARM->_mouse_mask2 = result;\n\n\t\t/*\n\t\t * Make a mask corresponding to the states we will need to\n\t\t * retain (temporarily) while building up the state that the\n\t\t * user asked for.\n\t\t */\n\t\tfor (b = 1; b <= MAX_BUTTONS; ++b) {\n\t\t    if (SP_PARM->_mouse_mask2 & MASK_TRIPLE_CLICK(b))\n\t\t\tSP_PARM->_mouse_mask2 |= MASK_DOUBLE_CLICK(b);\n\t\t    if (SP_PARM->_mouse_mask2 & MASK_DOUBLE_CLICK(b))\n\t\t\tSP_PARM->_mouse_mask2 |= MASK_CLICK(b);\n\t\t    if (SP_PARM->_mouse_mask2 & MASK_CLICK(b))\n\t\t\tSP_PARM->_mouse_mask2 |= (MASK_PRESS(b) |\n\t\t\t\t\t\t  MASK_RELEASE(b));\n\t\t}\n\t    }\n\t}\n    }\n    returnMMask(result);\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(mmask_t)\nmousemask(mmask_t newmask, mmask_t * oldmask)\n{\n    return NCURSES_SP_NAME(mousemask) (CURRENT_SCREEN, newmask, oldmask);\n}\n#endif\n\nNCURSES_EXPORT(bool)\nwenclose(const WINDOW *win, int y, int x)\n/* check to see if given window encloses given screen location */\n{\n    bool result = FALSE;\n\n    T((T_CALLED(\"wenclose(%p,%d,%d)\"), (const void *) win, y, x));\n\n    if (win != 0) {\n\ty -= win->_yoffset;\n\tresult = ((win->_begy <= y &&\n\t\t   win->_begx <= x &&\n\t\t   (win->_begx + win->_maxx) >= x &&\n\t\t   (win->_begy + win->_maxy) >= y) ? TRUE : FALSE);\n    }\n    returnBool(result);\n}\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(mouseinterval) (NCURSES_SP_DCLx int maxclick)\n/* set the maximum mouse interval within which to recognize a click */\n{\n    int oldval;\n\n    T((T_CALLED(\"mouseinterval(%p,%d)\"), (void *) SP_PARM, maxclick));\n\n    if (SP_PARM != 0) {\n\toldval = SP_PARM->_maxclick;\n\tif (maxclick >= 0)\n\t    SP_PARM->_maxclick = maxclick;\n    } else {\n\toldval = DEFAULT_MAXCLICK;\n    }\n\n    returnCode(oldval);\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(int)\nmouseinterval(int maxclick)\n{\n    return NCURSES_SP_NAME(mouseinterval) (CURRENT_SCREEN, maxclick);\n}\n#endif\n\n/* This may be used by other routines to ask for the existence of mouse\n   support */\nNCURSES_EXPORT(bool)\n_nc_has_mouse(SCREEN *sp)\n{\n    return (((0 == sp) || (sp->_mouse_type == M_NONE)) ? FALSE : TRUE);\n}\n\nNCURSES_EXPORT(bool)\nNCURSES_SP_NAME(has_mouse) (NCURSES_SP_DCL0)\n{\n    return _nc_has_mouse(SP_PARM);\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(bool)\nhas_mouse(void)\n{\n    return _nc_has_mouse(CURRENT_SCREEN);\n}\n#endif\n\nNCURSES_EXPORT(bool)\nwmouse_trafo(const WINDOW *win, int *pY, int *pX, bool to_screen)\n{\n    bool result = FALSE;\n\n    T((T_CALLED(\"wmouse_trafo(%p,%p,%p,%d)\"),\n       (const void *) win,\n       (void *) pY,\n       (void *) pX,\n       to_screen));\n\n    if (win && pY && pX) {\n\tint y = *pY;\n\tint x = *pX;\n\n\tif (to_screen) {\n\t    y += win->_begy + win->_yoffset;\n\t    x += win->_begx;\n\t    if (wenclose(win, y, x))\n\t\tresult = TRUE;\n\t} else {\n\t    if (wenclose(win, y, x)) {\n\t\ty -= (win->_begy + win->_yoffset);\n\t\tx -= win->_begx;\n\t\tresult = TRUE;\n\t    }\n\t}\n\tif (result) {\n\t    *pX = x;\n\t    *pY = y;\n\t}\n    }\n    returnBool(result);\n}\n"
    },
    "skipped": [],
    "total_files": 1104
}